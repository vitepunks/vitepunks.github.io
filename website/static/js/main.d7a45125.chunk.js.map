{"version":3,"sources":["../../common/dist/common/index.js","../../common/dist/wallet/index.js","../../common/dist/search/index.js","../../common/dist/contracts/index.js","../../common/dist/contracts/base.contract.js","../../common/dist/clients/index.js","../../common/dist/datasources/index.js","../../common/dist/common/config.js","../../common/dist/common/constants.js","../../common/dist/util/common.util.js","../../common/dist/util/compress.util.js","../../common/dist/util/emitter.js","../../common/dist/util/ensure.js","../../common/dist/util/explorer.util.js","../../common/dist/util/file.util.js","../../common/dist/util/filter.util.js","../../common/dist/util/format.util.js","../../common/dist/util/logger.js","../../common/dist/util/retry.util.js","../../common/dist/util/task.js","../../common/dist/util/token.util.js","../../common/dist/util/transform.util.js","../../common/dist/util/types.js","../../common/dist/util/url.util.js","../../common/dist/wallet/connector.js","../../common/dist/wallet/manager.js","../../common/dist/wallet/store.js","../../common/dist/wallet/types.js","../../common/dist/search/punk.search.js","../../common/dist/contracts/punks.contract.js","../../common/dist/clients/vite.client.js","../../common/dist/datasources/base.datasource.js","../../common/dist/datasources/vite.datasource.js","../../common/dist/index.js","common/config.ts","common/constants.ts","storage/wallet.storage.ts","util/file.util.ts","datasources/mock.datasource.ts","contracts/punks.contract.ts","datasources/vite.datasource.ts","storage/account.storage.ts","wallet/connector.ts","wallet/factory.ts","contexts/common.context.ts","mutations/market.ts","mutations/punk.ts","queries/punk.ts","queries/market.ts","queries/general.ts","clients/apollo.client.ts","common/network.ts","features/layout/components/footer/component.tsx","features/layout/components/header-loading/component.tsx","features/layout/components/main-scroll/component.tsx","features/layout/components/main-wrapper/component.tsx","features/main/components/loading/component.tsx","contexts/web3.tsx","contexts/connectedWeb3.tsx","util/snackbar.util.ts","util/web.util.ts","features/common/components/alert/component.tsx","features/common/components/click-once-button/component.tsx","features/common/components/fa-icon/component.tsx","features/common/components/tooltip/component.tsx","services/punk.service.ts","hooks/punk.hook.ts","theme.tsx","features/punk/components/image-common/component.tsx","features/marketplace/components/browse-item/component.tsx","features/punk/components/infinite-list/component.tsx","services/general.service.ts","services/market.service.ts","util/icon.util.ts","features/common/components/explorer-link/component.tsx","util/moment.util.ts","features/common/components/event-list-loading/component.tsx","features/punk/components/dialog-accept/component.tsx","features/punk/components/dialog-bid/component.tsx","features/punk/components/dialog-cancel/component.tsx","features/punk/components/dialog-gift/component.tsx","features/punk/components/dialog-offer/component.tsx","features/punk/components/dialog/component.tsx","features/account/components/auction-list/component.tsx","features/account/components/auctions/component.tsx","features/account/components/details/component.tsx","features/common/components/test/component.tsx","features/landing/components/main-image/component.tsx","features/common/components/test-image/component.tsx","features/common/components/test-list/component.tsx","features/common/components/countdown/component.tsx","services/contest.service.ts","features/landing/components/contest/component.tsx","features/landing/components/faq/component.tsx","features/landing/components/mints-remaining/component.tsx","features/landing/components/ranking/component.tsx","features/landing/components/main/component.tsx","features/main/components/qrcode/component.tsx","features/main/components/login/component.tsx","features/layout/components/header/component.tsx","features/common/components/event-list/component.tsx","features/marketplace/components/browse-activity/component.tsx","features/marketplace/components/browse-items-filter/component.tsx","features/marketplace/components/browse-items/component.tsx","features/marketplace/components/browse/component.tsx","features/marketplace/components/item/component.tsx","features/punk/components/image/component.tsx","features/punk/components/dialog-mint/component.tsx","features/punk/components/activity/component.tsx","features/punk/components/info-actions/component.tsx","features/punk/components/info/component.tsx","features/punk/components/main/component.tsx","features/main/components/dialog-transaction/component.tsx","features/main/components/quota/component.tsx","features/main/components/main/component.tsx","App.tsx","reportWebVitals.ts","index.tsx","../../common/dist/util/index.js"],"names":["__createBinding","this","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__exportStar","exports","p","prototype","hasOwnProperty","call","value","require","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","pop","length","push","BaseContract","util_1","logger","getLogger","_minQuota","PunkTypes","BigNumberWrapper","objectFromEntries","entries","fromEntries","map","entry","name","initAsync","client","basePath","_a","info","_client","initContractAsyncProtected","initAsyncProtected","_contract","configurable","ensureQuotaAsync","_quota","getQuotaAsync","address","currentQuota","lte","Error","toBoolean","concat","callContractAsync","_account","_methodName","_params","amount","tokenId","result1","error_1","message","abi","waitForAccountBlockAsync","height","FormatUtil","formatMessage","stakeForQuotaAsync","_amount","createAddressListenerAsync","logs","listener","_this","on","results","index","vmLog","decodeVmLog","vmlog","CommonConfig","init","_config","USE_IPFS","set","_flag","IS_PRODUCTION","CONTRACT_ADDRESS","EXPLORER_URL","ENABLE_LOGGER","FETCH_MARKET_DATA","DefaultPunkFilterValues","ActionName","PunkEventTypes","PunkSortTypes","OrderTypes","Networks","CommonConstants","PUNK_NAME","MARKET_DATA_URL","CDN_URL","IPFS_GATEWAY_URL","ZERO_ADDRESS","VITE_TOKEN_ID","CURRENCY_NAME","CURRENCY_DECIMALS","TOTAL_MINTS","id","networkId","rpcUrl","connectorUrl","type","OrderBy","ASC","DESC","PunkSortBy","ID","RANK","BID","OFFER","PunkEventType","Unknown","toString","Mint","Offer","NewBid","CancelBid","Buy","CancelOffer","unknown","list","bid","buy","sale","sell","gift","listing","transfer","claim","accept","acceptBid","cancel","cancelBid","cancelSale","cancelGift","sortBy","orderBy","search","CommonUtil","big_js_1","uuid_1","isString","String","isNumber","isNaN","parseInt","isFinite","isNullOrWhitespace","trim","isNullOrDefault","defaultValue","timeout","ms","setTimeout","toJsonString","data","JSON","stringify","toUint8Array","encoding","Uint8Array","Buffer","from","imageUrlToBlob","url","fetch","blob","random","min","max","Math","floor","calculatePercentage","current","goal","default","div","mul","toNumber","error","calculateMaxRows","total","rpp","page","uuid","v4","appendPath","_path","_appendix","appendix","startsWith","substring","endsWith","isValidHttpUrl","URL","protocol","truncateString","str","maxLength","truncateStringInTheMiddle","strPositionStart","strPositionEnd","CompressUtil","pako","compress","gzip","to","decompress","ungzip","__extends","extendStatics","d","b","setPrototypeOf","__proto__","Array","__","constructor","getEmitter","GlobalEmitter","events_1","_1","_super","arguments","emitReInit","emit","GlobalEvent","ReInit","emitVisibilityChanged","state","DocumentVisibilityChanged","emitConfirmTransactionDialog","open","ConfirmTransactionDialog","emitConnectWalletDialog","ConnectWalletDialog","emitQuotaChanged","quota","QuotaChanged","emitMarketChanged","event","MarketChanged","emitPunkChanged","PunkChanged","emitPunkFilterValuesChanged","oldValues","newValues","PunkFilterValuesChanged","EventEmitter","emitter","Ensure","notNull","property","propertyName","notNullOrWhiteSpace","ExplorerUtil","__1","getBaseUrl","_baseUrl","baseUrl","getAddressUrl","_address","DEFAULT_BASE_URL","getTxUrl","_tx","getNodeFileUtil","NodeFileUtil","getLocalFileUtil","LocalFileUtil","FileUtil","fs","node_fetch_1","readFileAsync","path","readFileSync","writeFileAsync","writeFileSync","localFileUtil","response","arrayBuffer","text","nodeFileUtil","FilterUtil","lodash_1","sortPunks","sort","order","punks","Number","rank","filter","gt","a","_c","_d","_e","_f","_b","offer","minAmount","defaultMessage","console","log","graphQLErrors","substr","formatNumber","number","toLocaleString","navigator","language","__spreadArray","pack","ar","i","l","slice","ExtendedConsoleLogger","ConsoleLogger","LogEventModel","assign","noop","isEnabled","debug","bind","warn","timestamp","Date","toLocaleTimeString","createLogEventModel","args","_i","mapFn","banner","isArray","e1","Function","RetryUtil","promiseRetry","fn","retries","err","catch","Task","task","interval","_task","_taskInterval","_run","_taskTimer","_onStop","_callback","start","callback","stop","window","clearTimeout","TokenUtil","bignumber_js_1","roundBigNumber","bn","tokenDecimals","decimals","BigNumber","pow","decimalPlaces","ROUND_DOWN","formatBigNumber","maxDigits","rounded","formatted","toFormat","formatVite","formatViteFull","formatViteTooltip","TransformUtil","toBigNumber","toMaybeBigNumber","defaultBigNumber","toAddress","toTimestamp","date","getTime","toPunkEvent","__typename","TypeNames","PunkEvent","accountBlockHash","accountBlockHeight","eventType","punkId","fromAddress","toPunkInfo","owner","toMarketBid","toMarketOffer","itemIndex","MarketBid","bidder","MarketOffer","seller","onlySellTo","toAccountAuction","auction","auctionType","DocumentState","WalletType","OrderType","ProviderType","Punk","PunkSortType","PunkDialogType","MarketplaceTab","MarketEventType","AccountAuctionType","ViteQuotaType","VmLogEvent","UrlUtil","getPunkUrl","image","cid","getPunkIpfsUrlByCid","getPunkIpfsUrl","WalletManager","vitejs_1","_store","_mnemonicDeriveIndex","initWallet","wallet","getItem","_wallet","accounts","updateWallet","cb","_setWalletCallback","getWallet","setWallet","updateWalletStore","setItem","createWebWallet","mnemonic","validateMnemonic","resetWallet","account","createWebWalletAccount","WebWallet","active","removeWallet","getAccountByAddress","find","addAccount","setActiveAccount","getActiveAccount","getAccounts","getValidSession","SessionWallet","session","clear","privateKey","deriveAddress","mnemonics","WebWalletAccount","createAddressByPrivateKey","validateMnemonics","SessionWalletAccount","WalletAccount","WalletAccountType","Wallet","_type","baseInit","fromJS","Web","Session","createAccount","forEach","getPunkSearch","PunkSearch","flexsearch_1","_index","Document","document","tag","punks_1","add","query","mappedResult","split","limit","enrich","intersectedResult","intersection","ids","intersectionWith","PunksBaseContract","AbiItemType","base_contract_1","_abiMap","Map","getDeveloper","getAbiItem","getMarketInfo","isContract","balanceOf","ownerOf","getMappedIndex","totalSupply","getTokensOf","tokenURI","getOffer","getBid","transferEvent","marketChangedEvent","punkChangedEvent","_name","getAbiItemByType","_abiItemType","callOffChainMethodAsync","offChain","setMintPriceAsync","_price","MintPrice","setActionPriceAsync","ActionPrice","getDeveloperAsync","setDeveloperAsync","getMarketInfoAsync","marketStarted","market_started","mintsRemaining","mints_remaining","mintPrice","mint_price","actionPrice","action_price","setMarketStartedAsync","_started","isContractAsync","balanceOfAsync","_owner","ownerOfAsync","_tokenId","getMappedIndexAsync","_refId","setMappedIndicesAsync","_indices","_startIndex","mintAsync","_mintPrice","totalSupplyAsync","getTokensOfAsync","tokenURIAsync","getBaseUrlAsync","setBaseUrlAsync","getOfferAsync","_punkId","isForSale","getBidAsync","hasBid","cancelOfferAsync","offerAsync","_minSalePrice","_fee","offerToAddressAsync","buyAsync","cancelBidAsync","enterBidAsync","plus","toFixed","acceptBidAsync","_minPrice","__assign","s","getViteClient","ViteClient","vitejs_http_1","vitejs_ws_1","common_1","wallet_1","providerOptions","retryTimes","retryInterval","_providerType","UNKNOWN","network","providerType","connector","_network","_connector","isResolved","WEBSOCKET","_provider","WS_RPC","_emitter","_isConnected","HTTP_RPC","ViteAPI","dispose","destroy","encodeParameter","param","encodeLogSignature","jsonFunction","methodName","requestAsync","method","request","toLowerCase","includes","getSnapshotChainHeightAsync","getAccountBlockHeightAsync","blockCount","getBalanceAsync","balanceInfoMap","balance","maxQuota","stakeAmount","sendAsync","block","accountBlock","createAccountBlock","sendAccountBlockAsync","beneficiaryAddress","params","createContractAsync","binary","code","responseLatency","quotaMultiplier","randomDegree","contractAddress","offchaincode","dataBase64","resultBytes","outputs","offchainDecodeResult","resultList","encodeFunctionCall","selfAddr","offChainCode","decodeParameters","topics","j","abiItem","decodeVmLogByAbiItem","topic","decodeLog","inputs","utils","_Buffer","getEventsByBlockAsync","fromHeight","toHeight","payload","midHeight","addressHeightRange","subscribe","removeListener","unsubscribe","waitForNextVmLogEventAsync","now","blockByHeight","receiveBlockHash","blockByHash","err_1","getAccountBlockStatus","receiveTransactionAsync","blocks","ab","sendBlockHash","hash","receiveAllOnroadTxAsync","RECEIVE_PER_ROUND","error_2","setProvider","setPrivateKey","autoSetPreviousAccountBlock","sign","send","sendTransactionAsync","status","resolveAccountBlockData","statusTxt","blockType","bytes","BaseDataSource","search_1","_accountAuctions","_punkSearch","_punkAttributes","_punks","_punksFiltered","searchTerm","items","initPunkAttributesAsync","attributes","process","fileUtil","parse","initPunksAsync","infos","punk","_punkInfos","getDefaultPunkInfos","unshift","updatePunksAsync","initAccountAuctionsAsync","addAccountAuction","bidAuction","offerAuction","_auction","auctions","Bid","initBaseAsync","initPunkInfosAsync","disposeProtected","getAccount","walletManager","getPunkAttributesAsync","getPunkAsync","getPunksAsync","_limit","_offset","_sort","_order","_search","getPunksAllAsync","getActionPriceAsync","_actionPrice","getMintPriceAsync","getAccountAuctionsAsync","_cursor","cursorIndex","orderAccountAuctions","findIndex","eq","cursor","prev","createId","ViteBaseDataSource","axios_1","clients_1","contracts_1","updatePunkInfo","punkEvent","getNewMarketEventsAsync","_from","encodedLogSignature","contract","gte","marketDataUrl","responseType","_refHeight","refHeight","minus","updatePunkInfosAsync","_listener","handleVmLogAsync","getPunkEventsAsync","_id","_height","events","blockHeight","getEventsFromHeight","reverse","toPunkEvents","getPunkOwnerAsync","getPunksByAddressAsync","result_1","getMarketBidAsync","getMarketOfferAsync","getMarketEventsAsync","maximum","getMarketEventsByTypeAsync","checkQuotaAsync","fee","getFeeAsync","bidAsync","marketEvent","transformed","decoded","events_2","newRefHeight","config","_useIpfs","getClientConfig","ClientConstants","APP_NAME","USE_MOCK_DATASOURCE","WEB_WALLET_STORAGE_SPACE","SESSION_WALLET_STORAGE_SPACE","BG_URL","ITEM_BG_URL","SAMPLE_PUNK_URL","LANDING_IMAGE_URL","QUOTA_WIKI_URL","DISCORD_URL","TWITTER_URL","GITHUB_URL","QUOTA_THRESHOLD","WalletStore","_webWalletKey","_sessionWalletKey","localStorage","removeItem","sessionStorage","saveData","manager","getWalletManager","BrowserFileUtil","browserFileUtil","getBrowserFileUtil","MockDataSource","_events","clearMock","shiftedBy","ds","PunksContract","_fileUtil","punksContract","ViteDataSource","WalletConnector","opts","meta","_walletManager","saveSession","stopBizHeartBeat","sessionAccounts","existing","uri","res","rej","sendCustomRequest","r","updateSession","Connector","WalletConnectorFactory","bridge","lastAccount","createConnector","createSession","CommonContext","_isInitialized","_datasource","clientConfig","NETWORK_ID","walletConnectorFactory","checkIpfsAsync","img","Image","onload","onerror","src","context","getCommonContext","OFFER_MUTATION","gql","CANCEL_OFFER_MUTATION","BUY_MUTATION","BID_MUTATION","ACCEPT_BID_MUTATION","CANCEL_BID_MUTATION","MarketMutations","parent","datasource","cancelOffer","MINT_MUTATION","PunkMutations","mint","PUNK_FIELDS","PUNK_EVENT_FIELDS","GET_PUNK_ATTRIBUTES_QUERY","GET_PUNK_EVENTS_QUERY","GET_PUNK_OWNER_QUERY","GET_PUNK_QUERY","GET_PUNKS_QUERY","GET_PUNKS_ALL_QUERY","GET_PUNKS_BY_ADDRESS_QUERY","PunkQueries","punkAttributes","punkEvents","offset","punkOwner","punksAll","punksByAddress","MARKET_BID_FIELDS","MARKET_OFFER_FIELDS","GET_MARKET_INFO_QUERY","GET_MARKET_BID_QUERY","GET_MARKET_OFFER_QUERY","GET_MARKET_EVENTS_QUERY","MarketQueries","marketInfo","marketBid","marketOffer","marketEvents","GET_QUOTA_QUERY","GET_ACCOUNT_AUCTIONS_QUERY","GeneralQueries","accountAuctions","ApolloClientWrapper","ApolloClient","cache","InMemoryCache","typePolicies","Query","fields","offsetLimitPagination","resolvers","GraphQLScalarType","description","serialize","parseValue","Mutation","headers","getApolloClient","_networkHeight","_setNetworkCallback","getNetworkManager","Root","styled","theme","Footer","Typography","TitleTypography","HeaderLoading","props","AppBar","position","Toolbar","variant","MainScrollStyled","MainScrollInner","MainScroll","children","restProps","Container","maxWidth","MainWrapperStyled","MainWrapper","MainLoading","useState","retryCount","setRetryCount","useEffect","Chip","size","Web3Context","React","createContext","Web3Provider","setError","setNetwork","onSetWalletCallback","onSetNetworkCallback","Provider","ConnectedWeb3Context","useConnectedWeb3Context","useContext","ConnectedWeb3","connection","setConnection","mounted","useRef","web3Context","useWeb3Context","commonContext","networkManager","getNetwork","logout","useCallback","location","reload","_retryCount","startTimestamp","retryId","isInitialized","minDelay","elapsed","SnackbarUtil","snackbar","enqueueSnackbar","WebUtil","getDocumentState","visibilityState","Hidden","Active","Alert","color","backgroundColor","Paper","Box","sx","padding","textAlign","ClickOnceButton","isDisabled","setIsDisabled","handleClick","callbackFn","enqueueError","LoadingButton","loading","fullWidth","disabled","onClick","startIcon","FontAwesomeSvgIcon","forwardRef","ref","icon","width","svgPathData","SvgIcon","viewBox","style","opacity","ExtendedBootstrapTooltip","BootstrapTooltip","tooltipClasses","tooltip","className","Tooltip","classes","popper","palette","common","white","boxShadow","shadows","fontSize","arrow","black","typography","pxToRem","border","PunkService","_apollo","getById","_fetchPolicy","variables","fetchPolicy","getOwnerAsync","getEventsAsync","getExtendedAsync","_punk","defaultPunkExtended","ownerQuery","bidQuery","offerQuery","punkExtended","mutate","mutation","Boolean","service","getPunkService","usePunkById","useQuery","notifyOnNetworkStatusChange","refetchWritePolicy","createTheme","fontFamily","join","primary","main","secondary","CustomCardMedia","PunkImage","PunkImageCard","matches","useMediaQuery","breakpoints","up","Card","minWidth","CardActionArea","component","RouterLink","target","top","right","title","placement","faGem","ml","backgroundImage","CardContent","overflow","mb","mr","MarketplaceBrowseItem","item","left","faUserCircle","bottom","faHandHoldingUsd","mt","faTag","float","EmptyResult","isLoading","isEmpty","InfiniteListLoading","Grid","container","spacing","justifyContent","alignItems","xs","md","InfinitePunkList","pt","pb","dataLength","fetchMoreDataAsync","hasMore","loader","scrollThreshold","scrollableTarget","marginBottom","sm","lg","display","getContractQuota","getAccountAuctions","getGeneralService","MarketService","getMarketService","IconUtil","getBuyEventTypeIcon","faDonate","getClaimEventTypeIcon","faExchangeAlt","getOfferEventTypeIcon","getGiftEventTypeIcon","faGift","getCancelSaleEventTypeIcon","faPowerOff","getCancelGiftEventTypeIcon","faEraser","getPunkEventTypeIcon","faTrophy","faBan","faQuestion","getAccountAuctionTypeIcon","ExplorerLinkType","MomentUtil","moment","locale","unix","utc","local","getLocal","format","getLocalTime","getLocalDate","unit","diff","duration","EventListLoading","count","PunkAcceptDialog","setAmount","ACCEPT_OFFER","handleClose","setState","handleConfirmAsync","_message","_success","replace","enqueueMessage","callbackAsync","Dialog","onClose","DialogTitle","DialogContent","gutterBottom","FormControl","Input","DialogActions","Button","PunkBidDialog","setDisabled","changeAmount","updateFee","DialogContentText","InputLabel","htmlFor","onChange","autoFocus","startAdornment","InputAdornment","align","PunkCancelDialog","actionName","setActionName","CANCEL_BID","PunkGiftDialog","setAddress","changeAddress","placeholder","marginTop","PunkOfferDialog","lt","PunkDialog","setFee","handleEvent","off","success","GIFT","CANCEL_OFFER","ACCEPT_BID","CustomAvatar","Avatar","CustomTableCell","TableCell","EventTableRow","isAnon","setIsAnon","isOwner","setIsOwner","onCompleted","momentUtil","handleClaimAsync","handleOpenDialog","TableRow","scope","getEventName","Link","underline","getLocalReverseFormatted","getFromUnix","isAuthorized","AccountAuctionList","currentAuction","setCurrentAuction","dialogState","setDialogState","emptyMessage","_item","cleanupAsync","dialogCallbackAsync","newEvents","TableContainer","Table","stickyHeader","TableHead","TableBody","AccountAuctions","setIsAuthorized","setIsLoading","setHasMore","setCursor","setEvents","setNewEvents","refetchDataAsync","refetch","refresh","refreshAsync","addNewEvent","Stack","direction","IconButton","AccountDetails","useParams","currentLength","fetchMore","wordBreak","Test","viteClient","confetti","particleCount","spread","ImageContainer","Img1","Img2","LandingMainImage","imageUrl1","setImageUrl1","imageUrl2","setImageUrl2","setImageUrlsAsync","punkId1","punk1","punkId2","punk2","TestImage","TestList","allPunks","setAllPunks","setPunks","Set","filtered","has","Countdown","useMemo","getDuration","days","hours","minutes","seconds","asSeconds","ContestService","_context","endTimestamp","_startTimestamp","_endTimestamp","_result","_items","isPlaceholder","_itemsOrdered","_itemsFilterd","uniqBy","ExplorerLink","getUrl","Address","setUrl","href","AddressExplorerLink","startPosition","LandingContest","createPlaceholder","ranks","setRanks","setRanksAsync","getRankingsAsync","asc","px","flexGrow","paragraph","Skeleton","animation","elevation","toISOString","Accordion","disableGutters","square","divider","borderBottom","mode","AccordionSummary","expandIcon","flexDirection","transform","marginLeft","AccordionDetails","MuiAccordionDetails","borderTop","LandingFaq","faqExpanded","setFaqExpanded","handleChange","panel","newExpanded","expanded","MintsRemaining","pct","setPct","minValue","LinearProgress","LinearProgressWithLabel","LandingRanking","maxRares","holders","rares","LandingMain","displayNumber","setMintPrice","setMarketStarted","canMint","setCanMint","setMintsRemaining","punkService","handleMintAsync","preload","autoPlay","muted","playsInline","loop","faTwitter","faGithub","faDiscord","alt","QrCode","elementRef","defaultOpt","ecLevel","HIGH","minVersion","background","modes","DRAW_WITH_IMAGE_BOX","radius","mSize","clientWidth","innerHTML","qrcode","generate","LoginDialog","setUri","setMnemonic","setOpen","connectorFactory","handleCreateSession","createAsync","ENABLE_MNEMONIC_LOGIN","autoComplete","Header","navigate","useNavigate","useTheme","loginOpen","setLoginOpen","showAccount","textDecoration","Fragment","formatTimestamp","PRE_MINT_HEIGHT","isPreMint","Transaction","EventList","MarketplaceBrowseActivity","MarketplaceBrowseItemsFilter","values","setValues","attributesQuery","emitEvent","Autocomplete","multiple","freeSolo","options","getOptionLabel","option","filterSelectedOptions","renderInput","TextField","FormGroup","Select","labelId","MenuItem","ToggleButtonGroup","exclusive","ToggleButton","MarketplaceBrowseItems","setFilter","TabPanel","other","role","hidden","MarketplaceBrowse","initialValue","tab","Activity","setValue","borderColor","Tabs","newValue","Tab","MarketplaceItem","CardContainer","Img","imageUrl","setImageUrl","maxHeight","MintDialog","setPunkId","punkImage","setPunkImage","punkCid","setPunkCid","zIndex","transitionDuration","keepMounted","paddingBottom","PunkActivity","PunkInfoActions","hasOwner","setHasOwner","showAll","showAny","showBuy","showClaim","showBid","showSell","showAcceptBid","showCancelBid","showCancelSale","showCancelGift","showButtonState","setShowButtonState","handleFailureAsync","refetchAsync","faCheck","InfoContainer","BottomContent","PunkInfo","down","setPunkExtended","dateRef","setDateRef","all","newOwner","newBid","newOffer","usePunkInfo","Verified","borderRadius","verticalAlign","faSnowflake","PunkDetails","Transition","Slide","TransitionComponent","QuotaContainer","QuotaAlert","ContractQuota","setQuota","showContainer","setShowContainer","setInterval","quotaResult","clearInterval","severity","endIcon","Main","visibility","setVisibility","basename","BASENAME","useSnackbar","addEventListener","removeEventListener","element","Background","App","apolloClient","LocalizationProvider","dateAdapter","DateAdapter","maxSnack","ApolloProvider","reportWebVitals","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","ThemeProvider","CssBaseline","querySelector"],"mappings":"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","file":"static/js/main.d7a45125.chunk.js","sourcesContent":["\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./config\"), exports);\r\n__exportStar(require(\"./constants\"), exports);\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./connector\"), exports);\r\n__exportStar(require(\"./manager\"), exports);\r\n__exportStar(require(\"./store\"), exports);\r\n__exportStar(require(\"./types\"), exports);\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./punk.search\"), exports);\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./base.contract\"), exports);\r\n__exportStar(require(\"./punks.contract\"), exports);\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseContract = void 0;\r\nvar util_1 = require(\"../util\");\r\nvar logger = (0, util_1.getLogger)();\r\nvar BaseContract = /** @class */ (function () {\r\n    function BaseContract() {\r\n        this._minQuota = new util_1.PunkTypes.BigNumberWrapper(\"10000\");\r\n        this.objectFromEntries = function (entries) {\r\n            return Object.fromEntries(entries.map(function (entry) {\r\n                return [entry.name, entry.value];\r\n            }));\r\n        };\r\n    }\r\n    BaseContract.prototype.initAsync = function (client, basePath) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"Init BaseContract\")();\r\n                        this._client = client;\r\n                        return [4 /*yield*/, this.initContractAsyncProtected(basePath)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.initAsyncProtected()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Object.defineProperty(BaseContract.prototype, \"contract\", {\r\n        get: function () {\r\n            return this._contract;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    BaseContract.prototype.ensureQuotaAsync = function (_quota) {\r\n        if (_quota === void 0) { _quota = this._minQuota; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this._client.getQuotaAsync(this._contract.address)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (result.currentQuota.lte(_quota)) {\r\n                            throw new Error(\"Contract has insufficient quota\");\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseContract.prototype.toBoolean = function (value) {\r\n        if (value === \"0\") {\r\n            return false;\r\n        }\r\n        else if (value === \"1\") {\r\n            return true;\r\n        }\r\n        else {\r\n            throw new Error(\"Value \".concat(value, \" is not boolean\"));\r\n        }\r\n    };\r\n    BaseContract.prototype.callContractAsync = function (_account, _methodName, _params, amount, tokenId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result1, result2, error_1, message;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.ensureQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        _a.trys.push([2, 5, , 6]);\r\n                        return [4 /*yield*/, this._client.callContractAsync(_account, _methodName, this._contract.abi, _params, this._contract.address, amount, tokenId)];\r\n                    case 3:\r\n                        result1 = _a.sent();\r\n                        return [4 /*yield*/, this._client.waitForAccountBlockAsync(_account.address, result1.height)];\r\n                    case 4:\r\n                        result2 = _a.sent();\r\n                        return [2 /*return*/, result2];\r\n                    case 5:\r\n                        error_1 = _a.sent();\r\n                        message = util_1.FormatUtil.formatMessage(error_1);\r\n                        if (message) {\r\n                            throw new Error(message);\r\n                        }\r\n                        else {\r\n                            throw new Error(\"Error\");\r\n                        }\r\n                        return [3 /*break*/, 6];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseContract.prototype.stakeForQuotaAsync = function (_account, _amount) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result1, result2;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this._client.stakeForQuotaAsync(_account, this._contract.address, _amount)];\r\n                    case 1:\r\n                        result1 = _a.sent();\r\n                        return [4 /*yield*/, this._client.waitForAccountBlockAsync(_account.address, result1.height)];\r\n                    case 2:\r\n                        result2 = _a.sent();\r\n                        return [2 /*return*/, result2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseContract.prototype.createAddressListenerAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logs, listener;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logs = [];\r\n                        return [4 /*yield*/, this._client.createAddressListenerAsync(this._contract.address)];\r\n                    case 1:\r\n                        listener = _a.sent();\r\n                        listener.on(function (results) {\r\n                            for (var index = 0; index < results.length; index++) {\r\n                                var result = results[index];\r\n                                logger.info(result)();\r\n                                var vmLog = _this._client.decodeVmLog(result.vmlog, _this._contract.abi);\r\n                                logs.push(vmLog);\r\n                            }\r\n                        });\r\n                        return [2 /*return*/, {\r\n                                logs: logs,\r\n                                listener: listener\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return BaseContract;\r\n}());\r\nexports.BaseContract = BaseContract;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./vite.client\"), exports);\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./base.datasource\"), exports);\r\n__exportStar(require(\"./vite.datasource\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CommonConfig = void 0;\r\nvar CommonConfig = /** @class */ (function () {\r\n    function CommonConfig() {\r\n    }\r\n    CommonConfig.init = function (_config) {\r\n        this._config = _config;\r\n    };\r\n    Object.defineProperty(CommonConfig, \"USE_IPFS\", {\r\n        get: function () {\r\n            return this._config.USE_IPFS;\r\n        },\r\n        set: function (_flag) {\r\n            this._config.USE_IPFS = _flag;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CommonConfig, \"IS_PRODUCTION\", {\r\n        get: function () {\r\n            return this._config.IS_PRODUCTION;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CommonConfig, \"CONTRACT_ADDRESS\", {\r\n        get: function () {\r\n            return this._config.CONTRACT_ADDRESS;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CommonConfig, \"EXPLORER_URL\", {\r\n        get: function () {\r\n            return this._config.EXPLORER_URL;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CommonConfig, \"ENABLE_LOGGER\", {\r\n        get: function () {\r\n            return this._config.ENABLE_LOGGER;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CommonConfig, \"FETCH_MARKET_DATA\", {\r\n        get: function () {\r\n            return this._config.FETCH_MARKET_DATA;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return CommonConfig;\r\n}());\r\nexports.CommonConfig = CommonConfig;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DefaultPunkFilterValues = exports.ActionName = exports.PunkEventTypes = exports.PunkSortTypes = exports.OrderTypes = exports.Networks = exports.CommonConstants = void 0;\r\nvar util_1 = require(\"../util\");\r\nexports.CommonConstants = {\r\n    PUNK_NAME: 'VitePunk',\r\n    MARKET_DATA_URL: 'https://raw.githubusercontent.com/vitepunks/analytics/master/market_data/raw.json',\r\n    CDN_URL: 'https://cdn.vitepunks.com/',\r\n    //IPFS_GATEWAY_URL: 'https://ipfs.io/ipfs/',\r\n    IPFS_GATEWAY_URL: 'https://cloudflare-ipfs.com/ipfs/',\r\n    EXPLORER_URL: 'https://buidl.viteview.xyz/#/',\r\n    ZERO_ADDRESS: 'vite_0000000000000000000000000000000000000000a4f3a0cb58',\r\n    VITE_TOKEN_ID: 'tti_5649544520544f4b454e6e40',\r\n    CURRENCY_NAME: 'VITE',\r\n    CURRENCY_DECIMALS: 18,\r\n    TOTAL_MINTS: 10000\r\n};\r\nexports.Networks = [\r\n    {\r\n        id: 0,\r\n        networkId: 0,\r\n        name: 'UNKNOWN',\r\n        rpcUrl: '',\r\n        connectorUrl: ''\r\n    },\r\n    {\r\n        id: 1,\r\n        networkId: 1,\r\n        name: 'MAINNET',\r\n        rpcUrl: 'wss://node.vite.net/gvite/ws',\r\n        connectorUrl: 'wss://biforst.vite.net'\r\n    },\r\n    {\r\n        id: 2,\r\n        networkId: 2,\r\n        name: 'TESTNET',\r\n        rpcUrl: 'wss://buidl.vite.net/gvite/ws',\r\n        connectorUrl: 'wss://biforst.vite.net'\r\n    },\r\n    {\r\n        id: 3,\r\n        networkId: 2,\r\n        name: 'TESTNET+MOCK',\r\n        rpcUrl: 'wss://buidl.vite.net/gvite/ws',\r\n        connectorUrl: 'wss://biforst.vite.net'\r\n    },\r\n    {\r\n        id: 4,\r\n        networkId: 5,\r\n        name: 'DEBUG',\r\n        rpcUrl: 'ws://localhost:23457',\r\n        connectorUrl: 'wss://biforst.vite.net'\r\n    }\r\n];\r\nexports.OrderTypes = [\r\n    {\r\n        name: \"Asc\",\r\n        type: util_1.PunkTypes.OrderBy.ASC\r\n    },\r\n    {\r\n        name: \"Desc\",\r\n        type: util_1.PunkTypes.OrderBy.DESC\r\n    }\r\n];\r\nexports.PunkSortTypes = [\r\n    {\r\n        name: \"Id\",\r\n        type: util_1.PunkTypes.PunkSortBy.ID\r\n    },\r\n    {\r\n        name: \"Rank\",\r\n        type: util_1.PunkTypes.PunkSortBy.RANK\r\n    },\r\n    {\r\n        name: \"Bid\",\r\n        type: util_1.PunkTypes.PunkSortBy.BID\r\n    },\r\n    {\r\n        name: \"Price\",\r\n        type: util_1.PunkTypes.PunkSortBy.OFFER\r\n    }\r\n];\r\nexports.PunkEventTypes = [\r\n    {\r\n        name: \"Unknown\",\r\n        type: util_1.PunkTypes.PunkEventType.Unknown.toString()\r\n    },\r\n    {\r\n        name: \"Mint\",\r\n        type: util_1.PunkTypes.PunkEventType.Mint.toString()\r\n    },\r\n    {\r\n        name: \"List\",\r\n        type: util_1.PunkTypes.PunkEventType.Offer.toString()\r\n    },\r\n    {\r\n        name: \"New bid\",\r\n        type: util_1.PunkTypes.PunkEventType.NewBid.toString()\r\n    },\r\n    {\r\n        name: \"Cancel bid\",\r\n        type: util_1.PunkTypes.PunkEventType.CancelBid.toString()\r\n    },\r\n    {\r\n        name: \"Buy\",\r\n        type: util_1.PunkTypes.PunkEventType.Buy.toString()\r\n    },\r\n    {\r\n        name: \"Clear\",\r\n        type: util_1.PunkTypes.PunkEventType.CancelOffer.toString()\r\n    },\r\n];\r\nexports.ActionName = {\r\n    unknown: \"Unknown\",\r\n    list: \"List\",\r\n    bid: \"Bid\",\r\n    buy: \"Buy\",\r\n    sale: \"Sale\",\r\n    sell: \"Sell\",\r\n    gift: \"Gift\",\r\n    listing: \"Listing\",\r\n    transfer: \"Transfer\",\r\n    claim: \"Claim\",\r\n    accept: \"Accept\",\r\n    acceptBid: \"Accept bid\",\r\n    cancel: \"Cancel\",\r\n    cancelBid: \"Cancel bid\",\r\n    cancelSale: \"Cancel sale\",\r\n    cancelGift: \"Cancel gift\"\r\n};\r\nexports.DefaultPunkFilterValues = {\r\n    sortBy: util_1.PunkTypes.PunkSortBy.ID,\r\n    orderBy: util_1.PunkTypes.OrderBy.DESC,\r\n    search: \"\"\r\n};\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CommonUtil = void 0;\r\nvar big_js_1 = require(\"big.js\");\r\nvar uuid_1 = require(\"uuid\");\r\nvar CommonUtil = /** @class */ (function () {\r\n    function CommonUtil() {\r\n    }\r\n    CommonUtil.isString = function (value) {\r\n        return typeof value === 'string' || value instanceof String;\r\n    };\r\n    CommonUtil.isNumber = function (value) {\r\n        return !isNaN(parseInt(value)) && isFinite(value);\r\n    };\r\n    CommonUtil.isNullOrWhitespace = function (value) {\r\n        if (!CommonUtil.isString(value)) {\r\n            // console.log('Expected a string but got: ', value);\r\n            return true;\r\n        }\r\n        else {\r\n            return value === null || value === undefined || value.trim() === '';\r\n        }\r\n    };\r\n    CommonUtil.isNullOrDefault = function (value, defaultValue) {\r\n        return CommonUtil.isNullOrWhitespace(value) || value === defaultValue;\r\n    };\r\n    CommonUtil.timeout = function (ms) {\r\n        return new Promise(function (resolve) { return setTimeout(resolve, ms); });\r\n    };\r\n    CommonUtil.toJsonString = function (data) {\r\n        return JSON.stringify(data, null, 2);\r\n    };\r\n    CommonUtil.toUint8Array = function (data, encoding) {\r\n        if (encoding === void 0) { encoding = 'utf8'; }\r\n        return new Uint8Array(Buffer.from(data, encoding));\r\n    };\r\n    CommonUtil.imageUrlToBlob = function (url) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, fetch(url)];\r\n                    case 1: return [2 /*return*/, (_a.sent()).blob()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    CommonUtil.random = function (min, max) {\r\n        return Math.floor(Math.random() * (max - min + 1) + min);\r\n    };\r\n    CommonUtil.calculatePercentage = function (current, goal) {\r\n        try {\r\n            if (current && goal) {\r\n                return Math.floor((0, big_js_1.default)(current).div((0, big_js_1.default)(goal)).mul(100).toNumber());\r\n            }\r\n        }\r\n        catch (error) {\r\n        }\r\n        return 0;\r\n    };\r\n    CommonUtil.calculateMaxRows = function (total, rpp, page) {\r\n        return Math.min(Math.min(total - rpp * page, rpp), total);\r\n    };\r\n    CommonUtil.uuid = function () {\r\n        return (0, uuid_1.v4)();\r\n    };\r\n    CommonUtil.appendPath = function (_path, _appendix) {\r\n        if (!_path || !_appendix || CommonUtil.isNullOrWhitespace(_path) || CommonUtil.isNullOrWhitespace(_appendix)) {\r\n            return _path;\r\n        }\r\n        var delimiter = '/';\r\n        var appendix = _appendix.startsWith(delimiter) ? _appendix.substring(1, _appendix.length) : _appendix;\r\n        return _path.endsWith(delimiter) ? _path + appendix : _path + delimiter + appendix;\r\n    };\r\n    CommonUtil.isValidHttpUrl = function (value) {\r\n        var url;\r\n        try {\r\n            url = new URL(value);\r\n        }\r\n        catch (_) {\r\n            return false;\r\n        }\r\n        return url.protocol === \"http:\" || url.protocol === \"https:\";\r\n    };\r\n    CommonUtil.truncateString = function (str, maxLength) {\r\n        if (str) {\r\n            if (maxLength < str.length) {\r\n                return \"\".concat(str.substring(0, maxLength), \"...\");\r\n            }\r\n        }\r\n        return str;\r\n    };\r\n    CommonUtil.truncateStringInTheMiddle = function (str, strPositionStart, strPositionEnd) {\r\n        if (str) {\r\n            var minTruncatedLength = strPositionStart + strPositionEnd;\r\n            if (minTruncatedLength < str.length) {\r\n                return \"\".concat(str.substring(0, strPositionStart), \"...\").concat(str.substring(str.length - strPositionEnd, str.length));\r\n            }\r\n        }\r\n        return str;\r\n    };\r\n    return CommonUtil;\r\n}());\r\nexports.CommonUtil = CommonUtil;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CompressUtil = void 0;\r\nvar pako = require(\"pako\");\r\nvar CompressUtil = /** @class */ (function () {\r\n    function CompressUtil() {\r\n    }\r\n    CompressUtil.compress = function (data) {\r\n        return pako.gzip(data, { to: \"string\" });\r\n    };\r\n    CompressUtil.decompress = function (data) {\r\n        return pako.ungzip(data, { to: \"string\" });\r\n    };\r\n    return CompressUtil;\r\n}());\r\nexports.CompressUtil = CompressUtil;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getEmitter = exports.GlobalEmitter = void 0;\r\nvar events_1 = require(\"events\");\r\nvar _1 = require(\".\");\r\nvar GlobalEmitter = /** @class */ (function (_super) {\r\n    __extends(GlobalEmitter, _super);\r\n    function GlobalEmitter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    GlobalEmitter.prototype.emitReInit = function () {\r\n        this.emit(_1.PunkTypes.GlobalEvent.ReInit);\r\n    };\r\n    GlobalEmitter.prototype.emitVisibilityChanged = function (state) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.DocumentVisibilityChanged, state);\r\n    };\r\n    GlobalEmitter.prototype.emitConfirmTransactionDialog = function (open) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.ConfirmTransactionDialog, open);\r\n    };\r\n    GlobalEmitter.prototype.emitConnectWalletDialog = function (open) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.ConnectWalletDialog, open);\r\n    };\r\n    GlobalEmitter.prototype.emitQuotaChanged = function (address, quota) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.QuotaChanged, address, quota);\r\n    };\r\n    GlobalEmitter.prototype.emitMarketChanged = function (event) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.MarketChanged, event);\r\n    };\r\n    GlobalEmitter.prototype.emitPunkChanged = function (event) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.PunkChanged, event);\r\n    };\r\n    GlobalEmitter.prototype.emitPunkFilterValuesChanged = function (oldValues, newValues) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.PunkFilterValuesChanged, oldValues, newValues);\r\n    };\r\n    return GlobalEmitter;\r\n}(events_1.EventEmitter));\r\nexports.GlobalEmitter = GlobalEmitter;\r\nvar emitter = new GlobalEmitter();\r\nvar getEmitter = function () {\r\n    return emitter;\r\n};\r\nexports.getEmitter = getEmitter;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Ensure = void 0;\r\nvar Ensure = /** @class */ (function () {\r\n    function Ensure() {\r\n    }\r\n    Ensure.notNull = function (property, propertyName, message) {\r\n        if (property === null || property === undefined) {\r\n            if (message) {\r\n                throw new Error(message);\r\n            }\r\n            else {\r\n                throw new Error('Unexpected null exception. ' + propertyName);\r\n            }\r\n        }\r\n    };\r\n    Ensure.notNullOrWhiteSpace = function (property, propertyName, message) {\r\n        if (property === null || property === undefined || (property === null || property === void 0 ? void 0 : property.trim()) === '') {\r\n            if (message) {\r\n                throw new Error(message);\r\n            }\r\n            else {\r\n                throw new Error('Unexpected null exception. ' + propertyName);\r\n            }\r\n        }\r\n    };\r\n    Ensure.maxLength = function (property, propertyName, maxLength) {\r\n        if (property && property.length > maxLength) {\r\n            throw new Error(\"\".concat(propertyName, \" exceeds the maximum length of \").concat(maxLength));\r\n        }\r\n    };\r\n    return Ensure;\r\n}());\r\nexports.Ensure = Ensure;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ExplorerUtil = void 0;\r\nvar _1 = require(\".\");\r\nvar __1 = require(\"..\");\r\nvar ExplorerUtil = /** @class */ (function () {\r\n    function ExplorerUtil() {\r\n    }\r\n    ExplorerUtil.getBaseUrl = function (_baseUrl) {\r\n        var baseUrl = _baseUrl;\r\n        if (!baseUrl || _1.CommonUtil.isNullOrWhitespace(baseUrl)) {\r\n            baseUrl = __1.CommonConfig.EXPLORER_URL;\r\n        }\r\n        baseUrl = baseUrl.endsWith('/') ? baseUrl.substring(0, baseUrl.length - 1) : baseUrl;\r\n        return baseUrl;\r\n    };\r\n    ExplorerUtil.getAddressUrl = function (_address, _baseUrl) {\r\n        var baseUrl = ExplorerUtil.getBaseUrl(_baseUrl);\r\n        if (baseUrl === ExplorerUtil.DEFAULT_BASE_URL) {\r\n            return \"\".concat(baseUrl, \"/address/\").concat(_address);\r\n        }\r\n        return \"\".concat(baseUrl, \"/account/\").concat(_address);\r\n    };\r\n    ExplorerUtil.getTxUrl = function (_tx, _baseUrl) {\r\n        var baseUrl = ExplorerUtil.getBaseUrl(_baseUrl);\r\n        if (baseUrl === ExplorerUtil.DEFAULT_BASE_URL) {\r\n            return \"\".concat(baseUrl, \"/tx/\").concat(_tx);\r\n        }\r\n        return \"\".concat(baseUrl, \"/tx/\").concat(_tx);\r\n    };\r\n    ExplorerUtil.DEFAULT_BASE_URL = \"https://vitescan.io\";\r\n    return ExplorerUtil;\r\n}());\r\nexports.ExplorerUtil = ExplorerUtil;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getNodeFileUtil = exports.NodeFileUtil = exports.getLocalFileUtil = exports.LocalFileUtil = exports.FileUtil = void 0;\r\nvar fs = require(\"fs\");\r\nvar node_fetch_1 = require(\"node-fetch\");\r\nvar FileUtil = /** @class */ (function () {\r\n    function FileUtil() {\r\n    }\r\n    return FileUtil;\r\n}());\r\nexports.FileUtil = FileUtil;\r\nvar LocalFileUtil = /** @class */ (function (_super) {\r\n    __extends(LocalFileUtil, _super);\r\n    function LocalFileUtil() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    LocalFileUtil.prototype.readFileAsync = function (path, encoding) {\r\n        if (encoding === void 0) { encoding = 'utf8'; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, Promise.resolve(fs.readFileSync(path, encoding))];\r\n            });\r\n        });\r\n    };\r\n    LocalFileUtil.prototype.writeFileAsync = function (path, data, encoding) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, Promise.resolve(fs.writeFileSync(path, data, encoding))];\r\n            });\r\n        });\r\n    };\r\n    return LocalFileUtil;\r\n}(FileUtil));\r\nexports.LocalFileUtil = LocalFileUtil;\r\nvar localFileUtil = new LocalFileUtil();\r\nvar getLocalFileUtil = function () {\r\n    return localFileUtil;\r\n};\r\nexports.getLocalFileUtil = getLocalFileUtil;\r\nvar NodeFileUtil = /** @class */ (function (_super) {\r\n    __extends(NodeFileUtil, _super);\r\n    function NodeFileUtil() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    NodeFileUtil.prototype.readFileAsync = function (path, encoding) {\r\n        if (encoding === void 0) { encoding = 'utf8'; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, (0, node_fetch_1.default)(path)];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        switch (encoding) {\r\n                            case 'binary':\r\n                                return [2 /*return*/, response.arrayBuffer()];\r\n                            default:\r\n                                return [2 /*return*/, response.text()];\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    NodeFileUtil.prototype.writeFileAsync = function (path, data, encoding) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    return NodeFileUtil;\r\n}(FileUtil));\r\nexports.NodeFileUtil = NodeFileUtil;\r\nvar nodeFileUtil = new NodeFileUtil();\r\nvar getNodeFileUtil = function () {\r\n    return nodeFileUtil;\r\n};\r\nexports.getNodeFileUtil = getNodeFileUtil;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterUtil = void 0;\r\nvar lodash_1 = require(\"lodash\");\r\nvar _1 = require(\".\");\r\nvar FilterUtil = /** @class */ (function () {\r\n    function FilterUtil() {\r\n    }\r\n    FilterUtil.sortPunks = function (sort, order, punks) {\r\n        if (!punks || !sort || !order) {\r\n            return punks;\r\n        }\r\n        switch (sort) {\r\n            case _1.PunkTypes.PunkSortBy.ID:\r\n                return (0, lodash_1.orderBy)(punks, function (p) { return Number(p.id); }, order === _1.PunkTypes.OrderBy.ASC ? 'asc' : 'desc');\r\n            case _1.PunkTypes.PunkSortBy.RANK:\r\n                return (0, lodash_1.orderBy)(punks, function (p) { return p.rank; }, order === _1.PunkTypes.OrderBy.ASC ? 'asc' : 'desc');\r\n            case _1.PunkTypes.PunkSortBy.BID:\r\n                return punks.filter(function (e) { return !!e.bid && e.bid.amount.gt(0); }).sort(function (a, b) {\r\n                    var _c, _d, _e, _f;\r\n                    var _a = (_d = (_c = a.bid) === null || _c === void 0 ? void 0 : _c.amount) !== null && _d !== void 0 ? _d : new _1.PunkTypes.BigNumberWrapper(0);\r\n                    var _b = (_f = (_e = b.bid) === null || _e === void 0 ? void 0 : _e.amount) !== null && _f !== void 0 ? _f : new _1.PunkTypes.BigNumberWrapper(0);\r\n                    if (order === _1.PunkTypes.OrderBy.ASC) {\r\n                        return _a.gt(_b) ? 1 : -1;\r\n                    }\r\n                    return _a.gt(_b) ? -1 : 1;\r\n                });\r\n            case _1.PunkTypes.PunkSortBy.OFFER:\r\n                return punks.filter(function (e) { return !!e.offer && e.offer.minAmount.gt(0); }).sort(function (a, b) {\r\n                    var _c, _d, _e, _f;\r\n                    var _a = (_d = (_c = a.offer) === null || _c === void 0 ? void 0 : _c.minAmount) !== null && _d !== void 0 ? _d : new _1.PunkTypes.BigNumberWrapper(0);\r\n                    var _b = (_f = (_e = b.offer) === null || _e === void 0 ? void 0 : _e.minAmount) !== null && _f !== void 0 ? _f : new _1.PunkTypes.BigNumberWrapper(0);\r\n                    if (order === _1.PunkTypes.OrderBy.ASC) {\r\n                        return _a.gt(_b) ? 1 : -1;\r\n                    }\r\n                    return _a.gt(_b) ? -1 : 1;\r\n                });\r\n            default:\r\n                return punks;\r\n        }\r\n    };\r\n    return FilterUtil;\r\n}());\r\nexports.FilterUtil = FilterUtil;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FormatUtil = void 0;\r\nvar _1 = require(\".\");\r\nvar FormatUtil = /** @class */ (function () {\r\n    function FormatUtil() {\r\n    }\r\n    FormatUtil.formatMessage = function (data) {\r\n        var _a;\r\n        var defaultMessage = \"Something went wrong. Probably your account has insufficient balance or quota.\";\r\n        if (data) {\r\n            console.log(data);\r\n            var message = void 0;\r\n            if (!_1.CommonUtil.isString(data)) {\r\n                if (data.message) {\r\n                    message = data.message;\r\n                }\r\n                else if ((_a = data.error) === null || _a === void 0 ? void 0 : _a.message) {\r\n                    message = data.error.message;\r\n                }\r\n                else if (data.graphQLErrors) {\r\n                    if (data.graphQLErrors.length > 0) {\r\n                        message = data.graphQLErrors[0].message;\r\n                    }\r\n                    else {\r\n                        message = defaultMessage;\r\n                    }\r\n                }\r\n                else {\r\n                    message = JSON.stringify(data);\r\n                    if (message === \"{}\") {\r\n                        message = defaultMessage;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                message = data;\r\n            }\r\n            if (message.length > 128) {\r\n                return message.substr(0, 128) + \"...\";\r\n            }\r\n            return message;\r\n        }\r\n        return defaultMessage;\r\n    };\r\n    FormatUtil.formatNumber = function (number) {\r\n        var _a;\r\n        if (!number) {\r\n            return \"0\";\r\n        }\r\n        return number.toLocaleString((_a = navigator.language) !== null && _a !== void 0 ? _a : 'en-US');\r\n    };\r\n    return FormatUtil;\r\n}());\r\nexports.FormatUtil = FormatUtil;\r\n","\"use strict\";\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getLogger = exports.ExtendedConsoleLogger = exports.ConsoleLogger = exports.LogEventModel = void 0;\r\nvar __1 = require(\"..\");\r\nvar LogEventModel = /** @class */ (function () {\r\n    function LogEventModel(init) {\r\n        Object.assign(this, init);\r\n    }\r\n    return LogEventModel;\r\n}());\r\nexports.LogEventModel = LogEventModel;\r\nvar noop = function () { return undefined; };\r\nvar ConsoleLogger = /** @class */ (function () {\r\n    function ConsoleLogger() {\r\n    }\r\n    Object.defineProperty(ConsoleLogger.prototype, \"isEnabled\", {\r\n        get: function () {\r\n            return __1.CommonConfig.ENABLE_LOGGER;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ConsoleLogger.prototype, \"debug\", {\r\n        get: function () {\r\n            if (this.isEnabled) {\r\n                return console.debug.bind(console);\r\n            }\r\n            else {\r\n                return noop;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ConsoleLogger.prototype, \"info\", {\r\n        get: function () {\r\n            if (this.isEnabled) {\r\n                return console.info.bind(console);\r\n            }\r\n            else {\r\n                return noop;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ConsoleLogger.prototype, \"warn\", {\r\n        get: function () {\r\n            if (this.isEnabled) {\r\n                return console.warn.bind(console);\r\n            }\r\n            else {\r\n                return noop;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ConsoleLogger.prototype, \"error\", {\r\n        get: function () {\r\n            if (this.isEnabled) {\r\n                return console.error.bind(console);\r\n            }\r\n            else {\r\n                return noop;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ConsoleLogger;\r\n}());\r\nexports.ConsoleLogger = ConsoleLogger;\r\nvar ExtendedConsoleLogger = /** @class */ (function () {\r\n    function ExtendedConsoleLogger() {\r\n    }\r\n    Object.defineProperty(ExtendedConsoleLogger.prototype, \"isEnabled\", {\r\n        get: function () {\r\n            return __1.CommonConfig.ENABLE_LOGGER;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ExtendedConsoleLogger.prototype.timestamp = function (type) {\r\n        return \"[\".concat(type, \" \").concat(new Date().toLocaleTimeString(), \"]\");\r\n    };\r\n    ExtendedConsoleLogger.prototype.createLogEventModel = function (type) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var mapFn = function (e) {\r\n            if (__1.CommonUtil.isString(e)) {\r\n                return e;\r\n            }\r\n            else if (e instanceof Error) {\r\n                return e.message;\r\n            }\r\n            return __1.CommonUtil.toJsonString(e);\r\n        };\r\n        var result = new LogEventModel({\r\n            banner: this.timestamp(type),\r\n            args: args === null || args === void 0 ? void 0 : args.map(function (e) { return Array.isArray(e) ? e.map(function (e1) { return mapFn(e1); }) : mapFn(e); })\r\n        });\r\n        return result;\r\n    };\r\n    Object.defineProperty(ExtendedConsoleLogger.prototype, \"debug\", {\r\n        get: function () {\r\n            var _this = this;\r\n            if (this.isEnabled) {\r\n                return function () {\r\n                    var _a;\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    var result = _this.createLogEventModel('DEBUG', args);\r\n                    return (_a = Function.prototype.bind).call.apply(_a, __spreadArray([console.debug, console, result.banner], args, false));\r\n                };\r\n            }\r\n            else {\r\n                return function () {\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    return noop;\r\n                };\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ExtendedConsoleLogger.prototype, \"info\", {\r\n        get: function () {\r\n            var _this = this;\r\n            if (this.isEnabled) {\r\n                return function () {\r\n                    var _a;\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    var result = _this.createLogEventModel('INFO', args);\r\n                    return (_a = Function.prototype.bind).call.apply(_a, __spreadArray([console.info, console, result.banner], args, false));\r\n                };\r\n            }\r\n            else {\r\n                return function () {\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    return noop;\r\n                };\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ExtendedConsoleLogger.prototype, \"warn\", {\r\n        get: function () {\r\n            var _this = this;\r\n            if (this.isEnabled) {\r\n                return function () {\r\n                    var _a;\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    var result = _this.createLogEventModel('WARN', args);\r\n                    return (_a = Function.prototype.bind).call.apply(_a, __spreadArray([console.warn, console, result.banner], args, false));\r\n                };\r\n            }\r\n            else {\r\n                return function () {\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    return noop;\r\n                };\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ExtendedConsoleLogger.prototype, \"error\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return function () {\r\n                var _a;\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                if ((args === null || args === void 0 ? void 0 : args.length) > 0) {\r\n                    if (!__1.CommonUtil.isString(args[0])) {\r\n                        args.push('(See console output for more information.)');\r\n                    }\r\n                }\r\n                var result = _this.createLogEventModel('ERROR', args);\r\n                return (_a = Function.prototype.bind).call.apply(_a, __spreadArray([console.error, console, result.banner], args, false));\r\n            };\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ExtendedConsoleLogger;\r\n}());\r\nexports.ExtendedConsoleLogger = ExtendedConsoleLogger;\r\nvar logger = new ExtendedConsoleLogger();\r\nvar getLogger = function () {\r\n    return logger;\r\n};\r\nexports.getLogger = getLogger;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RetryUtil = void 0;\r\nvar RetryUtil = /** @class */ (function () {\r\n    function RetryUtil() {\r\n    }\r\n    // https://stackoverflow.com/questions/45444601/promise-retries-until-success-failure-with-typescript\r\n    RetryUtil.promiseRetry = function (fn, retries, err) {\r\n        if (retries === void 0) { retries = 5; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, new Promise(function (resolve) { return setTimeout(resolve, (5 - retries) * 1000); })];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/, !retries ? Promise.reject(err) : fn().catch(function (error) { return RetryUtil.promiseRetry(fn, (retries - 1), error); })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return RetryUtil;\r\n}());\r\nexports.RetryUtil = RetryUtil;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Task = void 0;\r\nvar Task = /** @class */ (function () {\r\n    function Task(task, interval) {\r\n        this._task = task;\r\n        this._taskInterval = interval;\r\n        return this;\r\n    }\r\n    Task.prototype._run = function () {\r\n        var _this = this;\r\n        this._taskTimer = setTimeout(function () { return __awaiter(_this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this._task) {\r\n                            this._onStop();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, this._task()];\r\n                    case 1:\r\n                        if (!(_a.sent())) {\r\n                            this._onStop();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        this._run();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); }, this._taskInterval);\r\n    };\r\n    Task.prototype._onStop = function () {\r\n        this._callback && this._callback();\r\n    };\r\n    Task.prototype.start = function (callback) {\r\n        this._callback = callback;\r\n        if (this._taskTimer) {\r\n            return;\r\n        }\r\n        this._run();\r\n    };\r\n    Task.prototype.stop = function () {\r\n        this._onStop();\r\n        if (!this._taskTimer) {\r\n            return;\r\n        }\r\n        window.clearTimeout(this._taskTimer);\r\n        this._taskTimer = undefined;\r\n    };\r\n    return Task;\r\n}());\r\nexports.Task = Task;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TokenUtil = void 0;\r\nvar bignumber_js_1 = require(\"bignumber.js\");\r\nvar __1 = require(\"..\");\r\nvar TokenUtil = /** @class */ (function () {\r\n    function TokenUtil() {\r\n    }\r\n    TokenUtil.roundBigNumber = function (bn, tokenDecimals, decimals) {\r\n        return bn.div(new bignumber_js_1.BigNumber(\"10\").pow(tokenDecimals)).decimalPlaces(decimals, bignumber_js_1.BigNumber.ROUND_DOWN);\r\n    };\r\n    TokenUtil.formatBigNumber = function (bn, tokenDecimals, decimals, maxDigits) {\r\n        if (maxDigits === void 0) { maxDigits = 14; }\r\n        var rounded = TokenUtil.roundBigNumber(bn, tokenDecimals, decimals);\r\n        if (rounded.lte(0)) {\r\n            return \"<1\";\r\n        }\r\n        var formatted = rounded.toFormat();\r\n        if (maxDigits >= formatted.length) {\r\n            return formatted;\r\n        }\r\n        return formatted.substring(0, maxDigits) + \"...\";\r\n    };\r\n    TokenUtil.formatVite = function (bn) {\r\n        return TokenUtil.formatBigNumber(bn, __1.CommonConstants.CURRENCY_DECIMALS, 2);\r\n    };\r\n    TokenUtil.formatViteFull = function (bn) {\r\n        return TokenUtil.roundBigNumber(bn, __1.CommonConstants.CURRENCY_DECIMALS, __1.CommonConstants.CURRENCY_DECIMALS).toFormat();\r\n    };\r\n    TokenUtil.formatViteTooltip = function (bn) {\r\n        var rounded = TokenUtil.roundBigNumber(bn, __1.CommonConstants.CURRENCY_DECIMALS, __1.CommonConstants.CURRENCY_DECIMALS);\r\n        return \"\".concat(rounded.toFormat(), \" $\").concat(__1.CommonConstants.CURRENCY_NAME);\r\n    };\r\n    return TokenUtil;\r\n}());\r\nexports.TokenUtil = TokenUtil;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TransformUtil = void 0;\r\nvar _1 = require(\".\");\r\nvar __1 = require(\"..\");\r\nvar TransformUtil = /** @class */ (function () {\r\n    function TransformUtil() {\r\n    }\r\n    Object.defineProperty(TransformUtil, \"defaultBigNumber\", {\r\n        get: function () {\r\n            return new _1.PunkTypes.BigNumberWrapper(\"0\");\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    TransformUtil.toBigNumber = function (number) {\r\n        var _a;\r\n        return (_a = TransformUtil.toMaybeBigNumber(number)) !== null && _a !== void 0 ? _a : TransformUtil.defaultBigNumber;\r\n    };\r\n    TransformUtil.toMaybeBigNumber = function (number) {\r\n        if (!number || (_1.CommonUtil.isNullOrWhitespace(number) && !_1.CommonUtil.isNumber(number))) {\r\n            return null;\r\n        }\r\n        return new _1.PunkTypes.BigNumberWrapper(number);\r\n    };\r\n    TransformUtil.toAddress = function (value) {\r\n        if (_1.CommonUtil.isNullOrWhitespace(value) || value === __1.CommonConstants.ZERO_ADDRESS) {\r\n            return null;\r\n        }\r\n        return value;\r\n    };\r\n    TransformUtil.toTimestamp = function (date) {\r\n        if (date) {\r\n            return Math.floor(date.getTime() / 1000).toString();\r\n        }\r\n        return \"0\";\r\n    };\r\n    TransformUtil.toPunkEvent = function (event) {\r\n        var _a, _b, _c, _d;\r\n        return {\r\n            __typename: (_a = event.__typename) !== null && _a !== void 0 ? _a : _1.PunkTypes.TypeNames.PunkEvent,\r\n            id: (_b = event.id) !== null && _b !== void 0 ? _b : \"\".concat(event.accountBlockHash, \"-\").concat(event.accountBlockHeight, \"-\").concat(event.eventType),\r\n            accountBlockHash: event.accountBlockHash,\r\n            accountBlockHeight: TransformUtil.toBigNumber(event.accountBlockHeight),\r\n            timestamp: TransformUtil.toBigNumber(event.timestamp),\r\n            eventType: Number(event.eventType),\r\n            punkId: event.punkId,\r\n            amount: TransformUtil.toBigNumber(event.amount),\r\n            fromAddress: (_c = TransformUtil.toAddress(event.fromAddress)) !== null && _c !== void 0 ? _c : '',\r\n            toAddress: (_d = TransformUtil.toAddress(event.toAddress)) !== null && _d !== void 0 ? _d : ''\r\n        };\r\n    };\r\n    TransformUtil.toPunkInfo = function (info) {\r\n        if (!info) {\r\n            return null;\r\n        }\r\n        return {\r\n            id: info.id,\r\n            owner: info.owner,\r\n            bid: TransformUtil.toMarketBid(info.bid, info.id),\r\n            offer: TransformUtil.toMarketOffer(info.offer, info.id)\r\n        };\r\n    };\r\n    TransformUtil.toMarketBid = function (bid, itemIndex) {\r\n        var _a;\r\n        if (!bid) {\r\n            return null;\r\n        }\r\n        return {\r\n            __typename: (_a = bid.__typename) !== null && _a !== void 0 ? _a : _1.PunkTypes.TypeNames.MarketBid,\r\n            itemIndex: TransformUtil.toBigNumber(itemIndex !== null && itemIndex !== void 0 ? itemIndex : bid.itemIndex),\r\n            bidder: bid.bidder,\r\n            amount: TransformUtil.toBigNumber(bid.amount),\r\n            timestamp: TransformUtil.toMaybeBigNumber(bid.timestamp)\r\n        };\r\n    };\r\n    TransformUtil.toMarketOffer = function (offer, itemIndex) {\r\n        var _a, _b;\r\n        if (!offer) {\r\n            return null;\r\n        }\r\n        return {\r\n            __typename: (_a = offer.__typename) !== null && _a !== void 0 ? _a : _1.PunkTypes.TypeNames.MarketOffer,\r\n            itemIndex: TransformUtil.toBigNumber(itemIndex !== null && itemIndex !== void 0 ? itemIndex : offer.itemIndex),\r\n            seller: offer.seller,\r\n            minAmount: TransformUtil.toBigNumber(offer.minAmount),\r\n            onlySellTo: (_b = offer.onlySellTo) !== null && _b !== void 0 ? _b : null,\r\n            timestamp: TransformUtil.toMaybeBigNumber(offer.timestamp)\r\n        };\r\n    };\r\n    TransformUtil.toAccountAuction = function (auction) {\r\n        return {\r\n            timestamp: TransformUtil.toBigNumber(auction.timestamp),\r\n            auctionType: Number(auction.auctionType),\r\n            punkId: auction.punkId,\r\n            owner: auction.owner,\r\n            amount: TransformUtil.toBigNumber(auction.amount),\r\n            address: auction.address\r\n        };\r\n    };\r\n    return TransformUtil;\r\n}());\r\nexports.TransformUtil = TransformUtil;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PunkTypes = void 0;\r\nvar bignumber_js_1 = require(\"bignumber.js\");\r\nvar PunkTypes;\r\n(function (PunkTypes) {\r\n    var BigNumberWrapper = /** @class */ (function (_super) {\r\n        __extends(BigNumberWrapper, _super);\r\n        function BigNumberWrapper() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return BigNumberWrapper;\r\n    }(bignumber_js_1.default));\r\n    PunkTypes.BigNumberWrapper = BigNumberWrapper;\r\n    var OrderBy;\r\n    (function (OrderBy) {\r\n        OrderBy[\"ASC\"] = \"ASC\";\r\n        OrderBy[\"DESC\"] = \"DESC\";\r\n    })(OrderBy = PunkTypes.OrderBy || (PunkTypes.OrderBy = {}));\r\n    var PunkSortBy;\r\n    (function (PunkSortBy) {\r\n        PunkSortBy[\"BID\"] = \"BID\";\r\n        PunkSortBy[\"ID\"] = \"ID\";\r\n        PunkSortBy[\"OFFER\"] = \"OFFER\";\r\n        PunkSortBy[\"RANK\"] = \"RANK\";\r\n    })(PunkSortBy = PunkTypes.PunkSortBy || (PunkTypes.PunkSortBy = {}));\r\n    var DocumentState;\r\n    (function (DocumentState) {\r\n        DocumentState[DocumentState[\"Unknown\"] = 0] = \"Unknown\";\r\n        DocumentState[DocumentState[\"Hidden\"] = 1] = \"Hidden\";\r\n        DocumentState[DocumentState[\"Active\"] = 2] = \"Active\";\r\n    })(DocumentState = PunkTypes.DocumentState || (PunkTypes.DocumentState = {}));\r\n    var WalletType;\r\n    (function (WalletType) {\r\n        WalletType[\"MetaMask\"] = \"MetaMask\";\r\n    })(WalletType = PunkTypes.WalletType || (PunkTypes.WalletType = {}));\r\n    var OrderType;\r\n    (function (OrderType) {\r\n        OrderType[OrderType[\"ASC\"] = 0] = \"ASC\";\r\n        OrderType[OrderType[\"DESC\"] = 1] = \"DESC\";\r\n    })(OrderType = PunkTypes.OrderType || (PunkTypes.OrderType = {}));\r\n    var ProviderType;\r\n    (function (ProviderType) {\r\n        ProviderType[ProviderType[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\r\n        ProviderType[ProviderType[\"HTTP\"] = 1] = \"HTTP\";\r\n        ProviderType[ProviderType[\"WEBSOCKET\"] = 2] = \"WEBSOCKET\";\r\n    })(ProviderType = PunkTypes.ProviderType || (PunkTypes.ProviderType = {}));\r\n    PunkTypes.TypeNames = {\r\n        Punk: \"Punk\",\r\n        PunkEvent: \"PunkEvent\",\r\n        MarketBid: \"MarketBid\",\r\n        MarketOffer: \"MarketOffer\"\r\n    };\r\n    var PunkSortType;\r\n    (function (PunkSortType) {\r\n        PunkSortType[PunkSortType[\"ID\"] = 0] = \"ID\";\r\n        PunkSortType[PunkSortType[\"RANK\"] = 1] = \"RANK\";\r\n    })(PunkSortType = PunkTypes.PunkSortType || (PunkTypes.PunkSortType = {}));\r\n    var PunkDialogType;\r\n    (function (PunkDialogType) {\r\n        PunkDialogType[PunkDialogType[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\r\n        PunkDialogType[PunkDialogType[\"BID\"] = 1] = \"BID\";\r\n        PunkDialogType[PunkDialogType[\"OFFER\"] = 2] = \"OFFER\";\r\n        PunkDialogType[PunkDialogType[\"GIFT\"] = 3] = \"GIFT\";\r\n        PunkDialogType[PunkDialogType[\"ACCEPT_BID\"] = 4] = \"ACCEPT_BID\";\r\n        PunkDialogType[PunkDialogType[\"ACCEPT_OFFER\"] = 5] = \"ACCEPT_OFFER\";\r\n        PunkDialogType[PunkDialogType[\"CANCEL_BID\"] = 6] = \"CANCEL_BID\";\r\n        PunkDialogType[PunkDialogType[\"CANCEL_OFFER\"] = 7] = \"CANCEL_OFFER\";\r\n    })(PunkDialogType = PunkTypes.PunkDialogType || (PunkTypes.PunkDialogType = {}));\r\n    var PunkEventType;\r\n    (function (PunkEventType) {\r\n        PunkEventType[PunkEventType[\"Unknown\"] = 0] = \"Unknown\";\r\n        PunkEventType[PunkEventType[\"Mint\"] = 1] = \"Mint\";\r\n        PunkEventType[PunkEventType[\"Offer\"] = 2] = \"Offer\";\r\n        PunkEventType[PunkEventType[\"NewBid\"] = 3] = \"NewBid\";\r\n        PunkEventType[PunkEventType[\"CancelBid\"] = 4] = \"CancelBid\";\r\n        PunkEventType[PunkEventType[\"Buy\"] = 5] = \"Buy\";\r\n        PunkEventType[PunkEventType[\"CancelOffer\"] = 6] = \"CancelOffer\";\r\n    })(PunkEventType = PunkTypes.PunkEventType || (PunkTypes.PunkEventType = {}));\r\n    var MarketplaceTab;\r\n    (function (MarketplaceTab) {\r\n        MarketplaceTab[\"Items\"] = \"items\";\r\n        MarketplaceTab[\"Activity\"] = \"activity\";\r\n    })(MarketplaceTab = PunkTypes.MarketplaceTab || (PunkTypes.MarketplaceTab = {}));\r\n    var MarketEventType;\r\n    (function (MarketEventType) {\r\n        MarketEventType[MarketEventType[\"Unknown\"] = 0] = \"Unknown\";\r\n        MarketEventType[MarketEventType[\"Start\"] = 1] = \"Start\";\r\n        MarketEventType[MarketEventType[\"Stop\"] = 2] = \"Stop\";\r\n        MarketEventType[MarketEventType[\"MintPrice\"] = 3] = \"MintPrice\";\r\n        MarketEventType[MarketEventType[\"ActionPrice\"] = 4] = \"ActionPrice\";\r\n    })(MarketEventType = PunkTypes.MarketEventType || (PunkTypes.MarketEventType = {}));\r\n    var AccountAuctionType;\r\n    (function (AccountAuctionType) {\r\n        AccountAuctionType[AccountAuctionType[\"Unknown\"] = 0] = \"Unknown\";\r\n        AccountAuctionType[AccountAuctionType[\"Offer\"] = 1] = \"Offer\";\r\n        AccountAuctionType[AccountAuctionType[\"Bid\"] = 2] = \"Bid\";\r\n    })(AccountAuctionType = PunkTypes.AccountAuctionType || (PunkTypes.AccountAuctionType = {}));\r\n    var GlobalEvent;\r\n    (function (GlobalEvent) {\r\n        GlobalEvent[\"ReInit\"] = \"ReInit\";\r\n        GlobalEvent[\"DocumentVisibilityChanged\"] = \"DocumentVisibilityChanged\";\r\n        GlobalEvent[\"ConfirmTransactionDialog\"] = \"ConfirmTransactionDialog\";\r\n        GlobalEvent[\"ConnectWalletDialog\"] = \"ConnectWalletDialog\";\r\n        GlobalEvent[\"QuotaChanged\"] = \"QuotaChanged\";\r\n        GlobalEvent[\"PunkFilterValuesChanged\"] = \"PunkFilterValuesChanged\";\r\n        GlobalEvent[\"MarketChanged\"] = \"MarketChanged\";\r\n        GlobalEvent[\"PunkChanged\"] = \"PunkChanged\";\r\n    })(GlobalEvent = PunkTypes.GlobalEvent || (PunkTypes.GlobalEvent = {}));\r\n    var ViteQuotaType;\r\n    (function (ViteQuotaType) {\r\n        ViteQuotaType[\"Account\"] = \"Account\";\r\n        ViteQuotaType[\"Contract\"] = \"Contract\";\r\n    })(ViteQuotaType = PunkTypes.ViteQuotaType || (PunkTypes.ViteQuotaType = {}));\r\n    var VmLogEvent;\r\n    (function (VmLogEvent) {\r\n        VmLogEvent[\"MarketChanged\"] = \"MarketChanged\";\r\n        VmLogEvent[\"PunkChanged\"] = \"PunkChanged\";\r\n    })(VmLogEvent = PunkTypes.VmLogEvent || (PunkTypes.VmLogEvent = {}));\r\n})(PunkTypes = exports.PunkTypes || (exports.PunkTypes = {}));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UrlUtil = void 0;\r\nvar _1 = require(\".\");\r\nvar __1 = require(\"..\");\r\nvar UrlUtil = /** @class */ (function () {\r\n    function UrlUtil() {\r\n    }\r\n    UrlUtil.getPunkUrl = function (image, cid) {\r\n        if (image && !_1.CommonUtil.isNullOrWhitespace(image)) {\r\n            if (__1.CommonConfig.USE_IPFS) {\r\n                if (cid && !_1.CommonUtil.isNullOrWhitespace(cid)) {\r\n                    return UrlUtil.getPunkIpfsUrlByCid(cid);\r\n                }\r\n                return UrlUtil.getPunkIpfsUrl(image);\r\n            }\r\n            else {\r\n                return \"https://cdn.vitepunks.com/punks/iso/\".concat(image);\r\n            }\r\n        }\r\n        return \"\";\r\n    };\r\n    UrlUtil.getPunkIpfsUrlByCid = function (cid) {\r\n        if (cid && !_1.CommonUtil.isNullOrWhitespace(cid)) {\r\n            return \"\".concat(__1.CommonConstants.IPFS_GATEWAY_URL).concat(cid);\r\n        }\r\n        return \"\";\r\n    };\r\n    UrlUtil.getPunkIpfsUrl = function (image) {\r\n        if (image && !_1.CommonUtil.isNullOrWhitespace(image)) {\r\n            return \"\".concat(__1.CommonConstants.IPFS_GATEWAY_URL, \"QmRGJyWMZidhH35J5tfn7vWwR1MfhPdSZh7FEXWXub4zJm/\").concat(image);\r\n        }\r\n        return \"\";\r\n    };\r\n    return UrlUtil;\r\n}());\r\nexports.UrlUtil = UrlUtil;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WalletManager = void 0;\r\nvar vitejs_1 = require(\"@vite/vitejs\");\r\nvar _1 = require(\".\");\r\nvar __1 = require(\"..\");\r\nvar logger = (0, __1.getLogger)();\r\nvar WalletManager = /** @class */ (function () {\r\n    function WalletManager(_store) {\r\n        this._mnemonicDeriveIndex = 0;\r\n        this._store = _store;\r\n    }\r\n    WalletManager.prototype.initWallet = function () {\r\n        var wallet = this._store.getItem();\r\n        if (wallet) {\r\n            this._wallet = wallet;\r\n            this._mnemonicDeriveIndex = wallet.accounts.length;\r\n            this.updateWallet();\r\n        }\r\n    };\r\n    Object.defineProperty(WalletManager.prototype, \"onSetWalletCallback\", {\r\n        set: function (cb) {\r\n            this._setWalletCallback = cb;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    WalletManager.prototype.getWallet = function () {\r\n        return this._wallet;\r\n    };\r\n    WalletManager.prototype.setWallet = function (wallet) {\r\n        this._wallet = wallet;\r\n        this.updateWalletStore(wallet);\r\n        this.updateWallet();\r\n    };\r\n    WalletManager.prototype.updateWallet = function () {\r\n        if (this._setWalletCallback) {\r\n            this._setWalletCallback(this._wallet);\r\n        }\r\n    };\r\n    WalletManager.prototype.updateWalletStore = function (wallet) {\r\n        if (wallet) {\r\n            this._store.setItem(wallet);\r\n        }\r\n    };\r\n    WalletManager.prototype.createWebWallet = function (mnemonic) {\r\n        if (!this.validateMnemonic(mnemonic)) {\r\n            return undefined;\r\n        }\r\n        this.resetWallet();\r\n        var account = this.createWebWalletAccount(mnemonic, 0);\r\n        var wallet = new _1.WebWallet({\r\n            active: account,\r\n            mnemonic: mnemonic,\r\n            accounts: [\r\n                account\r\n            ]\r\n        });\r\n        this.setWallet(wallet);\r\n        return wallet;\r\n    };\r\n    WalletManager.prototype.removeWallet = function () {\r\n        this.resetWallet();\r\n        this.updateWallet();\r\n    };\r\n    WalletManager.prototype.getAccountByAddress = function (address) {\r\n        var _a, _b;\r\n        return (_b = (_a = this._wallet) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.find(function (e) { return e.address === address; });\r\n    };\r\n    WalletManager.prototype.addAccount = function () {\r\n        if (this._wallet instanceof _1.WebWallet) {\r\n            var account = this.createWebWalletAccount(this._wallet.mnemonic);\r\n            this._wallet.accounts.push(account);\r\n            this.setActiveAccount(account);\r\n            return account;\r\n        }\r\n        return undefined;\r\n    };\r\n    WalletManager.prototype.getActiveAccount = function () {\r\n        var _a;\r\n        return (_a = this._wallet) === null || _a === void 0 ? void 0 : _a.active;\r\n    };\r\n    WalletManager.prototype.setActiveAccount = function (account) {\r\n        if (this._wallet) {\r\n            this._wallet.active = account;\r\n            this._store.setItem(this._wallet);\r\n            this.updateWallet();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    WalletManager.prototype.getAccounts = function () {\r\n        if (this._wallet) {\r\n            return this._wallet.accounts;\r\n        }\r\n        return [];\r\n    };\r\n    WalletManager.prototype.getValidSession = function () {\r\n        var wallet = this._store.getItem();\r\n        if (wallet && wallet instanceof _1.SessionWallet) {\r\n            if (new Date().getTime() - wallet.timestamp < 1000 * 60 * 10) {\r\n                return wallet.session;\r\n            }\r\n            else {\r\n                logger.info('Found expired session.', wallet)();\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    WalletManager.prototype.resetWallet = function () {\r\n        this._wallet = undefined;\r\n        this._mnemonicDeriveIndex = 0;\r\n        this._store.clear();\r\n    };\r\n    WalletManager.prototype.createWebWalletAccount = function (mnemonic, index) {\r\n        if (index === void 0) { index = this._mnemonicDeriveIndex; }\r\n        var privateKey = vitejs_1.wallet.deriveAddress({\r\n            mnemonics: mnemonic,\r\n            index: index\r\n        }).privateKey;\r\n        var account = new _1.WebWalletAccount({\r\n            id: index.toString(),\r\n            privateKey: privateKey,\r\n            address: vitejs_1.wallet.createAddressByPrivateKey(privateKey).address\r\n        });\r\n        this._mnemonicDeriveIndex = index + 1;\r\n        return account;\r\n    };\r\n    WalletManager.prototype.validateMnemonic = function (mnemonic) {\r\n        if (mnemonic) {\r\n            return vitejs_1.wallet.validateMnemonics(mnemonic);\r\n        }\r\n        return false;\r\n    };\r\n    return WalletManager;\r\n}());\r\nexports.WalletManager = WalletManager;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SessionWalletAccount = exports.WebWalletAccount = exports.WalletAccount = exports.WalletAccountType = exports.SessionWallet = exports.WebWallet = exports.Wallet = exports.WalletType = void 0;\r\nvar WalletType;\r\n(function (WalletType) {\r\n    WalletType[\"Web\"] = \"Web\";\r\n    WalletType[\"Session\"] = \"Session\";\r\n})(WalletType = exports.WalletType || (exports.WalletType = {}));\r\nvar Wallet = /** @class */ (function () {\r\n    function Wallet(type, init) {\r\n        this.accounts = [];\r\n        this._type = type;\r\n        this.baseInit(init);\r\n    }\r\n    Wallet.fromJS = function (data) {\r\n        data = typeof data === 'object' ? data : {};\r\n        switch (data._type) {\r\n            case WalletType.Web:\r\n                return new WebWallet(data);\r\n            case WalletType.Session:\r\n                return new SessionWallet(data);\r\n            default:\r\n                break;\r\n        }\r\n        return undefined;\r\n    };\r\n    Object.defineProperty(Wallet.prototype, \"type\", {\r\n        get: function () {\r\n            return this._type;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Wallet.prototype.baseInit = function (data) {\r\n        var _this = this;\r\n        if (data) {\r\n            this.active = data.active ? this.createAccount(data.active) : undefined;\r\n            if (data.accounts && Array.isArray(data.accounts)) {\r\n                data.accounts.forEach(function (account) {\r\n                    _this.accounts.push(_this.createAccount(account));\r\n                });\r\n            }\r\n        }\r\n        if (!this.accounts) {\r\n            this.accounts = [];\r\n        }\r\n    };\r\n    return Wallet;\r\n}());\r\nexports.Wallet = Wallet;\r\nvar WebWallet = /** @class */ (function (_super) {\r\n    __extends(WebWallet, _super);\r\n    function WebWallet(init) {\r\n        var _this = _super.call(this, WalletType.Web, init) || this;\r\n        _this.init(init);\r\n        return _this;\r\n    }\r\n    WebWallet.prototype.init = function (data) {\r\n        if (data) {\r\n            this.mnemonic = data.mnemonic;\r\n        }\r\n    };\r\n    WebWallet.prototype.createAccount = function (data) {\r\n        return new WebWalletAccount(data);\r\n    };\r\n    return WebWallet;\r\n}(Wallet));\r\nexports.WebWallet = WebWallet;\r\nvar SessionWallet = /** @class */ (function (_super) {\r\n    __extends(SessionWallet, _super);\r\n    function SessionWallet(init) {\r\n        var _this = _super.call(this, WalletType.Session, init) || this;\r\n        _this.init(init);\r\n        return _this;\r\n    }\r\n    SessionWallet.prototype.init = function (data) {\r\n        if (data) {\r\n            this.session = data.session;\r\n            this.timestamp = data.timestamp;\r\n        }\r\n    };\r\n    SessionWallet.prototype.createAccount = function (data) {\r\n        return new SessionWalletAccount(data);\r\n    };\r\n    return SessionWallet;\r\n}(Wallet));\r\nexports.SessionWallet = SessionWallet;\r\nvar WalletAccountType;\r\n(function (WalletAccountType) {\r\n    WalletAccountType[\"Web\"] = \"Web\";\r\n    WalletAccountType[\"Session\"] = \"Session\";\r\n})(WalletAccountType = exports.WalletAccountType || (exports.WalletAccountType = {}));\r\nvar WalletAccount = /** @class */ (function () {\r\n    function WalletAccount(type, init) {\r\n        this._type = type;\r\n        this.baseInit(init);\r\n    }\r\n    WalletAccount.fromJS = function (data) {\r\n        data = typeof data === 'object' ? data : {};\r\n        switch (data._type) {\r\n            case WalletType.Web:\r\n                return new WebWalletAccount(data);\r\n            case WalletType.Session:\r\n                return new SessionWalletAccount(data);\r\n            default:\r\n                break;\r\n        }\r\n        return undefined;\r\n    };\r\n    Object.defineProperty(WalletAccount.prototype, \"type\", {\r\n        get: function () {\r\n            return this._type;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    WalletAccount.prototype.baseInit = function (data) {\r\n        if (data) {\r\n            this.id = data.id;\r\n            this.address = data.address;\r\n        }\r\n    };\r\n    return WalletAccount;\r\n}());\r\nexports.WalletAccount = WalletAccount;\r\nvar WebWalletAccount = /** @class */ (function (_super) {\r\n    __extends(WebWalletAccount, _super);\r\n    function WebWalletAccount(init) {\r\n        var _this = _super.call(this, WalletAccountType.Web, init) || this;\r\n        _this.init(init);\r\n        return _this;\r\n    }\r\n    WebWalletAccount.prototype.init = function (data) {\r\n        if (data) {\r\n            this.privateKey = data.privateKey;\r\n        }\r\n    };\r\n    return WebWalletAccount;\r\n}(WalletAccount));\r\nexports.WebWalletAccount = WebWalletAccount;\r\nvar SessionWalletAccount = /** @class */ (function (_super) {\r\n    __extends(SessionWalletAccount, _super);\r\n    function SessionWalletAccount(init) {\r\n        return _super.call(this, WalletAccountType.Session, init) || this;\r\n    }\r\n    return SessionWalletAccount;\r\n}(WalletAccount));\r\nexports.SessionWalletAccount = SessionWalletAccount;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getPunkSearch = exports.PunkSearch = void 0;\r\nvar flexsearch_1 = require(\"flexsearch\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar util_1 = require(\"../util\");\r\nvar logger = (0, util_1.getLogger)();\r\nvar PunkSearch = /** @class */ (function () {\r\n    function PunkSearch() {\r\n        this.clear();\r\n    }\r\n    PunkSearch.prototype.clear = function () {\r\n        this._index = new flexsearch_1.Document({\r\n            document: {\r\n                id: \"id\",\r\n                tag: \"attributes\",\r\n                index: [\"id\"]\r\n            },\r\n            //preset: \"memory\",\r\n            //tokenize: \"forward\"\r\n        });\r\n    };\r\n    PunkSearch.prototype.index = function (punks) {\r\n        if (punks) {\r\n            this.clear();\r\n            for (var _i = 0, punks_1 = punks; _i < punks_1.length; _i++) {\r\n                var p = punks_1[_i];\r\n                this._index.add(p);\r\n            }\r\n        }\r\n    };\r\n    PunkSearch.prototype.search = function (query, punks) {\r\n        try {\r\n            if (!punks || util_1.CommonUtil.isNullOrWhitespace(query)) {\r\n                return punks;\r\n            }\r\n            if (util_1.CommonUtil.isNumber(query)) {\r\n                var index = parseInt(query);\r\n                if (index > 0) {\r\n                    var p = punks[index - 1];\r\n                    return !p ? [] : [p];\r\n                }\r\n            }\r\n            var result = this._index.search({\r\n                tag: query.split(','),\r\n                limit: 10000\r\n            });\r\n            var mappedResult = result.map(function (e) { return e.result; });\r\n            if (mappedResult.length > 0) {\r\n                if (mappedResult.length === 1) {\r\n                    return this.enrich(mappedResult[0].map(function (e) { return e.toString(); }), punks);\r\n                }\r\n                else {\r\n                    var intersectedResult = lodash_1.intersection.apply(void 0, mappedResult);\r\n                    return this.enrich(intersectedResult.map(function (e) { return e.toString(); }), punks);\r\n                }\r\n            }\r\n            return undefined;\r\n        }\r\n        catch (error) {\r\n            logger.error(error)();\r\n            return undefined;\r\n        }\r\n    };\r\n    PunkSearch.prototype.enrich = function (ids, punks) {\r\n        return (0, lodash_1.intersectionWith)(punks, ids, function (o, id) { return o.id === id; });\r\n    };\r\n    return PunkSearch;\r\n}());\r\nexports.PunkSearch = PunkSearch;\r\nvar search = new PunkSearch();\r\nvar getPunkSearch = function () {\r\n    return search;\r\n};\r\nexports.getPunkSearch = getPunkSearch;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PunksBaseContract = exports.AbiItemType = void 0;\r\nvar util_1 = require(\"../util\");\r\nvar base_contract_1 = require(\"./base.contract\");\r\nvar logger = (0, util_1.getLogger)();\r\nvar AbiItemType;\r\n(function (AbiItemType) {\r\n    AbiItemType[AbiItemType[\"getDeveloper\"] = 0] = \"getDeveloper\";\r\n    AbiItemType[AbiItemType[\"getMarketInfo\"] = 1] = \"getMarketInfo\";\r\n    AbiItemType[AbiItemType[\"isContract\"] = 2] = \"isContract\";\r\n    AbiItemType[AbiItemType[\"balanceOf\"] = 3] = \"balanceOf\";\r\n    AbiItemType[AbiItemType[\"ownerOf\"] = 4] = \"ownerOf\";\r\n    AbiItemType[AbiItemType[\"getMappedIndex\"] = 5] = \"getMappedIndex\";\r\n    AbiItemType[AbiItemType[\"totalSupply\"] = 6] = \"totalSupply\";\r\n    AbiItemType[AbiItemType[\"getTokensOf\"] = 7] = \"getTokensOf\";\r\n    AbiItemType[AbiItemType[\"tokenURI\"] = 8] = \"tokenURI\";\r\n    AbiItemType[AbiItemType[\"getBaseUrl\"] = 9] = \"getBaseUrl\";\r\n    AbiItemType[AbiItemType[\"getOffer\"] = 10] = \"getOffer\";\r\n    AbiItemType[AbiItemType[\"getBid\"] = 11] = \"getBid\";\r\n    AbiItemType[AbiItemType[\"transferEvent\"] = 12] = \"transferEvent\";\r\n    AbiItemType[AbiItemType[\"marketChangedEvent\"] = 13] = \"marketChangedEvent\";\r\n    AbiItemType[AbiItemType[\"punkChangedEvent\"] = 14] = \"punkChangedEvent\";\r\n})(AbiItemType = exports.AbiItemType || (exports.AbiItemType = {}));\r\nvar PunksBaseContract = /** @class */ (function (_super) {\r\n    __extends(PunksBaseContract, _super);\r\n    function PunksBaseContract() {\r\n        var _this = _super.call(this) || this;\r\n        _this._abiMap = new Map();\r\n        return _this;\r\n    }\r\n    PunksBaseContract.prototype.initAsyncProtected = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                this._abiMap.set(AbiItemType.getDeveloper, this.getAbiItem(\"offchain\", \"getDeveloper\"));\r\n                this._abiMap.set(AbiItemType.getMarketInfo, this.getAbiItem(\"offchain\", \"getMarketInfo\"));\r\n                this._abiMap.set(AbiItemType.isContract, this.getAbiItem(\"offchain\", \"isContract\"));\r\n                this._abiMap.set(AbiItemType.balanceOf, this.getAbiItem(\"offchain\", \"balanceOf\"));\r\n                this._abiMap.set(AbiItemType.ownerOf, this.getAbiItem(\"offchain\", \"ownerOf\"));\r\n                this._abiMap.set(AbiItemType.getMappedIndex, this.getAbiItem(\"offchain\", \"getMappedIndex\"));\r\n                this._abiMap.set(AbiItemType.totalSupply, this.getAbiItem(\"offchain\", \"totalSupply\"));\r\n                this._abiMap.set(AbiItemType.getTokensOf, this.getAbiItem(\"offchain\", \"getTokensOf\"));\r\n                this._abiMap.set(AbiItemType.tokenURI, this.getAbiItem(\"offchain\", \"tokenURI\"));\r\n                this._abiMap.set(AbiItemType.getBaseUrl, this.getAbiItem(\"offchain\", \"getBaseUrl\"));\r\n                this._abiMap.set(AbiItemType.getOffer, this.getAbiItem(\"offchain\", \"getOffer\"));\r\n                this._abiMap.set(AbiItemType.getBid, this.getAbiItem(\"offchain\", \"getBid\"));\r\n                this._abiMap.set(AbiItemType.transferEvent, this.getAbiItem(\"event\", \"Transfer\"));\r\n                this._abiMap.set(AbiItemType.marketChangedEvent, this.getAbiItem(\"event\", \"MarketChanged\"));\r\n                this._abiMap.set(AbiItemType.punkChangedEvent, this.getAbiItem(\"event\", \"PunkChanged\"));\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getAbiItem = function (_type, _name) {\r\n        return this._contract.abi.find(function (e) { return e.type === _type && e.name === _name; });\r\n    };\r\n    PunksBaseContract.prototype.getAbiItemByType = function (_abiItemType) {\r\n        return this._abiMap.get(_abiItemType);\r\n    };\r\n    PunksBaseContract.prototype.callOffChainMethodAsync = function (_abiItemType, _params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._client.callOffChainMethodAsync(this._contract.address, this.getAbiItemByType(_abiItemType), this._contract.offChain, _params)];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.setMintPriceAsync = function (_account, _price) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"setMintPriceAsync\", _price)();\r\n                return [2 /*return*/, this.callContractAsync(_account, 'setPrice', [util_1.PunkTypes.MarketEventType.MintPrice, _price])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.setActionPriceAsync = function (_account, _price) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"setActionPriceAsync\", _price)();\r\n                return [2 /*return*/, this.callContractAsync(_account, 'setPrice', [util_1.PunkTypes.MarketEventType.ActionPrice, _price])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getDeveloperAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getDeveloper, [])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"getDeveloperAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.setDeveloperAsync = function (_account, _address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"setDeveloperAsync\", _address)();\r\n                return [2 /*return*/, this.callContractAsync(_account, 'setDeveloper', [_address])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getMarketInfoAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, e;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getMarketInfo, [])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        e = this.objectFromEntries(result);\r\n                        logger.info(\"getMarketInfoAsync\", e)();\r\n                        return [2 /*return*/, {\r\n                                marketStarted: this.toBoolean(e.market_started),\r\n                                mintsRemaining: parseInt(e.mints_remaining),\r\n                                mintPrice: util_1.TransformUtil.toBigNumber(e.mint_price),\r\n                                actionPrice: util_1.TransformUtil.toBigNumber(e.action_price)\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.setMarketStartedAsync = function (_account, _started) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"setMarketStartedAsync\", _started)();\r\n                return [2 /*return*/, this.callContractAsync(_account, 'setMarketStarted', [_started])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.isContractAsync = function (_address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.isContract, [_address])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"isContractAsync\", value)();\r\n                        return [2 /*return*/, this.toBoolean(value)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.balanceOfAsync = function (_owner) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.balanceOf, [_owner])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"balanceOfAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.ownerOfAsync = function (_tokenId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.ownerOf, [_tokenId])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"ownerOfAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getMappedIndexAsync = function (_refId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getMappedIndex, [_refId])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"getMappedIndexAsync\", _refId, \":\", value)();\r\n                        return [2 /*return*/, util_1.TransformUtil.toBigNumber(value)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.setMappedIndicesAsync = function (_account, _indices, _startIndex) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'setMappedIndices', [_indices, _startIndex])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.mintAsync = function (_account, _mintPrice) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'mint', [], _mintPrice)];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.totalSupplyAsync = function (_owner) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.totalSupply, [])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"totalSupplyAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getTokensOfAsync = function (_owner) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getTokensOf, [_owner])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, []];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"getTokensOfAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.tokenURIAsync = function (_tokenId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.tokenURI, [_tokenId])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"tokenURIAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getBaseUrlAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getBaseUrl, [])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"getBaseUrlAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.setBaseUrlAsync = function (_account, _baseUrl) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'setBaseUrl', [_baseUrl])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getOfferAsync = function (_punkId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getOffer, [_punkId])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        logger.info(\"getOfferAsync\", \"_punkId\", _punkId, result)();\r\n                        return [2 /*return*/, {\r\n                                isForSale: this.toBoolean(result[0].value),\r\n                                itemIndex: new util_1.PunkTypes.BigNumberWrapper(_punkId),\r\n                                seller: result[1].value,\r\n                                minAmount: new util_1.PunkTypes.BigNumberWrapper(result[2].value),\r\n                                onlySellTo: util_1.TransformUtil.toAddress(result[3].value)\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getBidAsync = function (_punkId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getBid, [_punkId])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        logger.info(\"getBidAsync\", \"_punkId\", _punkId, result)();\r\n                        return [2 /*return*/, {\r\n                                hasBid: this.toBoolean(result[0].value),\r\n                                itemIndex: new util_1.PunkTypes.BigNumberWrapper(_punkId),\r\n                                bidder: result[1].value,\r\n                                amount: new util_1.PunkTypes.BigNumberWrapper(result[2].value)\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.cancelOfferAsync = function (_account, _punkId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'cancelOffer', [_punkId])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.offerAsync = function (_account, _punkId, _minSalePrice, _fee) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"offerAsync punkId: \".concat(_punkId, \" minSalePrice: \").concat(_minSalePrice, \" fee: \").concat(_fee))();\r\n                return [2 /*return*/, this.callContractAsync(_account, 'offer', [_punkId, _minSalePrice], _fee !== null && _fee !== void 0 ? _fee : undefined)];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.offerToAddressAsync = function (_account, _punkId, _minSalePrice, _address, _fee) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"offerToAddressAsync punkId: \".concat(_punkId, \" minSalePrice: \").concat(_minSalePrice, \" address: \").concat(_address, \" fee: \").concat(_fee))();\r\n                return [2 /*return*/, this.callContractAsync(_account, 'offerToAddress', [_punkId, _minSalePrice, _address], _fee !== null && _fee !== void 0 ? _fee : undefined)];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.buyAsync = function (_account, _punkId, _amount) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'buy', [_punkId], _amount)];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.cancelBidAsync = function (_account, _punkId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'cancelBid', [_punkId])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.enterBidAsync = function (_account, _punkId, _amount, _fee) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var amount;\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"enterBidAsync punkId: \".concat(_punkId, \" amount: \").concat(_amount, \" fee: \").concat(_fee))();\r\n                amount = _amount;\r\n                if (_fee && !util_1.CommonUtil.isNullOrWhitespace(_fee)) {\r\n                    amount = new util_1.PunkTypes.BigNumberWrapper(_amount).plus(new util_1.PunkTypes.BigNumberWrapper(_fee)).toFixed();\r\n                    logger.info(\"enterBidAsync amount+fee: \".concat(amount))();\r\n                }\r\n                return [2 /*return*/, this.callContractAsync(_account, 'enterBid', [_punkId], amount)];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.acceptBidAsync = function (_account, _punkId, _minPrice) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'acceptBid', [_punkId, _minPrice])];\r\n            });\r\n        });\r\n    };\r\n    return PunksBaseContract;\r\n}(base_contract_1.BaseContract));\r\nexports.PunksBaseContract = PunksBaseContract;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getViteClient = exports.ViteClient = void 0;\r\nvar vitejs_1 = require(\"@vite/vitejs\");\r\nvar vitejs_http_1 = require(\"@vite/vitejs-http\");\r\nvar vitejs_ws_1 = require(\"@vite/vitejs-ws\");\r\nvar common_1 = require(\"../common\");\r\nvar util_1 = require(\"../util\");\r\nvar wallet_1 = require(\"../wallet\");\r\nvar logger = (0, util_1.getLogger)();\r\nvar providerTimeout = 10000;\r\nvar providerOptions = { retryTimes: 10, retryInterval: 1000 };\r\nvar ViteClient = /** @class */ (function () {\r\n    function ViteClient() {\r\n        var _this = this;\r\n        this._providerType = util_1.PunkTypes.ProviderType.UNKNOWN;\r\n        this.initAsync = function (network, providerType, connector) { return __awaiter(_this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                        logger.info(\"initAsync\", network)();\r\n                        _this._network = network;\r\n                        _this._connector = connector;\r\n                        _this._providerType = providerType;\r\n                        var isResolved = false;\r\n                        if (providerType === util_1.PunkTypes.ProviderType.WEBSOCKET) {\r\n                            _this._provider = new vitejs_ws_1.WS_RPC(network.rpcUrl, providerTimeout, providerOptions);\r\n                            // https://github.com/vitelabs/vite.js/blob/master/src/WS/index.js\r\n                            _this._provider.on('close', function () {\r\n                                logger.info('Vite provider closed')();\r\n                                _this._emitter.emitReInit();\r\n                            });\r\n                            _this._provider.on('error', function (err) {\r\n                                logger.error('Vite provider error', isResolved)();\r\n                                if (isResolved)\r\n                                    return;\r\n                                _this._isConnected = false;\r\n                                reject(err);\r\n                            });\r\n                        }\r\n                        else {\r\n                            _this._provider = new vitejs_http_1.HTTP_RPC(network.rpcUrl);\r\n                        }\r\n                        _this._client = new vitejs_1.ViteAPI(_this._provider, function () {\r\n                            logger.info(\"ViteAPI connected to \".concat(_this._provider.path))();\r\n                            isResolved = true;\r\n                            _this._isConnected = true;\r\n                            resolve();\r\n                        });\r\n                    })];\r\n            });\r\n        }); };\r\n        this._isConnected = false;\r\n        this._emitter = (0, util_1.getEmitter)();\r\n    }\r\n    Object.defineProperty(ViteClient.prototype, \"isConnected\", {\r\n        get: function () {\r\n            return this._isConnected;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViteClient.prototype, \"connector\", {\r\n        get: function () {\r\n            return this._connector;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ViteClient.prototype.dispose = function () {\r\n        var _a;\r\n        logger.info(\"Disposing ViteClient\")();\r\n        if (this._providerType === util_1.PunkTypes.ProviderType.WEBSOCKET) {\r\n            try {\r\n                (_a = this._provider) === null || _a === void 0 ? void 0 : _a.destroy();\r\n            }\r\n            catch (error) {\r\n                logger.error(error)();\r\n            }\r\n        }\r\n        this._isConnected = false;\r\n    };\r\n    ViteClient.prototype.encodeParameter = function (type, param) {\r\n        return vitejs_1.abi.encodeParameter(type, param);\r\n    };\r\n    ViteClient.prototype.encodeLogSignature = function (jsonFunction, methodName) {\r\n        return vitejs_1.abi.encodeLogSignature(jsonFunction, methodName);\r\n    };\r\n    ViteClient.prototype.requestAsync = function (method) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                if (this._isConnected && this._client) {\r\n                    result = util_1.RetryUtil.promiseRetry(function () { return __awaiter(_this, void 0, void 0, function () {\r\n                        var _a;\r\n                        var _this = this;\r\n                        return __generator(this, function (_b) {\r\n                            return [2 /*return*/, (_a = this._client).request.apply(_a, __spreadArray([method], args, false)).catch(function (error) { return __awaiter(_this, void 0, void 0, function () {\r\n                                    var _a;\r\n                                    return __generator(this, function (_b) {\r\n                                        switch (_b.label) {\r\n                                            case 0:\r\n                                                if (!((_a = error === null || error === void 0 ? void 0 : error.message) === null || _a === void 0 ? void 0 : _a.toLowerCase().includes(\"connection error\"))) return [3 /*break*/, 2];\r\n                                                logger.error(\"CONNECTION ERROR -> reconnect\", this._network)();\r\n                                                this._emitter.emitReInit();\r\n                                                return [4 /*yield*/, util_1.CommonUtil.timeout(3000)];\r\n                                            case 1:\r\n                                                _b.sent();\r\n                                                throw error;\r\n                                            case 2: throw error;\r\n                                        }\r\n                                    });\r\n                                }); })];\r\n                        });\r\n                    }); });\r\n                    return [2 /*return*/, result];\r\n                }\r\n                else {\r\n                    throw new Error('Vite client is not ready to make requests.');\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.getSnapshotChainHeightAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.requestAsync('ledger_getSnapshotChainHeight')];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, new util_1.PunkTypes.BigNumberWrapper(result)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.getAccountBlockHeightAsync = function (address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.requestAsync(\"ledger_getAccountInfoByAddress\", address)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, new util_1.PunkTypes.BigNumberWrapper(result.blockCount)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.getBalanceAsync = function (address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.requestAsync(\"ledger_getAccountInfoByAddress\", address)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, new util_1.PunkTypes.BigNumberWrapper(result.balanceInfoMap[common_1.CommonConstants.VITE_TOKEN_ID].balance)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.getQuotaAsync = function (address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.requestAsync(\"contract_getQuotaByAccount\", address)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, {\r\n                                currentQuota: new util_1.PunkTypes.BigNumberWrapper(result.currentQuota),\r\n                                maxQuota: new util_1.PunkTypes.BigNumberWrapper(result.maxQuota),\r\n                                stakeAmount: new util_1.PunkTypes.BigNumberWrapper(result.stakeAmount)\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.sendAsync = function (account, toAddress, amount, tokenId) {\r\n        if (tokenId === void 0) { tokenId = common_1.CommonConstants.VITE_TOKEN_ID; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var block;\r\n            return __generator(this, function (_a) {\r\n                block = vitejs_1.accountBlock\r\n                    .createAccountBlock(\"send\", {\r\n                    address: account.address,\r\n                    toAddress: toAddress,\r\n                    tokenId: tokenId,\r\n                    amount: amount\r\n                });\r\n                return [2 /*return*/, this.sendAccountBlockAsync(account, block)];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.stakeForQuotaAsync = function (account, beneficiaryAddress, amount) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var block;\r\n            return __generator(this, function (_a) {\r\n                block = vitejs_1.accountBlock\r\n                    .createAccountBlock(\"stakeForQuota\", {\r\n                    address: account.address,\r\n                    beneficiaryAddress: beneficiaryAddress,\r\n                    amount: amount\r\n                });\r\n                return [2 /*return*/, this.sendAccountBlockAsync(account, block)];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.callContractAsync = function (account, methodName, abi, params, toAddress, amount, tokenId) {\r\n        if (amount === void 0) { amount = '0'; }\r\n        if (tokenId === void 0) { tokenId = common_1.CommonConstants.VITE_TOKEN_ID; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var block;\r\n            return __generator(this, function (_a) {\r\n                block = vitejs_1.accountBlock\r\n                    .createAccountBlock(\"callContract\", {\r\n                    address: account.address,\r\n                    abi: abi,\r\n                    methodName: methodName,\r\n                    tokenId: tokenId,\r\n                    amount: amount,\r\n                    toAddress: toAddress,\r\n                    params: params,\r\n                });\r\n                return [2 /*return*/, this.sendAccountBlockAsync(account, block)];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.createContractAsync = function (account, abi, binary) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var responseLatency, quotaMultiplier, randomDegree, block;\r\n            return __generator(this, function (_a) {\r\n                responseLatency = 1;\r\n                quotaMultiplier = 10;\r\n                randomDegree = 1;\r\n                block = vitejs_1.accountBlock\r\n                    .createAccountBlock(\"createContract\", {\r\n                    address: account.address,\r\n                    abi: abi,\r\n                    code: binary,\r\n                    responseLatency: responseLatency,\r\n                    params: [],\r\n                    quotaMultiplier: quotaMultiplier,\r\n                    randomDegree: randomDegree\r\n                });\r\n                return [2 /*return*/, this.sendAccountBlockAsync(account, block)];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.callOffChainMethodAsync = function (contractAddress, abi, offchaincode, params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var data, dataBase64, result, resultBytes, outputs, i, offchainDecodeResult, resultList, i;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        data = vitejs_1.abi.encodeFunctionCall(abi, params);\r\n                        dataBase64 = Buffer.from(data, \"hex\").toString(\"base64\");\r\n                        return [4 /*yield*/, this.requestAsync(\"contract_callOffChainMethod\", {\r\n                                selfAddr: contractAddress,\r\n                                offChainCode: offchaincode,\r\n                                data: dataBase64,\r\n                            })];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (result) {\r\n                            resultBytes = Buffer.from(result, \"base64\").toString(\"hex\");\r\n                            outputs = [];\r\n                            for (i = 0; i < abi.outputs.length; i++) {\r\n                                outputs.push(abi.outputs[i].type);\r\n                            }\r\n                            offchainDecodeResult = vitejs_1.abi.decodeParameters(outputs, resultBytes);\r\n                            resultList = [];\r\n                            if (offchainDecodeResult) {\r\n                                for (i = 0; i < abi.outputs.length; i++) {\r\n                                    if (abi.outputs[i].name) {\r\n                                        resultList.push({\r\n                                            name: abi.outputs[i].name,\r\n                                            value: offchainDecodeResult[i],\r\n                                        });\r\n                                    }\r\n                                    else {\r\n                                        resultList.push({\r\n                                            name: \"\",\r\n                                            value: offchainDecodeResult[i],\r\n                                        });\r\n                                    }\r\n                                }\r\n                            }\r\n                            return [2 /*return*/, resultList];\r\n                        }\r\n                        return [2 /*return*/, \"\"];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.decodeVmLog = function (vmLog, abi) {\r\n        var topics = vmLog.topics;\r\n        for (var j = 0; j < abi.length; j++) {\r\n            var abiItem = abi[j];\r\n            if (vitejs_1.abi.encodeLogSignature(abiItem) === topics[0]) {\r\n                var result = this.decodeVmLogByAbiItem(vmLog, abiItem);\r\n                if (result) {\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    ViteClient.prototype.decodeVmLogByAbiItem = function (vmLog, abiItem) {\r\n        if (!vmLog || !vmLog.data || !vmLog.topics) {\r\n            return undefined;\r\n        }\r\n        var topics = vmLog.topics;\r\n        var log = {\r\n            topic: topics[0],\r\n            args: vitejs_1.abi.decodeLog(abiItem.inputs, vitejs_1.utils._Buffer.from(vmLog.data, \"base64\").toString(\"hex\"), topics.slice(1)),\r\n            event: abiItem.name,\r\n        };\r\n        return log;\r\n    };\r\n    ViteClient.prototype.getEventsByBlockAsync = function (address, fromHeight, toHeight, topics) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var payload, result, error_1, midHeight, arr2;\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (fromHeight.gt(toHeight)) {\r\n                            logger.info(\"getEventsByBlockAsync \".concat(fromHeight.toFixed(), \" > \").concat(toHeight.toFixed()))();\r\n                            return [2 /*return*/, []];\r\n                        }\r\n                        payload = {\r\n                            addressHeightRange: (_a = {},\r\n                                _a[address] = {\r\n                                    fromHeight: fromHeight.toFixed(),\r\n                                    toHeight: toHeight.toFixed(),\r\n                                },\r\n                                _a),\r\n                            topics: topics\r\n                        };\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 3, , 5]);\r\n                        return [4 /*yield*/, this.requestAsync(\"ledger_getVmLogsByFilter\", payload)];\r\n                    case 2:\r\n                        result = _b.sent();\r\n                        return [2 /*return*/, result];\r\n                    case 3:\r\n                        error_1 = _b.sent();\r\n                        midHeight = fromHeight.plus(toHeight).div(2);\r\n                        logger.info(\"Divide and conquer block fromHeight: \".concat(fromHeight.toFixed(), \" toHeight: \").concat(toHeight.toFixed(), \" midHeight: \").concat(midHeight.toFixed()))();\r\n                        return [4 /*yield*/, this.getEventsByBlockAsync(address, midHeight.plus(1), toHeight, topics)];\r\n                    case 4:\r\n                        arr2 = _b.sent();\r\n                        //return [...arr1, ...arr2];\r\n                        return [2 /*return*/, arr2];\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.createAddressListenerAsync = function (address) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var payload, result;\r\n            var _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        payload = {\r\n                            addressHeightRange: (_b = {},\r\n                                _b[address] = {\r\n                                    fromHeight: \"0\",\r\n                                    toHeight: \"0\",\r\n                                },\r\n                                _b),\r\n                        };\r\n                        return [4 /*yield*/, ((_a = this._client) === null || _a === void 0 ? void 0 : _a.subscribe(\"createVmlogSubscription\", payload))];\r\n                    case 1:\r\n                        result = _c.sent();\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.removeListener = function (event) {\r\n        var _a;\r\n        logger.info('removeListener')();\r\n        (_a = this._client) === null || _a === void 0 ? void 0 : _a.unsubscribe(event);\r\n    };\r\n    ViteClient.prototype.waitForNextVmLogEventAsync = function (listener, abi) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                logger.info('waitForNextVmLogEvent')();\r\n                return [2 /*return*/, new Promise(function (resolve) { return __awaiter(_this, void 0, void 0, function () {\r\n                        var _this = this;\r\n                        return __generator(this, function (_a) {\r\n                            // listener = EventEmitter\r\n                            // https://github.com/vitelabs/vite.js/blob/14b87a6ddc68fe5836816f949f85d6161e6cfed8/src/viteAPI/eventEmitter.ts\r\n                            listener.on(function (results) { return __awaiter(_this, void 0, void 0, function () {\r\n                                var result, vmLog;\r\n                                return __generator(this, function (_a) {\r\n                                    if (results.length !== 1) {\r\n                                        console.log(results);\r\n                                        throw new Error('Unexpected results');\r\n                                    }\r\n                                    result = results[results.length - 1];\r\n                                    vmLog = this.decodeVmLog(result.vmlog, abi);\r\n                                    logger.info(\"vmLog\", vmLog)();\r\n                                    // https://github.com/vitelabs/vite.js/blob/14b87a6ddc68fe5836816f949f85d6161e6cfed8/src/viteAPI/provider.ts\r\n                                    // Don't unsubscribe, listener should be reusable!\r\n                                    // provider.unsubscribe(listener);\r\n                                    resolve(vmLog);\r\n                                    return [2 /*return*/];\r\n                                });\r\n                            }); });\r\n                            return [2 /*return*/];\r\n                        });\r\n                    }); })];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.waitForAccountBlockAsync = function (address, height) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, new Promise(function (resolve, reject) { return __awaiter(_this, void 0, void 0, function () {\r\n                        var result, error, timestamp, task;\r\n                        var _this = this;\r\n                        return __generator(this, function (_a) {\r\n                            result = undefined;\r\n                            error = undefined;\r\n                            timestamp = Date.now();\r\n                            task = new util_1.Task(function () { return __awaiter(_this, void 0, void 0, function () {\r\n                                var blockByHeight, receiveBlockHash, blockByHash, err_1;\r\n                                return __generator(this, function (_a) {\r\n                                    switch (_a.label) {\r\n                                        case 0:\r\n                                            _a.trys.push([0, 3, , 4]);\r\n                                            if (Date.now() - timestamp >= providerTimeout) {\r\n                                                throw new Error(\"Task timed out\");\r\n                                            }\r\n                                            return [4 /*yield*/, this.requestAsync('ledger_getAccountBlockByHeight', address, height)];\r\n                                        case 1:\r\n                                            blockByHeight = _a.sent();\r\n                                            if (!blockByHeight) {\r\n                                                return [2 /*return*/, true];\r\n                                            }\r\n                                            receiveBlockHash = blockByHeight.receiveBlockHash;\r\n                                            if (!receiveBlockHash) {\r\n                                                return [2 /*return*/, true];\r\n                                            }\r\n                                            return [4 /*yield*/, this.requestAsync('ledger_getAccountBlockByHash', receiveBlockHash)];\r\n                                        case 2:\r\n                                            blockByHash = _a.sent();\r\n                                            if (!blockByHash) {\r\n                                                return [2 /*return*/, true];\r\n                                            }\r\n                                            result = __assign(__assign({}, this.getAccountBlockStatus(blockByHash)), { accountBlock: blockByHash });\r\n                                            return [2 /*return*/, false];\r\n                                        case 3:\r\n                                            err_1 = _a.sent();\r\n                                            error = err_1;\r\n                                            return [2 /*return*/, false];\r\n                                        case 4: return [2 /*return*/];\r\n                                    }\r\n                                });\r\n                            }); }, 500);\r\n                            task.start(function () {\r\n                                if (error) {\r\n                                    reject(error);\r\n                                }\r\n                                else {\r\n                                    resolve(result);\r\n                                }\r\n                            });\r\n                            return [2 /*return*/];\r\n                        });\r\n                    }); })];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.receiveTransactionAsync = function (account, block) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var blocks, ab;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!!block) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.requestAsync(\"ledger_getUnreceivedBlocksByAddress\", account.address, 0, 1)];\r\n                    case 1:\r\n                        blocks = _a.sent();\r\n                        if (blocks && blocks.length > 0) {\r\n                            block = blocks[0];\r\n                        }\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (!block) {\r\n                            logger.info(\"No Unreceived Blocks: \".concat(account.address))();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        ab = vitejs_1.accountBlock\r\n                            .createAccountBlock(\"receive\", {\r\n                            address: account.address,\r\n                            sendBlockHash: block.hash,\r\n                        });\r\n                        return [2 /*return*/, this.sendAccountBlockAsync(account, ab)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.receiveAllOnroadTxAsync = function (account) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var RECEIVE_PER_ROUND, blocks, i, block;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        RECEIVE_PER_ROUND = 10;\r\n                        return [4 /*yield*/, this.requestAsync(\"ledger_getUnreceivedBlocksByAddress\", account.address, 0, RECEIVE_PER_ROUND)];\r\n                    case 1:\r\n                        blocks = _a.sent();\r\n                        i = 0;\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (!(i < blocks.length)) return [3 /*break*/, 5];\r\n                        block = blocks[i];\r\n                        return [4 /*yield*/, this.receiveTransactionAsync(account, block)];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        i++;\r\n                        return [3 /*break*/, 2];\r\n                    case 5:\r\n                        if (!(blocks.length >= RECEIVE_PER_ROUND)) return [3 /*break*/, 7];\r\n                        return [4 /*yield*/, this.receiveAllOnroadTxAsync(account)];\r\n                    case 6:\r\n                        _a.sent();\r\n                        _a.label = 7;\r\n                    case 7: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.sendAccountBlockAsync = function (account, block) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, result, error_2;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(account instanceof wallet_1.WebWalletAccount)) return [3 /*break*/, 3];\r\n                        block = block.setProvider(this._client).setPrivateKey(account.privateKey);\r\n                        return [4 /*yield*/, block.autoSetPreviousAccountBlock()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, block.sign().send()];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, result];\r\n                    case 3:\r\n                        if (!(account instanceof wallet_1.SessionWalletAccount)) return [3 /*break*/, 10];\r\n                        if (!this.connector) return [3 /*break*/, 8];\r\n                        this._emitter.emitConfirmTransactionDialog(true);\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        _a.trys.push([4, 6, , 7]);\r\n                        return [4 /*yield*/, this.connector.sendTransactionAsync({\r\n                                block: block.accountBlock\r\n                            })];\r\n                    case 5:\r\n                        result = _a.sent();\r\n                        this._emitter.emitConfirmTransactionDialog(false);\r\n                        return [2 /*return*/, result];\r\n                    case 6:\r\n                        error_2 = _a.sent();\r\n                        this._emitter.emitConfirmTransactionDialog(false);\r\n                        throw error_2;\r\n                    case 7: return [3 /*break*/, 9];\r\n                    case 8: throw new Error(\"Connector is not defined\");\r\n                    case 9: return [3 /*break*/, 11];\r\n                    case 10: throw new Error(\"Account not supported\");\r\n                    case 11: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.getAccountBlockStatus = function (accountBlock) {\r\n        var status = this.resolveAccountBlockData(accountBlock);\r\n        var statusTxt = '';\r\n        switch (status) {\r\n            case 0:\r\n                statusTxt = '0, Execution succeed';\r\n                break;\r\n            case 1:\r\n                statusTxt = '1, Execution reverted';\r\n                break;\r\n            case 2:\r\n                statusTxt = '2, Max call depth exceeded';\r\n                break;\r\n        }\r\n        return {\r\n            status: status,\r\n            statusTxt: statusTxt\r\n        };\r\n    };\r\n    ViteClient.prototype.resolveAccountBlockData = function (accountBlock) {\r\n        if ((accountBlock.blockType !== 4 && accountBlock.blockType !== 5) ||\r\n            !accountBlock.data) {\r\n            return 0;\r\n        }\r\n        var bytes = vitejs_1.utils._Buffer.from(accountBlock.data, 'base64');\r\n        if (bytes.length !== 33) {\r\n            return 0;\r\n        }\r\n        return bytes[32];\r\n    };\r\n    return ViteClient;\r\n}());\r\nexports.ViteClient = ViteClient;\r\nvar client = new ViteClient();\r\nvar getViteClient = function () {\r\n    return client;\r\n};\r\nexports.getViteClient = getViteClient;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseDataSource = void 0;\r\nvar common_1 = require(\"../common\");\r\nvar search_1 = require(\"../search\");\r\nvar util_1 = require(\"../util\");\r\nvar logger = (0, util_1.getLogger)();\r\nvar BaseDataSource = /** @class */ (function () {\r\n    function BaseDataSource() {\r\n        this._accountAuctions = new Map();\r\n        this._emitter = (0, util_1.getEmitter)();\r\n        this._punkSearch = (0, search_1.getPunkSearch)();\r\n        this.clear();\r\n    }\r\n    BaseDataSource.prototype.clear = function () {\r\n        this._punkAttributes = [];\r\n        this._punks = [];\r\n        this._punksFiltered = {\r\n            sortBy: common_1.DefaultPunkFilterValues.sortBy,\r\n            orderBy: common_1.DefaultPunkFilterValues.orderBy,\r\n            searchTerm: common_1.DefaultPunkFilterValues.search,\r\n            items: []\r\n        };\r\n    };\r\n    BaseDataSource.prototype.initPunkAttributesAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, attributes;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        path = \"./assets/data/punk_attributes.json\";\r\n                        if (process.env.REACT_APP_VERSION && !util_1.CommonUtil.isNullOrWhitespace(process.env.REACT_APP_VERSION)) {\r\n                            path = path + \"?v=\".concat(process.env.REACT_APP_VERSION);\r\n                        }\r\n                        return [4 /*yield*/, this.fileUtil.readFileAsync(path)];\r\n                    case 1:\r\n                        attributes = _a.sent();\r\n                        attributes = JSON.parse(attributes);\r\n                        this._punkAttributes = attributes;\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.initPunksAsync = function () {\r\n        var _a, _b, _c, _d;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var path, punks, infos, index, p, info, punk;\r\n            return __generator(this, function (_e) {\r\n                switch (_e.label) {\r\n                    case 0:\r\n                        path = \"./assets/data/punks.gz\";\r\n                        if (process.env.REACT_APP_VERSION && !util_1.CommonUtil.isNullOrWhitespace(process.env.REACT_APP_VERSION)) {\r\n                            path = path + \"?v=\".concat(process.env.REACT_APP_VERSION);\r\n                        }\r\n                        return [4 /*yield*/, this.fileUtil.readFileAsync(path, \"binary\")];\r\n                    case 1:\r\n                        punks = _e.sent();\r\n                        punks = JSON.parse(util_1.CompressUtil.decompress(util_1.CommonUtil.toUint8Array(punks, \"binary\")));\r\n                        infos = this._punkInfos;\r\n                        if (!infos || infos.length !== common_1.CommonConstants.TOTAL_MINTS) {\r\n                            logger.info(\"Invalid punk infos\")();\r\n                            infos = this.getDefaultPunkInfos();\r\n                        }\r\n                        for (index = 0; index < punks.length; index++) {\r\n                            p = punks[index];\r\n                            info = infos[index];\r\n                            punk = {\r\n                                __typename: util_1.PunkTypes.TypeNames.Punk,\r\n                                id: p.index.toString(),\r\n                                rank: p.rank,\r\n                                image: p.image,\r\n                                cid: (_a = p.cid) !== null && _a !== void 0 ? _a : \"0\",\r\n                                attributes: p.attributes,\r\n                                owner: (_b = info.owner) !== null && _b !== void 0 ? _b : null,\r\n                                bid: (_c = info.bid) !== null && _c !== void 0 ? _c : null,\r\n                                offer: (_d = info.offer) !== null && _d !== void 0 ? _d : null\r\n                            };\r\n                            this._punks.push(punk);\r\n                            if (this._punksFiltered.orderBy === util_1.PunkTypes.OrderBy.ASC) {\r\n                                this._punksFiltered.items.push(punk);\r\n                            }\r\n                            else {\r\n                                this._punksFiltered.items.unshift(punk);\r\n                            }\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.updatePunksAsync = function () {\r\n        var _a, _b, _c;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var index, p, info;\r\n            return __generator(this, function (_d) {\r\n                if (this._punkInfos) {\r\n                    for (index = 0; index < this._punks.length; index++) {\r\n                        p = this._punks[index];\r\n                        info = this._punkInfos[index];\r\n                        p.owner = (_a = info.owner) !== null && _a !== void 0 ? _a : null;\r\n                        p.bid = (_b = info.bid) !== null && _b !== void 0 ? _b : null;\r\n                        p.offer = (_c = info.offer) !== null && _c !== void 0 ? _c : null;\r\n                    }\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.initAccountAuctionsAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var addAccountAuction, _i, _a, p, bidAuction, offerAuction;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                this._accountAuctions = new Map();\r\n                addAccountAuction = function (_address, _auction) {\r\n                    var auctions = _this._accountAuctions.get(_address);\r\n                    if (!auctions) {\r\n                        auctions = [];\r\n                        _this._accountAuctions.set(_address, auctions);\r\n                    }\r\n                    auctions.push(_auction);\r\n                };\r\n                for (_i = 0, _a = this._punks; _i < _a.length; _i++) {\r\n                    p = _a[_i];\r\n                    if (p.owner && !util_1.CommonUtil.isNullOrWhitespace(p.owner)) {\r\n                        if (p.bid && p.bid.timestamp) {\r\n                            bidAuction = {\r\n                                timestamp: p.bid.timestamp,\r\n                                auctionType: util_1.PunkTypes.AccountAuctionType.Bid,\r\n                                punkId: parseInt(p.id),\r\n                                owner: p.owner,\r\n                                amount: p.bid.amount,\r\n                                address: p.bid.bidder\r\n                            };\r\n                            addAccountAuction(p.owner, bidAuction);\r\n                            if (bidAuction.address && !util_1.CommonUtil.isNullOrWhitespace(bidAuction.address) && bidAuction.address !== p.owner) {\r\n                                addAccountAuction(bidAuction.address, bidAuction);\r\n                            }\r\n                        }\r\n                        if (p.offer && p.offer.timestamp) {\r\n                            offerAuction = {\r\n                                timestamp: p.offer.timestamp,\r\n                                auctionType: util_1.PunkTypes.AccountAuctionType.Offer,\r\n                                punkId: parseInt(p.id),\r\n                                owner: p.owner,\r\n                                amount: p.offer.minAmount,\r\n                                address: p.offer.onlySellTo\r\n                            };\r\n                            addAccountAuction(p.owner, offerAuction);\r\n                            if (offerAuction.address && !util_1.CommonUtil.isNullOrWhitespace(offerAuction.address) && offerAuction.address !== p.owner) {\r\n                                addAccountAuction(offerAuction.address, offerAuction);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.initBaseAsync = function (network, providerType, connector) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"Init BaseDataSource\")();\r\n                        this.clear();\r\n                        return [4 /*yield*/, this.initAsync(network, providerType, connector)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.initPunkAttributesAsync()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.initPunkInfosAsync()];\r\n                    case 3:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.initPunksAsync()];\r\n                    case 4:\r\n                        _a.sent();\r\n                        this._punkSearch.index(this._punks);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.dispose = function () {\r\n        logger.info(\"Disposing BaseDataSource\")();\r\n        this.disposeProtected();\r\n    };\r\n    BaseDataSource.prototype.getAccount = function () {\r\n        var account = this.walletManager.getActiveAccount();\r\n        util_1.Ensure.notNull(account, \"account\", \"Please connect your wallet first.\");\r\n        return account;\r\n    };\r\n    BaseDataSource.prototype.getPunkAttributesAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._punkAttributes];\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.getPunkAsync = function (id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var punkId;\r\n            return __generator(this, function (_a) {\r\n                if (!util_1.CommonUtil.isNumber(id)) {\r\n                    throw new Error(\"Invalid punk identifier.\");\r\n                }\r\n                punkId = parseInt(id) - 1;\r\n                if (punkId < 0 || punkId >= this._punks.length) {\r\n                    throw new Error(\"Punk does not exist.\");\r\n                }\r\n                return [2 /*return*/, this._punks[punkId]];\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.getPunksAsync = function (_limit, _offset, _sort, _order, _search) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_c) {\r\n                // check if sort, order or search changed -> update punksFiltered\r\n                if (this._punksFiltered.searchTerm !== _search || this._punksFiltered.sortBy !== _sort || this._punksFiltered.orderBy !== _order) {\r\n                    logger.info(\"limit\", _limit, \"offset\", _offset, \"sort\", _sort, \"order\", _order)();\r\n                    this._punksFiltered.searchTerm = _search;\r\n                    this._punksFiltered.items = (_a = this._punkSearch.search(_search, this._punks)) !== null && _a !== void 0 ? _a : [];\r\n                    this._punksFiltered.sortBy = _sort;\r\n                    this._punksFiltered.orderBy = _order;\r\n                    this._punksFiltered.items = (_b = util_1.FilterUtil.sortPunks(this._punksFiltered.sortBy, this._punksFiltered.orderBy, this._punksFiltered.items)) !== null && _b !== void 0 ? _b : [];\r\n                }\r\n                return [2 /*return*/, this._punksFiltered.items.slice(_offset, _offset + _limit)];\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.getPunksAllAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._punks];\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.getActionPriceAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!!this._actionPrice) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.getMarketInfoAsync()];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        this._actionPrice = result.actionPrice;\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/, this._actionPrice];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.getMintPriceAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!!this._mintPrice) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.getMarketInfoAsync()];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        this._mintPrice = result.mintPrice;\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/, this._mintPrice];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.getAccountAuctionsAsync = function (_address, _limit, _cursor) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var cursorIndex, auctions, result;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        logger.info(\"getAccountAuctionsAsync\", _address, _limit, _cursor)();\r\n                        cursorIndex = 0;\r\n                        auctions = [];\r\n                        if (!(!_cursor || util_1.CommonUtil.isNullOrWhitespace(_cursor))) return [3 /*break*/, 4];\r\n                        return [4 /*yield*/, this.initPunkInfosAsync()];\r\n                    case 1:\r\n                        _c.sent();\r\n                        return [4 /*yield*/, this.updatePunksAsync()];\r\n                    case 2:\r\n                        _c.sent();\r\n                        return [4 /*yield*/, this.initAccountAuctionsAsync()];\r\n                    case 3:\r\n                        _c.sent();\r\n                        this.orderAccountAuctions(_address);\r\n                        auctions = (_a = this._accountAuctions.get(_address)) !== null && _a !== void 0 ? _a : [];\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        auctions = (_b = this._accountAuctions.get(_address)) !== null && _b !== void 0 ? _b : [];\r\n                        cursorIndex = auctions.findIndex(function (e) { return e.timestamp.eq(new util_1.PunkTypes.BigNumberWrapper(_cursor)); });\r\n                        logger.info(\"Cursor\", _cursor, \"cursorIndex\", cursorIndex)();\r\n                        if (cursorIndex === -1) {\r\n                            logger.info(\"getAccountAuctionsAsync cursor index not found\")();\r\n                            auctions = [];\r\n                        }\r\n                        else {\r\n                            auctions = auctions.slice(cursorIndex + 1);\r\n                        }\r\n                        _c.label = 5;\r\n                    case 5:\r\n                        result = auctions.slice(0, _limit);\r\n                        return [2 /*return*/, {\r\n                                cursor: {\r\n                                    prev: _cursor !== null && _cursor !== void 0 ? _cursor : null,\r\n                                    next: auctions.length > _limit ? result[result.length - 1].timestamp.toFixed() : null\r\n                                },\r\n                                auctions: result\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.createId = function () {\r\n        return util_1.CommonUtil.uuid();\r\n    };\r\n    BaseDataSource.prototype.getDefaultPunkInfos = function () {\r\n        var infos = [];\r\n        for (var index = 1; index <= common_1.CommonConstants.TOTAL_MINTS; index++) {\r\n            infos.push({\r\n                id: index.toString()\r\n            });\r\n        }\r\n        return infos;\r\n    };\r\n    BaseDataSource.prototype.orderAccountAuctions = function (_address) {\r\n        var auctions = this._accountAuctions.get(_address);\r\n        if (!auctions) {\r\n            return;\r\n        }\r\n        auctions = auctions.sort(function (a, b) {\r\n            return a.timestamp.gt(b.timestamp) ? -1 : 1;\r\n        });\r\n        this._accountAuctions.set(_address, auctions);\r\n    };\r\n    return BaseDataSource;\r\n}());\r\nexports.BaseDataSource = BaseDataSource;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ViteBaseDataSource = void 0;\r\nvar axios_1 = require(\"axios\");\r\nvar _1 = require(\".\");\r\nvar clients_1 = require(\"../clients\");\r\nvar common_1 = require(\"../common\");\r\nvar contracts_1 = require(\"../contracts\");\r\nvar util_1 = require(\"../util\");\r\nvar logger = (0, util_1.getLogger)();\r\nvar ViteBaseDataSource = /** @class */ (function (_super) {\r\n    __extends(ViteBaseDataSource, _super);\r\n    function ViteBaseDataSource() {\r\n        var _this = _super.call(this) || this;\r\n        _this.updatePunkInfo = function (punkEvent) {\r\n            var _a, _b, _c, _d, _e;\r\n            if (!_this._punkInfos) {\r\n                return;\r\n            }\r\n            var punk = _this._punkInfos[punkEvent.punkId - 1];\r\n            switch (punkEvent.eventType) {\r\n                case util_1.PunkTypes.PunkEventType.Mint:\r\n                    punk.owner = punkEvent.toAddress;\r\n                    break;\r\n                case util_1.PunkTypes.PunkEventType.Offer:\r\n                    punk.offer = {\r\n                        __typename: util_1.PunkTypes.TypeNames.MarketOffer,\r\n                        itemIndex: util_1.TransformUtil.toBigNumber(punkEvent.id),\r\n                        seller: (_a = punkEvent.fromAddress) !== null && _a !== void 0 ? _a : \"\",\r\n                        minAmount: (_b = punkEvent.amount) !== null && _b !== void 0 ? _b : util_1.TransformUtil.defaultBigNumber,\r\n                        onlySellTo: punkEvent.toAddress,\r\n                        timestamp: punkEvent.timestamp\r\n                    };\r\n                    break;\r\n                case util_1.PunkTypes.PunkEventType.NewBid:\r\n                    punk.bid = {\r\n                        __typename: util_1.PunkTypes.TypeNames.MarketBid,\r\n                        itemIndex: util_1.TransformUtil.toBigNumber(punkEvent.id),\r\n                        bidder: (_c = punkEvent.fromAddress) !== null && _c !== void 0 ? _c : \"\",\r\n                        amount: (_d = punkEvent.amount) !== null && _d !== void 0 ? _d : util_1.TransformUtil.defaultBigNumber,\r\n                        timestamp: punkEvent.timestamp\r\n                    };\r\n                    break;\r\n                case util_1.PunkTypes.PunkEventType.CancelBid:\r\n                    punk.bid = null;\r\n                    break;\r\n                case util_1.PunkTypes.PunkEventType.CancelOffer:\r\n                    punk.offer = null;\r\n                    break;\r\n                case util_1.PunkTypes.PunkEventType.Buy:\r\n                    punk.owner = punkEvent.toAddress;\r\n                    if (punk.bid && punk.bid.bidder.toLowerCase() === ((_e = punkEvent.toAddress) === null || _e === void 0 ? void 0 : _e.toLowerCase())) {\r\n                        punk.bid = undefined;\r\n                    }\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        };\r\n        _this.getNewMarketEventsAsync = function (_from) { return __awaiter(_this, void 0, void 0, function () {\r\n            var abiItem, encodedLogSignature, topics, toHeight;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        abiItem = this.contract.getAbiItemByType(contracts_1.AbiItemType.punkChangedEvent);\r\n                        encodedLogSignature = this._client.encodeLogSignature(abiItem);\r\n                        topics = [\r\n                            [\r\n                                encodedLogSignature\r\n                            ]\r\n                        ];\r\n                        return [4 /*yield*/, this._client.getAccountBlockHeightAsync(this.contract.contract.address)];\r\n                    case 1:\r\n                        toHeight = _a.sent();\r\n                        if (_from.gte(toHeight)) {\r\n                            return [2 /*return*/, []];\r\n                        }\r\n                        return [4 /*yield*/, this._client.getEventsByBlockAsync(this.contract.contract.address, _from, toHeight, topics)];\r\n                    case 2: return [2 /*return*/, _a.sent()];\r\n                }\r\n            });\r\n        }); };\r\n        _this._client = (0, clients_1.getViteClient)();\r\n        return _this;\r\n    }\r\n    ViteBaseDataSource.prototype.initPunkInfosAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var marketDataUrl, result, infos, _i, _a, p, info, index, error_1;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _b.trys.push([0, 4, , 5]);\r\n                        this._punkInfos = this.getDefaultPunkInfos();\r\n                        marketDataUrl = common_1.CommonConfig.FETCH_MARKET_DATA ? common_1.CommonConstants.MARKET_DATA_URL : \"\";\r\n                        if (!(marketDataUrl && !util_1.CommonUtil.isNullOrWhitespace(marketDataUrl))) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, (0, axios_1.default)({\r\n                                method: 'get',\r\n                                url: marketDataUrl,\r\n                                responseType: 'json',\r\n                                timeout: 3000\r\n                            })];\r\n                    case 1:\r\n                        result = _b.sent();\r\n                        infos = result.data;\r\n                        if (infos && Array.isArray(infos.punks)) {\r\n                            for (_i = 0, _a = infos.punks; _i < _a.length; _i++) {\r\n                                p = _a[_i];\r\n                                info = util_1.TransformUtil.toPunkInfo(p);\r\n                                if (info) {\r\n                                    index = parseInt(p.id) - 1;\r\n                                    this._punkInfos[index] = info;\r\n                                }\r\n                            }\r\n                        }\r\n                        this._refHeight = util_1.TransformUtil.toBigNumber(infos.refHeight);\r\n                        if (this._refHeight.gt(0)) {\r\n                            this._refHeight = this._refHeight.minus(1);\r\n                        }\r\n                        return [4 /*yield*/, this.updatePunkInfosAsync()];\r\n                    case 2:\r\n                        _b.sent();\r\n                        _b.label = 3;\r\n                    case 3: return [3 /*break*/, 5];\r\n                    case 4:\r\n                        error_1 = _b.sent();\r\n                        logger.error(error_1)();\r\n                        return [3 /*break*/, 5];\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.initAsync = function (network, providerType, connector) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, error_2;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        logger.info('Init ViteDataSource')();\r\n                        this.disposeProtected();\r\n                        return [4 /*yield*/, this._client.initAsync(network, providerType, connector)];\r\n                    case 1:\r\n                        _b.sent();\r\n                        return [4 /*yield*/, this.contract.initAsync(this._client, \"./assets/contracts\")];\r\n                    case 2:\r\n                        _b.sent();\r\n                        _b.label = 3;\r\n                    case 3:\r\n                        _b.trys.push([3, 6, , 7]);\r\n                        if (!(providerType === util_1.PunkTypes.ProviderType.WEBSOCKET)) return [3 /*break*/, 5];\r\n                        _a = this;\r\n                        return [4 /*yield*/, this._client.createAddressListenerAsync(this.contract.contract.address)];\r\n                    case 4:\r\n                        _a._listener = _b.sent();\r\n                        this._listener.on(function (results) {\r\n                            var _a;\r\n                            if (!((_a = _this.contract) === null || _a === void 0 ? void 0 : _a.contract.abi)) {\r\n                                logger.error('Could not decode vmlog because contract abi is not defined.')();\r\n                            }\r\n                            else {\r\n                                for (var index = 0; index < results.length; index++) {\r\n                                    var result = results[index];\r\n                                    var vmLog = _this._client.decodeVmLog(result.vmlog, _this.contract.contract.abi);\r\n                                    logger.info(vmLog !== null && vmLog !== void 0 ? vmLog : result)();\r\n                                    if (vmLog) {\r\n                                        _this.handleVmLogAsync(result.accountBlockHash, result.accountBlockHeight, vmLog);\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n                        _b.label = 5;\r\n                    case 5: return [3 /*break*/, 7];\r\n                    case 6:\r\n                        error_2 = _b.sent();\r\n                        logger.error(error_2)();\r\n                        return [3 /*break*/, 7];\r\n                    case 7: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.disposeProtected = function () {\r\n        logger.info('Dispose ViteDataSource')();\r\n        if (this._listener) {\r\n            this._client.removeListener(this._listener);\r\n        }\r\n        this._client.dispose();\r\n    };\r\n    ViteBaseDataSource.prototype.getQuotaAsync = function (_address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._client.getQuotaAsync(_address)];\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getPunkEventsAsync = function (_id, _limit, _offset, _height) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var abiItem, encodedLogSignature, topics, fromHeight, toHeight, result, events;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"id\", _id, \"limit\", _limit, \"offset\", _offset, \"height\", _height)();\r\n                        if (util_1.CommonUtil.isNullOrWhitespace(_id)) {\r\n                            return [2 /*return*/, {\r\n                                    blockHeight: util_1.TransformUtil.defaultBigNumber,\r\n                                    events: []\r\n                                }];\r\n                        }\r\n                        abiItem = this.contract.getAbiItemByType(contracts_1.AbiItemType.punkChangedEvent);\r\n                        encodedLogSignature = this._client.encodeLogSignature(abiItem);\r\n                        topics = [\r\n                            [\r\n                                encodedLogSignature\r\n                            ],\r\n                            [\r\n                            // don't filter based on eventType\r\n                            ],\r\n                            [\r\n                                // filter based on punkId\r\n                                this._client.encodeParameter('uint256', _id)\r\n                            ]\r\n                        ];\r\n                        fromHeight = this.getEventsFromHeight();\r\n                        return [4 /*yield*/, this.getAccountBlockHeightAsync(this.contract.contract.address, _height)];\r\n                    case 1:\r\n                        toHeight = _a.sent();\r\n                        return [4 /*yield*/, this._client.getEventsByBlockAsync(this.contract.contract.address, fromHeight, toHeight, topics)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        result = result === null || result === void 0 ? void 0 : result.reverse().slice(_offset, _offset + _limit);\r\n                        events = this.toPunkEvents(result);\r\n                        return [2 /*return*/, {\r\n                                blockHeight: toHeight,\r\n                                events: events\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getPunkOwnerAsync = function (_id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.contract.ownerOfAsync(_id)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getPunksByAddressAsync = function (_address, _limit, _offset) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, punks, _i, result_1, id, punk;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"getPunksByAddressAsync\", _address, _limit, _offset)();\r\n                        if (util_1.CommonUtil.isNullOrWhitespace(_address)) {\r\n                            return [2 /*return*/, []];\r\n                        }\r\n                        return [4 /*yield*/, this.contract.getTokensOfAsync(_address)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        result = result.slice(_offset, _offset + _limit);\r\n                        punks = [];\r\n                        _i = 0, result_1 = result;\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (!(_i < result_1.length)) return [3 /*break*/, 5];\r\n                        id = result_1[_i];\r\n                        return [4 /*yield*/, this.getPunkAsync(id)];\r\n                    case 3:\r\n                        punk = _a.sent();\r\n                        punks.push(punk);\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        _i++;\r\n                        return [3 /*break*/, 2];\r\n                    case 5: return [2 /*return*/, punks];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getMarketBidAsync = function (_id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.contract.getBidAsync(_id)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result || !result.hasBid) {\r\n                            return [2 /*return*/, null];\r\n                        }\r\n                        return [2 /*return*/, {\r\n                                __typename: util_1.PunkTypes.TypeNames.MarketBid,\r\n                                itemIndex: result.itemIndex,\r\n                                amount: result.amount,\r\n                                bidder: result.bidder,\r\n                                timestamp: null\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getMarketOfferAsync = function (_id) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, this.contract.getOfferAsync(_id)];\r\n                    case 1:\r\n                        result = _b.sent();\r\n                        if (!result || !result.isForSale) {\r\n                            return [2 /*return*/, null];\r\n                        }\r\n                        return [2 /*return*/, {\r\n                                __typename: util_1.PunkTypes.TypeNames.MarketOffer,\r\n                                itemIndex: result.itemIndex,\r\n                                minAmount: result.minAmount,\r\n                                seller: result.seller,\r\n                                onlySellTo: (_a = result.onlySellTo) !== null && _a !== void 0 ? _a : '',\r\n                                timestamp: null\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getMarketEventsAsync = function (_limit, _offset, _height) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var abiItem, encodedLogSignature, topics, toHeight, fromHeight, result, events;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"getMarketEventsAsync\", _limit, _offset)();\r\n                        abiItem = this.contract.getAbiItemByType(contracts_1.AbiItemType.punkChangedEvent);\r\n                        encodedLogSignature = this._client.encodeLogSignature(abiItem);\r\n                        topics = [\r\n                            [\r\n                                encodedLogSignature\r\n                            ]\r\n                        ];\r\n                        return [4 /*yield*/, this.getAccountBlockHeightAsync(this.contract.contract.address, _height)];\r\n                    case 1:\r\n                        toHeight = _a.sent();\r\n                        fromHeight = util_1.PunkTypes.BigNumberWrapper.maximum(this.getEventsFromHeight(), toHeight.minus(1000));\r\n                        return [4 /*yield*/, this._client.getEventsByBlockAsync(this.contract.contract.address, fromHeight, toHeight, topics)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        result = result === null || result === void 0 ? void 0 : result.reverse().slice(_offset, _offset + _limit);\r\n                        events = this.toPunkEvents(result);\r\n                        return [2 /*return*/, {\r\n                                blockHeight: toHeight,\r\n                                events: events\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getMarketEventsByTypeAsync = function (_type, _limit, _offset, _height) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var abiItem, encodedLogSignature, topics, fromHeight, toHeight, result, events;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"type\", _type, \"limit\", _limit, \"offset\", _offset, \"height\", _height)();\r\n                        if (util_1.CommonUtil.isNullOrWhitespace(_type)) {\r\n                            return [2 /*return*/, {\r\n                                    blockHeight: util_1.TransformUtil.defaultBigNumber,\r\n                                    events: []\r\n                                }];\r\n                        }\r\n                        abiItem = this.contract.getAbiItemByType(contracts_1.AbiItemType.punkChangedEvent);\r\n                        encodedLogSignature = this._client.encodeLogSignature(abiItem);\r\n                        topics = [\r\n                            [\r\n                                encodedLogSignature\r\n                            ],\r\n                            [\r\n                                // filter based on eventType\r\n                                this._client.encodeParameter('uint8', _type)\r\n                            ]\r\n                        ];\r\n                        fromHeight = this.getEventsFromHeight();\r\n                        return [4 /*yield*/, this.getAccountBlockHeightAsync(this.contract.contract.address, _height)];\r\n                    case 1:\r\n                        toHeight = _a.sent();\r\n                        return [4 /*yield*/, this._client.getEventsByBlockAsync(this.contract.contract.address, fromHeight, toHeight, topics)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        result = result === null || result === void 0 ? void 0 : result.reverse().slice(_offset, _offset + _limit);\r\n                        events = this.toPunkEvents(result);\r\n                        return [2 /*return*/, {\r\n                                blockHeight: toHeight,\r\n                                events: events\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getMarketInfoAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.contract.getMarketInfoAsync()];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        this._actionPrice = result.actionPrice;\r\n                        this._mintPrice = result.mintPrice;\r\n                        logger.info(\"getMarketInfoAsync\", result)();\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.mintAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var mintPrice, result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.getMintPriceAsync()];\r\n                    case 2:\r\n                        mintPrice = _a.sent();\r\n                        return [4 /*yield*/, this.contract.mintAsync(this.getAccount(), mintPrice.toFixed())];\r\n                    case 3:\r\n                        result = _a.sent();\r\n                        logger.info(\"mintAsync\", result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.offerAsync = function (_id, _amount, _address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var fee, result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"offerAsync\", \"id\", _id, \"amount\", _amount, \"address\", _address)();\r\n                        return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.getFeeAsync()];\r\n                    case 2:\r\n                        fee = _a.sent();\r\n                        if (!(_address && !util_1.CommonUtil.isNullOrWhitespace(_address))) return [3 /*break*/, 4];\r\n                        return [4 /*yield*/, this.contract.offerToAddressAsync(this.getAccount(), _id, _amount, _address, fee)];\r\n                    case 3:\r\n                        result = _a.sent();\r\n                        return [3 /*break*/, 6];\r\n                    case 4: return [4 /*yield*/, this.contract.offerAsync(this.getAccount(), _id, _amount, fee)];\r\n                    case 5:\r\n                        result = _a.sent();\r\n                        _a.label = 6;\r\n                    case 6:\r\n                        logger.info(\"offerAsync\", result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.cancelOfferAsync = function (_id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"cancelOfferAsync\", \"id\", _id)();\r\n                        return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.contract.cancelOfferAsync(this.getAccount(), _id)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        logger.info(\"cancelOfferAsync\", result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.buyAsync = function (_id, _amount) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        logger.info(\"buyAsync\", \"id\", _id, \"amount\", _amount)();\r\n                        return [4 /*yield*/, this.contract.buyAsync(this.getAccount(), _id, _amount)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        logger.info(\"buyAsync\", result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.bidAsync = function (_id, _amount) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var fee, result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"bidAsync\", \"id\", _id, \"amount\", _amount)();\r\n                        return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.getFeeAsync()];\r\n                    case 2:\r\n                        fee = _a.sent();\r\n                        return [4 /*yield*/, this.contract.enterBidAsync(this.getAccount(), _id, _amount, fee)];\r\n                    case 3:\r\n                        result = _a.sent();\r\n                        logger.info(result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.acceptBidAsync = function (_id, _amount) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"acceptBidAsync\", \"id\", _id, \"amount\", _amount)();\r\n                        return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.contract.acceptBidAsync(this.getAccount(), _id, _amount)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        logger.info(\"acceptBidAsync\", result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.cancelBidAsync = function (_id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"cancelBidAsync\", \"id\", _id)();\r\n                        return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.contract.cancelBidAsync(this.getAccount(), _id)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        logger.info(\"cancelBidAsync\", result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.handleVmLogAsync = function (accountBlockHash, accountBlockHeight, vmlog) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var marketEvent, punkEvent;\r\n            return __generator(this, function (_a) {\r\n                try {\r\n                    switch (vmlog.event) {\r\n                        case util_1.PunkTypes.VmLogEvent.MarketChanged:\r\n                            marketEvent = {\r\n                                timestamp: new util_1.PunkTypes.BigNumberWrapper(vmlog.args.timestamp),\r\n                                eventType: parseInt(vmlog.args.eventType),\r\n                                value: new util_1.PunkTypes.BigNumberWrapper(vmlog.args.value)\r\n                            };\r\n                            switch (marketEvent.eventType) {\r\n                                case util_1.PunkTypes.MarketEventType.ActionPrice:\r\n                                    this._actionPrice = marketEvent.value;\r\n                                    break;\r\n                                case util_1.PunkTypes.MarketEventType.MintPrice:\r\n                                    this._mintPrice = marketEvent.value;\r\n                                    break;\r\n                                default:\r\n                                    break;\r\n                            }\r\n                            this._emitter.emitMarketChanged(marketEvent);\r\n                            break;\r\n                        case util_1.PunkTypes.VmLogEvent.PunkChanged:\r\n                            punkEvent = {\r\n                                accountBlockHash: accountBlockHash,\r\n                                accountBlockHeight: new util_1.PunkTypes.BigNumberWrapper(accountBlockHeight),\r\n                                timestamp: new util_1.PunkTypes.BigNumberWrapper(vmlog.args.timestamp),\r\n                                eventType: parseInt(vmlog.args.eventType),\r\n                                punkId: parseInt(vmlog.args.punkId),\r\n                                amount: new util_1.PunkTypes.BigNumberWrapper(vmlog.args.amount),\r\n                                fromAddress: vmlog.args.fromAddress,\r\n                                toAddress: vmlog.args.toAddress\r\n                            };\r\n                            this._emitter.emitPunkChanged(punkEvent);\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    logger.error(error)();\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.toPunkEvents = function (events) {\r\n        if (!Array.isArray(events)) {\r\n            return [];\r\n        }\r\n        var result = [];\r\n        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\r\n            var e = events_1[_i];\r\n            var transformed = this.toPunkEvent(e);\r\n            if (transformed) {\r\n                result.push(transformed);\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    ViteBaseDataSource.prototype.toPunkEvent = function (event) {\r\n        if (!event) {\r\n            return null;\r\n        }\r\n        var abiItem = this.contract.getAbiItemByType(contracts_1.AbiItemType.punkChangedEvent);\r\n        var decoded = this._client.decodeVmLogByAbiItem(event.vmlog, abiItem);\r\n        if (!decoded) {\r\n            return null;\r\n        }\r\n        var transformed = {\r\n            accountBlockHash: event.accountBlockHash,\r\n            accountBlockHeight: event.accountBlockHeight,\r\n            timestamp: decoded.args.timestamp,\r\n            eventType: decoded.args.eventType,\r\n            punkId: decoded.args.punkId,\r\n            amount: decoded.args.amount,\r\n            fromAddress: decoded.args.fromAddress,\r\n            toAddress: decoded.args.toAddress\r\n        };\r\n        return util_1.TransformUtil.toPunkEvent(transformed);\r\n    };\r\n    ViteBaseDataSource.prototype.getFeeAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var actionPrice;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.getActionPriceAsync()];\r\n                    case 1:\r\n                        actionPrice = _a.sent();\r\n                        if (actionPrice.gt(0)) {\r\n                            return [2 /*return*/, actionPrice.toFixed()];\r\n                        }\r\n                        return [2 /*return*/, null];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getAccountBlockHeightAsync = function (_address, _height) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var height;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        height = new util_1.PunkTypes.BigNumberWrapper(\"0\");\r\n                        if (!(_height && !util_1.CommonUtil.isNullOrWhitespace(_height))) return [3 /*break*/, 1];\r\n                        height = new util_1.PunkTypes.BigNumberWrapper(_height);\r\n                        return [3 /*break*/, 3];\r\n                    case 1: return [4 /*yield*/, this._client.getAccountBlockHeightAsync(_address)];\r\n                    case 2:\r\n                        height = _a.sent();\r\n                        _a.label = 3;\r\n                    case 3: return [2 /*return*/, height];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getEventsFromHeight = function () {\r\n        if (common_1.CommonConfig.IS_PRODUCTION) {\r\n            // Hide events before official launch\r\n            // return new BigNumber(\"1150\");\r\n        }\r\n        return new util_1.PunkTypes.BigNumberWrapper(\"0\");\r\n    };\r\n    ViteBaseDataSource.prototype.checkQuotaAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var address, quota;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        address = this.contract.contract.address;\r\n                        return [4 /*yield*/, this.getQuotaAsync(address)];\r\n                    case 1:\r\n                        quota = _a.sent();\r\n                        this._emitter.emitQuotaChanged(address, quota);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.updatePunkInfosAsync = function () {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var events, _i, events_2, e, punkEvent, newRefHeight;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (!this._punkInfos || this._punkInfos.length !== common_1.CommonConstants.TOTAL_MINTS) {\r\n                            logger.info(\"Invalid market data provided\", (_a = this._punkInfos) === null || _a === void 0 ? void 0 : _a.length)();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        if (!this._refHeight) {\r\n                            logger.info(\"Reference height is not defined\")();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        logger.info(\"Get market events with reference height\", this._refHeight.toFixed())();\r\n                        return [4 /*yield*/, this.getNewMarketEventsAsync(this._refHeight)];\r\n                    case 1:\r\n                        events = _b.sent();\r\n                        if (!Array.isArray(events) || events.length <= 0) {\r\n                            logger.info(\"Get market events result is not an array or empty\")();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        logger.info(\"events.length\", events.length)();\r\n                        for (_i = 0, events_2 = events; _i < events_2.length; _i++) {\r\n                            e = events_2[_i];\r\n                            punkEvent = this.toPunkEvent(e);\r\n                            if (!punkEvent) {\r\n                                logger.info(\"Invalid punk event\", e)();\r\n                                continue;\r\n                            }\r\n                            this.updatePunkInfo(punkEvent);\r\n                            newRefHeight = util_1.TransformUtil.toBigNumber(e.accountBlockHeight);\r\n                            if (newRefHeight.gt(this._refHeight)) {\r\n                                logger.info(\"New reference height\", newRefHeight.toFixed())();\r\n                                this._refHeight = newRefHeight;\r\n                            }\r\n                        }\r\n                        return [4 /*yield*/, this.updatePunksAsync()];\r\n                    case 2:\r\n                        _b.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return ViteBaseDataSource;\r\n}(_1.BaseDataSource));\r\nexports.ViteBaseDataSource = ViteBaseDataSource;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./common\"), exports);\r\n__exportStar(require(\"./util\"), exports);\r\n__exportStar(require(\"./wallet\"), exports);\r\n__exportStar(require(\"./search\"), exports);\r\n__exportStar(require(\"./contracts\"), exports);\r\n__exportStar(require(\"./clients\"), exports);\r\n__exportStar(require(\"./datasources\"), exports);\r\n","import { ICommonConfig, PunkTypes } from \"vitepunks-common\";\r\n\r\nexport class ClientConfig implements ICommonConfig {\r\n  private _useIpfs: boolean = false;\r\n  get USE_IPFS(): boolean {\r\n    return this._useIpfs;\r\n  }\r\n  set USE_IPFS(_flag: boolean) {\r\n    this._useIpfs = _flag;\r\n  }\r\n  get IS_PRODUCTION(): boolean {\r\n    if (!process.env.REACT_APP_IS_PRODUCTION) {\r\n      throw new Error(\"REACT_APP_IS_PRODUCTION is not defined\");\r\n    }\r\n    return process.env.REACT_APP_IS_PRODUCTION === \"true\";\r\n  }\r\n  get CONTRACT_ADDRESS(): string {\r\n    if (!process.env.REACT_APP_CONTRACT_ADDRESS) {\r\n      throw new Error(\"REACT_APP_CONTRACT_ADDRESS is not defined\");\r\n    }\r\n    return process.env.REACT_APP_CONTRACT_ADDRESS;\r\n  }\r\n  get PRE_MINT_HEIGHT(): Maybe<PunkTypes.BigNumberWrapper> {\r\n    if (!process.env.REACT_APP_PRE_MINT_HEIGHT) {\r\n      return null;\r\n    }\r\n    return new PunkTypes.BigNumberWrapper(process.env.REACT_APP_PRE_MINT_HEIGHT);\r\n  }\r\n  get EXPLORER_URL(): string {\r\n    if (!process.env.REACT_APP_EXPLORER_URL) {\r\n      throw new Error(\"REACT_APP_EXPLORER_URL is not defined\");\r\n    }\r\n    return process.env.REACT_APP_EXPLORER_URL;\r\n  }\r\n  get ENABLE_LOGGER(): boolean {\r\n    if (!process.env.REACT_APP_ENABLE_LOGGER) {\r\n      throw new Error(\"REACT_APP_ENABLE_LOGGER is not defined\");\r\n    }\r\n    return process.env.REACT_APP_ENABLE_LOGGER === \"true\";\r\n  }\r\n  get FETCH_MARKET_DATA(): boolean {\r\n    return this.IS_PRODUCTION;\r\n  }\r\n  get ENABLE_MNEMONIC_LOGIN(): boolean {\r\n    if (!process.env.REACT_APP_ENABLE_MNEMONIC_LOGIN) {\r\n      throw new Error(\"REACT_APP_ENABLE_MNEMONIC_LOGIN is not defined\");\r\n    }\r\n    return process.env.REACT_APP_ENABLE_MNEMONIC_LOGIN === \"true\";\r\n  }\r\n  get NETWORK_ID(): number {\r\n    if (!process.env.REACT_APP_NETWORK_ID) {\r\n      throw new Error(\"REACT_APP_NETWORK_ID is not defined\");\r\n    }\r\n    return parseInt(process.env.REACT_APP_NETWORK_ID);\r\n  }\r\n  get BASENAME(): Maybe<string> {\r\n    return process.env.REACT_APP_BASENAME;\r\n  }\r\n}\r\n\r\nconst config = new ClientConfig();\r\n\r\nexport const getClientConfig = () => {\r\n  return config;\r\n}","import { PunkTypes } from \"vitepunks-common\"\r\n\r\nexport const ClientConstants = {\r\n  APP_NAME: 'VitePunks',\r\n  USE_MOCK_DATASOURCE: false,\r\n  WEB_WALLET_STORAGE_SPACE: 'VITEPUNKS_WEB_WALLET',\r\n  SESSION_WALLET_STORAGE_SPACE: 'VITEPUNKS_SESSION_WALLET',\r\n  BG_URL: './assets/images/bg.png',\r\n  ITEM_BG_URL: './assets/images/item_bg.png',\r\n  SAMPLE_PUNK_URL: './assets/images/punk_8311.png',\r\n  LANDING_IMAGE_URL: './assets/images/landing.png',\r\n  QUOTA_WIKI_URL: 'https://github.com/vitepunks/resources/wiki',\r\n  DISCORD_URL: 'https://discord.gg/FsB2uZTn5u',\r\n  TWITTER_URL: 'https://twitter.com/VitePunks',\r\n  GITHUB_URL: 'https://github.com/vitepunks',\r\n  QUOTA_THRESHOLD: new PunkTypes.BigNumberWrapper(\"100000\"),\r\n}","import { getLogger, IWalletStore, SessionWallet, Wallet, WalletManager, WalletType, WebWallet } from 'vitepunks-common';\r\nimport { ClientConstants } from '../common/constants';\r\n\r\nconst logger = getLogger()\r\n\r\nexport class WalletStore implements IWalletStore {\r\n\r\n  private readonly _webWalletKey = ClientConstants.WEB_WALLET_STORAGE_SPACE;\r\n  private readonly _sessionWalletKey = ClientConstants.SESSION_WALLET_STORAGE_SPACE\r\n\r\n  clear(): void {\r\n    localStorage.removeItem(this._webWalletKey);\r\n    sessionStorage.removeItem(this._sessionWalletKey);\r\n  }\r\n\r\n  getItem(): Maybe<WebWallet | SessionWallet> {\r\n    let data;\r\n\r\n    try {\r\n      data = localStorage.getItem(this._webWalletKey);\r\n      if (!data) {\r\n        data = sessionStorage.getItem(this._sessionWalletKey);\r\n      }\r\n    } catch (err) {\r\n      logger.error(err)();\r\n      return undefined;\r\n    }\r\n\r\n    if (!data) {\r\n      return undefined;\r\n    }\r\n\r\n    try {\r\n      return Wallet.fromJS(JSON.parse(data));\r\n    } catch (err) {\r\n      logger.error(err)();\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  setItem(data: WebWallet | SessionWallet): void {\r\n    const saveData = JSON.stringify(data);\r\n\r\n    try {\r\n      switch (data.type) {\r\n        case WalletType.Web:\r\n          localStorage.setItem(this._webWalletKey, saveData);\r\n          break;\r\n        case WalletType.Session:\r\n          sessionStorage.setItem(this._sessionWalletKey, saveData);\r\n          break;\r\n        default:\r\n          throw new Error(`Wallet type '${data.type}' is not supported.`)\r\n      }\r\n    } catch (err) {\r\n      logger.error(err)();\r\n    }\r\n  }\r\n}\r\n\r\nconst manager = new WalletManager(new WalletStore());\r\n\r\nexport const getWalletManager = () => {\r\n  return manager;\r\n}","import { FileUtil } from \"vitepunks-common\";\r\n\r\nexport class BrowserFileUtil extends FileUtil {\r\n  async readFileAsync(path: string, encoding: BufferEncoding = 'utf8'): Promise<any> {\r\n    const response = await fetch(path);\r\n    switch (encoding) {\r\n      case 'binary':\r\n        return response.arrayBuffer();\r\n      default:\r\n        return response.text();\r\n    }\r\n  }\r\n  async writeFileAsync(path: string, data: any, encoding?: BufferEncoding): Promise<any> {\r\n\r\n  }\r\n}\r\n\r\nconst browserFileUtil = new BrowserFileUtil();\r\n\r\nexport const getBrowserFileUtil = () => {\r\n  return browserFileUtil;\r\n}","import { BaseDataSource, CommonConstants, CommonUtil, FileUtil, getLogger, PunkTypes, TransformUtil, WalletManager } from \"vitepunks-common\";\r\nimport { getWalletManager } from \"../storage/wallet.storage\";\r\nimport { getBrowserFileUtil } from \"../util/file.util\";\r\n\r\nconst logger = getLogger();\r\n\r\nexport class MockDataSource extends BaseDataSource {\r\n  private _events!: PunkTypes.PunkEvent[];\r\n\r\n  constructor() {\r\n    super();\r\n    this.clearMock();\r\n  }\r\n\r\n  private clearMock(): void {\r\n    this._events = [];\r\n  }\r\n\r\n  protected get fileUtil(): FileUtil {\r\n    return getBrowserFileUtil();\r\n  }\r\n  protected get walletManager(): WalletManager {\r\n    return getWalletManager();\r\n  }\r\n\r\n  protected async initPunkInfosAsync(): Promise<void> {\r\n    let infos = await this.fileUtil.readFileAsync(\"./assets/data/mock_infos.json\");\r\n    infos = JSON.parse(infos);\r\n\r\n    this._punkInfos = this.getDefaultPunkInfos();\r\n    if (infos) {\r\n      for (const p of infos.punks) {\r\n        const info = TransformUtil.toPunkInfo(p);\r\n        if (info) {\r\n          const index = parseInt(p.id) - 1;\r\n          this._punkInfos[index] = info;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async initAsync(network: PunkTypes.Network): Promise<void> {\r\n    logger.info('Init MockDataSource')();\r\n    this.clearMock();\r\n\r\n    let events = await this.fileUtil.readFileAsync(\"./assets/data/mock_events.json\");\r\n    events = JSON.parse(events);\r\n    for (let index = 0; index < events.length; index++) {\r\n      const e = events[index];\r\n      this._events.push(TransformUtil.toPunkEvent(e));\r\n    }\r\n    this._events = this._events.reverse();\r\n  }\r\n\r\n  protected disposeProtected(): void {\r\n    logger.info('Dispose MockDataSource')();\r\n    this.clearMock();\r\n  }\r\n\r\n  async getQuotaAsync(_address: string): Promise<PunkTypes.ViteQuotaResult> {\r\n    return {\r\n      currentQuota: new PunkTypes.BigNumberWrapper(\"1000\"),\r\n      maxQuota: new PunkTypes.BigNumberWrapper(\"2000\"),\r\n      stakeAmount: new PunkTypes.BigNumberWrapper(\"10000\")\r\n    };\r\n  }\r\n\r\n  async getPunkEventsAsync(_id: string, _limit: number, _offset: number, _height?: Maybe<string>): Promise<PunkTypes.PunkEvents> {\r\n    logger.info(\"id\", _id, \"limit\", _limit, \"offset\", _offset, \"height\", _height)();\r\n    await CommonUtil.timeout(2000);\r\n    if (!CommonUtil.isNumber(_id)) {\r\n      return {\r\n        blockHeight: TransformUtil.defaultBigNumber,\r\n        events: []\r\n      };\r\n    }\r\n    return {\r\n      blockHeight: TransformUtil.defaultBigNumber,\r\n      events: this._events.filter(e => e.punkId === parseInt(_id)).slice(_offset, _offset + _limit)\r\n    };\r\n  }\r\n\r\n  async getPunkOwnerAsync(_id: string): Promise<Maybe<string>> {\r\n    await CommonUtil.timeout(2000);\r\n    if (!CommonUtil.isNumber(_id)) {\r\n      return undefined;\r\n    }\r\n    const e = this._events.find(e => e.punkId.toString() === _id && e.eventType === PunkTypes.PunkEventType.Mint);\r\n    if (!e) {\r\n      return undefined;\r\n    }\r\n    return e.toAddress;\r\n  }\r\n\r\n  async getPunksByAddressAsync(_address: string, _limit: number, _offset: number): Promise<PunkTypes.Punk[]> {\r\n    logger.info(\"_address\", _address, \"limit\", _limit, \"offset\", _offset)();\r\n    const punks = [\r\n      await this.getPunkAsync(\"101\"),\r\n      await this.getPunkAsync(\"201\"),\r\n      await this.getPunkAsync(\"301\"),\r\n      await this.getPunkAsync(\"401\"),\r\n      await this.getPunkAsync(\"501\"),\r\n      await this.getPunkAsync(\"601\"),\r\n      await this.getPunkAsync(\"701\"),\r\n      await this.getPunkAsync(\"801\"),\r\n      await this.getPunkAsync(\"9999\")\r\n    ];\r\n    return punks.slice(_offset, _offset + _limit);\r\n  }\r\n\r\n  async getMarketBidAsync(_id: string): Promise<Maybe<PunkTypes.MarketBid>> {\r\n    await CommonUtil.timeout(1000);\r\n    if (!CommonUtil.isNumber(_id)) {\r\n      return undefined;\r\n    }\r\n    const e = this._events.find(e => e.punkId.toString() === _id && e.eventType === PunkTypes.PunkEventType.NewBid);\r\n    if (!e) {\r\n      return undefined;\r\n    }\r\n    return {\r\n      __typename: PunkTypes.TypeNames.MarketBid,\r\n      itemIndex: TransformUtil.toBigNumber(_id),\r\n      bidder: e.fromAddress ?? CommonConstants.ZERO_ADDRESS,\r\n      amount: e.amount ?? TransformUtil.defaultBigNumber,\r\n      timestamp: null\r\n    }\r\n  }\r\n\r\n  async getMarketOfferAsync(_id: string): Promise<Maybe<PunkTypes.MarketOffer>> {\r\n    await CommonUtil.timeout(1000);\r\n    if (!CommonUtil.isNumber(_id)) {\r\n      return undefined;\r\n    }\r\n    const e = this._events.find(e => e.punkId.toString() === _id && e.eventType === PunkTypes.PunkEventType.Offer);\r\n    if (!e) {\r\n      return undefined;\r\n    }\r\n    const seller = await this.getPunkOwnerAsync(_id);\r\n    return {\r\n      __typename: PunkTypes.TypeNames.MarketOffer,\r\n      itemIndex: TransformUtil.toBigNumber(_id),\r\n      seller: seller ?? CommonConstants.ZERO_ADDRESS,\r\n      minAmount: e.amount ?? TransformUtil.defaultBigNumber,\r\n      onlySellTo: e.toAddress,\r\n      timestamp: null\r\n    }\r\n  }\r\n\r\n  async getMarketEventsAsync(_limit: number, _offset: number, _height?: Maybe<string>): Promise<PunkTypes.PunkEvents> {\r\n    logger.info(\"limit\", _limit, \"offset\", _offset, \"height\", _height)();\r\n    await CommonUtil.timeout(500);\r\n    return {\r\n      blockHeight: new PunkTypes.BigNumberWrapper(\"0\"),\r\n      events: this._events.slice(_offset, _offset + _limit)\r\n    }\r\n  }\r\n\r\n  async getMarketEventsByTypeAsync(_type: string, _limit: number, _offset: number, _height?: Maybe<string>): Promise<PunkTypes.PunkEvents> {\r\n    logger.info(\"type\", _type, \"limit\", _limit, \"offset\", _offset, \"height\", _height)();\r\n    await CommonUtil.timeout(500);\r\n    return {\r\n      blockHeight: new PunkTypes.BigNumberWrapper(\"0\"),\r\n      events: this._events.filter(e => e.eventType === parseInt(_type)).slice(_offset, _offset + _limit)\r\n    }\r\n  }\r\n\r\n  async getMarketInfoAsync(): Promise<PunkTypes.MarketInfo> {\r\n    logger.info(\"getMarketInfoAsync\")();\r\n    return {\r\n      marketStarted: true,\r\n      mintsRemaining: CommonConstants.TOTAL_MINTS - this._events.filter(e => e.eventType === PunkTypes.PunkEventType.Mint).length,\r\n      mintPrice: new PunkTypes.BigNumberWrapper(\"12\").shiftedBy(18),\r\n      actionPrice: new PunkTypes.BigNumberWrapper(\"3.1\").shiftedBy(18),\r\n    };\r\n  }\r\n\r\n  async mintAsync(): Promise<boolean> {\r\n    throw new Error(\"Method 'mintAsync' not implemented.\");\r\n  }\r\n\r\n  async offerAsync(_id: string, _tokenId: string, _amount: string, _address?: string | null): Promise<boolean> {\r\n    logger.info(\"offerAsync\", \"id\", _id, \"tokenId\", _tokenId, \"amount\", _amount, \"address\", _address)();\r\n    await CommonUtil.timeout(2000);\r\n    return true;\r\n  }\r\n\r\n  async cancelOfferAsync(_id: string): Promise<boolean> {\r\n    logger.info(\"cancelOfferAsync\", \"id\", _id)();\r\n    await CommonUtil.timeout(2000);\r\n    return true;\r\n  }\r\n\r\n  async buyAsync(_id: string, _amount: string): Promise<boolean> {\r\n    logger.info(\"buyAsync\", \"id\", _id, \"amount\", _amount)();\r\n    await CommonUtil.timeout(2000);\r\n    return true;\r\n  }\r\n\r\n  async bidAsync(_id: string, _amount: string): Promise<boolean> {\r\n    logger.info(\"bidAsync\", \"id\", _id, \"amount\", _amount)();\r\n    await CommonUtil.timeout(2000);\r\n    return true;\r\n  }\r\n\r\n  async acceptBidAsync(_id: string, _amount: string): Promise<boolean> {\r\n    logger.info(\"acceptBidAsync\", \"id\", _id, \"amount\", _amount)();\r\n    await CommonUtil.timeout(2000);\r\n    return true;\r\n  }\r\n\r\n  async cancelBidAsync(_id: string): Promise<boolean> {\r\n    logger.info(\"cancelBidAsync\", \"id\", _id)();\r\n    await CommonUtil.timeout(2000);\r\n    return true;\r\n  }\r\n\r\n  async updatePunkInfosAsync(): Promise<void> {\r\n  }\r\n}\r\n\r\nconst ds = new MockDataSource();\r\n\r\nexport const getMockDataSource = () => {\r\n  return ds;\r\n}","import { CommonConfig, CommonUtil, CompressUtil, FileUtil, PunksBaseContract } from \"vitepunks-common\";\r\nimport { getBrowserFileUtil } from \"../util/file.util\";\r\n\r\nexport class PunksContract extends PunksBaseContract {\r\n  private readonly _fileUtil: FileUtil;\r\n\r\n  constructor() {\r\n    super();\r\n    this._fileUtil = getBrowserFileUtil();\r\n  }\r\n\r\n  protected async initContractAsyncProtected(basePath: string): Promise<void> {\r\n    const punksContract = await this._fileUtil.readFileAsync(CommonUtil.appendPath(basePath, \"Punks.gz?v=\" + process.env.REACT_APP_VERSION), \"binary\");\r\n    this._contract = JSON.parse(CompressUtil.decompress(CommonUtil.toUint8Array(punksContract, \"binary\")));\r\n    this._contract.address = CommonConfig.CONTRACT_ADDRESS;\r\n  }\r\n}\r\n\r\nconst contract = new PunksContract();\r\n\r\nexport const getPunksContract = () => {\r\n  return contract;\r\n}","import { FileUtil, PunksBaseContract, ViteBaseDataSource, WalletManager } from \"vitepunks-common\";\r\nimport { getPunksContract } from \"../contracts/punks.contract\";\r\nimport { getWalletManager } from \"../storage/wallet.storage\";\r\nimport { getBrowserFileUtil } from \"../util/file.util\";\r\n\r\nexport class ViteDataSource extends ViteBaseDataSource {\r\n  protected get contract(): PunksBaseContract {\r\n    return getPunksContract();\r\n  }\r\n  protected get fileUtil(): FileUtil {\r\n    return getBrowserFileUtil();\r\n  }\r\n  protected get walletManager(): WalletManager {\r\n    return getWalletManager();\r\n  }\r\n}\r\n\r\nconst ds = new ViteDataSource();\r\n\r\nexport const getViteDataSource = () => {\r\n  return ds;\r\n}","export class AccountStorage {\r\n  private _account: Maybe<string>;\r\n\r\n  get account(): Maybe<string> {\r\n    return this._account;\r\n  }\r\n\r\n  set account(account: Maybe<string>) {\r\n    this._account = account;\r\n  }\r\n}\r\n\r\nconst storage = new AccountStorage();\r\n\r\nexport const getAccountStorage = () => {\r\n  return storage;\r\n}","import Connector from '@vite/connector';\r\nimport { getLogger, IWalletConnector, SessionWallet, SessionWalletAccount, WalletManager } from 'vitepunks-common';\r\n\r\nconst logger = getLogger()\r\n\r\nexport class WalletConnector extends Connector implements IWalletConnector {\r\n  private readonly _walletManager: WalletManager;\r\n\r\n  constructor(walletManager: WalletManager, opts: any, meta?: any) {\r\n    super(opts, meta);\r\n    this._walletManager = walletManager;\r\n    this.on('connect', (err: any, payload: any) => {\r\n      logger.info('WalletConnector.connect', err, payload)()\r\n      const { accounts } = payload.params[0];\r\n      this.saveSession(accounts);\r\n    });\r\n    this.on('disconnect', (err: any, payload: any) => {\r\n      logger.info('WalletConnector.disconnect', err, payload)()\r\n      this.stopBizHeartBeat()\r\n      this._walletManager.removeWallet()\r\n    });\r\n    this.on('session_update', (err: any, payload: any) => {\r\n      logger.info('WalletConnector.session_update', err, payload)()\r\n      const session = payload[0];\r\n      if (session && session.accounts) {\r\n        this.saveSession(session.accounts);\r\n      }\r\n    });\r\n  }\r\n\r\n  get uri(): string {\r\n    return super.uri\r\n  }\r\n\r\n  on(event: string | symbol, listener: (...args: any[]) => void): this {\r\n    return super.on(event, listener)\r\n  }\r\n\r\n  off(event: string | symbol, listener: (...args: any[]) => void): this {\r\n    return super.off(event, listener)\r\n  }\r\n\r\n  saveSession(accounts: string[]): void {\r\n    if (!accounts || !accounts[0]) {\r\n      throw new Error('address is null');\r\n    }\r\n    const sessionAccounts: SessionWalletAccount[] = []\r\n    for (let index = 0; index < accounts.length; index++) {\r\n      const address = accounts[index];\r\n      sessionAccounts.push(new SessionWalletAccount({\r\n        id: index.toString(),\r\n        address: address\r\n      }))\r\n    }\r\n    const wallet = new SessionWallet({\r\n      active: sessionAccounts[0],\r\n      accounts: sessionAccounts,\r\n      session: this.session,\r\n      timestamp: new Date().getTime()\r\n    })\r\n    this._walletManager.setWallet(wallet)\r\n  }\r\n\r\n  updateSession(): void {\r\n    const existing = this._walletManager.getWallet()\r\n    if (existing && existing instanceof SessionWallet) {\r\n      existing.timestamp = new Date().getTime()\r\n      this._walletManager.updateWalletStore(existing)\r\n    }\r\n  }\r\n\r\n  async createSession(): Promise<string> {\r\n    await super.createSession();\r\n    return this.uri;\r\n  }\r\n\r\n  async sendTransactionAsync(...args: any): Promise<any> {\r\n    return new Promise((res, rej) => {\r\n      this.on('disconnect', () => {\r\n        rej(\"Request aborted due to disconnect.\");\r\n      });\r\n\r\n      this.sendCustomRequest({ method: 'vite_signAndSendTx', params: args }).then((r: any) => {\r\n        this.updateSession();\r\n        res(r);\r\n      }).catch((e: any) => {\r\n        rej(e);\r\n      });\r\n    });\r\n  }\r\n\r\n  async signMessageAsync(...args: any): Promise<any> {\r\n    return new Promise((res, rej) => {\r\n      this.on('disconnect', () => {\r\n        rej(\"Request aborted due to disconnect.\");\r\n      });\r\n\r\n      this.sendCustomRequest({ method: 'vite_signMessage', params: args }).then((r: any) => {\r\n        this.updateSession();\r\n        res(r);\r\n      }).catch((e: any) => {\r\n        rej(e);\r\n      });\r\n    });\r\n  }\r\n\r\n  async killSessionAsync(): Promise<any> {\r\n    await super.killSession();\r\n  }\r\n}","import { CommonUtil, getLogger, IWalletConnector, PunkTypes, WalletManager } from \"vitepunks-common\"\r\nimport { WalletConnector } from \"./connector\"\r\n\r\nconst logger = getLogger()\r\n\r\nexport class WalletConnectorFactory {\r\n  private readonly _walletManager: WalletManager\r\n\r\n  constructor(walletManager: WalletManager) {\r\n    this._walletManager = walletManager\r\n  }\r\n\r\n  private get session(): Maybe<string> {\r\n    return this._walletManager.getValidSession()\r\n  }\r\n\r\n  private createConnector(network: PunkTypes.Network): IWalletConnector {\r\n    const account = this._walletManager.getActiveAccount()\r\n    const opts = {\r\n      bridge: network.connectorUrl,\r\n      session: this.session\r\n    }\r\n    const meta = account ? { lastAccount: account.address } : undefined\r\n    const connector = new WalletConnector(this._walletManager, opts, meta)\r\n    return connector\r\n  }\r\n\r\n  create(network: PunkTypes.Network): IWalletConnector {\r\n    const connector = this.createConnector(network)\r\n\r\n    if (!this.session) {\r\n      connector.createSession().then(() => logger.info('IWalletConnector connected', connector.uri)())\r\n    }\r\n\r\n    return connector\r\n  }\r\n\r\n  async createAsync(network: PunkTypes.Network): Promise<IWalletConnector> {\r\n    const connector = this.createConnector(network)\r\n\r\n    if (!this.session) {\r\n      await CommonUtil.timeout(1000)\r\n      await connector.createSession()\r\n      logger.info('IWalletConnector connected', connector.uri)()\r\n    }\r\n\r\n    return connector\r\n  }\r\n}","import { getLogger, IDataSource, Networks, PunkTypes, UrlUtil } from \"vitepunks-common\";\r\nimport { getClientConfig } from \"../common/config\";\r\nimport { ClientConstants } from \"../common/constants\";\r\nimport { getMockDataSource } from \"../datasources/mock.datasource\";\r\nimport { getViteDataSource } from \"../datasources/vite.datasource\";\r\nimport { getWalletManager } from \"../storage\";\r\nimport { WalletConnectorFactory } from \"../wallet/factory\";\r\n\r\nconst logger = getLogger();\r\n\r\nexport class CommonContext {\r\n  private _isInitialized: boolean = false;\r\n  private _network!: PunkTypes.Network;\r\n  private _datasource!: IDataSource;\r\n\r\n  async initAsync(): Promise<void> {\r\n    this._isInitialized = false;\r\n    if (ClientConstants.USE_MOCK_DATASOURCE) {\r\n      this._datasource = getMockDataSource();\r\n    } else {\r\n      this._datasource = getViteDataSource();\r\n    }\r\n    const clientConfig = getClientConfig();\r\n    const networkId = clientConfig.NETWORK_ID;\r\n    this._network = Networks.find(e => e.id === networkId) ?? Networks[0];\r\n    const walletConnectorFactory = new WalletConnectorFactory(getWalletManager());\r\n    await this._datasource.initBaseAsync(this._network, PunkTypes.ProviderType.WEBSOCKET, walletConnectorFactory.create(this._network));\r\n    await this.checkIpfsAsync();\r\n    logger.info(\"Using IPFS\", clientConfig.USE_IPFS)();\r\n    this._isInitialized = true;\r\n  }\r\n\r\n  private async checkIpfsAsync(): Promise<void> {\r\n    return new Promise(async (resolve) => {\r\n      const punk = await this._datasource.getPunkAsync(\"1\");\r\n      var img = new Image();\r\n      img.onload = () => {\r\n        getClientConfig().USE_IPFS = false;\r\n        resolve();\r\n      };\r\n      img.onerror = () => {\r\n        getClientConfig().USE_IPFS = true;\r\n        resolve();\r\n      };\r\n      img.src = UrlUtil.getPunkUrl(punk.image);\r\n    });\r\n  }\r\n\r\n  dispose(): void {\r\n    logger.info(\"Disposing CommonContext\")();\r\n    this._datasource?.dispose();\r\n  }\r\n\r\n  get isInitialized(): boolean {\r\n    return this._isInitialized;\r\n  }\r\n\r\n  get network(): PunkTypes.Network {\r\n    return this._network;\r\n  }\r\n\r\n  get datasource(): IDataSource {\r\n    return this._datasource;\r\n  }\r\n}\r\n\r\nconst context = new CommonContext();\r\n\r\nexport const getCommonContext = () => {\r\n  return context;\r\n}\r\n","import { gql } from \"@apollo/client\";\r\nimport { ApolloContext } from \"../clients/apollo.client\";\r\n\r\nexport const OFFER_MUTATION = gql`\r\n  mutation Offer($id: ID!, $amount: String!, $address: String) {\r\n    offer(id: $id, amount: $amount, address: $address) @client\r\n  }\r\n`;\r\n\r\nexport const CANCEL_OFFER_MUTATION = gql`\r\n  mutation CancelOffer($id: ID!) {\r\n    cancelOffer(id: $id) @client\r\n  }\r\n`;\r\n\r\nexport const BUY_MUTATION = gql`\r\n  mutation Buy($id: ID!, $amount: String!) {\r\n    buy(id: $id, amount: $amount) @client\r\n  }\r\n`;\r\n\r\nexport const BID_MUTATION = gql`\r\n  mutation Bid($id: ID!, $amount: String!) {\r\n    bid(id: $id, amount: $amount) @client\r\n  }\r\n`;\r\n\r\nexport const ACCEPT_BID_MUTATION = gql`\r\n  mutation AcceptBid($id: ID!, $amount: String!) {\r\n    acceptBid(id: $id, amount: $amount) @client\r\n  }\r\n`;\r\n\r\nexport const CANCEL_BID_MUTATION = gql`\r\n  mutation CancelBid($id: ID!) {\r\n    cancelBid(id: $id) @client\r\n  }\r\n`;\r\n\r\nexport const MarketMutations = {\r\n  async offer(parent: any, { id, amount, address }: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.offerAsync(id, amount, address);\r\n  },\r\n  async cancelOffer(parent: any, { id }: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.cancelOfferAsync(id);\r\n  },\r\n  async buy(parent: any, { id, amount }: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.buyAsync(id, amount);\r\n  },\r\n  async bid(parent: any, { id, amount }: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.bidAsync(id, amount);\r\n  },\r\n  async acceptBid(parent: any, { id, amount }: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.acceptBidAsync(id, amount);\r\n  },\r\n  async cancelBid(parent: any, { id }: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.cancelBidAsync(id);\r\n  },\r\n}","import { gql } from \"@apollo/client\";\r\nimport { ApolloContext } from \"../clients/apollo.client\";\r\n\r\nexport const MINT_MUTATION = gql`\r\n  mutation Mint {\r\n    mint @client\r\n  }\r\n`;\r\n\r\nexport const PunkMutations = {\r\n  async mint(parent: any, params: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.mintAsync();\r\n  },\r\n}","import { gql } from \"@apollo/client\";\r\nimport { PunkTypes } from \"vitepunks-common\";\r\nimport { ApolloContext } from \"../clients/apollo.client\";\r\n\r\nexport const PUNK_FIELDS = gql`\r\n  fragment PunkFields on Punk {\r\n    id\r\n    rank\r\n    image\r\n    cid\r\n    attributes\r\n    owner\r\n    bid {\r\n      itemIndex\r\n      bidder\r\n      amount\r\n    }\r\n    offer {\r\n      itemIndex\r\n      seller\r\n      minAmount\r\n      onlySellTo\r\n    }\r\n  }\r\n`;\r\n\r\nexport const PUNK_EVENT_FIELDS = gql`\r\n  fragment PunkEventFields on PunkEvent {\r\n    id\r\n    accountBlockHash\r\n    accountBlockHeight\r\n    timestamp\r\n    eventType\r\n    punkId\r\n    amount\r\n    fromAddress\r\n    toAddress\r\n  }\r\n`;\r\n\r\nexport const GET_PUNK_ATTRIBUTES_QUERY = gql`\r\n  query GetPunkAttributes {\r\n    punkAttributes @client\r\n  }\r\n`;\r\n\r\nexport const GET_PUNK_EVENTS_QUERY = gql`\r\n  ${PUNK_EVENT_FIELDS}\r\n  query GetPunkEvents($id: String!, $limit: Int!, $offset: Int!, $height: String) {\r\n    punkEvents(id: $id, limit: $limit, offset: $offset, height: $height) @client {\r\n      blockHeight\r\n      events {\r\n        ...PunkEventFields\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_PUNK_OWNER_QUERY = gql`\r\n  query GetPunkOwner($id: String!) {\r\n    punkOwner(id: $id) @client\r\n  }\r\n`;\r\n\r\nexport const GET_PUNK_QUERY = gql`\r\n  ${PUNK_FIELDS}\r\n  query GetPunk($id: ID!) {\r\n    punk(id: $id) @client {\r\n      ...PunkFields\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_PUNKS_QUERY = gql`\r\n  ${PUNK_FIELDS}\r\n  query GetPunks($limit: Int!, $offset: Int!, $sort: PunkSortBy!, $order: OrderBy!, $search: String) {\r\n    punks(limit: $limit, offset: $offset, sort: $sort, order: $order, search: $search) @client {\r\n      ...PunkFields\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_PUNKS_ALL_QUERY = gql`\r\n  ${PUNK_FIELDS}\r\n  query GetPunksAll {\r\n    punksAll @client {\r\n      ...PunkFields\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_PUNKS_BY_ADDRESS_QUERY = gql`\r\n  ${PUNK_FIELDS}\r\n  query GetPunksByAddress($address: String!, $limit: Int!, $offset: Int!) {\r\n    punksByAddress(address: $address, limit: $limit, offset: $offset) @client {\r\n      ...PunkFields\r\n    }\r\n  }\r\n`;\r\n\r\nexport const PunkQueries = {\r\n  async punkAttributes(parent: any, params: any, context: ApolloContext): Promise<string[]> {\r\n    const result = await context.client.datasource.getPunkAttributesAsync();\r\n    return result;\r\n  },\r\n  async punkEvents(parent: any, { id, limit, offset, height }: any, context: ApolloContext): Promise<PunkTypes.PunkEvents> {\r\n    const result = await context.client.datasource.getPunkEventsAsync(id, limit, offset, height);\r\n    return result;\r\n  },\r\n  async punkOwner(parent: any, { id }: any, context: ApolloContext): Promise<Maybe<string>> {\r\n    const result = await context.client.datasource.getPunkOwnerAsync(id);\r\n    return result;\r\n  },\r\n  async punk(parent: any, { id }: any, context: ApolloContext): Promise<PunkTypes.Punk> {\r\n    const result = await context.client.datasource.getPunkAsync(id);\r\n    return result;\r\n  },\r\n  async punks(parent: any, { limit, offset, sort, order, search }: any, context: ApolloContext): Promise<PunkTypes.Punk[]> {\r\n    const result = await context.client.datasource.getPunksAsync(limit, offset, sort, order, search);\r\n    return result;\r\n  },\r\n  async punksAll(parent: any, params: any, context: ApolloContext): Promise<PunkTypes.Punk[]> {\r\n    const result = await context.client.datasource.getPunksAllAsync();\r\n    return result;\r\n  },\r\n  async punksByAddress(parent: any, { address, limit, offset }: any, context: ApolloContext): Promise<PunkTypes.Punk[]> {\r\n    const result = await context.client.datasource.getPunksByAddressAsync(address, limit, offset);\r\n    return result;\r\n  },\r\n}","import { gql } from \"@apollo/client\";\r\nimport { PunkTypes } from \"vitepunks-common\";\r\nimport { ApolloContext } from \"../clients/apollo.client\";\r\nimport { PUNK_EVENT_FIELDS } from \"./punk\";\r\n\r\nexport const MARKET_BID_FIELDS = gql`\r\n  fragment MarketBidFields on MarketBid {\r\n    itemIndex\r\n    bidder\r\n    amount\r\n    timestamp\r\n  }\r\n`;\r\n\r\nexport const MARKET_OFFER_FIELDS = gql`\r\n  fragment MarketOfferFields on MarketOffer {\r\n    itemIndex\r\n    seller\r\n    minAmount\r\n    onlySellTo\r\n    timestamp\r\n  }\r\n`;\r\n\r\nexport const GET_MARKET_INFO_QUERY = gql`\r\n  query GetMarketInfo {\r\n    marketInfo @client {\r\n      marketStarted\r\n      mintsRemaining\r\n      mintPrice\r\n      actionPrice\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_MARKET_BID_QUERY = gql`\r\n  ${MARKET_BID_FIELDS}\r\n  query GetMarketBid($id: String!) {\r\n    marketBid(id: $id) @client {\r\n      ...MarketBidFields\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_MARKET_OFFER_QUERY = gql`\r\n  ${MARKET_OFFER_FIELDS}\r\n  query GetMarketOffer($id: String!) {\r\n    marketOffer(id: $id) @client {\r\n      ...MarketOfferFields\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_MARKET_EVENTS_QUERY = gql`\r\n  ${PUNK_EVENT_FIELDS}\r\n  query GetMarketEvents($limit: Int!, $offset: Int!, $height: String) {\r\n    marketEvents(limit: $limit, offset: $offset, height: $height) @client {\r\n      blockHeight\r\n      events {\r\n        ...PunkEventFields\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const MarketQueries = {\r\n  async marketInfo(parent: any, params: any, context: ApolloContext): Promise<PunkTypes.MarketInfo> {\r\n    const result = await context.client.datasource.getMarketInfoAsync();\r\n    return result;\r\n  },\r\n  async marketBid(parent: any, { id }: any, context: ApolloContext): Promise<Maybe<PunkTypes.MarketBid>> {\r\n    const result = await context.client.datasource.getMarketBidAsync(id);\r\n    return result;\r\n  },\r\n  async marketOffer(parent: any, { id }: any, context: ApolloContext): Promise<Maybe<PunkTypes.MarketOffer>> {\r\n    const result = await context.client.datasource.getMarketOfferAsync(id);\r\n    return result;\r\n  },\r\n  async marketEvents(parent: any, { limit, offset, height }: any, context: ApolloContext): Promise<PunkTypes.PunkEvents> {\r\n    const result = await context.client.datasource.getMarketEventsAsync(limit, offset, height);\r\n    return result;\r\n  }\r\n}","import { gql } from \"@apollo/client\";\r\nimport { PunkTypes } from \"vitepunks-common\";\r\nimport { ApolloContext } from \"../clients/apollo.client\";\r\n\r\nexport const GET_QUOTA_QUERY = gql`\r\n  query GetQuota($address: String!) {\r\n    quota(address: $address) @client {\r\n      currentQuota\r\n      maxQuota\r\n      stakeAmount\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_ACCOUNT_AUCTIONS_QUERY = gql`\r\n  query GetAccountAuctions($address: String!, $limit: Int!, $cursor: String) {\r\n    accountAuctions(address: $address, limit: $limit, cursor: $cursor) @client {\r\n      cursor {\r\n        prev\r\n        next\r\n      }\r\n      auctions {\r\n        timestamp\r\n        auctionType\r\n        punkId\r\n        owner\r\n        amount\r\n        address\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GeneralQueries = {\r\n  async quota(parent: any, { address }: any, context: ApolloContext): Promise<Maybe<PunkTypes.ViteQuotaResult>> {\r\n    const result = await context.client.datasource.getQuotaAsync(address);\r\n    return result;\r\n  },\r\n  async accountAuctions(parent: any, { address, limit, cursor }: any, context: ApolloContext): Promise<PunkTypes.AccountAuctions> {\r\n    const result = await context.client.datasource.getAccountAuctionsAsync(address, limit, cursor);\r\n    return result;\r\n  },\r\n}","import { ApolloClient, InMemoryCache, NormalizedCacheObject } from '@apollo/client';\r\nimport { offsetLimitPagination } from '@apollo/client/utilities';\r\nimport { GraphQLScalarType } from 'graphql';\r\nimport { IDataSource, PunkTypes } from 'vitepunks-common';\r\nimport { getCommonContext } from '../contexts/common.context';\r\nimport { MarketMutations, PunkMutations } from '../mutations';\r\nimport { MarketQueries, PunkQueries } from '../queries';\r\nimport { GeneralQueries } from '../queries/general';\r\n\r\nexport type ApolloContext = {\r\n  cache: InMemoryCache,\r\n  client: ApolloClientWrapper,\r\n  clientAwareness: any,\r\n  getCacheKey: (obj: any) => string | undefined\r\n}\r\n\r\nexport class ApolloClientWrapper extends ApolloClient<NormalizedCacheObject> {\r\n  get datasource(): IDataSource {\r\n    return getCommonContext().datasource;\r\n  }\r\n}\r\n\r\nconst cache: InMemoryCache = new InMemoryCache({\r\n  typePolicies: {\r\n    Query: {\r\n      fields: {\r\n        // https://www.apollographql.com/docs/react/pagination/offset-based/\r\n        punks: offsetLimitPagination([\"order\", \"sort\"]),\r\n        punksByAddress: offsetLimitPagination([\"address\"]),\r\n        //marketEvents: offsetLimitPagination()\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nconst bigNumberScalar = new GraphQLScalarType({\r\n  name: 'BigNumber',\r\n  description: 'BigNumber custom scalar type',\r\n  serialize(value: PunkTypes.BigNumberWrapper) {\r\n    return value.toFixed();\r\n  },\r\n  parseValue(value: string) {\r\n    return new PunkTypes.BigNumberWrapper(value);\r\n  }\r\n});\r\n\r\nconst resolvers: any = {\r\n  BigNumber: bigNumberScalar,\r\n  Query: {\r\n    ...GeneralQueries,\r\n    ...PunkQueries,\r\n    ...MarketQueries\r\n  },\r\n  Mutation: {\r\n    ...PunkMutations,\r\n    ...MarketMutations\r\n  }\r\n};\r\n\r\n// https://www.apollographql.com/docs/react/networking/authentication/#header\r\nconst client = new ApolloClientWrapper({\r\n  // link: authLink.concat(httpLink),\r\n  cache: cache,\r\n  resolvers,\r\n  headers: {\r\n    'client-name': process.env.REACT_APP_NAME || 'client',\r\n    'client-version': process.env.REACT_APP_VERSION || '0',\r\n  },\r\n})\r\n\r\nexport const getApolloClient = () => {\r\n  return client;\r\n}","import { PunkTypes } from \"vitepunks-common\";\r\n\r\nexport class NetworkManager {\r\n  private _networkHeight: PunkTypes.BigNumberWrapper;\r\n  private _network?: Maybe<PunkTypes.Network>;\r\n  private _setNetworkCallback?: (network?: Maybe<PunkTypes.Network>) => void;\r\n\r\n  constructor() {\r\n    this._networkHeight = new PunkTypes.BigNumberWrapper(\"0\");\r\n  }\r\n\r\n  set networkHeight(height: PunkTypes.BigNumberWrapper) {\r\n    this._networkHeight = height;\r\n  }\r\n\r\n  get networkHeight(): PunkTypes.BigNumberWrapper {\r\n    return this._networkHeight;\r\n  }\r\n\r\n  set onSetNetworkCallback(cb: (network?: Maybe<PunkTypes.Network>) => void) {\r\n    this._setNetworkCallback = cb;\r\n  }\r\n\r\n  getNetwork(): Maybe<PunkTypes.Network> {\r\n    return this._network;\r\n  }\r\n\r\n  setNetwork(network?: Maybe<PunkTypes.Network>): void {\r\n    this._network = network;\r\n    if (this._setNetworkCallback) {\r\n      this._setNetworkCallback(this._network);\r\n    }\r\n  }\r\n}\r\n\r\nconst manager = new NetworkManager();\r\n\r\nexport const getNetworkManager = () => {\r\n  return manager;\r\n}","import { styled, Typography } from '@mui/material';\r\n\r\nconst Root = styled('div')(\r\n  ({ theme }) => `\r\n  padding-bottom: 10px;\r\n  padding-top: 10px;\r\n  padding-left: 24px;\r\n  padding-right: 24px;\r\n  text-align: right;\r\n`,\r\n);\r\n\r\nexport const Footer = () => {\r\n  return (\r\n    <>\r\n      <Root>\r\n        <Typography>v{process.env.REACT_APP_VERSION}</Typography>\r\n      </Root>\r\n    </>\r\n  )\r\n}\r\n","import { AppBar, styled, Toolbar, Typography } from '@mui/material';\r\nimport React from 'react';\r\nimport { ClientConstants } from '../../../../common/constants';\r\n\r\nconst Root = styled('div')(\r\n  ({ theme }) => `\r\n  flex-grow: 1;\r\n`,\r\n);\r\n\r\nconst TitleTypography = styled(Typography)(\r\n  ({ theme }) => `\r\n  flex-grow: 1;\r\n  margin-left: 10px !important;\r\n`,\r\n);\r\n\r\nexport const HeaderLoading: React.FC = (props: any) => {\r\n  return (\r\n    <Root>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <TitleTypography variant=\"h6\">\r\n            {ClientConstants.APP_NAME}\r\n          </TitleTypography>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </Root>\r\n  )\r\n}","import { Container, styled } from '@mui/material';\r\nimport * as React from 'react';\r\n\r\nconst MainScrollStyled = styled('div')(\r\n  ({ theme }) => `\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  align-items: center;\r\n  padding-bottom: 15px;\r\n  padding-top: 30px;\r\n  overflow: auto;\r\n  overflow-x: hidden;\r\n`,\r\n);\r\n\r\nconst MainScrollInner = styled('div')(\r\n  ({ theme }) => `\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`,\r\n);\r\n\r\nexport const MainScroll: React.FC = props => {\r\n  const { children, ...restProps } = props\r\n\r\n  return (\r\n    <MainScrollStyled id=\"mainscroll\" {...restProps}>\r\n      <Container maxWidth=\"xl\">\r\n        <MainScrollInner>{children}</MainScrollInner>\r\n      </Container>\r\n    </MainScrollStyled>\r\n  )\r\n}\r\n","import { styled } from '@mui/material';\r\nimport React from 'react';\r\n\r\nconst MainWrapperStyled = styled('div')(\r\n  ({ theme }) => `\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n`,\r\n);\r\n\r\nexport const MainWrapper: React.FC = props => {\r\n  const { children, ...restProps } = props\r\n\r\n  return <MainWrapperStyled {...restProps}>{children}</MainWrapperStyled>\r\n}\r\n","\r\nimport { Chip, Typography } from '@mui/material';\r\nimport { useEffect, useState } from 'react';\r\nimport { Footer } from '../../../layout/components/footer';\r\nimport { HeaderLoading } from '../../../layout/components/header-loading';\r\nimport { MainScroll } from '../../../layout/components/main-scroll';\r\nimport { MainWrapper } from '../../../layout/components/main-wrapper';\r\n\r\ninterface Props {\r\n  retryCount: number\r\n}\r\n\r\nexport const MainLoading: React.FC<Props> = (props: Props) => {\r\n  const [retryCount, setRetryCount] = useState<number>(0)\r\n\r\n  useEffect(() => {\r\n    setRetryCount(props.retryCount)\r\n  }, [props.retryCount])\r\n\r\n  return (\r\n    <MainWrapper>\r\n      <HeaderLoading />\r\n      <MainScroll>\r\n        <Typography>Loading...</Typography>\r\n        {retryCount > 0 && (\r\n          <Chip size=\"small\" label={retryCount} variant=\"outlined\" />\r\n        )}\r\n      </MainScroll>\r\n      <Footer />\r\n    </MainWrapper>\r\n  )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { PunkTypes, SessionWallet, WebWallet } from 'vitepunks-common';\r\nimport { getNetworkManager } from '../common/network';\r\nimport { getWalletManager } from '../storage/wallet.storage';\r\n\r\nexport interface IWeb3Context {\r\n  setError: (error: Error) => void,\r\n  error?: Maybe<Error>,\r\n  wallet?: Maybe<WebWallet | SessionWallet>\r\n  network?: Maybe<PunkTypes.Network>\r\n}\r\n\r\nconst Web3Context = React.createContext<Maybe<IWeb3Context>>(undefined)\r\n\r\nexport const useWeb3Context = () => {\r\n  const context = React.useContext(Web3Context)\r\n\r\n  if (!context) {\r\n    throw new Error('Component rendered outside the provider tree')\r\n  }\r\n\r\n  return context\r\n}\r\n\r\ninterface Props {\r\n  children?: React.ReactNode\r\n}\r\n\r\nexport const Web3Provider: React.FC<Props> = (props: Props) => {\r\n  const [error, setError] = useState<Maybe<Error>>(null)\r\n  const [wallet, setWallet] = useState<Maybe<WebWallet | SessionWallet>>(null)\r\n  const [network, setNetwork] = useState<Maybe<PunkTypes.Network>>(null)\r\n\r\n  const walletManager = getWalletManager()\r\n  walletManager.onSetWalletCallback = setWallet\r\n\r\n  const networkManager = getNetworkManager()\r\n  networkManager.onSetNetworkCallback = setNetwork\r\n\r\n  const context: IWeb3Context = {\r\n    setError,\r\n    error,\r\n    wallet,\r\n    network\r\n  }\r\n\r\n  return (\r\n    <Web3Context.Provider value={context}>{props.children}</Web3Context.Provider>\r\n  )\r\n}\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { CommonUtil, getLogger, Networks, PunkTypes } from \"vitepunks-common\";\r\nimport { getClientConfig } from '../common/config';\r\nimport { getNetworkManager } from '../common/network';\r\nimport { MainLoading } from '../features/main/components/loading';\r\nimport { getWalletManager } from '../storage/wallet.storage';\r\nimport { getCommonContext } from './common.context';\r\nimport { useWeb3Context } from './web3';\r\n\r\nconst logger = getLogger()\r\n\r\nexport interface IConnectedWeb3Context {\r\n  account?: string\r\n  network?: Maybe<PunkTypes.Network>\r\n  logout: () => void\r\n}\r\n\r\nconst ConnectedWeb3Context = React.createContext<Maybe<IConnectedWeb3Context>>(undefined)\r\n\r\n/**\r\n * This hook can only be used by components under the `ConnectedWeb3` component. Otherwise it will throw.\r\n */\r\nexport const useConnectedWeb3Context = () => {\r\n  const context = React.useContext(ConnectedWeb3Context)\r\n\r\n  if (!context) {\r\n    throw new Error('Component rendered outside the provider tree')\r\n  }\r\n\r\n  return context\r\n}\r\n\r\ninterface Props {\r\n  children?: React.ReactNode\r\n}\r\n\r\n/**\r\n * Component used to render components that depend on Web3 being available. These components can then\r\n * `useConnectedWeb3Context` safely to get web3 stuff without having to null check it.\r\n */\r\nexport const ConnectedWeb3: React.FC<Props> = (props: Props) => {\r\n  const [connection, setConnection] = useState<IConnectedWeb3Context | null>(null)\r\n  const [retryCount, setRetryCount] = useState<number>(0)\r\n  const mounted = React.useRef(false);\r\n  const web3Context = useWeb3Context()\r\n  const commonContext = getCommonContext()\r\n\r\n  const { wallet, network } = web3Context\r\n\r\n  React.useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (!wallet) {\r\n      const walletManager = getWalletManager()\r\n      walletManager.initWallet()\r\n    }\r\n  }, [wallet])\r\n\r\n  useEffect(() => {\r\n    if (!network) {\r\n      const networkManager = getNetworkManager()\r\n      const networkId = getClientConfig().NETWORK_ID;\r\n      networkManager.setNetwork(Networks.find(e => e.id === networkId))\r\n      logger.info(\"Network:\", networkManager.getNetwork())()\r\n    }\r\n  }, [network])\r\n\r\n  const logout = useCallback(() => {\r\n    const walletManager = getWalletManager()\r\n    walletManager.removeWallet()\r\n    window.location.reload()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const value = {\r\n      account: wallet?.active?.address,\r\n      network,\r\n      logout\r\n    }\r\n\r\n    logger.info('ConnectedWeb3.account', wallet?.active?.address)()\r\n\r\n    const initAsync = async (_retryCount: number = 0) => {\r\n      if (network) {\r\n        logger.info('Init ConnectedWeb3', _retryCount)()\r\n        if (_retryCount >= 5) {\r\n          window.location.reload()\r\n        }\r\n        const startTimestamp = Date.now()\r\n        const retryId = setTimeout(async () => {\r\n          if (mounted.current && !commonContext.isInitialized) {\r\n            commonContext.dispose()\r\n            _retryCount++\r\n            setRetryCount(_retryCount)\r\n            await CommonUtil.timeout(1000)\r\n            initAsync(_retryCount)\r\n          }\r\n        }, 3000)\r\n        try {\r\n          setConnection(null)\r\n          await commonContext.initAsync()\r\n          setRetryCount(0)\r\n          setConnection(value)\r\n        } catch (error) {\r\n          logger.error(error)()\r\n          clearTimeout(retryId)\r\n          const minDelay = 3000\r\n          const elapsed = Date.now() - startTimestamp\r\n          setTimeout(() => {\r\n            if (mounted.current && !commonContext.isInitialized) {\r\n              _retryCount++\r\n              setRetryCount(_retryCount)\r\n              initAsync(_retryCount)\r\n            }\r\n          }, elapsed > minDelay ? 0 : minDelay - elapsed);\r\n        }\r\n      }\r\n    }\r\n    initAsync()\r\n    return () => {\r\n      commonContext.dispose()\r\n    }\r\n  }, [wallet, network, logout, commonContext])\r\n\r\n  return (\r\n    <>\r\n      {!connection ? (\r\n        <MainLoading retryCount={retryCount}></MainLoading>\r\n      ) : (\r\n        <ConnectedWeb3Context.Provider value={connection}>{props.children}</ConnectedWeb3Context.Provider>\r\n      )}\r\n    </>\r\n  )\r\n}","import { ProviderContext } from \"notistack\";\r\nimport { FormatUtil, getEmitter } from 'vitepunks-common';\r\n\r\nexport abstract class SnackbarUtil {\r\n  static snackbar: ProviderContext;\r\n  static enqueueError(error: any): void {\r\n    const message = FormatUtil.formatMessage(error);\r\n    if (message === \"Session currently disconnected\") {\r\n      const emitter = getEmitter();\r\n      emitter.emitConnectWalletDialog(true);\r\n    }\r\n    SnackbarUtil.snackbar.enqueueSnackbar(message);\r\n  }\r\n  static enqueueMessage(message: string): void {\r\n    SnackbarUtil.snackbar.enqueueSnackbar(message);\r\n  }\r\n}","import { PunkTypes } from \"vitepunks-common\";\r\n\r\nexport abstract class WebUtil {\r\n  public static getDocumentState = () => {\r\n    if (document.visibilityState === 'hidden') {\r\n      return PunkTypes.DocumentState.Hidden;\r\n    }\r\n    return PunkTypes.DocumentState.Active;\r\n  }\r\n}","import { Box, Paper, Typography } from '@mui/material';\r\nimport React from 'react';\r\nimport { CommonUtil } from \"vitepunks-common\";\r\n\r\ninterface Props {\r\n  message: string\r\n  type: 'default' | 'warning'\r\n  error?: any\r\n  color?: string\r\n  backgroundColor?: string\r\n}\r\n\r\nexport const Alert: React.FC<Props> = (props: Props) => {\r\n  let color = '#000000';\r\n  let backgroundColor = 'rgba(255, 255, 255, 0.5)';\r\n\r\n  switch (props.type) {\r\n    case 'warning':\r\n      color = '#611a15';\r\n      backgroundColor = 'rgba(255, 0, 0, 0.1)';\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  if (props.error) {\r\n    console.log(CommonUtil.toJsonString(props.error));\r\n  }\r\n\r\n  return (\r\n    <Paper>\r\n      <Box sx={{\r\n        color: props.color ?? color,\r\n        backgroundColor: props.backgroundColor ?? backgroundColor,\r\n        padding: '15px',\r\n        textAlign: 'center'\r\n      }}>\r\n        <Typography>{props.message}</Typography>\r\n      </Box>\r\n    </Paper>\r\n  );\r\n}\r\n","import { LoadingButton } from '@mui/lab';\r\nimport { SxProps, Theme } from '@mui/system';\r\nimport React from 'react';\r\nimport { FormatUtil } from 'vitepunks-common';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\n\r\ninterface Props {\r\n  children: React.ReactNode\r\n  size?: 'small' | 'medium' | 'large'\r\n  variant?: 'text' | 'outlined' | 'contained'\r\n  color?: 'inherit' | 'primary' | 'secondary' | 'success' | 'error' | 'info' | 'warning',\r\n  fullWidth?: boolean\r\n  autoFocus?: boolean\r\n  disabled?: boolean\r\n  startIcon?: React.ReactNode;\r\n  sx?: SxProps<Theme>\r\n  callbackFn: () => Promise<void>\r\n}\r\n\r\nexport const ClickOnceButton: React.FC<Props> = (props: Props) => {\r\n  const mounted = React.useRef(false);\r\n  const [isDisabled, setIsDisabled] = React.useState(false);\r\n\r\n  const handleClick = async () => {\r\n    setIsDisabled(true);\r\n    try {\r\n      await props.callbackFn();\r\n    } catch (error) {\r\n      SnackbarUtil.enqueueError(FormatUtil.formatMessage(error));\r\n    }\r\n    if (mounted.current) {\r\n      setIsDisabled(false);\r\n    }\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <LoadingButton\r\n      loading={isDisabled}\r\n      size={props.size ?? \"small\"}\r\n      variant={props.variant ?? \"contained\"}\r\n      color={props.color ?? \"primary\"}\r\n      fullWidth={props.fullWidth}\r\n      disabled={props.disabled}\r\n      onClick={handleClick}\r\n      startIcon={props.startIcon}\r\n      sx={props.sx}\r\n    >\r\n      {props.children}\r\n    </LoadingButton>\r\n  );\r\n}\r\n","import { SvgIcon, SxProps, Theme } from \"@mui/material\";\r\nimport React from \"react\";\r\n\r\ntype FontAwesomeSvgIconProps = {\r\n  icon: any;\r\n  sx?: SxProps<Theme>\r\n};\r\n\r\n// interface CustomSVGSVGElement extends SVGSVGElement {\r\n//   sx?: SxProps<Theme>\r\n// }\r\n\r\nexport const FontAwesomeSvgIcon = React.forwardRef<SVGSVGElement, FontAwesomeSvgIconProps>(\r\n  (props, ref) => {\r\n    const { icon } = props;\r\n\r\n    const {\r\n      icon: [width, height, , , svgPathData],\r\n    } = icon;\r\n\r\n    return (\r\n      <SvgIcon ref={ref} viewBox={`0 0 ${width} ${height}`} sx={props.sx}>\r\n        {typeof svgPathData === 'string' ? (\r\n          <path d={svgPathData} />\r\n        ) : (\r\n          /**\r\n           * A multi-path Font Awesome icon seems to imply a duotune icon. The 0th path seems to\r\n           * be the faded element (referred to as the \"secondary\" path in the Font Awesome docs)\r\n           * of a duotone icon. 40% is the default opacity.\r\n           *\r\n           * @see https://fontawesome.com/how-to-use/on-the-web/styling/duotone-icons#changing-opacity\r\n           */\r\n          svgPathData.map((d: string, i: number) => (\r\n            <path style={{ opacity: i === 0 ? 0.4 : 1 }} d={d} />\r\n          ))\r\n        )}\r\n      </SvgIcon>\r\n    );\r\n  },\r\n);","import { styled } from '@mui/material/styles';\r\nimport Tooltip, { tooltipClasses, TooltipProps } from '@mui/material/Tooltip';\r\nimport * as React from 'react';\r\n\r\nexport interface CustomTooltipProps extends TooltipProps {\r\n  fullWidth?: boolean\r\n}\r\n\r\nexport const ExtendedBootstrapTooltip: React.FC<CustomTooltipProps> = (props: CustomTooltipProps) => {\r\n  return (\r\n    <BootstrapTooltip {...props} sx={{ [`& .${tooltipClasses.tooltip}`]: { maxWidth: \"none\" } }}></BootstrapTooltip>\r\n  )\r\n}\r\n\r\nexport const LightTooltip = styled(({ className, ...props }: TooltipProps) => (\r\n  <Tooltip {...props} classes={{ popper: className }} />\r\n))(({ theme }) => ({\r\n  [`& .${tooltipClasses.tooltip}`]: {\r\n    backgroundColor: theme.palette.common.white,\r\n    color: 'rgba(0, 0, 0, 0.87)',\r\n    boxShadow: theme.shadows[1],\r\n    fontSize: 11,\r\n  },\r\n}));\r\n\r\nexport const BootstrapTooltip = styled(({ className, ...props }: TooltipProps) => (\r\n  <Tooltip {...props} arrow classes={{ popper: className }} />\r\n))(({ theme }) => ({\r\n  [`& .${tooltipClasses.arrow}`]: {\r\n    color: theme.palette.common.black,\r\n  },\r\n  [`& .${tooltipClasses.tooltip}`]: {\r\n    backgroundColor: theme.palette.common.black,\r\n  },\r\n}));\r\n\r\nexport const HtmlTooltip = styled(({ className, ...props }: TooltipProps) => (\r\n  <Tooltip {...props} classes={{ popper: className }} />\r\n))(({ theme }) => ({\r\n  [`& .${tooltipClasses.tooltip}`]: {\r\n    backgroundColor: '#f5f5f9',\r\n    color: 'rgba(0, 0, 0, 0.87)',\r\n    maxWidth: 220,\r\n    fontSize: theme.typography.pxToRem(12),\r\n    border: '1px solid #dadde9',\r\n  },\r\n}));","import { ApolloClient, FetchPolicy, NormalizedCacheObject } from \"@apollo/client\";\r\nimport { PunkTypes, TransformUtil } from \"vitepunks-common\";\r\nimport { getApolloClient } from \"../clients/apollo.client\";\r\nimport { MINT_MUTATION } from \"../mutations\";\r\nimport { Mint } from \"../mutations/__generated__/Mint\";\r\nimport { GET_MARKET_BID_QUERY, GET_MARKET_OFFER_QUERY, GET_PUNK_EVENTS_QUERY, GET_PUNK_OWNER_QUERY, GET_PUNK_QUERY } from \"../queries\";\r\nimport { GetMarketBid, GetMarketBidVariables } from \"../queries/__generated__/GetMarketBid\";\r\nimport { GetMarketOffer, GetMarketOfferVariables } from \"../queries/__generated__/GetMarketOffer\";\r\nimport { GetPunk, GetPunkVariables } from \"../queries/__generated__/GetPunk\";\r\nimport { GetPunkEvents, GetPunkEventsVariables } from \"../queries/__generated__/GetPunkEvents\";\r\nimport { GetPunkOwner, GetPunkOwnerVariables } from \"../queries/__generated__/GetPunkOwner\";\r\n\r\nclass PunkService {\r\n  private readonly _apollo: ApolloClient<NormalizedCacheObject>;\r\n\r\n  constructor() {\r\n    this._apollo = getApolloClient();\r\n  }\r\n\r\n  getById = (_id: string, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetPunk, GetPunkVariables>({\r\n      query: GET_PUNK_QUERY,\r\n      variables: {\r\n        id: _id\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getOwnerAsync = (_id: string, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetPunkOwner, GetPunkOwnerVariables>({\r\n      query: GET_PUNK_OWNER_QUERY,\r\n      variables: {\r\n        id: _id\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getBidAsync = (_id: string, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetMarketBid, GetMarketBidVariables>({\r\n      query: GET_MARKET_BID_QUERY,\r\n      variables: {\r\n        id: _id\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getOfferAsync = (_id: string, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetMarketOffer, GetMarketOfferVariables>({\r\n      query: GET_MARKET_OFFER_QUERY,\r\n      variables: {\r\n        id: _id\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getEventsAsync = (_id: string, _offset: number, _limit: number, _height?: Maybe<string>, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetPunkEvents, GetPunkEventsVariables>({\r\n      query: GET_PUNK_EVENTS_QUERY,\r\n      variables: {\r\n        id: _id,\r\n        offset: _offset,\r\n        limit: _limit,\r\n        height: _height\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getExtendedAsync = async (_punk: PunkTypes.Punk, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    const defaultPunkExtended = {\r\n      __typename: PunkTypes.TypeNames.Punk,\r\n      id: _punk.id,\r\n      rank: _punk.rank,\r\n      image: _punk.image,\r\n      cid: _punk.cid,\r\n      attributes: _punk.attributes\r\n    };\r\n    const ownerQuery = await this.getOwnerAsync(_punk.id, _fetchPolicy);\r\n    const bidQuery = await this.getBidAsync(_punk.id, _fetchPolicy);\r\n    const offerQuery = await this.getOfferAsync(_punk.id, _fetchPolicy);\r\n\r\n    const punkExtended: PunkTypes.Punk = {\r\n      ...defaultPunkExtended,\r\n      owner: ownerQuery.data.punkOwner,\r\n      bid: TransformUtil.toMarketBid(bidQuery.data.marketBid),\r\n      offer: TransformUtil.toMarketOffer(offerQuery.data.marketOffer)\r\n    }\r\n\r\n    const error = ownerQuery.error || bidQuery.error || offerQuery.error;\r\n    const loading = ownerQuery.loading || bidQuery.loading || offerQuery.loading;\r\n\r\n    return {\r\n      punkExtended,\r\n      ownerQuery,\r\n      bidQuery,\r\n      offerQuery,\r\n      error,\r\n      loading\r\n    };\r\n  }\r\n\r\n  async mintAsync(): Promise<boolean> {\r\n    const result = await this._apollo.mutate<Mint>({\r\n      mutation: MINT_MUTATION\r\n    });\r\n    return Boolean(result.data?.mint ?? false);\r\n  }\r\n}\r\n\r\nconst service = new PunkService();\r\n\r\nexport const getPunkService = () => {\r\n  return service;\r\n}","import { FetchPolicy, useQuery } from \"@apollo/client\";\r\nimport React from \"react\";\r\nimport { getLogger, PunkTypes, TransformUtil } from 'vitepunks-common';\r\nimport { GET_MARKET_BID_QUERY, GET_MARKET_OFFER_QUERY, GET_PUNK_OWNER_QUERY, GET_PUNK_QUERY } from \"../queries\";\r\nimport { GetMarketBid, GetMarketBidVariables } from \"../queries/__generated__/GetMarketBid\";\r\nimport { GetMarketOffer, GetMarketOfferVariables } from \"../queries/__generated__/GetMarketOffer\";\r\nimport { GetPunk, GetPunkVariables } from \"../queries/__generated__/GetPunk\";\r\nimport { GetPunkOwner, GetPunkOwnerVariables } from \"../queries/__generated__/GetPunkOwner\";\r\nimport { getPunkService } from \"../services/punk.service\";\r\n\r\nconst logger = getLogger();\r\n\r\nexport const usePunkById = (_punkId: string, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n  const query = useQuery<GetPunk, GetPunkVariables>(GET_PUNK_QUERY, {\r\n    variables: {\r\n      id: _punkId\r\n    },\r\n    notifyOnNetworkStatusChange: true,\r\n    fetchPolicy: _fetchPolicy,\r\n    refetchWritePolicy: \"overwrite\"\r\n  });\r\n\r\n  const error = query.error;\r\n  const loading = query.loading;\r\n\r\n  const punk: Maybe<PunkTypes.Punk> = query.data?.punk\r\n\r\n  return {\r\n    punk,\r\n    error,\r\n    loading,\r\n  };\r\n}\r\n\r\nexport const usePunkInfo = (_punk: PunkTypes.Punk, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n  const defaultPunkExtended = React.useMemo<PunkTypes.Punk>(() => {\r\n    return {\r\n      __typename: PunkTypes.TypeNames.Punk,\r\n      id: _punk.id,\r\n      rank: _punk.rank,\r\n      image: _punk.image,\r\n      cid: _punk.cid,\r\n      attributes: _punk.attributes\r\n    };\r\n  }, [_punk]);\r\n  const [punkExtended, setPunkExtended] = React.useState<PunkTypes.Punk>(defaultPunkExtended);\r\n  const [dateRef, setDateRef] = React.useState<Date>(new Date(0));\r\n\r\n  const ownerQuery = useQuery<GetPunkOwner, GetPunkOwnerVariables>(GET_PUNK_OWNER_QUERY, {\r\n    variables: {\r\n      id: _punk.id.toString()\r\n    },\r\n    notifyOnNetworkStatusChange: true,\r\n    fetchPolicy: _fetchPolicy,\r\n    refetchWritePolicy: \"overwrite\",\r\n    onCompleted: (data) => {\r\n      setPunkExtended({\r\n        ...punkExtended,\r\n        owner: data.punkOwner\r\n      });\r\n    }\r\n  });\r\n\r\n  const bidQuery = useQuery<GetMarketBid, GetMarketBidVariables>(GET_MARKET_BID_QUERY, {\r\n    variables: {\r\n      id: _punk.id.toString()\r\n    },\r\n    notifyOnNetworkStatusChange: true,\r\n    fetchPolicy: _fetchPolicy,\r\n    refetchWritePolicy: \"overwrite\",\r\n    onCompleted: (data) => {\r\n      setPunkExtended({\r\n        ...punkExtended,\r\n        bid: TransformUtil.toMarketBid(data.marketBid)\r\n      });\r\n    }\r\n  });\r\n\r\n  const offerQuery = useQuery<GetMarketOffer, GetMarketOfferVariables>(GET_MARKET_OFFER_QUERY, {\r\n    variables: {\r\n      id: _punk.id.toString()\r\n    },\r\n    notifyOnNetworkStatusChange: true,\r\n    fetchPolicy: _fetchPolicy,\r\n    refetchWritePolicy: \"overwrite\",\r\n    onCompleted: (data) => {\r\n      setPunkExtended({\r\n        ...punkExtended,\r\n        offer: TransformUtil.toMarketOffer(data.marketOffer)\r\n      });\r\n    }\r\n  });\r\n\r\n  const error = ownerQuery.error || bidQuery.error || offerQuery.error;\r\n  const loading = ownerQuery.loading || bidQuery.loading || offerQuery.loading;\r\n\r\n  const refetchAsync = async () => {\r\n    logger.info(\"refetchAsync\", new Date().getTime(), dateRef.getTime())();\r\n    if (new Date().getTime() >= dateRef.getTime() + 500) {\r\n      setDateRef(new Date());\r\n      let newOwner;\r\n      let newBid;\r\n      let newOffer;\r\n      try {\r\n        await Promise.all([\r\n          ownerQuery.refetch().then(e => newOwner = e.data.punkOwner),\r\n          bidQuery.refetch().then(e => newBid = e.data.marketBid),\r\n          offerQuery.refetch().then(e => newOffer = e.data.marketOffer)\r\n        ]);\r\n        logger.info(`Refetching punk ${_punk.id}`, newOwner, newBid, newOffer)();\r\n        setPunkExtended({\r\n          ...defaultPunkExtended,\r\n          owner: newOwner,\r\n          bid: newBid,\r\n          offer: newOffer\r\n        });\r\n      } catch (error) {\r\n        logger.error(error)();\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    punkExtended,\r\n    error,\r\n    loading,\r\n    refetchAsync\r\n  };\r\n}\r\n\r\nexport const usePunkInfoV2 = (_punk: PunkTypes.Punk, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n  const service = getPunkService();\r\n  const defaultPunkExtended = React.useMemo<PunkTypes.Punk>(() => {\r\n    return {\r\n      __typename: PunkTypes.TypeNames.Punk,\r\n      id: _punk.id,\r\n      rank: _punk.rank,\r\n      image: _punk.image,\r\n      cid: _punk.cid,\r\n      attributes: _punk.attributes\r\n    };\r\n  }, [_punk]);\r\n  const [punkExtended, setPunkExtended] = React.useState<PunkTypes.Punk>(defaultPunkExtended);\r\n  const [loading, setLoading] = React.useState<boolean>(true);\r\n  const [error, setError] = React.useState<Maybe<any>>(undefined);\r\n\r\n  const refetchAsync = async () => {\r\n    setLoading(true);\r\n    setError(undefined);\r\n    try {\r\n      const { punkExtended, loading, error } = await service.getExtendedAsync(_punk, _fetchPolicy);\r\n      setPunkExtended(punkExtended);\r\n      setLoading(loading);\r\n      setError(error);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setError(error);\r\n    }\r\n  }\r\n\r\n  return {\r\n    punkExtended,\r\n    loading,\r\n    error,\r\n    refetchAsync\r\n  }\r\n}\r\n\r\n","import { createTheme } from '@mui/material/styles';\r\n\r\n// A custom theme for this app\r\n// https://github.com/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\nconst theme = createTheme({\r\n  typography: {\r\n    fontFamily: [\r\n      '-apple-system',\r\n      'BlinkMacSystemFont',\r\n      '\"Segoe UI\"',\r\n      'Roboto',\r\n      '\"Helvetica Neue\"',\r\n      'Arial',\r\n      'sans-serif',\r\n      '\"Apple Color Emoji\"',\r\n      '\"Segoe UI Emoji\"',\r\n      '\"Segoe UI Symbol\"',\r\n    ].join(','),\r\n  },\r\n  palette: {\r\n    primary: {\r\n      main: '#133995',\r\n    },\r\n    secondary: {\r\n      main: '#6817ff',\r\n    }\r\n  },\r\n});\r\n\r\nexport default theme;","import { faGem } from \"@fortawesome/free-regular-svg-icons\";\r\nimport { Box, CardActionArea, Chip, styled, Typography, useMediaQuery } from \"@mui/material\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport React from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { CommonConstants, UrlUtil } from \"vitepunks-common\";\r\nimport { ClientConstants } from \"../../../../common/constants\";\r\nimport { usePunkById } from \"../../../../hooks/punk.hook\";\r\nimport theme from \"../../../../theme\";\r\nimport { FontAwesomeSvgIcon } from \"../../../common/components/fa-icon\";\r\nimport { ExtendedBootstrapTooltip } from \"../../../common/components/tooltip\";\r\n\r\nexport const CustomCardMedia = styled(\"div\")(({ theme }) => (`\r\n  position: relative;\r\n  height: 320px;\r\n  // animation: lightning 4s ease-out infinite;\r\n  background-image: url(\"${ClientConstants.ITEM_BG_URL}\");\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n`));\r\n\r\nexport const PunkImage = styled(\"div\")(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  image-rendering: pixelated;\r\n`,\r\n);\r\n\r\ninterface Props {\r\n  punkId: string\r\n}\r\n\r\nexport const PunkImageCard: React.FC<Props> = (props: Props) => {\r\n  const { punk } = usePunkById(props.punkId);\r\n  const matches = useMediaQuery(theme.breakpoints.up(\"md\"));\r\n\r\n  return (\r\n    <Card sx={{ minWidth: matches ? \"350px\" : \"100%\" }}>\r\n      <CardActionArea component={RouterLink} to={`/punk/${props.punkId}`} target=\"_blank\">\r\n        <CustomCardMedia>\r\n          <Box sx={{ position: \"absolute\", top: 5, right: 5 }}>\r\n            <ExtendedBootstrapTooltip title={<span>Rarity rank</span>} placement=\"bottom\" arrow>\r\n              <Chip size=\"small\" icon={<FontAwesomeSvgIcon icon={faGem} sx={{ fontSize: \"small\", ml: 1 }} />} sx={{ fontSize: \"0.7rem\" }} label={punk?.rank} />\r\n            </ExtendedBootstrapTooltip>\r\n          </Box>\r\n          <PunkImage sx={{ backgroundImage: `url(\"${UrlUtil.getPunkUrl(punk?.image, punk?.cid)}\")` }} />\r\n        </CustomCardMedia>\r\n        <CardContent sx={{ p: 0 }}>\r\n          <Typography variant=\"h6\" component=\"div\" sx={{ p: 1 }}>\r\n            {CommonConstants.PUNK_NAME} #{props.punkId}\r\n          </Typography>\r\n          <Box sx={{ height: \"70px\", overflow: \"auto\" }}>\r\n            <Box sx={{ p: 1 }}>\r\n              {punk?.attributes?.map((a: string) => (\r\n                <Chip key={a} label={a} variant=\"outlined\" sx={{ mb: 1, mr: 1 }} size=\"small\" />\r\n              ))}\r\n            </Box>\r\n          </Box>\r\n        </CardContent>\r\n      </CardActionArea>\r\n    </Card>\r\n  );\r\n}\r\n","\r\nimport { faGem, faUserCircle } from '@fortawesome/free-regular-svg-icons';\r\nimport { faHandHoldingUsd, faTag } from '@fortawesome/free-solid-svg-icons';\r\nimport { Box, CardActionArea, Chip } from '@mui/material';\r\nimport Card from '@mui/material/Card';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport Typography from '@mui/material/Typography';\r\nimport React from 'react';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { CommonConstants, CommonUtil, PunkTypes, TokenUtil, UrlUtil } from \"vitepunks-common\";\r\nimport { FontAwesomeSvgIcon } from '../../../common/components/fa-icon';\r\nimport { ExtendedBootstrapTooltip } from '../../../common/components/tooltip';\r\nimport { CustomCardMedia, PunkImage } from '../../../punk/components/image-common';\r\n\r\ninterface Props {\r\n  item: PunkTypes.Punk\r\n}\r\n\r\nexport const MarketplaceBrowseItem: React.FC<Props> = (props: Props) => {\r\n  const truncateAddress = (address?: string) => {\r\n    return CommonUtil.truncateStringInTheMiddle(address, 10, 5)\r\n  }\r\n  const formatViteTooltip = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatViteTooltip(bn);\r\n  }\r\n  const formatVite = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatVite(bn);\r\n  }\r\n  return (\r\n    <Card>\r\n      <CardActionArea component={RouterLink} to={`/punk/${props.item.id}`}>\r\n        <CustomCardMedia>\r\n          {props.item.owner && (\r\n            <Box sx={{ position: \"absolute\", top: 5, left: 5 }}>\r\n              <ExtendedBootstrapTooltip title={<span>{props.item.owner}</span>} placement=\"bottom\" arrow>\r\n                <Chip size=\"small\" icon={<FontAwesomeSvgIcon icon={faUserCircle} sx={{ fontSize: \"small\", ml: 1 }} />} sx={{ fontSize: \"0.7rem\" }} label={truncateAddress(props.item.owner)} />\r\n              </ExtendedBootstrapTooltip>\r\n            </Box>\r\n          )}\r\n          <Box sx={{ position: \"absolute\", top: 5, right: 5 }}>\r\n            <ExtendedBootstrapTooltip title={<span>Rarity rank</span>} placement=\"bottom\" arrow>\r\n              <Chip size=\"small\" icon={<FontAwesomeSvgIcon icon={faGem} sx={{ fontSize: \"small\", ml: 1 }} />} sx={{ fontSize: \"0.7rem\" }} label={props.item.rank} />\r\n            </ExtendedBootstrapTooltip>\r\n          </Box>\r\n          <Box sx={{ position: \"absolute\", bottom: 5, left: 5, width: \"calc(100% - 10px)\" }}>\r\n            <Box>\r\n              {props.item.bid && (\r\n                <ExtendedBootstrapTooltip title={<span>Bid: {formatViteTooltip(props.item.bid.amount)}</span>} placement=\"bottom\" arrow>\r\n                  <Chip size=\"small\" icon={<FontAwesomeSvgIcon icon={faHandHoldingUsd} sx={{ fontSize: \"small\", ml: 1 }} />} sx={{ fontSize: \"0.7rem\", mt: 1, mr: 1 }} label={formatVite(props.item.bid.amount)} />\r\n                </ExtendedBootstrapTooltip>\r\n              )}\r\n              {props.item.offer && props.item.offer.minAmount.gt(0) && (\r\n                <ExtendedBootstrapTooltip title={<span>Price: {formatViteTooltip(props.item.offer.minAmount)}</span>} placement=\"bottom\" arrow>\r\n                  <Chip size=\"small\" icon={<FontAwesomeSvgIcon icon={faTag} sx={{ fontSize: \"small\", ml: 1 }} />} sx={{ fontSize: \"0.7rem\", mt: 1, float: \"right\" }} label={formatVite(props.item.offer.minAmount)} />\r\n                </ExtendedBootstrapTooltip>\r\n              )}\r\n            </Box>\r\n          </Box>\r\n          <PunkImage sx={{ backgroundImage: `url('${UrlUtil.getPunkUrl(props.item.image, props.item.cid)}')` }} />\r\n        </CustomCardMedia>\r\n        <CardContent sx={{ p: 0 }}>\r\n          <Typography variant=\"h6\" component=\"div\" sx={{ p: 1 }}>\r\n            {CommonConstants.PUNK_NAME} #{props.item.id}\r\n          </Typography>\r\n          <Box sx={{ height: \"70px\", overflow: \"auto\" }}>\r\n            <Box sx={{ p: 1 }}>\r\n              {props.item.attributes?.map((a: string) => (\r\n                <Chip key={a} label={a} variant=\"outlined\" sx={{ mb: 1, mr: 1 }} size=\"small\" />\r\n              ))}\r\n            </Box>\r\n          </Box>\r\n        </CardContent>\r\n      </CardActionArea>\r\n    </Card>\r\n  )\r\n}\r\n","import { ApolloError } from '@apollo/client';\r\nimport { Box, Container, Grid } from '@mui/material';\r\nimport React from 'react';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport { FormatUtil, PunkTypes } from 'vitepunks-common';\r\nimport { Alert } from '../../../common/components/alert';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\nimport { MarketplaceBrowseItem } from '../../../marketplace/components/browse-item';\r\n\r\ninterface EmptyResultProps {\r\n  error: ApolloError | undefined\r\n  isLoading: boolean\r\n  isEmpty: boolean\r\n}\r\n\r\nconst EmptyResult: React.FC<EmptyResultProps> = (props: EmptyResultProps) => {\r\n  return (\r\n    <>\r\n      {props.error ? (\r\n        <Alert message={FormatUtil.formatMessage(props.error)} type=\"warning\"></Alert>\r\n      ) : (\r\n        <>\r\n          {props.isLoading || !props.isEmpty ? (\r\n            <></>\r\n          ) : (\r\n            <Alert message=\"No punks found\" type=\"default\" ></Alert>\r\n          )}\r\n        </>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\ninterface InfiniteListLoadingProps {\r\n  error: ApolloError | undefined\r\n  isLoading: boolean\r\n  isEmpty: boolean\r\n}\r\n\r\nconst InfiniteListLoading: React.FC<InfiniteListLoadingProps> = (props: InfiniteListLoadingProps) => {\r\n  return (\r\n    <Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n      <Grid item key='1' xs={12} md={6}>\r\n        {props.isLoading ? (\r\n          <Alert message=\"Loading...\" type=\"default\" ></Alert>\r\n        ) : (\r\n          <EmptyResult error={props.error} isLoading={props.isLoading} isEmpty={props.isEmpty}></EmptyResult>\r\n        )}\r\n      </Grid>\r\n    </Grid>\r\n  )\r\n}\r\n\r\ninterface InfinitePunkListProps {\r\n  items: PunkTypes.Punk[]\r\n  fetchMoreDataAsync(): Promise<any>\r\n  error: ApolloError | undefined\r\n  isLoading: boolean\r\n  hasMore: boolean\r\n}\r\n\r\nexport const InfinitePunkList: React.FC<InfinitePunkListProps> = (props: InfinitePunkListProps) => {\r\n  return (\r\n    <>\r\n      <Container sx={{ pt: 3, pb: 6 }} maxWidth=\"xl\">\r\n        {props.items.length > 0 ? (\r\n          <>\r\n            <InfiniteScroll\r\n              dataLength={props.items.length}\r\n              next={props.fetchMoreDataAsync}\r\n              hasMore={props.hasMore}\r\n              loader={\r\n                <InfiniteListLoading error={props.error} isLoading={props.isLoading} isEmpty={props.items.length <= 0}></InfiniteListLoading>\r\n              }\r\n              scrollThreshold=\"200px\"\r\n              scrollableTarget=\"mainscroll\"\r\n            >\r\n              <Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\" marginBottom={3}>\r\n                {props.items.map((p: PunkTypes.Punk) => (\r\n                  <Grid item key={p.id} xs={12} sm={6} md={4} lg={3}>\r\n                    <MarketplaceBrowseItem item={p}></MarketplaceBrowseItem>\r\n                  </Grid>\r\n                ))}\r\n              </Grid>\r\n            </InfiniteScroll>\r\n            {props.hasMore && !props.isLoading && (\r\n              <Box sx={{ width: \"100%\", display: \"flex\", justifyContent: \"center\" }}>\r\n                <ClickOnceButton variant=\"outlined\" callbackFn={props.fetchMoreDataAsync} sx={{ minWidth: \"200px\" }}>Load more</ClickOnceButton>\r\n              </Box>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <InfiniteListLoading error={props.error} isLoading={props.isLoading} isEmpty={props.items.length <= 0}></InfiniteListLoading>\r\n        )}\r\n      </Container>\r\n    </>\r\n  )\r\n}\r\n","import { ApolloClient, FetchPolicy, NormalizedCacheObject } from \"@apollo/client\";\r\nimport { getApolloClient } from \"../clients/apollo.client\";\r\nimport { getClientConfig } from \"../common/config\";\r\nimport { GET_ACCOUNT_AUCTIONS_QUERY, GET_QUOTA_QUERY } from \"../queries/general\";\r\nimport { GetAccountAuctions, GetAccountAuctionsVariables } from \"../queries/__generated__/GetAccountAuctions\";\r\nimport { GetQuota, GetQuotaVariables } from \"../queries/__generated__/GetQuota\";\r\n\r\nclass GeneralService {\r\n  private readonly _apollo: ApolloClient<NormalizedCacheObject>;\r\n\r\n  constructor() {\r\n    this._apollo = getApolloClient();\r\n  }\r\n\r\n  getContractQuota = (_fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetQuota, GetQuotaVariables>({\r\n      query: GET_QUOTA_QUERY,\r\n      variables: {\r\n        address: getClientConfig().CONTRACT_ADDRESS\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getAccountAuctions = (_address: string, _limit: number, _cursor?: Maybe<string>, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetAccountAuctions, GetAccountAuctionsVariables>({\r\n      query: GET_ACCOUNT_AUCTIONS_QUERY,\r\n      variables: {\r\n        address: _address,\r\n        limit: _limit,\r\n        cursor: _cursor\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n}\r\n\r\nconst service = new GeneralService();\r\n\r\nexport const getGeneralService = () => {\r\n  return service;\r\n}","import { ApolloClient, FetchPolicy, NormalizedCacheObject } from \"@apollo/client\";\r\nimport { CommonUtil } from \"vitepunks-common\";\r\nimport { getApolloClient } from \"../clients/apollo.client\";\r\nimport { ACCEPT_BID_MUTATION, BID_MUTATION, BUY_MUTATION, CANCEL_BID_MUTATION, CANCEL_OFFER_MUTATION, OFFER_MUTATION } from \"../mutations\";\r\nimport { AcceptBid, AcceptBidVariables } from \"../mutations/__generated__/AcceptBid\";\r\nimport { Bid, BidVariables } from \"../mutations/__generated__/Bid\";\r\nimport { Buy, BuyVariables } from \"../mutations/__generated__/Buy\";\r\nimport { CancelBid, CancelBidVariables } from \"../mutations/__generated__/CancelBid\";\r\nimport { CancelOffer, CancelOfferVariables } from \"../mutations/__generated__/CancelOffer\";\r\nimport { Offer, OfferVariables } from \"../mutations/__generated__/Offer\";\r\nimport { GET_MARKET_EVENTS_QUERY, GET_MARKET_INFO_QUERY } from \"../queries\";\r\nimport { GetMarketEvents, GetMarketEventsVariables } from \"../queries/__generated__/GetMarketEvents\";\r\nimport { GetMarketInfo } from \"../queries/__generated__/GetMarketInfo\";\r\n\r\nclass MarketService {\r\n  private readonly _apollo: ApolloClient<NormalizedCacheObject>;\r\n\r\n  constructor() {\r\n    this._apollo = getApolloClient();\r\n  }\r\n\r\n  getMarketInfoAsync = (_fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetMarketInfo>({\r\n      query: GET_MARKET_INFO_QUERY,\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getEventsAsync = (_offset: number, _limit: number, _height?: Maybe<string>, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetMarketEvents, GetMarketEventsVariables>({\r\n      query: GET_MARKET_EVENTS_QUERY,\r\n      variables: {\r\n        offset: _offset,\r\n        limit: _limit,\r\n        height: _height\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  async offerAsync(id: string, amount: string, address?: Maybe<string>): Promise<boolean> {\r\n    const result = await this._apollo.mutate<Offer, OfferVariables>({\r\n      mutation: OFFER_MUTATION,\r\n      variables: {\r\n        id: id,\r\n        amount: amount,\r\n        address: CommonUtil.isNullOrWhitespace(address) ? undefined : address\r\n      }\r\n    });\r\n    return Boolean(result.data?.offer ?? false);\r\n  }\r\n\r\n  async cancelOfferAsync(id: string): Promise<boolean> {\r\n    const result = await this._apollo.mutate<CancelOffer, CancelOfferVariables>({\r\n      mutation: CANCEL_OFFER_MUTATION,\r\n      variables: {\r\n        id: id\r\n      }\r\n    });\r\n    return Boolean(result.data?.cancelOffer ?? false);\r\n  }\r\n\r\n  async buyAsync(id: string, amount: string): Promise<boolean> {\r\n    const result = await this._apollo.mutate<Buy, BuyVariables>({\r\n      mutation: BUY_MUTATION,\r\n      variables: {\r\n        id: id,\r\n        amount: amount\r\n      }\r\n    });\r\n    return Boolean(result.data?.buy ?? false);\r\n  }\r\n\r\n  async bidAsync(id: string, amount: string): Promise<boolean> {\r\n    const result = await this._apollo.mutate<Bid, BidVariables>({\r\n      mutation: BID_MUTATION,\r\n      variables: {\r\n        id: id,\r\n        amount: amount\r\n      }\r\n    });\r\n    return Boolean(result.data?.bid ?? false);\r\n  }\r\n\r\n  async acceptBidAsync(id: string, amount: string): Promise<boolean> {\r\n    const result = await this._apollo.mutate<AcceptBid, AcceptBidVariables>({\r\n      mutation: ACCEPT_BID_MUTATION,\r\n      variables: {\r\n        id: id,\r\n        amount: amount\r\n      }\r\n    });\r\n    return Boolean(result.data?.acceptBid ?? false);\r\n  }\r\n\r\n  async cancelBidAsync(id: string): Promise<boolean> {\r\n    const result = await this._apollo.mutate<CancelBid, CancelBidVariables>({\r\n      mutation: CANCEL_BID_MUTATION,\r\n      variables: {\r\n        id: id\r\n      }\r\n    });\r\n    return Boolean(result.data?.cancelBid ?? false);\r\n  }\r\n}\r\n\r\nconst service = new MarketService();\r\n\r\nexport const getMarketService = () => {\r\n  return service;\r\n}","import { faBan, faDonate, faEraser, faExchangeAlt, faGift, faHandHoldingUsd, faPowerOff, faQuestion, faTag, faTrophy } from '@fortawesome/free-solid-svg-icons';\r\nimport { PunkTypes } from 'vitepunks-common';\r\n\r\nexport abstract class IconUtil {\r\n  static getBuyEventTypeIcon = () => {\r\n    return faDonate;\r\n  }\r\n  static getClaimEventTypeIcon = () => {\r\n    return faExchangeAlt;\r\n    //return faBoxOpen;\r\n  }\r\n  static getOfferEventTypeIcon = () => {\r\n    return faTag;\r\n  }\r\n  static getGiftEventTypeIcon = () => {\r\n    return faGift;\r\n  }\r\n  static getCancelSaleEventTypeIcon = () => {\r\n    return faPowerOff;\r\n  }\r\n  static getCancelGiftEventTypeIcon = () => {\r\n    return faEraser;\r\n  }\r\n  static getPunkEventTypeIcon = (eventType: PunkTypes.PunkEventType, amount?: Maybe<PunkTypes.BigNumberWrapper>) => {\r\n    switch (eventType) {\r\n      case PunkTypes.PunkEventType.Mint:\r\n        return faTrophy;\r\n      case PunkTypes.PunkEventType.Offer:\r\n        if (amount && amount.gt(0)) {\r\n          return IconUtil.getOfferEventTypeIcon();\r\n        }\r\n        return IconUtil.getGiftEventTypeIcon();\r\n      case PunkTypes.PunkEventType.NewBid:\r\n        return faHandHoldingUsd;;\r\n      case PunkTypes.PunkEventType.CancelBid:\r\n        return faBan;\r\n      case PunkTypes.PunkEventType.Buy:\r\n        if (amount && amount.gt(0)) {\r\n          return IconUtil.getBuyEventTypeIcon();\r\n        }\r\n        return IconUtil.getClaimEventTypeIcon();\r\n      case PunkTypes.PunkEventType.CancelOffer:\r\n        if (amount && amount.gt(0)) {\r\n          return IconUtil.getCancelSaleEventTypeIcon();\r\n        }\r\n        return IconUtil.getCancelGiftEventTypeIcon();\r\n      default:\r\n        return faQuestion;\r\n    }\r\n  }\r\n  static getAccountAuctionTypeIcon = (auctionType: PunkTypes.AccountAuctionType, amount?: Maybe<PunkTypes.BigNumberWrapper>) => {\r\n    switch (auctionType) {\r\n      case PunkTypes.AccountAuctionType.Bid:\r\n        return IconUtil.getPunkEventTypeIcon(PunkTypes.PunkEventType.NewBid, amount);\r\n      case PunkTypes.AccountAuctionType.Offer:\r\n        return IconUtil.getPunkEventTypeIcon(PunkTypes.PunkEventType.Offer, amount);\r\n      default:\r\n        return IconUtil.getPunkEventTypeIcon(PunkTypes.PunkEventType.Unknown, amount);\r\n    }\r\n  }\r\n}","import { Link } from '@mui/material';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { CommonUtil, ExplorerUtil } from \"vitepunks-common\";\r\nimport { ExtendedBootstrapTooltip } from '../tooltip';\r\n\r\ninterface Props {\r\n  children: React.ReactNode\r\n  value?: Maybe<string>\r\n  type: ExplorerLinkType\r\n}\r\n\r\nexport enum ExplorerLinkType {\r\n  Address,\r\n  Transaction\r\n}\r\n\r\nexport const ExplorerLink: React.FC<Props> = (props: Props) => {\r\n  const getUrl = useCallback(() => {\r\n    if (!props.value || CommonUtil.isNullOrWhitespace(props.value)) {\r\n      return undefined;\r\n    }\r\n    switch (props.type) {\r\n      case ExplorerLinkType.Address:\r\n        return ExplorerUtil.getAddressUrl(props.value);\r\n      default:\r\n        return ExplorerUtil.getTxUrl(props.value);\r\n    }\r\n  }, [props.value, props.type]);\r\n  const [url, setUrl] = useState<Maybe<string>>(getUrl());\r\n\r\n  useEffect(() => {\r\n    setUrl(getUrl());\r\n  }, [props.value, props.type, getUrl]);\r\n\r\n  if (!url || CommonUtil.isNullOrWhitespace(url)) {\r\n    return (\r\n      <>\r\n        {props.children}\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Link underline=\"hover\" href={url} target=\"_blank\">\r\n      {props.children}\r\n    </Link>\r\n  );\r\n}\r\n\r\ninterface AddressExplorerLinkProps {\r\n  address: string\r\n  startPosition?: Maybe<number>\r\n}\r\n\r\nexport const AddressExplorerLink: React.FC<AddressExplorerLinkProps> = (props: AddressExplorerLinkProps) => {\r\n  const getAddressUrl = () => {\r\n    return ExplorerUtil.getAddressUrl(props.address);\r\n  }\r\n  const truncateAddress = () => {\r\n    return CommonUtil.truncateStringInTheMiddle(props.address, props.startPosition ? props.startPosition : 10, 5);\r\n  }\r\n  return (\r\n    <ExtendedBootstrapTooltip title={props.address} placement=\"bottom\" arrow>\r\n      <Link underline=\"hover\" href={getAddressUrl()} target=\"_blank\" variant=\"body2\" color=\"text.secondary\">{truncateAddress()}</Link>\r\n    </ExtendedBootstrapTooltip>\r\n  )\r\n}\r\n","import moment from 'moment';\r\n\r\nexport class MomentUtil {\r\n  constructor() {\r\n    moment.locale(navigator.language);\r\n  }\r\n\r\n  public setLocale(language: string): void {\r\n    moment.locale(language);\r\n  }\r\n\r\n  public get(): moment.Moment {\r\n    return moment()\r\n  }\r\n\r\n  public getFromUnix(date: number) {\r\n    return moment.unix(date);\r\n  }\r\n\r\n  public getFromMilliseconds(date: number) {\r\n    return moment(date, 'x');\r\n  }\r\n\r\n  public getLocal(date: any): moment.Moment {\r\n    return moment.utc(date).local();\r\n  }\r\n\r\n  public getLocalTime(date: any): string {\r\n    return this.getLocal(date).format('LTS');\r\n  }\r\n\r\n  public getLocalDate(date: any): string {\r\n    return this.getLocal(date).format('L');\r\n  }\r\n\r\n  public getLocalFormatted(date: any): string {\r\n    return this.getLocalTime(date) + ' ' + this.getLocalDate(date);\r\n  }\r\n\r\n  public getLocalReverseFormatted(date: any): string {\r\n    return this.getLocalDate(date) + ' ' + this.getLocalTime(date);\r\n  }\r\n\r\n  public getDuration(date: any, unit: moment.unitOfTime.DurationConstructor | undefined = \"seconds\"): moment.Duration {\r\n    const diff = moment(date).unix() - moment().unix();\r\n    return moment.duration(diff, unit);\r\n  }\r\n\r\n  public isExpired(timestamp: any): boolean {\r\n    try {\r\n      if (timestamp) {\r\n        return moment.utc().unix() >= Number(timestamp);\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n}","import { Grid } from '@mui/material';\r\nimport React from 'react';\r\nimport { FormatUtil } from 'vitepunks-common';\r\nimport { Alert } from '../alert';\r\n\r\nexport interface EventListLoadingProps {\r\n  error: any\r\n  loading: boolean\r\n  count: number\r\n  message: string\r\n}\r\n\r\nexport const EventListLoading: React.FC<EventListLoadingProps> = (props: EventListLoadingProps) => {\r\n  return (\r\n    <Grid item key='1' xs={12} md={6}>\r\n      {props.loading ? (\r\n        <Alert message=\"Loading...\" type=\"default\" ></Alert>\r\n      ) : (\r\n        <>\r\n          {props.error ? (\r\n            <Alert message={FormatUtil.formatMessage(props.error)} type=\"warning\"></Alert>\r\n          ) : (\r\n            <>\r\n              {props.count > 0 ? (\r\n                <></>\r\n              ) : (\r\n                <Alert message={props.message} type=\"default\"></Alert>\r\n              )}\r\n            </>\r\n          )}\r\n        </>\r\n      )}\r\n    </Grid>\r\n  )\r\n}\r\n","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, FormControl, Input, Typography } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonConstants, PunkTypes, TokenUtil } from 'vitepunks-common';\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\n\r\ninterface Props {\r\n  state: PunkTypes.PunkDialogState\r\n  setState: React.Dispatch<React.SetStateAction<PunkTypes.PunkDialogState>>\r\n  callbackAsync: (_success: boolean) => Promise<void>\r\n}\r\n\r\nexport const PunkAcceptDialog: React.FC<Props> = (props: Props) => {\r\n  const [amount, setAmount] = useState(\"\");\r\n  const service = getMarketService();\r\n\r\n  useEffect(() => {\r\n    if (props.state.type === PunkTypes.PunkDialogType.ACCEPT_OFFER) {\r\n      if (props.state.item.offer?.minAmount.gt(0)) {\r\n        setAmount(TokenUtil.formatViteTooltip(props.state.item.offer.minAmount))\r\n      }\r\n    } else {\r\n      if (props.state.item.bid?.amount.gt(0)) {\r\n        setAmount(TokenUtil.formatViteTooltip(props.state.item.bid.amount))\r\n      }\r\n    }\r\n  }, [props.state]);\r\n\r\n  const handleClose = () => {\r\n    props.setState({\r\n      ...props.state,\r\n      open: false\r\n    })\r\n  };\r\n\r\n  const handleConfirmAsync = async () => {\r\n    let _message = `Congratulations! You %ACTION_NAME ${CommonConstants.PUNK_NAME} #${props.state.item.id}`;\r\n    let _success = false;\r\n    try {\r\n      if (props.state.type === PunkTypes.PunkDialogType.ACCEPT_OFFER) {\r\n        if (!props.state.item.offer) {\r\n          throw new Error(`${CommonConstants.PUNK_NAME} #${props.state.item.id} is not for sale`);\r\n        }\r\n        _success = await service.buyAsync(props.state.item.id, props.state.item.offer.minAmount.toFixed());\r\n        _message = _message.replace(\"%ACTION_NAME\", \"bought\");\r\n      } else {\r\n        if (!props.state.item.bid) {\r\n          throw new Error(`${CommonConstants.PUNK_NAME} #${props.state.item.id} has no bid`);\r\n        }\r\n        _success = await service.acceptBidAsync(props.state.item.id, props.state.item.bid?.amount.toFixed());\r\n        _message = _message.replace(\"%ACTION_NAME\", \"sold\");\r\n      }\r\n      if (_success) {\r\n        SnackbarUtil.enqueueMessage(_message);\r\n        handleClose();\r\n      } else {\r\n        SnackbarUtil.enqueueError(\"Error\");\r\n      }\r\n    } catch (error) {\r\n      _success = false;\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      await props.callbackAsync(_success);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={props.state.open} maxWidth=\"xs\" fullWidth>\r\n      <DialogTitle>Confirmation required</DialogTitle>\r\n      <DialogContent>\r\n        {props.state.type === PunkTypes.PunkDialogType.ACCEPT_OFFER ? (\r\n          <Typography variant=\"body1\" color=\"textSecondary\" gutterBottom>\r\n            Buy {CommonConstants.PUNK_NAME} #{props.state.item.id}\r\n          </Typography>\r\n        ) : (\r\n          <>\r\n            <Typography variant=\"body1\" color=\"textSecondary\" gutterBottom>\r\n              Accept bid for {CommonConstants.PUNK_NAME} #{props.state.item.id}\r\n            </Typography>\r\n            {/* <Typography variant=\"body1\" color=\"textSecondary\">\r\n              You will receive <small>(minus fees)</small>:\r\n            </Typography> */}\r\n          </>\r\n        )}\r\n        <FormControl fullWidth sx={{ mt: 2 }} variant=\"standard\" >\r\n          <Input\r\n            id=\"amount\"\r\n            value={amount}\r\n            //startAdornment={<InputAdornment position=\"start\">${CommonConstants.CURRENCY_NAME}</InputAdornment>}\r\n            disabled\r\n          />\r\n        </FormControl>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>Close</Button>\r\n        <ClickOnceButton size=\"medium\" color=\"primary\" callbackFn={handleConfirmAsync}>\r\n          Confirm\r\n        </ClickOnceButton>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import { FetchPolicy } from '@apollo/client';\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, FormControl, Input, InputAdornment, InputLabel } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonConstants, CommonUtil, PunkTypes, TokenUtil } from \"vitepunks-common\";\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\n\r\ninterface Props {\r\n  state: PunkTypes.PunkDialogState\r\n  fee: PunkTypes.BigNumberWrapper\r\n  updateFee: (_fetchPolicy?: FetchPolicy) => Promise<void>\r\n  setState: React.Dispatch<React.SetStateAction<PunkTypes.PunkDialogState>>\r\n  callbackAsync: (_success: boolean) => Promise<void>\r\n}\r\n\r\nexport const PunkBidDialog: React.FC<Props> = (props: Props) => {\r\n  const [amount, setAmount] = useState<string>(\"\");\r\n  const [disabled, setDisabled] = useState<boolean>(false);\r\n  const service = getMarketService();\r\n\r\n  const changeAmount = (amount: string) => {\r\n    setAmount(amount);\r\n    setDisabled(CommonUtil.isNullOrWhitespace(amount) || new PunkTypes.BigNumberWrapper(amount).lte(0));\r\n  }\r\n\r\n  const updateFee = props.updateFee;\r\n\r\n  useEffect(() => {\r\n    if (props.state.open) {\r\n      changeAmount(\"\");\r\n      updateFee(\"cache-first\");\r\n    }\r\n  }, [props.state, updateFee]);\r\n\r\n  const handleClose = () => {\r\n    props.setState({\r\n      ...props.state,\r\n      open: false\r\n    })\r\n  };\r\n\r\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    changeAmount(event.target.value);\r\n  };\r\n\r\n  const handleConfirmAsync = async () => {\r\n    let _success = false;\r\n    try {\r\n      const _amount = new PunkTypes.BigNumberWrapper(amount).shiftedBy(CommonConstants.CURRENCY_DECIMALS);\r\n      _success = await service.bidAsync(props.state.item.id, _amount.toFixed());\r\n      if (_success) {\r\n        SnackbarUtil.enqueueMessage(\"Bid success\");\r\n        handleClose();\r\n      } else {\r\n        SnackbarUtil.enqueueError(\"Error\");\r\n        updateFee();\r\n      }\r\n    } catch (error) {\r\n      _success = false;\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      await props.callbackAsync(_success);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={props.state.open} maxWidth=\"xs\" fullWidth>\r\n      <DialogTitle>Bid</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          Place a bid for {CommonConstants.PUNK_NAME} #{props.state.item.id}\r\n        </DialogContentText>\r\n        <FormControl fullWidth sx={{ mt: 2 }} variant=\"standard\" >\r\n          <InputLabel htmlFor=\"amount\">Amount</InputLabel>\r\n          <Input\r\n            id=\"amount\"\r\n            value={amount}\r\n            onChange={handleChange}\r\n            type=\"number\"\r\n            autoFocus\r\n            startAdornment={<InputAdornment position=\"start\">${CommonConstants.CURRENCY_NAME}</InputAdornment>}\r\n          />\r\n        </FormControl>\r\n        {props.fee.gt(0) && (\r\n          <DialogContentText align='right'>\r\n            + {TokenUtil.formatVite(props.fee)} {CommonConstants.CURRENCY_NAME} protocol fee\r\n          </DialogContentText>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>Cancel</Button>\r\n        <ClickOnceButton size=\"medium\" color=\"primary\" callbackFn={handleConfirmAsync} disabled={disabled}>\r\n          Confirm\r\n        </ClickOnceButton>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { ActionName, CommonConstants, PunkTypes } from 'vitepunks-common';\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\n\r\ninterface Props {\r\n  state: PunkTypes.PunkDialogState\r\n  setState: React.Dispatch<React.SetStateAction<PunkTypes.PunkDialogState>>\r\n  callbackAsync: (_success: boolean) => Promise<void>\r\n}\r\n\r\nexport const PunkCancelDialog: React.FC<Props> = (props: Props) => {\r\n  const [actionName, setActionName] = useState(\"\");\r\n  const service = getMarketService();\r\n\r\n  useEffect(() => {\r\n    setActionName(props.state.type === PunkTypes.PunkDialogType.CANCEL_BID ? ActionName.bid : (props.state.item.offer?.minAmount.gt(0) ? ActionName.listing : ActionName.gift));\r\n  }, [props.state]);\r\n\r\n  const handleClose = () => {\r\n    props.setState({\r\n      ...props.state,\r\n      open: false\r\n    })\r\n  };\r\n\r\n  const handleConfirmAsync = async () => {\r\n    let _success = false;\r\n    try {\r\n      if (props.state.type === PunkTypes.PunkDialogType.CANCEL_BID) {\r\n        _success = await service.cancelBidAsync(props.state.item.id);\r\n      } else {\r\n        _success = await service.cancelOfferAsync(props.state.item.id);\r\n      }\r\n      if (_success) {\r\n        SnackbarUtil.enqueueMessage(`${actionName} cancelled`);\r\n        handleClose();\r\n      } else {\r\n        SnackbarUtil.enqueueError(\"Error\");\r\n      }\r\n    } catch (error) {\r\n      _success = false;\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      await props.callbackAsync(_success);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={props.state.open} maxWidth=\"xs\" fullWidth>\r\n      <DialogTitle>Cancel</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          Cancel the {actionName.toLowerCase()} for {CommonConstants.PUNK_NAME} #{props.state.item.id}\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>Close</Button>\r\n        <ClickOnceButton size=\"medium\" color=\"primary\" callbackFn={handleConfirmAsync}>\r\n          Confirm\r\n        </ClickOnceButton>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import { FetchPolicy } from '@apollo/client';\r\nimport { Box, Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, FormControl, Input, InputLabel } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { ActionName, CommonConstants, CommonUtil, PunkTypes, TokenUtil } from \"vitepunks-common\";\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\n\r\ninterface Props {\r\n  state: PunkTypes.PunkDialogState\r\n  fee: PunkTypes.BigNumberWrapper\r\n  updateFee: (_fetchPolicy?: FetchPolicy) => Promise<void>\r\n  setState: React.Dispatch<React.SetStateAction<PunkTypes.PunkDialogState>>\r\n  callbackAsync: (_success: boolean) => Promise<void>\r\n}\r\n\r\nexport const PunkGiftDialog: React.FC<Props> = (props: Props) => {\r\n  const [address, setAddress] = useState<string>(\"\");\r\n  const [disabled, setDisabled] = useState<boolean>(true);\r\n  const service = getMarketService();\r\n\r\n  const changeAddress = (address: string) => {\r\n    setAddress(address);\r\n    setDisabled(CommonUtil.isNullOrWhitespace(address));\r\n  }\r\n\r\n  const updateFee = props.updateFee;\r\n\r\n  useEffect(() => {\r\n    if (props.state.open) {\r\n      setAddress(\"\");\r\n      updateFee(\"cache-first\");\r\n    }\r\n  }, [props.state, updateFee]);\r\n\r\n  const handleClose = () => {\r\n    props.setState({\r\n      ...props.state,\r\n      open: false\r\n    })\r\n  };\r\n\r\n  const handleAddressChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    changeAddress(event.target.value);\r\n  };\r\n\r\n  const handleConfirmAsync = async () => {\r\n    let _success = false;\r\n    try {\r\n      const _amount = new PunkTypes.BigNumberWrapper(0);\r\n      _success = await service.offerAsync(props.state.item.id, _amount.toFixed(), CommonUtil.isNullOrWhitespace(address) ? undefined : address);\r\n      if (_success) {\r\n        SnackbarUtil.enqueueMessage(`${ActionName.gift} success`);\r\n        handleClose();\r\n      } else {\r\n        SnackbarUtil.enqueueError(\"Error\");\r\n        updateFee();\r\n      }\r\n    } catch (error) {\r\n      _success = false;\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      await props.callbackAsync(_success);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={props.state.open} maxWidth=\"xs\" fullWidth>\r\n      <DialogTitle>Gift/transfer</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          Transfer {CommonConstants.PUNK_NAME} #{props.state.item.id} as a gift\r\n        </DialogContentText>\r\n        <FormControl fullWidth variant=\"standard\" >\r\n          <InputLabel htmlFor=\"address\">Address</InputLabel>\r\n          <Input\r\n            id=\"address\"\r\n            value={address}\r\n            onChange={handleAddressChange}\r\n            placeholder=\"Only this address will be eligible to claim\"\r\n            type=\"text\"\r\n          />\r\n        </FormControl>\r\n        {props.fee.gt(0) ? (\r\n          <DialogContentText align='right'>\r\n            + {TokenUtil.formatVite(props.fee)} {CommonConstants.CURRENCY_NAME} protocol fee\r\n          </DialogContentText>\r\n        ) : (\r\n          <Box marginTop={2}></Box>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>Cancel</Button>\r\n        <ClickOnceButton size=\"medium\" color=\"primary\" callbackFn={handleConfirmAsync} disabled={disabled}>\r\n          Confirm\r\n        </ClickOnceButton>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import { FetchPolicy } from '@apollo/client';\r\nimport { Box, Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, FormControl, Input, InputAdornment, InputLabel } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonConstants, CommonUtil, PunkTypes, TokenUtil } from \"vitepunks-common\";\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\n\r\ninterface Props {\r\n  state: PunkTypes.PunkDialogState\r\n  fee: PunkTypes.BigNumberWrapper\r\n  updateFee: (_fetchPolicy?: FetchPolicy) => Promise<void>\r\n  setState: React.Dispatch<React.SetStateAction<PunkTypes.PunkDialogState>>\r\n  callbackAsync: (_success: boolean) => Promise<void>\r\n}\r\n\r\nexport const PunkOfferDialog: React.FC<Props> = (props: Props) => {\r\n  const [amount, setAmount] = useState<string>(\"\");\r\n  const [address, setAddress] = useState<string>(\"\");\r\n  const [disabled, setDisabled] = useState<boolean>(false);\r\n  const service = getMarketService();\r\n\r\n  const changeAmount = (amount: string) => {\r\n    setAmount(amount);\r\n    setDisabled(CommonUtil.isNullOrWhitespace(amount) || new PunkTypes.BigNumberWrapper(amount).lt(0));\r\n  }\r\n\r\n  const updateFee = props.updateFee;\r\n\r\n  useEffect(() => {\r\n    if (props.state.open) {\r\n      changeAmount(\"\");\r\n      setAddress(\"\");\r\n      updateFee(\"cache-first\");\r\n    }\r\n  }, [props.state, updateFee]);\r\n\r\n  const handleClose = () => {\r\n    props.setState({\r\n      ...props.state,\r\n      open: false\r\n    })\r\n  };\r\n\r\n  const handleAmountChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    changeAmount(event.target.value);\r\n  };\r\n\r\n  const handleAddressChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setAddress(event.target.value);\r\n  };\r\n\r\n  const handleConfirmAsync = async () => {\r\n    let _success = false;\r\n    try {\r\n      const _amount = new PunkTypes.BigNumberWrapper(amount).shiftedBy(CommonConstants.CURRENCY_DECIMALS);\r\n      _success = await service.offerAsync(props.state.item.id, _amount.toFixed(), CommonUtil.isNullOrWhitespace(address) ? undefined : address);\r\n      if (_success) {\r\n        SnackbarUtil.enqueueMessage(\"Listed for sale\");\r\n        handleClose();\r\n      } else {\r\n        SnackbarUtil.enqueueError(\"Error\");\r\n        updateFee();\r\n      }\r\n    } catch (error) {\r\n      _success = false;\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      await props.callbackAsync(_success);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={props.state.open} maxWidth=\"xs\" fullWidth>\r\n      <DialogTitle>Sell</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          List {CommonConstants.PUNK_NAME} #{props.state.item.id} for sale\r\n        </DialogContentText>\r\n        <FormControl fullWidth sx={{ mt: 2 }} variant=\"standard\" >\r\n          <InputLabel htmlFor=\"amount\">Amount</InputLabel>\r\n          <Input\r\n            id=\"amount\"\r\n            value={amount}\r\n            onChange={handleAmountChange}\r\n            type=\"number\"\r\n            autoFocus\r\n            startAdornment={<InputAdornment position=\"start\">${CommonConstants.CURRENCY_NAME}</InputAdornment>}\r\n          />\r\n        </FormControl>\r\n        {props.fee.gt(0) ? (\r\n          <DialogContentText align='right'>\r\n            + {TokenUtil.formatVite(props.fee)} {CommonConstants.CURRENCY_NAME} protocol fee\r\n          </DialogContentText>\r\n        ) : (\r\n          <Box marginTop={2}></Box>\r\n        )}\r\n        <FormControl fullWidth variant=\"standard\" >\r\n          <InputLabel htmlFor=\"address\">Address (optional)</InputLabel>\r\n          <Input\r\n            id=\"address\"\r\n            value={address}\r\n            onChange={handleAddressChange}\r\n            placeholder=\"Only this address will be eligible to buy\"\r\n            type=\"text\"\r\n          />\r\n        </FormControl>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>Cancel</Button>\r\n        <ClickOnceButton size=\"medium\" color=\"primary\" callbackFn={handleConfirmAsync} disabled={disabled}>\r\n          Confirm\r\n        </ClickOnceButton>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import { FetchPolicy } from '@apollo/client';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { getEmitter, getLogger, PunkTypes, TransformUtil } from 'vitepunks-common';\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { PunkAcceptDialog } from '../dialog-accept';\r\nimport { PunkBidDialog } from '../dialog-bid';\r\nimport { PunkCancelDialog } from '../dialog-cancel';\r\nimport { PunkGiftDialog } from '../dialog-gift';\r\nimport { PunkOfferDialog } from '../dialog-offer';\r\n\r\nconst logger = getLogger();\r\n\r\ninterface Props {\r\n  state: PunkTypes.PunkDialogState\r\n  setState: React.Dispatch<React.SetStateAction<PunkTypes.PunkDialogState>>\r\n  callbackAsync: (success: boolean) => Promise<void>\r\n}\r\n\r\nexport const PunkDialog: React.FC<Props> = (props: Props) => {\r\n  const mounted = React.useRef(false);\r\n  const [fee, setFee] = useState<PunkTypes.BigNumberWrapper>(TransformUtil.defaultBigNumber);\r\n  const service = getMarketService();\r\n  const emitter = getEmitter();\r\n\r\n  React.useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  const updateFee = useCallback(async (_fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    if (mounted.current) {\r\n      setFee(TransformUtil.defaultBigNumber);\r\n      try {\r\n        const result = await service.getMarketInfoAsync(_fetchPolicy);\r\n        if (mounted.current) {\r\n          const info = result.data.marketInfo as PunkTypes.MarketInfo;\r\n          if (info && info.actionPrice.gt(0)) {\r\n            setFee(info.actionPrice);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        logger.error(error)();\r\n      }\r\n    }\r\n  }, [service]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.MarketChangedEvent) => {\r\n      logger.info(`eventType: ${e.eventType} amount: ${e.value.toFixed()} timestamp: ${e.timestamp.toFixed()}`)();\r\n      updateFee();\r\n    }\r\n    logger.info('emitter.on', PunkTypes.GlobalEvent.MarketChanged)();\r\n    emitter.on(PunkTypes.GlobalEvent.MarketChanged, handleEvent);\r\n    return () => {\r\n      logger.info('emitter.off', PunkTypes.GlobalEvent.MarketChanged)();\r\n      emitter.off(PunkTypes.GlobalEvent.MarketChanged, handleEvent);\r\n    };\r\n  }, [emitter, updateFee]);\r\n\r\n  switch (props.state.type) {\r\n    case PunkTypes.PunkDialogType.BID:\r\n      return <PunkBidDialog state={props.state} fee={fee} updateFee={updateFee} setState={props.setState} callbackAsync={(success) => props.callbackAsync(success)}></PunkBidDialog>\r\n    case PunkTypes.PunkDialogType.OFFER:\r\n      return <PunkOfferDialog state={props.state} fee={fee} updateFee={updateFee} setState={props.setState} callbackAsync={(success) => props.callbackAsync(success)}></PunkOfferDialog>\r\n    case PunkTypes.PunkDialogType.GIFT:\r\n      return <PunkGiftDialog state={props.state} fee={fee} updateFee={updateFee} setState={props.setState} callbackAsync={(success) => props.callbackAsync(success)}></PunkGiftDialog>\r\n    case PunkTypes.PunkDialogType.CANCEL_BID:\r\n    case PunkTypes.PunkDialogType.CANCEL_OFFER:\r\n      return <PunkCancelDialog state={props.state} setState={props.setState} callbackAsync={(success) => props.callbackAsync(success)}></PunkCancelDialog>\r\n    case PunkTypes.PunkDialogType.ACCEPT_BID:\r\n    case PunkTypes.PunkDialogType.ACCEPT_OFFER:\r\n      return <PunkAcceptDialog state={props.state} setState={props.setState} callbackAsync={(success) => props.callbackAsync(success)}></PunkAcceptDialog>\r\n    default:\r\n      return <></>\r\n  }\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Avatar, Button, Grid, Link, Paper, styled, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from '@mui/material';\r\nimport React, { useState } from 'react';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { ActionName, CommonConstants, CommonUtil, getLogger, PunkTypes, TokenUtil, UrlUtil } from \"vitepunks-common\";\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\r\nimport { GET_PUNK_QUERY } from '../../../../queries';\r\nimport { GetPunk, GetPunkVariables } from '../../../../queries/__generated__/GetPunk';\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { IconUtil } from '../../../../util/icon.util';\r\nimport { MomentUtil } from '../../../../util/moment.util';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\nimport { EventListLoading } from '../../../common/components/event-list-loading';\r\nimport { ExtendedBootstrapTooltip } from '../../../common/components/tooltip';\r\nimport { PunkDialog } from '../../../punk/components/dialog';\r\n\r\nconst logger = getLogger();\r\n\r\ninterface EventTableRowProps {\r\n  isAuthorized: boolean\r\n  item: PunkTypes.AccountAuction\r\n  handleClaimAsync(_item: PunkTypes.AccountAuction): Promise<void>\r\n  handleOpenDialog(_type: PunkTypes.PunkDialogType, _item: PunkTypes.Punk, _auction: PunkTypes.AccountAuction): void\r\n}\r\n\r\nconst CustomAvatar = styled(Avatar)(({ theme }) => (`\r\n  background-image: url('${ClientConstants.ITEM_BG_URL}');\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  image-rendering: pixelated;\r\n  margin-right: 10px;\r\n`));\r\n\r\nconst CustomTableCell = styled(TableCell)(({ theme }) => (`\r\n  background-color: rgba(255, 255, 255, 0.3);\r\n`));\r\n\r\nconst EventTableRow: React.FC<EventTableRowProps> = (props: EventTableRowProps) => {\r\n  const [isAnon, setIsAnon] = useState(false);\r\n  const [isOwner, setIsOwner] = useState(false);\r\n\r\n  const context = useConnectedWeb3Context();\r\n\r\n  const query = useQuery<GetPunk, GetPunkVariables>(GET_PUNK_QUERY, {\r\n    variables: {\r\n      id: props.item.punkId.toString()\r\n    },\r\n    fetchPolicy: 'network-only',\r\n    onCompleted: (data) => {\r\n      setIsAnon(CommonUtil.isNullOrWhitespace(context.account));\r\n      setIsOwner(data.punk.owner?.toLowerCase() === context.account?.toLowerCase());\r\n    }\r\n  });\r\n  const momentUtil = new MomentUtil();\r\n\r\n  const formatTimestamp = (timestamp: any) => {\r\n    return momentUtil.getLocalReverseFormatted(momentUtil.getFromUnix(timestamp));\r\n  }\r\n\r\n  const formatViteTooltip = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatViteTooltip(bn);\r\n  }\r\n\r\n  const formatVite = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatVite(bn);\r\n  }\r\n\r\n  const getEventName = (): string => {\r\n    switch (props.item.auctionType) {\r\n      case PunkTypes.AccountAuctionType.Offer:\r\n        if (!props.item.amount || props.item.amount.lte(0)) {\r\n          return ActionName.gift;\r\n        }\r\n        return ActionName.list;\r\n      case PunkTypes.AccountAuctionType.Bid:\r\n        return ActionName.bid;\r\n      default:\r\n        break;\r\n    }\r\n    return ActionName.unknown;\r\n  }\r\n\r\n  const handleClaimAsync = async () => {\r\n    if (query.data?.punk) {\r\n      await props.handleClaimAsync(props.item);\r\n    }\r\n  }\r\n\r\n  const handleOpenDialog = (_type: PunkTypes.PunkDialogType) => {\r\n    if (query.data?.punk) {\r\n      props.handleOpenDialog(_type, query.data.punk, props.item);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <TableRow sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\r\n      <TableCell component=\"th\" scope=\"row\">\r\n        <FontAwesomeIcon icon={IconUtil.getAccountAuctionTypeIcon(props.item.auctionType, props.item.amount)} /> <b>{getEventName()}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Link underline=\"hover\" component={RouterLink} to={`/punk/${props.item.punkId}`} display=\"flex\" alignItems=\"center\">\r\n          <CustomAvatar variant=\"rounded\" src={UrlUtil.getPunkUrl(query.data?.punk.image, query.data?.punk.cid)}>\r\n          </CustomAvatar>\r\n          {CommonConstants.PUNK_NAME} #{props.item.punkId}\r\n        </Link>\r\n      </TableCell>\r\n      <TableCell>\r\n        {props.item.amount?.gt(0) ? (\r\n          <>\r\n            <ExtendedBootstrapTooltip title={formatViteTooltip(props.item.amount)}>\r\n              <span>{formatVite(props.item.amount)}</span>\r\n            </ExtendedBootstrapTooltip>\r\n          </>\r\n        ) : (\r\n          <>\r\n          </>\r\n        )}\r\n      </TableCell>\r\n      <TableCell>\r\n        {formatTimestamp(props.item.timestamp.toFixed())}\r\n      </TableCell>\r\n      <TableCell align=\"right\">\r\n        {props.item.auctionType === PunkTypes.AccountAuctionType.Offer && (\r\n          <>\r\n            {isOwner || isAnon ? (\r\n              <Button size=\"small\" variant=\"outlined\" sx={{ minWidth: \"70px\" }} onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.CANCEL_OFFER) }} disabled={!props.isAuthorized}>{ActionName.cancel}</Button>\r\n            ) : (\r\n              <>\r\n                {!props.item.amount || props.item.amount.lte(0) ? (\r\n                  <ClickOnceButton size=\"small\" variant=\"outlined\" color=\"secondary\" sx={{ minWidth: \"70px\" }} callbackFn={handleClaimAsync} disabled={!props.isAuthorized}>{ActionName.claim}</ClickOnceButton>\r\n                ) : (\r\n                  <Button size=\"small\" variant=\"outlined\" sx={{ minWidth: \"70px\" }} onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.ACCEPT_OFFER) }} disabled={!props.isAuthorized}>{ActionName.buy}</Button>\r\n                )}\r\n              </>\r\n\r\n            )}\r\n          </>\r\n        )}\r\n        {props.item.auctionType === PunkTypes.AccountAuctionType.Bid && (\r\n          <>\r\n            {isOwner || isAnon ? (\r\n              <Button size=\"small\" variant=\"outlined\" sx={{ minWidth: \"70px\" }} color=\"secondary\" onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.ACCEPT_BID) }} disabled={!props.isAuthorized}>{ActionName.accept}</Button>\r\n            ) : (\r\n              <Button size=\"small\" variant=\"outlined\" sx={{ minWidth: \"70px\" }} onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.CANCEL_BID) }} disabled={!props.isAuthorized}>{ActionName.cancel}</Button>\r\n            )}\r\n          </>\r\n        )}\r\n      </TableCell>\r\n    </TableRow>\r\n  )\r\n}\r\n\r\ninterface Props {\r\n  events: PunkTypes.AccountAuction[]\r\n  newEvents: PunkTypes.AccountAuction[]\r\n  error: any\r\n  loading: boolean\r\n  hasMore: boolean\r\n  height?: number\r\n  fetchMoreDataAsync(): Promise<void>\r\n  cleanupAsync(_item: PunkTypes.AccountAuction): Promise<void>\r\n  isAuthorized: boolean\r\n}\r\n\r\nexport const AccountAuctionList: React.FC<Props> = (props: Props) => {\r\n  const [currentAuction, setCurrentAuction] = useState<PunkTypes.AccountAuction>({} as PunkTypes.AccountAuction);\r\n  const [dialogState, setDialogState] = useState<PunkTypes.PunkDialogState>({\r\n    type: PunkTypes.PunkDialogType.UNKNOWN,\r\n    open: false,\r\n    item: {} as PunkTypes.Punk\r\n  });\r\n\r\n  const service = getMarketService();\r\n  const emptyMessage = \"No active auctions\";\r\n\r\n  const handleClaimAsync = async (_item: PunkTypes.AccountAuction) => {\r\n    try {\r\n      if (_item.auctionType !== PunkTypes.AccountAuctionType.Offer) {\r\n        throw new Error(`${CommonConstants.PUNK_NAME} #${_item.punkId} cannot be claimed`);\r\n      }\r\n      const success = await service.buyAsync(_item.punkId.toString(), _item.amount.toFixed());\r\n      if (success) {\r\n        SnackbarUtil.enqueueMessage(`Congratulations! You claimed ${CommonConstants.PUNK_NAME} #${_item.punkId}`);\r\n      }\r\n    } catch (error) {\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      props.cleanupAsync(_item);\r\n    }\r\n  }\r\n\r\n  const handleOpenDialog = (_type: PunkTypes.PunkDialogType, _item: PunkTypes.Punk, _auction: PunkTypes.AccountAuction) => {\r\n    setCurrentAuction(_auction);\r\n    setDialogState({\r\n      ...dialogState,\r\n      type: _type,\r\n      open: true,\r\n      item: _item\r\n    });\r\n  }\r\n\r\n  const dialogCallbackAsync = async (_success: boolean) => {\r\n    logger.info(\"dialogCallbackAsync\", _success)();\r\n    if (_success) {\r\n      props.cleanupAsync(currentAuction);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Paper\r\n        id=\"event-list\"\r\n        style={{\r\n          height: props.height ?? 300,\r\n          overflow: 'auto',\r\n          backgroundColor: 'rgba(255, 255, 255, 0.5)'\r\n        }}\r\n      >\r\n        {props.newEvents.length > 0 || props.events.length > 0 ? (\r\n          <InfiniteScroll\r\n            dataLength={props.events.length ?? 0}\r\n            next={props.fetchMoreDataAsync}\r\n            hasMore={props.hasMore}\r\n            loader={\r\n              <Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n                <EventListLoading loading={props.loading} error={props.error} count={props.events.length} message={emptyMessage}></EventListLoading>\r\n              </Grid>\r\n            }\r\n            scrollableTarget=\"event-list\"\r\n          >\r\n            <TableContainer>\r\n              <Table stickyHeader>\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <CustomTableCell></CustomTableCell>\r\n                    <CustomTableCell><b>Punk</b></CustomTableCell>\r\n                    <CustomTableCell><b>Amount</b></CustomTableCell>\r\n                    <CustomTableCell><b>Date</b></CustomTableCell>\r\n                    <CustomTableCell align=\"right\"><b>Action</b></CustomTableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {props.newEvents.map((e: PunkTypes.AccountAuction) => (\r\n                    <EventTableRow\r\n                      key={`new-events-${e.timestamp.toFixed()}`}\r\n                      isAuthorized={props.isAuthorized}\r\n                      handleClaimAsync={handleClaimAsync}\r\n                      handleOpenDialog={handleOpenDialog}\r\n                      item={e} />\r\n                  ))}\r\n                  {props.events.map((e: PunkTypes.AccountAuction) => (\r\n                    <EventTableRow\r\n                      key={`events-${e.timestamp.toFixed()}`}\r\n                      isAuthorized={props.isAuthorized}\r\n                      handleClaimAsync={handleClaimAsync}\r\n                      handleOpenDialog={handleOpenDialog}\r\n                      item={e} />\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          </InfiniteScroll>) : (\r\n          <Grid sx={{ height: \"100%\" }} container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n            <EventListLoading loading={props.loading} error={props.error} count={props.events.length} message={emptyMessage}></EventListLoading>\r\n          </Grid>\r\n        )}\r\n      </Paper>\r\n      <PunkDialog state={dialogState} setState={setDialogState} callbackAsync={dialogCallbackAsync}></PunkDialog>\r\n    </>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport SyncIcon from '@mui/icons-material/Sync';\r\nimport { IconButton, Stack } from '@mui/material';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { CommonUtil, getEmitter, getLogger, PunkTypes, TransformUtil } from 'vitepunks-common';\r\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\r\nimport { GET_ACCOUNT_AUCTIONS_QUERY } from '../../../../queries/general';\r\nimport { GetAccountAuctions, GetAccountAuctionsVariables } from '../../../../queries/__generated__/GetAccountAuctions';\r\nimport { getGeneralService } from '../../../../services/general.service';\r\nimport { AccountAuctionList } from '../auction-list';\r\n\r\nconst logger = getLogger();\r\n\r\ninterface Props {\r\n  address: string\r\n  refetchDataAsync(): Promise<void>\r\n}\r\n\r\nexport const AccountAuctions: React.FC<Props> = (props: Props) => {\r\n  const limit = 8;\r\n  const [isAuthorized, setIsAuthorized] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [error, setError] = useState<any>(undefined);\r\n  const [cursor, setCursor] = useState<Maybe<PunkTypes.Cursor>>(undefined);\r\n  const [events, setEvents] = useState<PunkTypes.AccountAuction[]>([]);\r\n  const [newEvents, setNewEvents] = useState<PunkTypes.AccountAuction[]>([]);\r\n  const service = getGeneralService();\r\n  const emitter = getEmitter();\r\n\r\n  const context = useConnectedWeb3Context();\r\n\r\n  const query = useQuery<GetAccountAuctions, GetAccountAuctionsVariables>(GET_ACCOUNT_AUCTIONS_QUERY, {\r\n    variables: {\r\n      address: props.address,\r\n      limit: limit\r\n    },\r\n    //notifyOnNetworkStatusChange: true,\r\n    fetchPolicy: 'network-only',\r\n    //refetchWritePolicy: 'overwrite',\r\n    onCompleted: (data) => {\r\n      setCursor(data.accountAuctions.cursor);\r\n      setEvents(data.accountAuctions.auctions.map(e => TransformUtil.toAccountAuction(e)));\r\n      setHasMore(!CommonUtil.isNullOrWhitespace(data.accountAuctions.cursor?.next));\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsAuthorized(props.address?.toLowerCase() === context.account?.toLowerCase());\r\n  }, [props.address, context.account]);\r\n\r\n  useEffect(() => {\r\n    setIsLoading(query.loading);\r\n  }, [query.loading]);\r\n\r\n  useEffect(() => {\r\n    setError(query.error);\r\n  }, [query.error]);\r\n\r\n  const fetchMoreDataAsync = async () => {\r\n    logger.info(\"fetchMoreDataAsync\", events.length)();\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await service.getAccountAuctions(props.address, limit, cursor?.next);\r\n      setCursor(result.data.accountAuctions.cursor);\r\n      setHasMore(!CommonUtil.isNullOrWhitespace(result.data.accountAuctions.cursor?.next));\r\n      if (result.data.accountAuctions.auctions.length > 0) {\r\n        setEvents([\r\n          ...events,\r\n          ...result.data.accountAuctions.auctions.map(e => TransformUtil.toAccountAuction(e))\r\n        ]);\r\n      }\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const cleanupAsync = async (_item: PunkTypes.AccountAuction) => {\r\n    if (_item) {\r\n      setEvents(events.filter(e => !e.timestamp.eq(_item.timestamp)));\r\n      setNewEvents(newEvents.filter(e => !e.timestamp.eq(_item.timestamp)));\r\n    }\r\n    // Update all auctions before refetch\r\n    await service.getAccountAuctions(props.address, limit);\r\n    await props.refetchDataAsync();\r\n  }\r\n\r\n  const refetch = query.refetch;\r\n\r\n  const refresh = useCallback(() => {\r\n    logger.info(\"Refreshing account auctions\")();\r\n    refetch();\r\n  }, [refetch]);\r\n\r\n  const refreshAsync = async () => {\r\n    logger.info(\"Refreshing account auctions & data\")();\r\n    await refetch();\r\n    await props.refetchDataAsync();\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (state: PunkTypes.DocumentState) => {\r\n      if (state === PunkTypes.DocumentState.Active) {\r\n        refresh();\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    };\r\n  }, [emitter, refresh]);\r\n\r\n  const addNewEvent = useCallback((e: PunkTypes.PunkChangedEvent) => {\r\n    // TODO: check if new event is related to current address\r\n    setNewEvents([\r\n      // TransformUtil.toPunkEvent(e),\r\n      ...newEvents\r\n    ]);\r\n  }, [newEvents]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.PunkChangedEvent) => {\r\n      logger.info(\"newMarketEvent\", e)();\r\n      addNewEvent(e);\r\n    }\r\n    logger.info('emitter.on', PunkTypes.GlobalEvent.PunkChanged)();\r\n    emitter.on(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    return () => {\r\n      logger.info('emitter.off', PunkTypes.GlobalEvent.PunkChanged)();\r\n      emitter.off(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    };\r\n  }, [emitter, addNewEvent]);\r\n\r\n  return (\r\n    <>\r\n      <Stack direction=\"row\" justifyContent=\"flex-end\" alignItems=\"center\" spacing={2}>\r\n        <IconButton size=\"small\" aria-label=\"refresh\" component=\"span\" onClick={refreshAsync}>\r\n          <SyncIcon fontSize=\"small\" />\r\n        </IconButton>\r\n      </Stack>\r\n      <AccountAuctionList\r\n        events={events}\r\n        newEvents={newEvents}\r\n        error={error}\r\n        loading={isLoading}\r\n        hasMore={hasMore}\r\n        height={300}\r\n        fetchMoreDataAsync={fetchMoreDataAsync}\r\n        cleanupAsync={cleanupAsync}\r\n        isAuthorized={isAuthorized}>\r\n      </AccountAuctionList>\r\n    </>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport { Container, Grid, Typography } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { GET_PUNKS_BY_ADDRESS_QUERY } from '../../../../queries';\r\nimport { GetPunksByAddress, GetPunksByAddressVariables } from '../../../../queries/__generated__/GetPunksByAddress';\r\nimport { InfinitePunkList } from '../../../punk/components/infinite-list';\r\nimport { AccountAuctions } from '../auctions';\r\n\r\nexport const AccountDetails: React.FC = (props: any) => {\r\n  const { address } = useParams();\r\n  const limit = 8;\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [error, setError] = useState<any>(undefined);\r\n\r\n  const query = useQuery<GetPunksByAddress, GetPunksByAddressVariables>(GET_PUNKS_BY_ADDRESS_QUERY, {\r\n    variables: {\r\n      address: address ?? \"\",\r\n      offset: 0,\r\n      limit: limit\r\n    },\r\n    fetchPolicy: 'network-only',\r\n    onCompleted: (data) => {\r\n      setHasMore(data.punksByAddress.length >= limit);\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsLoading(query.loading);\r\n  }, [query.loading]);\r\n\r\n  useEffect(() => {\r\n    setError(query.error);\r\n  }, [query.error]);\r\n\r\n  const fetchMoreDataAsync = async () => {\r\n    const currentLength = query.data?.punksByAddress.length ?? 0;\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await query.fetchMore({\r\n        variables: {\r\n          offset: currentLength,\r\n          limit: limit\r\n        }\r\n      });\r\n      setHasMore(result.data.punksByAddress.length >= limit);\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const refetchDataAsync = async () => {\r\n    await query.refetch({\r\n      address: address ?? \"\",\r\n      offset: 0,\r\n      limit: limit\r\n    });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Container maxWidth=\"lg\" sx={{ marginBottom: 5 }}>\r\n        <Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12} md={9}>\r\n            <Typography variant=\"h2\" component=\"div\" textAlign=\"center\" sx={{ pt: 3 }}>\r\n              Account\r\n            </Typography>\r\n            <Typography variant=\"subtitle1\" component=\"div\" textAlign=\"center\" sx={{ wordBreak: \"break-all\" }} gutterBottom>\r\n              {address}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} md={9}>\r\n            <AccountAuctions address={address ?? \"\"} refetchDataAsync={refetchDataAsync}></AccountAuctions>\r\n          </Grid>\r\n        </Grid>\r\n      </Container>\r\n      <InfinitePunkList\r\n        items={query.data?.punksByAddress ?? []}\r\n        fetchMoreDataAsync={fetchMoreDataAsync}\r\n        error={error}\r\n        isLoading={isLoading}\r\n        hasMore={hasMore}>\r\n      </InfinitePunkList>\r\n    </>\r\n  )\r\n}\r\n","import { Button } from '@mui/material';\r\nimport confetti from 'canvas-confetti';\r\nimport React, { useCallback } from 'react';\r\nimport { getViteClient } from 'vitepunks-common';\r\nimport { getWalletManager } from '../../../../storage/wallet.storage';\r\n\r\nexport const Test = () => {\r\n  const walletManager = getWalletManager();\r\n  const viteClient = getViteClient();\r\n\r\n  const onClick = useCallback(() => {\r\n    confetti({\r\n      particleCount: 150,\r\n      spread: 60\r\n    });\r\n    const wallet = walletManager.getWallet();\r\n    if (wallet?.active) {\r\n      viteClient.receiveAllOnroadTxAsync(wallet.active);\r\n    }\r\n  }, [viteClient, walletManager]);\r\n  return (\r\n    <>\r\n      Test {process.env.REACT_APP_VERSION} {process.env.REACT_APP_EXPLORER_URL}\r\n      <Button onClick={onClick}>Test</Button>\r\n    </>\r\n  );\r\n}\r\n","import { styled } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { UrlUtil } from 'vitepunks-common';\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { getPunkService } from '../../../../services/punk.service';\r\n\r\nconst ImageContainer = styled('div')(\r\n  ({ theme }) => `\r\n  position: relative;\r\n  width: 80vw;\r\n  height: 80vw; \r\n  max-width: 400px;\r\n  max-height: 400px;\r\n  animation: lightning 4s ease-out infinite;\r\n`,\r\n);\r\n\r\nconst Image = styled('div')(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100%;\r\n  border: 5px solid #fff;\r\n  border-radius: 50%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  background-image: url('${ClientConstants.ITEM_BG_URL}');\r\n`,\r\n);\r\n\r\nconst Img1 = styled('div')(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  background-image: url('${ClientConstants.SAMPLE_PUNK_URL}');\r\n  border-radius: 50%;\r\n  animation: toggle 4s linear -2s infinite alternate;\r\n  image-rendering: pixelated;\r\n`,\r\n);\r\n\r\n\r\nconst Img2 = styled('img')(\r\n  ({ theme }) => `\r\n  top: 0;\r\n  left: 0;\r\n  position: fixed;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  border: 5px solid #fff;\r\n  border-radius: 50%;\r\n  visibility: hidden;\r\n  animation: toggle 4s linear 2s infinite alternate;\r\n`,\r\n);\r\n\r\ninterface Props {\r\n  punkId1?: Maybe<number>\r\n  punkId2?: Maybe<number>\r\n}\r\n\r\n\r\nexport const LandingMainImage: React.FC<Props> = (props: Props) => {\r\n  const [imageUrl1, setImageUrl1] = useState<Maybe<string>>(undefined);\r\n  const [imageUrl2, setImageUrl2] = useState<Maybe<string>>(undefined);\r\n  const service = getPunkService();\r\n\r\n  useEffect(() => {\r\n    const setImageUrlsAsync = async () => {\r\n      if (props.punkId1) {\r\n        const punk1 = await service.getById(props.punkId1.toString());\r\n        setImageUrl1(UrlUtil.getPunkUrl(punk1.data.punk.image, punk1.data.punk.cid));\r\n      }\r\n      if (props.punkId2) {\r\n        const punk2 = await service.getById(props.punkId2.toString());\r\n        setImageUrl2(UrlUtil.getPunkUrl(punk2.data.punk.image, punk2.data.punk.cid));\r\n      }\r\n    }\r\n    setImageUrlsAsync();\r\n  }, [props.punkId1, props.punkId2, service])\r\n\r\n  return (\r\n    <ImageContainer>\r\n      <Image>\r\n        <Img1 sx={{ backgroundImage: `url('${imageUrl1 ?? ClientConstants.SAMPLE_PUNK_URL}')` }} />\r\n        <Img2 sx={{ backgroundImage: `url('${imageUrl2 ?? ClientConstants.SAMPLE_PUNK_URL}')` }} />\r\n      </Image>\r\n    </ImageContainer>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { LandingMainImage } from '../../../landing/components/main-image';\r\n\r\nexport const TestImage = () => {\r\n  return (\r\n    <>\r\n      <LandingMainImage punkId1={5667} punkId2={3848}></LandingMainImage>\r\n    </>\r\n  );\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport { Container, Grid } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { getLogger, PunkTypes } from 'vitepunks-common';\r\nimport { GET_PUNKS_ALL_QUERY } from '../../../../queries';\r\nimport { GetPunksAll } from '../../../../queries/__generated__/GetPunksAll';\r\nimport { MarketplaceBrowseItem } from '../../../marketplace/components/browse-item';\r\n\r\nconst logger = getLogger();\r\n\r\nexport const TestList = () => {\r\n  const [allPunks, setAllPunks] = useState<PunkTypes.Punk[]>([]);\r\n  const [punks, setPunks] = useState<PunkTypes.Punk[]>([]);\r\n\r\n  useQuery<GetPunksAll>(GET_PUNKS_ALL_QUERY, {\r\n    fetchPolicy: 'network-only',\r\n    onCompleted: (data) => {\r\n      setAllPunks(data.punksAll);\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    const ids = new Set([\r\n      1631,\r\n      2105,\r\n      2203,\r\n      3073,\r\n      4171,\r\n      4191,\r\n      6819,\r\n      7552,\r\n      7864,\r\n      8936,\r\n      9650,\r\n      9724\r\n    ]);\r\n    let filtered = [];\r\n    for (const p of allPunks) {\r\n      if (ids.has(parseInt(p.id))) {\r\n        filtered.push(p);\r\n      }\r\n    }\r\n    filtered = filtered.reverse();\r\n    setPunks(filtered);\r\n    logger.info(filtered.length, allPunks.length)();\r\n  }, [allPunks]);\r\n\r\n  return (\r\n    <>\r\n      <Container sx={{ pb: 6 }} maxWidth=\"xl\">\r\n        <Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\" marginBottom={3}>\r\n          {punks.map((p: PunkTypes.Punk) => (\r\n            <Grid item key={p.id} xs={12} sm={6} md={4} lg={3}>\r\n              <MarketplaceBrowseItem item={p}></MarketplaceBrowseItem>\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n","import { Typography } from '@mui/material';\r\nimport React from 'react';\r\nimport { MomentUtil } from '../../../../util/moment.util';\r\n\r\ninterface Props {\r\n  date: string\r\n}\r\n\r\ntype CountdownState = {\r\n  days: number\r\n  hours: number\r\n  minutes: number\r\n  seconds: number\r\n}\r\n\r\nexport const Countdown: React.FC<Props> = (props: Props) => {\r\n  const moment = React.useMemo<MomentUtil>(() => {\r\n    return new MomentUtil();\r\n  }, []);\r\n  const duration = moment.getDuration(props.date);\r\n  const mounted = React.useRef(false);\r\n  const [state, setState] = React.useState<CountdownState>({\r\n    days: duration.days() > 0 ? duration.days() : 0,\r\n    hours: duration.hours() > 0 ? duration.hours() : 0,\r\n    minutes: duration.minutes() > 0 ? duration.minutes() : 0,\r\n    seconds: duration.seconds() > 0 ? duration.seconds() : 0\r\n  });\r\n\r\n  if (duration.asSeconds() > 0) {\r\n    setTimeout(() => {\r\n      const duration = moment.getDuration(props.date);\r\n      if (mounted.current) {\r\n        setState({\r\n          days: duration.days(),\r\n          hours: duration.hours(),\r\n          minutes: duration.minutes(),\r\n          seconds: duration.seconds()\r\n        });\r\n      }\r\n    }, 500);\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Typography variant=\"subtitle1\" color=\"textSecondary\">\r\n      <b>{state.days}</b> days <b>{state.hours}</b> hours <b>{state.minutes}</b> minutes <b>{state.seconds}</b> seconds\r\n    </Typography>\r\n  );\r\n}\r\n","import { orderBy, uniqBy } from \"lodash\";\r\nimport { CommonConstants, CommonUtil, PunkTypes, TransformUtil } from \"vitepunks-common\";\r\nimport { CommonContext, getCommonContext } from \"../contexts/common.context\";\r\n\r\nexport type ContestItem = {\r\n  isPlaceholder: boolean\r\n  address: string\r\n  punkId: number\r\n  rank: number\r\n}\r\n\r\nexport class ContestService {\r\n  private readonly _context: CommonContext;\r\n\r\n  constructor() {\r\n    this._context = getCommonContext();\r\n  }\r\n\r\n  async getRankingsAsync(startTimestamp: number, endTimestamp: number, order: PunkTypes.OrderBy): Promise<ContestItem[]> {\r\n    const _startTimestamp = TransformUtil.toBigNumber(startTimestamp.toString());\r\n    const _endTimestamp = TransformUtil.toBigNumber(endTimestamp.toString());\r\n    const _result = await this._context.datasource.getMarketEventsByTypeAsync(PunkTypes.PunkEventType.Mint.toString(), CommonConstants.TOTAL_MINTS, 0);\r\n    const _items: ContestItem[] = [];\r\n    for (const e of _result.events) {\r\n      if (e.timestamp.lt(_startTimestamp) || e.timestamp.gt(_endTimestamp)) {\r\n        continue;\r\n      }\r\n      if (e.toAddress && !CommonUtil.isNullOrWhitespace(e.toAddress)) {\r\n        const punk = await this._context.datasource.getPunkAsync(e.punkId.toString());\r\n        _items.push({\r\n          isPlaceholder: false,\r\n          address: e.toAddress,\r\n          punkId: e.punkId,\r\n          rank: punk.rank\r\n        })\r\n      }\r\n    }\r\n    const _itemsOrdered = orderBy(\r\n      _items,\r\n      [\r\n        (e: ContestItem) => e.rank\r\n      ],\r\n      [\r\n        order === PunkTypes.OrderBy.ASC ? \"asc\" : \"desc\"\r\n      ]\r\n    );\r\n\r\n    const _itemsFilterd = uniqBy(\r\n      _itemsOrdered,\r\n      (e: ContestItem) => e.address\r\n    );\r\n    return _itemsFilterd;\r\n  }\r\n}\r\n\r\nconst service = new ContestService();\r\n\r\nexport const getContestService = () => {\r\n  return service;\r\n}","import { Box, Chip, Link, Paper, Skeleton, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Typography, useMediaQuery } from \"@mui/material\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { CommonConstants, CommonUtil, PunkTypes } from \"vitepunks-common\";\r\nimport { usePunkById } from \"../../../../hooks/punk.hook\";\r\nimport { ContestItem, ContestService, getContestService } from \"../../../../services/contest.service\";\r\nimport theme from \"../../../../theme\";\r\nimport { MomentUtil } from \"../../../../util/moment.util\";\r\nimport { Countdown } from \"../../../common/components/countdown\";\r\nimport { AddressExplorerLink } from \"../../../common/components/explorer-link\";\r\nimport { PunkImageCard } from \"../../../punk/components/image-common\";\r\n\r\ninterface Props {\r\n  punkId: string\r\n  asc: boolean\r\n  startTimestamp: number\r\n  endTimestamp: number\r\n}\r\n\r\nexport const LandingContest: React.FC<Props> = (props: Props) => {\r\n  const mounted = React.useRef(false);\r\n  const title = \"Bi-weekly contest\";\r\n\r\n  const createPlaceholder = React.useCallback((): ContestItem => {\r\n    return {\r\n      isPlaceholder: true,\r\n      address: \"\",\r\n      punkId: -1,\r\n      rank: -1\r\n    }\r\n  }, []);\r\n  const moment = React.useMemo<MomentUtil>(() => {\r\n    return new MomentUtil();\r\n  }, []);\r\n  const service = React.useMemo<ContestService>(() => {\r\n    return getContestService();\r\n  }, []);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [ranks, setRanks] = useState<ContestItem[]>([\r\n    createPlaceholder(),\r\n    createPlaceholder(),\r\n    createPlaceholder()\r\n  ]);\r\n  const { punk } = usePunkById(props.punkId);\r\n  const date = moment.getFromUnix(props.endTimestamp);\r\n  const matches = useMediaQuery(theme.breakpoints.up(\"md\"));\r\n\r\n  useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const setRanksAsync = async () => {\r\n      const events = await service.getRankingsAsync(props.startTimestamp, props.endTimestamp, props.asc ? PunkTypes.OrderBy.ASC : PunkTypes.OrderBy.DESC);\r\n      if (mounted) {\r\n        setRanks([\r\n          events.length >= 1 ? events[0] : createPlaceholder(),\r\n          events.length >= 2 ? events[1] : createPlaceholder(),\r\n          events.length >= 3 ? events[2] : createPlaceholder()\r\n        ]);\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n    setIsLoading(true);\r\n    setTimeout(() => {\r\n      setRanksAsync();\r\n    }, 2000);\r\n  }, [props, service, createPlaceholder]);\r\n\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n      <Box maxWidth={900}>\r\n        <Paper\r\n          style={{\r\n            backgroundColor: \"rgba(255, 255, 255, 0.5)\"\r\n          }}\r\n        >\r\n          <Box sx={{ display: matches ? \"flex\" : \"inherit\", px: 2, pt: 2, pb: 2, width: \"100%\" }}>\r\n            <PunkImageCard punkId={props.punkId}></PunkImageCard>\r\n            <Box sx={{ flexGrow: 1, ml: matches ? 2 : 0, mt: matches ? 0 : 2 }}>\r\n              <Typography variant=\"h6\" paragraph> {title}</Typography>\r\n              The address minting a punk with the <u>{props.asc ? 'lowest' : 'highest'}</u> rarity rank during this {title.toLowerCase()} will be\r\n              awarded <Link underline=\"hover\" component={RouterLink} to={`/punk/${props.punkId}`} target=\"_blank\">{CommonConstants.PUNK_NAME} #{props.punkId}</Link> with\r\n              rarity rank <Chip size=\"small\" label={punk?.rank} /> when the contest ends.\r\n              <TableContainer component={Box} sx={{ mt: 2 }}>\r\n                <Table>\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell></TableCell>\r\n                      <TableCell>Address</TableCell>\r\n                      <TableCell align=\"right\">Punk</TableCell>\r\n                      <TableCell align=\"right\">Rarity</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {ranks.map((e: ContestItem, index: number) => (\r\n                      <TableRow\r\n                        key={CommonUtil.uuid()}\r\n                        sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\r\n                      >\r\n                        <TableCell component=\"th\" scope=\"row\">\r\n                          {index === 0 && \"\"}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {isLoading ? (\r\n                            <Skeleton animation=\"wave\"></Skeleton>\r\n                          ) : (\r\n                            <>\r\n                              {e.isPlaceholder ? (\r\n                                <>vite_</>\r\n                              ) : (\r\n                                <AddressExplorerLink address={e.address} startPosition={matches ? 10 : 7}></AddressExplorerLink>\r\n                              )}\r\n                            </>\r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell align=\"right\">\r\n                          {isLoading ? (\r\n                            <Skeleton animation=\"wave\"></Skeleton>\r\n                          ) : (\r\n                            <>\r\n                              {e.isPlaceholder ? (\r\n                                <>-</>\r\n                              ) : (\r\n                                <Link underline=\"hover\" component={RouterLink} to={`/punk/${e.punkId}`} target=\"_blank\">#{e.punkId}</Link>\r\n                              )}\r\n                            </>\r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell align=\"right\">\r\n                          {isLoading ? (\r\n                            <Skeleton animation=\"wave\"></Skeleton>\r\n                          ) : (\r\n                            <>\r\n                              {e.isPlaceholder ? (\r\n                                <Chip size=\"small\" label=\"-\" />\r\n                              ) : (\r\n                                <Chip size=\"small\" label={e.rank} />\r\n                              )}\r\n                            </>\r\n                          )}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n              <Paper elevation={3} sx={{ p: 2, textAlign: \"center\", mt: 2 }}>\r\n                <Countdown date={date.toISOString()}></Countdown>\r\n              </Paper>\r\n            </Box>\r\n          </Box>\r\n        </Paper>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import ArrowForwardIosSharpIcon from '@mui/icons-material/ArrowForwardIosSharp';\r\nimport { Accordion as MuiAccordion, AccordionDetails as MuiAccordionDetails, AccordionProps, AccordionSummary as MuiAccordionSummary, AccordionSummaryProps, Box, Link, styled, Typography } from '@mui/material';\r\nimport React from 'react';\r\n\r\nconst Accordion = styled((props: AccordionProps) => (\r\n  <MuiAccordion disableGutters elevation={0} square {...props} />\r\n))(({ theme }) => ({\r\n  border: `1px solid ${theme.palette.divider}`,\r\n  '&:not(:last-child)': {\r\n    borderBottom: 0,\r\n  },\r\n  '&:before': {\r\n    display: 'none',\r\n  },\r\n  backgroundColor:\r\n    theme.palette.mode === 'dark'\r\n      ? 'rgba(0, 0, 0, .2)'\r\n      : 'rgba(255, 255, 255, .2)',\r\n}));\r\n\r\nconst AccordionSummary = styled((props: AccordionSummaryProps) => (\r\n  <MuiAccordionSummary\r\n    expandIcon={<ArrowForwardIosSharpIcon sx={{ fontSize: '0.9rem' }} />}\r\n    {...props}\r\n  />\r\n))(({ theme }) => ({\r\n  backgroundColor:\r\n    theme.palette.mode === 'dark'\r\n      ? 'rgba(255, 255, 255, .05)'\r\n      : 'rgba(0, 0, 0, .03)',\r\n  flexDirection: 'row-reverse',\r\n  '& .MuiAccordionSummary-expandIconWrapper.Mui-expanded': {\r\n    transform: 'rotate(90deg)',\r\n  },\r\n  '& .MuiAccordionSummary-content': {\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nconst AccordionDetails = styled(MuiAccordionDetails)(({ theme }) => ({\r\n  padding: theme.spacing(2),\r\n  borderTop: '1px solid rgba(0, 0, 0, .125)',\r\n}));\r\n\r\nexport const LandingFaq = () => {\r\n  const [faqExpanded, setFaqExpanded] = React.useState<string | false>('faq0');\r\n\r\n  const handleChange = (panel: string) => (event: React.SyntheticEvent, newExpanded: boolean) => {\r\n    setFaqExpanded(newExpanded ? panel : false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" marginBottom={2}>\r\n        <div>\r\n          <Typography variant=\"h5\" color=\"textSecondary\" textAlign=\"center\">\r\n            FAQ\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\" color=\"textSecondary\" textAlign=\"center\">\r\n            Frequently Asked Questions\r\n          </Typography>\r\n        </div>\r\n      </Box>\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n        <Box maxWidth={800}>\r\n          <Accordion expanded={faqExpanded === 'faq0'} onChange={handleChange('faq0')}>\r\n            <AccordionSummary aria-controls=\"faq0-content\" id=\"faq0-header\">\r\n              <Typography>What is the vision behind VitePunks?</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                Our main vision is to develop the best possible marketplace for our punks and maybe open it to other artists at some point, depending on what other NFT marketplaces will be released on Vite in the near future.\r\n                One of our main goals is long-term availability. It is of utmost importance to us to make sure that our punks are as reliably accessible as the <Link underline=\"hover\" href=\"https://www.vite.org/\" target=\"_blank\">Vite chain</Link>.\r\n                All NFT images are stored on <Link underline=\"hover\" href=\"https://ipfs.io/\" target=\"_blank\">IPFS</Link> in addition to our own cloud storage.\r\n                <br></br>\r\n                <br></br>\r\n                The compiled version of this website can be\r\n                cloned and forked on <Link underline=\"hover\" href=\"https://github.com/vitepunks/vitepunks.github.io\" target=\"_blank\">GitHub</Link> or\r\n                accessed by this link <Link underline=\"hover\" href=\"https://vitepunks.github.io/website/\" target=\"_blank\">https://vitepunks.github.io/website/</Link>.\r\n                Everything we do is always with the intention to ensure resiliency and establish a trust relationship.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion expanded={faqExpanded === 'faq1'} onChange={handleChange('faq1')}>\r\n            <AccordionSummary aria-controls=\"faq1-content\" id=\"faq1-header\">\r\n              <Typography>Why is the smart contract not open-source yet?</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                Being pioneers in any space is always coupled with a lot of work, sometimes it gets rewarded, more often not.\r\n                We understand that the situation for some is not satisfactory right now.\r\n                What we can assure is that we will make our smart contract public as soon as another high-quality project delivers something similar to us.\r\n                Maybe this is the wrong approach but ultimately this is actually a really hard decision to make.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion expanded={faqExpanded === 'faq2'} onChange={handleChange('faq2')}>\r\n            <AccordionSummary aria-controls=\"faq2-content\" id=\"faq2-header\">\r\n              <Typography>Where can I download the Vite Wallet App?</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                The Vite App Wallet can be downloaded for <Link underline=\"hover\" href=\"https://play.google.com/store/apps/details?id=net.vite.wallet\" target=\"_blank\">Android</Link>\r\n                &nbsp;or <Link underline=\"hover\" href=\"https://apps.apple.com/ch/app/vite-multi-chain-wallet/id1437629486\" target=\"_blank\">iOS</Link>.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion expanded={faqExpanded === 'faq3'} onChange={handleChange('faq3')}>\r\n            <AccordionSummary aria-controls=\"faq3-content\" id=\"faq3-header\">\r\n              <Typography>How can I connect my wallet on my smartphone?</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                Connecting the wallet on your smartphone can be tricky because it is not possible to scan the QR code currently being displayed on your screen.\r\n                To overcome this limitation detailed instructions can be found in our <Link underline=\"hover\" href=\"https://github.com/vitepunks/resources/wiki/Connect-Wallet\" target=\"_blank\">wiki article</Link>.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion expanded={faqExpanded === 'faq4'} onChange={handleChange('faq4')}>\r\n            <AccordionSummary aria-controls=\"faq4-content\" id=\"faq4-header\">\r\n              <Typography>Is it possible to view my minted punks in my wallet?</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                Before this can be achieved, the Vite community has to agree on a commonly accepted standard.\r\n                Currently it is being worked on as a bounty started by ViteLabs. You can find it <Link underline=\"hover\" href=\"https://gitcoin.co/issue/vitelabs/bounties/18/100027282\" target=\"_blank\">here</Link>.\r\n                So in this sense we are truly similar to the original CryptoPunks project which pioneered the NFT space without having a standard at hand when released.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion expanded={faqExpanded === 'faq5'} onChange={handleChange('faq5')}>\r\n            <AccordionSummary aria-controls=\"faq5-content\" id=\"faq5-header\">\r\n              <Typography>How can I gift/transfer my punk to someone else?</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                This can be achieved by offering your punk for sale for 0 VITE to a specific address. Only this address will be able to claim the punk.\r\n                Just follow the steps described in this <Link underline=\"hover\" href=\"https://github.com/vitepunks/resources/wiki/Gifting\" target=\"_blank\">wiki article</Link>.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n        </Box>\r\n      </Box>\r\n      <Typography variant=\"subtitle1\" color=\"textSecondary\" textAlign=\"center\" marginTop={2}>\r\n        Community articles\r\n      </Typography>\r\n      <Typography variant=\"subtitle2\" color=\"textSecondary\" textAlign=\"center\">\r\n        <Link underline=\"hover\" href=\"https://medium.com/@CPCLinoCrypto/cuestionario-realizado-a-vitepunks-dd6f3e40dae8\" target=\"_blank\">[Spanish]</Link>\r\n        &nbsp;\r\n        <Link underline=\"hover\" href=\"https://medium.com/@CPCLinoCrypto/questionnaire-answered-by-vitepunk-c1a9657c20ec\" target=\"_blank\">[English]</Link>\r\n      </Typography>\r\n    </>\r\n  );\r\n}\r\n","import { Box, LinearProgress, Paper, Skeleton, Typography } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonConstants, FormatUtil } from 'vitepunks-common';\r\n\r\ninterface Props {\r\n  loading: boolean\r\n  mintsRemaining?: Maybe<number>\r\n}\r\n\r\nexport const MintsRemaining: React.FC<Props> = (props: Props) => {\r\n  const [pct, setPct] = useState(100);\r\n\r\n  useEffect(() => {\r\n    if (props.mintsRemaining && props.mintsRemaining > 0) {\r\n      const minValue = props.mintsRemaining === CommonConstants.TOTAL_MINTS ? 100 : 90;\r\n      setPct(Math.min(minValue, props.mintsRemaining / CommonConstants.TOTAL_MINTS * 100));\r\n    } else {\r\n      setPct(100);\r\n    }\r\n  }, [props.mintsRemaining]);\r\n\r\n  return (\r\n    <Paper elevation={3} sx={{ width: \"60%\", textAlign: \"center\", mb: 3 }}>\r\n      <Box sx={{ px: 2, pt: 2, pb: 1.5 }}>\r\n        {props.loading || !props.mintsRemaining ? (\r\n          <Skeleton animation=\"wave\" width=\"50%\"></Skeleton>\r\n        ) : (\r\n          <Typography variant=\"subtitle1\" color=\"textSecondary\">\r\n            <b>{FormatUtil.formatNumber(props.mintsRemaining)}</b> of {FormatUtil.formatNumber(CommonConstants.TOTAL_MINTS)} remaining\r\n          </Typography>\r\n        )}\r\n      </Box>\r\n      <LinearProgress sx={{ height: \"8px\" }} variant=\"determinate\" color={pct <= 40 ? \"error\" : \"primary\"} value={pct} />\r\n    </Paper>\r\n  );\r\n}\r\n","import { Box, Chip, LinearProgress, LinearProgressProps, Link, Paper, Skeleton, Typography, useMediaQuery } from \"@mui/material\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { CommonConstants } from \"vitepunks-common\";\r\nimport { CommonContext, getCommonContext } from \"../../../../contexts/common.context\";\r\nimport { usePunkById } from \"../../../../hooks/punk.hook\";\r\nimport theme from \"../../../../theme\";\r\nimport { MomentUtil } from \"../../../../util/moment.util\";\r\nimport { Countdown } from \"../../../common/components/countdown\";\r\nimport { AddressExplorerLink } from \"../../../common/components/explorer-link\";\r\nimport { PunkImageCard } from \"../../../punk/components/image-common\";\r\n\r\ninterface LinearProgressWithLabelProps extends LinearProgressProps {\r\n  address: string\r\n  label: string\r\n}\r\n\r\nconst LinearProgressWithLabel: React.FC<LinearProgressWithLabelProps> = (props: LinearProgressWithLabelProps) => {\r\n  const matches = useMediaQuery(theme.breakpoints.up(\"md\"));\r\n\r\n  return (\r\n    <Box sx={{ width: \"100%\" }}>\r\n      <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\r\n        {matches && (\r\n          <Box sx={{ mr: 1, minWidth: \"115px\" }}>\r\n            <AddressExplorerLink address={props.address}></AddressExplorerLink>\r\n          </Box>\r\n        )}\r\n        <Box sx={{ width: \"100%\", mr: 1 }}>\r\n          <LinearProgress variant=\"determinate\" sx={{ height: 5 }} {...props} />\r\n        </Box>\r\n        <Box sx={{ minWidth: 35 }}>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">{props.label}</Typography>\r\n        </Box>\r\n      </Box>\r\n      {!matches && (\r\n        <AddressExplorerLink address={props.address}></AddressExplorerLink>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\ntype PunkHolder = {\r\n  address: string\r\n  total: number\r\n  rares: number\r\n}\r\n\r\nexport const LandingRanking = () => {\r\n  const mounted = React.useRef(false);\r\n  const punkId = \"6297\";\r\n  const rankThreshold = 100;\r\n  const moment = React.useMemo<MomentUtil>(() => {\r\n    return new MomentUtil();\r\n  }, []);\r\n  const context = React.useMemo<CommonContext>(() => {\r\n    return getCommonContext();\r\n  }, []);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [maxRares] = useState(19);\r\n  const [ranks, setRanks] = useState<PunkHolder[]>([]);\r\n  const { punk } = usePunkById(punkId);\r\n  const date = moment.getFromUnix(1643673599);\r\n  const matches = useMediaQuery(theme.breakpoints.up(\"md\"));\r\n\r\n  useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const setRanksAsync = async () => {\r\n      const holders: PunkHolder[] = [\r\n        {\r\n          \"address\": \"vite_caaa8d1637482a84e6b4f6af356c176549380ce474669ffb01\",\r\n          \"total\": 824,\r\n          \"rares\": 19\r\n        },\r\n        {\r\n          \"address\": \"vite_abd148025d2fe9ea1fd5643574166022ea0b0805cacc051fb9\",\r\n          \"total\": 594,\r\n          \"rares\": 12\r\n        },\r\n        {\r\n          \"address\": \"vite_aea4e30235ea1782876e066c0c604ef8e15f47b1f4ac8772d1\",\r\n          \"total\": 390,\r\n          \"rares\": 3\r\n        },\r\n        {\r\n          \"address\": \"vite_ceac16d888ad4240c6e345c961bc306e80bf5dc6cdd3432a18\",\r\n          \"total\": 134,\r\n          \"rares\": 3\r\n        },\r\n        {\r\n          \"address\": \"vite_94c2bd05c387d247b5d1b7b3083162456f8c1e2b7493ff3802\",\r\n          \"total\": 207,\r\n          \"rares\": 2\r\n        },\r\n        {\r\n          \"address\": \"vite_fbad469e039e9c44559b8ef6043dbf8c46f117c01cc7f7d44d\",\r\n          \"total\": 104,\r\n          \"rares\": 2\r\n        },\r\n        {\r\n          \"address\": \"vite_e145dcc8c0a93012aa71ebedb03dd251e6ebd57142cb312541\",\r\n          \"total\": 151,\r\n          \"rares\": 1\r\n        }\r\n      ]\r\n      if (mounted) {\r\n        setRanks(holders);\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n    setIsLoading(true);\r\n    setTimeout(() => {\r\n      setRanksAsync();\r\n    }, 2000);\r\n  }, [context.datasource]);\r\n\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n      <Box maxWidth={900}>\r\n        <Paper\r\n          style={{\r\n            backgroundColor: \"rgba(255, 255, 255, 0.5)\"\r\n          }}\r\n        >\r\n          <Box sx={{ display: matches ? \"flex\" : \"inherit\", px: 2, pt: 2, pb: 2, width: \"100%\" }}>\r\n            <PunkImageCard punkId={punkId}></PunkImageCard>\r\n            <Box sx={{ flexGrow: 1, ml: matches ? 2 : 0, mt: matches ? 0 : 2 }}>\r\n              <Typography variant=\"h6\" paragraph> Rarity contest</Typography>\r\n              The address owning the most rare punks below rank {rankThreshold} when the contest ends will be\r\n              awarded <Link underline=\"hover\" component={RouterLink} to={`/punk/${punkId}`} target=\"_blank\">{CommonConstants.PUNK_NAME} #{punkId}</Link> with\r\n              rarity rank <Chip size=\"small\" label={punk?.rank} />\r\n              <br></br>\r\n              In case 2 or more addresses own the same amount of rare punks, the address with overall more punks will be awarded.\r\n              <Box sx={{ mt: 3 }}>\r\n                {isLoading ? (\r\n                  <>\r\n                    <Skeleton animation=\"wave\"></Skeleton>\r\n                    <Skeleton animation=\"wave\" sx={{ mt: 0.5 }}></Skeleton>\r\n                    <Skeleton animation=\"wave\" sx={{ mt: 0.5 }}></Skeleton>\r\n                    <Skeleton animation=\"wave\" sx={{ mt: 0.5 }}></Skeleton>\r\n                    <Skeleton animation=\"wave\" sx={{ mt: 0.5 }}></Skeleton>\r\n                    <Skeleton animation=\"wave\" sx={{ mt: 0.5 }}></Skeleton>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    {ranks.map((e: PunkHolder) => (\r\n                      <LinearProgressWithLabel key={e.address} value={e.rares / maxRares * 100} label={e.rares.toString()} address={e.address}></LinearProgressWithLabel>\r\n                    ))}\r\n                  </>\r\n                )}\r\n              </Box>\r\n              <Paper elevation={3} sx={{ p: 2, textAlign: \"center\", mt: 3 }}>\r\n                <Countdown date={date.toISOString()}></Countdown>\r\n              </Paper>\r\n            </Box>\r\n          </Box>\r\n        </Paper>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport { faDiscord, faGithub, faTwitter } from '@fortawesome/free-brands-svg-icons';\r\nimport { Box, Button, Container, Grid, IconButton, Link, Paper, Stack, Typography } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { CommonConstants, getEmitter, getLogger, PunkTypes, TokenUtil } from 'vitepunks-common';\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { GET_MARKET_INFO_QUERY } from '../../../../queries';\r\nimport { GetMarketInfo } from '../../../../queries/__generated__/GetMarketInfo';\r\nimport { getPunkService } from '../../../../services/punk.service';\r\nimport { MomentUtil } from '../../../../util/moment.util';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\nimport { Countdown } from '../../../common/components/countdown';\r\nimport { FontAwesomeSvgIcon } from '../../../common/components/fa-icon';\r\nimport { LandingContest } from '../contest';\r\nimport { LandingFaq } from '../faq';\r\nimport { MintsRemaining } from '../mints-remaining';\r\nimport { LandingRanking } from '../ranking';\r\n\r\nconst logger = getLogger();\r\n\r\nexport const LandingMain = () => {\r\n  const moment = React.useMemo<MomentUtil>(() => {\r\n    return new MomentUtil();\r\n  }, []);\r\n  const date = moment.getLocal(\"2021-12-21T17:00:00+0000\");\r\n\r\n  const mounted = React.useRef(false);\r\n  const [mintPrice, setMintPrice] = useState<PunkTypes.DisplayBigNumber>({\r\n    number: new PunkTypes.BigNumberWrapper(\"0\"),\r\n    displayNumber: \"0\"\r\n  });\r\n  const [marketStarted, setMarketStarted] = useState(false);\r\n  const [canMint, setCanMint] = useState(false);\r\n  const [mintsRemaining, setMintsRemaining] = useState<Maybe<number>>(undefined);\r\n  const emitter = getEmitter();\r\n  const punkService = getPunkService();\r\n\r\n  const query = useQuery<GetMarketInfo>(GET_MARKET_INFO_QUERY, {\r\n    fetchPolicy: 'network-only'\r\n  });\r\n\r\n  const refetch = query.refetch;\r\n\r\n  useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (state: PunkTypes.DocumentState) => {\r\n      if (state === PunkTypes.DocumentState.Active) {\r\n        logger.info(\"Refreshing market info\")();\r\n        refetch();\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    };\r\n  }, [emitter, refetch]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.MarketChangedEvent) => {\r\n      logger.info(`eventType: ${e.eventType} amount: ${e.value.toFixed()} timestamp: ${e.timestamp.toFixed()}`)();\r\n      refetch();\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.MarketChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.MarketChanged, handleEvent);\r\n    };\r\n  }, [emitter, refetch]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.PunkChangedEvent) => {\r\n      logger.info(`eventType: ${e.eventType} punkId: ${e.punkId} amount: ${e.amount?.toFixed()} fromAddress: ${e.fromAddress} toAddress: ${e.toAddress} timestamp: ${e.timestamp.toFixed()}`)();\r\n      refetch();\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.PunkChanged, handleEvent)\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    };\r\n  }, [emitter, refetch]);\r\n\r\n  useEffect(() => {\r\n    const info = query.data?.marketInfo;\r\n    if (info && mounted.current) {\r\n      setMintPrice({\r\n        number: new PunkTypes.BigNumberWrapper(info.mintPrice),\r\n        displayNumber: TokenUtil.formatVite(new PunkTypes.BigNumberWrapper(info.mintPrice))\r\n      });\r\n      setMarketStarted(info.marketStarted);\r\n      setCanMint(info.marketStarted && info.mintsRemaining > 0);\r\n      setMintsRemaining(info.mintsRemaining);\r\n    }\r\n  }, [query.data]);\r\n\r\n  const handleMintAsync = async () => {\r\n    try {\r\n      const result = await punkService.mintAsync();\r\n      if (result) {\r\n        SnackbarUtil.enqueueMessage(\"Mint success\");\r\n      } else {\r\n        SnackbarUtil.enqueueError(\"Mint failed\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(error)();\r\n      SnackbarUtil.enqueueError(error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"lg\" sx={{ mt: 10 }}>\r\n      <Grid container spacing={3} direction=\"row\" justifyContent=\"center\" alignItems=\"center\" marginBottom={3}>\r\n        <Grid item sm={12} md={6}>\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <div>\r\n              <Typography variant=\"h3\" color=\"primary\">\r\n                {ClientConstants.APP_NAME}\r\n              </Typography>\r\n              <Typography variant=\"subtitle1\" color=\"textSecondary\" paragraph>\r\n                The very first NFT collection powered by <Link underline=\"hover\" href=\"https://www.vite.org/\" target=\"_blank\">Vite chain</Link>. Now is your chance to make Vite history and become owner of an isometric punk.\r\n                Get yourself ready for the metaverse.\r\n                {!marketStarted ? (\r\n                  <>\r\n                    &nbsp;Minting will open in:\r\n                  </>\r\n\r\n                ) : (\r\n                  <>\r\n                    &nbsp;Mint a punk for {mintPrice.displayNumber} {CommonConstants.CURRENCY_NAME} now!\r\n                  </>\r\n                )}\r\n              </Typography>\r\n              {!marketStarted ? (\r\n                <Paper elevation={3} sx={{ p: 2, width: \"60%\", textAlign: \"center\", mb: 3 }}>\r\n                  <Countdown date={date.toISOString()}></Countdown>\r\n                </Paper>\r\n              ) : (\r\n                <MintsRemaining loading={query.loading} mintsRemaining={mintsRemaining}></MintsRemaining>\r\n              )}\r\n              <Stack spacing={2} direction=\"row\">\r\n                <ClickOnceButton variant=\"contained\" color=\"primary\" callbackFn={handleMintAsync} sx={{ minWidth: \"100px\" }} disabled={!canMint}>\r\n                  Mint\r\n                </ClickOnceButton>\r\n                <Button variant=\"outlined\" color=\"primary\" component={RouterLink} to='/marketplace'>\r\n                  Browse\r\n                </Button>\r\n              </Stack>\r\n            </div>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item sm={12} md={6}>\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            {/* <LandingMainImage></LandingMainImage> */}\r\n            <video width=\"100%\" preload='' autoPlay muted playsInline loop style={{ opacity: \"0.8\" }}>\r\n              <source src={CommonConstants.CDN_URL + 'videos/landing_640x360_2.mp4'} type=\"video/mp4\"></source>\r\n            </video>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} marginTop={10}>\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Typography variant=\"subtitle1\" color=\"textSecondary\">\r\n              Connect with us\r\n            </Typography>\r\n          </Box>\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Stack spacing={2} direction=\"row\">\r\n              <IconButton aria-label=\"Twitter\" href={ClientConstants.TWITTER_URL} target=\"_blank\">\r\n                <FontAwesomeSvgIcon icon={faTwitter} />\r\n              </IconButton>\r\n              <IconButton aria-label=\"GitHub\" href={ClientConstants.GITHUB_URL} target=\"_blank\">\r\n                <FontAwesomeSvgIcon icon={faGithub} />\r\n              </IconButton>\r\n              <IconButton aria-label=\"Discord\" href={ClientConstants.DISCORD_URL} target=\"_blank\">\r\n                <FontAwesomeSvgIcon icon={faDiscord} />\r\n              </IconButton>\r\n            </Stack>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} marginTop={10}>\r\n          <LandingContest punkId=\"2306\" startTimestamp={1644066000} endTimestamp={1645275600} asc={true}></LandingContest>\r\n        </Grid>\r\n        <Grid item xs={12} marginTop={10}>\r\n          <LandingRanking></LandingRanking>\r\n        </Grid>\r\n        <Grid item xs={12} marginTop={10}>\r\n          <LandingFaq></LandingFaq>\r\n        </Grid>\r\n        <Grid item xs={12} marginTop={2}>\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Box maxWidth={800}>\r\n              <img width=\"100%\" alt=\"main\" src={ClientConstants.LANDING_IMAGE_URL}></img>\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} marginTop={1}>\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <div>\r\n              <Typography variant=\"h5\" color=\"textSecondary\" textAlign=\"center\" paragraph>\r\n                Disclaimer\r\n              </Typography>\r\n              <Typography variant=\"subtitle1\" color=\"textSecondary\" textAlign=\"center\" paragraph>\r\n                The intention of {ClientConstants.APP_NAME} is to showcase the capabilities of\r\n                the <Link underline=\"hover\" href=\"https://www.vite.org/\" target=\"_blank\">Vite chain</Link>. {ClientConstants.APP_NAME} is not affiliated with CryptoPunks and LarvaLabs.\r\n                The value of a {CommonConstants.PUNK_NAME} is not related to the value of a CryptoPunk. {ClientConstants.APP_NAME} is a homage to the CryptoPunk project of LarvaLabs.\r\n                With {ClientConstants.APP_NAME} we thank LarvaLabs for their pioneering and for creating the CryptoPunk project. The project that basically started the ever growing NFT movement.\r\n\r\n                {marketStarted && mintPrice.number.gt(0) && (\r\n                  <>\r\n                    &nbsp;Why mint for {mintPrice.displayNumber} {CommonConstants.CURRENCY_NAME}?\r\n                    The minting of {ClientConstants.APP_NAME} is set at {mintPrice.displayNumber} {CommonConstants.CURRENCY_NAME}.\r\n                    This means that during the initial minting phase, you will be able to generate a random punk for {mintPrice.displayNumber} {CommonConstants.CURRENCY_NAME}.\r\n                    When all 10,000 Punks are minted, you can get a Punk by using the marketplace.\r\n\r\n                    That the minting is set at {mintPrice.displayNumber} {CommonConstants.CURRENCY_NAME} has a couple of reasons. As you know, keeping up, maintaining and further developing a system costs money.\r\n                    We want to keep {ClientConstants.APP_NAME} running for years to come and we hope to integrate {ClientConstants.APP_NAME} with other NFT marketplaces in the near future.\r\n                  </>\r\n                )}\r\n              </Typography>\r\n            </div>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Container >\r\n  );\r\n}\r\n","import { ecLevel, modes, qrcode } from 'qrcode.es';\r\nimport React, { useEffect, useRef } from 'react';\r\n\r\ninterface Props {\r\n  text?: string\r\n}\r\n\r\nexport const QrCode: React.FC<Props> = (props: Props) => {\r\n  const elementRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const defaultOpt = {\r\n      size: 240,\r\n      ecLevel: ecLevel.HIGH,\r\n      minVersion: 4,\r\n      background: '#fff',\r\n      mode: modes.DRAW_WITH_IMAGE_BOX,\r\n      radius: 0,\r\n      image: process.env.PUBLIC_URL + '/assets/images/logo640.png',\r\n      mSize: 0.3\r\n    };\r\n\r\n    if (props.text && elementRef.current) {\r\n      defaultOpt.size = Math.min(240, elementRef.current.clientWidth - 10);\r\n      elementRef.current.innerHTML = ''\r\n      const q = new qrcode(elementRef.current);\r\n      q.generate(props.text, defaultOpt).then(() => {\r\n        console.log('QR code generated')\r\n      });\r\n    }\r\n  }, [props.text])\r\n\r\n  return (\r\n    <div ref={elementRef}></div>\r\n  );\r\n}\r\n","import { Button, Dialog, DialogContent, DialogContentText, DialogTitle, FormControl, Input, InputLabel, Link, Typography } from '@mui/material';\r\nimport { Box } from '@mui/system';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonUtil, getEmitter, getLogger, PunkTypes } from 'vitepunks-common';\r\nimport { getClientConfig } from '../../../../common/config';\r\nimport { getCommonContext } from '../../../../contexts/common.context';\r\nimport { getWalletManager } from '../../../../storage/wallet.storage';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { WalletConnectorFactory } from '../../../../wallet/factory';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\nimport { QrCode } from '../qrcode';\r\n\r\nconst logger = getLogger();\r\n\r\ninterface Props {\r\n  open: boolean;\r\n  setOpen: React.Dispatch<React.SetStateAction<boolean>>;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const LoginDialog: React.FC<Props> = (props: Props) => {\r\n  const [uri, setUri] = useState<string>(\"\");\r\n  const [error, setError] = useState(false);\r\n  const [mnemonic, setMnemonic] = useState<Maybe<string>>(undefined);\r\n  const { onClose, open, setOpen } = props;\r\n  const context = getCommonContext();\r\n  const walletManager = getWalletManager();\r\n  const emitter = getEmitter();\r\n  const connectorFactory = React.useMemo<WalletConnectorFactory>(() => {\r\n    return new WalletConnectorFactory(walletManager);\r\n  }, [walletManager]);\r\n  const handleCreateSession = React.useCallback(async () => {\r\n    try {\r\n      const connector = await connectorFactory.createAsync(context.network);\r\n      logger.info(connector.uri)();\r\n      setUri(connector.uri);\r\n      setError(false);\r\n    } catch (error) {\r\n      logger.error(error)();\r\n      setError(true);\r\n    }\r\n  }, [connectorFactory, context.network]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (open: boolean) => {\r\n      setOpen(open)\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.ConnectWalletDialog, handleEvent)\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.ConnectWalletDialog, handleEvent)\r\n      setUri(\"\");\r\n      setError(false);\r\n    };\r\n  }, [emitter, setOpen]);\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      setMnemonic(undefined);\r\n      handleCreateSession();\r\n    }\r\n  }, [open, handleCreateSession]);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n  };\r\n\r\n  const handleMnemonicChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setMnemonic(event.target.value);\r\n  };\r\n\r\n  const handleLogin = () => {\r\n    const wallet = walletManager.createWebWallet(CommonUtil.isNullOrWhitespace(mnemonic) ? process.env.REACT_APP_MNEMONIC ?? \"\" : mnemonic ?? \"\");\r\n    if (!wallet) {\r\n      SnackbarUtil.enqueueError('Invalid mnemonic');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={open} maxWidth=\"xs\">\r\n      <DialogTitle>Connect Wallet</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          Scan the QR code via Vite Wallet App\r\n        </DialogContentText>\r\n        <Box sx={{ mt: 2, textAlign: \"center\" }}>\r\n          {CommonUtil.isNullOrWhitespace(uri) ? (\r\n            <>\r\n              {error ? (\r\n                <>\r\n                  <Typography gutterBottom>Error</Typography>\r\n                  <ClickOnceButton variant=\"outlined\" callbackFn={handleCreateSession}>Retry</ClickOnceButton>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  Loading...\r\n                </>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <QrCode text={uri}></QrCode>\r\n          )}\r\n          <DialogContentText marginTop={1}>\r\n            Don't have the Vite Wallet App? <Link underline=\"hover\" href=\"https://vite.org/airdrop\" target=\"_blank\">Download here</Link>\r\n          </DialogContentText>\r\n        </Box>\r\n        {getClientConfig().ENABLE_MNEMONIC_LOGIN && (\r\n          <Box sx={{ mt: 2, textAlign: \"center\" }}>\r\n            <FormControl fullWidth variant=\"standard\" >\r\n              <InputLabel htmlFor=\"mnemonic\">Mnemonic</InputLabel>\r\n              <Input\r\n                id=\"mnemonic\"\r\n                value={mnemonic}\r\n                onChange={handleMnemonicChange}\r\n                type=\"text\"\r\n                autoComplete=\"new-password\"\r\n              />\r\n            </FormControl>\r\n            <Button variant=\"contained\" sx={{ mt: 1 }} onClick={handleLogin}>Use test account</Button>\r\n          </Box>\r\n        )}\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n","import AccountCircleTwoToneIcon from '@mui/icons-material/AccountCircleTwoTone';\r\nimport LogoutIcon from '@mui/icons-material/Logout';\r\nimport ShoppingCartIcon from '@mui/icons-material/ShoppingCart';\r\nimport { AppBar, Button, Chip, styled, Toolbar, Typography, useMediaQuery, useTheme } from '@mui/material';\r\nimport React from 'react';\r\nimport { Link as RouterLink, useNavigate } from 'react-router-dom';\r\nimport { CommonUtil } from \"vitepunks-common\";\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\r\nimport { ExtendedBootstrapTooltip } from '../../../common/components/tooltip';\r\nimport { LoginDialog } from '../../../main/components/login';\r\n\r\nconst Root = styled('div')(\r\n  ({ theme }) => `\r\n  flex-grow: 1;\r\n`);\r\n\r\nconst TitleTypography = styled(Typography)(\r\n  ({ theme }) => `\r\n  flex-grow: 1;\r\n  margin-left: 10px !important;\r\n`);\r\n\r\nexport const Header: React.FC = (props: any) => {\r\n  const navigate = useNavigate();\r\n  const theme = useTheme();\r\n  const matches = useMediaQuery(theme.breakpoints.up('sm'));\r\n  const context = useConnectedWeb3Context();\r\n  const [loginOpen, setLoginOpen] = React.useState(false);\r\n\r\n  const handleClickLogin = () => {\r\n    setLoginOpen(true);\r\n  };\r\n\r\n  const handleClickLogout = () => {\r\n    context.logout();\r\n  };\r\n\r\n  const handleLoginClose = () => {\r\n    setLoginOpen(false);\r\n  };\r\n\r\n  const truncateAddress = (address?: string) => {\r\n    return CommonUtil.truncateStringInTheMiddle(address, 10, 5)\r\n  }\r\n\r\n  const showAccount = () => {\r\n    navigate(`/account/${context.account}`);\r\n  }\r\n\r\n  return (\r\n    <Root>\r\n      <AppBar position=\"static\" color=\"transparent\">\r\n        <Toolbar>\r\n          <a href=\"./\" style={{ height: \"40px\" }}>\r\n            <img src={\"./assets/images/logo640.png\"} alt=\"logo\" width=\"40\" />\r\n          </a>\r\n          <TitleTypography variant=\"h6\" color=\"#fff\">\r\n            <a href=\"./\" style={{ color: \"inherit\", textDecoration: \"inherit\" }}>\r\n              {ClientConstants.APP_NAME}\r\n            </a>\r\n          </TitleTypography>\r\n          <Button sx={{ mr: 2 }} component={RouterLink} to='/marketplace'>\r\n            {matches ? (\r\n              <>\r\n                Marketplace\r\n              </>\r\n            ) : (\r\n              <ShoppingCartIcon />\r\n            )}\r\n          </Button>\r\n          {context.account ? (\r\n            <>\r\n              <ExtendedBootstrapTooltip sx={{ mr: 1 }} title={\r\n                <React.Fragment>\r\n                  <p>{context.account}</p>\r\n                </React.Fragment>\r\n              } placement=\"bottom\" arrow>\r\n                {matches ? (\r\n                  <Chip icon={<AccountCircleTwoToneIcon />} label={truncateAddress(context.account)} variant=\"outlined\" onClick={showAccount} />\r\n                ) : (\r\n                  <Button color=\"inherit\" onClick={showAccount}>\r\n                    <AccountCircleTwoToneIcon />\r\n                  </Button>\r\n                )}\r\n              </ExtendedBootstrapTooltip>\r\n              <Button color=\"inherit\" onClick={handleClickLogout}>\r\n                <LogoutIcon />\r\n              </Button>\r\n            </>\r\n          ) : (\r\n            <Button variant=\"contained\" color=\"primary\" onClick={handleClickLogin}>\r\n              Connect wallet\r\n            </Button>\r\n          )}\r\n          <LoginDialog open={loginOpen} setOpen={setLoginOpen} onClose={handleLoginClose}></LoginDialog>\r\n        </Toolbar>\r\n      </AppBar >\r\n    </Root >\r\n  )\r\n}","import { useQuery } from '@apollo/client';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Avatar, Grid, Link, Paper, styled, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from '@mui/material';\r\nimport React from 'react';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { ActionName, CommonConstants, CommonUtil, PunkEventTypes, PunkTypes, TokenUtil, UrlUtil } from \"vitepunks-common\";\r\nimport { getClientConfig } from '../../../../common/config';\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { GET_PUNK_QUERY } from '../../../../queries';\r\nimport { GetPunk, GetPunkVariables } from '../../../../queries/__generated__/GetPunk';\r\nimport { IconUtil } from '../../../../util/icon.util';\r\nimport { MomentUtil } from '../../../../util/moment.util';\r\nimport { EventListLoading } from '../event-list-loading';\r\nimport { ExplorerLink, ExplorerLinkType } from '../explorer-link';\r\nimport { ExtendedBootstrapTooltip } from '../tooltip';\r\n\r\ninterface EventTableRowProps {\r\n  item: PunkTypes.PunkEvent\r\n}\r\n\r\nconst CustomAvatar = styled(Avatar)(({ theme }) => (`\r\n  background-image: url('${ClientConstants.ITEM_BG_URL}');\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  image-rendering: pixelated;\r\n  margin-right: 10px;\r\n`));\r\n\r\nconst CustomTableCell = styled(TableCell)(({ theme }) => (`\r\n  background-color: rgba(255, 255, 255, 0.3);\r\n`));\r\n\r\nconst EventTableRow: React.FC<EventTableRowProps> = (props: EventTableRowProps) => {\r\n  const query = useQuery<GetPunk, GetPunkVariables>(GET_PUNK_QUERY, {\r\n    variables: {\r\n      id: props.item.punkId.toString()\r\n    },\r\n    fetchPolicy: 'network-only'\r\n  });\r\n  const momentUtil = new MomentUtil();\r\n\r\n  const formatTimestamp = (timestamp: any) => {\r\n    return momentUtil.getLocalReverseFormatted(momentUtil.getFromUnix(timestamp));\r\n  }\r\n\r\n  const formatViteTooltip = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatViteTooltip(bn);\r\n  }\r\n\r\n  const formatVite = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatVite(bn);\r\n  }\r\n\r\n  const isPreMint = () => {\r\n    const clientConfig = getClientConfig();\r\n    if (props.item.eventType !== PunkTypes.PunkEventType.Mint || !clientConfig.PRE_MINT_HEIGHT) {\r\n      return false;\r\n    }\r\n    return props.item.accountBlockHeight.lte(clientConfig.PRE_MINT_HEIGHT);\r\n  }\r\n\r\n  const getEventName = (): string => {\r\n    const eventType = props.item.eventType as PunkTypes.PunkEventType;\r\n    switch (eventType) {\r\n      case PunkTypes.PunkEventType.Offer:\r\n        if (!props.item.amount || props.item.amount.lte(0)) {\r\n          return ActionName.gift;\r\n        }\r\n        break;\r\n      case PunkTypes.PunkEventType.Buy:\r\n        if (!props.item.amount || props.item.amount.lte(0)) {\r\n          return ActionName.transfer;\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return PunkEventTypes[props.item.eventType].name;\r\n  }\r\n\r\n  return (\r\n    <TableRow sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\r\n      <TableCell component=\"th\" scope=\"row\">\r\n        <FontAwesomeIcon icon={IconUtil.getPunkEventTypeIcon(props.item.eventType as PunkTypes.PunkEventType, props.item.amount)} /> <b>{getEventName()}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Link underline=\"hover\" component={RouterLink} to={`/punk/${props.item.punkId}`} display=\"flex\" alignItems=\"center\">\r\n          <CustomAvatar variant=\"rounded\" src={UrlUtil.getPunkUrl(query.data?.punk.image, query.data?.punk.cid)}>\r\n          </CustomAvatar>\r\n          {CommonConstants.PUNK_NAME} #{props.item.punkId}\r\n        </Link>\r\n      </TableCell>\r\n      <TableCell>\r\n        {props.item.amount?.gt(0) ? (\r\n          <>\r\n            <ExtendedBootstrapTooltip title={formatViteTooltip(props.item.amount)}>\r\n              <span>{formatVite(props.item.amount)}</span>\r\n            </ExtendedBootstrapTooltip>\r\n          </>\r\n        ) : (\r\n          <>\r\n          </>\r\n        )}\r\n      </TableCell>\r\n      <TableCell>\r\n        <ExplorerLink type={ExplorerLinkType.Address} value={props.item.fromAddress}>\r\n          <ExtendedBootstrapTooltip title={props.item.fromAddress ?? \"\"}>\r\n            <span>{CommonUtil.truncateStringInTheMiddle(props.item.fromAddress, 10, 5)}</span>\r\n          </ExtendedBootstrapTooltip>\r\n        </ExplorerLink>\r\n      </TableCell>\r\n      <TableCell>\r\n        <ExplorerLink type={ExplorerLinkType.Address} value={props.item.toAddress}>\r\n          <ExtendedBootstrapTooltip title={props.item.toAddress ?? \"\"}>\r\n            <span>{CommonUtil.truncateStringInTheMiddle(props.item.toAddress, 10, 5)}</span>\r\n          </ExtendedBootstrapTooltip>\r\n        </ExplorerLink>\r\n      </TableCell>\r\n      <TableCell align=\"right\">\r\n        {isPreMint() ? (\r\n          <>\r\n            {formatTimestamp(props.item.timestamp.toFixed())}\r\n          </>\r\n        ) : (\r\n          <ExplorerLink type={ExplorerLinkType.Transaction} value={props.item.accountBlockHash}>\r\n            {formatTimestamp(props.item.timestamp.toFixed())}\r\n          </ExplorerLink>\r\n        )}\r\n      </TableCell>\r\n    </TableRow>\r\n  )\r\n}\r\n\r\ninterface Props {\r\n  events: PunkTypes.PunkEvent[]\r\n  newEvents: PunkTypes.PunkEvent[]\r\n  error: any\r\n  loading: boolean\r\n  hasMore: boolean\r\n  height?: number\r\n  fetchMoreDataAsync(): Promise<void>\r\n}\r\n\r\nexport const EventList: React.FC<Props> = (props: Props) => {\r\n  const emptyMessage = \"No activity yet\";\r\n  return (\r\n    <Paper\r\n      id=\"event-list\"\r\n      style={{\r\n        height: props.height ?? 300,\r\n        overflow: 'auto',\r\n        backgroundColor: 'rgba(255, 255, 255, 0.5)'\r\n      }}\r\n    >\r\n      {props.newEvents.length > 0 || props.events.length > 0 ? (\r\n        <InfiniteScroll\r\n          dataLength={props.events.length ?? 0}\r\n          next={props.fetchMoreDataAsync}\r\n          hasMore={props.hasMore}\r\n          loader={\r\n            <Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n              <EventListLoading loading={props.loading} error={props.error} count={props.events.length} message={emptyMessage}></EventListLoading>\r\n            </Grid>\r\n          }\r\n          scrollableTarget=\"event-list\"\r\n        >\r\n          <TableContainer>\r\n            <Table stickyHeader>\r\n              <TableHead>\r\n                <TableRow>\r\n                  <CustomTableCell></CustomTableCell>\r\n                  <CustomTableCell><b>Punk</b></CustomTableCell>\r\n                  <CustomTableCell><b>Amount</b></CustomTableCell>\r\n                  <CustomTableCell><b>From</b></CustomTableCell>\r\n                  <CustomTableCell><b>To</b></CustomTableCell>\r\n                  <CustomTableCell align=\"right\"><b>Date</b></CustomTableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {props.newEvents.map((e: PunkTypes.PunkEvent) => (\r\n                  <EventTableRow key={`new-events-${e.id}`} item={e} />\r\n                ))}\r\n                {props.events.map((e: PunkTypes.PunkEvent) => (\r\n                  <EventTableRow key={`events-${e.id}`} item={e} />\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </InfiniteScroll>) : (\r\n        <Grid sx={{ height: \"100%\" }} container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n          <EventListLoading loading={props.loading} error={props.error} count={props.events.length} message={emptyMessage}></EventListLoading>\r\n        </Grid>\r\n      )}\r\n    </Paper>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { getEmitter, getLogger, PunkTypes, TransformUtil } from 'vitepunks-common';\r\nimport { GET_MARKET_EVENTS_QUERY } from '../../../../queries';\r\nimport { GetMarketEvents, GetMarketEventsVariables } from '../../../../queries/__generated__/GetMarketEvents';\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { EventList } from '../../../common/components/event-list';\r\n\r\nconst logger = getLogger();\r\n\r\nexport const MarketplaceBrowseActivity: React.FC = (props: any) => {\r\n  const limit = 8;\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [error, setError] = useState<any>(undefined);\r\n  const [events, setEvents] = useState<PunkTypes.PunkEvent[]>([]);\r\n  const [newEvents, setNewEvents] = useState<PunkTypes.PunkEvent[]>([]);\r\n  const service = getMarketService();\r\n  const emitter = getEmitter();\r\n\r\n  const query = useQuery<GetMarketEvents, GetMarketEventsVariables>(GET_MARKET_EVENTS_QUERY, {\r\n    variables: {\r\n      offset: 0,\r\n      limit: limit\r\n    },\r\n    fetchPolicy: 'network-only',\r\n    onCompleted: (data) => {\r\n      setEvents(data.marketEvents.events.map(e => TransformUtil.toPunkEvent(e)));\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsLoading(query.loading);\r\n  }, [query.loading]);\r\n\r\n  useEffect(() => {\r\n    setError(query.error);\r\n  }, [query.error]);\r\n\r\n  const fetchMoreDataAsync = async () => {\r\n    logger.info(\"fetchMoreDataAsync\", events.length)();\r\n    const blockHeight: Maybe<string> = query.data?.marketEvents.blockHeight.toString();\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await service.getEventsAsync(events.length, limit, blockHeight);\r\n      setHasMore(result.data.marketEvents.events.length >= limit);\r\n      if (result.data.marketEvents.events.length > 0) {\r\n        setEvents([\r\n          ...events,\r\n          ...result.data.marketEvents.events.map(e => TransformUtil.toPunkEvent(e))\r\n        ]);\r\n      }\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const refetch = query.refetch;\r\n\r\n  const refresh = useCallback(() => {\r\n    logger.info(\"Refreshing market activity\")();\r\n    refetch();\r\n    setNewEvents([]);\r\n  }, [refetch]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (state: PunkTypes.DocumentState) => {\r\n      if (state === PunkTypes.DocumentState.Active) {\r\n        refresh();\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    };\r\n  }, [emitter, refresh]);\r\n\r\n  const addNewEvent = useCallback((e: PunkTypes.PunkChangedEvent) => {\r\n    setNewEvents([\r\n      TransformUtil.toPunkEvent(e),\r\n      ...newEvents\r\n    ]);\r\n  }, [newEvents]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.PunkChangedEvent) => {\r\n      logger.info(\"newMarketEvent\", e)();\r\n      addNewEvent(e);\r\n    }\r\n    logger.info('emitter.on', PunkTypes.GlobalEvent.PunkChanged)();\r\n    emitter.on(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    return () => {\r\n      logger.info('emitter.off', PunkTypes.GlobalEvent.PunkChanged)();\r\n      emitter.off(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    };\r\n  }, [emitter, addNewEvent]);\r\n\r\n  return (\r\n    <EventList\r\n      events={events}\r\n      newEvents={newEvents}\r\n      error={error}\r\n      loading={isLoading}\r\n      hasMore={hasMore}\r\n      height={500}\r\n      fetchMoreDataAsync={fetchMoreDataAsync}>\r\n    </EventList>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport SortIcon from '@mui/icons-material/Sort';\r\nimport { Autocomplete, FormControl, FormGroup, Grid, InputLabel, MenuItem, Select, SelectChangeEvent, Stack, TextField, ToggleButton, ToggleButtonGroup } from '@mui/material';\r\nimport React, { SyntheticEvent, useState } from 'react';\r\nimport { DefaultPunkFilterValues, getEmitter, PunkSortTypes, PunkTypes } from 'vitepunks-common';\r\nimport { GET_PUNK_ATTRIBUTES_QUERY } from '../../../../queries';\r\nimport { GetPunkAttributes } from '../../../../queries/__generated__/GetPunkAttributes';\r\n\r\nexport const MarketplaceBrowseItemsFilter: React.FC = () => {\r\n  const [values, setValues] = useState<PunkTypes.PunkFilterValues>(DefaultPunkFilterValues);\r\n  const emitter = getEmitter();\r\n\r\n  const attributesQuery = useQuery<GetPunkAttributes>(GET_PUNK_ATTRIBUTES_QUERY, {\r\n    fetchPolicy: 'network-only'\r\n  });\r\n\r\n  const emitEvent = (oldValues: PunkTypes.PunkFilterValues, newValues: PunkTypes.PunkFilterValues) => {\r\n    emitter.emitPunkFilterValuesChanged(oldValues, newValues);\r\n  }\r\n\r\n  const handleSortByChange = (event: SelectChangeEvent) => {\r\n    const newValues: PunkTypes.PunkFilterValues = { ...values, sortBy: event.target.value as PunkTypes.PunkSortBy };\r\n    setValues(newValues);\r\n    emitEvent(values, newValues);\r\n  };\r\n\r\n  const handleSearchChange = (event: SyntheticEvent<Element, Event>, value: string[]) => {\r\n    const newValues: PunkTypes.PunkFilterValues = { ...values, search: value.join(',') };\r\n    setValues(newValues);\r\n    emitEvent(values, newValues);\r\n  };\r\n\r\n  const handleCheckedChange = (event: React.MouseEvent<HTMLElement, MouseEvent>, value: any) => {\r\n    const newValues: PunkTypes.PunkFilterValues = { ...values, orderBy: value };\r\n    setValues(newValues);\r\n    emitEvent(values, newValues);\r\n  };\r\n\r\n  return (\r\n    <Grid container sx={{ mb: 2 }} spacing={3}>\r\n      <Grid item md={3}></Grid>\r\n      <Grid item xs={12} md={6}>\r\n        <Autocomplete\r\n          multiple\r\n          freeSolo\r\n          id=\"search-autocomplete\"\r\n          options={attributesQuery.data?.punkAttributes ?? []}\r\n          getOptionLabel={(option) => option}\r\n          size=\"small\"\r\n          fullWidth={true}\r\n          onChange={handleSearchChange}\r\n          filterSelectedOptions\r\n          renderInput={(params) => (\r\n            <TextField\r\n              {...params}\r\n              label=\"Search\"\r\n            />\r\n          )}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12} md={3}>\r\n        <FormGroup>\r\n          <Stack direction=\"row\" justifyContent=\"end\" spacing={2}>\r\n            <FormControl size=\"small\">\r\n              <InputLabel id=\"sortby-select-label\">Sort by</InputLabel>\r\n              <Select\r\n                labelId=\"sortby-select-label\"\r\n                id=\"sortby-select\"\r\n                value={values.sortBy}\r\n                label=\"Sort by\"\r\n                onChange={handleSortByChange}\r\n              >\r\n                {PunkSortTypes.map(e => (\r\n                  <MenuItem key={e.type} value={e.type}>{e.name}&nbsp;</MenuItem>\r\n                ))}\r\n              </Select>\r\n            </FormControl>\r\n            {/* <Stack direction=\"row\" alignItems=\"center\" >\r\n              <Switch color=\"default\" checked={values.orderByAsc} onChange={handleCheckedChange('orderByAsc')} />\r\n              {values.orderByAsc ? (\r\n                <ArrowUpward fontSize=\"small\" />\r\n              ) : (\r\n                <ArrowDownward fontSize=\"small\" />\r\n              )}\r\n            </Stack> */}\r\n            <ToggleButtonGroup size=\"small\" exclusive value={values.orderBy} onChange={handleCheckedChange}>\r\n              <ToggleButton value={PunkTypes.OrderBy.ASC}>\r\n                <SortIcon sx={{ transform: \"rotate(180deg)\" }} />\r\n              </ToggleButton>\r\n              <ToggleButton value={PunkTypes.OrderBy.DESC}>\r\n                <SortIcon />\r\n              </ToggleButton>\r\n            </ToggleButtonGroup>\r\n          </Stack>\r\n        </FormGroup>\r\n      </Grid>\r\n    </Grid>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { DefaultPunkFilterValues, getEmitter, getLogger, PunkTypes } from 'vitepunks-common';\r\nimport { GET_PUNKS_QUERY } from '../../../../queries';\r\nimport { GetPunks, GetPunksVariables } from '../../../../queries/__generated__/GetPunks';\r\nimport { InfinitePunkList } from '../../../punk/components/infinite-list';\r\nimport { MarketplaceBrowseItemsFilter } from '../browse-items-filter';\r\n\r\nconst logger = getLogger()\r\n\r\nexport const MarketplaceBrowseItems: React.FC = (props: any) => {\r\n  const limit = 8;\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [error, setError] = useState<any>(undefined);\r\n  const [filter, setFilter] = useState<PunkTypes.PunkFilterValues>({\r\n    sortBy: DefaultPunkFilterValues.sortBy,\r\n    orderBy: DefaultPunkFilterValues.orderBy,\r\n    search: ''\r\n  })\r\n  const emitter = getEmitter();\r\n\r\n  const query = useQuery<GetPunks, GetPunksVariables>(GET_PUNKS_QUERY, {\r\n    variables: {\r\n      offset: 0,\r\n      limit: limit,\r\n      sort: filter.sortBy as PunkTypes.PunkSortBy,\r\n      order: filter.orderBy as PunkTypes.OrderBy,\r\n      search: filter.search\r\n    },\r\n    fetchPolicy: 'network-only',\r\n    onCompleted: (data) => {\r\n      setHasMore(data.punks.length >= limit);\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsLoading(query.loading);\r\n  }, [query.loading]);\r\n\r\n  useEffect(() => {\r\n    setError(query.error);\r\n  }, [query.error]);\r\n\r\n  const fetchMoreDataAsync = async () => {\r\n    const startTimestamp = new Date().getTime();\r\n    const currentLength = query.data?.punks.length ?? 0;\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await query.fetchMore({\r\n        variables: {\r\n          offset: currentLength,\r\n          limit: limit\r\n        }\r\n      });\r\n      logger.info(`fetchMoreDataAsync1 took ${new Date().getTime() - startTimestamp}ms`)();\r\n      setHasMore(result.data.punks.length >= limit);\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n    setIsLoading(false);\r\n    logger.info(`fetchMoreDataAsync2 took ${new Date().getTime() - startTimestamp}ms`)();\r\n  };\r\n\r\n  const refetch = query.refetch;\r\n\r\n  useEffect(() => {\r\n    refetch({\r\n      offset: 0,\r\n      limit: limit,\r\n      sort: filter.sortBy as PunkTypes.PunkSortBy,\r\n      order: filter.orderBy as PunkTypes.OrderBy,\r\n      search: filter.search\r\n    })\r\n  }, [filter, refetch])\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (oldValues: PunkTypes.PunkFilterValues, newValues: PunkTypes.PunkFilterValues) => {\r\n      setHasMore(true);\r\n      setFilter({\r\n        sortBy: newValues.sortBy,\r\n        orderBy: newValues.orderBy,\r\n        search: newValues.search\r\n      });\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.PunkFilterValuesChanged, handleEvent)\r\n    return () => {\r\n      logger.info('emitter.off', PunkTypes.GlobalEvent.PunkFilterValuesChanged)()\r\n      emitter.off(PunkTypes.GlobalEvent.PunkFilterValuesChanged, handleEvent)\r\n    };\r\n  }, [emitter])\r\n\r\n  return (\r\n    <>\r\n      <MarketplaceBrowseItemsFilter></MarketplaceBrowseItemsFilter>\r\n      <InfinitePunkList\r\n        items={query.data?.punks ?? []}\r\n        fetchMoreDataAsync={fetchMoreDataAsync}\r\n        error={error}\r\n        isLoading={isLoading}\r\n        hasMore={hasMore}>\r\n      </InfinitePunkList>\r\n    </>\r\n  )\r\n}\r\n","import GridOnIcon from '@mui/icons-material/GridOn';\r\nimport TimelineIcon from '@mui/icons-material/Timeline';\r\nimport { Box, Container, Tab, Tabs, Typography } from '@mui/material';\r\nimport React from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { PunkTypes } from 'vitepunks-common';\r\nimport { MarketplaceBrowseActivity } from '../browse-activity';\r\nimport { MarketplaceBrowseItems } from '../browse-items';\r\n\r\ninterface TabPanelProps {\r\n  children?: React.ReactNode;\r\n  index: number;\r\n  value: number;\r\n}\r\n\r\nfunction TabPanel(props: TabPanelProps) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`marketplace-tabpanel-${index}`}\r\n      aria-labelledby={`marketplace-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box sx={{ p: 2 }}>\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const MarketplaceBrowse: React.FC = (props: any) => {\r\n  const navigate = useNavigate();\r\n  const { tab } = useParams();\r\n  const getTab = (): number => {\r\n    if (tab === PunkTypes.MarketplaceTab.Activity) {\r\n      return 1;\r\n    } else {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  const initialValue = getTab();\r\n  const [value, setValue] = React.useState<number>(initialValue);\r\n  if (initialValue !== value) {\r\n    setValue(initialValue)\r\n  }\r\n\r\n  const handleChange = (event: React.SyntheticEvent, newValue: number) => {\r\n    setValue(newValue);\r\n    switch (newValue) {\r\n      case 1:\r\n        navigate(\"/marketplace/activity\");\r\n        break;\r\n      default:\r\n        navigate(\"/marketplace\");\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Typography variant=\"h2\" component=\"div\" textAlign=\"center\" sx={{ pt: 3 }} gutterBottom>\r\n        Marketplace\r\n      </Typography>\r\n      <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\r\n        <Tabs value={value} onChange={handleChange}>\r\n          <Tab icon={<GridOnIcon />} label=\"Items\" value={0} />\r\n          <Tab icon={<TimelineIcon />} label=\"Activity\" value={1} />\r\n        </Tabs>\r\n      </Box>\r\n      <Container sx={{ pb: 6 }} maxWidth=\"xl\">\r\n        <TabPanel value={value} index={0}>\r\n          <MarketplaceBrowseItems></MarketplaceBrowseItems>\r\n        </TabPanel>\r\n        <TabPanel value={value} index={1}>\r\n          <Box marginTop={5}>\r\n            <MarketplaceBrowseActivity></MarketplaceBrowseActivity>\r\n          </Box>\r\n        </TabPanel>\r\n      </Container>\r\n    </>\r\n  )\r\n}\r\n","import React from 'react';\r\n\r\nexport const MarketplaceItem: React.FC = (props: any) => {\r\n  return (\r\n    <>\r\n      MarketplaceItem\r\n    </>\r\n  )\r\n}\r\n","import { Card } from '@mui/material';\r\nimport { styled } from '@mui/material/styles';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { UrlUtil } from 'vitepunks-common';\r\nimport { ClientConstants } from '../../../../common/constants';\r\n\r\nconst CardContainer = styled(Card)(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100vw; \r\n  background-color: rgba(255, 255, 255, 0.5);\r\n`,\r\n);\r\n\r\nconst ImageContainer = styled('div')(\r\n  ({ theme }) => `\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n`,\r\n);\r\n\r\nconst Image = styled('div')(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  background-image: url('${ClientConstants.ITEM_BG_URL}');\r\n`,\r\n);\r\n\r\nconst Img = styled('img')(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: contain;\r\n  image-rendering: pixelated;\r\n`,\r\n);\r\n\r\ninterface Props {\r\n  image: string\r\n  cid: string\r\n  maxHeight?: string\r\n}\r\n\r\nexport const PunkImage: React.FC<Props> = (props: Props) => {\r\n  const [imageUrl, setImageUrl] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setImageUrl(UrlUtil.getPunkUrl(props.image, props.cid));\r\n  }, [props.image, props.cid]);\r\n\r\n  return (\r\n    <CardContainer sx={{ maxHeight: props.maxHeight ?? \"400px\" }}>\r\n      <ImageContainer>\r\n        <Image>\r\n          <Img sx={{ backgroundImage: `url('${imageUrl}')` }} />\r\n        </Image>\r\n      </ImageContainer>\r\n    </CardContainer>\r\n  );\r\n}","import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Link } from '@mui/material';\r\nimport confetti from 'canvas-confetti';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { CommonConstants, getEmitter, getLogger, PunkTypes } from 'vitepunks-common';\r\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\r\nimport { getPunkService } from '../../../../services/punk.service';\r\nimport { PunkImage } from '../image';\r\n\r\nconst logger = getLogger();\r\n\r\nexport const MintDialog: React.FC = () => {\r\n  const [open, setOpen] = useState(false);\r\n  const [punkId, setPunkId] = useState(-1);\r\n  const [punkImage, setPunkImage] = useState(\"\");\r\n  const [punkCid, setPunkCid] = useState(\"\");\r\n  const emitter = getEmitter();\r\n  const service = getPunkService();\r\n  const context = useConnectedWeb3Context();\r\n\r\n  useEffect(() => {\r\n    const handleEvent = async (e: PunkTypes.PunkChangedEvent) => {\r\n      //logger.info(`eventType: ${e.eventType} punkId: ${e.punkId} amount: ${e.amount?.toString()} fromAddress: ${e.fromAddress} toAddress: ${e.toAddress} timestamp: ${e.timestamp.toString()}`)();\r\n      if (e.eventType === PunkTypes.PunkEventType.Mint && e.toAddress?.toLowerCase() === context.account?.toLowerCase()) {\r\n        logger.info(\"Show mint dialog\")();\r\n        const punk = await service.getById(e.punkId.toString());\r\n        setPunkId(e.punkId);\r\n        setPunkImage(punk.data.punk.image);\r\n        setPunkCid(punk.data.punk.cid);\r\n        setOpen(true);\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.PunkChanged, handleEvent)\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.PunkChanged, handleEvent)\r\n    };\r\n  }, [emitter, service, context.account, setOpen]);\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      const triggerConfetti = () => {\r\n        confetti({\r\n          particleCount: 200,\r\n          spread: 100,\r\n          zIndex: 9999\r\n        });\r\n      }\r\n      for (let index = 1; index < 4; index++) {\r\n        setTimeout(() => {\r\n          triggerConfetti();\r\n        }, index * 225);\r\n      }\r\n    }\r\n  }, [open]);\r\n\r\n  const handleClose = () => {\r\n    setPunkImage(\"\");\r\n    setOpen(false);\r\n  };\r\n\r\n  if (punkId < 0) {\r\n    return (\r\n      <>\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      transitionDuration={500}\r\n      keepMounted\r\n      onClose={handleClose}\r\n      style={{ zIndex: 9999 }}\r\n    >\r\n      <DialogTitle> Mint success!</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText paddingBottom={1}>\r\n          You have successfully minted <Link underline=\"hover\" component={RouterLink} to={`/punk/${punkId}`} onClick={handleClose}>{CommonConstants.PUNK_NAME} #{punkId}</Link>\r\n        </DialogContentText>\r\n        <PunkImage image={punkImage} cid={punkCid} maxHeight=\"300px\"></PunkImage>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>\r\n          Close\r\n        </Button>\r\n        <Button component={RouterLink} to={`/account/${context.account}`} variant=\"contained\" onClick={handleClose}>\r\n          My punks\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { getEmitter, getLogger, PunkTypes, TransformUtil } from 'vitepunks-common';\r\nimport { GET_PUNK_EVENTS_QUERY } from '../../../../queries';\r\nimport { GetPunkEvents, GetPunkEventsVariables } from '../../../../queries/__generated__/GetPunkEvents';\r\nimport { getPunkService } from '../../../../services/punk.service';\r\nimport { EventList } from '../../../common/components/event-list';\r\n\r\nconst logger = getLogger();\r\n\r\ninterface Props {\r\n  item: PunkTypes.Punk\r\n}\r\n\r\nexport const PunkActivity: React.FC<Props> = (props: Props) => {\r\n  const limit = 8;\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [error, setError] = useState<any>(undefined);\r\n  const [events, setEvents] = useState<PunkTypes.PunkEvent[]>([]);\r\n  const [newEvents, setNewEvents] = useState<PunkTypes.PunkEvent[]>([]);\r\n  const service = getPunkService();\r\n  const emitter = getEmitter();\r\n\r\n  const query = useQuery<GetPunkEvents, GetPunkEventsVariables>(GET_PUNK_EVENTS_QUERY, {\r\n    variables: {\r\n      id: props.item.id,\r\n      offset: 0,\r\n      limit: limit\r\n    },\r\n    fetchPolicy: 'network-only',\r\n    onCompleted: (data) => {\r\n      setEvents(data.punkEvents.events.map(e => TransformUtil.toPunkEvent(e)));\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsLoading(query.loading);\r\n  }, [query.loading]);\r\n\r\n  useEffect(() => {\r\n    setError(query.error);\r\n  }, [query.error]);\r\n\r\n  const fetchMoreDataAsync = async () => {\r\n    logger.info(\"fetchMoreDataAsync\", events.length)();\r\n    const blockHeight: Maybe<string> = query.data?.punkEvents.blockHeight.toString();\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await service.getEventsAsync(props.item.id, events.length, limit, blockHeight);\r\n      setHasMore(result.data.punkEvents.events.length >= limit);\r\n      if (result.data.punkEvents.events.length > 0) {\r\n        setEvents([\r\n          ...events,\r\n          ...result.data.punkEvents.events.map(e => TransformUtil.toPunkEvent(e))\r\n        ]);\r\n      }\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const refetch = query.refetch;\r\n\r\n  const refresh = useCallback(() => {\r\n    logger.info(\"Refreshing punk activity\")();\r\n    refetch();\r\n    setNewEvents([]);\r\n  }, [refetch]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (state: PunkTypes.DocumentState) => {\r\n      if (state === PunkTypes.DocumentState.Active) {\r\n        refresh();\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    };\r\n  }, [emitter, refresh]);\r\n\r\n  const addNewEvent = useCallback((e: PunkTypes.PunkChangedEvent) => {\r\n    setNewEvents([\r\n      TransformUtil.toPunkEvent(e),\r\n      ...newEvents\r\n    ]);\r\n  }, [newEvents]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.PunkChangedEvent) => {\r\n      logger.info(\"newPunkEvent\", e)();\r\n      if (e.punkId === parseInt(props.item.id)) {\r\n        addNewEvent(e);\r\n      }\r\n    }\r\n    logger.info('emitter.on', PunkTypes.GlobalEvent.PunkChanged)();\r\n    emitter.on(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    return () => {\r\n      logger.info('emitter.off', PunkTypes.GlobalEvent.PunkChanged)();\r\n      emitter.off(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    };\r\n  }, [emitter, props.item.id, addNewEvent]);\r\n\r\n  return (\r\n    <EventList\r\n      events={events}\r\n      newEvents={newEvents}\r\n      error={error}\r\n      loading={isLoading}\r\n      hasMore={hasMore}\r\n      fetchMoreDataAsync={fetchMoreDataAsync}>\r\n    </EventList>\r\n  )\r\n}\r\n","import { faCheck } from '@fortawesome/free-solid-svg-icons';\r\nimport { Button, Skeleton, Stack } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { ActionName, CommonConstants, CommonUtil, getLogger, PunkTypes } from \"vitepunks-common\";\r\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { IconUtil } from '../../../../util/icon.util';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\nimport { FontAwesomeSvgIcon } from '../../../common/components/fa-icon';\r\nimport { PunkDialog } from '../dialog';\r\n\r\nconst logger = getLogger();\r\n\r\ntype ShowButtonState = {\r\n  showAny: boolean\r\n  showBuy: boolean\r\n  showClaim: boolean\r\n  showBid: boolean\r\n  showSell: boolean\r\n  showAcceptBid: boolean\r\n  showCancelBid: boolean\r\n  showCancelSale: boolean\r\n  showCancelGift: boolean\r\n}\r\n\r\ninterface Props {\r\n  loading: boolean\r\n  marketStarted: boolean\r\n  item: PunkTypes.Punk\r\n  refetchAsync: () => Promise<void>\r\n}\r\n\r\nexport const PunkInfoActions: React.FC<Props> = (props: Props) => {\r\n  const mounted = React.useRef(false);\r\n  const [hasOwner, setHasOwner] = useState<boolean>(false);\r\n  const [showAll] = useState<boolean>(false);\r\n  const [showButtonState, setShowButtonState] = useState<ShowButtonState>({\r\n    showAny: false,\r\n    showBuy: false,\r\n    showClaim: false,\r\n    showBid: false,\r\n    showSell: false,\r\n    showAcceptBid: false,\r\n    showCancelBid: false,\r\n    showCancelSale: false,\r\n    showCancelGift: false\r\n  });\r\n  const [dialogState, setDialogState] = useState<PunkTypes.PunkDialogState>({\r\n    type: PunkTypes.PunkDialogType.UNKNOWN,\r\n    open: false,\r\n    item: props.item\r\n  });\r\n  const context = useConnectedWeb3Context();\r\n  const service = getMarketService();\r\n\r\n  React.useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (mounted.current) {\r\n      let isOwner = props.item.owner?.toLowerCase() === context.account?.toLowerCase();\r\n      const state: ShowButtonState = {\r\n        showAny: false,\r\n        showBuy: false,\r\n        showClaim: false,\r\n        showBid: false,\r\n        showSell: false,\r\n        showAcceptBid: false,\r\n        showCancelBid: false,\r\n        showCancelSale: false,\r\n        showCancelGift: false\r\n      }\r\n      // setHasOwner\r\n      if (props.item.owner && !CommonUtil.isNullOrWhitespace(props.item.owner)) {\r\n        setHasOwner(true);\r\n      } else {\r\n        setHasOwner(false);\r\n      }\r\n      if (props.marketStarted && !CommonUtil.isNullOrWhitespace(context.account)) {\r\n        state.showAny = true;\r\n      }\r\n      if (!isOwner && props.item.offer && (CommonUtil.isNullOrWhitespace(props.item.offer.onlySellTo) || props.item.offer.onlySellTo?.toLowerCase() === context.account?.toLowerCase())) {\r\n        if (props.item.offer.minAmount.gt(0)) {\r\n          state.showBuy = true;\r\n        } else {\r\n          state.showClaim = true;\r\n        }\r\n      }\r\n      if (!isOwner && props.item.bid?.bidder.toLowerCase() !== context.account?.toLowerCase()) {\r\n        state.showBid = true;\r\n      }\r\n      if (isOwner && !props.item.offer) {\r\n        state.showSell = true;\r\n      }\r\n      if (isOwner && props.item.bid) {\r\n        state.showAcceptBid = true;\r\n      }\r\n      if (!isOwner && props.item.bid?.bidder.toLowerCase() === context.account?.toLowerCase()) {\r\n        state.showCancelBid = true;\r\n      }\r\n      if (isOwner && props.item.offer) {\r\n        if (props.item.offer.minAmount.gt(0)) {\r\n          state.showCancelSale = true;\r\n        } else {\r\n          state.showCancelGift = true;\r\n        }\r\n      }\r\n      setShowButtonState(state);\r\n    }\r\n  }, [props.marketStarted, props.item, context.account]);\r\n\r\n  const handleFailureAsync = async () => {\r\n    SnackbarUtil.enqueueMessage('Transaction failed');\r\n    try {\r\n      // Update actionPrice just in case\r\n      await service.getMarketInfoAsync();\r\n    } catch (error) {\r\n      logger.error(error)();\r\n    }\r\n  }\r\n\r\n  const handleClaimAsync = async () => {\r\n    try {\r\n      if (!props.item.offer) {\r\n        throw new Error(`${CommonConstants.PUNK_NAME} #${props.item.id} cannot be claimed`);\r\n      }\r\n      const success = await service.buyAsync(props.item.id, props.item.offer.minAmount.toFixed());\r\n      if (success) {\r\n        SnackbarUtil.enqueueMessage(`Congratulations! You claimed ${CommonConstants.PUNK_NAME} #${props.item.id}`);\r\n      } else {\r\n        await handleFailureAsync();\r\n      }\r\n    } catch (error) {\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      await props.refetchAsync();\r\n    }\r\n  }\r\n\r\n  const handleOpenDialog = (_type: PunkTypes.PunkDialogType) => {\r\n    if (mounted.current) {\r\n      setDialogState({\r\n        ...dialogState,\r\n        type: _type,\r\n        open: true,\r\n        item: props.item\r\n      })\r\n    }\r\n  }\r\n\r\n  const dialogCallbackAsync = async (_success: boolean) => {\r\n    if (!_success) {\r\n      await handleFailureAsync();\r\n    }\r\n    await props.refetchAsync();\r\n  }\r\n\r\n  if (!hasOwner || !showButtonState.showAny) {\r\n    return (\r\n      <></>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {props.loading ? (\r\n        <Skeleton animation=\"wave\" height={30} />\r\n      ) : (\r\n        <>\r\n          <Stack spacing={1} direction=\"row\">\r\n            {(showAll || showButtonState.showBuy) && (\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<FontAwesomeSvgIcon icon={IconUtil.getBuyEventTypeIcon()} />}\r\n                onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.ACCEPT_OFFER) }}>\r\n                {ActionName.buy}\r\n              </Button>\r\n            )}\r\n            {(showAll || showButtonState.showClaim) && (\r\n              <ClickOnceButton\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<FontAwesomeSvgIcon icon={IconUtil.getGiftEventTypeIcon()} />}\r\n                callbackFn={handleClaimAsync}>\r\n                {ActionName.claim}\r\n              </ClickOnceButton>\r\n            )}\r\n            {(showAll || showButtonState.showBid) && (\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<FontAwesomeSvgIcon icon={IconUtil.getPunkEventTypeIcon(PunkTypes.PunkEventType.NewBid)} />}\r\n                onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.BID) }}>\r\n                {ActionName.bid}\r\n              </Button>\r\n            )}\r\n            {(showAll || showButtonState.showSell) && (\r\n              <>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<FontAwesomeSvgIcon icon={IconUtil.getOfferEventTypeIcon()} />}\r\n                  onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.OFFER) }}>\r\n                  {ActionName.sell}\r\n                </Button>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<FontAwesomeSvgIcon icon={IconUtil.getGiftEventTypeIcon()} />}\r\n                  onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.GIFT) }}>\r\n                  {ActionName.gift}\r\n                </Button>\r\n              </>\r\n            )}\r\n            {(showAll || showButtonState.showAcceptBid) && (\r\n              <Button\r\n                size=\"small\"\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<FontAwesomeSvgIcon icon={faCheck} />}\r\n                onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.ACCEPT_BID) }}>\r\n                {ActionName.acceptBid}\r\n              </Button>\r\n            )}\r\n          </Stack>\r\n          {(showAll || showButtonState.showCancelBid || showButtonState.showCancelSale || showButtonState.showCancelGift) && (\r\n            <Stack spacing={1} direction=\"row\" marginTop={1}>\r\n              {(showAll || showButtonState.showCancelBid) && (\r\n                <Button\r\n                  size=\"small\"\r\n                  variant=\"contained\"\r\n                  color=\"error\"\r\n                  startIcon={<FontAwesomeSvgIcon icon={IconUtil.getPunkEventTypeIcon(PunkTypes.PunkEventType.CancelBid)} />}\r\n                  onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.CANCEL_BID) }}>\r\n                  {ActionName.cancelBid}\r\n                </Button>\r\n              )}\r\n              {(showAll || showButtonState.showCancelSale) && (\r\n                <Button\r\n                  size=\"small\"\r\n                  variant=\"contained\"\r\n                  color=\"error\"\r\n                  startIcon={<FontAwesomeSvgIcon icon={IconUtil.getCancelSaleEventTypeIcon()} />}\r\n                  onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.CANCEL_OFFER) }}>\r\n                  {ActionName.cancelSale}\r\n                </Button>\r\n              )}\r\n              {(showAll || showButtonState.showCancelGift) && (\r\n                <Button\r\n                  size=\"small\"\r\n                  variant=\"contained\"\r\n                  color=\"error\"\r\n                  startIcon={<FontAwesomeSvgIcon icon={IconUtil.getCancelSaleEventTypeIcon()} />}\r\n                  onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.CANCEL_OFFER) }}>\r\n                  {ActionName.cancelGift}\r\n                </Button>\r\n              )}\r\n            </Stack>\r\n          )}\r\n        </>\r\n      )}\r\n      <PunkDialog state={dialogState} setState={setDialogState} callbackAsync={dialogCallbackAsync}></PunkDialog>\r\n    </>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport { faGem, faSnowflake } from '@fortawesome/free-regular-svg-icons';\r\nimport { Verified } from '@mui/icons-material';\r\nimport { Box, Card, Chip, Link, Skeleton, Stack, styled, Typography, useMediaQuery, useTheme } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonConstants, CommonUtil, FormatUtil, getEmitter, getLogger, PunkTypes, TokenUtil, UrlUtil } from 'vitepunks-common';\r\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\r\nimport { usePunkInfo } from '../../../../hooks/punk.hook';\r\nimport { GET_MARKET_INFO_QUERY } from '../../../../queries';\r\nimport { GetMarketInfo } from '../../../../queries/__generated__/GetMarketInfo';\r\nimport { Alert } from '../../../common/components/alert';\r\nimport { ExplorerLink, ExplorerLinkType } from '../../../common/components/explorer-link';\r\nimport { FontAwesomeSvgIcon } from '../../../common/components/fa-icon';\r\nimport { BootstrapTooltip, ExtendedBootstrapTooltip } from '../../../common/components/tooltip';\r\nimport { PunkInfoActions } from '../info-actions';\r\n\r\nconst logger = getLogger();\r\n\r\nconst InfoContainer = styled(Card)(\r\n  ({ theme }) => `\r\n  position: relative;\r\n  overflow: auto;\r\n  width: 100%;\r\n  min-height: 400px;\r\n  background-color: rgba(255, 255, 255, 0.5);\r\n`,\r\n);\r\n\r\nconst BottomContent = styled(Box)(\r\n  ({ theme }) => `\r\n  position: absolute;\r\n  bottom: 24px;\r\n  left: 24px;\r\n  width: calc(100% - 48px);\r\n`,\r\n);\r\n\r\ninterface Props {\r\n  item: PunkTypes.Punk\r\n}\r\n\r\nexport const PunkInfo: React.FC<Props> = (props: Props) => {\r\n  const mounted = React.useRef(false);\r\n  const theme = useTheme();\r\n  const matches = useMediaQuery(theme.breakpoints.down('sm'));\r\n  const [marketStarted, setMarketStarted] = useState(false);\r\n  const { punkExtended, loading, error, refetchAsync } = usePunkInfo(props.item);\r\n  const query = useQuery<GetMarketInfo>(GET_MARKET_INFO_QUERY, {\r\n    fetchPolicy: 'network-only'\r\n  });\r\n  const context = useConnectedWeb3Context();\r\n  const emitter = getEmitter();\r\n\r\n  const refetch = query.refetch;\r\n\r\n  useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (error) {\r\n      logger.error(error)();\r\n    }\r\n  }, [error]);\r\n\r\n  useEffect(() => {\r\n    if (mounted.current) {\r\n      const info = query.data?.marketInfo;\r\n      if (info && mounted.current) {\r\n        setMarketStarted(info.marketStarted);\r\n      }\r\n    }\r\n  }, [query.data]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (state: PunkTypes.DocumentState) => {\r\n      if (mounted.current) {\r\n        if (state === PunkTypes.DocumentState.Active) {\r\n          refetchAsync();\r\n        }\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    };\r\n  }, [emitter, refetchAsync]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = () => {\r\n      if (mounted.current) {\r\n        refetch();\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.MarketChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.MarketChanged, handleEvent);\r\n    };\r\n  }, [emitter, refetch]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.PunkChangedEvent) => {\r\n      if (mounted.current) {\r\n        if (e.punkId === parseInt(props.item.id)) {\r\n          refetchAsync();\r\n        }\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    };\r\n  }, [emitter, props.item.id, refetchAsync]);\r\n\r\n  const formatViteTooltip = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatViteTooltip(bn);\r\n  }\r\n\r\n  const formatVite = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return bn.gt(0) ? TokenUtil.formatVite(bn) : \"0\";\r\n  }\r\n\r\n  return (\r\n    <InfoContainer>\r\n      <Box sx={{ p: 3 }}>\r\n        <Stack direction=\"row\" justifyContent=\"space-between\">\r\n          <Typography variant=\"h5\" fontSize={matches ? \"1.25rem\" : \"1.5rem\"} color=\"primary\" paragraph>{CommonConstants.PUNK_NAME} #{props.item.id}</Typography>\r\n          <Box>\r\n            <ExtendedBootstrapTooltip title={<span>Rarity rank</span>} placement=\"bottom\" arrow>\r\n              <Chip size=\"small\" icon={<FontAwesomeSvgIcon icon={faGem} sx={{ fontSize: \"small\", ml: 1 }} />} sx={{ fontSize: \"0.7rem\" }} label={props.item.rank} />\r\n            </ExtendedBootstrapTooltip>\r\n          </Box>\r\n        </Stack>\r\n        {props.item.attributes.length > 0 && (\r\n          <Stack spacing={1} direction=\"row\" sx={{ mb: 2 }}>\r\n            {props.item.attributes?.map((a: string) => (\r\n              <Chip key={a} label={a} variant=\"outlined\" size={matches ? \"small\" : \"medium\"} />\r\n            ))}\r\n          </Stack>\r\n        )}\r\n        {error ? (\r\n          <Alert message={FormatUtil.formatMessage(error)} type=\"warning\"></Alert>\r\n        ) : (\r\n          <>\r\n            <Stack spacing={1} direction=\"row\" sx={{ mb: 2 }}>\r\n              <Typography display=\"inline\">\r\n                <b>Owner</b>:\r\n              </Typography>\r\n              {loading ? (\r\n                <Skeleton animation=\"wave\" height={24} width=\"40%\" sx={{ display: \"inline\" }} />\r\n              ) : (\r\n                <Typography display=\"inline\" component=\"div\">\r\n                  {!punkExtended.owner ? (\r\n                    <>\r\n                      Not minted yet.\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <ExplorerLink type={ExplorerLinkType.Address} value={punkExtended.owner}>\r\n                        <ExtendedBootstrapTooltip title={punkExtended.owner}>\r\n                          <Box sx={{ mr: 1 }} component=\"span\">{CommonUtil.truncateStringInTheMiddle(punkExtended.owner, 20, 5)}</Box>\r\n                        </ExtendedBootstrapTooltip>\r\n                      </ExplorerLink>\r\n                      {context.account && punkExtended.owner.toLowerCase() === context.account.toLowerCase() && (\r\n                        <Chip size=\"small\" icon={<Verified />} label=\"You own this punk\" variant=\"filled\" sx={{ borderRadius: 1 }} color=\"secondary\" />\r\n                      )}\r\n                    </>\r\n                  )}\r\n                </Typography>\r\n              )}\r\n            </Stack>\r\n            <Stack spacing={1} direction=\"row\" sx={{ mb: 2 }}>\r\n              <Typography display=\"inline\">\r\n                <b>Image</b>:\r\n              </Typography>\r\n              <Link underline=\"hover\" href={UrlUtil.getPunkIpfsUrlByCid(punkExtended.cid)} target=\"_blank\">\r\n                <ExtendedBootstrapTooltip title=\"Image stored on IPFS\">\r\n                  <Box>\r\n                    <FontAwesomeSvgIcon sx={{ fontSize: \"1.2em\", mr: 0.5, verticalAlign: \"text-bottom\" }} icon={faSnowflake} />\r\n                    <Box component=\"span\" >\r\n                      Frozen\r\n                    </Box>\r\n                  </Box>\r\n                </ExtendedBootstrapTooltip>\r\n              </Link>\r\n            </Stack>\r\n            <Stack spacing={1} direction=\"row\" sx={{ mb: 2 }}>\r\n              <Typography display=\"inline\">\r\n                <b>Current bid</b>:\r\n              </Typography>\r\n              {loading ? (\r\n                <Skeleton animation=\"wave\" height={24} width=\"60%\" sx={{ display: \"inline\" }} />\r\n              ) : (\r\n                <Typography display=\"inline\">\r\n                  {!punkExtended.bid ? (\r\n                    <>\r\n                      -\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <BootstrapTooltip title={formatViteTooltip(punkExtended.bid.amount)}>\r\n                        <span>{formatVite(punkExtended.bid.amount)} {CommonConstants.CURRENCY_NAME}</span>\r\n                      </BootstrapTooltip>\r\n                      &nbsp;by <ExplorerLink type={ExplorerLinkType.Address} value={punkExtended.bid.bidder}><ExtendedBootstrapTooltip title={punkExtended.bid.bidder}>\r\n                        <span>{CommonUtil.truncateStringInTheMiddle(punkExtended.bid.bidder, 10, 5)}</span>\r\n                      </ExtendedBootstrapTooltip></ExplorerLink>\r\n                    </>\r\n                  )}\r\n                </Typography>\r\n              )}\r\n            </Stack>\r\n            <Stack spacing={1} direction=\"row\" sx={{ mb: 2 }}>\r\n              {(loading || punkExtended.offer) ? (\r\n                <>\r\n                  <Typography display=\"inline\">\r\n                    {punkExtended.offer?.minAmount.lte(0) ? (\r\n                      <>\r\n                        <b>Gift</b>:\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <b>Buy price</b>:\r\n                      </>\r\n                    )}\r\n                  </Typography>\r\n                  {loading ? (\r\n                    <Skeleton animation=\"wave\" height={24} width=\"30%\" sx={{ display: \"inline\" }} />\r\n                  ) : (\r\n                    <Typography display=\"inline\">\r\n                      {!punkExtended.offer ? (\r\n                        <>\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <BootstrapTooltip title={formatViteTooltip(punkExtended.offer.minAmount)}>\r\n                            <span>{formatVite(punkExtended.offer.minAmount)} {CommonConstants.CURRENCY_NAME}</span>\r\n                          </BootstrapTooltip>\r\n                          {punkExtended.offer.onlySellTo && !CommonUtil.isNullOrWhitespace(punkExtended.offer.onlySellTo) && (\r\n                            <>\r\n                              &nbsp;(<ExplorerLink type={ExplorerLinkType.Address} value={punkExtended.offer.onlySellTo}><ExtendedBootstrapTooltip title={punkExtended.offer.onlySellTo}>\r\n                                <span>{CommonUtil.truncateStringInTheMiddle(punkExtended.offer.onlySellTo, 10, 5)}</span>\r\n                              </ExtendedBootstrapTooltip></ExplorerLink>)\r\n                            </>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                    </Typography>\r\n                  )}\r\n                </>\r\n              ) : (\r\n                <Chip label=\"Not for sale\" variant=\"filled\" sx={{ borderRadius: 1 }} />\r\n              )}\r\n            </Stack>\r\n          </>\r\n        )}\r\n        <BottomContent>\r\n          <PunkInfoActions loading={loading} marketStarted={marketStarted} item={punkExtended} refetchAsync={refetchAsync}></PunkInfoActions>\r\n        </BottomContent>\r\n      </Box>\r\n    </InfoContainer >\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport { Container, Grid } from '@mui/material';\r\nimport React from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { FormatUtil } from 'vitepunks-common';\r\nimport { GET_PUNK_QUERY } from '../../../../queries';\r\nimport { GetPunk, GetPunkVariables } from '../../../../queries/__generated__/GetPunk';\r\nimport { Alert } from '../../../common/components/alert';\r\nimport { PunkActivity } from '../activity';\r\nimport { PunkImage } from '../image';\r\nimport { PunkInfo } from '../info';\r\n\r\nexport const PunkDetails: React.FC = (props: any) => {\r\n  const { id } = useParams();\r\n\r\n  const query = useQuery<GetPunk, GetPunkVariables>(GET_PUNK_QUERY, {\r\n    variables: {\r\n      id: id ?? \"-1\"\r\n    },\r\n    fetchPolicy: 'network-only'\r\n  });\r\n\r\n  const error = query.error;\r\n  const loading = query.loading;\r\n\r\n  if (error) {\r\n    return <Alert message={FormatUtil.formatMessage(error)} type=\"warning\"></Alert>\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {loading || !query.data ? (\r\n        <Alert message=\"Loading...\" type=\"default\" ></Alert>\r\n      ) : (\r\n        <Container maxWidth=\"lg\">\r\n          <Grid container spacing={3} direction=\"row\" marginBottom={3}>\r\n            <Grid item xs={12} md={5}>\r\n              <PunkImage image={query.data.punk.image} cid={query.data.punk.cid}></PunkImage>\r\n            </Grid>\r\n            <Grid item xs={12} md={7}>\r\n              <PunkInfo item={query.data.punk}></PunkInfo>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <PunkActivity item={query.data.punk}></PunkActivity>\r\n            </Grid>\r\n          </Grid>\r\n        </Container>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n","import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Slide, SlideProps } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { getEmitter, PunkTypes } from 'vitepunks-common';\r\n\r\nconst Transition = React.forwardRef(function Transition(props: SlideProps, ref: React.Ref<unknown>) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport const ConfirmTransactionDialog: React.FC = () => {\r\n  const [open, setOpen] = useState(false);\r\n  const emitter = getEmitter();\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (open: boolean) => {\r\n      setOpen(open)\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.ConfirmTransactionDialog, handleEvent)\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.ConfirmTransactionDialog, handleEvent)\r\n    };\r\n  }, [emitter, setOpen])\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      TransitionComponent={Transition}\r\n      keepMounted\r\n      onClose={handleClose}\r\n      style={{ zIndex: 9999 }}\r\n    >\r\n      <DialogTitle>ViteConnect</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          Please confirm transaction on VITE Wallet App\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} color=\"primary\">\r\n          Close\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import LaunchIcon from '@mui/icons-material/Launch';\r\nimport { Alert, Button, Container, Stack, Typography } from '@mui/material';\r\nimport { styled } from '@mui/system';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonConstants, getEmitter, getLogger, PunkTypes, TokenUtil } from 'vitepunks-common';\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { getGeneralService } from '../../../../services/general.service';\r\nimport { BootstrapTooltip } from '../../../common/components/tooltip';\r\n\r\nconst logger = getLogger();\r\n\r\nconst QuotaContainer = styled(Container)(({ theme }) => (`\r\n  position: absolute;\r\n  top: 64px;\r\n  right: 0;\r\n  width: 100%;\r\n  z-index: 9999;\r\n`));\r\n\r\nconst QuotaAlert = styled(Alert)(({ theme }) => (`\r\n  float: right;\r\n  background-color: rgba(255, 255, 255);\r\n`));\r\n\r\nexport const ContractQuota: React.FC = (props: any) => {\r\n  const mounted = React.useRef(false);\r\n  const [quota, setQuota] = useState<PunkTypes.ViteQuotaResult>({\r\n    currentQuota: new PunkTypes.BigNumberWrapper(\"0\"),\r\n    maxQuota: new PunkTypes.BigNumberWrapper(\"0\"),\r\n    stakeAmount: new PunkTypes.BigNumberWrapper(\"0\")\r\n  });\r\n  const [showContainer, setShowContainer] = useState<boolean>(false);\r\n  const service = getGeneralService();\r\n  const emitter = getEmitter();\r\n\r\n  React.useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let interval: NodeJS.Timeout;\r\n    if (showContainer) {\r\n      interval = setInterval(async () => {\r\n        const result = await service.getContractQuota();\r\n        logger.info(result.data.quota)();\r\n        if (mounted.current && result.data.quota) {\r\n          const quotaResult = result.data.quota as PunkTypes.ViteQuotaResult;\r\n          if (quotaResult.currentQuota.gte(quotaResult.maxQuota)) {\r\n            clearInterval(interval);\r\n            setShowContainer(false);\r\n          }\r\n          setQuota({\r\n            currentQuota: quotaResult.currentQuota,\r\n            maxQuota: quotaResult.maxQuota,\r\n            stakeAmount: quotaResult.stakeAmount\r\n          });\r\n        }\r\n      }, 2000);\r\n    }\r\n    return () => {\r\n      logger.info(\"clearInterval(interval)\")();\r\n      if (interval) {\r\n        clearInterval(interval);\r\n      }\r\n    }\r\n  }, [service, showContainer]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (_address: string, _quota: PunkTypes.ViteQuotaResult) => {\r\n      if (mounted.current && ClientConstants.QUOTA_THRESHOLD.gte(_quota.currentQuota.minus(ClientConstants.QUOTA_THRESHOLD))) {\r\n        setQuota({\r\n          currentQuota: _quota.currentQuota,\r\n          maxQuota: _quota.maxQuota,\r\n          stakeAmount: _quota.stakeAmount\r\n        });\r\n        setShowContainer(true);\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.QuotaChanged, handleEvent);\r\n    return () => {\r\n      logger.info(\"emitter.off(GlobalEvent.QuotaChanged, handleEvent)\")();\r\n      emitter.off(PunkTypes.GlobalEvent.QuotaChanged, handleEvent);\r\n    };\r\n  }, [emitter]);\r\n\r\n  const formatBigNumber = (bn: PunkTypes.BigNumberWrapper, decimals: number = CommonConstants.CURRENCY_DECIMALS) => {\r\n    return TokenUtil.formatBigNumber(bn, 0, decimals);\r\n  }\r\n\r\n  if (!showContainer || quota.maxQuota.eq(0)) {\r\n    return (\r\n      <>\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <QuotaContainer maxWidth=\"xl\">\r\n      <QuotaAlert icon={false} severity=\"info\" onClose={() => { setShowContainer(false) }} sx={{ mt: 3, mr: 2 }}>\r\n        <Typography marginBottom={1} paragraph>\r\n          <b>Contract quota is recharging...</b>\r\n        </Typography>\r\n        <BootstrapTooltip title={formatBigNumber(quota.currentQuota)} placement=\"left\" arrow>\r\n          <Typography marginBottom={1} paragraph>\r\n            {formatBigNumber(quota.currentQuota, 6)} / {formatBigNumber(quota.maxQuota, 6)}\r\n          </Typography>\r\n        </BootstrapTooltip>\r\n        <Typography marginBottom={1}>You can help by staking {CommonConstants.CURRENCY_NAME}</Typography>\r\n        <Stack spacing={1} direction=\"row\">\r\n          <Typography>What does this mean?</Typography>\r\n          <Button variant=\"outlined\" size=\"small\" href={ClientConstants.QUOTA_WIKI_URL} target=\"_blank\" endIcon={<LaunchIcon />}>\r\n            More info\r\n          </Button>\r\n        </Stack>\r\n      </QuotaAlert>\r\n    </QuotaContainer>\r\n  )\r\n}\r\n","import { useSnackbar } from 'notistack';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { HashRouter, Route, Routes } from 'react-router-dom';\r\nimport { getEmitter, getLogger, PunkTypes } from 'vitepunks-common';\r\nimport { getClientConfig } from '../../../../common/config';\r\nimport { getCommonContext } from '../../../../contexts/common.context';\r\nimport { getWalletManager } from '../../../../storage';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { WebUtil } from '../../../../util/web.util';\r\nimport { WalletConnectorFactory } from '../../../../wallet/factory';\r\nimport { AccountDetails } from '../../../account/components/details';\r\nimport { Test } from '../../../common/components/test';\r\nimport { TestImage } from '../../../common/components/test-image';\r\nimport { TestList } from '../../../common/components/test-list';\r\nimport { LandingMain } from '../../../landing/components/main';\r\nimport { Header } from '../../../layout/components/header';\r\nimport { MainScroll } from '../../../layout/components/main-scroll';\r\nimport { MainWrapper } from '../../../layout/components/main-wrapper';\r\nimport { MarketplaceBrowse } from '../../../marketplace/components/browse';\r\nimport { MarketplaceItem } from '../../../marketplace/components/item';\r\nimport { MintDialog } from '../../../punk/components/dialog-mint';\r\nimport { PunkDetails } from '../../../punk/components/main';\r\nimport { ConfirmTransactionDialog } from '../dialog-transaction';\r\nimport { ContractQuota } from '../quota';\r\n\r\nconst logger = getLogger();\r\n\r\nexport const Main: React.FC = (props: any) => {\r\n  const [visibility, setVisibility] = useState<PunkTypes.DocumentState>(PunkTypes.DocumentState.Unknown);\r\n  const emitter = getEmitter();\r\n  const context = getCommonContext();\r\n  const basename = getClientConfig().BASENAME ?? \"\";\r\n  SnackbarUtil.snackbar = useSnackbar();\r\n\r\n  useEffect(() => {\r\n    const handleEvent = async () => {\r\n      try {\r\n        const walletConnectorFactory = new WalletConnectorFactory(getWalletManager());\r\n        await context.datasource.initAsync(context.network, PunkTypes.ProviderType.WEBSOCKET, walletConnectorFactory.create(context.network));\r\n        emitter.emitVisibilityChanged(WebUtil.getDocumentState());\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.ReInit, handleEvent);\r\n    return () => {\r\n      logger.info(\"emitter.off(GlobalEvent.ReInit, handleEvent)\")();\r\n      emitter.off(PunkTypes.GlobalEvent.ReInit, handleEvent);\r\n    };\r\n  }, [emitter, context.datasource, context.network]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = async () => {\r\n      const state = WebUtil.getDocumentState();\r\n      if (visibility !== state) {\r\n        if (state === PunkTypes.DocumentState.Active) {\r\n          // await context.datasource.initAsync(context.network);\r\n        }\r\n        logger.info(`visibilitychange before ${visibility} after ${state}`)();\r\n        setVisibility(state);\r\n        emitter.emitVisibilityChanged(state);\r\n      }\r\n    }\r\n    document.addEventListener('visibilitychange', handleEvent);\r\n    return () => {\r\n      logger.info(\"removeEventListener visibilitychange\")();\r\n      document.removeEventListener('visibilitychange', handleEvent);\r\n    };\r\n  }, [emitter, visibility, context.datasource, context.network]);\r\n\r\n  return (\r\n    <MainWrapper>\r\n      <HashRouter basename={basename}>\r\n        <Header />\r\n        <MainScroll>\r\n          <ContractQuota></ContractQuota>\r\n          <Routes>\r\n            <Route path=\"/account/:address\" element={<AccountDetails />} />\r\n            <Route path=\"/marketplace\" element={<MarketplaceBrowse />} />\r\n            <Route path=\"/marketplace/:tab\" element={<MarketplaceBrowse />} />\r\n            <Route path=\"/marketplace/item/:id\" element={<MarketplaceItem />} />\r\n            <Route path=\"/punk/:id\" element={<PunkDetails />} />\r\n            <Route path=\"/test-image\" element={<TestImage />} />\r\n            <Route path=\"/test-list\" element={<TestList />} />\r\n            <Route path=\"/test\" element={<Test />} />\r\n            <Route path=\"/\" element={<LandingMain />} />\r\n          </Routes>\r\n          <MintDialog></MintDialog>\r\n          <ConfirmTransactionDialog></ConfirmTransactionDialog>\r\n        </MainScroll>\r\n      </HashRouter>\r\n    </MainWrapper>\r\n  )\r\n}\r\n","import { ApolloProvider } from '@apollo/client';\r\nimport { LocalizationProvider } from '@mui/lab';\r\nimport DateAdapter from '@mui/lab/AdapterMoment';\r\nimport { styled } from '@mui/material/styles';\r\nimport { SnackbarProvider } from 'notistack';\r\nimport React from 'react';\r\nimport { CommonConfig } from 'vitepunks-common';\r\nimport { getApolloClient } from './clients/apollo.client';\r\nimport { getClientConfig } from './common/config';\r\nimport { ClientConstants } from './common/constants';\r\nimport { ConnectedWeb3 } from './contexts/connectedWeb3';\r\nimport { Web3Provider } from './contexts/web3';\r\nimport { Main } from './features/main/components/main';\r\n\r\nconst Background = styled('div')(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  background-image: url('${ClientConstants.BG_URL}');\r\n`,\r\n);\r\n\r\nconst App: React.FC = () => {\r\n  const clientConfig = getClientConfig();\r\n  CommonConfig.init(clientConfig);\r\n  const apolloClient = React.useMemo(() => getApolloClient(), [])\r\n  // Almost never return exponential notation\r\n  // BigNumber.config({ EXPONENTIAL_AT: 1e+9 })\r\n  return (\r\n    <LocalizationProvider dateAdapter={DateAdapter}>\r\n      <Background>\r\n        <SnackbarProvider maxSnack={3}>\r\n          <ApolloProvider client={apolloClient}>\r\n            <Web3Provider>\r\n              <ConnectedWeb3>\r\n                <Main />\r\n              </ConnectedWeb3>\r\n            </Web3Provider>\r\n          </ApolloProvider>\r\n        </SnackbarProvider>\r\n      </Background>\r\n    </LocalizationProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import CssBaseline from '@mui/material/CssBaseline';\r\nimport { ThemeProvider } from '@mui/material/styles';\r\nimport * as React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport theme from './theme';\r\n\r\nReactDOM.render(\r\n  <ThemeProvider theme={theme}>\r\n    {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\r\n    <CssBaseline />\r\n    <App />\r\n  </ThemeProvider>,\r\n  document.querySelector('#root'),\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./common.util\"), exports);\r\n__exportStar(require(\"./compress.util\"), exports);\r\n__exportStar(require(\"./emitter\"), exports);\r\n__exportStar(require(\"./ensure\"), exports);\r\n__exportStar(require(\"./explorer.util\"), exports);\r\n__exportStar(require(\"./file.util\"), exports);\r\n__exportStar(require(\"./filter.util\"), exports);\r\n__exportStar(require(\"./format.util\"), exports);\r\n__exportStar(require(\"./logger\"), exports);\r\n__exportStar(require(\"./retry.util\"), exports);\r\n__exportStar(require(\"./task\"), exports);\r\n__exportStar(require(\"./token.util\"), exports);\r\n__exportStar(require(\"./transform.util\"), exports);\r\n__exportStar(require(\"./types\"), exports);\r\n__exportStar(require(\"./url.util\"), exports);\r\n"],"sourceRoot":""}
{"version":3,"sources":["../../common/dist/common/index.js","../../common/dist/wallet/index.js","../../common/dist/wallet/types.js","../../common/dist/search/index.js","../../common/dist/contracts/index.js","../../common/dist/contracts/base.contract.js","../../common/dist/clients/index.js","../../common/dist/datasources/index.js","../../common/dist/common/config.js","../../common/dist/common/constants.js","../../common/dist/util/common.util.js","../../common/dist/util/compress.util.js","../../common/dist/util/emitter.js","../../common/dist/util/ensure.js","../../common/dist/util/explorer.util.js","../../common/dist/util/file.util.js","../../common/dist/util/filter.util.js","../../common/dist/util/format.util.js","../../common/dist/util/logger.js","../../common/dist/util/retry.util.js","../../common/dist/util/task.js","../../common/dist/util/token.util.js","../../common/dist/util/transform.util.js","../../common/dist/util/types.js","../../common/dist/util/url.util.js","../../common/dist/wallet/connector.js","../../common/dist/wallet/factory.js","../../common/dist/wallet/manager.js","../../common/dist/wallet/store.js","../../common/dist/search/punk.search.js","../../common/dist/contracts/punks.contract.js","../../common/dist/clients/vite.client.js","../../common/dist/datasources/base.datasource.js","../../common/dist/datasources/vite.datasource.js","../../common/dist/index.js","common/config.ts","common/constants.ts","storage/wallet.storage.ts","util/file.util.ts","datasources/mock.datasource.ts","contracts/punks.contract.ts","datasources/vite.datasource.ts","contexts/common.context.ts","mutations/market.ts","mutations/punk.ts","queries/punk.ts","queries/market.ts","queries/general.ts","clients/apollo.client.ts","common/network.ts","features/layout/components/footer/component.tsx","features/layout/components/header-loading/component.tsx","features/layout/components/main-scroll/component.tsx","features/layout/components/main-wrapper/component.tsx","features/main/components/loading/component.tsx","contexts/web3.tsx","contexts/connectedWeb3.tsx","util/snackbar.util.ts","util/web.util.ts","features/common/components/alert/component.tsx","features/common/components/click-once-button/component.tsx","features/common/components/fa-icon/component.tsx","features/common/components/tooltip/component.tsx","features/marketplace/components/browse-item/component.tsx","features/punk/components/infinite-list/component.tsx","services/general.service.ts","services/market.service.ts","util/icon.util.ts","features/common/components/explorer-link/component.tsx","util/moment.util.ts","features/common/components/event-list-loading/component.tsx","features/punk/components/dialog-accept/component.tsx","features/punk/components/dialog-bid/component.tsx","features/punk/components/dialog-cancel/component.tsx","features/punk/components/dialog-gift/component.tsx","features/punk/components/dialog-offer/component.tsx","features/punk/components/dialog/component.tsx","features/account/components/auction-list/component.tsx","features/account/components/auctions/component.tsx","features/account/components/details/component.tsx","features/common/components/test/component.tsx","services/punk.service.ts","features/landing/components/main-image/component.tsx","features/common/components/test-image/component.tsx","features/common/components/test-list/component.tsx","features/common/components/countdown/component.tsx","features/landing/components/faq/component.tsx","features/landing/components/mints-remaining/component.tsx","hooks/punk.hook.ts","theme.tsx","features/landing/components/ranking/component.tsx","features/landing/components/main/component.tsx","features/main/components/qrcode/component.tsx","features/main/components/login/component.tsx","features/layout/components/header/component.tsx","features/common/components/event-list/component.tsx","features/marketplace/components/browse-activity/component.tsx","features/marketplace/components/browse-items-filter/component.tsx","features/marketplace/components/browse-items/component.tsx","features/marketplace/components/browse/component.tsx","features/marketplace/components/item/component.tsx","features/punk/components/image/component.tsx","features/punk/components/dialog-mint/component.tsx","features/punk/components/activity/component.tsx","features/punk/components/info-actions/component.tsx","features/punk/components/info/component.tsx","features/punk/components/main/component.tsx","features/main/components/dialog-transaction/component.tsx","features/main/components/quota/component.tsx","features/main/components/main/component.tsx","App.tsx","reportWebVitals.ts","index.tsx","../../common/dist/util/index.js"],"names":["__createBinding","this","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__exportStar","exports","p","prototype","hasOwnProperty","call","value","require","WalletType","__extends","extendStatics","d","b","setPrototypeOf","__proto__","Array","TypeError","String","__","constructor","SessionWalletAccount","WebWalletAccount","WalletAccount","WalletAccountType","SessionWallet","WebWallet","Wallet","type","init","accounts","_type","baseInit","fromJS","data","Web","Session","configurable","_this","active","createAccount","isArray","forEach","account","push","_super","mnemonic","session","timestamp","id","address","privateKey","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","pop","length","BaseContract","util_1","logger","getLogger","_minQuota","PunkTypes","BigNumberWrapper","objectFromEntries","entries","fromEntries","map","entry","name","initAsync","client","basePath","_a","_client","initContractAsyncProtected","initAsyncProtected","_contract","ensureQuotaAsync","_quota","getQuotaAsync","currentQuota","lte","Error","toBoolean","concat","callContractAsync","_account","_methodName","_params","amount","tokenId","result1","error_1","message","abi","waitForAccountBlockAsync","height","FormatUtil","formatMessage","stakeForQuotaAsync","_amount","createAddressListenerAsync","logs","listener","on","results","index","info","vmLog","decodeVmLog","vmlog","CommonConfig","_config","USE_IPFS","set","_flag","IS_PRODUCTION","CONTRACT_ADDRESS","EXPLORER_URL","ENABLE_LOGGER","DefaultPunkFilterValues","ActionName","PunkEventTypes","PunkSortTypes","OrderTypes","Networks","CommonConstants","PUNK_NAME","MARKET_DATA_URL","CDN_URL","IPFS_GATEWAY_URL","ZERO_ADDRESS","VITE_TOKEN_ID","CURRENCY_NAME","CURRENCY_DECIMALS","TOTAL_MINTS","networkId","rpcUrl","connectorUrl","OrderBy","ASC","DESC","PunkSortBy","ID","RANK","BID","OFFER","PunkEventType","Unknown","toString","Mint","Offer","NewBid","CancelBid","Buy","CancelOffer","unknown","list","bid","buy","sale","sell","gift","listing","transfer","claim","accept","acceptBid","cancel","cancelBid","cancelSale","cancelGift","sortBy","orderBy","search","CommonUtil","big_js_1","uuid_1","isString","isNumber","isNaN","parseInt","isFinite","isNullOrWhitespace","trim","isNullOrDefault","defaultValue","timeout","ms","setTimeout","toJsonString","JSON","stringify","toUint8Array","encoding","Uint8Array","Buffer","from","imageUrlToBlob","url","fetch","blob","random","min","max","Math","floor","calculatePercentage","current","goal","default","div","mul","toNumber","error","calculateMaxRows","total","rpp","page","uuid","v4","appendPath","_path","_appendix","appendix","startsWith","substring","endsWith","isValidHttpUrl","URL","protocol","truncateString","str","maxLength","truncateStringInTheMiddle","strPositionStart","strPositionEnd","CompressUtil","pako","compress","gzip","to","decompress","ungzip","getEmitter","GlobalEmitter","events_1","_1","arguments","emitReInit","emit","GlobalEvent","ReInit","emitVisibilityChanged","state","DocumentVisibilityChanged","emitConfirmTransactionDialog","open","ConfirmTransactionDialog","emitConnectWalletDialog","ConnectWalletDialog","emitQuotaChanged","quota","QuotaChanged","emitMarketChanged","event","MarketChanged","emitPunkChanged","PunkChanged","emitPunkFilterValuesChanged","oldValues","newValues","PunkFilterValuesChanged","EventEmitter","emitter","Ensure","notNull","property","propertyName","notNullOrWhiteSpace","ExplorerUtil","__1","getBaseUrl","_baseUrl","baseUrl","getAddressUrl","_address","DEFAULT_BASE_URL","getTxUrl","_tx","getNodeFileUtil","NodeFileUtil","getLocalFileUtil","LocalFileUtil","FileUtil","fs","node_fetch_1","readFileAsync","path","readFileSync","writeFileAsync","writeFileSync","localFileUtil","response","arrayBuffer","text","nodeFileUtil","FilterUtil","lodash_1","sortPunks","sort","order","punks","Number","rank","filter","gt","a","_c","_d","_e","_f","_b","offer","minAmount","defaultMessage","console","log","graphQLErrors","substr","formatNumber","number","toLocaleString","navigator","language","__spreadArray","pack","ar","i","l","slice","ExtendedConsoleLogger","ConsoleLogger","LogEventModel","assign","noop","isEnabled","debug","bind","warn","Date","toLocaleTimeString","createLogEventModel","args","_i","mapFn","banner","e1","Function","RetryUtil","promiseRetry","fn","retries","err","catch","Task","task","interval","_task","_taskInterval","_run","_taskTimer","_onStop","_callback","start","callback","stop","window","clearTimeout","TokenUtil","bignumber_js_1","roundBigNumber","bn","tokenDecimals","decimals","BigNumber","pow","decimalPlaces","ROUND_DOWN","formatBigNumber","maxDigits","rounded","formatted","toFormat","formatVite","formatViteFull","formatViteTooltip","TransformUtil","toBigNumber","toMaybeBigNumber","defaultBigNumber","toAddress","toTimestamp","date","getTime","toPunkEvent","__typename","TypeNames","PunkEvent","accountBlockHash","accountBlockHeight","eventType","punkId","fromAddress","toPunkInfo","owner","toMarketBid","toMarketOffer","itemIndex","MarketBid","bidder","MarketOffer","seller","onlySellTo","toAccountAuction","auction","auctionType","DocumentState","OrderType","ProviderType","Punk","PunkSortType","PunkDialogType","MarketplaceTab","MarketEventType","AccountAuctionType","ViteQuotaType","VmLogEvent","UrlUtil","getPunkUrl","image","cid","getPunkIpfsUrlByCid","getPunkIpfsUrl","WalletConnector","connector_1","types_1","walletManager","opts","meta","_walletManager","payload","params","saveSession","stopBizHeartBeat","removeWallet","uri","off","sessionAccounts","wallet","setWallet","updateSession","existing","getWallet","updateWalletStore","createSession","sendTransactionAsync","res","rej","sendCustomRequest","method","r","signMessageAsync","killSessionAsync","killSession","WalletConnectorFactory","getValidSession","createConnector","network","getActiveAccount","bridge","lastAccount","connector","createAsync","WalletManager","vitejs_1","_store","_mnemonicDeriveIndex","initWallet","getItem","_wallet","updateWallet","cb","_setWalletCallback","setItem","createWebWallet","validateMnemonic","resetWallet","createWebWalletAccount","getAccountByAddress","find","addAccount","setActiveAccount","getAccounts","clear","deriveAddress","mnemonics","createAddressByPrivateKey","validateMnemonics","getPunkSearch","PunkSearch","flexsearch_1","_index","Document","document","tag","punks_1","add","query","mappedResult","split","limit","enrich","intersectedResult","intersection","ids","intersectionWith","PunksBaseContract","AbiItemType","base_contract_1","_abiMap","Map","getDeveloper","getAbiItem","getMarketInfo","isContract","balanceOf","ownerOf","getMappedIndex","totalSupply","getTokensOf","tokenURI","getOffer","getBid","transferEvent","marketChangedEvent","punkChangedEvent","_name","getAbiItemByType","_abiItemType","callOffChainMethodAsync","offChain","setMintPriceAsync","_price","MintPrice","setActionPriceAsync","ActionPrice","getDeveloperAsync","setDeveloperAsync","getMarketInfoAsync","marketStarted","market_started","mintsRemaining","mints_remaining","mintPrice","mint_price","actionPrice","action_price","setMarketStartedAsync","_started","isContractAsync","balanceOfAsync","_owner","ownerOfAsync","_tokenId","getMappedIndexAsync","_refId","setMappedIndicesAsync","_indices","_startIndex","mintAsync","_mintPrice","totalSupplyAsync","getTokensOfAsync","tokenURIAsync","getBaseUrlAsync","setBaseUrlAsync","getOfferAsync","_punkId","isForSale","getBidAsync","hasBid","cancelOfferAsync","offerAsync","_minSalePrice","_fee","offerToAddressAsync","buyAsync","cancelBidAsync","enterBidAsync","plus","toFixed","acceptBidAsync","_minPrice","__assign","s","getViteClient","ViteClient","common_1","wallet_1","HTTP_RPC","WS_RPC","providerOptions","retryTimes","retryInterval","providerType","_network","_connector","isResolved","WEBSOCKET","_provider","_emitter","_isConnected","ViteAPI","dispose","destroy","encodeParameter","param","encodeLogSignature","jsonFunction","methodName","requestAsync","request","toLowerCase","includes","getSnapshotChainHeightAsync","getAccountBlockHeightAsync","blockCount","getBalanceAsync","balanceInfoMap","balance","maxQuota","stakeAmount","sendAsync","block","accountBlock","createAccountBlock","sendAccountBlockAsync","beneficiaryAddress","createContractAsync","binary","code","responseLatency","quotaMultiplier","randomDegree","contractAddress","offchaincode","dataBase64","resultBytes","outputs","offchainDecodeResult","resultList","encodeFunctionCall","selfAddr","offChainCode","decodeParameters","topics","j","abiItem","decodeVmLogByAbiItem","topic","decodeLog","inputs","utils","_Buffer","getEventsByBlockAsync","fromHeight","toHeight","midHeight","addressHeightRange","subscribe","removeListener","unsubscribe","waitForNextVmLogEventAsync","now","blockByHeight","receiveBlockHash","blockByHash","err_1","getAccountBlockStatus","receiveTransactionAsync","blocks","ab","sendBlockHash","hash","receiveAllOnroadTxAsync","RECEIVE_PER_ROUND","error_2","setProvider","setPrivateKey","autoSetPreviousAccountBlock","sign","send","status","resolveAccountBlockData","statusTxt","blockType","bytes","BaseDataSource","search_1","_accountAuctions","_punkSearch","_punkAttributes","_punks","_punksFiltered","searchTerm","items","initPunkAttributesAsync","attributes","fileUtil","parse","initPunksAsync","infos","punk","_punkInfos","getDefaultPunkInfos","unshift","updatePunksAsync","initAccountAuctionsAsync","addAccountAuction","bidAuction","offerAuction","_auction","auctions","Bid","initBaseAsync","initPunkInfosAsync","disposeProtected","getAccount","getPunkAttributesAsync","getPunkAsync","getPunksAsync","_limit","_offset","_sort","_order","_search","getPunksAllAsync","getActionPriceAsync","_actionPrice","getMintPriceAsync","getAccountAuctionsAsync","_cursor","cursorIndex","orderAccountAuctions","findIndex","eq","cursor","prev","createId","ViteBaseDataSource","axios_1","clients_1","contracts_1","getNewMarketEventsAsync","_from","encodedLogSignature","contract","responseType","updatePunkInfosAsync","refHeight","walletConnectorFactory","_listener","handleVmLogAsync","getPunkEventsAsync","_id","_height","events","blockHeight","getEventsFromHeight","reverse","toPunkEvents","getPunkOwnerAsync","getPunksByAddressAsync","result_1","getMarketBidAsync","getMarketOfferAsync","getMarketEventsAsync","maximum","minus","checkQuotaAsync","fee","getFeeAsync","bidAsync","marketEvent","punkEvent","transformed","decoded","_refHeight","events_2","_g","config","_useIpfs","process","getClientConfig","ClientConstants","APP_NAME","USE_MOCK_DATASOURCE","WEB_WALLET_STORAGE_SPACE","SESSION_WALLET_STORAGE_SPACE","BG_URL","ITEM_BG_URL","SAMPLE_PUNK_URL","LANDING_IMAGE_URL","QUOTA_WIKI_URL","DISCORD_URL","TWITTER_URL","GITHUB_URL","QUOTA_THRESHOLD","WalletStore","_webWalletKey","_sessionWalletKey","localStorage","removeItem","sessionStorage","saveData","manager","getWalletManager","BrowserFileUtil","browserFileUtil","getBrowserFileUtil","MockDataSource","_events","clearMock","shiftedBy","ds","PunksContract","_fileUtil","punksContract","ViteDataSource","CommonContext","_isInitialized","_datasource","clientConfig","NETWORK_ID","checkIpfsAsync","img","Image","onload","onerror","src","context","getCommonContext","OFFER_MUTATION","gql","CANCEL_OFFER_MUTATION","BUY_MUTATION","BID_MUTATION","ACCEPT_BID_MUTATION","CANCEL_BID_MUTATION","MarketMutations","parent","datasource","cancelOffer","MINT_MUTATION","PunkMutations","mint","PUNK_FIELDS","PUNK_EVENT_FIELDS","GET_PUNK_ATTRIBUTES_QUERY","GET_PUNK_EVENTS_QUERY","GET_PUNK_OWNER_QUERY","GET_PUNK_QUERY","GET_PUNKS_QUERY","GET_PUNKS_ALL_QUERY","GET_PUNKS_BY_ADDRESS_QUERY","PunkQueries","punkAttributes","punkEvents","offset","punkOwner","punksAll","punksByAddress","MARKET_BID_FIELDS","MARKET_OFFER_FIELDS","GET_MARKET_INFO_QUERY","GET_MARKET_BID_QUERY","GET_MARKET_OFFER_QUERY","GET_MARKET_EVENTS_QUERY","MarketQueries","marketInfo","marketBid","marketOffer","marketEvents","GET_QUOTA_QUERY","GET_ACCOUNT_AUCTIONS_QUERY","GeneralQueries","accountAuctions","ApolloClientWrapper","ApolloClient","cache","InMemoryCache","typePolicies","Query","fields","offsetLimitPagination","resolvers","GraphQLScalarType","description","serialize","parseValue","Mutation","headers","getApolloClient","_networkHeight","_setNetworkCallback","getNetworkManager","Root","styled","theme","Footer","Typography","TitleTypography","HeaderLoading","props","AppBar","position","Toolbar","variant","MainScrollStyled","MainScrollInner","MainScroll","children","restProps","Container","maxWidth","MainWrapperStyled","MainWrapper","MainLoading","useState","retryCount","setRetryCount","useEffect","Chip","size","Web3Context","React","createContext","Web3Provider","setError","setNetwork","onSetWalletCallback","onSetNetworkCallback","Provider","ConnectedWeb3Context","useConnectedWeb3Context","useContext","ConnectedWeb3","connection","setConnection","mounted","useRef","web3Context","useWeb3Context","commonContext","networkManager","getNetwork","logout","useCallback","location","reload","_retryCount","startTimestamp","retryId","isInitialized","minDelay","elapsed","SnackbarUtil","snackbar","enqueueSnackbar","WebUtil","getDocumentState","visibilityState","Hidden","Active","Alert","color","backgroundColor","Paper","Box","sx","padding","textAlign","ClickOnceButton","isDisabled","setIsDisabled","handleClick","callbackFn","enqueueError","LoadingButton","loading","fullWidth","disabled","onClick","startIcon","FontAwesomeSvgIcon","forwardRef","ref","icon","width","svgPathData","SvgIcon","viewBox","style","opacity","ExtendedBootstrapTooltip","BootstrapTooltip","tooltipClasses","tooltip","className","Tooltip","classes","popper","palette","common","white","boxShadow","shadows","fontSize","arrow","black","CustomCardMedia","typography","pxToRem","border","PunkImage","MarketplaceBrowseItem","Card","CardActionArea","component","RouterLink","item","top","left","title","placement","faUserCircle","ml","right","faGem","bottom","faHandHoldingUsd","mt","mr","faTag","float","backgroundImage","CardContent","overflow","mb","EmptyResult","isLoading","isEmpty","InfiniteListLoading","Grid","container","spacing","justifyContent","alignItems","xs","md","InfinitePunkList","pt","pb","dataLength","fetchMoreDataAsync","hasMore","loader","scrollThreshold","scrollableTarget","marginBottom","sm","lg","display","minWidth","service","_apollo","getContractQuota","_fetchPolicy","variables","fetchPolicy","getAccountAuctions","getGeneralService","MarketService","getEventsAsync","mutate","mutation","Boolean","getMarketService","IconUtil","getBuyEventTypeIcon","faDonate","getClaimEventTypeIcon","faExchangeAlt","getOfferEventTypeIcon","getGiftEventTypeIcon","faGift","getCancelSaleEventTypeIcon","faPowerOff","getCancelGiftEventTypeIcon","faEraser","getPunkEventTypeIcon","faTrophy","faBan","faQuestion","getAccountAuctionTypeIcon","ExplorerLinkType","MomentUtil","moment","locale","unix","utc","local","getLocal","format","getLocalTime","getLocalDate","unit","diff","duration","EventListLoading","count","PunkAcceptDialog","setAmount","ACCEPT_OFFER","handleClose","setState","handleConfirmAsync","_message","_success","replace","enqueueMessage","callbackAsync","Dialog","onClose","DialogTitle","DialogContent","gutterBottom","FormControl","Input","DialogActions","Button","PunkBidDialog","setDisabled","changeAmount","updateFee","DialogContentText","InputLabel","htmlFor","onChange","target","autoFocus","startAdornment","InputAdornment","align","PunkCancelDialog","actionName","setActionName","CANCEL_BID","PunkGiftDialog","setAddress","changeAddress","placeholder","marginTop","PunkOfferDialog","lt","PunkDialog","setFee","handleEvent","success","GIFT","CANCEL_OFFER","ACCEPT_BID","CustomAvatar","Avatar","CustomTableCell","TableCell","EventTableRow","isAnon","setIsAnon","isOwner","setIsOwner","useQuery","onCompleted","momentUtil","handleClaimAsync","handleOpenDialog","TableRow","scope","getEventName","Link","underline","getLocalReverseFormatted","getFromUnix","isAuthorized","AccountAuctionList","currentAuction","setCurrentAuction","UNKNOWN","dialogState","setDialogState","emptyMessage","_item","cleanupAsync","dialogCallbackAsync","newEvents","TableContainer","Table","stickyHeader","TableHead","TableBody","AccountAuctions","setIsAuthorized","setIsLoading","setHasMore","setCursor","setEvents","setNewEvents","refetchDataAsync","refetch","refresh","refreshAsync","addNewEvent","Stack","direction","IconButton","AccountDetails","useParams","currentLength","fetchMore","wordBreak","Test","viteClient","confetti","particleCount","spread","PunkService","getById","getOwnerAsync","getExtendedAsync","_punk","defaultPunkExtended","ownerQuery","bidQuery","offerQuery","punkExtended","getPunkService","ImageContainer","Img1","Img2","LandingMainImage","imageUrl1","setImageUrl1","imageUrl2","setImageUrl2","setImageUrlsAsync","punkId1","punk1","punkId2","punk2","TestImage","TestList","allPunks","setAllPunks","setPunks","Set","filtered","has","Countdown","useMemo","getDuration","days","hours","minutes","seconds","asSeconds","Accordion","disableGutters","elevation","square","divider","borderBottom","mode","AccordionSummary","expandIcon","flexDirection","transform","marginLeft","AccordionDetails","MuiAccordionDetails","borderTop","LandingFaq","faqExpanded","setFaqExpanded","handleChange","panel","newExpanded","expanded","href","MintsRemaining","pct","setPct","minValue","px","Skeleton","animation","LinearProgress","createTheme","fontFamily","join","primary","main","secondary","LinearProgressWithLabel","matches","useMediaQuery","breakpoints","up","truncateAddress","LandingRanking","maxRares","setMaxRares","ranks","setRanks","notifyOnNetworkStatusChange","refetchWritePolicy","usePunkById","setRanksAsync","_holderMap","_existing","rares","_holders","_maxRares","key","_holdersOrdered","h","splice","flexGrow","paragraph","toISOString","LandingMain","displayNumber","setMintPrice","setMarketStarted","canMint","setCanMint","setMintsRemaining","punkService","handleMintAsync","preload","autoPlay","muted","playsInline","loop","faTwitter","faGithub","faDiscord","alt","QrCode","elementRef","defaultOpt","ecLevel","HIGH","minVersion","background","modes","DRAW_WITH_IMAGE_BOX","radius","mSize","clientWidth","innerHTML","qrcode","generate","LoginDialog","setUri","setMnemonic","setOpen","connectorFactory","handleCreateSession","ENABLE_MNEMONIC_LOGIN","autoComplete","Header","navigate","useNavigate","useTheme","loginOpen","setLoginOpen","showAccount","textDecoration","Fragment","ExplorerLink","getUrl","Address","setUrl","formatTimestamp","PRE_MINT_HEIGHT","isPreMint","Transaction","EventList","MarketplaceBrowseActivity","MarketplaceBrowseItemsFilter","values","setValues","attributesQuery","emitEvent","Autocomplete","multiple","freeSolo","options","getOptionLabel","option","filterSelectedOptions","renderInput","TextField","FormGroup","Select","labelId","MenuItem","ToggleButtonGroup","exclusive","ToggleButton","MarketplaceBrowseItems","setFilter","TabPanel","other","role","hidden","MarketplaceBrowse","initialValue","tab","Activity","setValue","borderColor","Tabs","newValue","Tab","MarketplaceItem","CardContainer","Img","imageUrl","setImageUrl","maxHeight","MintDialog","setPunkId","punkImage","setPunkImage","punkCid","setPunkCid","zIndex","transitionDuration","keepMounted","paddingBottom","PunkActivity","PunkInfoActions","hasOwner","setHasOwner","showAll","showAny","showBuy","showClaim","showBid","showSell","showAcceptBid","showCancelBid","showCancelSale","showCancelGift","showButtonState","setShowButtonState","handleFailureAsync","refetchAsync","faCheck","InfoContainer","BottomContent","PunkInfo","down","setPunkExtended","dateRef","setDateRef","all","newOwner","newBid","newOffer","usePunkInfo","Verified","borderRadius","verticalAlign","faSnowflake","PunkDetails","Transition","Slide","TransitionComponent","QuotaContainer","QuotaAlert","ContractQuota","setQuota","showContainer","setShowContainer","setInterval","quotaResult","gte","clearInterval","severity","endIcon","Main","visibility","setVisibility","basename","BASENAME","useSnackbar","addEventListener","removeEventListener","element","Background","App","apolloClient","LocalizationProvider","dateAdapter","DateAdapter","maxSnack","ApolloProvider","reportWebVitals","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","ThemeProvider","CssBaseline","querySelector"],"mappings":"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","file":"static/js/main.fff0b165.chunk.js","sourcesContent":["\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./config\"), exports);\r\n__exportStar(require(\"./constants\"), exports);\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./connector\"), exports);\r\n__exportStar(require(\"./factory\"), exports);\r\n__exportStar(require(\"./manager\"), exports);\r\n__exportStar(require(\"./store\"), exports);\r\n__exportStar(require(\"./types\"), exports);\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SessionWalletAccount = exports.WebWalletAccount = exports.WalletAccount = exports.WalletAccountType = exports.SessionWallet = exports.WebWallet = exports.Wallet = exports.WalletType = void 0;\r\nvar WalletType;\r\n(function (WalletType) {\r\n    WalletType[\"Web\"] = \"Web\";\r\n    WalletType[\"Session\"] = \"Session\";\r\n})(WalletType = exports.WalletType || (exports.WalletType = {}));\r\nvar Wallet = /** @class */ (function () {\r\n    function Wallet(type, init) {\r\n        this.accounts = [];\r\n        this._type = type;\r\n        this.baseInit(init);\r\n    }\r\n    Wallet.fromJS = function (data) {\r\n        data = typeof data === 'object' ? data : {};\r\n        switch (data._type) {\r\n            case WalletType.Web:\r\n                return new WebWallet(data);\r\n            case WalletType.Session:\r\n                return new SessionWallet(data);\r\n            default:\r\n                break;\r\n        }\r\n        return undefined;\r\n    };\r\n    Object.defineProperty(Wallet.prototype, \"type\", {\r\n        get: function () {\r\n            return this._type;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Wallet.prototype.baseInit = function (data) {\r\n        var _this = this;\r\n        if (data) {\r\n            this.active = data.active ? this.createAccount(data.active) : undefined;\r\n            if (data.accounts && Array.isArray(data.accounts)) {\r\n                data.accounts.forEach(function (account) {\r\n                    _this.accounts.push(_this.createAccount(account));\r\n                });\r\n            }\r\n        }\r\n        if (!this.accounts) {\r\n            this.accounts = [];\r\n        }\r\n    };\r\n    return Wallet;\r\n}());\r\nexports.Wallet = Wallet;\r\nvar WebWallet = /** @class */ (function (_super) {\r\n    __extends(WebWallet, _super);\r\n    function WebWallet(init) {\r\n        var _this = _super.call(this, WalletType.Web, init) || this;\r\n        _this.init(init);\r\n        return _this;\r\n    }\r\n    WebWallet.prototype.init = function (data) {\r\n        if (data) {\r\n            this.mnemonic = data.mnemonic;\r\n        }\r\n    };\r\n    WebWallet.prototype.createAccount = function (data) {\r\n        return new WebWalletAccount(data);\r\n    };\r\n    return WebWallet;\r\n}(Wallet));\r\nexports.WebWallet = WebWallet;\r\nvar SessionWallet = /** @class */ (function (_super) {\r\n    __extends(SessionWallet, _super);\r\n    function SessionWallet(init) {\r\n        var _this = _super.call(this, WalletType.Session, init) || this;\r\n        _this.init(init);\r\n        return _this;\r\n    }\r\n    SessionWallet.prototype.init = function (data) {\r\n        if (data) {\r\n            this.session = data.session;\r\n            this.timestamp = data.timestamp;\r\n        }\r\n    };\r\n    SessionWallet.prototype.createAccount = function (data) {\r\n        return new SessionWalletAccount(data);\r\n    };\r\n    return SessionWallet;\r\n}(Wallet));\r\nexports.SessionWallet = SessionWallet;\r\nvar WalletAccountType;\r\n(function (WalletAccountType) {\r\n    WalletAccountType[\"Web\"] = \"Web\";\r\n    WalletAccountType[\"Session\"] = \"Session\";\r\n})(WalletAccountType = exports.WalletAccountType || (exports.WalletAccountType = {}));\r\nvar WalletAccount = /** @class */ (function () {\r\n    function WalletAccount(type, init) {\r\n        this._type = type;\r\n        this.baseInit(init);\r\n    }\r\n    WalletAccount.fromJS = function (data) {\r\n        data = typeof data === 'object' ? data : {};\r\n        switch (data._type) {\r\n            case WalletType.Web:\r\n                return new WebWalletAccount(data);\r\n            case WalletType.Session:\r\n                return new SessionWalletAccount(data);\r\n            default:\r\n                break;\r\n        }\r\n        return undefined;\r\n    };\r\n    Object.defineProperty(WalletAccount.prototype, \"type\", {\r\n        get: function () {\r\n            return this._type;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    WalletAccount.prototype.baseInit = function (data) {\r\n        if (data) {\r\n            this.id = data.id;\r\n            this.address = data.address;\r\n        }\r\n    };\r\n    return WalletAccount;\r\n}());\r\nexports.WalletAccount = WalletAccount;\r\nvar WebWalletAccount = /** @class */ (function (_super) {\r\n    __extends(WebWalletAccount, _super);\r\n    function WebWalletAccount(init) {\r\n        var _this = _super.call(this, WalletAccountType.Web, init) || this;\r\n        _this.init(init);\r\n        return _this;\r\n    }\r\n    WebWalletAccount.prototype.init = function (data) {\r\n        if (data) {\r\n            this.privateKey = data.privateKey;\r\n        }\r\n    };\r\n    return WebWalletAccount;\r\n}(WalletAccount));\r\nexports.WebWalletAccount = WebWalletAccount;\r\nvar SessionWalletAccount = /** @class */ (function (_super) {\r\n    __extends(SessionWalletAccount, _super);\r\n    function SessionWalletAccount(init) {\r\n        return _super.call(this, WalletAccountType.Session, init) || this;\r\n    }\r\n    return SessionWalletAccount;\r\n}(WalletAccount));\r\nexports.SessionWalletAccount = SessionWalletAccount;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./punk.search\"), exports);\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./base.contract\"), exports);\r\n__exportStar(require(\"./punks.contract\"), exports);\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseContract = void 0;\r\nvar util_1 = require(\"../util\");\r\nvar logger = (0, util_1.getLogger)();\r\nvar BaseContract = /** @class */ (function () {\r\n    function BaseContract() {\r\n        this._minQuota = new util_1.PunkTypes.BigNumberWrapper(\"10000\");\r\n        this.objectFromEntries = function (entries) {\r\n            return Object.fromEntries(entries.map(function (entry) {\r\n                return [entry.name, entry.value];\r\n            }));\r\n        };\r\n    }\r\n    BaseContract.prototype.initAsync = function (client, basePath) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this._client = client;\r\n                        return [4 /*yield*/, this.initContractAsyncProtected(basePath)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.initAsyncProtected()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Object.defineProperty(BaseContract.prototype, \"contract\", {\r\n        get: function () {\r\n            return this._contract;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    BaseContract.prototype.ensureQuotaAsync = function (_quota) {\r\n        if (_quota === void 0) { _quota = this._minQuota; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this._client.getQuotaAsync(this._contract.address)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (result.currentQuota.lte(_quota)) {\r\n                            throw new Error(\"Contract has insufficient quota\");\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseContract.prototype.toBoolean = function (value) {\r\n        if (value === \"0\") {\r\n            return false;\r\n        }\r\n        else if (value === \"1\") {\r\n            return true;\r\n        }\r\n        else {\r\n            throw new Error(\"Value \".concat(value, \" is not boolean\"));\r\n        }\r\n    };\r\n    BaseContract.prototype.callContractAsync = function (_account, _methodName, _params, amount, tokenId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result1, result2, error_1, message;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.ensureQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        _a.trys.push([2, 5, , 6]);\r\n                        return [4 /*yield*/, this._client.callContractAsync(_account, _methodName, this._contract.abi, _params, this._contract.address, amount, tokenId)];\r\n                    case 3:\r\n                        result1 = _a.sent();\r\n                        return [4 /*yield*/, this._client.waitForAccountBlockAsync(_account.address, result1.height)];\r\n                    case 4:\r\n                        result2 = _a.sent();\r\n                        return [2 /*return*/, result2];\r\n                    case 5:\r\n                        error_1 = _a.sent();\r\n                        message = util_1.FormatUtil.formatMessage(error_1);\r\n                        if (message) {\r\n                            throw new Error(message);\r\n                        }\r\n                        else {\r\n                            throw new Error(\"Error\");\r\n                        }\r\n                        return [3 /*break*/, 6];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseContract.prototype.stakeForQuotaAsync = function (_account, _amount) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result1, result2;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this._client.stakeForQuotaAsync(_account, this._contract.address, _amount)];\r\n                    case 1:\r\n                        result1 = _a.sent();\r\n                        return [4 /*yield*/, this._client.waitForAccountBlockAsync(_account.address, result1.height)];\r\n                    case 2:\r\n                        result2 = _a.sent();\r\n                        return [2 /*return*/, result2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseContract.prototype.createAddressListenerAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logs, listener;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logs = [];\r\n                        return [4 /*yield*/, this._client.createAddressListenerAsync(this._contract.address)];\r\n                    case 1:\r\n                        listener = _a.sent();\r\n                        listener.on(function (results) {\r\n                            for (var index = 0; index < results.length; index++) {\r\n                                var result = results[index];\r\n                                logger.info(result)();\r\n                                var vmLog = _this._client.decodeVmLog(result.vmlog, _this._contract.abi);\r\n                                logs.push(vmLog);\r\n                            }\r\n                        });\r\n                        return [2 /*return*/, {\r\n                                logs: logs,\r\n                                listener: listener\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return BaseContract;\r\n}());\r\nexports.BaseContract = BaseContract;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./vite.client\"), exports);\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./base.datasource\"), exports);\r\n__exportStar(require(\"./vite.datasource\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CommonConfig = void 0;\r\nvar CommonConfig = /** @class */ (function () {\r\n    function CommonConfig() {\r\n    }\r\n    CommonConfig.init = function (_config) {\r\n        this._config = _config;\r\n    };\r\n    Object.defineProperty(CommonConfig, \"USE_IPFS\", {\r\n        get: function () {\r\n            return this._config.USE_IPFS;\r\n        },\r\n        set: function (_flag) {\r\n            this._config.USE_IPFS = _flag;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CommonConfig, \"IS_PRODUCTION\", {\r\n        get: function () {\r\n            return this._config.IS_PRODUCTION;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CommonConfig, \"CONTRACT_ADDRESS\", {\r\n        get: function () {\r\n            return this._config.CONTRACT_ADDRESS;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CommonConfig, \"EXPLORER_URL\", {\r\n        get: function () {\r\n            return this._config.EXPLORER_URL;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CommonConfig, \"ENABLE_LOGGER\", {\r\n        get: function () {\r\n            return this._config.ENABLE_LOGGER;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return CommonConfig;\r\n}());\r\nexports.CommonConfig = CommonConfig;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DefaultPunkFilterValues = exports.ActionName = exports.PunkEventTypes = exports.PunkSortTypes = exports.OrderTypes = exports.Networks = exports.CommonConstants = void 0;\r\nvar util_1 = require(\"../util\");\r\nexports.CommonConstants = {\r\n    PUNK_NAME: 'VitePunk',\r\n    MARKET_DATA_URL: 'https://raw.githubusercontent.com/vitepunks/analytics/master/market_data/raw.json',\r\n    CDN_URL: 'https://cdn.vitepunks.com/',\r\n    //IPFS_GATEWAY_URL: 'https://ipfs.io/ipfs/',\r\n    IPFS_GATEWAY_URL: 'https://cloudflare-ipfs.com/ipfs/',\r\n    EXPLORER_URL: 'https://buidl.viteview.xyz/#/',\r\n    ZERO_ADDRESS: 'vite_0000000000000000000000000000000000000000a4f3a0cb58',\r\n    VITE_TOKEN_ID: 'tti_5649544520544f4b454e6e40',\r\n    CURRENCY_NAME: 'VITE',\r\n    CURRENCY_DECIMALS: 18,\r\n    TOTAL_MINTS: 10000\r\n};\r\nexports.Networks = [\r\n    {\r\n        id: 0,\r\n        networkId: 0,\r\n        name: 'UNKNOWN',\r\n        rpcUrl: '',\r\n        connectorUrl: ''\r\n    },\r\n    {\r\n        id: 1,\r\n        networkId: 1,\r\n        name: 'MAINNET',\r\n        rpcUrl: 'wss://node.vite.net/gvite/ws',\r\n        connectorUrl: 'wss://biforst.vite.net'\r\n    },\r\n    {\r\n        id: 2,\r\n        networkId: 2,\r\n        name: 'TESTNET',\r\n        rpcUrl: 'wss://buidl.vite.net/gvite/ws',\r\n        connectorUrl: 'wss://biforst.vite.net'\r\n    },\r\n    {\r\n        id: 3,\r\n        networkId: 2,\r\n        name: 'TESTNET+MOCK',\r\n        rpcUrl: 'wss://buidl.vite.net/gvite/ws',\r\n        connectorUrl: 'wss://biforst.vite.net'\r\n    },\r\n    {\r\n        id: 4,\r\n        networkId: 5,\r\n        name: 'DEBUG',\r\n        rpcUrl: 'ws://localhost:23457',\r\n        connectorUrl: 'wss://biforst.vite.net'\r\n    }\r\n];\r\nexports.OrderTypes = [\r\n    {\r\n        name: \"Asc\",\r\n        type: util_1.PunkTypes.OrderBy.ASC\r\n    },\r\n    {\r\n        name: \"Desc\",\r\n        type: util_1.PunkTypes.OrderBy.DESC\r\n    }\r\n];\r\nexports.PunkSortTypes = [\r\n    {\r\n        name: \"Id\",\r\n        type: util_1.PunkTypes.PunkSortBy.ID\r\n    },\r\n    {\r\n        name: \"Rank\",\r\n        type: util_1.PunkTypes.PunkSortBy.RANK\r\n    },\r\n    {\r\n        name: \"Bid\",\r\n        type: util_1.PunkTypes.PunkSortBy.BID\r\n    },\r\n    {\r\n        name: \"Price\",\r\n        type: util_1.PunkTypes.PunkSortBy.OFFER\r\n    }\r\n];\r\nexports.PunkEventTypes = [\r\n    {\r\n        name: \"Unknown\",\r\n        type: util_1.PunkTypes.PunkEventType.Unknown.toString()\r\n    },\r\n    {\r\n        name: \"Mint\",\r\n        type: util_1.PunkTypes.PunkEventType.Mint.toString()\r\n    },\r\n    {\r\n        name: \"List\",\r\n        type: util_1.PunkTypes.PunkEventType.Offer.toString()\r\n    },\r\n    {\r\n        name: \"New bid\",\r\n        type: util_1.PunkTypes.PunkEventType.NewBid.toString()\r\n    },\r\n    {\r\n        name: \"Cancel bid\",\r\n        type: util_1.PunkTypes.PunkEventType.CancelBid.toString()\r\n    },\r\n    {\r\n        name: \"Buy\",\r\n        type: util_1.PunkTypes.PunkEventType.Buy.toString()\r\n    },\r\n    {\r\n        name: \"Clear\",\r\n        type: util_1.PunkTypes.PunkEventType.CancelOffer.toString()\r\n    },\r\n];\r\nexports.ActionName = {\r\n    unknown: \"Unknown\",\r\n    list: \"List\",\r\n    bid: \"Bid\",\r\n    buy: \"Buy\",\r\n    sale: \"Sale\",\r\n    sell: \"Sell\",\r\n    gift: \"Gift\",\r\n    listing: \"Listing\",\r\n    transfer: \"Transfer\",\r\n    claim: \"Claim\",\r\n    accept: \"Accept\",\r\n    acceptBid: \"Accept bid\",\r\n    cancel: \"Cancel\",\r\n    cancelBid: \"Cancel bid\",\r\n    cancelSale: \"Cancel sale\",\r\n    cancelGift: \"Cancel gift\"\r\n};\r\nexports.DefaultPunkFilterValues = {\r\n    sortBy: util_1.PunkTypes.PunkSortBy.ID,\r\n    orderBy: util_1.PunkTypes.OrderBy.DESC,\r\n    search: \"\"\r\n};\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CommonUtil = void 0;\r\nvar big_js_1 = require(\"big.js\");\r\nvar uuid_1 = require(\"uuid\");\r\nvar CommonUtil = /** @class */ (function () {\r\n    function CommonUtil() {\r\n    }\r\n    CommonUtil.isString = function (value) {\r\n        return typeof value === 'string' || value instanceof String;\r\n    };\r\n    CommonUtil.isNumber = function (value) {\r\n        return !isNaN(parseInt(value)) && isFinite(value);\r\n    };\r\n    CommonUtil.isNullOrWhitespace = function (value) {\r\n        if (!CommonUtil.isString(value)) {\r\n            // console.log('Expected a string but got: ', value);\r\n            return true;\r\n        }\r\n        else {\r\n            return value === null || value === undefined || value.trim() === '';\r\n        }\r\n    };\r\n    CommonUtil.isNullOrDefault = function (value, defaultValue) {\r\n        return CommonUtil.isNullOrWhitespace(value) || value === defaultValue;\r\n    };\r\n    CommonUtil.timeout = function (ms) {\r\n        return new Promise(function (resolve) { return setTimeout(resolve, ms); });\r\n    };\r\n    CommonUtil.toJsonString = function (data) {\r\n        return JSON.stringify(data, null, 2);\r\n    };\r\n    CommonUtil.toUint8Array = function (data, encoding) {\r\n        if (encoding === void 0) { encoding = 'utf8'; }\r\n        return new Uint8Array(Buffer.from(data, encoding));\r\n    };\r\n    CommonUtil.imageUrlToBlob = function (url) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, fetch(url)];\r\n                    case 1: return [2 /*return*/, (_a.sent()).blob()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    CommonUtil.random = function (min, max) {\r\n        return Math.floor(Math.random() * (max - min + 1) + min);\r\n    };\r\n    CommonUtil.calculatePercentage = function (current, goal) {\r\n        try {\r\n            if (current && goal) {\r\n                return Math.floor((0, big_js_1.default)(current).div((0, big_js_1.default)(goal)).mul(100).toNumber());\r\n            }\r\n        }\r\n        catch (error) {\r\n        }\r\n        return 0;\r\n    };\r\n    CommonUtil.calculateMaxRows = function (total, rpp, page) {\r\n        return Math.min(Math.min(total - rpp * page, rpp), total);\r\n    };\r\n    CommonUtil.uuid = function () {\r\n        return (0, uuid_1.v4)();\r\n    };\r\n    CommonUtil.appendPath = function (_path, _appendix) {\r\n        if (!_path || !_appendix || CommonUtil.isNullOrWhitespace(_path) || CommonUtil.isNullOrWhitespace(_appendix)) {\r\n            return _path;\r\n        }\r\n        var delimiter = '/';\r\n        var appendix = _appendix.startsWith(delimiter) ? _appendix.substring(1, _appendix.length) : _appendix;\r\n        return _path.endsWith(delimiter) ? _path + appendix : _path + delimiter + appendix;\r\n    };\r\n    CommonUtil.isValidHttpUrl = function (value) {\r\n        var url;\r\n        try {\r\n            url = new URL(value);\r\n        }\r\n        catch (_) {\r\n            return false;\r\n        }\r\n        return url.protocol === \"http:\" || url.protocol === \"https:\";\r\n    };\r\n    CommonUtil.truncateString = function (str, maxLength) {\r\n        if (str) {\r\n            if (maxLength < str.length) {\r\n                return \"\".concat(str.substring(0, maxLength), \"...\");\r\n            }\r\n        }\r\n        return str;\r\n    };\r\n    CommonUtil.truncateStringInTheMiddle = function (str, strPositionStart, strPositionEnd) {\r\n        if (str) {\r\n            var minTruncatedLength = strPositionStart + strPositionEnd;\r\n            if (minTruncatedLength < str.length) {\r\n                return \"\".concat(str.substring(0, strPositionStart), \"...\").concat(str.substring(str.length - strPositionEnd, str.length));\r\n            }\r\n        }\r\n        return str;\r\n    };\r\n    return CommonUtil;\r\n}());\r\nexports.CommonUtil = CommonUtil;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CompressUtil = void 0;\r\nvar pako = require(\"pako\");\r\nvar CompressUtil = /** @class */ (function () {\r\n    function CompressUtil() {\r\n    }\r\n    CompressUtil.compress = function (data) {\r\n        return pako.gzip(data, { to: \"string\" });\r\n    };\r\n    CompressUtil.decompress = function (data) {\r\n        return pako.ungzip(data, { to: \"string\" });\r\n    };\r\n    return CompressUtil;\r\n}());\r\nexports.CompressUtil = CompressUtil;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getEmitter = exports.GlobalEmitter = void 0;\r\nvar events_1 = require(\"events\");\r\nvar _1 = require(\".\");\r\nvar GlobalEmitter = /** @class */ (function (_super) {\r\n    __extends(GlobalEmitter, _super);\r\n    function GlobalEmitter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    GlobalEmitter.prototype.emitReInit = function () {\r\n        this.emit(_1.PunkTypes.GlobalEvent.ReInit);\r\n    };\r\n    GlobalEmitter.prototype.emitVisibilityChanged = function (state) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.DocumentVisibilityChanged, state);\r\n    };\r\n    GlobalEmitter.prototype.emitConfirmTransactionDialog = function (open) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.ConfirmTransactionDialog, open);\r\n    };\r\n    GlobalEmitter.prototype.emitConnectWalletDialog = function (open) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.ConnectWalletDialog, open);\r\n    };\r\n    GlobalEmitter.prototype.emitQuotaChanged = function (address, quota) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.QuotaChanged, address, quota);\r\n    };\r\n    GlobalEmitter.prototype.emitMarketChanged = function (event) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.MarketChanged, event);\r\n    };\r\n    GlobalEmitter.prototype.emitPunkChanged = function (event) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.PunkChanged, event);\r\n    };\r\n    GlobalEmitter.prototype.emitPunkFilterValuesChanged = function (oldValues, newValues) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.PunkFilterValuesChanged, oldValues, newValues);\r\n    };\r\n    return GlobalEmitter;\r\n}(events_1.EventEmitter));\r\nexports.GlobalEmitter = GlobalEmitter;\r\nvar emitter = new GlobalEmitter();\r\nvar getEmitter = function () {\r\n    return emitter;\r\n};\r\nexports.getEmitter = getEmitter;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Ensure = void 0;\r\nvar Ensure = /** @class */ (function () {\r\n    function Ensure() {\r\n    }\r\n    Ensure.notNull = function (property, propertyName, message) {\r\n        if (property === null || property === undefined) {\r\n            if (message) {\r\n                throw new Error(message);\r\n            }\r\n            else {\r\n                throw new Error('Unexpected null exception. ' + propertyName);\r\n            }\r\n        }\r\n    };\r\n    Ensure.notNullOrWhiteSpace = function (property, propertyName, message) {\r\n        if (property === null || property === undefined || (property === null || property === void 0 ? void 0 : property.trim()) === '') {\r\n            if (message) {\r\n                throw new Error(message);\r\n            }\r\n            else {\r\n                throw new Error('Unexpected null exception. ' + propertyName);\r\n            }\r\n        }\r\n    };\r\n    Ensure.maxLength = function (property, propertyName, maxLength) {\r\n        if (property && property.length > maxLength) {\r\n            throw new Error(\"\".concat(propertyName, \" exceeds the maximum length of \").concat(maxLength));\r\n        }\r\n    };\r\n    return Ensure;\r\n}());\r\nexports.Ensure = Ensure;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ExplorerUtil = void 0;\r\nvar _1 = require(\".\");\r\nvar __1 = require(\"..\");\r\nvar ExplorerUtil = /** @class */ (function () {\r\n    function ExplorerUtil() {\r\n    }\r\n    ExplorerUtil.getBaseUrl = function (_baseUrl) {\r\n        var baseUrl = _baseUrl;\r\n        if (!baseUrl || _1.CommonUtil.isNullOrWhitespace(baseUrl)) {\r\n            baseUrl = __1.CommonConfig.EXPLORER_URL;\r\n        }\r\n        baseUrl = baseUrl.endsWith('/') ? baseUrl.substring(0, baseUrl.length - 1) : baseUrl;\r\n        return baseUrl;\r\n    };\r\n    ExplorerUtil.getAddressUrl = function (_address, _baseUrl) {\r\n        var baseUrl = ExplorerUtil.getBaseUrl(_baseUrl);\r\n        if (baseUrl === ExplorerUtil.DEFAULT_BASE_URL) {\r\n            return \"\".concat(baseUrl, \"/address/\").concat(_address);\r\n        }\r\n        return \"\".concat(baseUrl, \"/account/\").concat(_address);\r\n    };\r\n    ExplorerUtil.getTxUrl = function (_tx, _baseUrl) {\r\n        var baseUrl = ExplorerUtil.getBaseUrl(_baseUrl);\r\n        if (baseUrl === ExplorerUtil.DEFAULT_BASE_URL) {\r\n            return \"\".concat(baseUrl, \"/tx/\").concat(_tx);\r\n        }\r\n        return \"\".concat(baseUrl, \"/tx/\").concat(_tx);\r\n    };\r\n    ExplorerUtil.DEFAULT_BASE_URL = \"https://vitescan.io\";\r\n    return ExplorerUtil;\r\n}());\r\nexports.ExplorerUtil = ExplorerUtil;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getNodeFileUtil = exports.NodeFileUtil = exports.getLocalFileUtil = exports.LocalFileUtil = exports.FileUtil = void 0;\r\nvar fs = require(\"fs\");\r\nvar node_fetch_1 = require(\"node-fetch\");\r\nvar FileUtil = /** @class */ (function () {\r\n    function FileUtil() {\r\n    }\r\n    return FileUtil;\r\n}());\r\nexports.FileUtil = FileUtil;\r\nvar LocalFileUtil = /** @class */ (function (_super) {\r\n    __extends(LocalFileUtil, _super);\r\n    function LocalFileUtil() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    LocalFileUtil.prototype.readFileAsync = function (path, encoding) {\r\n        if (encoding === void 0) { encoding = 'utf8'; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, Promise.resolve(fs.readFileSync(path, encoding))];\r\n            });\r\n        });\r\n    };\r\n    LocalFileUtil.prototype.writeFileAsync = function (path, data, encoding) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, Promise.resolve(fs.writeFileSync(path, data, encoding))];\r\n            });\r\n        });\r\n    };\r\n    return LocalFileUtil;\r\n}(FileUtil));\r\nexports.LocalFileUtil = LocalFileUtil;\r\nvar localFileUtil = new LocalFileUtil();\r\nvar getLocalFileUtil = function () {\r\n    return localFileUtil;\r\n};\r\nexports.getLocalFileUtil = getLocalFileUtil;\r\nvar NodeFileUtil = /** @class */ (function (_super) {\r\n    __extends(NodeFileUtil, _super);\r\n    function NodeFileUtil() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    NodeFileUtil.prototype.readFileAsync = function (path, encoding) {\r\n        if (encoding === void 0) { encoding = 'utf8'; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, (0, node_fetch_1.default)(path)];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        switch (encoding) {\r\n                            case 'binary':\r\n                                return [2 /*return*/, response.arrayBuffer()];\r\n                            default:\r\n                                return [2 /*return*/, response.text()];\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    NodeFileUtil.prototype.writeFileAsync = function (path, data, encoding) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    return NodeFileUtil;\r\n}(FileUtil));\r\nexports.NodeFileUtil = NodeFileUtil;\r\nvar nodeFileUtil = new NodeFileUtil();\r\nvar getNodeFileUtil = function () {\r\n    return nodeFileUtil;\r\n};\r\nexports.getNodeFileUtil = getNodeFileUtil;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterUtil = void 0;\r\nvar lodash_1 = require(\"lodash\");\r\nvar _1 = require(\".\");\r\nvar FilterUtil = /** @class */ (function () {\r\n    function FilterUtil() {\r\n    }\r\n    FilterUtil.sortPunks = function (sort, order, punks) {\r\n        if (!punks || !sort || !order) {\r\n            return punks;\r\n        }\r\n        switch (sort) {\r\n            case _1.PunkTypes.PunkSortBy.ID:\r\n                return (0, lodash_1.orderBy)(punks, function (p) { return Number(p.id); }, order === _1.PunkTypes.OrderBy.ASC ? 'asc' : 'desc');\r\n            case _1.PunkTypes.PunkSortBy.RANK:\r\n                return (0, lodash_1.orderBy)(punks, function (p) { return p.rank; }, order === _1.PunkTypes.OrderBy.ASC ? 'asc' : 'desc');\r\n            case _1.PunkTypes.PunkSortBy.BID:\r\n                return punks.filter(function (e) { return !!e.bid && e.bid.amount.gt(0); }).sort(function (a, b) {\r\n                    var _c, _d, _e, _f;\r\n                    var _a = (_d = (_c = a.bid) === null || _c === void 0 ? void 0 : _c.amount) !== null && _d !== void 0 ? _d : new _1.PunkTypes.BigNumberWrapper(0);\r\n                    var _b = (_f = (_e = b.bid) === null || _e === void 0 ? void 0 : _e.amount) !== null && _f !== void 0 ? _f : new _1.PunkTypes.BigNumberWrapper(0);\r\n                    if (order === _1.PunkTypes.OrderBy.ASC) {\r\n                        return _a.gt(_b) ? 1 : -1;\r\n                    }\r\n                    return _a.gt(_b) ? -1 : 1;\r\n                });\r\n            case _1.PunkTypes.PunkSortBy.OFFER:\r\n                return punks.filter(function (e) { return !!e.offer && e.offer.minAmount.gt(0); }).sort(function (a, b) {\r\n                    var _c, _d, _e, _f;\r\n                    var _a = (_d = (_c = a.offer) === null || _c === void 0 ? void 0 : _c.minAmount) !== null && _d !== void 0 ? _d : new _1.PunkTypes.BigNumberWrapper(0);\r\n                    var _b = (_f = (_e = b.offer) === null || _e === void 0 ? void 0 : _e.minAmount) !== null && _f !== void 0 ? _f : new _1.PunkTypes.BigNumberWrapper(0);\r\n                    if (order === _1.PunkTypes.OrderBy.ASC) {\r\n                        return _a.gt(_b) ? 1 : -1;\r\n                    }\r\n                    return _a.gt(_b) ? -1 : 1;\r\n                });\r\n            default:\r\n                return punks;\r\n        }\r\n    };\r\n    return FilterUtil;\r\n}());\r\nexports.FilterUtil = FilterUtil;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FormatUtil = void 0;\r\nvar _1 = require(\".\");\r\nvar FormatUtil = /** @class */ (function () {\r\n    function FormatUtil() {\r\n    }\r\n    FormatUtil.formatMessage = function (data) {\r\n        var _a;\r\n        var defaultMessage = \"Something went wrong. Probably your account has insufficient balance or quota.\";\r\n        if (data) {\r\n            console.log(data);\r\n            var message = void 0;\r\n            if (!_1.CommonUtil.isString(data)) {\r\n                if (data.message) {\r\n                    message = data.message;\r\n                }\r\n                else if ((_a = data.error) === null || _a === void 0 ? void 0 : _a.message) {\r\n                    message = data.error.message;\r\n                }\r\n                else if (data.graphQLErrors) {\r\n                    if (data.graphQLErrors.length > 0) {\r\n                        message = data.graphQLErrors[0].message;\r\n                    }\r\n                    else {\r\n                        message = defaultMessage;\r\n                    }\r\n                }\r\n                else {\r\n                    message = JSON.stringify(data);\r\n                    if (message === \"{}\") {\r\n                        message = defaultMessage;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                message = data;\r\n            }\r\n            if (message.length > 128) {\r\n                return message.substr(0, 128) + \"...\";\r\n            }\r\n            return message;\r\n        }\r\n        return defaultMessage;\r\n    };\r\n    FormatUtil.formatNumber = function (number) {\r\n        var _a;\r\n        if (!number) {\r\n            return \"0\";\r\n        }\r\n        return number.toLocaleString((_a = navigator.language) !== null && _a !== void 0 ? _a : 'en-US');\r\n    };\r\n    return FormatUtil;\r\n}());\r\nexports.FormatUtil = FormatUtil;\r\n","\"use strict\";\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getLogger = exports.ExtendedConsoleLogger = exports.ConsoleLogger = exports.LogEventModel = void 0;\r\nvar __1 = require(\"..\");\r\nvar LogEventModel = /** @class */ (function () {\r\n    function LogEventModel(init) {\r\n        Object.assign(this, init);\r\n    }\r\n    return LogEventModel;\r\n}());\r\nexports.LogEventModel = LogEventModel;\r\nvar noop = function () { return undefined; };\r\nvar ConsoleLogger = /** @class */ (function () {\r\n    function ConsoleLogger() {\r\n    }\r\n    Object.defineProperty(ConsoleLogger.prototype, \"isEnabled\", {\r\n        get: function () {\r\n            return __1.CommonConfig.ENABLE_LOGGER;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ConsoleLogger.prototype, \"debug\", {\r\n        get: function () {\r\n            if (this.isEnabled) {\r\n                return console.debug.bind(console);\r\n            }\r\n            else {\r\n                return noop;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ConsoleLogger.prototype, \"info\", {\r\n        get: function () {\r\n            if (this.isEnabled) {\r\n                return console.info.bind(console);\r\n            }\r\n            else {\r\n                return noop;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ConsoleLogger.prototype, \"warn\", {\r\n        get: function () {\r\n            if (this.isEnabled) {\r\n                return console.warn.bind(console);\r\n            }\r\n            else {\r\n                return noop;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ConsoleLogger.prototype, \"error\", {\r\n        get: function () {\r\n            if (this.isEnabled) {\r\n                return console.error.bind(console);\r\n            }\r\n            else {\r\n                return noop;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ConsoleLogger;\r\n}());\r\nexports.ConsoleLogger = ConsoleLogger;\r\nvar ExtendedConsoleLogger = /** @class */ (function () {\r\n    function ExtendedConsoleLogger() {\r\n    }\r\n    Object.defineProperty(ExtendedConsoleLogger.prototype, \"isEnabled\", {\r\n        get: function () {\r\n            return __1.CommonConfig.ENABLE_LOGGER;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ExtendedConsoleLogger.prototype.timestamp = function (type) {\r\n        return \"[\".concat(type, \" \").concat(new Date().toLocaleTimeString(), \"]\");\r\n    };\r\n    ExtendedConsoleLogger.prototype.createLogEventModel = function (type) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var mapFn = function (e) {\r\n            if (__1.CommonUtil.isString(e)) {\r\n                return e;\r\n            }\r\n            else if (e instanceof Error) {\r\n                return e.message;\r\n            }\r\n            return __1.CommonUtil.toJsonString(e);\r\n        };\r\n        var result = new LogEventModel({\r\n            banner: this.timestamp(type),\r\n            args: args === null || args === void 0 ? void 0 : args.map(function (e) { return Array.isArray(e) ? e.map(function (e1) { return mapFn(e1); }) : mapFn(e); })\r\n        });\r\n        return result;\r\n    };\r\n    Object.defineProperty(ExtendedConsoleLogger.prototype, \"debug\", {\r\n        get: function () {\r\n            var _this = this;\r\n            if (this.isEnabled) {\r\n                return function () {\r\n                    var _a;\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    var result = _this.createLogEventModel('DEBUG', args);\r\n                    return (_a = Function.prototype.bind).call.apply(_a, __spreadArray([console.debug, console, result.banner], args, false));\r\n                };\r\n            }\r\n            else {\r\n                return function () {\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    return noop;\r\n                };\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ExtendedConsoleLogger.prototype, \"info\", {\r\n        get: function () {\r\n            var _this = this;\r\n            if (this.isEnabled) {\r\n                return function () {\r\n                    var _a;\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    var result = _this.createLogEventModel('INFO', args);\r\n                    return (_a = Function.prototype.bind).call.apply(_a, __spreadArray([console.info, console, result.banner], args, false));\r\n                };\r\n            }\r\n            else {\r\n                return function () {\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    return noop;\r\n                };\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ExtendedConsoleLogger.prototype, \"warn\", {\r\n        get: function () {\r\n            var _this = this;\r\n            if (this.isEnabled) {\r\n                return function () {\r\n                    var _a;\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    var result = _this.createLogEventModel('WARN', args);\r\n                    return (_a = Function.prototype.bind).call.apply(_a, __spreadArray([console.warn, console, result.banner], args, false));\r\n                };\r\n            }\r\n            else {\r\n                return function () {\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    return noop;\r\n                };\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ExtendedConsoleLogger.prototype, \"error\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return function () {\r\n                var _a;\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                if ((args === null || args === void 0 ? void 0 : args.length) > 0) {\r\n                    if (!__1.CommonUtil.isString(args[0])) {\r\n                        args.push('(See console output for more information.)');\r\n                    }\r\n                }\r\n                var result = _this.createLogEventModel('ERROR', args);\r\n                return (_a = Function.prototype.bind).call.apply(_a, __spreadArray([console.error, console, result.banner], args, false));\r\n            };\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ExtendedConsoleLogger;\r\n}());\r\nexports.ExtendedConsoleLogger = ExtendedConsoleLogger;\r\nvar logger = new ExtendedConsoleLogger();\r\nvar getLogger = function () {\r\n    return logger;\r\n};\r\nexports.getLogger = getLogger;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RetryUtil = void 0;\r\nvar RetryUtil = /** @class */ (function () {\r\n    function RetryUtil() {\r\n    }\r\n    // https://stackoverflow.com/questions/45444601/promise-retries-until-success-failure-with-typescript\r\n    RetryUtil.promiseRetry = function (fn, retries, err) {\r\n        if (retries === void 0) { retries = 5; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, new Promise(function (resolve) { return setTimeout(resolve, (5 - retries) * 1000); })];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/, !retries ? Promise.reject(err) : fn().catch(function (error) { return RetryUtil.promiseRetry(fn, (retries - 1), error); })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return RetryUtil;\r\n}());\r\nexports.RetryUtil = RetryUtil;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Task = void 0;\r\nvar Task = /** @class */ (function () {\r\n    function Task(task, interval) {\r\n        this._task = task;\r\n        this._taskInterval = interval;\r\n        return this;\r\n    }\r\n    Task.prototype._run = function () {\r\n        var _this = this;\r\n        this._taskTimer = setTimeout(function () { return __awaiter(_this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this._task) {\r\n                            this._onStop();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, this._task()];\r\n                    case 1:\r\n                        if (!(_a.sent())) {\r\n                            this._onStop();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        this._run();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); }, this._taskInterval);\r\n    };\r\n    Task.prototype._onStop = function () {\r\n        this._callback && this._callback();\r\n    };\r\n    Task.prototype.start = function (callback) {\r\n        this._callback = callback;\r\n        if (this._taskTimer) {\r\n            return;\r\n        }\r\n        this._run();\r\n    };\r\n    Task.prototype.stop = function () {\r\n        this._onStop();\r\n        if (!this._taskTimer) {\r\n            return;\r\n        }\r\n        window.clearTimeout(this._taskTimer);\r\n        this._taskTimer = undefined;\r\n    };\r\n    return Task;\r\n}());\r\nexports.Task = Task;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TokenUtil = void 0;\r\nvar bignumber_js_1 = require(\"bignumber.js\");\r\nvar __1 = require(\"..\");\r\nvar TokenUtil = /** @class */ (function () {\r\n    function TokenUtil() {\r\n    }\r\n    TokenUtil.roundBigNumber = function (bn, tokenDecimals, decimals) {\r\n        return bn.div(new bignumber_js_1.BigNumber(\"10\").pow(tokenDecimals)).decimalPlaces(decimals, bignumber_js_1.BigNumber.ROUND_DOWN);\r\n    };\r\n    TokenUtil.formatBigNumber = function (bn, tokenDecimals, decimals, maxDigits) {\r\n        if (maxDigits === void 0) { maxDigits = 14; }\r\n        var rounded = TokenUtil.roundBigNumber(bn, tokenDecimals, decimals);\r\n        if (rounded.lte(0)) {\r\n            return \"<1\";\r\n        }\r\n        var formatted = rounded.toFormat();\r\n        if (maxDigits >= formatted.length) {\r\n            return formatted;\r\n        }\r\n        return formatted.substring(0, maxDigits) + \"...\";\r\n    };\r\n    TokenUtil.formatVite = function (bn) {\r\n        return TokenUtil.formatBigNumber(bn, __1.CommonConstants.CURRENCY_DECIMALS, 2);\r\n    };\r\n    TokenUtil.formatViteFull = function (bn) {\r\n        return TokenUtil.roundBigNumber(bn, __1.CommonConstants.CURRENCY_DECIMALS, __1.CommonConstants.CURRENCY_DECIMALS).toFormat();\r\n    };\r\n    TokenUtil.formatViteTooltip = function (bn) {\r\n        var rounded = TokenUtil.roundBigNumber(bn, __1.CommonConstants.CURRENCY_DECIMALS, __1.CommonConstants.CURRENCY_DECIMALS);\r\n        return \"\".concat(rounded.toFormat(), \" $\").concat(__1.CommonConstants.CURRENCY_NAME);\r\n    };\r\n    return TokenUtil;\r\n}());\r\nexports.TokenUtil = TokenUtil;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TransformUtil = void 0;\r\nvar _1 = require(\".\");\r\nvar __1 = require(\"..\");\r\nvar TransformUtil = /** @class */ (function () {\r\n    function TransformUtil() {\r\n    }\r\n    Object.defineProperty(TransformUtil, \"defaultBigNumber\", {\r\n        get: function () {\r\n            return new _1.PunkTypes.BigNumberWrapper(\"0\");\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    TransformUtil.toBigNumber = function (number) {\r\n        var _a;\r\n        return (_a = TransformUtil.toMaybeBigNumber(number)) !== null && _a !== void 0 ? _a : TransformUtil.defaultBigNumber;\r\n    };\r\n    TransformUtil.toMaybeBigNumber = function (number) {\r\n        if (!number || (_1.CommonUtil.isNullOrWhitespace(number) && !_1.CommonUtil.isNumber(number))) {\r\n            return null;\r\n        }\r\n        return new _1.PunkTypes.BigNumberWrapper(number);\r\n    };\r\n    TransformUtil.toAddress = function (value) {\r\n        if (_1.CommonUtil.isNullOrWhitespace(value) || value === __1.CommonConstants.ZERO_ADDRESS) {\r\n            return null;\r\n        }\r\n        return value;\r\n    };\r\n    TransformUtil.toTimestamp = function (date) {\r\n        if (date) {\r\n            return Math.floor(date.getTime() / 1000).toString();\r\n        }\r\n        return \"0\";\r\n    };\r\n    TransformUtil.toPunkEvent = function (event) {\r\n        var _a, _b, _c, _d;\r\n        return {\r\n            __typename: (_a = event.__typename) !== null && _a !== void 0 ? _a : _1.PunkTypes.TypeNames.PunkEvent,\r\n            id: (_b = event.id) !== null && _b !== void 0 ? _b : \"\".concat(event.accountBlockHash, \"-\").concat(event.accountBlockHeight, \"-\").concat(event.eventType),\r\n            accountBlockHash: event.accountBlockHash,\r\n            accountBlockHeight: TransformUtil.toBigNumber(event.accountBlockHeight),\r\n            timestamp: TransformUtil.toBigNumber(event.timestamp),\r\n            eventType: Number(event.eventType),\r\n            punkId: event.punkId,\r\n            amount: TransformUtil.toBigNumber(event.amount),\r\n            fromAddress: (_c = TransformUtil.toAddress(event.fromAddress)) !== null && _c !== void 0 ? _c : '',\r\n            toAddress: (_d = TransformUtil.toAddress(event.toAddress)) !== null && _d !== void 0 ? _d : ''\r\n        };\r\n    };\r\n    TransformUtil.toPunkInfo = function (info) {\r\n        if (!info) {\r\n            return null;\r\n        }\r\n        return {\r\n            id: info.id,\r\n            owner: info.owner,\r\n            bid: TransformUtil.toMarketBid(info.bid, info.id),\r\n            offer: TransformUtil.toMarketOffer(info.offer, info.id)\r\n        };\r\n    };\r\n    TransformUtil.toMarketBid = function (bid, itemIndex) {\r\n        var _a;\r\n        if (!bid) {\r\n            return null;\r\n        }\r\n        return {\r\n            __typename: (_a = bid.__typename) !== null && _a !== void 0 ? _a : _1.PunkTypes.TypeNames.MarketBid,\r\n            itemIndex: TransformUtil.toBigNumber(itemIndex !== null && itemIndex !== void 0 ? itemIndex : bid.itemIndex),\r\n            bidder: bid.bidder,\r\n            amount: TransformUtil.toBigNumber(bid.amount),\r\n            timestamp: TransformUtil.toMaybeBigNumber(bid.timestamp)\r\n        };\r\n    };\r\n    TransformUtil.toMarketOffer = function (offer, itemIndex) {\r\n        var _a, _b;\r\n        if (!offer) {\r\n            return null;\r\n        }\r\n        return {\r\n            __typename: (_a = offer.__typename) !== null && _a !== void 0 ? _a : _1.PunkTypes.TypeNames.MarketOffer,\r\n            itemIndex: TransformUtil.toBigNumber(itemIndex !== null && itemIndex !== void 0 ? itemIndex : offer.itemIndex),\r\n            seller: offer.seller,\r\n            minAmount: TransformUtil.toBigNumber(offer.minAmount),\r\n            onlySellTo: (_b = offer.onlySellTo) !== null && _b !== void 0 ? _b : null,\r\n            timestamp: TransformUtil.toMaybeBigNumber(offer.timestamp)\r\n        };\r\n    };\r\n    TransformUtil.toAccountAuction = function (auction) {\r\n        return {\r\n            timestamp: TransformUtil.toBigNumber(auction.timestamp),\r\n            auctionType: Number(auction.auctionType),\r\n            punkId: auction.punkId,\r\n            owner: auction.owner,\r\n            amount: TransformUtil.toBigNumber(auction.amount),\r\n            address: auction.address\r\n        };\r\n    };\r\n    return TransformUtil;\r\n}());\r\nexports.TransformUtil = TransformUtil;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PunkTypes = void 0;\r\nvar bignumber_js_1 = require(\"bignumber.js\");\r\nvar PunkTypes;\r\n(function (PunkTypes) {\r\n    var BigNumberWrapper = /** @class */ (function (_super) {\r\n        __extends(BigNumberWrapper, _super);\r\n        function BigNumberWrapper() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return BigNumberWrapper;\r\n    }(bignumber_js_1.default));\r\n    PunkTypes.BigNumberWrapper = BigNumberWrapper;\r\n    var OrderBy;\r\n    (function (OrderBy) {\r\n        OrderBy[\"ASC\"] = \"ASC\";\r\n        OrderBy[\"DESC\"] = \"DESC\";\r\n    })(OrderBy = PunkTypes.OrderBy || (PunkTypes.OrderBy = {}));\r\n    var PunkSortBy;\r\n    (function (PunkSortBy) {\r\n        PunkSortBy[\"BID\"] = \"BID\";\r\n        PunkSortBy[\"ID\"] = \"ID\";\r\n        PunkSortBy[\"OFFER\"] = \"OFFER\";\r\n        PunkSortBy[\"RANK\"] = \"RANK\";\r\n    })(PunkSortBy = PunkTypes.PunkSortBy || (PunkTypes.PunkSortBy = {}));\r\n    var DocumentState;\r\n    (function (DocumentState) {\r\n        DocumentState[DocumentState[\"Unknown\"] = 0] = \"Unknown\";\r\n        DocumentState[DocumentState[\"Hidden\"] = 1] = \"Hidden\";\r\n        DocumentState[DocumentState[\"Active\"] = 2] = \"Active\";\r\n    })(DocumentState = PunkTypes.DocumentState || (PunkTypes.DocumentState = {}));\r\n    var WalletType;\r\n    (function (WalletType) {\r\n        WalletType[\"MetaMask\"] = \"MetaMask\";\r\n    })(WalletType = PunkTypes.WalletType || (PunkTypes.WalletType = {}));\r\n    var OrderType;\r\n    (function (OrderType) {\r\n        OrderType[OrderType[\"ASC\"] = 0] = \"ASC\";\r\n        OrderType[OrderType[\"DESC\"] = 1] = \"DESC\";\r\n    })(OrderType = PunkTypes.OrderType || (PunkTypes.OrderType = {}));\r\n    var ProviderType;\r\n    (function (ProviderType) {\r\n        ProviderType[ProviderType[\"HTTP\"] = 0] = \"HTTP\";\r\n        ProviderType[ProviderType[\"WEBSOCKET\"] = 1] = \"WEBSOCKET\";\r\n    })(ProviderType = PunkTypes.ProviderType || (PunkTypes.ProviderType = {}));\r\n    PunkTypes.TypeNames = {\r\n        Punk: \"Punk\",\r\n        PunkEvent: \"PunkEvent\",\r\n        MarketBid: \"MarketBid\",\r\n        MarketOffer: \"MarketOffer\"\r\n    };\r\n    var PunkSortType;\r\n    (function (PunkSortType) {\r\n        PunkSortType[PunkSortType[\"ID\"] = 0] = \"ID\";\r\n        PunkSortType[PunkSortType[\"RANK\"] = 1] = \"RANK\";\r\n    })(PunkSortType = PunkTypes.PunkSortType || (PunkTypes.PunkSortType = {}));\r\n    var PunkDialogType;\r\n    (function (PunkDialogType) {\r\n        PunkDialogType[PunkDialogType[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\r\n        PunkDialogType[PunkDialogType[\"BID\"] = 1] = \"BID\";\r\n        PunkDialogType[PunkDialogType[\"OFFER\"] = 2] = \"OFFER\";\r\n        PunkDialogType[PunkDialogType[\"GIFT\"] = 3] = \"GIFT\";\r\n        PunkDialogType[PunkDialogType[\"ACCEPT_BID\"] = 4] = \"ACCEPT_BID\";\r\n        PunkDialogType[PunkDialogType[\"ACCEPT_OFFER\"] = 5] = \"ACCEPT_OFFER\";\r\n        PunkDialogType[PunkDialogType[\"CANCEL_BID\"] = 6] = \"CANCEL_BID\";\r\n        PunkDialogType[PunkDialogType[\"CANCEL_OFFER\"] = 7] = \"CANCEL_OFFER\";\r\n    })(PunkDialogType = PunkTypes.PunkDialogType || (PunkTypes.PunkDialogType = {}));\r\n    var PunkEventType;\r\n    (function (PunkEventType) {\r\n        PunkEventType[PunkEventType[\"Unknown\"] = 0] = \"Unknown\";\r\n        PunkEventType[PunkEventType[\"Mint\"] = 1] = \"Mint\";\r\n        PunkEventType[PunkEventType[\"Offer\"] = 2] = \"Offer\";\r\n        PunkEventType[PunkEventType[\"NewBid\"] = 3] = \"NewBid\";\r\n        PunkEventType[PunkEventType[\"CancelBid\"] = 4] = \"CancelBid\";\r\n        PunkEventType[PunkEventType[\"Buy\"] = 5] = \"Buy\";\r\n        PunkEventType[PunkEventType[\"CancelOffer\"] = 6] = \"CancelOffer\";\r\n    })(PunkEventType = PunkTypes.PunkEventType || (PunkTypes.PunkEventType = {}));\r\n    var MarketplaceTab;\r\n    (function (MarketplaceTab) {\r\n        MarketplaceTab[\"Items\"] = \"items\";\r\n        MarketplaceTab[\"Activity\"] = \"activity\";\r\n    })(MarketplaceTab = PunkTypes.MarketplaceTab || (PunkTypes.MarketplaceTab = {}));\r\n    var MarketEventType;\r\n    (function (MarketEventType) {\r\n        MarketEventType[MarketEventType[\"Unknown\"] = 0] = \"Unknown\";\r\n        MarketEventType[MarketEventType[\"Start\"] = 1] = \"Start\";\r\n        MarketEventType[MarketEventType[\"Stop\"] = 2] = \"Stop\";\r\n        MarketEventType[MarketEventType[\"MintPrice\"] = 3] = \"MintPrice\";\r\n        MarketEventType[MarketEventType[\"ActionPrice\"] = 4] = \"ActionPrice\";\r\n    })(MarketEventType = PunkTypes.MarketEventType || (PunkTypes.MarketEventType = {}));\r\n    var AccountAuctionType;\r\n    (function (AccountAuctionType) {\r\n        AccountAuctionType[AccountAuctionType[\"Unknown\"] = 0] = \"Unknown\";\r\n        AccountAuctionType[AccountAuctionType[\"Offer\"] = 1] = \"Offer\";\r\n        AccountAuctionType[AccountAuctionType[\"Bid\"] = 2] = \"Bid\";\r\n    })(AccountAuctionType = PunkTypes.AccountAuctionType || (PunkTypes.AccountAuctionType = {}));\r\n    var GlobalEvent;\r\n    (function (GlobalEvent) {\r\n        GlobalEvent[\"ReInit\"] = \"ReInit\";\r\n        GlobalEvent[\"DocumentVisibilityChanged\"] = \"DocumentVisibilityChanged\";\r\n        GlobalEvent[\"ConfirmTransactionDialog\"] = \"ConfirmTransactionDialog\";\r\n        GlobalEvent[\"ConnectWalletDialog\"] = \"ConnectWalletDialog\";\r\n        GlobalEvent[\"QuotaChanged\"] = \"QuotaChanged\";\r\n        GlobalEvent[\"PunkFilterValuesChanged\"] = \"PunkFilterValuesChanged\";\r\n        GlobalEvent[\"MarketChanged\"] = \"MarketChanged\";\r\n        GlobalEvent[\"PunkChanged\"] = \"PunkChanged\";\r\n    })(GlobalEvent = PunkTypes.GlobalEvent || (PunkTypes.GlobalEvent = {}));\r\n    var ViteQuotaType;\r\n    (function (ViteQuotaType) {\r\n        ViteQuotaType[\"Account\"] = \"Account\";\r\n        ViteQuotaType[\"Contract\"] = \"Contract\";\r\n    })(ViteQuotaType = PunkTypes.ViteQuotaType || (PunkTypes.ViteQuotaType = {}));\r\n    var VmLogEvent;\r\n    (function (VmLogEvent) {\r\n        VmLogEvent[\"MarketChanged\"] = \"MarketChanged\";\r\n        VmLogEvent[\"PunkChanged\"] = \"PunkChanged\";\r\n    })(VmLogEvent = PunkTypes.VmLogEvent || (PunkTypes.VmLogEvent = {}));\r\n})(PunkTypes = exports.PunkTypes || (exports.PunkTypes = {}));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UrlUtil = void 0;\r\nvar _1 = require(\".\");\r\nvar __1 = require(\"..\");\r\nvar UrlUtil = /** @class */ (function () {\r\n    function UrlUtil() {\r\n    }\r\n    UrlUtil.getPunkUrl = function (image, cid) {\r\n        if (image && !_1.CommonUtil.isNullOrWhitespace(image)) {\r\n            if (__1.CommonConfig.USE_IPFS) {\r\n                if (cid && !_1.CommonUtil.isNullOrWhitespace(cid)) {\r\n                    return UrlUtil.getPunkIpfsUrlByCid(cid);\r\n                }\r\n                return UrlUtil.getPunkIpfsUrl(image);\r\n            }\r\n            else {\r\n                return \"https://cdn.vitepunks.com/punks/iso/\".concat(image);\r\n            }\r\n        }\r\n        return \"\";\r\n    };\r\n    UrlUtil.getPunkIpfsUrlByCid = function (cid) {\r\n        if (cid && !_1.CommonUtil.isNullOrWhitespace(cid)) {\r\n            return \"\".concat(__1.CommonConstants.IPFS_GATEWAY_URL).concat(cid);\r\n        }\r\n        return \"\";\r\n    };\r\n    UrlUtil.getPunkIpfsUrl = function (image) {\r\n        if (image && !_1.CommonUtil.isNullOrWhitespace(image)) {\r\n            return \"\".concat(__1.CommonConstants.IPFS_GATEWAY_URL, \"QmRGJyWMZidhH35J5tfn7vWwR1MfhPdSZh7FEXWXub4zJm/\").concat(image);\r\n        }\r\n        return \"\";\r\n    };\r\n    return UrlUtil;\r\n}());\r\nexports.UrlUtil = UrlUtil;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WalletConnector = void 0;\r\nvar connector_1 = require(\"@vite/connector\");\r\nvar __1 = require(\"..\");\r\nvar types_1 = require(\"./types\");\r\nvar logger = (0, __1.getLogger)();\r\nvar WalletConnector = /** @class */ (function (_super) {\r\n    __extends(WalletConnector, _super);\r\n    function WalletConnector(walletManager, opts, meta) {\r\n        var _this = _super.call(this, opts, meta) || this;\r\n        _this._walletManager = walletManager;\r\n        _this.on('connect', function (err, payload) {\r\n            logger.info('WalletConnector.connect', err, payload)();\r\n            var accounts = payload.params[0].accounts;\r\n            _this.saveSession(accounts);\r\n        });\r\n        _this.on('disconnect', function (err, payload) {\r\n            logger.info('WalletConnector.disconnect', err, payload)();\r\n            _this.stopBizHeartBeat();\r\n            _this._walletManager.removeWallet();\r\n        });\r\n        _this.on('session_update', function (err, payload) {\r\n            logger.info('WalletConnector.session_update', err, payload)();\r\n            var session = payload[0];\r\n            if (session && session.accounts) {\r\n                _this.saveSession(session.accounts);\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(WalletConnector.prototype, \"uri\", {\r\n        get: function () {\r\n            return _super.prototype.uri;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    WalletConnector.prototype.on = function (event, listener) {\r\n        return _super.prototype.on.call(this, event, listener);\r\n    };\r\n    WalletConnector.prototype.off = function (event, listener) {\r\n        return _super.prototype.off.call(this, event, listener);\r\n    };\r\n    WalletConnector.prototype.saveSession = function (accounts) {\r\n        if (!accounts || !accounts[0]) {\r\n            throw new Error('address is null');\r\n        }\r\n        var sessionAccounts = [];\r\n        for (var index = 0; index < accounts.length; index++) {\r\n            var address = accounts[index];\r\n            sessionAccounts.push(new types_1.SessionWalletAccount({\r\n                id: index.toString(),\r\n                address: address\r\n            }));\r\n        }\r\n        var wallet = new types_1.SessionWallet({\r\n            active: sessionAccounts[0],\r\n            accounts: sessionAccounts,\r\n            session: this.session,\r\n            timestamp: new Date().getTime()\r\n        });\r\n        this._walletManager.setWallet(wallet);\r\n    };\r\n    WalletConnector.prototype.updateSession = function () {\r\n        var existing = this._walletManager.getWallet();\r\n        if (existing && existing instanceof types_1.SessionWallet) {\r\n            existing.timestamp = new Date().getTime();\r\n            this._walletManager.updateWalletStore(existing);\r\n        }\r\n    };\r\n    WalletConnector.prototype.createSession = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, _super.prototype.createSession.call(this)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/, this.uri];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WalletConnector.prototype.sendTransactionAsync = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, new Promise(function (res, rej) {\r\n                        _this.on('disconnect', function () {\r\n                            rej(\"Request aborted due to disconnect.\");\r\n                        });\r\n                        _this.sendCustomRequest({ method: 'vite_signAndSendTx', params: args }).then(function (r) {\r\n                            _this.updateSession();\r\n                            res(r);\r\n                        }).catch(function (e) {\r\n                            rej(e);\r\n                        });\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    WalletConnector.prototype.signMessageAsync = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, new Promise(function (res, rej) {\r\n                        _this.on('disconnect', function () {\r\n                            rej(\"Request aborted due to disconnect.\");\r\n                        });\r\n                        _this.sendCustomRequest({ method: 'vite_signMessage', params: args }).then(function (r) {\r\n                            _this.updateSession();\r\n                            res(r);\r\n                        }).catch(function (e) {\r\n                            rej(e);\r\n                        });\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    WalletConnector.prototype.killSessionAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, _super.prototype.killSession.call(this)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return WalletConnector;\r\n}(connector_1.default));\r\nexports.WalletConnector = WalletConnector;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WalletConnectorFactory = void 0;\r\nvar _1 = require(\".\");\r\nvar __1 = require(\"..\");\r\nvar logger = (0, __1.getLogger)();\r\nvar WalletConnectorFactory = /** @class */ (function () {\r\n    function WalletConnectorFactory(walletManager) {\r\n        this._walletManager = walletManager;\r\n    }\r\n    Object.defineProperty(WalletConnectorFactory.prototype, \"session\", {\r\n        get: function () {\r\n            return this._walletManager.getValidSession();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    WalletConnectorFactory.prototype.createConnector = function (network) {\r\n        var account = this._walletManager.getActiveAccount();\r\n        var opts = {\r\n            bridge: network.connectorUrl,\r\n            session: this.session\r\n        };\r\n        var meta = account ? { lastAccount: account.address } : undefined;\r\n        var connector = new _1.WalletConnector(this._walletManager, opts, meta);\r\n        return connector;\r\n    };\r\n    WalletConnectorFactory.prototype.create = function (network) {\r\n        var connector = this.createConnector(network);\r\n        if (!this.session) {\r\n            connector.createSession().then(function () { return logger.info('IWalletConnector connected', connector.uri)(); });\r\n        }\r\n        return connector;\r\n    };\r\n    WalletConnectorFactory.prototype.createAsync = function (network) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var connector;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        connector = this.createConnector(network);\r\n                        if (!!this.session) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, __1.CommonUtil.timeout(1000)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, connector.createSession()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        logger.info('IWalletConnector connected', connector.uri)();\r\n                        _a.label = 3;\r\n                    case 3: return [2 /*return*/, connector];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return WalletConnectorFactory;\r\n}());\r\nexports.WalletConnectorFactory = WalletConnectorFactory;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WalletManager = void 0;\r\nvar vitejs_1 = require(\"@vite/vitejs\");\r\nvar _1 = require(\".\");\r\nvar __1 = require(\"..\");\r\nvar logger = (0, __1.getLogger)();\r\nvar WalletManager = /** @class */ (function () {\r\n    function WalletManager(_store) {\r\n        this._mnemonicDeriveIndex = 0;\r\n        this._store = _store;\r\n    }\r\n    WalletManager.prototype.initWallet = function () {\r\n        var wallet = this._store.getItem();\r\n        if (wallet) {\r\n            this._wallet = wallet;\r\n            this._mnemonicDeriveIndex = wallet.accounts.length;\r\n            this.updateWallet();\r\n        }\r\n    };\r\n    Object.defineProperty(WalletManager.prototype, \"onSetWalletCallback\", {\r\n        set: function (cb) {\r\n            this._setWalletCallback = cb;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    WalletManager.prototype.getWallet = function () {\r\n        return this._wallet;\r\n    };\r\n    WalletManager.prototype.setWallet = function (wallet) {\r\n        this._wallet = wallet;\r\n        this.updateWalletStore(wallet);\r\n        this.updateWallet();\r\n    };\r\n    WalletManager.prototype.updateWallet = function () {\r\n        if (this._setWalletCallback) {\r\n            this._setWalletCallback(this._wallet);\r\n        }\r\n    };\r\n    WalletManager.prototype.updateWalletStore = function (wallet) {\r\n        if (wallet) {\r\n            this._store.setItem(wallet);\r\n        }\r\n    };\r\n    WalletManager.prototype.createWebWallet = function (mnemonic) {\r\n        if (!this.validateMnemonic(mnemonic)) {\r\n            return undefined;\r\n        }\r\n        this.resetWallet();\r\n        var account = this.createWebWalletAccount(mnemonic, 0);\r\n        var wallet = new _1.WebWallet({\r\n            active: account,\r\n            mnemonic: mnemonic,\r\n            accounts: [\r\n                account\r\n            ]\r\n        });\r\n        this.setWallet(wallet);\r\n        return wallet;\r\n    };\r\n    WalletManager.prototype.removeWallet = function () {\r\n        this.resetWallet();\r\n        this.updateWallet();\r\n    };\r\n    WalletManager.prototype.getAccountByAddress = function (address) {\r\n        var _a, _b;\r\n        return (_b = (_a = this._wallet) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.find(function (e) { return e.address === address; });\r\n    };\r\n    WalletManager.prototype.addAccount = function () {\r\n        if (this._wallet instanceof _1.WebWallet) {\r\n            var account = this.createWebWalletAccount(this._wallet.mnemonic);\r\n            this._wallet.accounts.push(account);\r\n            this.setActiveAccount(account);\r\n            return account;\r\n        }\r\n        return undefined;\r\n    };\r\n    WalletManager.prototype.getActiveAccount = function () {\r\n        var _a;\r\n        return (_a = this._wallet) === null || _a === void 0 ? void 0 : _a.active;\r\n    };\r\n    WalletManager.prototype.setActiveAccount = function (account) {\r\n        if (this._wallet) {\r\n            this._wallet.active = account;\r\n            this._store.setItem(this._wallet);\r\n            this.updateWallet();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    WalletManager.prototype.getAccounts = function () {\r\n        if (this._wallet) {\r\n            return this._wallet.accounts;\r\n        }\r\n        return [];\r\n    };\r\n    WalletManager.prototype.getValidSession = function () {\r\n        var wallet = this._store.getItem();\r\n        if (wallet && wallet instanceof _1.SessionWallet) {\r\n            if (new Date().getTime() - wallet.timestamp < 1000 * 60 * 10) {\r\n                return wallet.session;\r\n            }\r\n            else {\r\n                logger.info('Found expired session.', wallet)();\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    WalletManager.prototype.resetWallet = function () {\r\n        this._wallet = undefined;\r\n        this._mnemonicDeriveIndex = 0;\r\n        this._store.clear();\r\n    };\r\n    WalletManager.prototype.createWebWalletAccount = function (mnemonic, index) {\r\n        if (index === void 0) { index = this._mnemonicDeriveIndex; }\r\n        var privateKey = vitejs_1.wallet.deriveAddress({\r\n            mnemonics: mnemonic,\r\n            index: index\r\n        }).privateKey;\r\n        var account = new _1.WebWalletAccount({\r\n            id: index.toString(),\r\n            privateKey: privateKey,\r\n            address: vitejs_1.wallet.createAddressByPrivateKey(privateKey).address\r\n        });\r\n        this._mnemonicDeriveIndex = index + 1;\r\n        return account;\r\n    };\r\n    WalletManager.prototype.validateMnemonic = function (mnemonic) {\r\n        if (mnemonic) {\r\n            return vitejs_1.wallet.validateMnemonics(mnemonic);\r\n        }\r\n        return false;\r\n    };\r\n    return WalletManager;\r\n}());\r\nexports.WalletManager = WalletManager;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getPunkSearch = exports.PunkSearch = void 0;\r\nvar flexsearch_1 = require(\"flexsearch\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar util_1 = require(\"../util\");\r\nvar logger = (0, util_1.getLogger)();\r\nvar PunkSearch = /** @class */ (function () {\r\n    function PunkSearch() {\r\n        this.clear();\r\n    }\r\n    PunkSearch.prototype.clear = function () {\r\n        this._index = new flexsearch_1.Document({\r\n            document: {\r\n                id: \"id\",\r\n                tag: \"attributes\",\r\n                index: [\"id\"]\r\n            },\r\n            //preset: \"memory\",\r\n            //tokenize: \"forward\"\r\n        });\r\n    };\r\n    PunkSearch.prototype.index = function (punks) {\r\n        if (punks) {\r\n            this.clear();\r\n            for (var _i = 0, punks_1 = punks; _i < punks_1.length; _i++) {\r\n                var p = punks_1[_i];\r\n                this._index.add(p);\r\n            }\r\n        }\r\n    };\r\n    PunkSearch.prototype.search = function (query, punks) {\r\n        try {\r\n            if (!punks || util_1.CommonUtil.isNullOrWhitespace(query)) {\r\n                return punks;\r\n            }\r\n            if (util_1.CommonUtil.isNumber(query)) {\r\n                var index = parseInt(query);\r\n                if (index > 0) {\r\n                    var p = punks[index - 1];\r\n                    return !p ? [] : [p];\r\n                }\r\n            }\r\n            var result = this._index.search({\r\n                tag: query.split(','),\r\n                limit: 10000\r\n            });\r\n            var mappedResult = result.map(function (e) { return e.result; });\r\n            if (mappedResult.length > 0) {\r\n                if (mappedResult.length === 1) {\r\n                    return this.enrich(mappedResult[0].map(function (e) { return e.toString(); }), punks);\r\n                }\r\n                else {\r\n                    var intersectedResult = lodash_1.intersection.apply(void 0, mappedResult);\r\n                    return this.enrich(intersectedResult.map(function (e) { return e.toString(); }), punks);\r\n                }\r\n            }\r\n            return undefined;\r\n        }\r\n        catch (error) {\r\n            logger.error(error)();\r\n            return undefined;\r\n        }\r\n    };\r\n    PunkSearch.prototype.enrich = function (ids, punks) {\r\n        return (0, lodash_1.intersectionWith)(punks, ids, function (o, id) { return o.id === id; });\r\n    };\r\n    return PunkSearch;\r\n}());\r\nexports.PunkSearch = PunkSearch;\r\nvar search = new PunkSearch();\r\nvar getPunkSearch = function () {\r\n    return search;\r\n};\r\nexports.getPunkSearch = getPunkSearch;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PunksBaseContract = exports.AbiItemType = void 0;\r\nvar util_1 = require(\"../util\");\r\nvar base_contract_1 = require(\"./base.contract\");\r\nvar logger = (0, util_1.getLogger)();\r\nvar AbiItemType;\r\n(function (AbiItemType) {\r\n    AbiItemType[AbiItemType[\"getDeveloper\"] = 0] = \"getDeveloper\";\r\n    AbiItemType[AbiItemType[\"getMarketInfo\"] = 1] = \"getMarketInfo\";\r\n    AbiItemType[AbiItemType[\"isContract\"] = 2] = \"isContract\";\r\n    AbiItemType[AbiItemType[\"balanceOf\"] = 3] = \"balanceOf\";\r\n    AbiItemType[AbiItemType[\"ownerOf\"] = 4] = \"ownerOf\";\r\n    AbiItemType[AbiItemType[\"getMappedIndex\"] = 5] = \"getMappedIndex\";\r\n    AbiItemType[AbiItemType[\"totalSupply\"] = 6] = \"totalSupply\";\r\n    AbiItemType[AbiItemType[\"getTokensOf\"] = 7] = \"getTokensOf\";\r\n    AbiItemType[AbiItemType[\"tokenURI\"] = 8] = \"tokenURI\";\r\n    AbiItemType[AbiItemType[\"getBaseUrl\"] = 9] = \"getBaseUrl\";\r\n    AbiItemType[AbiItemType[\"getOffer\"] = 10] = \"getOffer\";\r\n    AbiItemType[AbiItemType[\"getBid\"] = 11] = \"getBid\";\r\n    AbiItemType[AbiItemType[\"transferEvent\"] = 12] = \"transferEvent\";\r\n    AbiItemType[AbiItemType[\"marketChangedEvent\"] = 13] = \"marketChangedEvent\";\r\n    AbiItemType[AbiItemType[\"punkChangedEvent\"] = 14] = \"punkChangedEvent\";\r\n})(AbiItemType = exports.AbiItemType || (exports.AbiItemType = {}));\r\nvar PunksBaseContract = /** @class */ (function (_super) {\r\n    __extends(PunksBaseContract, _super);\r\n    function PunksBaseContract() {\r\n        var _this = _super.call(this) || this;\r\n        _this._abiMap = new Map();\r\n        return _this;\r\n    }\r\n    PunksBaseContract.prototype.initAsyncProtected = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                this._abiMap.set(AbiItemType.getDeveloper, this.getAbiItem(\"offchain\", \"getDeveloper\"));\r\n                this._abiMap.set(AbiItemType.getMarketInfo, this.getAbiItem(\"offchain\", \"getMarketInfo\"));\r\n                this._abiMap.set(AbiItemType.isContract, this.getAbiItem(\"offchain\", \"isContract\"));\r\n                this._abiMap.set(AbiItemType.balanceOf, this.getAbiItem(\"offchain\", \"balanceOf\"));\r\n                this._abiMap.set(AbiItemType.ownerOf, this.getAbiItem(\"offchain\", \"ownerOf\"));\r\n                this._abiMap.set(AbiItemType.getMappedIndex, this.getAbiItem(\"offchain\", \"getMappedIndex\"));\r\n                this._abiMap.set(AbiItemType.totalSupply, this.getAbiItem(\"offchain\", \"totalSupply\"));\r\n                this._abiMap.set(AbiItemType.getTokensOf, this.getAbiItem(\"offchain\", \"getTokensOf\"));\r\n                this._abiMap.set(AbiItemType.tokenURI, this.getAbiItem(\"offchain\", \"tokenURI\"));\r\n                this._abiMap.set(AbiItemType.getBaseUrl, this.getAbiItem(\"offchain\", \"getBaseUrl\"));\r\n                this._abiMap.set(AbiItemType.getOffer, this.getAbiItem(\"offchain\", \"getOffer\"));\r\n                this._abiMap.set(AbiItemType.getBid, this.getAbiItem(\"offchain\", \"getBid\"));\r\n                this._abiMap.set(AbiItemType.transferEvent, this.getAbiItem(\"event\", \"Transfer\"));\r\n                this._abiMap.set(AbiItemType.marketChangedEvent, this.getAbiItem(\"event\", \"MarketChanged\"));\r\n                this._abiMap.set(AbiItemType.punkChangedEvent, this.getAbiItem(\"event\", \"PunkChanged\"));\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getAbiItem = function (_type, _name) {\r\n        return this._contract.abi.find(function (e) { return e.type === _type && e.name === _name; });\r\n    };\r\n    PunksBaseContract.prototype.getAbiItemByType = function (_abiItemType) {\r\n        return this._abiMap.get(_abiItemType);\r\n    };\r\n    PunksBaseContract.prototype.callOffChainMethodAsync = function (_abiItemType, _params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._client.callOffChainMethodAsync(this._contract.address, this.getAbiItemByType(_abiItemType), this._contract.offChain, _params)];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.setMintPriceAsync = function (_account, _price) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"setMintPriceAsync\", _price)();\r\n                return [2 /*return*/, this.callContractAsync(_account, 'setPrice', [util_1.PunkTypes.MarketEventType.MintPrice, _price])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.setActionPriceAsync = function (_account, _price) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"setActionPriceAsync\", _price)();\r\n                return [2 /*return*/, this.callContractAsync(_account, 'setPrice', [util_1.PunkTypes.MarketEventType.ActionPrice, _price])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getDeveloperAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getDeveloper, [])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"getDeveloperAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.setDeveloperAsync = function (_account, _address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"setDeveloperAsync\", _address)();\r\n                return [2 /*return*/, this.callContractAsync(_account, 'setDeveloper', [_address])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getMarketInfoAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, e;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getMarketInfo, [])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        e = this.objectFromEntries(result);\r\n                        logger.info(\"getMarketInfoAsync\", e)();\r\n                        return [2 /*return*/, {\r\n                                marketStarted: this.toBoolean(e.market_started),\r\n                                mintsRemaining: parseInt(e.mints_remaining),\r\n                                mintPrice: util_1.TransformUtil.toBigNumber(e.mint_price),\r\n                                actionPrice: util_1.TransformUtil.toBigNumber(e.action_price)\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.setMarketStartedAsync = function (_account, _started) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"setMarketStartedAsync\", _started)();\r\n                return [2 /*return*/, this.callContractAsync(_account, 'setMarketStarted', [_started])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.isContractAsync = function (_address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.isContract, [_address])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"isContractAsync\", value)();\r\n                        return [2 /*return*/, this.toBoolean(value)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.balanceOfAsync = function (_owner) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.balanceOf, [_owner])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"balanceOfAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.ownerOfAsync = function (_tokenId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.ownerOf, [_tokenId])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"ownerOfAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getMappedIndexAsync = function (_refId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getMappedIndex, [_refId])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"getMappedIndexAsync\", _refId, \":\", value)();\r\n                        return [2 /*return*/, util_1.TransformUtil.toBigNumber(value)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.setMappedIndicesAsync = function (_account, _indices, _startIndex) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'setMappedIndices', [_indices, _startIndex])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.mintAsync = function (_account, _mintPrice) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'mint', [], _mintPrice)];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.totalSupplyAsync = function (_owner) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.totalSupply, [])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"totalSupplyAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getTokensOfAsync = function (_owner) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getTokensOf, [_owner])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, []];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"getTokensOfAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.tokenURIAsync = function (_tokenId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.tokenURI, [_tokenId])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"tokenURIAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getBaseUrlAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getBaseUrl, [])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"getBaseUrlAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.setBaseUrlAsync = function (_account, _baseUrl) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'setBaseUrl', [_baseUrl])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getOfferAsync = function (_punkId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getOffer, [_punkId])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        logger.info(\"getOfferAsync\", \"_punkId\", _punkId, result)();\r\n                        return [2 /*return*/, {\r\n                                isForSale: this.toBoolean(result[0].value),\r\n                                itemIndex: new util_1.PunkTypes.BigNumberWrapper(_punkId),\r\n                                seller: result[1].value,\r\n                                minAmount: new util_1.PunkTypes.BigNumberWrapper(result[2].value),\r\n                                onlySellTo: util_1.TransformUtil.toAddress(result[3].value)\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getBidAsync = function (_punkId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getBid, [_punkId])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        logger.info(\"getBidAsync\", \"_punkId\", _punkId, result)();\r\n                        return [2 /*return*/, {\r\n                                hasBid: this.toBoolean(result[0].value),\r\n                                itemIndex: new util_1.PunkTypes.BigNumberWrapper(_punkId),\r\n                                bidder: result[1].value,\r\n                                amount: new util_1.PunkTypes.BigNumberWrapper(result[2].value)\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.cancelOfferAsync = function (_account, _punkId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'cancelOffer', [_punkId])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.offerAsync = function (_account, _punkId, _minSalePrice, _fee) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"offerAsync punkId: \".concat(_punkId, \" minSalePrice: \").concat(_minSalePrice, \" fee: \").concat(_fee))();\r\n                return [2 /*return*/, this.callContractAsync(_account, 'offer', [_punkId, _minSalePrice], _fee !== null && _fee !== void 0 ? _fee : undefined)];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.offerToAddressAsync = function (_account, _punkId, _minSalePrice, _address, _fee) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"offerToAddressAsync punkId: \".concat(_punkId, \" minSalePrice: \").concat(_minSalePrice, \" address: \").concat(_address, \" fee: \").concat(_fee))();\r\n                return [2 /*return*/, this.callContractAsync(_account, 'offerToAddress', [_punkId, _minSalePrice, _address], _fee !== null && _fee !== void 0 ? _fee : undefined)];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.buyAsync = function (_account, _punkId, _amount) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'buy', [_punkId], _amount)];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.cancelBidAsync = function (_account, _punkId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'cancelBid', [_punkId])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.enterBidAsync = function (_account, _punkId, _amount, _fee) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var amount;\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"enterBidAsync punkId: \".concat(_punkId, \" amount: \").concat(_amount, \" fee: \").concat(_fee))();\r\n                amount = _amount;\r\n                if (_fee && !util_1.CommonUtil.isNullOrWhitespace(_fee)) {\r\n                    amount = new util_1.PunkTypes.BigNumberWrapper(_amount).plus(new util_1.PunkTypes.BigNumberWrapper(_fee)).toFixed();\r\n                    logger.info(\"enterBidAsync amount+fee: \".concat(amount))();\r\n                }\r\n                return [2 /*return*/, this.callContractAsync(_account, 'enterBid', [_punkId], amount)];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.acceptBidAsync = function (_account, _punkId, _minPrice) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'acceptBid', [_punkId, _minPrice])];\r\n            });\r\n        });\r\n    };\r\n    return PunksBaseContract;\r\n}(base_contract_1.BaseContract));\r\nexports.PunksBaseContract = PunksBaseContract;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getViteClient = exports.ViteClient = void 0;\r\nvar vitejs_1 = require(\"@vite/vitejs\");\r\nvar common_1 = require(\"../common\");\r\nvar util_1 = require(\"../util\");\r\nvar wallet_1 = require(\"../wallet\");\r\nvar HTTP_RPC = require('@vite/vitejs-http').HTTP_RPC;\r\nvar WS_RPC = require('@vite/vitejs-ws').WS_RPC;\r\nvar logger = (0, util_1.getLogger)();\r\nvar providerTimeout = 10000;\r\nvar providerOptions = { retryTimes: 10, retryInterval: 1000 };\r\nvar ViteClient = /** @class */ (function () {\r\n    function ViteClient() {\r\n        var _this = this;\r\n        this.initAsync = function (network, providerType, connector) { return __awaiter(_this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                        logger.info(\"initAsync\", network)();\r\n                        _this._network = network;\r\n                        _this._connector = connector;\r\n                        var isResolved = false;\r\n                        if (providerType === util_1.PunkTypes.ProviderType.WEBSOCKET) {\r\n                            _this._provider = new WS_RPC(network.rpcUrl, providerTimeout, providerOptions);\r\n                            // https://github.com/vitelabs/vite.js/blob/master/src/WS/index.js\r\n                            _this._provider.on('close', function () {\r\n                                logger.info('Vite provider closed')();\r\n                                _this._emitter.emitReInit();\r\n                            });\r\n                            _this._provider.on('error', function (err) {\r\n                                logger.error('Vite provider error', isResolved)();\r\n                                if (isResolved)\r\n                                    return;\r\n                                _this._isConnected = false;\r\n                                reject(err);\r\n                            });\r\n                        }\r\n                        else {\r\n                            _this._provider = new HTTP_RPC(network.rpcUrl);\r\n                        }\r\n                        _this._client = new vitejs_1.ViteAPI(_this._provider, function () {\r\n                            logger.info(\"ViteAPI connected to \".concat(_this._provider.path))();\r\n                            isResolved = true;\r\n                            _this._isConnected = true;\r\n                            resolve();\r\n                        });\r\n                    })];\r\n            });\r\n        }); };\r\n        this._isConnected = false;\r\n        this._emitter = (0, util_1.getEmitter)();\r\n    }\r\n    Object.defineProperty(ViteClient.prototype, \"isConnected\", {\r\n        get: function () {\r\n            return this._isConnected;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViteClient.prototype, \"connector\", {\r\n        get: function () {\r\n            return this._connector;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ViteClient.prototype.dispose = function () {\r\n        var _a;\r\n        logger.info(\"Disposing ViteClient\")();\r\n        (_a = this._provider) === null || _a === void 0 ? void 0 : _a.destroy();\r\n        this._isConnected = false;\r\n    };\r\n    ViteClient.prototype.encodeParameter = function (type, param) {\r\n        return vitejs_1.abi.encodeParameter(type, param);\r\n    };\r\n    ViteClient.prototype.encodeLogSignature = function (jsonFunction, methodName) {\r\n        return vitejs_1.abi.encodeLogSignature(jsonFunction, methodName);\r\n    };\r\n    ViteClient.prototype.requestAsync = function (method) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                if (this._isConnected && this._client) {\r\n                    result = util_1.RetryUtil.promiseRetry(function () { return __awaiter(_this, void 0, void 0, function () {\r\n                        var _a;\r\n                        var _this = this;\r\n                        return __generator(this, function (_b) {\r\n                            return [2 /*return*/, (_a = this._client).request.apply(_a, __spreadArray([method], args, false)).catch(function (error) { return __awaiter(_this, void 0, void 0, function () {\r\n                                    var _a;\r\n                                    return __generator(this, function (_b) {\r\n                                        switch (_b.label) {\r\n                                            case 0:\r\n                                                if (!((_a = error === null || error === void 0 ? void 0 : error.message) === null || _a === void 0 ? void 0 : _a.toLowerCase().includes(\"connection error\"))) return [3 /*break*/, 2];\r\n                                                logger.error(\"CONNECTION ERROR -> reconnect\", this._network)();\r\n                                                this._emitter.emitReInit();\r\n                                                return [4 /*yield*/, util_1.CommonUtil.timeout(3000)];\r\n                                            case 1:\r\n                                                _b.sent();\r\n                                                throw error;\r\n                                            case 2: throw error;\r\n                                        }\r\n                                    });\r\n                                }); })];\r\n                        });\r\n                    }); });\r\n                    return [2 /*return*/, result];\r\n                }\r\n                else {\r\n                    throw new Error('Vite client is not ready to make requests.');\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.getSnapshotChainHeightAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.requestAsync('ledger_getSnapshotChainHeight')];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, new util_1.PunkTypes.BigNumberWrapper(result)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.getAccountBlockHeightAsync = function (address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.requestAsync(\"ledger_getAccountInfoByAddress\", address)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, new util_1.PunkTypes.BigNumberWrapper(result.blockCount)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.getBalanceAsync = function (address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.requestAsync(\"ledger_getAccountInfoByAddress\", address)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, new util_1.PunkTypes.BigNumberWrapper(result.balanceInfoMap[common_1.CommonConstants.VITE_TOKEN_ID].balance)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.getQuotaAsync = function (address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.requestAsync(\"contract_getQuotaByAccount\", address)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, {\r\n                                currentQuota: new util_1.PunkTypes.BigNumberWrapper(result.currentQuota),\r\n                                maxQuota: new util_1.PunkTypes.BigNumberWrapper(result.maxQuota),\r\n                                stakeAmount: new util_1.PunkTypes.BigNumberWrapper(result.stakeAmount)\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.sendAsync = function (account, toAddress, amount, tokenId) {\r\n        if (tokenId === void 0) { tokenId = common_1.CommonConstants.VITE_TOKEN_ID; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var block;\r\n            return __generator(this, function (_a) {\r\n                block = vitejs_1.accountBlock\r\n                    .createAccountBlock(\"send\", {\r\n                    address: account.address,\r\n                    toAddress: toAddress,\r\n                    tokenId: tokenId,\r\n                    amount: amount\r\n                });\r\n                return [2 /*return*/, this.sendAccountBlockAsync(account, block)];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.stakeForQuotaAsync = function (account, beneficiaryAddress, amount) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var block;\r\n            return __generator(this, function (_a) {\r\n                block = vitejs_1.accountBlock\r\n                    .createAccountBlock(\"stakeForQuota\", {\r\n                    address: account.address,\r\n                    beneficiaryAddress: beneficiaryAddress,\r\n                    amount: amount\r\n                });\r\n                return [2 /*return*/, this.sendAccountBlockAsync(account, block)];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.callContractAsync = function (account, methodName, abi, params, toAddress, amount, tokenId) {\r\n        if (amount === void 0) { amount = '0'; }\r\n        if (tokenId === void 0) { tokenId = common_1.CommonConstants.VITE_TOKEN_ID; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var block;\r\n            return __generator(this, function (_a) {\r\n                block = vitejs_1.accountBlock\r\n                    .createAccountBlock(\"callContract\", {\r\n                    address: account.address,\r\n                    abi: abi,\r\n                    methodName: methodName,\r\n                    tokenId: tokenId,\r\n                    amount: amount,\r\n                    toAddress: toAddress,\r\n                    params: params,\r\n                });\r\n                return [2 /*return*/, this.sendAccountBlockAsync(account, block)];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.createContractAsync = function (account, abi, binary) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var responseLatency, quotaMultiplier, randomDegree, block;\r\n            return __generator(this, function (_a) {\r\n                responseLatency = 1;\r\n                quotaMultiplier = 10;\r\n                randomDegree = 1;\r\n                block = vitejs_1.accountBlock\r\n                    .createAccountBlock(\"createContract\", {\r\n                    address: account.address,\r\n                    abi: abi,\r\n                    code: binary,\r\n                    responseLatency: responseLatency,\r\n                    params: [],\r\n                    quotaMultiplier: quotaMultiplier,\r\n                    randomDegree: randomDegree\r\n                });\r\n                return [2 /*return*/, this.sendAccountBlockAsync(account, block)];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.callOffChainMethodAsync = function (contractAddress, abi, offchaincode, params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var data, dataBase64, result, resultBytes, outputs, i, offchainDecodeResult, resultList, i;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        data = vitejs_1.abi.encodeFunctionCall(abi, params);\r\n                        dataBase64 = Buffer.from(data, \"hex\").toString(\"base64\");\r\n                        return [4 /*yield*/, this.requestAsync(\"contract_callOffChainMethod\", {\r\n                                selfAddr: contractAddress,\r\n                                offChainCode: offchaincode,\r\n                                data: dataBase64,\r\n                            })];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (result) {\r\n                            resultBytes = Buffer.from(result, \"base64\").toString(\"hex\");\r\n                            outputs = [];\r\n                            for (i = 0; i < abi.outputs.length; i++) {\r\n                                outputs.push(abi.outputs[i].type);\r\n                            }\r\n                            offchainDecodeResult = vitejs_1.abi.decodeParameters(outputs, resultBytes);\r\n                            resultList = [];\r\n                            if (offchainDecodeResult) {\r\n                                for (i = 0; i < abi.outputs.length; i++) {\r\n                                    if (abi.outputs[i].name) {\r\n                                        resultList.push({\r\n                                            name: abi.outputs[i].name,\r\n                                            value: offchainDecodeResult[i],\r\n                                        });\r\n                                    }\r\n                                    else {\r\n                                        resultList.push({\r\n                                            name: \"\",\r\n                                            value: offchainDecodeResult[i],\r\n                                        });\r\n                                    }\r\n                                }\r\n                            }\r\n                            return [2 /*return*/, resultList];\r\n                        }\r\n                        return [2 /*return*/, \"\"];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.decodeVmLog = function (vmLog, abi) {\r\n        var topics = vmLog.topics;\r\n        for (var j = 0; j < abi.length; j++) {\r\n            var abiItem = abi[j];\r\n            if (vitejs_1.abi.encodeLogSignature(abiItem) === topics[0]) {\r\n                var result = this.decodeVmLogByAbiItem(vmLog, abiItem);\r\n                if (result) {\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    ViteClient.prototype.decodeVmLogByAbiItem = function (vmLog, abiItem) {\r\n        if (!vmLog || !vmLog.data || !vmLog.topics) {\r\n            return undefined;\r\n        }\r\n        var topics = vmLog.topics;\r\n        var log = {\r\n            topic: topics[0],\r\n            args: vitejs_1.abi.decodeLog(abiItem.inputs, vitejs_1.utils._Buffer.from(vmLog.data, \"base64\").toString(\"hex\"), topics.slice(1)),\r\n            event: abiItem.name,\r\n        };\r\n        return log;\r\n    };\r\n    ViteClient.prototype.getEventsByBlockAsync = function (address, fromHeight, toHeight, topics) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var payload, result, error_1, midHeight, arr2;\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (fromHeight.gt(toHeight)) {\r\n                            logger.info(\"getEventsByBlockAsync \".concat(fromHeight.toFixed(), \" > \").concat(toHeight.toFixed()))();\r\n                            return [2 /*return*/, []];\r\n                        }\r\n                        payload = {\r\n                            addressHeightRange: (_a = {},\r\n                                _a[address] = {\r\n                                    fromHeight: fromHeight.toFixed(),\r\n                                    toHeight: toHeight.toFixed(),\r\n                                },\r\n                                _a),\r\n                            topics: topics\r\n                        };\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 3, , 5]);\r\n                        return [4 /*yield*/, this.requestAsync(\"ledger_getVmLogsByFilter\", payload)];\r\n                    case 2:\r\n                        result = _b.sent();\r\n                        return [2 /*return*/, result];\r\n                    case 3:\r\n                        error_1 = _b.sent();\r\n                        midHeight = fromHeight.plus(toHeight).div(2);\r\n                        logger.info(\"Divide and conquer block fromHeight: \".concat(fromHeight.toFixed(), \" toHeight: \").concat(toHeight.toFixed(), \" midHeight: \").concat(midHeight.toFixed()))();\r\n                        return [4 /*yield*/, this.getEventsByBlockAsync(address, midHeight.plus(1), toHeight, topics)];\r\n                    case 4:\r\n                        arr2 = _b.sent();\r\n                        //return [...arr1, ...arr2];\r\n                        return [2 /*return*/, arr2];\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.createAddressListenerAsync = function (address) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var payload, result;\r\n            var _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        payload = {\r\n                            addressHeightRange: (_b = {},\r\n                                _b[address] = {\r\n                                    fromHeight: \"0\",\r\n                                    toHeight: \"0\",\r\n                                },\r\n                                _b),\r\n                        };\r\n                        return [4 /*yield*/, ((_a = this._client) === null || _a === void 0 ? void 0 : _a.subscribe(\"createVmlogSubscription\", payload))];\r\n                    case 1:\r\n                        result = _c.sent();\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.removeListener = function (event) {\r\n        var _a;\r\n        logger.info('removeListener')();\r\n        (_a = this._client) === null || _a === void 0 ? void 0 : _a.unsubscribe(event);\r\n    };\r\n    ViteClient.prototype.waitForNextVmLogEventAsync = function (listener, abi) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                logger.info('waitForNextVmLogEvent')();\r\n                return [2 /*return*/, new Promise(function (resolve) { return __awaiter(_this, void 0, void 0, function () {\r\n                        var _this = this;\r\n                        return __generator(this, function (_a) {\r\n                            // listener = EventEmitter\r\n                            // https://github.com/vitelabs/vite.js/blob/14b87a6ddc68fe5836816f949f85d6161e6cfed8/src/viteAPI/eventEmitter.ts\r\n                            listener.on(function (results) { return __awaiter(_this, void 0, void 0, function () {\r\n                                var result, vmLog;\r\n                                return __generator(this, function (_a) {\r\n                                    if (results.length !== 1) {\r\n                                        console.log(results);\r\n                                        throw new Error('Unexpected results');\r\n                                    }\r\n                                    result = results[results.length - 1];\r\n                                    vmLog = this.decodeVmLog(result.vmlog, abi);\r\n                                    logger.info(\"vmLog\", vmLog)();\r\n                                    // https://github.com/vitelabs/vite.js/blob/14b87a6ddc68fe5836816f949f85d6161e6cfed8/src/viteAPI/provider.ts\r\n                                    // Don't unsubscribe, listener should be reusable!\r\n                                    // provider.unsubscribe(listener);\r\n                                    resolve(vmLog);\r\n                                    return [2 /*return*/];\r\n                                });\r\n                            }); });\r\n                            return [2 /*return*/];\r\n                        });\r\n                    }); })];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.waitForAccountBlockAsync = function (address, height) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, new Promise(function (resolve, reject) { return __awaiter(_this, void 0, void 0, function () {\r\n                        var result, error, timestamp, task;\r\n                        var _this = this;\r\n                        return __generator(this, function (_a) {\r\n                            result = undefined;\r\n                            error = undefined;\r\n                            timestamp = Date.now();\r\n                            task = new util_1.Task(function () { return __awaiter(_this, void 0, void 0, function () {\r\n                                var blockByHeight, receiveBlockHash, blockByHash, err_1;\r\n                                return __generator(this, function (_a) {\r\n                                    switch (_a.label) {\r\n                                        case 0:\r\n                                            _a.trys.push([0, 3, , 4]);\r\n                                            if (Date.now() - timestamp >= providerTimeout) {\r\n                                                throw new Error(\"Task timed out\");\r\n                                            }\r\n                                            return [4 /*yield*/, this.requestAsync('ledger_getAccountBlockByHeight', address, height)];\r\n                                        case 1:\r\n                                            blockByHeight = _a.sent();\r\n                                            if (!blockByHeight) {\r\n                                                return [2 /*return*/, true];\r\n                                            }\r\n                                            receiveBlockHash = blockByHeight.receiveBlockHash;\r\n                                            if (!receiveBlockHash) {\r\n                                                return [2 /*return*/, true];\r\n                                            }\r\n                                            return [4 /*yield*/, this.requestAsync('ledger_getAccountBlockByHash', receiveBlockHash)];\r\n                                        case 2:\r\n                                            blockByHash = _a.sent();\r\n                                            if (!blockByHash) {\r\n                                                return [2 /*return*/, true];\r\n                                            }\r\n                                            result = __assign(__assign({}, this.getAccountBlockStatus(blockByHash)), { accountBlock: blockByHash });\r\n                                            return [2 /*return*/, false];\r\n                                        case 3:\r\n                                            err_1 = _a.sent();\r\n                                            error = err_1;\r\n                                            return [2 /*return*/, false];\r\n                                        case 4: return [2 /*return*/];\r\n                                    }\r\n                                });\r\n                            }); }, 500);\r\n                            task.start(function () {\r\n                                if (error) {\r\n                                    reject(error);\r\n                                }\r\n                                else {\r\n                                    resolve(result);\r\n                                }\r\n                            });\r\n                            return [2 /*return*/];\r\n                        });\r\n                    }); })];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.receiveTransactionAsync = function (account, block) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var blocks, ab;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!!block) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.requestAsync(\"ledger_getUnreceivedBlocksByAddress\", account.address, 0, 1)];\r\n                    case 1:\r\n                        blocks = _a.sent();\r\n                        if (blocks && blocks.length > 0) {\r\n                            block = blocks[0];\r\n                        }\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (!block) {\r\n                            logger.info(\"No Unreceived Blocks: \".concat(account.address))();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        ab = vitejs_1.accountBlock\r\n                            .createAccountBlock(\"receive\", {\r\n                            address: account.address,\r\n                            sendBlockHash: block.hash,\r\n                        });\r\n                        return [2 /*return*/, this.sendAccountBlockAsync(account, ab)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.receiveAllOnroadTxAsync = function (account) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var RECEIVE_PER_ROUND, blocks, i, block;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        RECEIVE_PER_ROUND = 10;\r\n                        return [4 /*yield*/, this.requestAsync(\"ledger_getUnreceivedBlocksByAddress\", account.address, 0, RECEIVE_PER_ROUND)];\r\n                    case 1:\r\n                        blocks = _a.sent();\r\n                        i = 0;\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (!(i < blocks.length)) return [3 /*break*/, 5];\r\n                        block = blocks[i];\r\n                        return [4 /*yield*/, this.receiveTransactionAsync(account, block)];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        i++;\r\n                        return [3 /*break*/, 2];\r\n                    case 5:\r\n                        if (!(blocks.length >= RECEIVE_PER_ROUND)) return [3 /*break*/, 7];\r\n                        return [4 /*yield*/, this.receiveAllOnroadTxAsync(account)];\r\n                    case 6:\r\n                        _a.sent();\r\n                        _a.label = 7;\r\n                    case 7: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.sendAccountBlockAsync = function (account, block) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, result, error_2;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(account instanceof wallet_1.WebWalletAccount)) return [3 /*break*/, 3];\r\n                        block = block.setProvider(this._client).setPrivateKey(account.privateKey);\r\n                        return [4 /*yield*/, block.autoSetPreviousAccountBlock()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, block.sign().send()];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, result];\r\n                    case 3:\r\n                        if (!(account instanceof wallet_1.SessionWalletAccount)) return [3 /*break*/, 10];\r\n                        if (!this.connector) return [3 /*break*/, 8];\r\n                        this._emitter.emitConfirmTransactionDialog(true);\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        _a.trys.push([4, 6, , 7]);\r\n                        return [4 /*yield*/, this.connector.sendTransactionAsync({\r\n                                block: block.accountBlock\r\n                            })];\r\n                    case 5:\r\n                        result = _a.sent();\r\n                        this._emitter.emitConfirmTransactionDialog(false);\r\n                        return [2 /*return*/, result];\r\n                    case 6:\r\n                        error_2 = _a.sent();\r\n                        this._emitter.emitConfirmTransactionDialog(false);\r\n                        throw error_2;\r\n                    case 7: return [3 /*break*/, 9];\r\n                    case 8: throw new Error(\"Connector is not defined\");\r\n                    case 9: return [3 /*break*/, 11];\r\n                    case 10: throw new Error(\"Account not supported\");\r\n                    case 11: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.getAccountBlockStatus = function (accountBlock) {\r\n        var status = this.resolveAccountBlockData(accountBlock);\r\n        var statusTxt = '';\r\n        switch (status) {\r\n            case 0:\r\n                statusTxt = '0, Execution succeed';\r\n                break;\r\n            case 1:\r\n                statusTxt = '1, Execution reverted';\r\n                break;\r\n            case 2:\r\n                statusTxt = '2, Max call depth exceeded';\r\n                break;\r\n        }\r\n        return {\r\n            status: status,\r\n            statusTxt: statusTxt\r\n        };\r\n    };\r\n    ViteClient.prototype.resolveAccountBlockData = function (accountBlock) {\r\n        if ((accountBlock.blockType !== 4 && accountBlock.blockType !== 5) ||\r\n            !accountBlock.data) {\r\n            return 0;\r\n        }\r\n        var bytes = vitejs_1.utils._Buffer.from(accountBlock.data, 'base64');\r\n        if (bytes.length !== 33) {\r\n            return 0;\r\n        }\r\n        return bytes[32];\r\n    };\r\n    return ViteClient;\r\n}());\r\nexports.ViteClient = ViteClient;\r\nvar client = new ViteClient();\r\nvar getViteClient = function () {\r\n    return client;\r\n};\r\nexports.getViteClient = getViteClient;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseDataSource = void 0;\r\nvar common_1 = require(\"../common\");\r\nvar search_1 = require(\"../search\");\r\nvar util_1 = require(\"../util\");\r\nvar logger = (0, util_1.getLogger)();\r\nvar BaseDataSource = /** @class */ (function () {\r\n    function BaseDataSource() {\r\n        this._accountAuctions = new Map();\r\n        this._emitter = (0, util_1.getEmitter)();\r\n        this._punkSearch = (0, search_1.getPunkSearch)();\r\n        this.clear();\r\n    }\r\n    BaseDataSource.prototype.clear = function () {\r\n        this._punkAttributes = [];\r\n        this._punks = [];\r\n        this._punksFiltered = {\r\n            sortBy: common_1.DefaultPunkFilterValues.sortBy,\r\n            orderBy: common_1.DefaultPunkFilterValues.orderBy,\r\n            searchTerm: common_1.DefaultPunkFilterValues.search,\r\n            items: []\r\n        };\r\n    };\r\n    BaseDataSource.prototype.initPunkAttributesAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var attributes;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.fileUtil.readFileAsync(\"./assets/data/punk_attributes.json?v=\" + process.env.REACT_APP_VERSION)];\r\n                    case 1:\r\n                        attributes = _a.sent();\r\n                        attributes = JSON.parse(attributes);\r\n                        this._punkAttributes = attributes;\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.initPunksAsync = function () {\r\n        var _a, _b, _c, _d;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var punks, infos, index, p, info, punk;\r\n            return __generator(this, function (_e) {\r\n                switch (_e.label) {\r\n                    case 0: return [4 /*yield*/, this.fileUtil.readFileAsync(\"./assets/data/punks.gz?v=\" + process.env.REACT_APP_VERSION, \"binary\")];\r\n                    case 1:\r\n                        punks = _e.sent();\r\n                        punks = JSON.parse(util_1.CompressUtil.decompress(util_1.CommonUtil.toUint8Array(punks)));\r\n                        infos = this._punkInfos;\r\n                        if (!infos || infos.length !== common_1.CommonConstants.TOTAL_MINTS) {\r\n                            logger.info(\"Invalid punk infos\")();\r\n                            infos = this.getDefaultPunkInfos();\r\n                        }\r\n                        for (index = 0; index < punks.length; index++) {\r\n                            p = punks[index];\r\n                            info = infos[index];\r\n                            punk = {\r\n                                __typename: util_1.PunkTypes.TypeNames.Punk,\r\n                                id: p.index.toString(),\r\n                                rank: p.rank,\r\n                                image: p.image,\r\n                                cid: (_a = p.cid) !== null && _a !== void 0 ? _a : \"0\",\r\n                                attributes: p.attributes,\r\n                                owner: (_b = info.owner) !== null && _b !== void 0 ? _b : null,\r\n                                bid: (_c = info.bid) !== null && _c !== void 0 ? _c : null,\r\n                                offer: (_d = info.offer) !== null && _d !== void 0 ? _d : null\r\n                            };\r\n                            this._punks.push(punk);\r\n                            if (this._punksFiltered.orderBy === util_1.PunkTypes.OrderBy.ASC) {\r\n                                this._punksFiltered.items.push(punk);\r\n                            }\r\n                            else {\r\n                                this._punksFiltered.items.unshift(punk);\r\n                            }\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.updatePunksAsync = function () {\r\n        var _a, _b, _c;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var index, p, info;\r\n            return __generator(this, function (_d) {\r\n                if (this._punkInfos) {\r\n                    for (index = 0; index < this._punks.length; index++) {\r\n                        p = this._punks[index];\r\n                        info = this._punkInfos[index];\r\n                        p.owner = (_a = info.owner) !== null && _a !== void 0 ? _a : null;\r\n                        p.bid = (_b = info.bid) !== null && _b !== void 0 ? _b : null;\r\n                        p.offer = (_c = info.offer) !== null && _c !== void 0 ? _c : null;\r\n                    }\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.initAccountAuctionsAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var addAccountAuction, _i, _a, p, bidAuction, offerAuction;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                this._accountAuctions = new Map();\r\n                addAccountAuction = function (_address, _auction) {\r\n                    var auctions = _this._accountAuctions.get(_address);\r\n                    if (!auctions) {\r\n                        auctions = [];\r\n                        _this._accountAuctions.set(_address, auctions);\r\n                    }\r\n                    auctions.push(_auction);\r\n                };\r\n                for (_i = 0, _a = this._punks; _i < _a.length; _i++) {\r\n                    p = _a[_i];\r\n                    if (p.owner && !util_1.CommonUtil.isNullOrWhitespace(p.owner)) {\r\n                        if (p.bid && p.bid.timestamp) {\r\n                            bidAuction = {\r\n                                timestamp: p.bid.timestamp,\r\n                                auctionType: util_1.PunkTypes.AccountAuctionType.Bid,\r\n                                punkId: parseInt(p.id),\r\n                                owner: p.owner,\r\n                                amount: p.bid.amount,\r\n                                address: p.bid.bidder\r\n                            };\r\n                            addAccountAuction(p.owner, bidAuction);\r\n                            if (bidAuction.address && !util_1.CommonUtil.isNullOrWhitespace(bidAuction.address) && bidAuction.address !== p.owner) {\r\n                                addAccountAuction(bidAuction.address, bidAuction);\r\n                            }\r\n                        }\r\n                        if (p.offer && p.offer.timestamp) {\r\n                            offerAuction = {\r\n                                timestamp: p.offer.timestamp,\r\n                                auctionType: util_1.PunkTypes.AccountAuctionType.Offer,\r\n                                punkId: parseInt(p.id),\r\n                                owner: p.owner,\r\n                                amount: p.offer.minAmount,\r\n                                address: p.offer.onlySellTo\r\n                            };\r\n                            addAccountAuction(p.owner, offerAuction);\r\n                            if (offerAuction.address && !util_1.CommonUtil.isNullOrWhitespace(offerAuction.address) && offerAuction.address !== p.owner) {\r\n                                addAccountAuction(offerAuction.address, offerAuction);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.initBaseAsync = function (network, providerType) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"Init BaseDataSource\")();\r\n                        this.clear();\r\n                        return [4 /*yield*/, this.initAsync(network, providerType)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.initPunkAttributesAsync()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.initPunkInfosAsync()];\r\n                    case 3:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.initPunksAsync()];\r\n                    case 4:\r\n                        _a.sent();\r\n                        this._punkSearch.index(this._punks);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.dispose = function () {\r\n        logger.info(\"Disposing BaseDataSource\")();\r\n        this.disposeProtected();\r\n    };\r\n    BaseDataSource.prototype.getAccount = function () {\r\n        var account = this.walletManager.getActiveAccount();\r\n        util_1.Ensure.notNull(account, \"account\", \"Please connect your wallet first.\");\r\n        return account;\r\n    };\r\n    BaseDataSource.prototype.getPunkAttributesAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._punkAttributes];\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.getPunkAsync = function (id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var punkId;\r\n            return __generator(this, function (_a) {\r\n                if (!util_1.CommonUtil.isNumber(id)) {\r\n                    throw new Error(\"Invalid punk identifier.\");\r\n                }\r\n                punkId = parseInt(id) - 1;\r\n                if (punkId < 0 || punkId >= this._punks.length) {\r\n                    throw new Error(\"Punk does not exist.\");\r\n                }\r\n                return [2 /*return*/, this._punks[punkId]];\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.getPunksAsync = function (_limit, _offset, _sort, _order, _search) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_c) {\r\n                // check if sort, order or search changed -> update punksFiltered\r\n                if (this._punksFiltered.searchTerm !== _search || this._punksFiltered.sortBy !== _sort || this._punksFiltered.orderBy !== _order) {\r\n                    logger.info(\"limit\", _limit, \"offset\", _offset, \"sort\", _sort, \"order\", _order)();\r\n                    this._punksFiltered.searchTerm = _search;\r\n                    this._punksFiltered.items = (_a = this._punkSearch.search(_search, this._punks)) !== null && _a !== void 0 ? _a : [];\r\n                    this._punksFiltered.sortBy = _sort;\r\n                    this._punksFiltered.orderBy = _order;\r\n                    this._punksFiltered.items = (_b = util_1.FilterUtil.sortPunks(this._punksFiltered.sortBy, this._punksFiltered.orderBy, this._punksFiltered.items)) !== null && _b !== void 0 ? _b : [];\r\n                }\r\n                return [2 /*return*/, this._punksFiltered.items.slice(_offset, _offset + _limit)];\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.getPunksAllAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._punks];\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.getActionPriceAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!!this._actionPrice) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.getMarketInfoAsync()];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        this._actionPrice = result.actionPrice;\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/, this._actionPrice];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.getMintPriceAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!!this._mintPrice) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.getMarketInfoAsync()];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        this._mintPrice = result.mintPrice;\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/, this._mintPrice];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.getAccountAuctionsAsync = function (_address, _limit, _cursor) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var cursorIndex, auctions, result;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        logger.info(\"getAccountAuctionsAsync\", _address, _limit, _cursor)();\r\n                        cursorIndex = 0;\r\n                        auctions = [];\r\n                        if (!(!_cursor || util_1.CommonUtil.isNullOrWhitespace(_cursor))) return [3 /*break*/, 4];\r\n                        return [4 /*yield*/, this.initPunkInfosAsync()];\r\n                    case 1:\r\n                        _c.sent();\r\n                        return [4 /*yield*/, this.updatePunksAsync()];\r\n                    case 2:\r\n                        _c.sent();\r\n                        return [4 /*yield*/, this.initAccountAuctionsAsync()];\r\n                    case 3:\r\n                        _c.sent();\r\n                        this.orderAccountAuctions(_address);\r\n                        auctions = (_a = this._accountAuctions.get(_address)) !== null && _a !== void 0 ? _a : [];\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        auctions = (_b = this._accountAuctions.get(_address)) !== null && _b !== void 0 ? _b : [];\r\n                        cursorIndex = auctions.findIndex(function (e) { return e.timestamp.eq(new util_1.PunkTypes.BigNumberWrapper(_cursor)); });\r\n                        logger.info(\"Cursor\", _cursor, \"cursorIndex\", cursorIndex)();\r\n                        if (cursorIndex === -1) {\r\n                            logger.info(\"getAccountAuctionsAsync cursor index not found\")();\r\n                            auctions = [];\r\n                        }\r\n                        else {\r\n                            auctions = auctions.slice(cursorIndex + 1);\r\n                        }\r\n                        _c.label = 5;\r\n                    case 5:\r\n                        result = auctions.slice(0, _limit);\r\n                        return [2 /*return*/, {\r\n                                cursor: {\r\n                                    prev: _cursor !== null && _cursor !== void 0 ? _cursor : null,\r\n                                    next: auctions.length > _limit ? result[result.length - 1].timestamp.toFixed() : null\r\n                                },\r\n                                auctions: result\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.createId = function () {\r\n        return util_1.CommonUtil.uuid();\r\n    };\r\n    BaseDataSource.prototype.getDefaultPunkInfos = function () {\r\n        var infos = [];\r\n        for (var index = 1; index <= common_1.CommonConstants.TOTAL_MINTS; index++) {\r\n            infos.push({\r\n                id: index.toString()\r\n            });\r\n        }\r\n        return infos;\r\n    };\r\n    BaseDataSource.prototype.orderAccountAuctions = function (_address) {\r\n        var auctions = this._accountAuctions.get(_address);\r\n        if (!auctions) {\r\n            return;\r\n        }\r\n        auctions = auctions.sort(function (a, b) {\r\n            return a.timestamp.gt(b.timestamp) ? -1 : 1;\r\n        });\r\n        this._accountAuctions.set(_address, auctions);\r\n    };\r\n    return BaseDataSource;\r\n}());\r\nexports.BaseDataSource = BaseDataSource;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ViteBaseDataSource = void 0;\r\nvar axios_1 = require(\"axios\");\r\nvar _1 = require(\".\");\r\nvar __1 = require(\"..\");\r\nvar clients_1 = require(\"../clients\");\r\nvar common_1 = require(\"../common\");\r\nvar contracts_1 = require(\"../contracts\");\r\nvar util_1 = require(\"../util\");\r\nvar logger = (0, util_1.getLogger)();\r\nvar ViteBaseDataSource = /** @class */ (function (_super) {\r\n    __extends(ViteBaseDataSource, _super);\r\n    function ViteBaseDataSource() {\r\n        var _this = _super.call(this) || this;\r\n        _this.getNewMarketEventsAsync = function (_from) { return __awaiter(_this, void 0, void 0, function () {\r\n            var abiItem, encodedLogSignature, topics, toHeight;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        abiItem = this.contract.getAbiItemByType(contracts_1.AbiItemType.punkChangedEvent);\r\n                        encodedLogSignature = this._client.encodeLogSignature(abiItem);\r\n                        topics = [\r\n                            [\r\n                                encodedLogSignature\r\n                            ]\r\n                        ];\r\n                        return [4 /*yield*/, this._client.getAccountBlockHeightAsync(this.contract.contract.address)];\r\n                    case 1:\r\n                        toHeight = _a.sent();\r\n                        return [4 /*yield*/, this._client.getEventsByBlockAsync(this.contract.contract.address, _from, toHeight, topics)];\r\n                    case 2: return [2 /*return*/, _a.sent()];\r\n                }\r\n            });\r\n        }); };\r\n        _this._client = (0, clients_1.getViteClient)();\r\n        return _this;\r\n    }\r\n    ViteBaseDataSource.prototype.initPunkInfosAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, infos, _i, _a, p, info, index, error_1;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _b.trys.push([0, 3, , 4]);\r\n                        return [4 /*yield*/, (0, axios_1.default)({\r\n                                method: 'get',\r\n                                url: common_1.CommonConfig.IS_PRODUCTION ? common_1.CommonConstants.MARKET_DATA_URL : \"\",\r\n                                responseType: 'json',\r\n                                timeout: 3000\r\n                            })];\r\n                    case 1:\r\n                        result = _b.sent();\r\n                        infos = result.data;\r\n                        this._punkInfos = this.getDefaultPunkInfos();\r\n                        if (infos && Array.isArray(infos.punks)) {\r\n                            for (_i = 0, _a = infos.punks; _i < _a.length; _i++) {\r\n                                p = _a[_i];\r\n                                info = util_1.TransformUtil.toPunkInfo(p);\r\n                                if (info) {\r\n                                    index = parseInt(p.id) - 1;\r\n                                    this._punkInfos[index] = info;\r\n                                }\r\n                            }\r\n                        }\r\n                        return [4 /*yield*/, this.updatePunkInfosAsync(util_1.TransformUtil.toBigNumber(infos.refHeight))];\r\n                    case 2:\r\n                        _b.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        error_1 = _b.sent();\r\n                        logger.error(error_1)();\r\n                        return [3 /*break*/, 4];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.initAsync = function (network, providerType) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var connector, walletConnectorFactory, _a;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        logger.info('Init ViteDataSource')();\r\n                        this.disposeProtected();\r\n                        if (providerType === util_1.PunkTypes.ProviderType.WEBSOCKET) {\r\n                            walletConnectorFactory = new __1.WalletConnectorFactory(this.walletManager);\r\n                            connector = walletConnectorFactory.create(network);\r\n                        }\r\n                        return [4 /*yield*/, this._client.initAsync(network, providerType, connector)];\r\n                    case 1:\r\n                        _b.sent();\r\n                        return [4 /*yield*/, this.contract.initAsync(this._client, \"./assets/contracts\")];\r\n                    case 2:\r\n                        _b.sent();\r\n                        _a = this;\r\n                        return [4 /*yield*/, this._client.createAddressListenerAsync(this.contract.contract.address)];\r\n                    case 3:\r\n                        _a._listener = _b.sent();\r\n                        this._listener.on(function (results) {\r\n                            var _a;\r\n                            if (!((_a = _this.contract) === null || _a === void 0 ? void 0 : _a.contract.abi)) {\r\n                                logger.error('Could not decode vmlog because contract abi is not defined.')();\r\n                            }\r\n                            else {\r\n                                for (var index = 0; index < results.length; index++) {\r\n                                    var result = results[index];\r\n                                    var vmLog = _this._client.decodeVmLog(result.vmlog, _this.contract.contract.abi);\r\n                                    logger.info(vmLog !== null && vmLog !== void 0 ? vmLog : result)();\r\n                                    if (vmLog) {\r\n                                        _this.handleVmLogAsync(result.accountBlockHash, result.accountBlockHeight, vmLog);\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.disposeProtected = function () {\r\n        logger.info('Dispose ViteDataSource')();\r\n        if (this._listener) {\r\n            this._client.removeListener(this._listener);\r\n        }\r\n        this._client.dispose();\r\n    };\r\n    ViteBaseDataSource.prototype.getQuotaAsync = function (_address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._client.getQuotaAsync(_address)];\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getPunkEventsAsync = function (_id, _limit, _offset, _height) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var abiItem, encodedLogSignature, topics, fromHeight, toHeight, result, events;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"id\", _id, \"limit\", _limit, \"offset\", _offset, \"height\", _height)();\r\n                        if (util_1.CommonUtil.isNullOrWhitespace(_id)) {\r\n                            return [2 /*return*/, {\r\n                                    blockHeight: util_1.TransformUtil.defaultBigNumber,\r\n                                    events: []\r\n                                }];\r\n                        }\r\n                        abiItem = this.contract.getAbiItemByType(contracts_1.AbiItemType.punkChangedEvent);\r\n                        encodedLogSignature = this._client.encodeLogSignature(abiItem);\r\n                        topics = [\r\n                            [\r\n                                encodedLogSignature\r\n                            ],\r\n                            [\r\n                            // don't filter based on eventType\r\n                            ],\r\n                            [\r\n                                // filter based on punkId\r\n                                this._client.encodeParameter('uint256', _id)\r\n                            ]\r\n                        ];\r\n                        fromHeight = this.getEventsFromHeight();\r\n                        return [4 /*yield*/, this.getAccountBlockHeightAsync(this.contract.contract.address, _height)];\r\n                    case 1:\r\n                        toHeight = _a.sent();\r\n                        return [4 /*yield*/, this._client.getEventsByBlockAsync(this.contract.contract.address, fromHeight, toHeight, topics)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        result = result === null || result === void 0 ? void 0 : result.reverse().slice(_offset, _offset + _limit);\r\n                        events = this.toPunkEvents(result);\r\n                        return [2 /*return*/, {\r\n                                blockHeight: toHeight,\r\n                                events: events\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getPunkOwnerAsync = function (_id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.contract.ownerOfAsync(_id)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getPunksByAddressAsync = function (_address, _limit, _offset) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, punks, _i, result_1, id, punk;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"getPunksByAddressAsync\", _address, _limit, _offset)();\r\n                        if (util_1.CommonUtil.isNullOrWhitespace(_address)) {\r\n                            return [2 /*return*/, []];\r\n                        }\r\n                        return [4 /*yield*/, this.contract.getTokensOfAsync(_address)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        result = result.slice(_offset, _offset + _limit);\r\n                        punks = [];\r\n                        _i = 0, result_1 = result;\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (!(_i < result_1.length)) return [3 /*break*/, 5];\r\n                        id = result_1[_i];\r\n                        return [4 /*yield*/, this.getPunkAsync(id)];\r\n                    case 3:\r\n                        punk = _a.sent();\r\n                        punks.push(punk);\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        _i++;\r\n                        return [3 /*break*/, 2];\r\n                    case 5: return [2 /*return*/, punks];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getMarketBidAsync = function (_id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.contract.getBidAsync(_id)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result || !result.hasBid) {\r\n                            return [2 /*return*/, null];\r\n                        }\r\n                        return [2 /*return*/, {\r\n                                __typename: util_1.PunkTypes.TypeNames.MarketBid,\r\n                                itemIndex: result.itemIndex,\r\n                                amount: result.amount,\r\n                                bidder: result.bidder,\r\n                                timestamp: null\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getMarketOfferAsync = function (_id) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, this.contract.getOfferAsync(_id)];\r\n                    case 1:\r\n                        result = _b.sent();\r\n                        if (!result || !result.isForSale) {\r\n                            return [2 /*return*/, null];\r\n                        }\r\n                        return [2 /*return*/, {\r\n                                __typename: util_1.PunkTypes.TypeNames.MarketOffer,\r\n                                itemIndex: result.itemIndex,\r\n                                minAmount: result.minAmount,\r\n                                seller: result.seller,\r\n                                onlySellTo: (_a = result.onlySellTo) !== null && _a !== void 0 ? _a : '',\r\n                                timestamp: null\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getMarketEventsAsync = function (_limit, _offset, _height) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var abiItem, encodedLogSignature, topics, toHeight, fromHeight, result, events;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"getMarketEventsAsync\", _limit, _offset)();\r\n                        abiItem = this.contract.getAbiItemByType(contracts_1.AbiItemType.punkChangedEvent);\r\n                        encodedLogSignature = this._client.encodeLogSignature(abiItem);\r\n                        topics = [\r\n                            [\r\n                                encodedLogSignature\r\n                            ]\r\n                        ];\r\n                        return [4 /*yield*/, this.getAccountBlockHeightAsync(this.contract.contract.address, _height)];\r\n                    case 1:\r\n                        toHeight = _a.sent();\r\n                        fromHeight = util_1.PunkTypes.BigNumberWrapper.maximum(this.getEventsFromHeight(), toHeight.minus(1000));\r\n                        return [4 /*yield*/, this._client.getEventsByBlockAsync(this.contract.contract.address, fromHeight, toHeight, topics)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        result = result === null || result === void 0 ? void 0 : result.reverse().slice(_offset, _offset + _limit);\r\n                        events = this.toPunkEvents(result);\r\n                        return [2 /*return*/, {\r\n                                blockHeight: toHeight,\r\n                                events: events\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getMarketInfoAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.contract.getMarketInfoAsync()];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        this._actionPrice = result.actionPrice;\r\n                        this._mintPrice = result.mintPrice;\r\n                        logger.info(\"getMarketInfoAsync\", result)();\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.mintAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var mintPrice, result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.getMintPriceAsync()];\r\n                    case 2:\r\n                        mintPrice = _a.sent();\r\n                        return [4 /*yield*/, this.contract.mintAsync(this.getAccount(), mintPrice.toFixed())];\r\n                    case 3:\r\n                        result = _a.sent();\r\n                        logger.info(\"mintAsync\", result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.offerAsync = function (_id, _amount, _address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var fee, result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"offerAsync\", \"id\", _id, \"amount\", _amount, \"address\", _address)();\r\n                        return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.getFeeAsync()];\r\n                    case 2:\r\n                        fee = _a.sent();\r\n                        if (!(_address && !util_1.CommonUtil.isNullOrWhitespace(_address))) return [3 /*break*/, 4];\r\n                        return [4 /*yield*/, this.contract.offerToAddressAsync(this.getAccount(), _id, _amount, _address, fee)];\r\n                    case 3:\r\n                        result = _a.sent();\r\n                        return [3 /*break*/, 6];\r\n                    case 4: return [4 /*yield*/, this.contract.offerAsync(this.getAccount(), _id, _amount, fee)];\r\n                    case 5:\r\n                        result = _a.sent();\r\n                        _a.label = 6;\r\n                    case 6:\r\n                        logger.info(\"offerAsync\", result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.cancelOfferAsync = function (_id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"cancelOfferAsync\", \"id\", _id)();\r\n                        return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.contract.cancelOfferAsync(this.getAccount(), _id)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        logger.info(\"cancelOfferAsync\", result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.buyAsync = function (_id, _amount) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        logger.info(\"buyAsync\", \"id\", _id, \"amount\", _amount)();\r\n                        return [4 /*yield*/, this.contract.buyAsync(this.getAccount(), _id, _amount)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        logger.info(\"buyAsync\", result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.bidAsync = function (_id, _amount) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var fee, result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"bidAsync\", \"id\", _id, \"amount\", _amount)();\r\n                        return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.getFeeAsync()];\r\n                    case 2:\r\n                        fee = _a.sent();\r\n                        return [4 /*yield*/, this.contract.enterBidAsync(this.getAccount(), _id, _amount, fee)];\r\n                    case 3:\r\n                        result = _a.sent();\r\n                        logger.info(result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.acceptBidAsync = function (_id, _amount) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"acceptBidAsync\", \"id\", _id, \"amount\", _amount)();\r\n                        return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.contract.acceptBidAsync(this.getAccount(), _id, _amount)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        logger.info(\"acceptBidAsync\", result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.cancelBidAsync = function (_id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"cancelBidAsync\", \"id\", _id)();\r\n                        return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.contract.cancelBidAsync(this.getAccount(), _id)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        logger.info(\"cancelBidAsync\", result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.handleVmLogAsync = function (accountBlockHash, accountBlockHeight, vmlog) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var marketEvent, punkEvent;\r\n            return __generator(this, function (_a) {\r\n                try {\r\n                    switch (vmlog.event) {\r\n                        case util_1.PunkTypes.VmLogEvent.MarketChanged:\r\n                            marketEvent = {\r\n                                timestamp: new util_1.PunkTypes.BigNumberWrapper(vmlog.args.timestamp),\r\n                                eventType: parseInt(vmlog.args.eventType),\r\n                                value: new util_1.PunkTypes.BigNumberWrapper(vmlog.args.value)\r\n                            };\r\n                            switch (marketEvent.eventType) {\r\n                                case util_1.PunkTypes.MarketEventType.ActionPrice:\r\n                                    this._actionPrice = marketEvent.value;\r\n                                    break;\r\n                                case util_1.PunkTypes.MarketEventType.MintPrice:\r\n                                    this._mintPrice = marketEvent.value;\r\n                                    break;\r\n                                default:\r\n                                    break;\r\n                            }\r\n                            this._emitter.emitMarketChanged(marketEvent);\r\n                            break;\r\n                        case util_1.PunkTypes.VmLogEvent.PunkChanged:\r\n                            punkEvent = {\r\n                                accountBlockHash: accountBlockHash,\r\n                                accountBlockHeight: new util_1.PunkTypes.BigNumberWrapper(accountBlockHeight),\r\n                                timestamp: new util_1.PunkTypes.BigNumberWrapper(vmlog.args.timestamp),\r\n                                eventType: parseInt(vmlog.args.eventType),\r\n                                punkId: parseInt(vmlog.args.punkId),\r\n                                amount: new util_1.PunkTypes.BigNumberWrapper(vmlog.args.amount),\r\n                                fromAddress: vmlog.args.fromAddress,\r\n                                toAddress: vmlog.args.toAddress\r\n                            };\r\n                            this._emitter.emitPunkChanged(punkEvent);\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    logger.error(error)();\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.toPunkEvents = function (events) {\r\n        if (!Array.isArray(events)) {\r\n            return [];\r\n        }\r\n        var result = [];\r\n        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\r\n            var e = events_1[_i];\r\n            var transformed = this.toPunkEvent(e);\r\n            if (transformed) {\r\n                result.push(transformed);\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    ViteBaseDataSource.prototype.toPunkEvent = function (event) {\r\n        if (!event) {\r\n            return null;\r\n        }\r\n        var abiItem = this.contract.getAbiItemByType(contracts_1.AbiItemType.punkChangedEvent);\r\n        var decoded = this._client.decodeVmLogByAbiItem(event.vmlog, abiItem);\r\n        if (!decoded) {\r\n            return null;\r\n        }\r\n        var transformed = {\r\n            accountBlockHash: event.accountBlockHash,\r\n            accountBlockHeight: event.accountBlockHeight,\r\n            timestamp: decoded.args.timestamp,\r\n            eventType: decoded.args.eventType,\r\n            punkId: decoded.args.punkId,\r\n            amount: decoded.args.amount,\r\n            fromAddress: decoded.args.fromAddress,\r\n            toAddress: decoded.args.toAddress\r\n        };\r\n        return util_1.TransformUtil.toPunkEvent(transformed);\r\n    };\r\n    ViteBaseDataSource.prototype.getFeeAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var actionPrice;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.getActionPriceAsync()];\r\n                    case 1:\r\n                        actionPrice = _a.sent();\r\n                        if (actionPrice.gt(0)) {\r\n                            return [2 /*return*/, actionPrice.toFixed()];\r\n                        }\r\n                        return [2 /*return*/, null];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getAccountBlockHeightAsync = function (_address, _height) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var height;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        height = new util_1.PunkTypes.BigNumberWrapper(\"0\");\r\n                        if (!(_height && !util_1.CommonUtil.isNullOrWhitespace(_height))) return [3 /*break*/, 1];\r\n                        height = new util_1.PunkTypes.BigNumberWrapper(_height);\r\n                        return [3 /*break*/, 3];\r\n                    case 1: return [4 /*yield*/, this._client.getAccountBlockHeightAsync(_address)];\r\n                    case 2:\r\n                        height = _a.sent();\r\n                        _a.label = 3;\r\n                    case 3: return [2 /*return*/, height];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getEventsFromHeight = function () {\r\n        if (common_1.CommonConfig.IS_PRODUCTION) {\r\n            // Hide events before official launch\r\n            // return new BigNumber(\"1150\");\r\n        }\r\n        return new util_1.PunkTypes.BigNumberWrapper(\"0\");\r\n    };\r\n    ViteBaseDataSource.prototype.checkQuotaAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var address, quota;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        address = this.contract.contract.address;\r\n                        return [4 /*yield*/, this.getQuotaAsync(address)];\r\n                    case 1:\r\n                        quota = _a.sent();\r\n                        this._emitter.emitQuotaChanged(address, quota);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.updatePunkInfosAsync = function (_refHeight) {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var events, _i, events_2, e, punkEvent, punk;\r\n            return __generator(this, function (_g) {\r\n                switch (_g.label) {\r\n                    case 0:\r\n                        if (!this._punkInfos || this._punkInfos.length !== common_1.CommonConstants.TOTAL_MINTS) {\r\n                            logger.info(\"Invalid market data provided\", (_a = this._punkInfos) === null || _a === void 0 ? void 0 : _a.length)();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        logger.info(\"Get market events with reference height\", _refHeight.toFixed())();\r\n                        return [4 /*yield*/, this.getNewMarketEventsAsync(_refHeight)];\r\n                    case 1:\r\n                        events = _g.sent();\r\n                        if (!Array.isArray(events)) {\r\n                            logger.info(\"Get market events result is not an array\")();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        logger.info(\"events.length\", events.length)();\r\n                        for (_i = 0, events_2 = events; _i < events_2.length; _i++) {\r\n                            e = events_2[_i];\r\n                            punkEvent = this.toPunkEvent(e);\r\n                            if (!punkEvent) {\r\n                                logger.info(\"Invalid punk event\", e)();\r\n                                continue;\r\n                            }\r\n                            punk = this._punkInfos[punkEvent.punkId - 1];\r\n                            switch (punkEvent.eventType) {\r\n                                case util_1.PunkTypes.PunkEventType.Mint:\r\n                                    punk.owner = punkEvent.toAddress;\r\n                                    break;\r\n                                case util_1.PunkTypes.PunkEventType.Offer:\r\n                                    punk.offer = {\r\n                                        __typename: util_1.PunkTypes.TypeNames.MarketOffer,\r\n                                        itemIndex: util_1.TransformUtil.toBigNumber(punkEvent.id),\r\n                                        seller: (_b = punkEvent.fromAddress) !== null && _b !== void 0 ? _b : \"\",\r\n                                        minAmount: (_c = punkEvent.amount) !== null && _c !== void 0 ? _c : util_1.TransformUtil.defaultBigNumber,\r\n                                        onlySellTo: punkEvent.toAddress,\r\n                                        timestamp: punkEvent.timestamp\r\n                                    };\r\n                                    break;\r\n                                case util_1.PunkTypes.PunkEventType.NewBid:\r\n                                    punk.bid = {\r\n                                        __typename: util_1.PunkTypes.TypeNames.MarketBid,\r\n                                        itemIndex: util_1.TransformUtil.toBigNumber(punkEvent.id),\r\n                                        bidder: (_d = punkEvent.fromAddress) !== null && _d !== void 0 ? _d : \"\",\r\n                                        amount: (_e = punkEvent.amount) !== null && _e !== void 0 ? _e : util_1.TransformUtil.defaultBigNumber,\r\n                                        timestamp: punkEvent.timestamp\r\n                                    };\r\n                                    break;\r\n                                case util_1.PunkTypes.PunkEventType.CancelBid:\r\n                                    punk.bid = null;\r\n                                    break;\r\n                                case util_1.PunkTypes.PunkEventType.CancelOffer:\r\n                                    punk.offer = null;\r\n                                    break;\r\n                                case util_1.PunkTypes.PunkEventType.Buy:\r\n                                    punk.owner = punkEvent.toAddress;\r\n                                    if (punk.bid && punk.bid.bidder.toLowerCase() === ((_f = punkEvent.toAddress) === null || _f === void 0 ? void 0 : _f.toLowerCase())) {\r\n                                        punk.bid = undefined;\r\n                                    }\r\n                                    break;\r\n                                default:\r\n                                    break;\r\n                            }\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return ViteBaseDataSource;\r\n}(_1.BaseDataSource));\r\nexports.ViteBaseDataSource = ViteBaseDataSource;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./common\"), exports);\r\n__exportStar(require(\"./util\"), exports);\r\n__exportStar(require(\"./wallet\"), exports);\r\n__exportStar(require(\"./search\"), exports);\r\n__exportStar(require(\"./contracts\"), exports);\r\n__exportStar(require(\"./clients\"), exports);\r\n__exportStar(require(\"./datasources\"), exports);\r\n","import { ICommonConfig, PunkTypes } from \"vitepunks-common\";\r\n\r\nexport class ClientConfig implements ICommonConfig {\r\n  private _useIpfs: boolean = false;\r\n  get USE_IPFS(): boolean {\r\n    return this._useIpfs;\r\n  }\r\n  set USE_IPFS(_flag: boolean) {\r\n    this._useIpfs = _flag;\r\n  }\r\n  get IS_PRODUCTION(): boolean {\r\n    if (!process.env.REACT_APP_IS_PRODUCTION) {\r\n      throw new Error(\"REACT_APP_IS_PRODUCTION is not defined\");\r\n    }\r\n    return process.env.REACT_APP_IS_PRODUCTION === \"true\";\r\n  }\r\n  get CONTRACT_ADDRESS(): string {\r\n    if (!process.env.REACT_APP_CONTRACT_ADDRESS) {\r\n      throw new Error(\"REACT_APP_CONTRACT_ADDRESS is not defined\");\r\n    }\r\n    return process.env.REACT_APP_CONTRACT_ADDRESS;\r\n  }\r\n  get PRE_MINT_HEIGHT(): Maybe<PunkTypes.BigNumberWrapper> {\r\n    if (!process.env.REACT_APP_PRE_MINT_HEIGHT) {\r\n      return null;\r\n    }\r\n    return new PunkTypes.BigNumberWrapper(process.env.REACT_APP_PRE_MINT_HEIGHT);\r\n  }\r\n  get EXPLORER_URL(): string {\r\n    if (!process.env.REACT_APP_EXPLORER_URL) {\r\n      throw new Error(\"REACT_APP_EXPLORER_URL is not defined\");\r\n    }\r\n    return process.env.REACT_APP_EXPLORER_URL;\r\n  }\r\n  get ENABLE_LOGGER(): boolean {\r\n    if (!process.env.REACT_APP_ENABLE_LOGGER) {\r\n      throw new Error(\"REACT_APP_ENABLE_LOGGER is not defined\");\r\n    }\r\n    return process.env.REACT_APP_ENABLE_LOGGER === \"true\";\r\n  }\r\n  get ENABLE_MNEMONIC_LOGIN(): boolean {\r\n    if (!process.env.REACT_APP_ENABLE_MNEMONIC_LOGIN) {\r\n      throw new Error(\"REACT_APP_ENABLE_MNEMONIC_LOGIN is not defined\");\r\n    }\r\n    return process.env.REACT_APP_ENABLE_MNEMONIC_LOGIN === \"true\";\r\n  }\r\n  get NETWORK_ID(): number {\r\n    if (!process.env.REACT_APP_NETWORK_ID) {\r\n      throw new Error(\"REACT_APP_NETWORK_ID is not defined\");\r\n    }\r\n    return parseInt(process.env.REACT_APP_NETWORK_ID);\r\n  }\r\n  get BASENAME(): Maybe<string> {\r\n    return process.env.REACT_APP_BASENAME;\r\n  }\r\n}\r\n\r\nconst config = new ClientConfig();\r\n\r\nexport const getClientConfig = () => {\r\n  return config;\r\n}","import { PunkTypes } from \"vitepunks-common\"\r\n\r\nexport const ClientConstants = {\r\n  APP_NAME: 'VitePunks',\r\n  USE_MOCK_DATASOURCE: false,\r\n  WEB_WALLET_STORAGE_SPACE: 'VITEPUNKS_WEB_WALLET',\r\n  SESSION_WALLET_STORAGE_SPACE: 'VITEPUNKS_SESSION_WALLET',\r\n  BG_URL: './assets/images/bg.png',\r\n  ITEM_BG_URL: './assets/images/item_bg.png',\r\n  SAMPLE_PUNK_URL: './assets/images/punk_8311.png',\r\n  LANDING_IMAGE_URL: './assets/images/landing.png',\r\n  QUOTA_WIKI_URL: 'https://github.com/vitepunks/resources/wiki',\r\n  DISCORD_URL: 'https://discord.gg/FsB2uZTn5u',\r\n  TWITTER_URL: 'https://twitter.com/VitePunks',\r\n  GITHUB_URL: 'https://github.com/vitepunks',\r\n  QUOTA_THRESHOLD: new PunkTypes.BigNumberWrapper(\"100000\"),\r\n}","import { getLogger, IWalletStore, SessionWallet, Wallet, WalletManager, WalletType, WebWallet } from 'vitepunks-common';\r\nimport { ClientConstants } from '../common/constants';\r\n\r\nconst logger = getLogger()\r\n\r\nexport class WalletStore implements IWalletStore {\r\n\r\n  private readonly _webWalletKey = ClientConstants.WEB_WALLET_STORAGE_SPACE;\r\n  private readonly _sessionWalletKey = ClientConstants.SESSION_WALLET_STORAGE_SPACE\r\n\r\n  clear(): void {\r\n    localStorage.removeItem(this._webWalletKey);\r\n    sessionStorage.removeItem(this._sessionWalletKey);\r\n  }\r\n\r\n  getItem(): Maybe<WebWallet | SessionWallet> {\r\n    let data;\r\n\r\n    try {\r\n      data = localStorage.getItem(this._webWalletKey);\r\n      if (!data) {\r\n        data = sessionStorage.getItem(this._sessionWalletKey);\r\n      }\r\n    } catch (err) {\r\n      logger.error(err)();\r\n      return undefined;\r\n    }\r\n\r\n    if (!data) {\r\n      return undefined;\r\n    }\r\n\r\n    try {\r\n      return Wallet.fromJS(JSON.parse(data));\r\n    } catch (err) {\r\n      logger.error(err)();\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  setItem(data: WebWallet | SessionWallet): void {\r\n    const saveData = JSON.stringify(data);\r\n\r\n    try {\r\n      switch (data.type) {\r\n        case WalletType.Web:\r\n          localStorage.setItem(this._webWalletKey, saveData);\r\n          break;\r\n        case WalletType.Session:\r\n          sessionStorage.setItem(this._sessionWalletKey, saveData);\r\n          break;\r\n        default:\r\n          throw new Error(`Wallet type '${data.type}' is not supported.`)\r\n      }\r\n    } catch (err) {\r\n      logger.error(err)();\r\n    }\r\n  }\r\n}\r\n\r\nconst manager = new WalletManager(new WalletStore());\r\n\r\nexport const getWalletManager = () => {\r\n  return manager;\r\n}","import { FileUtil } from \"vitepunks-common\";\r\n\r\nexport class BrowserFileUtil extends FileUtil {\r\n  async readFileAsync(path: string, encoding: BufferEncoding = 'utf8'): Promise<any> {\r\n    const response = await fetch(path);\r\n    switch (encoding) {\r\n      case 'binary':\r\n        return response.arrayBuffer();\r\n      default:\r\n        return response.text();\r\n    }\r\n  }\r\n  async writeFileAsync(path: string, data: any, encoding?: BufferEncoding): Promise<any> {\r\n\r\n  }\r\n}\r\n\r\nconst browserFileUtil = new BrowserFileUtil();\r\n\r\nexport const getBrowserFileUtil = () => {\r\n  return browserFileUtil;\r\n}","import { BaseDataSource, CommonConstants, CommonUtil, FileUtil, getLogger, PunkTypes, TransformUtil, WalletManager } from \"vitepunks-common\";\r\nimport { getWalletManager } from \"../storage/wallet.storage\";\r\nimport { getBrowserFileUtil } from \"../util/file.util\";\r\n\r\nconst logger = getLogger();\r\n\r\nexport class MockDataSource extends BaseDataSource {\r\n  private _events!: PunkTypes.PunkEvent[];\r\n\r\n  constructor() {\r\n    super();\r\n    this.clearMock();\r\n  }\r\n\r\n  private clearMock(): void {\r\n    this._events = [];\r\n  }\r\n\r\n  protected get fileUtil(): FileUtil {\r\n    return getBrowserFileUtil();\r\n  }\r\n  protected get walletManager(): WalletManager {\r\n    return getWalletManager();\r\n  }\r\n\r\n  protected async initPunkInfosAsync(): Promise<void> {\r\n    let infos = await this.fileUtil.readFileAsync(\"./assets/data/mock_infos.json\");\r\n    infos = JSON.parse(infos);\r\n\r\n    this._punkInfos = this.getDefaultPunkInfos();\r\n    if (infos) {\r\n      for (const p of infos.punks) {\r\n        const info = TransformUtil.toPunkInfo(p);\r\n        if (info) {\r\n          const index = parseInt(p.id) - 1;\r\n          this._punkInfos[index] = info;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async initAsync(network: PunkTypes.Network): Promise<void> {\r\n    logger.info('Init MockDataSource')();\r\n    this.clearMock();\r\n\r\n    let events = await this.fileUtil.readFileAsync(\"./assets/data/mock_events.json\");\r\n    events = JSON.parse(events);\r\n    for (let index = 0; index < events.length; index++) {\r\n      const e = events[index];\r\n      this._events.push(TransformUtil.toPunkEvent(e));\r\n    }\r\n    this._events = this._events.reverse();\r\n  }\r\n\r\n  protected disposeProtected(): void {\r\n    logger.info('Dispose MockDataSource')();\r\n    this.clearMock();\r\n  }\r\n\r\n  async getQuotaAsync(_address: string): Promise<PunkTypes.ViteQuotaResult> {\r\n    return {\r\n      currentQuota: new PunkTypes.BigNumberWrapper(\"1000\"),\r\n      maxQuota: new PunkTypes.BigNumberWrapper(\"2000\"),\r\n      stakeAmount: new PunkTypes.BigNumberWrapper(\"10000\")\r\n    };\r\n  }\r\n\r\n  async getPunkEventsAsync(_id: string, _limit: number, _offset: number, _height?: Maybe<string>): Promise<PunkTypes.PunkEvents> {\r\n    logger.info(\"id\", _id, \"limit\", _limit, \"offset\", _offset, \"height\", _height)();\r\n    await CommonUtil.timeout(2000);\r\n    if (!CommonUtil.isNumber(_id)) {\r\n      return {\r\n        blockHeight: TransformUtil.defaultBigNumber,\r\n        events: []\r\n      };\r\n    }\r\n    return {\r\n      blockHeight: TransformUtil.defaultBigNumber,\r\n      events: this._events.filter(e => e.punkId === parseInt(_id)).slice(_offset, _offset + _limit)\r\n    };\r\n  }\r\n\r\n  async getPunkOwnerAsync(_id: string): Promise<Maybe<string>> {\r\n    await CommonUtil.timeout(2000);\r\n    if (!CommonUtil.isNumber(_id)) {\r\n      return undefined;\r\n    }\r\n    const e = this._events.find(e => e.punkId.toString() === _id && e.eventType === PunkTypes.PunkEventType.Mint);\r\n    if (!e) {\r\n      return undefined;\r\n    }\r\n    return e.toAddress;\r\n  }\r\n\r\n  async getPunksByAddressAsync(_address: string, _limit: number, _offset: number): Promise<PunkTypes.Punk[]> {\r\n    logger.info(\"_address\", _address, \"limit\", _limit, \"offset\", _offset)();\r\n    const punks = [\r\n      await this.getPunkAsync(\"101\"),\r\n      await this.getPunkAsync(\"201\"),\r\n      await this.getPunkAsync(\"301\"),\r\n      await this.getPunkAsync(\"401\"),\r\n      await this.getPunkAsync(\"501\"),\r\n      await this.getPunkAsync(\"601\"),\r\n      await this.getPunkAsync(\"701\"),\r\n      await this.getPunkAsync(\"801\"),\r\n      await this.getPunkAsync(\"9999\")\r\n    ];\r\n    return punks.slice(_offset, _offset + _limit);\r\n  }\r\n\r\n  async getMarketBidAsync(_id: string): Promise<Maybe<PunkTypes.MarketBid>> {\r\n    await CommonUtil.timeout(1000);\r\n    if (!CommonUtil.isNumber(_id)) {\r\n      return undefined;\r\n    }\r\n    const e = this._events.find(e => e.punkId.toString() === _id && e.eventType === PunkTypes.PunkEventType.NewBid);\r\n    if (!e) {\r\n      return undefined;\r\n    }\r\n    return {\r\n      __typename: PunkTypes.TypeNames.MarketBid,\r\n      itemIndex: TransformUtil.toBigNumber(_id),\r\n      bidder: e.fromAddress ?? CommonConstants.ZERO_ADDRESS,\r\n      amount: e.amount ?? TransformUtil.defaultBigNumber,\r\n      timestamp: null\r\n    }\r\n  }\r\n\r\n  async getMarketOfferAsync(_id: string): Promise<Maybe<PunkTypes.MarketOffer>> {\r\n    await CommonUtil.timeout(1000);\r\n    if (!CommonUtil.isNumber(_id)) {\r\n      return undefined;\r\n    }\r\n    const e = this._events.find(e => e.punkId.toString() === _id && e.eventType === PunkTypes.PunkEventType.Offer);\r\n    if (!e) {\r\n      return undefined;\r\n    }\r\n    const seller = await this.getPunkOwnerAsync(_id);\r\n    return {\r\n      __typename: PunkTypes.TypeNames.MarketOffer,\r\n      itemIndex: TransformUtil.toBigNumber(_id),\r\n      seller: seller ?? CommonConstants.ZERO_ADDRESS,\r\n      minAmount: e.amount ?? TransformUtil.defaultBigNumber,\r\n      onlySellTo: e.toAddress,\r\n      timestamp: null\r\n    }\r\n  }\r\n\r\n  async getMarketEventsAsync(_limit: number, _offset: number, _height?: Maybe<string>): Promise<PunkTypes.PunkEvents> {\r\n    logger.info(\"limit\", _limit, \"offset\", _offset)();\r\n    await CommonUtil.timeout(500);\r\n    return {\r\n      blockHeight: new PunkTypes.BigNumberWrapper(\"0\"),\r\n      events: this._events.slice(_offset, _offset + _limit)\r\n    }\r\n  }\r\n\r\n  async getMarketInfoAsync(): Promise<PunkTypes.MarketInfo> {\r\n    logger.info(\"getMarketInfoAsync\")();\r\n    return {\r\n      marketStarted: true,\r\n      mintsRemaining: CommonConstants.TOTAL_MINTS - this._events.filter(e => e.eventType === PunkTypes.PunkEventType.Mint).length,\r\n      mintPrice: new PunkTypes.BigNumberWrapper(\"12\").shiftedBy(18),\r\n      actionPrice: new PunkTypes.BigNumberWrapper(\"3.1\").shiftedBy(18),\r\n    };\r\n  }\r\n\r\n  async mintAsync(): Promise<boolean> {\r\n    throw new Error(\"Method 'mintAsync' not implemented.\");\r\n  }\r\n\r\n  async offerAsync(_id: string, _tokenId: string, _amount: string, _address?: string | null): Promise<boolean> {\r\n    logger.info(\"offerAsync\", \"id\", _id, \"tokenId\", _tokenId, \"amount\", _amount, \"address\", _address)();\r\n    await CommonUtil.timeout(2000);\r\n    return true;\r\n  }\r\n\r\n  async cancelOfferAsync(_id: string): Promise<boolean> {\r\n    logger.info(\"cancelOfferAsync\", \"id\", _id)();\r\n    await CommonUtil.timeout(2000);\r\n    return true;\r\n  }\r\n\r\n  async buyAsync(_id: string, _amount: string): Promise<boolean> {\r\n    logger.info(\"buyAsync\", \"id\", _id, \"amount\", _amount)();\r\n    await CommonUtil.timeout(2000);\r\n    return true;\r\n  }\r\n\r\n  async bidAsync(_id: string, _amount: string): Promise<boolean> {\r\n    logger.info(\"bidAsync\", \"id\", _id, \"amount\", _amount)();\r\n    await CommonUtil.timeout(2000);\r\n    return true;\r\n  }\r\n\r\n  async acceptBidAsync(_id: string, _amount: string): Promise<boolean> {\r\n    logger.info(\"acceptBidAsync\", \"id\", _id, \"amount\", _amount)();\r\n    await CommonUtil.timeout(2000);\r\n    return true;\r\n  }\r\n\r\n  async cancelBidAsync(_id: string): Promise<boolean> {\r\n    logger.info(\"cancelBidAsync\", \"id\", _id)();\r\n    await CommonUtil.timeout(2000);\r\n    return true;\r\n  }\r\n}\r\n\r\nconst ds = new MockDataSource();\r\n\r\nexport const getMockDataSource = () => {\r\n  return ds;\r\n}","import { CommonConfig, CommonUtil, CompressUtil, FileUtil, PunksBaseContract } from \"vitepunks-common\";\r\nimport { getBrowserFileUtil } from \"../util/file.util\";\r\n\r\nexport class PunksContract extends PunksBaseContract {\r\n  private readonly _fileUtil: FileUtil;\r\n\r\n  constructor() {\r\n    super();\r\n    this._fileUtil = getBrowserFileUtil();\r\n  }\r\n\r\n  protected async initContractAsyncProtected(basePath: string): Promise<void> {\r\n    const punksContract = await this._fileUtil.readFileAsync(CommonUtil.appendPath(basePath, \"Punks.gz?v=\" + process.env.REACT_APP_VERSION), \"binary\");\r\n    this._contract = JSON.parse(CompressUtil.decompress(CommonUtil.toUint8Array(punksContract, \"binary\")));\r\n    this._contract.address = CommonConfig.CONTRACT_ADDRESS;\r\n  }\r\n}\r\n\r\nconst contract = new PunksContract();\r\n\r\nexport const getPunksContract = () => {\r\n  return contract;\r\n}","import { FileUtil, PunksBaseContract, ViteBaseDataSource, WalletManager } from \"vitepunks-common\";\r\nimport { getPunksContract } from \"../contracts/punks.contract\";\r\nimport { getWalletManager } from \"../storage/wallet.storage\";\r\nimport { getBrowserFileUtil } from \"../util/file.util\";\r\n\r\nexport class ViteDataSource extends ViteBaseDataSource {\r\n  protected get contract(): PunksBaseContract {\r\n    return getPunksContract();\r\n  }\r\n  protected get fileUtil(): FileUtil {\r\n    return getBrowserFileUtil();\r\n  }\r\n  protected get walletManager(): WalletManager {\r\n    return getWalletManager();\r\n  }\r\n}\r\n\r\nconst ds = new ViteDataSource();\r\n\r\nexport const getViteDataSource = () => {\r\n  return ds;\r\n}","import { getLogger, IDataSource, Networks, PunkTypes, UrlUtil } from \"vitepunks-common\";\r\nimport { getClientConfig } from \"../common/config\";\r\nimport { ClientConstants } from \"../common/constants\";\r\nimport { getMockDataSource } from \"../datasources/mock.datasource\";\r\nimport { getViteDataSource } from \"../datasources/vite.datasource\";\r\n\r\nconst logger = getLogger();\r\n\r\nexport class CommonContext {\r\n  private _isInitialized: boolean = false;\r\n  private _network!: PunkTypes.Network;\r\n  private _datasource!: IDataSource;\r\n\r\n  async initAsync(): Promise<void> {\r\n    this._isInitialized = false;\r\n    if (ClientConstants.USE_MOCK_DATASOURCE) {\r\n      this._datasource = getMockDataSource();\r\n    } else {\r\n      this._datasource = getViteDataSource();\r\n    }\r\n    const clientConfig = getClientConfig();\r\n    const networkId = clientConfig.NETWORK_ID;\r\n    this._network = Networks.find(e => e.id === networkId) ?? Networks[0];\r\n    await this._datasource.initBaseAsync(this._network, PunkTypes.ProviderType.WEBSOCKET);\r\n    await this.checkIpfsAsync();\r\n    logger.info(\"Using IPFS\", clientConfig.USE_IPFS)();\r\n    this._isInitialized = true;\r\n  }\r\n\r\n  private async checkIpfsAsync(): Promise<void> {\r\n    return new Promise(async (resolve) => {\r\n      const punk = await this._datasource.getPunkAsync(\"1\");\r\n      var img = new Image();\r\n      img.onload = () => {\r\n        getClientConfig().USE_IPFS = false;\r\n        resolve();\r\n      };\r\n      img.onerror = () => {\r\n        getClientConfig().USE_IPFS = true;\r\n        resolve();\r\n      };\r\n      img.src = UrlUtil.getPunkUrl(punk.image);\r\n    });\r\n  }\r\n\r\n  dispose(): void {\r\n    logger.info(\"Disposing CommonContext\")();\r\n    this._datasource?.dispose();\r\n  }\r\n\r\n  get isInitialized(): boolean {\r\n    return this._isInitialized;\r\n  }\r\n\r\n  get network(): PunkTypes.Network {\r\n    return this._network;\r\n  }\r\n\r\n  get datasource(): IDataSource {\r\n    return this._datasource;\r\n  }\r\n}\r\n\r\nconst context = new CommonContext();\r\n\r\nexport const getCommonContext = () => {\r\n  return context;\r\n}\r\n","import { gql } from \"@apollo/client\";\r\nimport { ApolloContext } from \"../clients/apollo.client\";\r\n\r\nexport const OFFER_MUTATION = gql`\r\n  mutation Offer($id: ID!, $amount: String!, $address: String) {\r\n    offer(id: $id, amount: $amount, address: $address) @client\r\n  }\r\n`;\r\n\r\nexport const CANCEL_OFFER_MUTATION = gql`\r\n  mutation CancelOffer($id: ID!) {\r\n    cancelOffer(id: $id) @client\r\n  }\r\n`;\r\n\r\nexport const BUY_MUTATION = gql`\r\n  mutation Buy($id: ID!, $amount: String!) {\r\n    buy(id: $id, amount: $amount) @client\r\n  }\r\n`;\r\n\r\nexport const BID_MUTATION = gql`\r\n  mutation Bid($id: ID!, $amount: String!) {\r\n    bid(id: $id, amount: $amount) @client\r\n  }\r\n`;\r\n\r\nexport const ACCEPT_BID_MUTATION = gql`\r\n  mutation AcceptBid($id: ID!, $amount: String!) {\r\n    acceptBid(id: $id, amount: $amount) @client\r\n  }\r\n`;\r\n\r\nexport const CANCEL_BID_MUTATION = gql`\r\n  mutation CancelBid($id: ID!) {\r\n    cancelBid(id: $id) @client\r\n  }\r\n`;\r\n\r\nexport const MarketMutations = {\r\n  async offer(parent: any, { id, amount, address }: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.offerAsync(id, amount, address);\r\n  },\r\n  async cancelOffer(parent: any, { id }: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.cancelOfferAsync(id);\r\n  },\r\n  async buy(parent: any, { id, amount }: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.buyAsync(id, amount);\r\n  },\r\n  async bid(parent: any, { id, amount }: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.bidAsync(id, amount);\r\n  },\r\n  async acceptBid(parent: any, { id, amount }: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.acceptBidAsync(id, amount);\r\n  },\r\n  async cancelBid(parent: any, { id }: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.cancelBidAsync(id);\r\n  },\r\n}","import { gql } from \"@apollo/client\";\r\nimport { ApolloContext } from \"../clients/apollo.client\";\r\n\r\nexport const MINT_MUTATION = gql`\r\n  mutation Mint {\r\n    mint @client\r\n  }\r\n`;\r\n\r\nexport const PunkMutations = {\r\n  async mint(parent: any, params: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.mintAsync();\r\n  },\r\n}","import { gql } from \"@apollo/client\";\r\nimport { PunkTypes } from \"vitepunks-common\";\r\nimport { ApolloContext } from \"../clients/apollo.client\";\r\n\r\nexport const PUNK_FIELDS = gql`\r\n  fragment PunkFields on Punk {\r\n    id\r\n    rank\r\n    image\r\n    cid\r\n    attributes\r\n    owner\r\n    bid {\r\n      itemIndex\r\n      bidder\r\n      amount\r\n    }\r\n    offer {\r\n      itemIndex\r\n      seller\r\n      minAmount\r\n      onlySellTo\r\n    }\r\n  }\r\n`;\r\n\r\nexport const PUNK_EVENT_FIELDS = gql`\r\n  fragment PunkEventFields on PunkEvent {\r\n    id\r\n    accountBlockHash\r\n    accountBlockHeight\r\n    timestamp\r\n    eventType\r\n    punkId\r\n    amount\r\n    fromAddress\r\n    toAddress\r\n  }\r\n`;\r\n\r\nexport const GET_PUNK_ATTRIBUTES_QUERY = gql`\r\n  query GetPunkAttributes {\r\n    punkAttributes @client\r\n  }\r\n`;\r\n\r\nexport const GET_PUNK_EVENTS_QUERY = gql`\r\n  ${PUNK_EVENT_FIELDS}\r\n  query GetPunkEvents($id: String!, $limit: Int!, $offset: Int!, $height: String) {\r\n    punkEvents(id: $id, limit: $limit, offset: $offset, height: $height) @client {\r\n      blockHeight\r\n      events {\r\n        ...PunkEventFields\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_PUNK_OWNER_QUERY = gql`\r\n  query GetPunkOwner($id: String!) {\r\n    punkOwner(id: $id) @client\r\n  }\r\n`;\r\n\r\nexport const GET_PUNK_QUERY = gql`\r\n  ${PUNK_FIELDS}\r\n  query GetPunk($id: ID!) {\r\n    punk(id: $id) @client {\r\n      ...PunkFields\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_PUNKS_QUERY = gql`\r\n  ${PUNK_FIELDS}\r\n  query GetPunks($limit: Int!, $offset: Int!, $sort: PunkSortBy!, $order: OrderBy!, $search: String) {\r\n    punks(limit: $limit, offset: $offset, sort: $sort, order: $order, search: $search) @client {\r\n      ...PunkFields\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_PUNKS_ALL_QUERY = gql`\r\n  ${PUNK_FIELDS}\r\n  query GetPunksAll {\r\n    punksAll @client {\r\n      ...PunkFields\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_PUNKS_BY_ADDRESS_QUERY = gql`\r\n  ${PUNK_FIELDS}\r\n  query GetPunksByAddress($address: String!, $limit: Int!, $offset: Int!) {\r\n    punksByAddress(address: $address, limit: $limit, offset: $offset) @client {\r\n      ...PunkFields\r\n    }\r\n  }\r\n`;\r\n\r\nexport const PunkQueries = {\r\n  async punkAttributes(parent: any, params: any, context: ApolloContext): Promise<string[]> {\r\n    const result = await context.client.datasource.getPunkAttributesAsync();\r\n    return result;\r\n  },\r\n  async punkEvents(parent: any, { id, limit, offset, height }: any, context: ApolloContext): Promise<PunkTypes.PunkEvents> {\r\n    const result = await context.client.datasource.getPunkEventsAsync(id, limit, offset, height);\r\n    return result;\r\n  },\r\n  async punkOwner(parent: any, { id }: any, context: ApolloContext): Promise<Maybe<string>> {\r\n    const result = await context.client.datasource.getPunkOwnerAsync(id);\r\n    return result;\r\n  },\r\n  async punk(parent: any, { id }: any, context: ApolloContext): Promise<PunkTypes.Punk> {\r\n    const result = await context.client.datasource.getPunkAsync(id);\r\n    return result;\r\n  },\r\n  async punks(parent: any, { limit, offset, sort, order, search }: any, context: ApolloContext): Promise<PunkTypes.Punk[]> {\r\n    const result = await context.client.datasource.getPunksAsync(limit, offset, sort, order, search);\r\n    return result;\r\n  },\r\n  async punksAll(parent: any, params: any, context: ApolloContext): Promise<PunkTypes.Punk[]> {\r\n    const result = await context.client.datasource.getPunksAllAsync();\r\n    return result;\r\n  },\r\n  async punksByAddress(parent: any, { address, limit, offset }: any, context: ApolloContext): Promise<PunkTypes.Punk[]> {\r\n    const result = await context.client.datasource.getPunksByAddressAsync(address, limit, offset);\r\n    return result;\r\n  },\r\n}","import { gql } from \"@apollo/client\";\r\nimport { PunkTypes } from \"vitepunks-common\";\r\nimport { ApolloContext } from \"../clients/apollo.client\";\r\nimport { PUNK_EVENT_FIELDS } from \"./punk\";\r\n\r\nexport const MARKET_BID_FIELDS = gql`\r\n  fragment MarketBidFields on MarketBid {\r\n    itemIndex\r\n    bidder\r\n    amount\r\n    timestamp\r\n  }\r\n`;\r\n\r\nexport const MARKET_OFFER_FIELDS = gql`\r\n  fragment MarketOfferFields on MarketOffer {\r\n    itemIndex\r\n    seller\r\n    minAmount\r\n    onlySellTo\r\n    timestamp\r\n  }\r\n`;\r\n\r\nexport const GET_MARKET_INFO_QUERY = gql`\r\n  query GetMarketInfo {\r\n    marketInfo @client {\r\n      marketStarted\r\n      mintsRemaining\r\n      mintPrice\r\n      actionPrice\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_MARKET_BID_QUERY = gql`\r\n  ${MARKET_BID_FIELDS}\r\n  query GetMarketBid($id: String!) {\r\n    marketBid(id: $id) @client {\r\n      ...MarketBidFields\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_MARKET_OFFER_QUERY = gql`\r\n  ${MARKET_OFFER_FIELDS}\r\n  query GetMarketOffer($id: String!) {\r\n    marketOffer(id: $id) @client {\r\n      ...MarketOfferFields\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_MARKET_EVENTS_QUERY = gql`\r\n  ${PUNK_EVENT_FIELDS}\r\n  query GetMarketEvents($limit: Int!, $offset: Int!, $height: String) {\r\n    marketEvents(limit: $limit, offset: $offset, height: $height) @client {\r\n      blockHeight\r\n      events {\r\n        ...PunkEventFields\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const MarketQueries = {\r\n  async marketInfo(parent: any, params: any, context: ApolloContext): Promise<PunkTypes.MarketInfo> {\r\n    const result = await context.client.datasource.getMarketInfoAsync();\r\n    return result;\r\n  },\r\n  async marketBid(parent: any, { id }: any, context: ApolloContext): Promise<Maybe<PunkTypes.MarketBid>> {\r\n    const result = await context.client.datasource.getMarketBidAsync(id);\r\n    return result;\r\n  },\r\n  async marketOffer(parent: any, { id }: any, context: ApolloContext): Promise<Maybe<PunkTypes.MarketOffer>> {\r\n    const result = await context.client.datasource.getMarketOfferAsync(id);\r\n    return result;\r\n  },\r\n  async marketEvents(parent: any, { limit, offset, height }: any, context: ApolloContext): Promise<PunkTypes.PunkEvents> {\r\n    const result = await context.client.datasource.getMarketEventsAsync(limit, offset, height);\r\n    return result;\r\n  }\r\n}","import { gql } from \"@apollo/client\";\r\nimport { PunkTypes } from \"vitepunks-common\";\r\nimport { ApolloContext } from \"../clients/apollo.client\";\r\n\r\nexport const GET_QUOTA_QUERY = gql`\r\n  query GetQuota($address: String!) {\r\n    quota(address: $address) @client {\r\n      currentQuota\r\n      maxQuota\r\n      stakeAmount\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_ACCOUNT_AUCTIONS_QUERY = gql`\r\n  query GetAccountAuctions($address: String!, $limit: Int!, $cursor: String) {\r\n    accountAuctions(address: $address, limit: $limit, cursor: $cursor) @client {\r\n      cursor {\r\n        prev\r\n        next\r\n      }\r\n      auctions {\r\n        timestamp\r\n        auctionType\r\n        punkId\r\n        owner\r\n        amount\r\n        address\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GeneralQueries = {\r\n  async quota(parent: any, { address }: any, context: ApolloContext): Promise<Maybe<PunkTypes.ViteQuotaResult>> {\r\n    const result = await context.client.datasource.getQuotaAsync(address);\r\n    return result;\r\n  },\r\n  async accountAuctions(parent: any, { address, limit, cursor }: any, context: ApolloContext): Promise<PunkTypes.AccountAuctions> {\r\n    const result = await context.client.datasource.getAccountAuctionsAsync(address, limit, cursor);\r\n    return result;\r\n  },\r\n}","import { ApolloClient, InMemoryCache, NormalizedCacheObject } from '@apollo/client';\r\nimport { offsetLimitPagination } from '@apollo/client/utilities';\r\nimport { GraphQLScalarType } from 'graphql';\r\nimport { IDataSource, PunkTypes } from 'vitepunks-common';\r\nimport { getCommonContext } from '../contexts/common.context';\r\nimport { MarketMutations, PunkMutations } from '../mutations';\r\nimport { MarketQueries, PunkQueries } from '../queries';\r\nimport { GeneralQueries } from '../queries/general';\r\n\r\nexport type ApolloContext = {\r\n  cache: InMemoryCache,\r\n  client: ApolloClientWrapper,\r\n  clientAwareness: any,\r\n  getCacheKey: (obj: any) => string | undefined\r\n}\r\n\r\nexport class ApolloClientWrapper extends ApolloClient<NormalizedCacheObject> {\r\n  get datasource(): IDataSource {\r\n    return getCommonContext().datasource;\r\n  }\r\n}\r\n\r\nconst cache: InMemoryCache = new InMemoryCache({\r\n  typePolicies: {\r\n    Query: {\r\n      fields: {\r\n        // https://www.apollographql.com/docs/react/pagination/offset-based/\r\n        punks: offsetLimitPagination([\"order\", \"sort\"]),\r\n        punksByAddress: offsetLimitPagination([\"address\"]),\r\n        //marketEvents: offsetLimitPagination()\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nconst bigNumberScalar = new GraphQLScalarType({\r\n  name: 'BigNumber',\r\n  description: 'BigNumber custom scalar type',\r\n  serialize(value: PunkTypes.BigNumberWrapper) {\r\n    return value.toFixed();\r\n  },\r\n  parseValue(value: string) {\r\n    return new PunkTypes.BigNumberWrapper(value);\r\n  }\r\n});\r\n\r\nconst resolvers: any = {\r\n  BigNumber: bigNumberScalar,\r\n  Query: {\r\n    ...GeneralQueries,\r\n    ...PunkQueries,\r\n    ...MarketQueries\r\n  },\r\n  Mutation: {\r\n    ...PunkMutations,\r\n    ...MarketMutations\r\n  }\r\n};\r\n\r\n// https://www.apollographql.com/docs/react/networking/authentication/#header\r\nconst client = new ApolloClientWrapper({\r\n  // link: authLink.concat(httpLink),\r\n  cache: cache,\r\n  resolvers,\r\n  headers: {\r\n    'client-name': process.env.REACT_APP_NAME || 'client',\r\n    'client-version': process.env.REACT_APP_VERSION || '0',\r\n  },\r\n})\r\n\r\nexport const getApolloClient = () => {\r\n  return client;\r\n}","import { PunkTypes } from \"vitepunks-common\";\r\n\r\nexport class NetworkManager {\r\n  private _networkHeight: PunkTypes.BigNumberWrapper;\r\n  private _network?: Maybe<PunkTypes.Network>;\r\n  private _setNetworkCallback?: (network?: Maybe<PunkTypes.Network>) => void;\r\n\r\n  constructor() {\r\n    this._networkHeight = new PunkTypes.BigNumberWrapper(\"0\");\r\n  }\r\n\r\n  set networkHeight(height: PunkTypes.BigNumberWrapper) {\r\n    this._networkHeight = height;\r\n  }\r\n\r\n  get networkHeight(): PunkTypes.BigNumberWrapper {\r\n    return this._networkHeight;\r\n  }\r\n\r\n  set onSetNetworkCallback(cb: (network?: Maybe<PunkTypes.Network>) => void) {\r\n    this._setNetworkCallback = cb;\r\n  }\r\n\r\n  getNetwork(): Maybe<PunkTypes.Network> {\r\n    return this._network;\r\n  }\r\n\r\n  setNetwork(network?: Maybe<PunkTypes.Network>): void {\r\n    this._network = network;\r\n    if (this._setNetworkCallback) {\r\n      this._setNetworkCallback(this._network);\r\n    }\r\n  }\r\n}\r\n\r\nconst manager = new NetworkManager();\r\n\r\nexport const getNetworkManager = () => {\r\n  return manager;\r\n}","import { styled, Typography } from '@mui/material';\r\n\r\nconst Root = styled('div')(\r\n  ({ theme }) => `\r\n  padding-bottom: 10px;\r\n  padding-top: 10px;\r\n  padding-left: 24px;\r\n  padding-right: 24px;\r\n  text-align: right;\r\n`,\r\n);\r\n\r\nexport const Footer = () => {\r\n  return (\r\n    <>\r\n      <Root>\r\n        <Typography>v{process.env.REACT_APP_VERSION}</Typography>\r\n      </Root>\r\n    </>\r\n  )\r\n}\r\n","import { AppBar, styled, Toolbar, Typography } from '@mui/material';\r\nimport React from 'react';\r\nimport { ClientConstants } from '../../../../common/constants';\r\n\r\nconst Root = styled('div')(\r\n  ({ theme }) => `\r\n  flex-grow: 1;\r\n`,\r\n);\r\n\r\nconst TitleTypography = styled(Typography)(\r\n  ({ theme }) => `\r\n  flex-grow: 1;\r\n  margin-left: 10px !important;\r\n`,\r\n);\r\n\r\nexport const HeaderLoading: React.FC = (props: any) => {\r\n  return (\r\n    <Root>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <TitleTypography variant=\"h6\">\r\n            {ClientConstants.APP_NAME}\r\n          </TitleTypography>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </Root>\r\n  )\r\n}","import { Container, styled } from '@mui/material';\r\nimport * as React from 'react';\r\n\r\nconst MainScrollStyled = styled('div')(\r\n  ({ theme }) => `\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  align-items: center;\r\n  padding-bottom: 15px;\r\n  padding-top: 30px;\r\n  overflow: auto;\r\n  overflow-x: hidden;\r\n`,\r\n);\r\n\r\nconst MainScrollInner = styled('div')(\r\n  ({ theme }) => `\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`,\r\n);\r\n\r\nexport const MainScroll: React.FC = props => {\r\n  const { children, ...restProps } = props\r\n\r\n  return (\r\n    <MainScrollStyled id=\"mainscroll\" {...restProps}>\r\n      <Container maxWidth=\"xl\">\r\n        <MainScrollInner>{children}</MainScrollInner>\r\n      </Container>\r\n    </MainScrollStyled>\r\n  )\r\n}\r\n","import { styled } from '@mui/material';\r\nimport React from 'react';\r\n\r\nconst MainWrapperStyled = styled('div')(\r\n  ({ theme }) => `\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n`,\r\n);\r\n\r\nexport const MainWrapper: React.FC = props => {\r\n  const { children, ...restProps } = props\r\n\r\n  return <MainWrapperStyled {...restProps}>{children}</MainWrapperStyled>\r\n}\r\n","\r\nimport { Chip, Typography } from '@mui/material';\r\nimport { useEffect, useState } from 'react';\r\nimport { Footer } from '../../../layout/components/footer';\r\nimport { HeaderLoading } from '../../../layout/components/header-loading';\r\nimport { MainScroll } from '../../../layout/components/main-scroll';\r\nimport { MainWrapper } from '../../../layout/components/main-wrapper';\r\n\r\ninterface Props {\r\n  retryCount: number\r\n}\r\n\r\nexport const MainLoading: React.FC<Props> = (props: Props) => {\r\n  const [retryCount, setRetryCount] = useState<number>(0)\r\n\r\n  useEffect(() => {\r\n    setRetryCount(props.retryCount)\r\n  }, [props.retryCount])\r\n\r\n  return (\r\n    <MainWrapper>\r\n      <HeaderLoading />\r\n      <MainScroll>\r\n        <Typography>Loading...</Typography>\r\n        {retryCount > 0 && (\r\n          <Chip size=\"small\" label={retryCount} variant=\"outlined\" />\r\n        )}\r\n      </MainScroll>\r\n      <Footer />\r\n    </MainWrapper>\r\n  )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { PunkTypes, SessionWallet, WebWallet } from 'vitepunks-common';\r\nimport { getNetworkManager } from '../common/network';\r\nimport { getWalletManager } from '../storage/wallet.storage';\r\n\r\nexport interface IWeb3Context {\r\n  setError: (error: Error) => void,\r\n  error?: Maybe<Error>,\r\n  wallet?: Maybe<WebWallet | SessionWallet>\r\n  network?: Maybe<PunkTypes.Network>\r\n}\r\n\r\nconst Web3Context = React.createContext<Maybe<IWeb3Context>>(undefined)\r\n\r\nexport const useWeb3Context = () => {\r\n  const context = React.useContext(Web3Context)\r\n\r\n  if (!context) {\r\n    throw new Error('Component rendered outside the provider tree')\r\n  }\r\n\r\n  return context\r\n}\r\n\r\ninterface Props {\r\n  children?: React.ReactNode\r\n}\r\n\r\nexport const Web3Provider: React.FC<Props> = (props: Props) => {\r\n  const [error, setError] = useState<Maybe<Error>>(null)\r\n  const [wallet, setWallet] = useState<Maybe<WebWallet | SessionWallet>>(null)\r\n  const [network, setNetwork] = useState<Maybe<PunkTypes.Network>>(null)\r\n\r\n  const walletManager = getWalletManager()\r\n  walletManager.onSetWalletCallback = setWallet\r\n\r\n  const networkManager = getNetworkManager()\r\n  networkManager.onSetNetworkCallback = setNetwork\r\n\r\n  const context: IWeb3Context = {\r\n    setError,\r\n    error,\r\n    wallet,\r\n    network\r\n  }\r\n\r\n  return (\r\n    <Web3Context.Provider value={context}>{props.children}</Web3Context.Provider>\r\n  )\r\n}\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { CommonUtil, getLogger, Networks, PunkTypes } from \"vitepunks-common\";\r\nimport { getClientConfig } from '../common/config';\r\nimport { getNetworkManager } from '../common/network';\r\nimport { MainLoading } from '../features/main/components/loading';\r\nimport { getWalletManager } from '../storage/wallet.storage';\r\nimport { getCommonContext } from './common.context';\r\nimport { useWeb3Context } from './web3';\r\n\r\nconst logger = getLogger()\r\n\r\nexport interface IConnectedWeb3Context {\r\n  account?: string\r\n  network?: Maybe<PunkTypes.Network>\r\n  logout: () => void\r\n}\r\n\r\nconst ConnectedWeb3Context = React.createContext<Maybe<IConnectedWeb3Context>>(undefined)\r\n\r\n/**\r\n * This hook can only be used by components under the `ConnectedWeb3` component. Otherwise it will throw.\r\n */\r\nexport const useConnectedWeb3Context = () => {\r\n  const context = React.useContext(ConnectedWeb3Context)\r\n\r\n  if (!context) {\r\n    throw new Error('Component rendered outside the provider tree')\r\n  }\r\n\r\n  return context\r\n}\r\n\r\ninterface Props {\r\n  children?: React.ReactNode\r\n}\r\n\r\n/**\r\n * Component used to render components that depend on Web3 being available. These components can then\r\n * `useConnectedWeb3Context` safely to get web3 stuff without having to null check it.\r\n */\r\nexport const ConnectedWeb3: React.FC<Props> = (props: Props) => {\r\n  const [connection, setConnection] = useState<IConnectedWeb3Context | null>(null)\r\n  const [retryCount, setRetryCount] = useState<number>(0)\r\n  const mounted = React.useRef(false);\r\n  const web3Context = useWeb3Context()\r\n  const commonContext = getCommonContext()\r\n\r\n  const { wallet, network } = web3Context\r\n\r\n  React.useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (!wallet) {\r\n      const walletManager = getWalletManager()\r\n      walletManager.initWallet()\r\n    }\r\n  }, [wallet])\r\n\r\n  useEffect(() => {\r\n    if (!network) {\r\n      const networkManager = getNetworkManager()\r\n      const networkId = getClientConfig().NETWORK_ID;\r\n      networkManager.setNetwork(Networks.find(e => e.id === networkId))\r\n      logger.info(\"Network:\", networkManager.getNetwork())()\r\n    }\r\n  }, [network])\r\n\r\n  const logout = useCallback(() => {\r\n    const walletManager = getWalletManager()\r\n    walletManager.removeWallet()\r\n    window.location.reload()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const value = {\r\n      account: wallet?.active?.address,\r\n      network,\r\n      logout\r\n    }\r\n\r\n    logger.info('ConnectedWeb3.account', wallet?.active?.address)()\r\n\r\n    const initAsync = async (_retryCount: number = 0) => {\r\n      if (network) {\r\n        logger.info('Init ConnectedWeb3', _retryCount)()\r\n        if (_retryCount >= 5) {\r\n          window.location.reload()\r\n        }\r\n        const startTimestamp = Date.now()\r\n        const retryId = setTimeout(async () => {\r\n          if (mounted.current && !commonContext.isInitialized) {\r\n            commonContext.dispose()\r\n            _retryCount++\r\n            setRetryCount(_retryCount)\r\n            await CommonUtil.timeout(1000)\r\n            initAsync(_retryCount)\r\n          }\r\n        }, 3000)\r\n        try {\r\n          setConnection(null)\r\n          await commonContext.initAsync()\r\n          setRetryCount(0)\r\n          setConnection(value)\r\n        } catch (error) {\r\n          logger.error(error)()\r\n          clearTimeout(retryId)\r\n          const minDelay = 3000\r\n          const elapsed = Date.now() - startTimestamp\r\n          setTimeout(() => {\r\n            if (mounted.current && !commonContext.isInitialized) {\r\n              _retryCount++\r\n              setRetryCount(_retryCount)\r\n              initAsync(_retryCount)\r\n            }\r\n          }, elapsed > minDelay ? 0 : minDelay - elapsed);\r\n        }\r\n      }\r\n    }\r\n    initAsync()\r\n    return () => {\r\n      commonContext.dispose()\r\n    }\r\n  }, [wallet, network, logout, commonContext])\r\n\r\n  return (\r\n    <>\r\n      {!connection ? (\r\n        <MainLoading retryCount={retryCount}></MainLoading>\r\n      ) : (\r\n        <ConnectedWeb3Context.Provider value={connection}>{props.children}</ConnectedWeb3Context.Provider>\r\n      )}\r\n    </>\r\n  )\r\n}","import { ProviderContext } from \"notistack\";\r\nimport { FormatUtil, getEmitter } from 'vitepunks-common';\r\n\r\nexport abstract class SnackbarUtil {\r\n  static snackbar: ProviderContext;\r\n  static enqueueError(error: any): void {\r\n    const message = FormatUtil.formatMessage(error);\r\n    if (message === \"Session currently disconnected\") {\r\n      const emitter = getEmitter();\r\n      emitter.emitConnectWalletDialog(true);\r\n    }\r\n    SnackbarUtil.snackbar.enqueueSnackbar(message);\r\n  }\r\n  static enqueueMessage(message: string): void {\r\n    SnackbarUtil.snackbar.enqueueSnackbar(message);\r\n  }\r\n}","import { PunkTypes } from \"vitepunks-common\";\r\n\r\nexport abstract class WebUtil {\r\n  public static getDocumentState = () => {\r\n    if (document.visibilityState === 'hidden') {\r\n      return PunkTypes.DocumentState.Hidden;\r\n    }\r\n    return PunkTypes.DocumentState.Active;\r\n  }\r\n}","import { Box, Paper, Typography } from '@mui/material';\r\nimport React from 'react';\r\nimport { CommonUtil } from \"vitepunks-common\";\r\n\r\ninterface Props {\r\n  message: string\r\n  type: 'default' | 'warning'\r\n  error?: any\r\n  color?: string\r\n  backgroundColor?: string\r\n}\r\n\r\nexport const Alert: React.FC<Props> = (props: Props) => {\r\n  let color = '#000000';\r\n  let backgroundColor = 'rgba(255, 255, 255, 0.5)';\r\n\r\n  switch (props.type) {\r\n    case 'warning':\r\n      color = '#611a15';\r\n      backgroundColor = 'rgba(255, 0, 0, 0.1)';\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  if (props.error) {\r\n    console.log(CommonUtil.toJsonString(props.error));\r\n  }\r\n\r\n  return (\r\n    <Paper>\r\n      <Box sx={{\r\n        color: props.color ?? color,\r\n        backgroundColor: props.backgroundColor ?? backgroundColor,\r\n        padding: '15px',\r\n        textAlign: 'center'\r\n      }}>\r\n        <Typography>{props.message}</Typography>\r\n      </Box>\r\n    </Paper>\r\n  );\r\n}\r\n","import { LoadingButton } from '@mui/lab';\r\nimport { SxProps, Theme } from '@mui/system';\r\nimport React from 'react';\r\nimport { FormatUtil } from 'vitepunks-common';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\n\r\ninterface Props {\r\n  children: React.ReactNode\r\n  size?: 'small' | 'medium' | 'large'\r\n  variant?: 'text' | 'outlined' | 'contained'\r\n  color?: 'inherit' | 'primary' | 'secondary' | 'success' | 'error' | 'info' | 'warning',\r\n  fullWidth?: boolean\r\n  autoFocus?: boolean\r\n  disabled?: boolean\r\n  startIcon?: React.ReactNode;\r\n  sx?: SxProps<Theme>\r\n  callbackFn: () => Promise<void>\r\n}\r\n\r\nexport const ClickOnceButton: React.FC<Props> = (props: Props) => {\r\n  const mounted = React.useRef(false);\r\n  const [isDisabled, setIsDisabled] = React.useState(false);\r\n\r\n  const handleClick = async () => {\r\n    setIsDisabled(true);\r\n    try {\r\n      await props.callbackFn();\r\n    } catch (error) {\r\n      SnackbarUtil.enqueueError(FormatUtil.formatMessage(error));\r\n    }\r\n    if (mounted.current) {\r\n      setIsDisabled(false);\r\n    }\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <LoadingButton\r\n      loading={isDisabled}\r\n      size={props.size ?? \"small\"}\r\n      variant={props.variant ?? \"contained\"}\r\n      color={props.color ?? \"primary\"}\r\n      fullWidth={props.fullWidth}\r\n      disabled={props.disabled}\r\n      onClick={handleClick}\r\n      startIcon={props.startIcon}\r\n      sx={props.sx}\r\n    >\r\n      {props.children}\r\n    </LoadingButton>\r\n  );\r\n}\r\n","import { SvgIcon, SxProps, Theme } from \"@mui/material\";\r\nimport React from \"react\";\r\n\r\ntype FontAwesomeSvgIconProps = {\r\n  icon: any;\r\n  sx?: SxProps<Theme>\r\n};\r\n\r\n// interface CustomSVGSVGElement extends SVGSVGElement {\r\n//   sx?: SxProps<Theme>\r\n// }\r\n\r\nexport const FontAwesomeSvgIcon = React.forwardRef<SVGSVGElement, FontAwesomeSvgIconProps>(\r\n  (props, ref) => {\r\n    const { icon } = props;\r\n\r\n    const {\r\n      icon: [width, height, , , svgPathData],\r\n    } = icon;\r\n\r\n    return (\r\n      <SvgIcon ref={ref} viewBox={`0 0 ${width} ${height}`} sx={props.sx}>\r\n        {typeof svgPathData === 'string' ? (\r\n          <path d={svgPathData} />\r\n        ) : (\r\n          /**\r\n           * A multi-path Font Awesome icon seems to imply a duotune icon. The 0th path seems to\r\n           * be the faded element (referred to as the \"secondary\" path in the Font Awesome docs)\r\n           * of a duotone icon. 40% is the default opacity.\r\n           *\r\n           * @see https://fontawesome.com/how-to-use/on-the-web/styling/duotone-icons#changing-opacity\r\n           */\r\n          svgPathData.map((d: string, i: number) => (\r\n            <path style={{ opacity: i === 0 ? 0.4 : 1 }} d={d} />\r\n          ))\r\n        )}\r\n      </SvgIcon>\r\n    );\r\n  },\r\n);","import { styled } from '@mui/material/styles';\r\nimport Tooltip, { tooltipClasses, TooltipProps } from '@mui/material/Tooltip';\r\nimport * as React from 'react';\r\n\r\nexport interface CustomTooltipProps extends TooltipProps {\r\n  fullWidth?: boolean\r\n}\r\n\r\nexport const ExtendedBootstrapTooltip: React.FC<CustomTooltipProps> = (props: CustomTooltipProps) => {\r\n  return (\r\n    <BootstrapTooltip {...props} sx={{ [`& .${tooltipClasses.tooltip}`]: { maxWidth: \"none\" } }}></BootstrapTooltip>\r\n  )\r\n}\r\n\r\nexport const LightTooltip = styled(({ className, ...props }: TooltipProps) => (\r\n  <Tooltip {...props} classes={{ popper: className }} />\r\n))(({ theme }) => ({\r\n  [`& .${tooltipClasses.tooltip}`]: {\r\n    backgroundColor: theme.palette.common.white,\r\n    color: 'rgba(0, 0, 0, 0.87)',\r\n    boxShadow: theme.shadows[1],\r\n    fontSize: 11,\r\n  },\r\n}));\r\n\r\nexport const BootstrapTooltip = styled(({ className, ...props }: TooltipProps) => (\r\n  <Tooltip {...props} arrow classes={{ popper: className }} />\r\n))(({ theme }) => ({\r\n  [`& .${tooltipClasses.arrow}`]: {\r\n    color: theme.palette.common.black,\r\n  },\r\n  [`& .${tooltipClasses.tooltip}`]: {\r\n    backgroundColor: theme.palette.common.black,\r\n  },\r\n}));\r\n\r\nexport const HtmlTooltip = styled(({ className, ...props }: TooltipProps) => (\r\n  <Tooltip {...props} classes={{ popper: className }} />\r\n))(({ theme }) => ({\r\n  [`& .${tooltipClasses.tooltip}`]: {\r\n    backgroundColor: '#f5f5f9',\r\n    color: 'rgba(0, 0, 0, 0.87)',\r\n    maxWidth: 220,\r\n    fontSize: theme.typography.pxToRem(12),\r\n    border: '1px solid #dadde9',\r\n  },\r\n}));","\r\nimport { faGem, faUserCircle } from '@fortawesome/free-regular-svg-icons';\r\nimport { faHandHoldingUsd, faTag } from '@fortawesome/free-solid-svg-icons';\r\nimport { Box, CardActionArea, Chip, styled } from '@mui/material';\r\nimport Card from '@mui/material/Card';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport Typography from '@mui/material/Typography';\r\nimport React from 'react';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { CommonConstants, CommonUtil, PunkTypes, TokenUtil, UrlUtil } from \"vitepunks-common\";\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { FontAwesomeSvgIcon } from '../../../common/components/fa-icon';\r\nimport { ExtendedBootstrapTooltip } from '../../../common/components/tooltip';\r\n\r\nconst CustomCardMedia = styled('div')(({ theme }) => (`\r\n  position: relative;\r\n  height: 320px;\r\n  // animation: lightning 4s ease-out infinite;\r\n  background-image: url('${ClientConstants.ITEM_BG_URL}');\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n`));\r\n\r\nconst PunkImage = styled('div')(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  image-rendering: pixelated;\r\n`,\r\n);\r\n\r\ninterface Props {\r\n  item: PunkTypes.Punk\r\n}\r\n\r\nexport const MarketplaceBrowseItem: React.FC<Props> = (props: Props) => {\r\n  const truncateAddress = (address?: string) => {\r\n    return CommonUtil.truncateStringInTheMiddle(address, 10, 5)\r\n  }\r\n  const formatViteTooltip = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatViteTooltip(bn);\r\n  }\r\n  const formatVite = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatVite(bn);\r\n  }\r\n  return (\r\n    <Card>\r\n      <CardActionArea component={RouterLink} to={`/punk/${props.item.id}`}>\r\n        <CustomCardMedia>\r\n          {props.item.owner && (\r\n            <Box sx={{ position: \"absolute\", top: 5, left: 5 }}>\r\n              <ExtendedBootstrapTooltip title={<span>{props.item.owner}</span>} placement=\"bottom\" arrow>\r\n                <Chip size=\"small\" icon={<FontAwesomeSvgIcon icon={faUserCircle} sx={{ fontSize: \"small\", ml: 1 }} />} sx={{ fontSize: \"0.7rem\" }} label={truncateAddress(props.item.owner)} />\r\n              </ExtendedBootstrapTooltip>\r\n            </Box>\r\n          )}\r\n          <Box sx={{ position: \"absolute\", top: 5, right: 5 }}>\r\n            <ExtendedBootstrapTooltip title={<span>Rarity rank</span>} placement=\"bottom\" arrow>\r\n              <Chip size=\"small\" icon={<FontAwesomeSvgIcon icon={faGem} sx={{ fontSize: \"small\", ml: 1 }} />} sx={{ fontSize: \"0.7rem\" }} label={props.item.rank} />\r\n            </ExtendedBootstrapTooltip>\r\n          </Box>\r\n          <Box sx={{ position: \"absolute\", bottom: 5, left: 5, width: \"calc(100% - 10px)\" }}>\r\n            <Box>\r\n              {props.item.bid && (\r\n                <ExtendedBootstrapTooltip title={<span>Bid: {formatViteTooltip(props.item.bid.amount)}</span>} placement=\"bottom\" arrow>\r\n                  <Chip size=\"small\" icon={<FontAwesomeSvgIcon icon={faHandHoldingUsd} sx={{ fontSize: \"small\", ml: 1 }} />} sx={{ fontSize: \"0.7rem\", mt: 1, mr: 1 }} label={formatVite(props.item.bid.amount)} />\r\n                </ExtendedBootstrapTooltip>\r\n              )}\r\n              {props.item.offer && props.item.offer.minAmount.gt(0) && (\r\n                <ExtendedBootstrapTooltip title={<span>Price: {formatViteTooltip(props.item.offer.minAmount)}</span>} placement=\"bottom\" arrow>\r\n                  <Chip size=\"small\" icon={<FontAwesomeSvgIcon icon={faTag} sx={{ fontSize: \"small\", ml: 1 }} />} sx={{ fontSize: \"0.7rem\", mt: 1, float: \"right\" }} label={formatVite(props.item.offer.minAmount)} />\r\n                </ExtendedBootstrapTooltip>\r\n              )}\r\n            </Box>\r\n          </Box>\r\n          <PunkImage sx={{ backgroundImage: `url('${UrlUtil.getPunkUrl(props.item.image, props.item.cid)}')` }} />\r\n        </CustomCardMedia>\r\n        <CardContent sx={{ p: 0 }}>\r\n          <Typography variant=\"h6\" component=\"div\" sx={{ p: 1 }}>\r\n            {CommonConstants.PUNK_NAME} #{props.item.id}\r\n          </Typography>\r\n          <Box sx={{ height: \"70px\", overflow: \"auto\" }}>\r\n            <Box sx={{ p: 1 }}>\r\n              {props.item.attributes?.map((a: string) => (\r\n                <Chip key={a} label={a} variant=\"outlined\" sx={{ mb: 1, mr: 1 }} size=\"small\" />\r\n              ))}\r\n            </Box>\r\n          </Box>\r\n        </CardContent>\r\n      </CardActionArea>\r\n    </Card>\r\n  )\r\n}\r\n","import { ApolloError } from '@apollo/client';\r\nimport { Box, Container, Grid } from '@mui/material';\r\nimport React from 'react';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport { FormatUtil, PunkTypes } from 'vitepunks-common';\r\nimport { Alert } from '../../../common/components/alert';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\nimport { MarketplaceBrowseItem } from '../../../marketplace/components/browse-item';\r\n\r\ninterface EmptyResultProps {\r\n  error: ApolloError | undefined\r\n  isLoading: boolean\r\n  isEmpty: boolean\r\n}\r\n\r\nconst EmptyResult: React.FC<EmptyResultProps> = (props: EmptyResultProps) => {\r\n  return (\r\n    <>\r\n      {props.error ? (\r\n        <Alert message={FormatUtil.formatMessage(props.error)} type=\"warning\"></Alert>\r\n      ) : (\r\n        <>\r\n          {props.isLoading || !props.isEmpty ? (\r\n            <></>\r\n          ) : (\r\n            <Alert message=\"No punks found\" type=\"default\" ></Alert>\r\n          )}\r\n        </>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\ninterface InfiniteListLoadingProps {\r\n  error: ApolloError | undefined\r\n  isLoading: boolean\r\n  isEmpty: boolean\r\n}\r\n\r\nconst InfiniteListLoading: React.FC<InfiniteListLoadingProps> = (props: InfiniteListLoadingProps) => {\r\n  return (\r\n    <Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n      <Grid item key='1' xs={12} md={6}>\r\n        {props.isLoading ? (\r\n          <Alert message=\"Loading...\" type=\"default\" ></Alert>\r\n        ) : (\r\n          <EmptyResult error={props.error} isLoading={props.isLoading} isEmpty={props.isEmpty}></EmptyResult>\r\n        )}\r\n      </Grid>\r\n    </Grid>\r\n  )\r\n}\r\n\r\ninterface InfinitePunkListProps {\r\n  items: PunkTypes.Punk[]\r\n  fetchMoreDataAsync(): Promise<any>\r\n  error: ApolloError | undefined\r\n  isLoading: boolean\r\n  hasMore: boolean\r\n}\r\n\r\nexport const InfinitePunkList: React.FC<InfinitePunkListProps> = (props: InfinitePunkListProps) => {\r\n  return (\r\n    <>\r\n      <Container sx={{ pt: 3, pb: 6 }} maxWidth=\"xl\">\r\n        {props.items.length > 0 ? (\r\n          <>\r\n            <InfiniteScroll\r\n              dataLength={props.items.length}\r\n              next={props.fetchMoreDataAsync}\r\n              hasMore={props.hasMore}\r\n              loader={\r\n                <InfiniteListLoading error={props.error} isLoading={props.isLoading} isEmpty={props.items.length <= 0}></InfiniteListLoading>\r\n              }\r\n              scrollThreshold=\"200px\"\r\n              scrollableTarget=\"mainscroll\"\r\n            >\r\n              <Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\" marginBottom={3}>\r\n                {props.items.map((p: PunkTypes.Punk) => (\r\n                  <Grid item key={p.id} xs={12} sm={6} md={4} lg={3}>\r\n                    <MarketplaceBrowseItem item={p}></MarketplaceBrowseItem>\r\n                  </Grid>\r\n                ))}\r\n              </Grid>\r\n            </InfiniteScroll>\r\n            {props.hasMore && !props.isLoading && (\r\n              <Box sx={{ width: \"100%\", display: \"flex\", justifyContent: \"center\" }}>\r\n                <ClickOnceButton variant=\"outlined\" callbackFn={props.fetchMoreDataAsync} sx={{ minWidth: \"200px\" }}>Load more</ClickOnceButton>\r\n              </Box>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <InfiniteListLoading error={props.error} isLoading={props.isLoading} isEmpty={props.items.length <= 0}></InfiniteListLoading>\r\n        )}\r\n      </Container>\r\n    </>\r\n  )\r\n}\r\n","import { ApolloClient, FetchPolicy, NormalizedCacheObject } from \"@apollo/client\";\r\nimport { getApolloClient } from \"../clients/apollo.client\";\r\nimport { getClientConfig } from \"../common/config\";\r\nimport { GET_ACCOUNT_AUCTIONS_QUERY, GET_QUOTA_QUERY } from \"../queries/general\";\r\nimport { GetAccountAuctions, GetAccountAuctionsVariables } from \"../queries/__generated__/GetAccountAuctions\";\r\nimport { GetQuota, GetQuotaVariables } from \"../queries/__generated__/GetQuota\";\r\n\r\nclass GeneralService {\r\n  private readonly _apollo: ApolloClient<NormalizedCacheObject>;\r\n\r\n  constructor() {\r\n    this._apollo = getApolloClient();\r\n  }\r\n\r\n  getContractQuota = (_fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetQuota, GetQuotaVariables>({\r\n      query: GET_QUOTA_QUERY,\r\n      variables: {\r\n        address: getClientConfig().CONTRACT_ADDRESS\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getAccountAuctions = (_address: string, _limit: number, _cursor?: Maybe<string>, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetAccountAuctions, GetAccountAuctionsVariables>({\r\n      query: GET_ACCOUNT_AUCTIONS_QUERY,\r\n      variables: {\r\n        address: _address,\r\n        limit: _limit,\r\n        cursor: _cursor\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n}\r\n\r\nconst service = new GeneralService();\r\n\r\nexport const getGeneralService = () => {\r\n  return service;\r\n}","import { ApolloClient, FetchPolicy, NormalizedCacheObject } from \"@apollo/client\";\r\nimport { CommonUtil } from \"vitepunks-common\";\r\nimport { getApolloClient } from \"../clients/apollo.client\";\r\nimport { ACCEPT_BID_MUTATION, BID_MUTATION, BUY_MUTATION, CANCEL_BID_MUTATION, CANCEL_OFFER_MUTATION, OFFER_MUTATION } from \"../mutations\";\r\nimport { AcceptBid, AcceptBidVariables } from \"../mutations/__generated__/AcceptBid\";\r\nimport { Bid, BidVariables } from \"../mutations/__generated__/Bid\";\r\nimport { Buy, BuyVariables } from \"../mutations/__generated__/Buy\";\r\nimport { CancelBid, CancelBidVariables } from \"../mutations/__generated__/CancelBid\";\r\nimport { CancelOffer, CancelOfferVariables } from \"../mutations/__generated__/CancelOffer\";\r\nimport { Offer, OfferVariables } from \"../mutations/__generated__/Offer\";\r\nimport { GET_MARKET_EVENTS_QUERY, GET_MARKET_INFO_QUERY } from \"../queries\";\r\nimport { GetMarketEvents, GetMarketEventsVariables } from \"../queries/__generated__/GetMarketEvents\";\r\nimport { GetMarketInfo } from \"../queries/__generated__/GetMarketInfo\";\r\n\r\nclass MarketService {\r\n  private readonly _apollo: ApolloClient<NormalizedCacheObject>;\r\n\r\n  constructor() {\r\n    this._apollo = getApolloClient();\r\n  }\r\n\r\n  getMarketInfoAsync = (_fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetMarketInfo>({\r\n      query: GET_MARKET_INFO_QUERY,\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getEventsAsync = (_offset: number, _limit: number, _height?: Maybe<string>, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetMarketEvents, GetMarketEventsVariables>({\r\n      query: GET_MARKET_EVENTS_QUERY,\r\n      variables: {\r\n        offset: _offset,\r\n        limit: _limit,\r\n        height: _height\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  async offerAsync(id: string, amount: string, address?: Maybe<string>): Promise<boolean> {\r\n    const result = await this._apollo.mutate<Offer, OfferVariables>({\r\n      mutation: OFFER_MUTATION,\r\n      variables: {\r\n        id: id,\r\n        amount: amount,\r\n        address: CommonUtil.isNullOrWhitespace(address) ? undefined : address\r\n      }\r\n    });\r\n    return Boolean(result.data?.offer ?? false);\r\n  }\r\n\r\n  async cancelOfferAsync(id: string): Promise<boolean> {\r\n    const result = await this._apollo.mutate<CancelOffer, CancelOfferVariables>({\r\n      mutation: CANCEL_OFFER_MUTATION,\r\n      variables: {\r\n        id: id\r\n      }\r\n    });\r\n    return Boolean(result.data?.cancelOffer ?? false);\r\n  }\r\n\r\n  async buyAsync(id: string, amount: string): Promise<boolean> {\r\n    const result = await this._apollo.mutate<Buy, BuyVariables>({\r\n      mutation: BUY_MUTATION,\r\n      variables: {\r\n        id: id,\r\n        amount: amount\r\n      }\r\n    });\r\n    return Boolean(result.data?.buy ?? false);\r\n  }\r\n\r\n  async bidAsync(id: string, amount: string): Promise<boolean> {\r\n    const result = await this._apollo.mutate<Bid, BidVariables>({\r\n      mutation: BID_MUTATION,\r\n      variables: {\r\n        id: id,\r\n        amount: amount\r\n      }\r\n    });\r\n    return Boolean(result.data?.bid ?? false);\r\n  }\r\n\r\n  async acceptBidAsync(id: string, amount: string): Promise<boolean> {\r\n    const result = await this._apollo.mutate<AcceptBid, AcceptBidVariables>({\r\n      mutation: ACCEPT_BID_MUTATION,\r\n      variables: {\r\n        id: id,\r\n        amount: amount\r\n      }\r\n    });\r\n    return Boolean(result.data?.acceptBid ?? false);\r\n  }\r\n\r\n  async cancelBidAsync(id: string): Promise<boolean> {\r\n    const result = await this._apollo.mutate<CancelBid, CancelBidVariables>({\r\n      mutation: CANCEL_BID_MUTATION,\r\n      variables: {\r\n        id: id\r\n      }\r\n    });\r\n    return Boolean(result.data?.cancelBid ?? false);\r\n  }\r\n}\r\n\r\nconst service = new MarketService();\r\n\r\nexport const getMarketService = () => {\r\n  return service;\r\n}","import { faBan, faDonate, faEraser, faExchangeAlt, faGift, faHandHoldingUsd, faPowerOff, faQuestion, faTag, faTrophy } from '@fortawesome/free-solid-svg-icons';\r\nimport { PunkTypes } from 'vitepunks-common';\r\n\r\nexport abstract class IconUtil {\r\n  static getBuyEventTypeIcon = () => {\r\n    return faDonate;\r\n  }\r\n  static getClaimEventTypeIcon = () => {\r\n    return faExchangeAlt;\r\n    //return faBoxOpen;\r\n  }\r\n  static getOfferEventTypeIcon = () => {\r\n    return faTag;\r\n  }\r\n  static getGiftEventTypeIcon = () => {\r\n    return faGift;\r\n  }\r\n  static getCancelSaleEventTypeIcon = () => {\r\n    return faPowerOff;\r\n  }\r\n  static getCancelGiftEventTypeIcon = () => {\r\n    return faEraser;\r\n  }\r\n  static getPunkEventTypeIcon = (eventType: PunkTypes.PunkEventType, amount?: Maybe<PunkTypes.BigNumberWrapper>) => {\r\n    switch (eventType) {\r\n      case PunkTypes.PunkEventType.Mint:\r\n        return faTrophy;\r\n      case PunkTypes.PunkEventType.Offer:\r\n        if (amount && amount.gt(0)) {\r\n          return IconUtil.getOfferEventTypeIcon();\r\n        }\r\n        return IconUtil.getGiftEventTypeIcon();\r\n      case PunkTypes.PunkEventType.NewBid:\r\n        return faHandHoldingUsd;;\r\n      case PunkTypes.PunkEventType.CancelBid:\r\n        return faBan;\r\n      case PunkTypes.PunkEventType.Buy:\r\n        if (amount && amount.gt(0)) {\r\n          return IconUtil.getBuyEventTypeIcon();\r\n        }\r\n        return IconUtil.getClaimEventTypeIcon();\r\n      case PunkTypes.PunkEventType.CancelOffer:\r\n        if (amount && amount.gt(0)) {\r\n          return IconUtil.getCancelSaleEventTypeIcon();\r\n        }\r\n        return IconUtil.getCancelGiftEventTypeIcon();\r\n      default:\r\n        return faQuestion;\r\n    }\r\n  }\r\n  static getAccountAuctionTypeIcon = (auctionType: PunkTypes.AccountAuctionType, amount?: Maybe<PunkTypes.BigNumberWrapper>) => {\r\n    switch (auctionType) {\r\n      case PunkTypes.AccountAuctionType.Bid:\r\n        return IconUtil.getPunkEventTypeIcon(PunkTypes.PunkEventType.NewBid, amount);\r\n      case PunkTypes.AccountAuctionType.Offer:\r\n        return IconUtil.getPunkEventTypeIcon(PunkTypes.PunkEventType.Offer, amount);\r\n      default:\r\n        return IconUtil.getPunkEventTypeIcon(PunkTypes.PunkEventType.Unknown, amount);\r\n    }\r\n  }\r\n}","import { Link } from '@mui/material';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { CommonUtil, ExplorerUtil } from \"vitepunks-common\";\r\n\r\ninterface Props {\r\n  children: React.ReactNode\r\n  value?: Maybe<string>\r\n  type: ExplorerLinkType\r\n}\r\n\r\nexport enum ExplorerLinkType {\r\n  Address,\r\n  Transaction\r\n}\r\n\r\nexport const ExplorerLink: React.FC<Props> = (props: Props) => {\r\n  const getUrl = useCallback(() => {\r\n    if (!props.value || CommonUtil.isNullOrWhitespace(props.value)) {\r\n      return undefined;\r\n    }\r\n    switch (props.type) {\r\n      case ExplorerLinkType.Address:\r\n        return ExplorerUtil.getAddressUrl(props.value);\r\n      default:\r\n        return ExplorerUtil.getTxUrl(props.value);\r\n    }\r\n  }, [props.value, props.type]);\r\n  const [url, setUrl] = useState<Maybe<string>>(getUrl());\r\n\r\n  useEffect(() => {\r\n    setUrl(getUrl());\r\n  }, [props.value, props.type, getUrl]);\r\n\r\n  if (!url || CommonUtil.isNullOrWhitespace(url)) {\r\n    return (\r\n      <>\r\n        {props.children}\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Link underline=\"hover\" href={url} target=\"_blank\">\r\n      {props.children}\r\n    </Link>\r\n  );\r\n}\r\n","import moment from 'moment';\r\n\r\nexport class MomentUtil {\r\n  constructor() {\r\n    moment.locale(navigator.language);\r\n  }\r\n\r\n  public setLocale(language: string): void {\r\n    moment.locale(language);\r\n  }\r\n\r\n  public get(): moment.Moment {\r\n    return moment()\r\n  }\r\n\r\n  public getFromUnix(date: number) {\r\n    return moment.unix(date);\r\n  }\r\n\r\n  public getFromMilliseconds(date: number) {\r\n    return moment(date, 'x');\r\n  }\r\n\r\n  public getLocal(date: any): moment.Moment {\r\n    return moment.utc(date).local();\r\n  }\r\n\r\n  public getLocalTime(date: any): string {\r\n    return this.getLocal(date).format('LTS');\r\n  }\r\n\r\n  public getLocalDate(date: any): string {\r\n    return this.getLocal(date).format('L');\r\n  }\r\n\r\n  public getLocalFormatted(date: any): string {\r\n    return this.getLocalTime(date) + ' ' + this.getLocalDate(date);\r\n  }\r\n\r\n  public getLocalReverseFormatted(date: any): string {\r\n    return this.getLocalDate(date) + ' ' + this.getLocalTime(date);\r\n  }\r\n\r\n  public getDuration(date: any, unit: moment.unitOfTime.DurationConstructor | undefined = \"seconds\"): moment.Duration {\r\n    const diff = moment(date).unix() - moment().unix();\r\n    return moment.duration(diff, unit);\r\n  }\r\n\r\n  public isExpired(timestamp: any): boolean {\r\n    try {\r\n      if (timestamp) {\r\n        return moment.utc().unix() >= Number(timestamp);\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n}","import { Grid } from '@mui/material';\r\nimport React from 'react';\r\nimport { FormatUtil } from 'vitepunks-common';\r\nimport { Alert } from '../alert';\r\n\r\nexport interface EventListLoadingProps {\r\n  error: any\r\n  loading: boolean\r\n  count: number\r\n  message: string\r\n}\r\n\r\nexport const EventListLoading: React.FC<EventListLoadingProps> = (props: EventListLoadingProps) => {\r\n  return (\r\n    <Grid item key='1' xs={12} md={6}>\r\n      {props.loading ? (\r\n        <Alert message=\"Loading...\" type=\"default\" ></Alert>\r\n      ) : (\r\n        <>\r\n          {props.error ? (\r\n            <Alert message={FormatUtil.formatMessage(props.error)} type=\"warning\"></Alert>\r\n          ) : (\r\n            <>\r\n              {props.count > 0 ? (\r\n                <></>\r\n              ) : (\r\n                <Alert message={props.message} type=\"default\"></Alert>\r\n              )}\r\n            </>\r\n          )}\r\n        </>\r\n      )}\r\n    </Grid>\r\n  )\r\n}\r\n","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, FormControl, Input, Typography } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonConstants, PunkTypes, TokenUtil } from 'vitepunks-common';\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\n\r\ninterface Props {\r\n  state: PunkTypes.PunkDialogState\r\n  setState: React.Dispatch<React.SetStateAction<PunkTypes.PunkDialogState>>\r\n  callbackAsync: (_success: boolean) => Promise<void>\r\n}\r\n\r\nexport const PunkAcceptDialog: React.FC<Props> = (props: Props) => {\r\n  const [amount, setAmount] = useState(\"\");\r\n  const service = getMarketService();\r\n\r\n  useEffect(() => {\r\n    if (props.state.type === PunkTypes.PunkDialogType.ACCEPT_OFFER) {\r\n      if (props.state.item.offer?.minAmount.gt(0)) {\r\n        setAmount(TokenUtil.formatViteTooltip(props.state.item.offer.minAmount))\r\n      }\r\n    } else {\r\n      if (props.state.item.bid?.amount.gt(0)) {\r\n        setAmount(TokenUtil.formatViteTooltip(props.state.item.bid.amount))\r\n      }\r\n    }\r\n  }, [props.state]);\r\n\r\n  const handleClose = () => {\r\n    props.setState({\r\n      ...props.state,\r\n      open: false\r\n    })\r\n  };\r\n\r\n  const handleConfirmAsync = async () => {\r\n    let _message = `Congratulations! You %ACTION_NAME ${CommonConstants.PUNK_NAME} #${props.state.item.id}`;\r\n    let _success = false;\r\n    try {\r\n      if (props.state.type === PunkTypes.PunkDialogType.ACCEPT_OFFER) {\r\n        if (!props.state.item.offer) {\r\n          throw new Error(`${CommonConstants.PUNK_NAME} #${props.state.item.id} is not for sale`);\r\n        }\r\n        _success = await service.buyAsync(props.state.item.id, props.state.item.offer.minAmount.toFixed());\r\n        _message = _message.replace(\"%ACTION_NAME\", \"bought\");\r\n      } else {\r\n        if (!props.state.item.bid) {\r\n          throw new Error(`${CommonConstants.PUNK_NAME} #${props.state.item.id} has no bid`);\r\n        }\r\n        _success = await service.acceptBidAsync(props.state.item.id, props.state.item.bid?.amount.toFixed());\r\n        _message = _message.replace(\"%ACTION_NAME\", \"sold\");\r\n      }\r\n      if (_success) {\r\n        SnackbarUtil.enqueueMessage(_message);\r\n        handleClose();\r\n      } else {\r\n        SnackbarUtil.enqueueError(\"Error\");\r\n      }\r\n    } catch (error) {\r\n      _success = false;\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      await props.callbackAsync(_success);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={props.state.open} maxWidth=\"xs\" fullWidth>\r\n      <DialogTitle>Confirmation required</DialogTitle>\r\n      <DialogContent>\r\n        {props.state.type === PunkTypes.PunkDialogType.ACCEPT_OFFER ? (\r\n          <Typography variant=\"body1\" color=\"textSecondary\" gutterBottom>\r\n            Buy {CommonConstants.PUNK_NAME} #{props.state.item.id}\r\n          </Typography>\r\n        ) : (\r\n          <>\r\n            <Typography variant=\"body1\" color=\"textSecondary\" gutterBottom>\r\n              Accept bid for {CommonConstants.PUNK_NAME} #{props.state.item.id}\r\n            </Typography>\r\n            {/* <Typography variant=\"body1\" color=\"textSecondary\">\r\n              You will receive <small>(minus fees)</small>:\r\n            </Typography> */}\r\n          </>\r\n        )}\r\n        <FormControl fullWidth sx={{ mt: 2 }} variant=\"standard\" >\r\n          <Input\r\n            id=\"amount\"\r\n            value={amount}\r\n            //startAdornment={<InputAdornment position=\"start\">${CommonConstants.CURRENCY_NAME}</InputAdornment>}\r\n            disabled\r\n          />\r\n        </FormControl>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>Close</Button>\r\n        <ClickOnceButton size=\"medium\" color=\"primary\" callbackFn={handleConfirmAsync}>\r\n          Confirm\r\n        </ClickOnceButton>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import { FetchPolicy } from '@apollo/client';\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, FormControl, Input, InputAdornment, InputLabel } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonConstants, CommonUtil, PunkTypes, TokenUtil } from \"vitepunks-common\";\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\n\r\ninterface Props {\r\n  state: PunkTypes.PunkDialogState\r\n  fee: PunkTypes.BigNumberWrapper\r\n  updateFee: (_fetchPolicy?: FetchPolicy) => Promise<void>\r\n  setState: React.Dispatch<React.SetStateAction<PunkTypes.PunkDialogState>>\r\n  callbackAsync: (_success: boolean) => Promise<void>\r\n}\r\n\r\nexport const PunkBidDialog: React.FC<Props> = (props: Props) => {\r\n  const [amount, setAmount] = useState<string>(\"\");\r\n  const [disabled, setDisabled] = useState<boolean>(false);\r\n  const service = getMarketService();\r\n\r\n  const changeAmount = (amount: string) => {\r\n    setAmount(amount);\r\n    setDisabled(CommonUtil.isNullOrWhitespace(amount) || new PunkTypes.BigNumberWrapper(amount).lte(0));\r\n  }\r\n\r\n  const updateFee = props.updateFee;\r\n\r\n  useEffect(() => {\r\n    if (props.state.open) {\r\n      changeAmount(\"\");\r\n      updateFee(\"cache-first\");\r\n    }\r\n  }, [props.state, updateFee]);\r\n\r\n  const handleClose = () => {\r\n    props.setState({\r\n      ...props.state,\r\n      open: false\r\n    })\r\n  };\r\n\r\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    changeAmount(event.target.value);\r\n  };\r\n\r\n  const handleConfirmAsync = async () => {\r\n    let _success = false;\r\n    try {\r\n      const _amount = new PunkTypes.BigNumberWrapper(amount).shiftedBy(CommonConstants.CURRENCY_DECIMALS);\r\n      _success = await service.bidAsync(props.state.item.id, _amount.toFixed());\r\n      if (_success) {\r\n        SnackbarUtil.enqueueMessage(\"Bid success\");\r\n        handleClose();\r\n      } else {\r\n        SnackbarUtil.enqueueError(\"Error\");\r\n        updateFee();\r\n      }\r\n    } catch (error) {\r\n      _success = false;\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      await props.callbackAsync(_success);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={props.state.open} maxWidth=\"xs\" fullWidth>\r\n      <DialogTitle>Bid</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          Place a bid for {CommonConstants.PUNK_NAME} #{props.state.item.id}\r\n        </DialogContentText>\r\n        <FormControl fullWidth sx={{ mt: 2 }} variant=\"standard\" >\r\n          <InputLabel htmlFor=\"amount\">Amount</InputLabel>\r\n          <Input\r\n            id=\"amount\"\r\n            value={amount}\r\n            onChange={handleChange}\r\n            type=\"number\"\r\n            autoFocus\r\n            startAdornment={<InputAdornment position=\"start\">${CommonConstants.CURRENCY_NAME}</InputAdornment>}\r\n          />\r\n        </FormControl>\r\n        {props.fee.gt(0) && (\r\n          <DialogContentText align='right'>\r\n            + {TokenUtil.formatVite(props.fee)} {CommonConstants.CURRENCY_NAME} protocol fee\r\n          </DialogContentText>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>Cancel</Button>\r\n        <ClickOnceButton size=\"medium\" color=\"primary\" callbackFn={handleConfirmAsync} disabled={disabled}>\r\n          Confirm\r\n        </ClickOnceButton>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { ActionName, CommonConstants, PunkTypes } from 'vitepunks-common';\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\n\r\ninterface Props {\r\n  state: PunkTypes.PunkDialogState\r\n  setState: React.Dispatch<React.SetStateAction<PunkTypes.PunkDialogState>>\r\n  callbackAsync: (_success: boolean) => Promise<void>\r\n}\r\n\r\nexport const PunkCancelDialog: React.FC<Props> = (props: Props) => {\r\n  const [actionName, setActionName] = useState(\"\");\r\n  const service = getMarketService();\r\n\r\n  useEffect(() => {\r\n    setActionName(props.state.type === PunkTypes.PunkDialogType.CANCEL_BID ? ActionName.bid : (props.state.item.offer?.minAmount.gt(0) ? ActionName.listing : ActionName.gift));\r\n  }, [props.state]);\r\n\r\n  const handleClose = () => {\r\n    props.setState({\r\n      ...props.state,\r\n      open: false\r\n    })\r\n  };\r\n\r\n  const handleConfirmAsync = async () => {\r\n    let _success = false;\r\n    try {\r\n      if (props.state.type === PunkTypes.PunkDialogType.CANCEL_BID) {\r\n        _success = await service.cancelBidAsync(props.state.item.id);\r\n      } else {\r\n        _success = await service.cancelOfferAsync(props.state.item.id);\r\n      }\r\n      if (_success) {\r\n        SnackbarUtil.enqueueMessage(`${actionName} cancelled`);\r\n        handleClose();\r\n      } else {\r\n        SnackbarUtil.enqueueError(\"Error\");\r\n      }\r\n    } catch (error) {\r\n      _success = false;\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      await props.callbackAsync(_success);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={props.state.open} maxWidth=\"xs\" fullWidth>\r\n      <DialogTitle>Cancel</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          Cancel the {actionName.toLowerCase()} for {CommonConstants.PUNK_NAME} #{props.state.item.id}\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>Close</Button>\r\n        <ClickOnceButton size=\"medium\" color=\"primary\" callbackFn={handleConfirmAsync}>\r\n          Confirm\r\n        </ClickOnceButton>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import { FetchPolicy } from '@apollo/client';\r\nimport { Box, Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, FormControl, Input, InputLabel } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { ActionName, CommonConstants, CommonUtil, PunkTypes, TokenUtil } from \"vitepunks-common\";\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\n\r\ninterface Props {\r\n  state: PunkTypes.PunkDialogState\r\n  fee: PunkTypes.BigNumberWrapper\r\n  updateFee: (_fetchPolicy?: FetchPolicy) => Promise<void>\r\n  setState: React.Dispatch<React.SetStateAction<PunkTypes.PunkDialogState>>\r\n  callbackAsync: (_success: boolean) => Promise<void>\r\n}\r\n\r\nexport const PunkGiftDialog: React.FC<Props> = (props: Props) => {\r\n  const [address, setAddress] = useState<string>(\"\");\r\n  const [disabled, setDisabled] = useState<boolean>(true);\r\n  const service = getMarketService();\r\n\r\n  const changeAddress = (address: string) => {\r\n    setAddress(address);\r\n    setDisabled(CommonUtil.isNullOrWhitespace(address));\r\n  }\r\n\r\n  const updateFee = props.updateFee;\r\n\r\n  useEffect(() => {\r\n    if (props.state.open) {\r\n      setAddress(\"\");\r\n      updateFee(\"cache-first\");\r\n    }\r\n  }, [props.state, updateFee]);\r\n\r\n  const handleClose = () => {\r\n    props.setState({\r\n      ...props.state,\r\n      open: false\r\n    })\r\n  };\r\n\r\n  const handleAddressChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    changeAddress(event.target.value);\r\n  };\r\n\r\n  const handleConfirmAsync = async () => {\r\n    let _success = false;\r\n    try {\r\n      const _amount = new PunkTypes.BigNumberWrapper(0);\r\n      _success = await service.offerAsync(props.state.item.id, _amount.toFixed(), CommonUtil.isNullOrWhitespace(address) ? undefined : address);\r\n      if (_success) {\r\n        SnackbarUtil.enqueueMessage(`${ActionName.gift} success`);\r\n        handleClose();\r\n      } else {\r\n        SnackbarUtil.enqueueError(\"Error\");\r\n        updateFee();\r\n      }\r\n    } catch (error) {\r\n      _success = false;\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      await props.callbackAsync(_success);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={props.state.open} maxWidth=\"xs\" fullWidth>\r\n      <DialogTitle>Gift/transfer</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          Transfer {CommonConstants.PUNK_NAME} #{props.state.item.id} as a gift\r\n        </DialogContentText>\r\n        <FormControl fullWidth variant=\"standard\" >\r\n          <InputLabel htmlFor=\"address\">Address</InputLabel>\r\n          <Input\r\n            id=\"address\"\r\n            value={address}\r\n            onChange={handleAddressChange}\r\n            placeholder=\"Only this address will be eligible to claim\"\r\n            type=\"text\"\r\n          />\r\n        </FormControl>\r\n        {props.fee.gt(0) ? (\r\n          <DialogContentText align='right'>\r\n            + {TokenUtil.formatVite(props.fee)} {CommonConstants.CURRENCY_NAME} protocol fee\r\n          </DialogContentText>\r\n        ) : (\r\n          <Box marginTop={2}></Box>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>Cancel</Button>\r\n        <ClickOnceButton size=\"medium\" color=\"primary\" callbackFn={handleConfirmAsync} disabled={disabled}>\r\n          Confirm\r\n        </ClickOnceButton>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import { FetchPolicy } from '@apollo/client';\r\nimport { Box, Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, FormControl, Input, InputAdornment, InputLabel } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonConstants, CommonUtil, PunkTypes, TokenUtil } from \"vitepunks-common\";\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\n\r\ninterface Props {\r\n  state: PunkTypes.PunkDialogState\r\n  fee: PunkTypes.BigNumberWrapper\r\n  updateFee: (_fetchPolicy?: FetchPolicy) => Promise<void>\r\n  setState: React.Dispatch<React.SetStateAction<PunkTypes.PunkDialogState>>\r\n  callbackAsync: (_success: boolean) => Promise<void>\r\n}\r\n\r\nexport const PunkOfferDialog: React.FC<Props> = (props: Props) => {\r\n  const [amount, setAmount] = useState<string>(\"\");\r\n  const [address, setAddress] = useState<string>(\"\");\r\n  const [disabled, setDisabled] = useState<boolean>(false);\r\n  const service = getMarketService();\r\n\r\n  const changeAmount = (amount: string) => {\r\n    setAmount(amount);\r\n    setDisabled(CommonUtil.isNullOrWhitespace(amount) || new PunkTypes.BigNumberWrapper(amount).lt(0));\r\n  }\r\n\r\n  const updateFee = props.updateFee;\r\n\r\n  useEffect(() => {\r\n    if (props.state.open) {\r\n      changeAmount(\"\");\r\n      setAddress(\"\");\r\n      updateFee(\"cache-first\");\r\n    }\r\n  }, [props.state, updateFee]);\r\n\r\n  const handleClose = () => {\r\n    props.setState({\r\n      ...props.state,\r\n      open: false\r\n    })\r\n  };\r\n\r\n  const handleAmountChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    changeAmount(event.target.value);\r\n  };\r\n\r\n  const handleAddressChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setAddress(event.target.value);\r\n  };\r\n\r\n  const handleConfirmAsync = async () => {\r\n    let _success = false;\r\n    try {\r\n      const _amount = new PunkTypes.BigNumberWrapper(amount).shiftedBy(CommonConstants.CURRENCY_DECIMALS);\r\n      _success = await service.offerAsync(props.state.item.id, _amount.toFixed(), CommonUtil.isNullOrWhitespace(address) ? undefined : address);\r\n      if (_success) {\r\n        SnackbarUtil.enqueueMessage(\"Listed for sale\");\r\n        handleClose();\r\n      } else {\r\n        SnackbarUtil.enqueueError(\"Error\");\r\n        updateFee();\r\n      }\r\n    } catch (error) {\r\n      _success = false;\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      await props.callbackAsync(_success);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={props.state.open} maxWidth=\"xs\" fullWidth>\r\n      <DialogTitle>Sell</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          List {CommonConstants.PUNK_NAME} #{props.state.item.id} for sale\r\n        </DialogContentText>\r\n        <FormControl fullWidth sx={{ mt: 2 }} variant=\"standard\" >\r\n          <InputLabel htmlFor=\"amount\">Amount</InputLabel>\r\n          <Input\r\n            id=\"amount\"\r\n            value={amount}\r\n            onChange={handleAmountChange}\r\n            type=\"number\"\r\n            autoFocus\r\n            startAdornment={<InputAdornment position=\"start\">${CommonConstants.CURRENCY_NAME}</InputAdornment>}\r\n          />\r\n        </FormControl>\r\n        {props.fee.gt(0) ? (\r\n          <DialogContentText align='right'>\r\n            + {TokenUtil.formatVite(props.fee)} {CommonConstants.CURRENCY_NAME} protocol fee\r\n          </DialogContentText>\r\n        ) : (\r\n          <Box marginTop={2}></Box>\r\n        )}\r\n        <FormControl fullWidth variant=\"standard\" >\r\n          <InputLabel htmlFor=\"address\">Address (optional)</InputLabel>\r\n          <Input\r\n            id=\"address\"\r\n            value={address}\r\n            onChange={handleAddressChange}\r\n            placeholder=\"Only this address will be eligible to buy\"\r\n            type=\"text\"\r\n          />\r\n        </FormControl>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>Cancel</Button>\r\n        <ClickOnceButton size=\"medium\" color=\"primary\" callbackFn={handleConfirmAsync} disabled={disabled}>\r\n          Confirm\r\n        </ClickOnceButton>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import { FetchPolicy } from '@apollo/client';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { getEmitter, getLogger, PunkTypes, TransformUtil } from 'vitepunks-common';\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { PunkAcceptDialog } from '../dialog-accept';\r\nimport { PunkBidDialog } from '../dialog-bid';\r\nimport { PunkCancelDialog } from '../dialog-cancel';\r\nimport { PunkGiftDialog } from '../dialog-gift';\r\nimport { PunkOfferDialog } from '../dialog-offer';\r\n\r\nconst logger = getLogger();\r\n\r\ninterface Props {\r\n  state: PunkTypes.PunkDialogState\r\n  setState: React.Dispatch<React.SetStateAction<PunkTypes.PunkDialogState>>\r\n  callbackAsync: (success: boolean) => Promise<void>\r\n}\r\n\r\nexport const PunkDialog: React.FC<Props> = (props: Props) => {\r\n  const mounted = React.useRef(false);\r\n  const [fee, setFee] = useState<PunkTypes.BigNumberWrapper>(TransformUtil.defaultBigNumber);\r\n  const service = getMarketService();\r\n  const emitter = getEmitter();\r\n\r\n  React.useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  const updateFee = useCallback(async (_fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    if (mounted.current) {\r\n      setFee(TransformUtil.defaultBigNumber);\r\n      try {\r\n        const result = await service.getMarketInfoAsync(_fetchPolicy);\r\n        if (mounted.current) {\r\n          const info = result.data.marketInfo as PunkTypes.MarketInfo;\r\n          if (info && info.actionPrice.gt(0)) {\r\n            setFee(info.actionPrice);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        logger.error(error)();\r\n      }\r\n    }\r\n  }, [service]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.MarketChangedEvent) => {\r\n      logger.info(`eventType: ${e.eventType} amount: ${e.value.toFixed()} timestamp: ${e.timestamp.toFixed()}`)();\r\n      updateFee();\r\n    }\r\n    logger.info('emitter.on', PunkTypes.GlobalEvent.MarketChanged)();\r\n    emitter.on(PunkTypes.GlobalEvent.MarketChanged, handleEvent);\r\n    return () => {\r\n      logger.info('emitter.off', PunkTypes.GlobalEvent.MarketChanged)();\r\n      emitter.off(PunkTypes.GlobalEvent.MarketChanged, handleEvent);\r\n    };\r\n  }, [emitter, updateFee]);\r\n\r\n  switch (props.state.type) {\r\n    case PunkTypes.PunkDialogType.BID:\r\n      return <PunkBidDialog state={props.state} fee={fee} updateFee={updateFee} setState={props.setState} callbackAsync={(success) => props.callbackAsync(success)}></PunkBidDialog>\r\n    case PunkTypes.PunkDialogType.OFFER:\r\n      return <PunkOfferDialog state={props.state} fee={fee} updateFee={updateFee} setState={props.setState} callbackAsync={(success) => props.callbackAsync(success)}></PunkOfferDialog>\r\n    case PunkTypes.PunkDialogType.GIFT:\r\n      return <PunkGiftDialog state={props.state} fee={fee} updateFee={updateFee} setState={props.setState} callbackAsync={(success) => props.callbackAsync(success)}></PunkGiftDialog>\r\n    case PunkTypes.PunkDialogType.CANCEL_BID:\r\n    case PunkTypes.PunkDialogType.CANCEL_OFFER:\r\n      return <PunkCancelDialog state={props.state} setState={props.setState} callbackAsync={(success) => props.callbackAsync(success)}></PunkCancelDialog>\r\n    case PunkTypes.PunkDialogType.ACCEPT_BID:\r\n    case PunkTypes.PunkDialogType.ACCEPT_OFFER:\r\n      return <PunkAcceptDialog state={props.state} setState={props.setState} callbackAsync={(success) => props.callbackAsync(success)}></PunkAcceptDialog>\r\n    default:\r\n      return <></>\r\n  }\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Avatar, Button, Grid, Link, Paper, styled, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from '@mui/material';\r\nimport React, { useState } from 'react';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { ActionName, CommonConstants, CommonUtil, getLogger, PunkTypes, TokenUtil, UrlUtil } from \"vitepunks-common\";\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\r\nimport { GET_PUNK_QUERY } from '../../../../queries';\r\nimport { GetPunk, GetPunkVariables } from '../../../../queries/__generated__/GetPunk';\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { IconUtil } from '../../../../util/icon.util';\r\nimport { MomentUtil } from '../../../../util/moment.util';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\nimport { EventListLoading } from '../../../common/components/event-list-loading';\r\nimport { ExtendedBootstrapTooltip } from '../../../common/components/tooltip';\r\nimport { PunkDialog } from '../../../punk/components/dialog';\r\n\r\nconst logger = getLogger();\r\n\r\ninterface EventTableRowProps {\r\n  isAuthorized: boolean\r\n  item: PunkTypes.AccountAuction\r\n  handleClaimAsync(_item: PunkTypes.AccountAuction): Promise<void>\r\n  handleOpenDialog(_type: PunkTypes.PunkDialogType, _item: PunkTypes.Punk, _auction: PunkTypes.AccountAuction): void\r\n}\r\n\r\nconst CustomAvatar = styled(Avatar)(({ theme }) => (`\r\n  background-image: url('${ClientConstants.ITEM_BG_URL}');\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  image-rendering: pixelated;\r\n  margin-right: 10px;\r\n`));\r\n\r\nconst CustomTableCell = styled(TableCell)(({ theme }) => (`\r\n  background-color: rgba(255, 255, 255, 0.3);\r\n`));\r\n\r\nconst EventTableRow: React.FC<EventTableRowProps> = (props: EventTableRowProps) => {\r\n  const [isAnon, setIsAnon] = useState(false);\r\n  const [isOwner, setIsOwner] = useState(false);\r\n\r\n  const context = useConnectedWeb3Context();\r\n\r\n  const query = useQuery<GetPunk, GetPunkVariables>(GET_PUNK_QUERY, {\r\n    variables: {\r\n      id: props.item.punkId.toString()\r\n    },\r\n    fetchPolicy: 'network-only',\r\n    onCompleted: (data) => {\r\n      setIsAnon(CommonUtil.isNullOrWhitespace(context.account));\r\n      setIsOwner(data.punk.owner?.toLowerCase() === context.account?.toLowerCase());\r\n    }\r\n  });\r\n  const momentUtil = new MomentUtil();\r\n\r\n  const formatTimestamp = (timestamp: any) => {\r\n    return momentUtil.getLocalReverseFormatted(momentUtil.getFromUnix(timestamp));\r\n  }\r\n\r\n  const formatViteTooltip = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatViteTooltip(bn);\r\n  }\r\n\r\n  const formatVite = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatVite(bn);\r\n  }\r\n\r\n  const getEventName = (): string => {\r\n    switch (props.item.auctionType) {\r\n      case PunkTypes.AccountAuctionType.Offer:\r\n        if (!props.item.amount || props.item.amount.lte(0)) {\r\n          return ActionName.gift;\r\n        }\r\n        return ActionName.list;\r\n      case PunkTypes.AccountAuctionType.Bid:\r\n        return ActionName.bid;\r\n      default:\r\n        break;\r\n    }\r\n    return ActionName.unknown;\r\n  }\r\n\r\n  const handleClaimAsync = async () => {\r\n    if (query.data?.punk) {\r\n      await props.handleClaimAsync(props.item);\r\n    }\r\n  }\r\n\r\n  const handleOpenDialog = (_type: PunkTypes.PunkDialogType) => {\r\n    if (query.data?.punk) {\r\n      props.handleOpenDialog(_type, query.data.punk, props.item);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <TableRow sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\r\n      <TableCell component=\"th\" scope=\"row\">\r\n        <FontAwesomeIcon icon={IconUtil.getAccountAuctionTypeIcon(props.item.auctionType, props.item.amount)} /> <b>{getEventName()}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Link underline=\"hover\" component={RouterLink} to={`/punk/${props.item.punkId}`} display=\"flex\" alignItems=\"center\">\r\n          <CustomAvatar variant=\"rounded\" src={UrlUtil.getPunkUrl(query.data?.punk.image, query.data?.punk.cid)}>\r\n          </CustomAvatar>\r\n          {CommonConstants.PUNK_NAME} #{props.item.punkId}\r\n        </Link>\r\n      </TableCell>\r\n      <TableCell>\r\n        {props.item.amount?.gt(0) ? (\r\n          <>\r\n            <ExtendedBootstrapTooltip title={formatViteTooltip(props.item.amount)}>\r\n              <span>{formatVite(props.item.amount)}</span>\r\n            </ExtendedBootstrapTooltip>\r\n          </>\r\n        ) : (\r\n          <>\r\n          </>\r\n        )}\r\n      </TableCell>\r\n      <TableCell>\r\n        {formatTimestamp(props.item.timestamp.toFixed())}\r\n      </TableCell>\r\n      <TableCell align=\"right\">\r\n        {props.item.auctionType === PunkTypes.AccountAuctionType.Offer && (\r\n          <>\r\n            {isOwner || isAnon ? (\r\n              <Button size=\"small\" variant=\"outlined\" sx={{ minWidth: \"70px\" }} onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.CANCEL_OFFER) }} disabled={!props.isAuthorized}>{ActionName.cancel}</Button>\r\n            ) : (\r\n              <>\r\n                {!props.item.amount || props.item.amount.lte(0) ? (\r\n                  <ClickOnceButton size=\"small\" variant=\"outlined\" color=\"secondary\" sx={{ minWidth: \"70px\" }} callbackFn={handleClaimAsync} disabled={!props.isAuthorized}>{ActionName.claim}</ClickOnceButton>\r\n                ) : (\r\n                  <Button size=\"small\" variant=\"outlined\" sx={{ minWidth: \"70px\" }} onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.ACCEPT_OFFER) }} disabled={!props.isAuthorized}>{ActionName.buy}</Button>\r\n                )}\r\n              </>\r\n\r\n            )}\r\n          </>\r\n        )}\r\n        {props.item.auctionType === PunkTypes.AccountAuctionType.Bid && (\r\n          <>\r\n            {isOwner || isAnon ? (\r\n              <Button size=\"small\" variant=\"outlined\" sx={{ minWidth: \"70px\" }} color=\"secondary\" onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.ACCEPT_BID) }} disabled={!props.isAuthorized}>{ActionName.accept}</Button>\r\n            ) : (\r\n              <Button size=\"small\" variant=\"outlined\" sx={{ minWidth: \"70px\" }} onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.CANCEL_BID) }} disabled={!props.isAuthorized}>{ActionName.cancel}</Button>\r\n            )}\r\n          </>\r\n        )}\r\n      </TableCell>\r\n    </TableRow>\r\n  )\r\n}\r\n\r\ninterface Props {\r\n  events: PunkTypes.AccountAuction[]\r\n  newEvents: PunkTypes.AccountAuction[]\r\n  error: any\r\n  loading: boolean\r\n  hasMore: boolean\r\n  height?: number\r\n  fetchMoreDataAsync(): Promise<void>\r\n  cleanupAsync(_item: PunkTypes.AccountAuction): Promise<void>\r\n  isAuthorized: boolean\r\n}\r\n\r\nexport const AccountAuctionList: React.FC<Props> = (props: Props) => {\r\n  const [currentAuction, setCurrentAuction] = useState<PunkTypes.AccountAuction>({} as PunkTypes.AccountAuction);\r\n  const [dialogState, setDialogState] = useState<PunkTypes.PunkDialogState>({\r\n    type: PunkTypes.PunkDialogType.UNKNOWN,\r\n    open: false,\r\n    item: {} as PunkTypes.Punk\r\n  });\r\n\r\n  const service = getMarketService();\r\n  const emptyMessage = \"No active auctions\";\r\n\r\n  const handleClaimAsync = async (_item: PunkTypes.AccountAuction) => {\r\n    try {\r\n      if (_item.auctionType !== PunkTypes.AccountAuctionType.Offer) {\r\n        throw new Error(`${CommonConstants.PUNK_NAME} #${_item.punkId} cannot be claimed`);\r\n      }\r\n      const success = await service.buyAsync(_item.punkId.toString(), _item.amount.toFixed());\r\n      if (success) {\r\n        SnackbarUtil.enqueueMessage(`Congratulations! You claimed ${CommonConstants.PUNK_NAME} #${_item.punkId}`);\r\n      }\r\n    } catch (error) {\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      props.cleanupAsync(_item);\r\n    }\r\n  }\r\n\r\n  const handleOpenDialog = (_type: PunkTypes.PunkDialogType, _item: PunkTypes.Punk, _auction: PunkTypes.AccountAuction) => {\r\n    setCurrentAuction(_auction);\r\n    setDialogState({\r\n      ...dialogState,\r\n      type: _type,\r\n      open: true,\r\n      item: _item\r\n    });\r\n  }\r\n\r\n  const dialogCallbackAsync = async (_success: boolean) => {\r\n    logger.info(\"dialogCallbackAsync\", _success)();\r\n    if (_success) {\r\n      props.cleanupAsync(currentAuction);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Paper\r\n        id=\"event-list\"\r\n        style={{\r\n          height: props.height ?? 300,\r\n          overflow: 'auto',\r\n          backgroundColor: 'rgba(255, 255, 255, 0.5)'\r\n        }}\r\n      >\r\n        {props.newEvents.length > 0 || props.events.length > 0 ? (\r\n          <InfiniteScroll\r\n            dataLength={props.events.length ?? 0}\r\n            next={props.fetchMoreDataAsync}\r\n            hasMore={props.hasMore}\r\n            loader={\r\n              <Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n                <EventListLoading loading={props.loading} error={props.error} count={props.events.length} message={emptyMessage}></EventListLoading>\r\n              </Grid>\r\n            }\r\n            scrollableTarget=\"event-list\"\r\n          >\r\n            <TableContainer>\r\n              <Table stickyHeader>\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <CustomTableCell></CustomTableCell>\r\n                    <CustomTableCell><b>Punk</b></CustomTableCell>\r\n                    <CustomTableCell><b>Amount</b></CustomTableCell>\r\n                    <CustomTableCell><b>Date</b></CustomTableCell>\r\n                    <CustomTableCell align=\"right\"><b>Action</b></CustomTableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {props.newEvents.map((e: PunkTypes.AccountAuction) => (\r\n                    <EventTableRow\r\n                      key={`new-events-${e.timestamp.toFixed()}`}\r\n                      isAuthorized={props.isAuthorized}\r\n                      handleClaimAsync={handleClaimAsync}\r\n                      handleOpenDialog={handleOpenDialog}\r\n                      item={e} />\r\n                  ))}\r\n                  {props.events.map((e: PunkTypes.AccountAuction) => (\r\n                    <EventTableRow\r\n                      key={`events-${e.timestamp.toFixed()}`}\r\n                      isAuthorized={props.isAuthorized}\r\n                      handleClaimAsync={handleClaimAsync}\r\n                      handleOpenDialog={handleOpenDialog}\r\n                      item={e} />\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          </InfiniteScroll>) : (\r\n          <Grid sx={{ height: \"100%\" }} container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n            <EventListLoading loading={props.loading} error={props.error} count={props.events.length} message={emptyMessage}></EventListLoading>\r\n          </Grid>\r\n        )}\r\n      </Paper>\r\n      <PunkDialog state={dialogState} setState={setDialogState} callbackAsync={dialogCallbackAsync}></PunkDialog>\r\n    </>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport SyncIcon from '@mui/icons-material/Sync';\r\nimport { IconButton, Stack } from '@mui/material';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { CommonUtil, getEmitter, getLogger, PunkTypes, TransformUtil } from 'vitepunks-common';\r\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\r\nimport { GET_ACCOUNT_AUCTIONS_QUERY } from '../../../../queries/general';\r\nimport { GetAccountAuctions, GetAccountAuctionsVariables } from '../../../../queries/__generated__/GetAccountAuctions';\r\nimport { getGeneralService } from '../../../../services/general.service';\r\nimport { AccountAuctionList } from '../auction-list';\r\n\r\nconst logger = getLogger();\r\n\r\ninterface Props {\r\n  address: string\r\n  refetchDataAsync(): Promise<void>\r\n}\r\n\r\nexport const AccountAuctions: React.FC<Props> = (props: Props) => {\r\n  const limit = 8;\r\n  const [isAuthorized, setIsAuthorized] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [error, setError] = useState<any>(undefined);\r\n  const [cursor, setCursor] = useState<Maybe<PunkTypes.Cursor>>(undefined);\r\n  const [events, setEvents] = useState<PunkTypes.AccountAuction[]>([]);\r\n  const [newEvents, setNewEvents] = useState<PunkTypes.AccountAuction[]>([]);\r\n  const service = getGeneralService();\r\n  const emitter = getEmitter();\r\n\r\n  const context = useConnectedWeb3Context();\r\n\r\n  const query = useQuery<GetAccountAuctions, GetAccountAuctionsVariables>(GET_ACCOUNT_AUCTIONS_QUERY, {\r\n    variables: {\r\n      address: props.address,\r\n      limit: limit\r\n    },\r\n    //notifyOnNetworkStatusChange: true,\r\n    fetchPolicy: 'network-only',\r\n    //refetchWritePolicy: 'overwrite',\r\n    onCompleted: (data) => {\r\n      setCursor(data.accountAuctions.cursor);\r\n      setEvents(data.accountAuctions.auctions.map(e => TransformUtil.toAccountAuction(e)));\r\n      setHasMore(!CommonUtil.isNullOrWhitespace(data.accountAuctions.cursor?.next));\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsAuthorized(props.address?.toLowerCase() === context.account?.toLowerCase());\r\n  }, [props.address, context.account]);\r\n\r\n  useEffect(() => {\r\n    setIsLoading(query.loading);\r\n  }, [query.loading]);\r\n\r\n  useEffect(() => {\r\n    setError(query.error);\r\n  }, [query.error]);\r\n\r\n  const fetchMoreDataAsync = async () => {\r\n    logger.info(\"fetchMoreDataAsync\", events.length)();\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await service.getAccountAuctions(props.address, limit, cursor?.next);\r\n      setCursor(result.data.accountAuctions.cursor);\r\n      setHasMore(!CommonUtil.isNullOrWhitespace(result.data.accountAuctions.cursor?.next));\r\n      if (result.data.accountAuctions.auctions.length > 0) {\r\n        setEvents([\r\n          ...events,\r\n          ...result.data.accountAuctions.auctions.map(e => TransformUtil.toAccountAuction(e))\r\n        ]);\r\n      }\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const cleanupAsync = async (_item: PunkTypes.AccountAuction) => {\r\n    if (_item) {\r\n      setEvents(events.filter(e => !e.timestamp.eq(_item.timestamp)));\r\n      setNewEvents(newEvents.filter(e => !e.timestamp.eq(_item.timestamp)));\r\n    }\r\n    // Update all auctions before refetch\r\n    await service.getAccountAuctions(props.address, limit);\r\n    await props.refetchDataAsync();\r\n  }\r\n\r\n  const refetch = query.refetch;\r\n\r\n  const refresh = useCallback(() => {\r\n    logger.info(\"Refreshing account auctions\")();\r\n    refetch();\r\n  }, [refetch]);\r\n\r\n  const refreshAsync = async () => {\r\n    logger.info(\"Refreshing account auctions & data\")();\r\n    await refetch();\r\n    await props.refetchDataAsync();\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (state: PunkTypes.DocumentState) => {\r\n      if (state === PunkTypes.DocumentState.Active) {\r\n        refresh();\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    };\r\n  }, [emitter, refresh]);\r\n\r\n  const addNewEvent = useCallback((e: PunkTypes.PunkChangedEvent) => {\r\n    // TODO: check if new event is related to current address\r\n    setNewEvents([\r\n      // TransformUtil.toPunkEvent(e),\r\n      ...newEvents\r\n    ]);\r\n  }, [newEvents]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.PunkChangedEvent) => {\r\n      logger.info(\"newMarketEvent\", e)();\r\n      addNewEvent(e);\r\n    }\r\n    logger.info('emitter.on', PunkTypes.GlobalEvent.PunkChanged)();\r\n    emitter.on(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    return () => {\r\n      logger.info('emitter.off', PunkTypes.GlobalEvent.PunkChanged)();\r\n      emitter.off(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    };\r\n  }, [emitter, addNewEvent]);\r\n\r\n  return (\r\n    <>\r\n      <Stack direction=\"row\" justifyContent=\"flex-end\" alignItems=\"center\" spacing={2}>\r\n        <IconButton size=\"small\" aria-label=\"refresh\" component=\"span\" onClick={refreshAsync}>\r\n          <SyncIcon fontSize=\"small\" />\r\n        </IconButton>\r\n      </Stack>\r\n      <AccountAuctionList\r\n        events={events}\r\n        newEvents={newEvents}\r\n        error={error}\r\n        loading={isLoading}\r\n        hasMore={hasMore}\r\n        height={300}\r\n        fetchMoreDataAsync={fetchMoreDataAsync}\r\n        cleanupAsync={cleanupAsync}\r\n        isAuthorized={isAuthorized}>\r\n      </AccountAuctionList>\r\n    </>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport { Container, Grid, Typography } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { GET_PUNKS_BY_ADDRESS_QUERY } from '../../../../queries';\r\nimport { GetPunksByAddress, GetPunksByAddressVariables } from '../../../../queries/__generated__/GetPunksByAddress';\r\nimport { InfinitePunkList } from '../../../punk/components/infinite-list';\r\nimport { AccountAuctions } from '../auctions';\r\n\r\nexport const AccountDetails: React.FC = (props: any) => {\r\n  const { address } = useParams();\r\n  const limit = 8;\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [error, setError] = useState<any>(undefined);\r\n\r\n  const query = useQuery<GetPunksByAddress, GetPunksByAddressVariables>(GET_PUNKS_BY_ADDRESS_QUERY, {\r\n    variables: {\r\n      address: address ?? \"\",\r\n      offset: 0,\r\n      limit: limit\r\n    },\r\n    fetchPolicy: 'network-only',\r\n    onCompleted: (data) => {\r\n      setHasMore(data.punksByAddress.length >= limit);\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsLoading(query.loading);\r\n  }, [query.loading]);\r\n\r\n  useEffect(() => {\r\n    setError(query.error);\r\n  }, [query.error]);\r\n\r\n  const fetchMoreDataAsync = async () => {\r\n    const currentLength = query.data?.punksByAddress.length ?? 0;\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await query.fetchMore({\r\n        variables: {\r\n          offset: currentLength,\r\n          limit: limit\r\n        }\r\n      });\r\n      setHasMore(result.data.punksByAddress.length >= limit);\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const refetchDataAsync = async () => {\r\n    await query.refetch({\r\n      address: address ?? \"\",\r\n      offset: 0,\r\n      limit: limit\r\n    });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Container maxWidth=\"lg\" sx={{ marginBottom: 5 }}>\r\n        <Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12} md={9}>\r\n            <Typography variant=\"h2\" component=\"div\" textAlign=\"center\" sx={{ pt: 3 }}>\r\n              Account\r\n            </Typography>\r\n            <Typography variant=\"subtitle1\" component=\"div\" textAlign=\"center\" sx={{ wordBreak: \"break-all\" }} gutterBottom>\r\n              {address}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} md={9}>\r\n            <AccountAuctions address={address ?? \"\"} refetchDataAsync={refetchDataAsync}></AccountAuctions>\r\n          </Grid>\r\n        </Grid>\r\n      </Container>\r\n      <InfinitePunkList\r\n        items={query.data?.punksByAddress ?? []}\r\n        fetchMoreDataAsync={fetchMoreDataAsync}\r\n        error={error}\r\n        isLoading={isLoading}\r\n        hasMore={hasMore}>\r\n      </InfinitePunkList>\r\n    </>\r\n  )\r\n}\r\n","import { Button } from '@mui/material';\r\nimport confetti from 'canvas-confetti';\r\nimport React, { useCallback } from 'react';\r\nimport { getViteClient } from 'vitepunks-common';\r\nimport { getWalletManager } from '../../../../storage/wallet.storage';\r\n\r\nexport const Test = () => {\r\n  const walletManager = getWalletManager();\r\n  const viteClient = getViteClient();\r\n\r\n  const onClick = useCallback(() => {\r\n    confetti({\r\n      particleCount: 150,\r\n      spread: 60\r\n    });\r\n    const wallet = walletManager.getWallet();\r\n    if (wallet?.active) {\r\n      viteClient.receiveAllOnroadTxAsync(wallet.active);\r\n    }\r\n  }, [viteClient, walletManager]);\r\n  return (\r\n    <>\r\n      Test {process.env.REACT_APP_VERSION} {process.env.REACT_APP_EXPLORER_URL}\r\n      <Button onClick={onClick}>Test</Button>\r\n    </>\r\n  );\r\n}\r\n","import { ApolloClient, FetchPolicy, NormalizedCacheObject } from \"@apollo/client\";\r\nimport { PunkTypes, TransformUtil } from \"vitepunks-common\";\r\nimport { getApolloClient } from \"../clients/apollo.client\";\r\nimport { MINT_MUTATION } from \"../mutations\";\r\nimport { Mint } from \"../mutations/__generated__/Mint\";\r\nimport { GET_MARKET_BID_QUERY, GET_MARKET_OFFER_QUERY, GET_PUNK_EVENTS_QUERY, GET_PUNK_OWNER_QUERY, GET_PUNK_QUERY } from \"../queries\";\r\nimport { GetMarketBid, GetMarketBidVariables } from \"../queries/__generated__/GetMarketBid\";\r\nimport { GetMarketOffer, GetMarketOfferVariables } from \"../queries/__generated__/GetMarketOffer\";\r\nimport { GetPunk, GetPunkVariables } from \"../queries/__generated__/GetPunk\";\r\nimport { GetPunkEvents, GetPunkEventsVariables } from \"../queries/__generated__/GetPunkEvents\";\r\nimport { GetPunkOwner, GetPunkOwnerVariables } from \"../queries/__generated__/GetPunkOwner\";\r\n\r\nclass PunkService {\r\n  private readonly _apollo: ApolloClient<NormalizedCacheObject>;\r\n\r\n  constructor() {\r\n    this._apollo = getApolloClient();\r\n  }\r\n\r\n  getById = (_id: string, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetPunk, GetPunkVariables>({\r\n      query: GET_PUNK_QUERY,\r\n      variables: {\r\n        id: _id\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getOwnerAsync = (_id: string, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetPunkOwner, GetPunkOwnerVariables>({\r\n      query: GET_PUNK_OWNER_QUERY,\r\n      variables: {\r\n        id: _id\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getBidAsync = (_id: string, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetMarketBid, GetMarketBidVariables>({\r\n      query: GET_MARKET_BID_QUERY,\r\n      variables: {\r\n        id: _id\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getOfferAsync = (_id: string, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetMarketOffer, GetMarketOfferVariables>({\r\n      query: GET_MARKET_OFFER_QUERY,\r\n      variables: {\r\n        id: _id\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getEventsAsync = (_id: string, _offset: number, _limit: number, _height?: Maybe<string>, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetPunkEvents, GetPunkEventsVariables>({\r\n      query: GET_PUNK_EVENTS_QUERY,\r\n      variables: {\r\n        id: _id,\r\n        offset: _offset,\r\n        limit: _limit,\r\n        height: _height\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getExtendedAsync = async (_punk: PunkTypes.Punk, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    const defaultPunkExtended = {\r\n      __typename: PunkTypes.TypeNames.Punk,\r\n      id: _punk.id,\r\n      rank: _punk.rank,\r\n      image: _punk.image,\r\n      cid: _punk.cid,\r\n      attributes: _punk.attributes\r\n    };\r\n    const ownerQuery = await this.getOwnerAsync(_punk.id, _fetchPolicy);\r\n    const bidQuery = await this.getBidAsync(_punk.id, _fetchPolicy);\r\n    const offerQuery = await this.getOfferAsync(_punk.id, _fetchPolicy);\r\n\r\n    const punkExtended: PunkTypes.Punk = {\r\n      ...defaultPunkExtended,\r\n      owner: ownerQuery.data.punkOwner,\r\n      bid: TransformUtil.toMarketBid(bidQuery.data.marketBid),\r\n      offer: TransformUtil.toMarketOffer(offerQuery.data.marketOffer)\r\n    }\r\n\r\n    const error = ownerQuery.error || bidQuery.error || offerQuery.error;\r\n    const loading = ownerQuery.loading || bidQuery.loading || offerQuery.loading;\r\n\r\n    return {\r\n      punkExtended,\r\n      ownerQuery,\r\n      bidQuery,\r\n      offerQuery,\r\n      error,\r\n      loading\r\n    };\r\n  }\r\n\r\n  async mintAsync(): Promise<boolean> {\r\n    const result = await this._apollo.mutate<Mint>({\r\n      mutation: MINT_MUTATION\r\n    });\r\n    return Boolean(result.data?.mint ?? false);\r\n  }\r\n}\r\n\r\nconst service = new PunkService();\r\n\r\nexport const getPunkService = () => {\r\n  return service;\r\n}","import { styled } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { UrlUtil } from 'vitepunks-common';\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { getPunkService } from '../../../../services/punk.service';\r\n\r\nconst ImageContainer = styled('div')(\r\n  ({ theme }) => `\r\n  position: relative;\r\n  width: 80vw;\r\n  height: 80vw; \r\n  max-width: 400px;\r\n  max-height: 400px;\r\n  animation: lightning 4s ease-out infinite;\r\n`,\r\n);\r\n\r\nconst Image = styled('div')(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100%;\r\n  border: 5px solid #fff;\r\n  border-radius: 50%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  background-image: url('${ClientConstants.ITEM_BG_URL}');\r\n`,\r\n);\r\n\r\nconst Img1 = styled('div')(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  background-image: url('${ClientConstants.SAMPLE_PUNK_URL}');\r\n  border-radius: 50%;\r\n  animation: toggle 4s linear -2s infinite alternate;\r\n  image-rendering: pixelated;\r\n`,\r\n);\r\n\r\n\r\nconst Img2 = styled('img')(\r\n  ({ theme }) => `\r\n  top: 0;\r\n  left: 0;\r\n  position: fixed;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  border: 5px solid #fff;\r\n  border-radius: 50%;\r\n  visibility: hidden;\r\n  animation: toggle 4s linear 2s infinite alternate;\r\n`,\r\n);\r\n\r\ninterface Props {\r\n  punkId1?: Maybe<number>\r\n  punkId2?: Maybe<number>\r\n}\r\n\r\n\r\nexport const LandingMainImage: React.FC<Props> = (props: Props) => {\r\n  const [imageUrl1, setImageUrl1] = useState<Maybe<string>>(undefined);\r\n  const [imageUrl2, setImageUrl2] = useState<Maybe<string>>(undefined);\r\n  const service = getPunkService();\r\n\r\n  useEffect(() => {\r\n    const setImageUrlsAsync = async () => {\r\n      if (props.punkId1) {\r\n        const punk1 = await service.getById(props.punkId1.toString());\r\n        setImageUrl1(UrlUtil.getPunkUrl(punk1.data.punk.image, punk1.data.punk.cid));\r\n      }\r\n      if (props.punkId2) {\r\n        const punk2 = await service.getById(props.punkId2.toString());\r\n        setImageUrl2(UrlUtil.getPunkUrl(punk2.data.punk.image, punk2.data.punk.cid));\r\n      }\r\n    }\r\n    setImageUrlsAsync();\r\n  }, [props.punkId1, props.punkId2, service])\r\n\r\n  return (\r\n    <ImageContainer>\r\n      <Image>\r\n        <Img1 sx={{ backgroundImage: `url('${imageUrl1 ?? ClientConstants.SAMPLE_PUNK_URL}')` }} />\r\n        <Img2 sx={{ backgroundImage: `url('${imageUrl2 ?? ClientConstants.SAMPLE_PUNK_URL}')` }} />\r\n      </Image>\r\n    </ImageContainer>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { LandingMainImage } from '../../../landing/components/main-image';\r\n\r\nexport const TestImage = () => {\r\n  return (\r\n    <>\r\n      <LandingMainImage punkId1={5667} punkId2={3848}></LandingMainImage>\r\n    </>\r\n  );\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport { Container, Grid } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { getLogger, PunkTypes } from 'vitepunks-common';\r\nimport { GET_PUNKS_ALL_QUERY } from '../../../../queries';\r\nimport { GetPunksAll } from '../../../../queries/__generated__/GetPunksAll';\r\nimport { MarketplaceBrowseItem } from '../../../marketplace/components/browse-item';\r\n\r\nconst logger = getLogger();\r\n\r\nexport const TestList = () => {\r\n  const [allPunks, setAllPunks] = useState<PunkTypes.Punk[]>([]);\r\n  const [punks, setPunks] = useState<PunkTypes.Punk[]>([]);\r\n\r\n  useQuery<GetPunksAll>(GET_PUNKS_ALL_QUERY, {\r\n    fetchPolicy: 'network-only',\r\n    onCompleted: (data) => {\r\n      setAllPunks(data.punksAll);\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    const ids = new Set([\r\n      1631,\r\n      2105,\r\n      2203,\r\n      3073,\r\n      4171,\r\n      4191,\r\n      6819,\r\n      7552,\r\n      7864,\r\n      8936,\r\n      9650,\r\n      9724\r\n    ]);\r\n    let filtered = [];\r\n    for (const p of allPunks) {\r\n      if (ids.has(parseInt(p.id))) {\r\n        filtered.push(p);\r\n      }\r\n    }\r\n    filtered = filtered.reverse();\r\n    setPunks(filtered);\r\n    logger.info(filtered.length, allPunks.length)();\r\n  }, [allPunks]);\r\n\r\n  return (\r\n    <>\r\n      <Container sx={{ pb: 6 }} maxWidth=\"xl\">\r\n        <Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\" marginBottom={3}>\r\n          {punks.map((p: PunkTypes.Punk) => (\r\n            <Grid item key={p.id} xs={12} sm={6} md={4} lg={3}>\r\n              <MarketplaceBrowseItem item={p}></MarketplaceBrowseItem>\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n","import { Typography } from '@mui/material';\r\nimport React from 'react';\r\nimport { MomentUtil } from '../../../../util/moment.util';\r\n\r\ninterface Props {\r\n  date: string\r\n}\r\n\r\ntype CountdownState = {\r\n  days: number\r\n  hours: number\r\n  minutes: number\r\n  seconds: number\r\n}\r\n\r\nexport const Countdown: React.FC<Props> = (props: Props) => {\r\n  const moment = React.useMemo<MomentUtil>(() => {\r\n    return new MomentUtil();\r\n  }, []);\r\n  const duration = moment.getDuration(props.date);\r\n  const mounted = React.useRef(false);\r\n  const [state, setState] = React.useState<CountdownState>({\r\n    days: duration.days() > 0 ? duration.days() : 0,\r\n    hours: duration.hours() > 0 ? duration.hours() : 0,\r\n    minutes: duration.minutes() > 0 ? duration.minutes() : 0,\r\n    seconds: duration.seconds() > 0 ? duration.seconds() : 0\r\n  });\r\n\r\n  if (duration.asSeconds() > 0) {\r\n    setTimeout(() => {\r\n      const duration = moment.getDuration(props.date);\r\n      if (mounted.current) {\r\n        setState({\r\n          days: duration.days(),\r\n          hours: duration.hours(),\r\n          minutes: duration.minutes(),\r\n          seconds: duration.seconds()\r\n        });\r\n      }\r\n    }, 500);\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Typography variant=\"subtitle1\" color=\"textSecondary\">\r\n      <b>{state.days}</b> days <b>{state.hours}</b> hours <b>{state.minutes}</b> minutes <b>{state.seconds}</b> seconds\r\n    </Typography>\r\n  );\r\n}\r\n","import ArrowForwardIosSharpIcon from '@mui/icons-material/ArrowForwardIosSharp';\r\nimport { Accordion as MuiAccordion, AccordionDetails as MuiAccordionDetails, AccordionProps, AccordionSummary as MuiAccordionSummary, AccordionSummaryProps, Box, Link, styled, Typography } from '@mui/material';\r\nimport React from 'react';\r\n\r\nconst Accordion = styled((props: AccordionProps) => (\r\n  <MuiAccordion disableGutters elevation={0} square {...props} />\r\n))(({ theme }) => ({\r\n  border: `1px solid ${theme.palette.divider}`,\r\n  '&:not(:last-child)': {\r\n    borderBottom: 0,\r\n  },\r\n  '&:before': {\r\n    display: 'none',\r\n  },\r\n  backgroundColor:\r\n    theme.palette.mode === 'dark'\r\n      ? 'rgba(0, 0, 0, .2)'\r\n      : 'rgba(255, 255, 255, .2)',\r\n}));\r\n\r\nconst AccordionSummary = styled((props: AccordionSummaryProps) => (\r\n  <MuiAccordionSummary\r\n    expandIcon={<ArrowForwardIosSharpIcon sx={{ fontSize: '0.9rem' }} />}\r\n    {...props}\r\n  />\r\n))(({ theme }) => ({\r\n  backgroundColor:\r\n    theme.palette.mode === 'dark'\r\n      ? 'rgba(255, 255, 255, .05)'\r\n      : 'rgba(0, 0, 0, .03)',\r\n  flexDirection: 'row-reverse',\r\n  '& .MuiAccordionSummary-expandIconWrapper.Mui-expanded': {\r\n    transform: 'rotate(90deg)',\r\n  },\r\n  '& .MuiAccordionSummary-content': {\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nconst AccordionDetails = styled(MuiAccordionDetails)(({ theme }) => ({\r\n  padding: theme.spacing(2),\r\n  borderTop: '1px solid rgba(0, 0, 0, .125)',\r\n}));\r\n\r\nexport const LandingFaq = () => {\r\n  const [faqExpanded, setFaqExpanded] = React.useState<string | false>('faq0');\r\n\r\n  const handleChange = (panel: string) => (event: React.SyntheticEvent, newExpanded: boolean) => {\r\n    setFaqExpanded(newExpanded ? panel : false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" marginBottom={2}>\r\n        <div>\r\n          <Typography variant=\"h5\" color=\"textSecondary\" textAlign=\"center\">\r\n            FAQ\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\" color=\"textSecondary\" textAlign=\"center\">\r\n            Frequently Asked Questions\r\n          </Typography>\r\n        </div>\r\n      </Box>\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n        <Box maxWidth={800}>\r\n          <Accordion expanded={faqExpanded === 'faq0'} onChange={handleChange('faq0')}>\r\n            <AccordionSummary aria-controls=\"faq0-content\" id=\"faq0-header\">\r\n              <Typography>What is the vision behind VitePunks?</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                Our main vision is to develop the best possible marketplace for our punks and maybe open it to other artists at some point, depending on what other NFT marketplaces will be released on Vite in the near future.\r\n                One of our main goals is long-term availability. It is of utmost importance to us to make sure that our punks are as reliably accessible as the <Link underline=\"hover\" href=\"https://www.vite.org/\" target=\"_blank\">Vite chain</Link>.\r\n                All NFT images are stored on <Link underline=\"hover\" href=\"https://ipfs.io/\" target=\"_blank\">IPFS</Link> in addition to our own cloud storage.\r\n                <br></br>\r\n                <br></br>\r\n                The compiled version of this website can be\r\n                cloned and forked on <Link underline=\"hover\" href=\"https://github.com/vitepunks/vitepunks.github.io\" target=\"_blank\">GitHub</Link> or\r\n                accessed by this link <Link underline=\"hover\" href=\"https://vitepunks.github.io/website/\" target=\"_blank\">https://vitepunks.github.io/website/</Link>.\r\n                Everything we do is always with the intention to ensure resiliency and establish a trust relationship.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion expanded={faqExpanded === 'faq1'} onChange={handleChange('faq1')}>\r\n            <AccordionSummary aria-controls=\"faq1-content\" id=\"faq1-header\">\r\n              <Typography>Why is the smart contract not open-source yet?</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                Being pioneers in any space is always coupled with a lot of work, sometimes it gets rewarded, more often not.\r\n                We understand that the situation for some is not satisfactory right now.\r\n                What we can assure is that we will make our smart contract public as soon as another high-quality project delivers something similar to us.\r\n                Maybe this is the wrong approach but ultimately this is actually a really hard decision to make.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion expanded={faqExpanded === 'faq2'} onChange={handleChange('faq2')}>\r\n            <AccordionSummary aria-controls=\"faq2-content\" id=\"faq2-header\">\r\n              <Typography>Where can I download the Vite Wallet App?</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                The Vite App Wallet can be downloaded for <Link underline=\"hover\" href=\"https://play.google.com/store/apps/details?id=net.vite.wallet\" target=\"_blank\">Android</Link>\r\n                &nbsp;or <Link underline=\"hover\" href=\"https://apps.apple.com/ch/app/vite-multi-chain-wallet/id1437629486\" target=\"_blank\">iOS</Link>.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion expanded={faqExpanded === 'faq3'} onChange={handleChange('faq3')}>\r\n            <AccordionSummary aria-controls=\"faq3-content\" id=\"faq3-header\">\r\n              <Typography>How can I connect my wallet on my smartphone?</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                Connecting the wallet on your smartphone can be tricky because it is not possible to scan the QR code currently being displayed on your screen.\r\n                To overcome this limitation detailed instructions can be found in our <Link underline=\"hover\" href=\"https://github.com/vitepunks/resources/wiki/Connect-Wallet\" target=\"_blank\">wiki article</Link>.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion expanded={faqExpanded === 'faq4'} onChange={handleChange('faq4')}>\r\n            <AccordionSummary aria-controls=\"faq4-content\" id=\"faq4-header\">\r\n              <Typography>Is it possible to view my minted punks in my wallet?</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                Before this can be achieved, the Vite community has to agree on a commonly accepted standard.\r\n                Currently it is being worked on as a bounty started by ViteLabs. You can find it <Link underline=\"hover\" href=\"https://gitcoin.co/issue/vitelabs/bounties/18/100027282\" target=\"_blank\">here</Link>.\r\n                So in this sense we are truly similar to the original CryptoPunks project which pioneered the NFT space without having a standard at hand when released.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion expanded={faqExpanded === 'faq5'} onChange={handleChange('faq5')}>\r\n            <AccordionSummary aria-controls=\"faq5-content\" id=\"faq5-header\">\r\n              <Typography>How can I gift/transfer my punk to someone else?</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                This can be achieved by offering your punk for sale for 0 VITE to a specific address. Only this address will be able to claim the punk.\r\n                Just follow the steps described in this <Link underline=\"hover\" href=\"https://github.com/vitepunks/resources/wiki/Gifting\" target=\"_blank\">wiki article</Link>.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n        </Box>\r\n      </Box>\r\n      <Typography variant=\"subtitle1\" color=\"textSecondary\" textAlign=\"center\" marginTop={2}>\r\n        Community articles\r\n      </Typography>\r\n      <Typography variant=\"subtitle2\" color=\"textSecondary\" textAlign=\"center\">\r\n        <Link underline=\"hover\" href=\"https://medium.com/@CPCLinoCrypto/cuestionario-realizado-a-vitepunks-dd6f3e40dae8\" target=\"_blank\">[Spanish]</Link>\r\n        &nbsp;\r\n        <Link underline=\"hover\" href=\"https://medium.com/@CPCLinoCrypto/questionnaire-answered-by-vitepunk-c1a9657c20ec\" target=\"_blank\">[English]</Link>\r\n      </Typography>\r\n    </>\r\n  );\r\n}\r\n","import { Box, LinearProgress, Paper, Skeleton, Typography } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonConstants, FormatUtil } from 'vitepunks-common';\r\n\r\ninterface Props {\r\n  loading: boolean\r\n  mintsRemaining?: Maybe<number>\r\n}\r\n\r\nexport const MintsRemaining: React.FC<Props> = (props: Props) => {\r\n  const [pct, setPct] = useState(100);\r\n\r\n  useEffect(() => {\r\n    if (props.mintsRemaining && props.mintsRemaining > 0) {\r\n      const minValue = props.mintsRemaining === CommonConstants.TOTAL_MINTS ? 100 : 90;\r\n      setPct(Math.min(minValue, props.mintsRemaining / CommonConstants.TOTAL_MINTS * 100));\r\n    } else {\r\n      setPct(100);\r\n    }\r\n  }, [props.mintsRemaining]);\r\n\r\n  return (\r\n    <Paper elevation={3} sx={{ width: \"60%\", textAlign: \"center\", mb: 3 }}>\r\n      <Box sx={{ px: 2, pt: 2, pb: 1.5 }}>\r\n        {props.loading || !props.mintsRemaining ? (\r\n          <Skeleton animation=\"wave\" width=\"50%\"></Skeleton>\r\n        ) : (\r\n          <Typography variant=\"subtitle1\" color=\"textSecondary\">\r\n            <b>{FormatUtil.formatNumber(props.mintsRemaining)}</b> of {FormatUtil.formatNumber(CommonConstants.TOTAL_MINTS)} mintable\r\n          </Typography>\r\n        )}\r\n      </Box>\r\n      <LinearProgress sx={{ height: \"8px\" }} variant=\"determinate\" color={pct <= 40 ? \"error\" : \"primary\"} value={pct} />\r\n    </Paper>\r\n  );\r\n}\r\n","import { FetchPolicy, useQuery } from \"@apollo/client\";\r\nimport React from \"react\";\r\nimport { getLogger, PunkTypes, TransformUtil } from 'vitepunks-common';\r\nimport { GET_MARKET_BID_QUERY, GET_MARKET_OFFER_QUERY, GET_PUNK_OWNER_QUERY, GET_PUNK_QUERY } from \"../queries\";\r\nimport { GetMarketBid, GetMarketBidVariables } from \"../queries/__generated__/GetMarketBid\";\r\nimport { GetMarketOffer, GetMarketOfferVariables } from \"../queries/__generated__/GetMarketOffer\";\r\nimport { GetPunk, GetPunkVariables } from \"../queries/__generated__/GetPunk\";\r\nimport { GetPunkOwner, GetPunkOwnerVariables } from \"../queries/__generated__/GetPunkOwner\";\r\nimport { getPunkService } from \"../services/punk.service\";\r\n\r\nconst logger = getLogger();\r\n\r\nexport const usePunkById = (_punkId: string, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n  const query = useQuery<GetPunk, GetPunkVariables>(GET_PUNK_QUERY, {\r\n    variables: {\r\n      id: _punkId\r\n    },\r\n    notifyOnNetworkStatusChange: true,\r\n    fetchPolicy: _fetchPolicy,\r\n    refetchWritePolicy: \"overwrite\"\r\n  });\r\n\r\n  const error = query.error;\r\n  const loading = query.loading;\r\n\r\n  const punk: Maybe<PunkTypes.Punk> = query.data?.punk\r\n\r\n  return {\r\n    punk,\r\n    error,\r\n    loading,\r\n  };\r\n}\r\n\r\nexport const usePunkInfo = (_punk: PunkTypes.Punk, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n  const defaultPunkExtended = React.useMemo<PunkTypes.Punk>(() => {\r\n    return {\r\n      __typename: PunkTypes.TypeNames.Punk,\r\n      id: _punk.id,\r\n      rank: _punk.rank,\r\n      image: _punk.image,\r\n      cid: _punk.cid,\r\n      attributes: _punk.attributes\r\n    };\r\n  }, [_punk]);\r\n  const [punkExtended, setPunkExtended] = React.useState<PunkTypes.Punk>(defaultPunkExtended);\r\n  const [dateRef, setDateRef] = React.useState<Date>(new Date(0));\r\n\r\n  const ownerQuery = useQuery<GetPunkOwner, GetPunkOwnerVariables>(GET_PUNK_OWNER_QUERY, {\r\n    variables: {\r\n      id: _punk.id.toString()\r\n    },\r\n    notifyOnNetworkStatusChange: true,\r\n    fetchPolicy: _fetchPolicy,\r\n    refetchWritePolicy: \"overwrite\",\r\n    onCompleted: (data) => {\r\n      setPunkExtended({\r\n        ...punkExtended,\r\n        owner: data.punkOwner\r\n      });\r\n    }\r\n  });\r\n\r\n  const bidQuery = useQuery<GetMarketBid, GetMarketBidVariables>(GET_MARKET_BID_QUERY, {\r\n    variables: {\r\n      id: _punk.id.toString()\r\n    },\r\n    notifyOnNetworkStatusChange: true,\r\n    fetchPolicy: _fetchPolicy,\r\n    refetchWritePolicy: \"overwrite\",\r\n    onCompleted: (data) => {\r\n      setPunkExtended({\r\n        ...punkExtended,\r\n        bid: TransformUtil.toMarketBid(data.marketBid)\r\n      });\r\n    }\r\n  });\r\n\r\n  const offerQuery = useQuery<GetMarketOffer, GetMarketOfferVariables>(GET_MARKET_OFFER_QUERY, {\r\n    variables: {\r\n      id: _punk.id.toString()\r\n    },\r\n    notifyOnNetworkStatusChange: true,\r\n    fetchPolicy: _fetchPolicy,\r\n    refetchWritePolicy: \"overwrite\",\r\n    onCompleted: (data) => {\r\n      setPunkExtended({\r\n        ...punkExtended,\r\n        offer: TransformUtil.toMarketOffer(data.marketOffer)\r\n      });\r\n    }\r\n  });\r\n\r\n  const error = ownerQuery.error || bidQuery.error || offerQuery.error;\r\n  const loading = ownerQuery.loading || bidQuery.loading || offerQuery.loading;\r\n\r\n  const refetchAsync = async () => {\r\n    logger.info(\"refetchAsync\", new Date().getTime(), dateRef.getTime())();\r\n    if (new Date().getTime() >= dateRef.getTime() + 500) {\r\n      setDateRef(new Date());\r\n      let newOwner;\r\n      let newBid;\r\n      let newOffer;\r\n      try {\r\n        await Promise.all([\r\n          ownerQuery.refetch().then(e => newOwner = e.data.punkOwner),\r\n          bidQuery.refetch().then(e => newBid = e.data.marketBid),\r\n          offerQuery.refetch().then(e => newOffer = e.data.marketOffer)\r\n        ]);\r\n        logger.info(`Refetching punk ${_punk.id}`, newOwner, newBid, newOffer)();\r\n        setPunkExtended({\r\n          ...defaultPunkExtended,\r\n          owner: newOwner,\r\n          bid: newBid,\r\n          offer: newOffer\r\n        });\r\n      } catch (error) {\r\n        logger.error(error)();\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    punkExtended,\r\n    error,\r\n    loading,\r\n    refetchAsync\r\n  };\r\n}\r\n\r\nexport const usePunkInfoV2 = (_punk: PunkTypes.Punk, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n  const service = getPunkService();\r\n  const defaultPunkExtended = React.useMemo<PunkTypes.Punk>(() => {\r\n    return {\r\n      __typename: PunkTypes.TypeNames.Punk,\r\n      id: _punk.id,\r\n      rank: _punk.rank,\r\n      image: _punk.image,\r\n      cid: _punk.cid,\r\n      attributes: _punk.attributes\r\n    };\r\n  }, [_punk]);\r\n  const [punkExtended, setPunkExtended] = React.useState<PunkTypes.Punk>(defaultPunkExtended);\r\n  const [loading, setLoading] = React.useState<boolean>(true);\r\n  const [error, setError] = React.useState<Maybe<any>>(undefined);\r\n\r\n  const refetchAsync = async () => {\r\n    setLoading(true);\r\n    setError(undefined);\r\n    try {\r\n      const { punkExtended, loading, error } = await service.getExtendedAsync(_punk, _fetchPolicy);\r\n      setPunkExtended(punkExtended);\r\n      setLoading(loading);\r\n      setError(error);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setError(error);\r\n    }\r\n  }\r\n\r\n  return {\r\n    punkExtended,\r\n    loading,\r\n    error,\r\n    refetchAsync\r\n  }\r\n}\r\n\r\n","import { createTheme } from '@mui/material/styles';\r\n\r\n// A custom theme for this app\r\n// https://github.com/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\nconst theme = createTheme({\r\n  typography: {\r\n    fontFamily: [\r\n      '-apple-system',\r\n      'BlinkMacSystemFont',\r\n      '\"Segoe UI\"',\r\n      'Roboto',\r\n      '\"Helvetica Neue\"',\r\n      'Arial',\r\n      'sans-serif',\r\n      '\"Apple Color Emoji\"',\r\n      '\"Segoe UI Emoji\"',\r\n      '\"Segoe UI Symbol\"',\r\n    ].join(','),\r\n  },\r\n  palette: {\r\n    primary: {\r\n      main: '#133995',\r\n    },\r\n    secondary: {\r\n      main: '#6817ff',\r\n    }\r\n  },\r\n});\r\n\r\nexport default theme;","import { faGem } from \"@fortawesome/free-regular-svg-icons\";\r\nimport { Box, CardActionArea, Chip, LinearProgress, LinearProgressProps, Link, Paper, Skeleton, styled, Typography, useMediaQuery } from \"@mui/material\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport { orderBy } from \"lodash\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { CommonConstants, CommonUtil, ExplorerUtil, getLogger, UrlUtil } from \"vitepunks-common\";\r\nimport { ClientConstants } from \"../../../../common/constants\";\r\nimport { CommonContext, getCommonContext } from \"../../../../contexts/common.context\";\r\nimport { usePunkById } from \"../../../../hooks/punk.hook\";\r\nimport theme from \"../../../../theme\";\r\nimport { MomentUtil } from \"../../../../util/moment.util\";\r\nimport { Countdown } from \"../../../common/components/countdown\";\r\nimport { FontAwesomeSvgIcon } from \"../../../common/components/fa-icon\";\r\nimport { ExtendedBootstrapTooltip } from \"../../../common/components/tooltip\";\r\n\r\nconst logger = getLogger();\r\n\r\nconst CustomCardMedia = styled(\"div\")(({ theme }) => (`\r\n  position: relative;\r\n  height: 320px;\r\n  // animation: lightning 4s ease-out infinite;\r\n  background-image: url(\"${ClientConstants.ITEM_BG_URL}\");\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n`));\r\n\r\nconst PunkImage = styled(\"div\")(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  image-rendering: pixelated;\r\n`,\r\n);\r\n\r\ninterface LinearProgressWithLabelProps extends LinearProgressProps {\r\n  address: string\r\n  label: string\r\n}\r\n\r\nconst LinearProgressWithLabel: React.FC<LinearProgressWithLabelProps> = (props: LinearProgressWithLabelProps) => {\r\n  const matches = useMediaQuery(theme.breakpoints.up(\"md\"));\r\n  const getAddressUrl = () => {\r\n    return ExplorerUtil.getAddressUrl(props.address);\r\n  }\r\n  const truncateAddress = () => {\r\n    return CommonUtil.truncateStringInTheMiddle(props.address, 10, 5);\r\n  }\r\n  return (\r\n    <Box sx={{ width: \"100%\" }}>\r\n      <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\r\n        {matches && (\r\n          <Box sx={{ mr: 1, minWidth: \"115px\" }}>\r\n            <ExtendedBootstrapTooltip title={props.address} placement=\"bottom\" arrow>\r\n              <Link underline=\"hover\" href={getAddressUrl()} target=\"_blank\" variant=\"body2\" color=\"text.secondary\">{truncateAddress()}</Link>\r\n            </ExtendedBootstrapTooltip>\r\n          </Box>\r\n        )}\r\n        <Box sx={{ width: \"100%\", mr: 1 }}>\r\n          <LinearProgress variant=\"determinate\" sx={{ height: 5 }} {...props} />\r\n        </Box>\r\n        <Box sx={{ minWidth: 35 }}>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">{props.label}</Typography>\r\n        </Box>\r\n      </Box>\r\n      {!matches && (\r\n        <ExtendedBootstrapTooltip title={props.address} placement=\"bottom\" arrow>\r\n          <Link underline=\"hover\" variant=\"body2\" color=\"text.secondary\">{truncateAddress()}</Link>\r\n        </ExtendedBootstrapTooltip>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\ntype PunkHolder = {\r\n  address: string\r\n  total: number\r\n  rares: number\r\n}\r\n\r\nexport const LandingRanking = () => {\r\n  const mounted = React.useRef(false);\r\n  const punkId = \"6297\";\r\n  const rankThreshold = 100;\r\n  const moment = React.useMemo<MomentUtil>(() => {\r\n    return new MomentUtil();\r\n  }, []);\r\n  const context = React.useMemo<CommonContext>(() => {\r\n    return getCommonContext();\r\n  }, []);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [maxRares, setMaxRares] = useState(0);\r\n  const [ranks, setRanks] = useState<PunkHolder[]>([]);\r\n  const { punk } = usePunkById(punkId);\r\n  const date = moment.getFromUnix(1643673599);\r\n  const matches = useMediaQuery(theme.breakpoints.up(\"md\"));\r\n\r\n  useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const setRanksAsync = async () => {\r\n      const _punks = await context.datasource.getPunksAllAsync();\r\n      const _holderMap = new Map<string, PunkHolder>();\r\n      for (const p of _punks) {\r\n        if (p.owner) {\r\n          let _existing = _holderMap.get(p.owner);\r\n          if (!_existing) {\r\n            _existing = {\r\n              address: p.owner,\r\n              total: 0,\r\n              rares: 0\r\n            };\r\n          }\r\n          _existing.total++;\r\n          if (p.rank < rankThreshold) {\r\n            _existing.rares++;\r\n          }\r\n          _holderMap.set(p.owner, _existing);\r\n        }\r\n      }\r\n\r\n      const _holders: PunkHolder[] = [];\r\n      let _maxRares = 0;\r\n      _holderMap.forEach((value: PunkHolder, key: string) => {\r\n        if (value.rares > 0) {\r\n          _holders.push(value);\r\n          if (value.rares > _maxRares) {\r\n            _maxRares = value.rares;\r\n          }\r\n        }\r\n      });\r\n      logger.info(\"_holderMap.size\", _holderMap.size, \"holders.length\", _holders.length)();\r\n\r\n      const _holdersOrdered = orderBy(\r\n        _holders,\r\n        [\r\n          (h: PunkHolder) => h.rares,\r\n          (h: PunkHolder) => h.total\r\n        ],\r\n        [\r\n          \"desc\",\r\n          \"desc\"\r\n        ]\r\n      );\r\n\r\n      if (mounted) {\r\n        setMaxRares(_maxRares);\r\n        setRanks(_holdersOrdered.splice(0, Math.min(7, _holdersOrdered.length)));\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n    setIsLoading(true);\r\n    setTimeout(() => {\r\n      setRanksAsync();\r\n    }, 2000);\r\n  }, [context.datasource]);\r\n\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n      <Box maxWidth={900}>\r\n        <Paper\r\n          style={{\r\n            backgroundColor: \"rgba(255, 255, 255, 0.5)\"\r\n          }}\r\n        >\r\n          <Box sx={{ display: matches ? \"flex\" : \"inherit\", px: 2, pt: 2, pb: 2, width: \"100%\" }}>\r\n            <Card sx={{ minWidth: matches ? \"350px\" : \"100%\" }}>\r\n              <CardActionArea component={RouterLink} to={`/punk/${punkId}`} target=\"_blank\">\r\n                <CustomCardMedia>\r\n                  <Box sx={{ position: \"absolute\", top: 5, right: 5 }}>\r\n                    <ExtendedBootstrapTooltip title={<span>Rarity rank</span>} placement=\"bottom\" arrow>\r\n                      <Chip size=\"small\" icon={<FontAwesomeSvgIcon icon={faGem} sx={{ fontSize: \"small\", ml: 1 }} />} sx={{ fontSize: \"0.7rem\" }} label={punk?.rank} />\r\n                    </ExtendedBootstrapTooltip>\r\n                  </Box>\r\n                  <PunkImage sx={{ backgroundImage: `url(\"${UrlUtil.getPunkUrl(punk?.image, punk?.cid)}\")` }} />\r\n                </CustomCardMedia>\r\n                <CardContent sx={{ p: 0 }}>\r\n                  <Typography variant=\"h6\" component=\"div\" sx={{ p: 1 }}>\r\n                    {CommonConstants.PUNK_NAME} #{punkId}\r\n                  </Typography>\r\n                  <Box sx={{ height: \"70px\", overflow: \"auto\" }}>\r\n                    <Box sx={{ p: 1 }}>\r\n                      {punk?.attributes?.map((a: string) => (\r\n                        <Chip key={a} label={a} variant=\"outlined\" sx={{ mb: 1, mr: 1 }} size=\"small\" />\r\n                      ))}\r\n                    </Box>\r\n                  </Box>\r\n                </CardContent>\r\n              </CardActionArea>\r\n            </Card>\r\n            <Box sx={{ flexGrow: 1, ml: matches ? 2 : 0, mt: matches ? 0 : 2 }}>\r\n              <Typography variant=\"h6\" paragraph> Rarity contest</Typography>\r\n              The address owning the most rare punks below rank {rankThreshold} when the contest ends will be\r\n              awarded <Link underline=\"hover\" component={RouterLink} to={`/punk/${punkId}`} target=\"_blank\">{CommonConstants.PUNK_NAME} #{punkId}</Link> with\r\n              rarity rank <Chip size=\"small\" label={punk?.rank} />\r\n              <br></br>\r\n              In case 2 or more addresses own the same amount of rare punks, the address with overall more punks will be awarded.\r\n              <Box sx={{ mt: 3 }}>\r\n                {isLoading ? (\r\n                  <>\r\n                    <Skeleton animation=\"wave\"></Skeleton>\r\n                    <Skeleton animation=\"wave\" sx={{ mt: 0.5 }}></Skeleton>\r\n                    <Skeleton animation=\"wave\" sx={{ mt: 0.5 }}></Skeleton>\r\n                    <Skeleton animation=\"wave\" sx={{ mt: 0.5 }}></Skeleton>\r\n                    <Skeleton animation=\"wave\" sx={{ mt: 0.5 }}></Skeleton>\r\n                    <Skeleton animation=\"wave\" sx={{ mt: 0.5 }}></Skeleton>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    {ranks.map((e: PunkHolder) => (\r\n                      <LinearProgressWithLabel key={e.address} value={e.rares / maxRares * 100} label={e.rares.toString()} address={e.address}></LinearProgressWithLabel>\r\n                    ))}\r\n                  </>\r\n                )}\r\n              </Box>\r\n              <Paper elevation={3} sx={{ p: 2, textAlign: \"center\", mt: 3 }}>\r\n                <Countdown date={date.toISOString()}></Countdown>\r\n              </Paper>\r\n            </Box>\r\n          </Box>\r\n        </Paper>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport { faDiscord, faGithub, faTwitter } from '@fortawesome/free-brands-svg-icons';\r\nimport { Box, Button, Container, Grid, IconButton, Link, Paper, Stack, Typography } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { CommonConstants, getEmitter, getLogger, PunkTypes, TokenUtil } from 'vitepunks-common';\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { GET_MARKET_INFO_QUERY } from '../../../../queries';\r\nimport { GetMarketInfo } from '../../../../queries/__generated__/GetMarketInfo';\r\nimport { getPunkService } from '../../../../services/punk.service';\r\nimport { MomentUtil } from '../../../../util/moment.util';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\nimport { Countdown } from '../../../common/components/countdown';\r\nimport { FontAwesomeSvgIcon } from '../../../common/components/fa-icon';\r\nimport { LandingFaq } from '../faq';\r\nimport { MintsRemaining } from '../mints-remaining';\r\nimport { LandingRanking } from '../ranking';\r\n\r\nconst logger = getLogger();\r\n\r\nexport const LandingMain = () => {\r\n  const moment = React.useMemo<MomentUtil>(() => {\r\n    return new MomentUtil();\r\n  }, []);\r\n  const date = moment.getLocal(\"2021-12-21T17:00:00+0000\");\r\n\r\n  const mounted = React.useRef(false);\r\n  const [mintPrice, setMintPrice] = useState<PunkTypes.DisplayBigNumber>({\r\n    number: new PunkTypes.BigNumberWrapper(\"0\"),\r\n    displayNumber: \"0\"\r\n  });\r\n  const [marketStarted, setMarketStarted] = useState(false);\r\n  const [canMint, setCanMint] = useState(false);\r\n  const [mintsRemaining, setMintsRemaining] = useState<Maybe<number>>(undefined);\r\n  const emitter = getEmitter();\r\n  const punkService = getPunkService();\r\n\r\n  const query = useQuery<GetMarketInfo>(GET_MARKET_INFO_QUERY, {\r\n    fetchPolicy: 'network-only'\r\n  });\r\n\r\n  const refetch = query.refetch;\r\n\r\n  useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (state: PunkTypes.DocumentState) => {\r\n      if (state === PunkTypes.DocumentState.Active) {\r\n        logger.info(\"Refreshing market info\")();\r\n        refetch();\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    };\r\n  }, [emitter, refetch]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.MarketChangedEvent) => {\r\n      logger.info(`eventType: ${e.eventType} amount: ${e.value.toFixed()} timestamp: ${e.timestamp.toFixed()}`)();\r\n      refetch();\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.MarketChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.MarketChanged, handleEvent);\r\n    };\r\n  }, [emitter, refetch]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.PunkChangedEvent) => {\r\n      logger.info(`eventType: ${e.eventType} punkId: ${e.punkId} amount: ${e.amount?.toFixed()} fromAddress: ${e.fromAddress} toAddress: ${e.toAddress} timestamp: ${e.timestamp.toFixed()}`)();\r\n      refetch();\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.PunkChanged, handleEvent)\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    };\r\n  }, [emitter, refetch]);\r\n\r\n  useEffect(() => {\r\n    const info = query.data?.marketInfo;\r\n    if (info && mounted.current) {\r\n      setMintPrice({\r\n        number: new PunkTypes.BigNumberWrapper(info.mintPrice),\r\n        displayNumber: TokenUtil.formatVite(new PunkTypes.BigNumberWrapper(info.mintPrice))\r\n      });\r\n      setMarketStarted(info.marketStarted);\r\n      setCanMint(info.marketStarted && info.mintsRemaining > 0);\r\n      setMintsRemaining(info.mintsRemaining);\r\n    }\r\n  }, [query.data]);\r\n\r\n  const handleMintAsync = async () => {\r\n    try {\r\n      const result = await punkService.mintAsync();\r\n      if (result) {\r\n        SnackbarUtil.enqueueMessage(\"Mint success\");\r\n      } else {\r\n        SnackbarUtil.enqueueError(\"Mint failed\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(error)();\r\n      SnackbarUtil.enqueueError(error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"lg\" sx={{ mt: 10 }}>\r\n      <Grid container spacing={3} direction=\"row\" justifyContent=\"center\" alignItems=\"center\" marginBottom={3}>\r\n        <Grid item sm={12} md={6}>\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <div>\r\n              <Typography variant=\"h3\" color=\"primary\">\r\n                {ClientConstants.APP_NAME}\r\n              </Typography>\r\n              <Typography variant=\"subtitle1\" color=\"textSecondary\" paragraph>\r\n                The very first NFT collection powered by <Link underline=\"hover\" href=\"https://www.vite.org/\" target=\"_blank\">Vite chain</Link>. Now is your chance to make Vite history and become owner of an isometric punk.\r\n                Get yourself ready for the metaverse.\r\n                {!marketStarted ? (\r\n                  <>\r\n                    &nbsp;Minting will open in:\r\n                  </>\r\n\r\n                ) : (\r\n                  <>\r\n                    &nbsp;Mint a punk for {mintPrice.displayNumber} {CommonConstants.CURRENCY_NAME} now!\r\n                  </>\r\n                )}\r\n              </Typography>\r\n              {!marketStarted ? (\r\n                <Paper elevation={3} sx={{ p: 2, width: \"60%\", textAlign: \"center\", mb: 3 }}>\r\n                  <Countdown date={date.toISOString()}></Countdown>\r\n                </Paper>\r\n              ) : (\r\n                <MintsRemaining loading={query.loading} mintsRemaining={mintsRemaining}></MintsRemaining>\r\n              )}\r\n              <Stack spacing={2} direction=\"row\">\r\n                <ClickOnceButton variant=\"contained\" color=\"primary\" callbackFn={handleMintAsync} sx={{ minWidth: \"100px\" }} disabled={!canMint}>\r\n                  Mint\r\n                </ClickOnceButton>\r\n                <Button variant=\"outlined\" color=\"primary\" component={RouterLink} to='/marketplace'>\r\n                  Browse\r\n                </Button>\r\n              </Stack>\r\n            </div>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item sm={12} md={6}>\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            {/* <LandingMainImage></LandingMainImage> */}\r\n            <video width=\"100%\" preload='' autoPlay muted playsInline loop style={{ opacity: \"0.8\" }}>\r\n              <source src={CommonConstants.CDN_URL + 'videos/landing_640x360_2.mp4'} type=\"video/mp4\"></source>\r\n            </video>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} marginTop={10}>\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Typography variant=\"subtitle1\" color=\"textSecondary\">\r\n              Connect with us\r\n            </Typography>\r\n          </Box>\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Stack spacing={2} direction=\"row\">\r\n              <IconButton aria-label=\"Twitter\" href={ClientConstants.TWITTER_URL} target=\"_blank\">\r\n                <FontAwesomeSvgIcon icon={faTwitter} />\r\n              </IconButton>\r\n              <IconButton aria-label=\"GitHub\" href={ClientConstants.GITHUB_URL} target=\"_blank\">\r\n                <FontAwesomeSvgIcon icon={faGithub} />\r\n              </IconButton>\r\n              <IconButton aria-label=\"Discord\" href={ClientConstants.DISCORD_URL} target=\"_blank\">\r\n                <FontAwesomeSvgIcon icon={faDiscord} />\r\n              </IconButton>\r\n            </Stack>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} marginTop={10}>\r\n          <LandingRanking></LandingRanking>\r\n        </Grid>\r\n        <Grid item xs={12} marginTop={10}>\r\n          <LandingFaq></LandingFaq>\r\n        </Grid>\r\n        <Grid item xs={12} marginTop={2}>\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Box maxWidth={800}>\r\n              <img width=\"100%\" alt=\"main\" src={ClientConstants.LANDING_IMAGE_URL}></img>\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} marginTop={1}>\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <div>\r\n              <Typography variant=\"h5\" color=\"textSecondary\" textAlign=\"center\" paragraph>\r\n                Disclaimer\r\n              </Typography>\r\n              <Typography variant=\"subtitle1\" color=\"textSecondary\" textAlign=\"center\" paragraph>\r\n                The intention of {ClientConstants.APP_NAME} is to showcase the capabilities of\r\n                the <Link underline=\"hover\" href=\"https://www.vite.org/\" target=\"_blank\">Vite chain</Link>. {ClientConstants.APP_NAME} is not affiliated with CryptoPunks and LarvaLabs.\r\n                The value of a {CommonConstants.PUNK_NAME} is not related to the value of a CryptoPunk. {ClientConstants.APP_NAME} is a homage to the CryptoPunk project of LarvaLabs.\r\n                With {ClientConstants.APP_NAME} we thank LarvaLabs for their pioneering and for creating the CryptoPunk project. The project that basically started the ever growing NFT movement.\r\n\r\n                {marketStarted && mintPrice.number.gt(0) && (\r\n                  <>\r\n                    &nbsp;Why mint for {mintPrice.displayNumber} {CommonConstants.CURRENCY_NAME}?\r\n                    The minting of {ClientConstants.APP_NAME} is set at {mintPrice.displayNumber} {CommonConstants.CURRENCY_NAME}.\r\n                    This means that during the initial minting phase, you will be able to generate a random punk for {mintPrice.displayNumber} {CommonConstants.CURRENCY_NAME}.\r\n                    When all 10,000 Punks are minted, you can get a Punk by using the marketplace.\r\n\r\n                    That the minting is set at {mintPrice.displayNumber} {CommonConstants.CURRENCY_NAME} has a couple of reasons. As you know, keeping up, maintaining and further developing a system costs money.\r\n                    We want to keep {ClientConstants.APP_NAME} running for years to come and we hope to integrate {ClientConstants.APP_NAME} with other NFT marketplaces in the near future.\r\n                  </>\r\n                )}\r\n              </Typography>\r\n            </div>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Container >\r\n  );\r\n}\r\n","import { ecLevel, modes, qrcode } from 'qrcode.es';\r\nimport React, { useEffect, useRef } from 'react';\r\n\r\ninterface Props {\r\n  text?: string\r\n}\r\n\r\nexport const QrCode: React.FC<Props> = (props: Props) => {\r\n  const elementRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const defaultOpt = {\r\n      size: 240,\r\n      ecLevel: ecLevel.HIGH,\r\n      minVersion: 4,\r\n      background: '#fff',\r\n      mode: modes.DRAW_WITH_IMAGE_BOX,\r\n      radius: 0,\r\n      image: process.env.PUBLIC_URL + '/assets/images/logo640.png',\r\n      mSize: 0.3\r\n    };\r\n\r\n    if (props.text && elementRef.current) {\r\n      defaultOpt.size = Math.min(240, elementRef.current.clientWidth - 10);\r\n      elementRef.current.innerHTML = ''\r\n      const q = new qrcode(elementRef.current);\r\n      q.generate(props.text, defaultOpt).then(() => {\r\n        console.log('QR code generated')\r\n      });\r\n    }\r\n  }, [props.text])\r\n\r\n  return (\r\n    <div ref={elementRef}></div>\r\n  );\r\n}\r\n","import { Button, Dialog, DialogContent, DialogContentText, DialogTitle, FormControl, Input, InputLabel, Link, Typography } from '@mui/material';\r\nimport { Box } from '@mui/system';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonUtil, getEmitter, getLogger, PunkTypes, WalletConnectorFactory } from 'vitepunks-common';\r\nimport { getClientConfig } from '../../../../common/config';\r\nimport { getCommonContext } from '../../../../contexts/common.context';\r\nimport { getWalletManager } from '../../../../storage/wallet.storage';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\nimport { QrCode } from '../qrcode';\r\n\r\nconst logger = getLogger();\r\n\r\ninterface Props {\r\n  open: boolean;\r\n  setOpen: React.Dispatch<React.SetStateAction<boolean>>;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const LoginDialog: React.FC<Props> = (props: Props) => {\r\n  const [uri, setUri] = useState<string>(\"\");\r\n  const [error, setError] = useState(false);\r\n  const [mnemonic, setMnemonic] = useState<Maybe<string>>(undefined);\r\n  const { onClose, open, setOpen } = props;\r\n  const context = getCommonContext();\r\n  const walletManager = getWalletManager();\r\n  const emitter = getEmitter();\r\n  const connectorFactory = React.useMemo<WalletConnectorFactory>(() => {\r\n    return new WalletConnectorFactory(walletManager);\r\n  }, [walletManager]);\r\n  const handleCreateSession = React.useCallback(async () => {\r\n    try {\r\n      const connector = await connectorFactory.createAsync(context.network);\r\n      logger.info(connector.uri)();\r\n      setUri(connector.uri);\r\n      setError(false);\r\n    } catch (error) {\r\n      logger.error(error)();\r\n      setError(true);\r\n    }\r\n  }, [connectorFactory, context.network]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (open: boolean) => {\r\n      setOpen(open)\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.ConnectWalletDialog, handleEvent)\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.ConnectWalletDialog, handleEvent)\r\n      setUri(\"\");\r\n      setError(false);\r\n    };\r\n  }, [emitter, setOpen]);\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      setMnemonic(undefined);\r\n      handleCreateSession();\r\n    }\r\n  }, [open, handleCreateSession]);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n  };\r\n\r\n  const handleMnemonicChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setMnemonic(event.target.value);\r\n  };\r\n\r\n  const handleLogin = () => {\r\n    const wallet = walletManager.createWebWallet(CommonUtil.isNullOrWhitespace(mnemonic) ? process.env.REACT_APP_MNEMONIC ?? \"\" : mnemonic ?? \"\");\r\n    if (!wallet) {\r\n      SnackbarUtil.enqueueError('Invalid mnemonic');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={open} maxWidth=\"xs\">\r\n      <DialogTitle>Connect Wallet</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          Scan the QR code via Vite Wallet App\r\n        </DialogContentText>\r\n        <Box sx={{ mt: 2, textAlign: \"center\" }}>\r\n          {CommonUtil.isNullOrWhitespace(uri) ? (\r\n            <>\r\n              {error ? (\r\n                <>\r\n                  <Typography gutterBottom>Error</Typography>\r\n                  <ClickOnceButton variant=\"outlined\" callbackFn={handleCreateSession}>Retry</ClickOnceButton>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  Loading...\r\n                </>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <QrCode text={uri}></QrCode>\r\n          )}\r\n          <DialogContentText marginTop={1}>\r\n            Don't have the Vite Wallet App? <Link underline=\"hover\" href=\"https://vite.org/airdrop\" target=\"_blank\">Download here</Link>\r\n          </DialogContentText>\r\n        </Box>\r\n        {getClientConfig().ENABLE_MNEMONIC_LOGIN && (\r\n          <Box sx={{ mt: 2, textAlign: \"center\" }}>\r\n            <FormControl fullWidth variant=\"standard\" >\r\n              <InputLabel htmlFor=\"mnemonic\">Mnemonic</InputLabel>\r\n              <Input\r\n                id=\"mnemonic\"\r\n                value={mnemonic}\r\n                onChange={handleMnemonicChange}\r\n                type=\"text\"\r\n                autoComplete=\"new-password\"\r\n              />\r\n            </FormControl>\r\n            <Button variant=\"contained\" sx={{ mt: 1 }} onClick={handleLogin}>Use test account</Button>\r\n          </Box>\r\n        )}\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n","import AccountCircleTwoToneIcon from '@mui/icons-material/AccountCircleTwoTone';\r\nimport LogoutIcon from '@mui/icons-material/Logout';\r\nimport ShoppingCartIcon from '@mui/icons-material/ShoppingCart';\r\nimport { AppBar, Button, Chip, styled, Toolbar, Typography, useMediaQuery, useTheme } from '@mui/material';\r\nimport React from 'react';\r\nimport { Link as RouterLink, useNavigate } from 'react-router-dom';\r\nimport { CommonUtil } from \"vitepunks-common\";\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\r\nimport { ExtendedBootstrapTooltip } from '../../../common/components/tooltip';\r\nimport { LoginDialog } from '../../../main/components/login';\r\n\r\nconst Root = styled('div')(\r\n  ({ theme }) => `\r\n  flex-grow: 1;\r\n`);\r\n\r\nconst TitleTypography = styled(Typography)(\r\n  ({ theme }) => `\r\n  flex-grow: 1;\r\n  margin-left: 10px !important;\r\n`);\r\n\r\nexport const Header: React.FC = (props: any) => {\r\n  const navigate = useNavigate();\r\n  const theme = useTheme();\r\n  const matches = useMediaQuery(theme.breakpoints.up('sm'));\r\n  const context = useConnectedWeb3Context();\r\n  const [loginOpen, setLoginOpen] = React.useState(false);\r\n\r\n  const handleClickLogin = () => {\r\n    setLoginOpen(true);\r\n  };\r\n\r\n  const handleClickLogout = () => {\r\n    context.logout();\r\n  };\r\n\r\n  const handleLoginClose = () => {\r\n    setLoginOpen(false);\r\n  };\r\n\r\n  const truncateAddress = (address?: string) => {\r\n    return CommonUtil.truncateStringInTheMiddle(address, 10, 5)\r\n  }\r\n\r\n  const showAccount = () => {\r\n    navigate(`/account/${context.account}`);\r\n  }\r\n\r\n  return (\r\n    <Root>\r\n      <AppBar position=\"static\" color=\"transparent\">\r\n        <Toolbar>\r\n          <a href=\"./\" style={{ height: \"40px\" }}>\r\n            <img src={\"./assets/images/logo640.png\"} alt=\"logo\" width=\"40\" />\r\n          </a>\r\n          <TitleTypography variant=\"h6\" color=\"#fff\">\r\n            <a href=\"./\" style={{ color: \"inherit\", textDecoration: \"inherit\" }}>\r\n              {ClientConstants.APP_NAME}\r\n            </a>\r\n          </TitleTypography>\r\n          <Button sx={{ mr: 2 }} component={RouterLink} to='/marketplace'>\r\n            {matches ? (\r\n              <>\r\n                Marketplace\r\n              </>\r\n            ) : (\r\n              <ShoppingCartIcon />\r\n            )}\r\n          </Button>\r\n          {context.account ? (\r\n            <>\r\n              <ExtendedBootstrapTooltip sx={{ mr: 1 }} title={\r\n                <React.Fragment>\r\n                  <p>{context.account}</p>\r\n                </React.Fragment>\r\n              } placement=\"bottom\" arrow>\r\n                {matches ? (\r\n                  <Chip icon={<AccountCircleTwoToneIcon />} label={truncateAddress(context.account)} variant=\"outlined\" onClick={showAccount} />\r\n                ) : (\r\n                  <Button color=\"inherit\" onClick={showAccount}>\r\n                    <AccountCircleTwoToneIcon />\r\n                  </Button>\r\n                )}\r\n              </ExtendedBootstrapTooltip>\r\n              <Button color=\"inherit\" onClick={handleClickLogout}>\r\n                <LogoutIcon />\r\n              </Button>\r\n            </>\r\n          ) : (\r\n            <Button variant=\"contained\" color=\"primary\" onClick={handleClickLogin}>\r\n              Connect wallet\r\n            </Button>\r\n          )}\r\n          <LoginDialog open={loginOpen} setOpen={setLoginOpen} onClose={handleLoginClose}></LoginDialog>\r\n        </Toolbar>\r\n      </AppBar >\r\n    </Root >\r\n  )\r\n}","import { useQuery } from '@apollo/client';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Avatar, Grid, Link, Paper, styled, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from '@mui/material';\r\nimport React from 'react';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { ActionName, CommonConstants, CommonUtil, PunkEventTypes, PunkTypes, TokenUtil, UrlUtil } from \"vitepunks-common\";\r\nimport { getClientConfig } from '../../../../common/config';\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { GET_PUNK_QUERY } from '../../../../queries';\r\nimport { GetPunk, GetPunkVariables } from '../../../../queries/__generated__/GetPunk';\r\nimport { IconUtil } from '../../../../util/icon.util';\r\nimport { MomentUtil } from '../../../../util/moment.util';\r\nimport { EventListLoading } from '../event-list-loading';\r\nimport { ExplorerLink, ExplorerLinkType } from '../explorer-link';\r\nimport { ExtendedBootstrapTooltip } from '../tooltip';\r\n\r\ninterface EventTableRowProps {\r\n  item: PunkTypes.PunkEvent\r\n}\r\n\r\nconst CustomAvatar = styled(Avatar)(({ theme }) => (`\r\n  background-image: url('${ClientConstants.ITEM_BG_URL}');\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  image-rendering: pixelated;\r\n  margin-right: 10px;\r\n`));\r\n\r\nconst CustomTableCell = styled(TableCell)(({ theme }) => (`\r\n  background-color: rgba(255, 255, 255, 0.3);\r\n`));\r\n\r\nconst EventTableRow: React.FC<EventTableRowProps> = (props: EventTableRowProps) => {\r\n  const query = useQuery<GetPunk, GetPunkVariables>(GET_PUNK_QUERY, {\r\n    variables: {\r\n      id: props.item.punkId.toString()\r\n    },\r\n    fetchPolicy: 'network-only'\r\n  });\r\n  const momentUtil = new MomentUtil();\r\n\r\n  const formatTimestamp = (timestamp: any) => {\r\n    return momentUtil.getLocalReverseFormatted(momentUtil.getFromUnix(timestamp));\r\n  }\r\n\r\n  const formatViteTooltip = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatViteTooltip(bn);\r\n  }\r\n\r\n  const formatVite = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatVite(bn);\r\n  }\r\n\r\n  const isPreMint = () => {\r\n    const clientConfig = getClientConfig();\r\n    if (props.item.eventType !== PunkTypes.PunkEventType.Mint || !clientConfig.PRE_MINT_HEIGHT) {\r\n      return false;\r\n    }\r\n    return props.item.accountBlockHeight.lte(clientConfig.PRE_MINT_HEIGHT);\r\n  }\r\n\r\n  const getEventName = (): string => {\r\n    const eventType = props.item.eventType as PunkTypes.PunkEventType;\r\n    switch (eventType) {\r\n      case PunkTypes.PunkEventType.Offer:\r\n        if (!props.item.amount || props.item.amount.lte(0)) {\r\n          return ActionName.gift;\r\n        }\r\n        break;\r\n      case PunkTypes.PunkEventType.Buy:\r\n        if (!props.item.amount || props.item.amount.lte(0)) {\r\n          return ActionName.transfer;\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return PunkEventTypes[props.item.eventType].name;\r\n  }\r\n\r\n  return (\r\n    <TableRow sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\r\n      <TableCell component=\"th\" scope=\"row\">\r\n        <FontAwesomeIcon icon={IconUtil.getPunkEventTypeIcon(props.item.eventType as PunkTypes.PunkEventType, props.item.amount)} /> <b>{getEventName()}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Link underline=\"hover\" component={RouterLink} to={`/punk/${props.item.punkId}`} display=\"flex\" alignItems=\"center\">\r\n          <CustomAvatar variant=\"rounded\" src={UrlUtil.getPunkUrl(query.data?.punk.image, query.data?.punk.cid)}>\r\n          </CustomAvatar>\r\n          {CommonConstants.PUNK_NAME} #{props.item.punkId}\r\n        </Link>\r\n      </TableCell>\r\n      <TableCell>\r\n        {props.item.amount?.gt(0) ? (\r\n          <>\r\n            <ExtendedBootstrapTooltip title={formatViteTooltip(props.item.amount)}>\r\n              <span>{formatVite(props.item.amount)}</span>\r\n            </ExtendedBootstrapTooltip>\r\n          </>\r\n        ) : (\r\n          <>\r\n          </>\r\n        )}\r\n      </TableCell>\r\n      <TableCell>\r\n        <ExplorerLink type={ExplorerLinkType.Address} value={props.item.fromAddress}>\r\n          <ExtendedBootstrapTooltip title={props.item.fromAddress ?? \"\"}>\r\n            <span>{CommonUtil.truncateStringInTheMiddle(props.item.fromAddress, 10, 5)}</span>\r\n          </ExtendedBootstrapTooltip>\r\n        </ExplorerLink>\r\n      </TableCell>\r\n      <TableCell>\r\n        <ExplorerLink type={ExplorerLinkType.Address} value={props.item.toAddress}>\r\n          <ExtendedBootstrapTooltip title={props.item.toAddress ?? \"\"}>\r\n            <span>{CommonUtil.truncateStringInTheMiddle(props.item.toAddress, 10, 5)}</span>\r\n          </ExtendedBootstrapTooltip>\r\n        </ExplorerLink>\r\n      </TableCell>\r\n      <TableCell align=\"right\">\r\n        {isPreMint() ? (\r\n          <>\r\n            {formatTimestamp(props.item.timestamp.toFixed())}\r\n          </>\r\n        ) : (\r\n          <ExplorerLink type={ExplorerLinkType.Transaction} value={props.item.accountBlockHash}>\r\n            {formatTimestamp(props.item.timestamp.toFixed())}\r\n          </ExplorerLink>\r\n        )}\r\n      </TableCell>\r\n    </TableRow>\r\n  )\r\n}\r\n\r\ninterface Props {\r\n  events: PunkTypes.PunkEvent[]\r\n  newEvents: PunkTypes.PunkEvent[]\r\n  error: any\r\n  loading: boolean\r\n  hasMore: boolean\r\n  height?: number\r\n  fetchMoreDataAsync(): Promise<void>\r\n}\r\n\r\nexport const EventList: React.FC<Props> = (props: Props) => {\r\n  const emptyMessage = \"No activity yet\";\r\n  return (\r\n    <Paper\r\n      id=\"event-list\"\r\n      style={{\r\n        height: props.height ?? 300,\r\n        overflow: 'auto',\r\n        backgroundColor: 'rgba(255, 255, 255, 0.5)'\r\n      }}\r\n    >\r\n      {props.newEvents.length > 0 || props.events.length > 0 ? (\r\n        <InfiniteScroll\r\n          dataLength={props.events.length ?? 0}\r\n          next={props.fetchMoreDataAsync}\r\n          hasMore={props.hasMore}\r\n          loader={\r\n            <Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n              <EventListLoading loading={props.loading} error={props.error} count={props.events.length} message={emptyMessage}></EventListLoading>\r\n            </Grid>\r\n          }\r\n          scrollableTarget=\"event-list\"\r\n        >\r\n          <TableContainer>\r\n            <Table stickyHeader>\r\n              <TableHead>\r\n                <TableRow>\r\n                  <CustomTableCell></CustomTableCell>\r\n                  <CustomTableCell><b>Punk</b></CustomTableCell>\r\n                  <CustomTableCell><b>Amount</b></CustomTableCell>\r\n                  <CustomTableCell><b>From</b></CustomTableCell>\r\n                  <CustomTableCell><b>To</b></CustomTableCell>\r\n                  <CustomTableCell align=\"right\"><b>Date</b></CustomTableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {props.newEvents.map((e: PunkTypes.PunkEvent) => (\r\n                  <EventTableRow key={`new-events-${e.id}`} item={e} />\r\n                ))}\r\n                {props.events.map((e: PunkTypes.PunkEvent) => (\r\n                  <EventTableRow key={`events-${e.id}`} item={e} />\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </InfiniteScroll>) : (\r\n        <Grid sx={{ height: \"100%\" }} container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n          <EventListLoading loading={props.loading} error={props.error} count={props.events.length} message={emptyMessage}></EventListLoading>\r\n        </Grid>\r\n      )}\r\n    </Paper>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { getEmitter, getLogger, PunkTypes, TransformUtil } from 'vitepunks-common';\r\nimport { GET_MARKET_EVENTS_QUERY } from '../../../../queries';\r\nimport { GetMarketEvents, GetMarketEventsVariables } from '../../../../queries/__generated__/GetMarketEvents';\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { EventList } from '../../../common/components/event-list';\r\n\r\nconst logger = getLogger();\r\n\r\nexport const MarketplaceBrowseActivity: React.FC = (props: any) => {\r\n  const limit = 8;\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [error, setError] = useState<any>(undefined);\r\n  const [events, setEvents] = useState<PunkTypes.PunkEvent[]>([]);\r\n  const [newEvents, setNewEvents] = useState<PunkTypes.PunkEvent[]>([]);\r\n  const service = getMarketService();\r\n  const emitter = getEmitter();\r\n\r\n  const query = useQuery<GetMarketEvents, GetMarketEventsVariables>(GET_MARKET_EVENTS_QUERY, {\r\n    variables: {\r\n      offset: 0,\r\n      limit: limit\r\n    },\r\n    fetchPolicy: 'network-only',\r\n    onCompleted: (data) => {\r\n      setEvents(data.marketEvents.events.map(e => TransformUtil.toPunkEvent(e)));\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsLoading(query.loading);\r\n  }, [query.loading]);\r\n\r\n  useEffect(() => {\r\n    setError(query.error);\r\n  }, [query.error]);\r\n\r\n  const fetchMoreDataAsync = async () => {\r\n    logger.info(\"fetchMoreDataAsync\", events.length)();\r\n    const blockHeight: Maybe<string> = query.data?.marketEvents.blockHeight.toString();\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await service.getEventsAsync(events.length, limit, blockHeight);\r\n      setHasMore(result.data.marketEvents.events.length >= limit);\r\n      if (result.data.marketEvents.events.length > 0) {\r\n        setEvents([\r\n          ...events,\r\n          ...result.data.marketEvents.events.map(e => TransformUtil.toPunkEvent(e))\r\n        ]);\r\n      }\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const refetch = query.refetch;\r\n\r\n  const refresh = useCallback(() => {\r\n    logger.info(\"Refreshing market activity\")();\r\n    refetch();\r\n    setNewEvents([]);\r\n  }, [refetch]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (state: PunkTypes.DocumentState) => {\r\n      if (state === PunkTypes.DocumentState.Active) {\r\n        refresh();\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    };\r\n  }, [emitter, refresh]);\r\n\r\n  const addNewEvent = useCallback((e: PunkTypes.PunkChangedEvent) => {\r\n    setNewEvents([\r\n      TransformUtil.toPunkEvent(e),\r\n      ...newEvents\r\n    ]);\r\n  }, [newEvents]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.PunkChangedEvent) => {\r\n      logger.info(\"newMarketEvent\", e)();\r\n      addNewEvent(e);\r\n    }\r\n    logger.info('emitter.on', PunkTypes.GlobalEvent.PunkChanged)();\r\n    emitter.on(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    return () => {\r\n      logger.info('emitter.off', PunkTypes.GlobalEvent.PunkChanged)();\r\n      emitter.off(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    };\r\n  }, [emitter, addNewEvent]);\r\n\r\n  return (\r\n    <EventList\r\n      events={events}\r\n      newEvents={newEvents}\r\n      error={error}\r\n      loading={isLoading}\r\n      hasMore={hasMore}\r\n      height={500}\r\n      fetchMoreDataAsync={fetchMoreDataAsync}>\r\n    </EventList>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport SortIcon from '@mui/icons-material/Sort';\r\nimport { Autocomplete, FormControl, FormGroup, Grid, InputLabel, MenuItem, Select, SelectChangeEvent, Stack, TextField, ToggleButton, ToggleButtonGroup } from '@mui/material';\r\nimport React, { SyntheticEvent, useState } from 'react';\r\nimport { DefaultPunkFilterValues, getEmitter, PunkSortTypes, PunkTypes } from 'vitepunks-common';\r\nimport { GET_PUNK_ATTRIBUTES_QUERY } from '../../../../queries';\r\nimport { GetPunkAttributes } from '../../../../queries/__generated__/GetPunkAttributes';\r\n\r\nexport const MarketplaceBrowseItemsFilter: React.FC = () => {\r\n  const [values, setValues] = useState<PunkTypes.PunkFilterValues>(DefaultPunkFilterValues);\r\n  const emitter = getEmitter();\r\n\r\n  const attributesQuery = useQuery<GetPunkAttributes>(GET_PUNK_ATTRIBUTES_QUERY, {\r\n    fetchPolicy: 'network-only'\r\n  });\r\n\r\n  const emitEvent = (oldValues: PunkTypes.PunkFilterValues, newValues: PunkTypes.PunkFilterValues) => {\r\n    emitter.emitPunkFilterValuesChanged(oldValues, newValues);\r\n  }\r\n\r\n  const handleSortByChange = (event: SelectChangeEvent) => {\r\n    const newValues: PunkTypes.PunkFilterValues = { ...values, sortBy: event.target.value as PunkTypes.PunkSortBy };\r\n    setValues(newValues);\r\n    emitEvent(values, newValues);\r\n  };\r\n\r\n  const handleSearchChange = (event: SyntheticEvent<Element, Event>, value: string[]) => {\r\n    const newValues: PunkTypes.PunkFilterValues = { ...values, search: value.join(',') };\r\n    setValues(newValues);\r\n    emitEvent(values, newValues);\r\n  };\r\n\r\n  const handleCheckedChange = (event: React.MouseEvent<HTMLElement, MouseEvent>, value: any) => {\r\n    const newValues: PunkTypes.PunkFilterValues = { ...values, orderBy: value };\r\n    setValues(newValues);\r\n    emitEvent(values, newValues);\r\n  };\r\n\r\n  return (\r\n    <Grid container sx={{ mb: 2 }} spacing={3}>\r\n      <Grid item md={3}></Grid>\r\n      <Grid item xs={12} md={6}>\r\n        <Autocomplete\r\n          multiple\r\n          freeSolo\r\n          id=\"search-autocomplete\"\r\n          options={attributesQuery.data?.punkAttributes ?? []}\r\n          getOptionLabel={(option) => option}\r\n          size=\"small\"\r\n          fullWidth={true}\r\n          onChange={handleSearchChange}\r\n          filterSelectedOptions\r\n          renderInput={(params) => (\r\n            <TextField\r\n              {...params}\r\n              label=\"Search\"\r\n            />\r\n          )}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12} md={3}>\r\n        <FormGroup>\r\n          <Stack direction=\"row\" justifyContent=\"end\" spacing={2}>\r\n            <FormControl size=\"small\">\r\n              <InputLabel id=\"sortby-select-label\">Sort by</InputLabel>\r\n              <Select\r\n                labelId=\"sortby-select-label\"\r\n                id=\"sortby-select\"\r\n                value={values.sortBy}\r\n                label=\"Sort by\"\r\n                onChange={handleSortByChange}\r\n              >\r\n                {PunkSortTypes.map(e => (\r\n                  <MenuItem key={e.type} value={e.type}>{e.name}&nbsp;</MenuItem>\r\n                ))}\r\n              </Select>\r\n            </FormControl>\r\n            {/* <Stack direction=\"row\" alignItems=\"center\" >\r\n              <Switch color=\"default\" checked={values.orderByAsc} onChange={handleCheckedChange('orderByAsc')} />\r\n              {values.orderByAsc ? (\r\n                <ArrowUpward fontSize=\"small\" />\r\n              ) : (\r\n                <ArrowDownward fontSize=\"small\" />\r\n              )}\r\n            </Stack> */}\r\n            <ToggleButtonGroup size=\"small\" exclusive value={values.orderBy} onChange={handleCheckedChange}>\r\n              <ToggleButton value={PunkTypes.OrderBy.ASC}>\r\n                <SortIcon sx={{ transform: \"rotate(180deg)\" }} />\r\n              </ToggleButton>\r\n              <ToggleButton value={PunkTypes.OrderBy.DESC}>\r\n                <SortIcon />\r\n              </ToggleButton>\r\n            </ToggleButtonGroup>\r\n          </Stack>\r\n        </FormGroup>\r\n      </Grid>\r\n    </Grid>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { DefaultPunkFilterValues, getEmitter, getLogger, PunkTypes } from 'vitepunks-common';\r\nimport { GET_PUNKS_QUERY } from '../../../../queries';\r\nimport { GetPunks, GetPunksVariables } from '../../../../queries/__generated__/GetPunks';\r\nimport { InfinitePunkList } from '../../../punk/components/infinite-list';\r\nimport { MarketplaceBrowseItemsFilter } from '../browse-items-filter';\r\n\r\nconst logger = getLogger()\r\n\r\nexport const MarketplaceBrowseItems: React.FC = (props: any) => {\r\n  const limit = 8;\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [error, setError] = useState<any>(undefined);\r\n  const [filter, setFilter] = useState<PunkTypes.PunkFilterValues>({\r\n    sortBy: DefaultPunkFilterValues.sortBy,\r\n    orderBy: DefaultPunkFilterValues.orderBy,\r\n    search: ''\r\n  })\r\n  const emitter = getEmitter();\r\n\r\n  const query = useQuery<GetPunks, GetPunksVariables>(GET_PUNKS_QUERY, {\r\n    variables: {\r\n      offset: 0,\r\n      limit: limit,\r\n      sort: filter.sortBy as PunkTypes.PunkSortBy,\r\n      order: filter.orderBy as PunkTypes.OrderBy,\r\n      search: filter.search\r\n    },\r\n    fetchPolicy: 'network-only',\r\n    onCompleted: (data) => {\r\n      setHasMore(data.punks.length >= limit);\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsLoading(query.loading);\r\n  }, [query.loading]);\r\n\r\n  useEffect(() => {\r\n    setError(query.error);\r\n  }, [query.error]);\r\n\r\n  const fetchMoreDataAsync = async () => {\r\n    const startTimestamp = new Date().getTime();\r\n    const currentLength = query.data?.punks.length ?? 0;\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await query.fetchMore({\r\n        variables: {\r\n          offset: currentLength,\r\n          limit: limit\r\n        }\r\n      });\r\n      logger.info(`fetchMoreDataAsync1 took ${new Date().getTime() - startTimestamp}ms`)();\r\n      setHasMore(result.data.punks.length >= limit);\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n    setIsLoading(false);\r\n    logger.info(`fetchMoreDataAsync2 took ${new Date().getTime() - startTimestamp}ms`)();\r\n  };\r\n\r\n  const refetch = query.refetch;\r\n\r\n  useEffect(() => {\r\n    refetch({\r\n      offset: 0,\r\n      limit: limit,\r\n      sort: filter.sortBy as PunkTypes.PunkSortBy,\r\n      order: filter.orderBy as PunkTypes.OrderBy,\r\n      search: filter.search\r\n    })\r\n  }, [filter, refetch])\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (oldValues: PunkTypes.PunkFilterValues, newValues: PunkTypes.PunkFilterValues) => {\r\n      setHasMore(true);\r\n      setFilter({\r\n        sortBy: newValues.sortBy,\r\n        orderBy: newValues.orderBy,\r\n        search: newValues.search\r\n      });\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.PunkFilterValuesChanged, handleEvent)\r\n    return () => {\r\n      logger.info('emitter.off', PunkTypes.GlobalEvent.PunkFilterValuesChanged)()\r\n      emitter.off(PunkTypes.GlobalEvent.PunkFilterValuesChanged, handleEvent)\r\n    };\r\n  }, [emitter])\r\n\r\n  return (\r\n    <>\r\n      <MarketplaceBrowseItemsFilter></MarketplaceBrowseItemsFilter>\r\n      <InfinitePunkList\r\n        items={query.data?.punks ?? []}\r\n        fetchMoreDataAsync={fetchMoreDataAsync}\r\n        error={error}\r\n        isLoading={isLoading}\r\n        hasMore={hasMore}>\r\n      </InfinitePunkList>\r\n    </>\r\n  )\r\n}\r\n","import GridOnIcon from '@mui/icons-material/GridOn';\r\nimport TimelineIcon from '@mui/icons-material/Timeline';\r\nimport { Box, Container, Tab, Tabs, Typography } from '@mui/material';\r\nimport React from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { PunkTypes } from 'vitepunks-common';\r\nimport { MarketplaceBrowseActivity } from '../browse-activity';\r\nimport { MarketplaceBrowseItems } from '../browse-items';\r\n\r\ninterface TabPanelProps {\r\n  children?: React.ReactNode;\r\n  index: number;\r\n  value: number;\r\n}\r\n\r\nfunction TabPanel(props: TabPanelProps) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`marketplace-tabpanel-${index}`}\r\n      aria-labelledby={`marketplace-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box sx={{ p: 2 }}>\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const MarketplaceBrowse: React.FC = (props: any) => {\r\n  const navigate = useNavigate();\r\n  const { tab } = useParams();\r\n  const getTab = (): number => {\r\n    if (tab === PunkTypes.MarketplaceTab.Activity) {\r\n      return 1;\r\n    } else {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  const initialValue = getTab();\r\n  const [value, setValue] = React.useState<number>(initialValue);\r\n  if (initialValue !== value) {\r\n    setValue(initialValue)\r\n  }\r\n\r\n  const handleChange = (event: React.SyntheticEvent, newValue: number) => {\r\n    setValue(newValue);\r\n    switch (newValue) {\r\n      case 1:\r\n        navigate(\"/marketplace/activity\");\r\n        break;\r\n      default:\r\n        navigate(\"/marketplace\");\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Typography variant=\"h2\" component=\"div\" textAlign=\"center\" sx={{ pt: 3 }} gutterBottom>\r\n        Marketplace\r\n      </Typography>\r\n      <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\r\n        <Tabs value={value} onChange={handleChange}>\r\n          <Tab icon={<GridOnIcon />} label=\"Items\" value={0} />\r\n          <Tab icon={<TimelineIcon />} label=\"Activity\" value={1} />\r\n        </Tabs>\r\n      </Box>\r\n      <Container sx={{ pb: 6 }} maxWidth=\"xl\">\r\n        <TabPanel value={value} index={0}>\r\n          <MarketplaceBrowseItems></MarketplaceBrowseItems>\r\n        </TabPanel>\r\n        <TabPanel value={value} index={1}>\r\n          <Box marginTop={5}>\r\n            <MarketplaceBrowseActivity></MarketplaceBrowseActivity>\r\n          </Box>\r\n        </TabPanel>\r\n      </Container>\r\n    </>\r\n  )\r\n}\r\n","import React from 'react';\r\n\r\nexport const MarketplaceItem: React.FC = (props: any) => {\r\n  return (\r\n    <>\r\n      MarketplaceItem\r\n    </>\r\n  )\r\n}\r\n","import { Card } from '@mui/material';\r\nimport { styled } from '@mui/material/styles';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { UrlUtil } from 'vitepunks-common';\r\nimport { ClientConstants } from '../../../../common/constants';\r\n\r\nconst CardContainer = styled(Card)(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100vw; \r\n  background-color: rgba(255, 255, 255, 0.5);\r\n`,\r\n);\r\n\r\nconst ImageContainer = styled('div')(\r\n  ({ theme }) => `\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n`,\r\n);\r\n\r\nconst Image = styled('div')(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  background-image: url('${ClientConstants.ITEM_BG_URL}');\r\n`,\r\n);\r\n\r\nconst Img = styled('img')(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: contain;\r\n  image-rendering: pixelated;\r\n`,\r\n);\r\n\r\ninterface Props {\r\n  image: string\r\n  cid: string\r\n  maxHeight?: string\r\n}\r\n\r\nexport const PunkImage: React.FC<Props> = (props: Props) => {\r\n  const [imageUrl, setImageUrl] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setImageUrl(UrlUtil.getPunkUrl(props.image, props.cid));\r\n  }, [props.image, props.cid]);\r\n\r\n  return (\r\n    <CardContainer sx={{ maxHeight: props.maxHeight ?? \"400px\" }}>\r\n      <ImageContainer>\r\n        <Image>\r\n          <Img sx={{ backgroundImage: `url('${imageUrl}')` }} />\r\n        </Image>\r\n      </ImageContainer>\r\n    </CardContainer>\r\n  );\r\n}","import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Link } from '@mui/material';\r\nimport confetti from 'canvas-confetti';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { CommonConstants, getEmitter, getLogger, PunkTypes } from 'vitepunks-common';\r\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\r\nimport { getPunkService } from '../../../../services/punk.service';\r\nimport { PunkImage } from '../image';\r\n\r\nconst logger = getLogger();\r\n\r\nexport const MintDialog: React.FC = () => {\r\n  const [open, setOpen] = useState(false);\r\n  const [punkId, setPunkId] = useState(-1);\r\n  const [punkImage, setPunkImage] = useState(\"\");\r\n  const [punkCid, setPunkCid] = useState(\"\");\r\n  const emitter = getEmitter();\r\n  const service = getPunkService();\r\n  const context = useConnectedWeb3Context();\r\n\r\n  useEffect(() => {\r\n    const handleEvent = async (e: PunkTypes.PunkChangedEvent) => {\r\n      //logger.info(`eventType: ${e.eventType} punkId: ${e.punkId} amount: ${e.amount?.toString()} fromAddress: ${e.fromAddress} toAddress: ${e.toAddress} timestamp: ${e.timestamp.toString()}`)();\r\n      if (e.eventType === PunkTypes.PunkEventType.Mint && e.toAddress?.toLowerCase() === context.account?.toLowerCase()) {\r\n        logger.info(\"Show mint dialog\")();\r\n        const punk = await service.getById(e.punkId.toString());\r\n        setPunkId(e.punkId);\r\n        setPunkImage(punk.data.punk.image);\r\n        setPunkCid(punk.data.punk.cid);\r\n        setOpen(true);\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.PunkChanged, handleEvent)\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.PunkChanged, handleEvent)\r\n    };\r\n  }, [emitter, service, context.account, setOpen]);\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      const triggerConfetti = () => {\r\n        confetti({\r\n          particleCount: 200,\r\n          spread: 100,\r\n          zIndex: 9999\r\n        });\r\n      }\r\n      for (let index = 1; index < 4; index++) {\r\n        setTimeout(() => {\r\n          triggerConfetti();\r\n        }, index * 225);\r\n      }\r\n    }\r\n  }, [open]);\r\n\r\n  const handleClose = () => {\r\n    setPunkImage(\"\");\r\n    setOpen(false);\r\n  };\r\n\r\n  if (punkId < 0) {\r\n    return (\r\n      <>\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      transitionDuration={500}\r\n      keepMounted\r\n      onClose={handleClose}\r\n      style={{ zIndex: 9999 }}\r\n    >\r\n      <DialogTitle> Mint success!</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText paddingBottom={1}>\r\n          You have successfully minted <Link underline=\"hover\" component={RouterLink} to={`/punk/${punkId}`} onClick={handleClose}>{CommonConstants.PUNK_NAME} #{punkId}</Link>\r\n        </DialogContentText>\r\n        <PunkImage image={punkImage} cid={punkCid} maxHeight=\"300px\"></PunkImage>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>\r\n          Close\r\n        </Button>\r\n        <Button component={RouterLink} to={`/account/${context.account}`} variant=\"contained\" onClick={handleClose}>\r\n          My punks\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { getEmitter, getLogger, PunkTypes, TransformUtil } from 'vitepunks-common';\r\nimport { GET_PUNK_EVENTS_QUERY } from '../../../../queries';\r\nimport { GetPunkEvents, GetPunkEventsVariables } from '../../../../queries/__generated__/GetPunkEvents';\r\nimport { getPunkService } from '../../../../services/punk.service';\r\nimport { EventList } from '../../../common/components/event-list';\r\n\r\nconst logger = getLogger();\r\n\r\ninterface Props {\r\n  item: PunkTypes.Punk\r\n}\r\n\r\nexport const PunkActivity: React.FC<Props> = (props: Props) => {\r\n  const limit = 8;\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [error, setError] = useState<any>(undefined);\r\n  const [events, setEvents] = useState<PunkTypes.PunkEvent[]>([]);\r\n  const [newEvents, setNewEvents] = useState<PunkTypes.PunkEvent[]>([]);\r\n  const service = getPunkService();\r\n  const emitter = getEmitter();\r\n\r\n  const query = useQuery<GetPunkEvents, GetPunkEventsVariables>(GET_PUNK_EVENTS_QUERY, {\r\n    variables: {\r\n      id: props.item.id,\r\n      offset: 0,\r\n      limit: limit\r\n    },\r\n    fetchPolicy: 'network-only',\r\n    onCompleted: (data) => {\r\n      setEvents(data.punkEvents.events.map(e => TransformUtil.toPunkEvent(e)));\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsLoading(query.loading);\r\n  }, [query.loading]);\r\n\r\n  useEffect(() => {\r\n    setError(query.error);\r\n  }, [query.error]);\r\n\r\n  const fetchMoreDataAsync = async () => {\r\n    logger.info(\"fetchMoreDataAsync\", events.length)();\r\n    const blockHeight: Maybe<string> = query.data?.punkEvents.blockHeight.toString();\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await service.getEventsAsync(props.item.id, events.length, limit, blockHeight);\r\n      setHasMore(result.data.punkEvents.events.length >= limit);\r\n      if (result.data.punkEvents.events.length > 0) {\r\n        setEvents([\r\n          ...events,\r\n          ...result.data.punkEvents.events.map(e => TransformUtil.toPunkEvent(e))\r\n        ]);\r\n      }\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const refetch = query.refetch;\r\n\r\n  const refresh = useCallback(() => {\r\n    logger.info(\"Refreshing punk activity\")();\r\n    refetch();\r\n    setNewEvents([]);\r\n  }, [refetch]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (state: PunkTypes.DocumentState) => {\r\n      if (state === PunkTypes.DocumentState.Active) {\r\n        refresh();\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    };\r\n  }, [emitter, refresh]);\r\n\r\n  const addNewEvent = useCallback((e: PunkTypes.PunkChangedEvent) => {\r\n    setNewEvents([\r\n      TransformUtil.toPunkEvent(e),\r\n      ...newEvents\r\n    ]);\r\n  }, [newEvents]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.PunkChangedEvent) => {\r\n      logger.info(\"newPunkEvent\", e)();\r\n      if (e.punkId === parseInt(props.item.id)) {\r\n        addNewEvent(e);\r\n      }\r\n    }\r\n    logger.info('emitter.on', PunkTypes.GlobalEvent.PunkChanged)();\r\n    emitter.on(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    return () => {\r\n      logger.info('emitter.off', PunkTypes.GlobalEvent.PunkChanged)();\r\n      emitter.off(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    };\r\n  }, [emitter, props.item.id, addNewEvent]);\r\n\r\n  return (\r\n    <EventList\r\n      events={events}\r\n      newEvents={newEvents}\r\n      error={error}\r\n      loading={isLoading}\r\n      hasMore={hasMore}\r\n      fetchMoreDataAsync={fetchMoreDataAsync}>\r\n    </EventList>\r\n  )\r\n}\r\n","import { faCheck } from '@fortawesome/free-solid-svg-icons';\r\nimport { Button, Skeleton, Stack } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { ActionName, CommonConstants, CommonUtil, getLogger, PunkTypes } from \"vitepunks-common\";\r\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { IconUtil } from '../../../../util/icon.util';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\nimport { FontAwesomeSvgIcon } from '../../../common/components/fa-icon';\r\nimport { PunkDialog } from '../dialog';\r\n\r\nconst logger = getLogger();\r\n\r\ntype ShowButtonState = {\r\n  showAny: boolean\r\n  showBuy: boolean\r\n  showClaim: boolean\r\n  showBid: boolean\r\n  showSell: boolean\r\n  showAcceptBid: boolean\r\n  showCancelBid: boolean\r\n  showCancelSale: boolean\r\n  showCancelGift: boolean\r\n}\r\n\r\ninterface Props {\r\n  loading: boolean\r\n  marketStarted: boolean\r\n  item: PunkTypes.Punk\r\n  refetchAsync: () => Promise<void>\r\n}\r\n\r\nexport const PunkInfoActions: React.FC<Props> = (props: Props) => {\r\n  const mounted = React.useRef(false);\r\n  const [hasOwner, setHasOwner] = useState<boolean>(false);\r\n  const [showAll] = useState<boolean>(false);\r\n  const [showButtonState, setShowButtonState] = useState<ShowButtonState>({\r\n    showAny: false,\r\n    showBuy: false,\r\n    showClaim: false,\r\n    showBid: false,\r\n    showSell: false,\r\n    showAcceptBid: false,\r\n    showCancelBid: false,\r\n    showCancelSale: false,\r\n    showCancelGift: false\r\n  });\r\n  const [dialogState, setDialogState] = useState<PunkTypes.PunkDialogState>({\r\n    type: PunkTypes.PunkDialogType.UNKNOWN,\r\n    open: false,\r\n    item: props.item\r\n  });\r\n  const context = useConnectedWeb3Context();\r\n  const service = getMarketService();\r\n\r\n  React.useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (mounted.current) {\r\n      let isOwner = props.item.owner?.toLowerCase() === context.account?.toLowerCase();\r\n      const state: ShowButtonState = {\r\n        showAny: false,\r\n        showBuy: false,\r\n        showClaim: false,\r\n        showBid: false,\r\n        showSell: false,\r\n        showAcceptBid: false,\r\n        showCancelBid: false,\r\n        showCancelSale: false,\r\n        showCancelGift: false\r\n      }\r\n      // setHasOwner\r\n      if (props.item.owner && !CommonUtil.isNullOrWhitespace(props.item.owner)) {\r\n        setHasOwner(true);\r\n      } else {\r\n        setHasOwner(false);\r\n      }\r\n      if (props.marketStarted && !CommonUtil.isNullOrWhitespace(context.account)) {\r\n        state.showAny = true;\r\n      }\r\n      if (!isOwner && props.item.offer && (CommonUtil.isNullOrWhitespace(props.item.offer.onlySellTo) || props.item.offer.onlySellTo?.toLowerCase() === context.account?.toLowerCase())) {\r\n        if (props.item.offer.minAmount.gt(0)) {\r\n          state.showBuy = true;\r\n        } else {\r\n          state.showClaim = true;\r\n        }\r\n      }\r\n      if (!isOwner && props.item.bid?.bidder.toLowerCase() !== context.account?.toLowerCase()) {\r\n        state.showBid = true;\r\n      }\r\n      if (isOwner && !props.item.offer) {\r\n        state.showSell = true;\r\n      }\r\n      if (isOwner && props.item.bid) {\r\n        state.showAcceptBid = true;\r\n      }\r\n      if (!isOwner && props.item.bid?.bidder.toLowerCase() === context.account?.toLowerCase()) {\r\n        state.showCancelBid = true;\r\n      }\r\n      if (isOwner && props.item.offer) {\r\n        if (props.item.offer.minAmount.gt(0)) {\r\n          state.showCancelSale = true;\r\n        } else {\r\n          state.showCancelGift = true;\r\n        }\r\n      }\r\n      setShowButtonState(state);\r\n    }\r\n  }, [props.marketStarted, props.item, context.account]);\r\n\r\n  const handleFailureAsync = async () => {\r\n    SnackbarUtil.enqueueMessage('Transaction failed');\r\n    try {\r\n      // Update actionPrice just in case\r\n      await service.getMarketInfoAsync();\r\n    } catch (error) {\r\n      logger.error(error)();\r\n    }\r\n  }\r\n\r\n  const handleClaimAsync = async () => {\r\n    try {\r\n      if (!props.item.offer) {\r\n        throw new Error(`${CommonConstants.PUNK_NAME} #${props.item.id} cannot be claimed`);\r\n      }\r\n      const success = await service.buyAsync(props.item.id, props.item.offer.minAmount.toFixed());\r\n      if (success) {\r\n        SnackbarUtil.enqueueMessage(`Congratulations! You claimed ${CommonConstants.PUNK_NAME} #${props.item.id}`);\r\n      } else {\r\n        await handleFailureAsync();\r\n      }\r\n    } catch (error) {\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      await props.refetchAsync();\r\n    }\r\n  }\r\n\r\n  const handleOpenDialog = (_type: PunkTypes.PunkDialogType) => {\r\n    if (mounted.current) {\r\n      setDialogState({\r\n        ...dialogState,\r\n        type: _type,\r\n        open: true,\r\n        item: props.item\r\n      })\r\n    }\r\n  }\r\n\r\n  const dialogCallbackAsync = async (_success: boolean) => {\r\n    if (!_success) {\r\n      await handleFailureAsync();\r\n    }\r\n    await props.refetchAsync();\r\n  }\r\n\r\n  if (!hasOwner || !showButtonState.showAny) {\r\n    return (\r\n      <></>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {props.loading ? (\r\n        <Skeleton animation=\"wave\" height={30} />\r\n      ) : (\r\n        <>\r\n          <Stack spacing={1} direction=\"row\">\r\n            {(showAll || showButtonState.showBuy) && (\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<FontAwesomeSvgIcon icon={IconUtil.getBuyEventTypeIcon()} />}\r\n                onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.ACCEPT_OFFER) }}>\r\n                {ActionName.buy}\r\n              </Button>\r\n            )}\r\n            {(showAll || showButtonState.showClaim) && (\r\n              <ClickOnceButton\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<FontAwesomeSvgIcon icon={IconUtil.getGiftEventTypeIcon()} />}\r\n                callbackFn={handleClaimAsync}>\r\n                {ActionName.claim}\r\n              </ClickOnceButton>\r\n            )}\r\n            {(showAll || showButtonState.showBid) && (\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<FontAwesomeSvgIcon icon={IconUtil.getPunkEventTypeIcon(PunkTypes.PunkEventType.NewBid)} />}\r\n                onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.BID) }}>\r\n                {ActionName.bid}\r\n              </Button>\r\n            )}\r\n            {(showAll || showButtonState.showSell) && (\r\n              <>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<FontAwesomeSvgIcon icon={IconUtil.getOfferEventTypeIcon()} />}\r\n                  onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.OFFER) }}>\r\n                  {ActionName.sell}\r\n                </Button>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<FontAwesomeSvgIcon icon={IconUtil.getGiftEventTypeIcon()} />}\r\n                  onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.GIFT) }}>\r\n                  {ActionName.gift}\r\n                </Button>\r\n              </>\r\n            )}\r\n            {(showAll || showButtonState.showAcceptBid) && (\r\n              <Button\r\n                size=\"small\"\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<FontAwesomeSvgIcon icon={faCheck} />}\r\n                onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.ACCEPT_BID) }}>\r\n                {ActionName.acceptBid}\r\n              </Button>\r\n            )}\r\n          </Stack>\r\n          {(showAll || showButtonState.showCancelBid || showButtonState.showCancelSale || showButtonState.showCancelGift) && (\r\n            <Stack spacing={1} direction=\"row\" marginTop={1}>\r\n              {(showAll || showButtonState.showCancelBid) && (\r\n                <Button\r\n                  size=\"small\"\r\n                  variant=\"contained\"\r\n                  color=\"error\"\r\n                  startIcon={<FontAwesomeSvgIcon icon={IconUtil.getPunkEventTypeIcon(PunkTypes.PunkEventType.CancelBid)} />}\r\n                  onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.CANCEL_BID) }}>\r\n                  {ActionName.cancelBid}\r\n                </Button>\r\n              )}\r\n              {(showAll || showButtonState.showCancelSale) && (\r\n                <Button\r\n                  size=\"small\"\r\n                  variant=\"contained\"\r\n                  color=\"error\"\r\n                  startIcon={<FontAwesomeSvgIcon icon={IconUtil.getCancelSaleEventTypeIcon()} />}\r\n                  onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.CANCEL_OFFER) }}>\r\n                  {ActionName.cancelSale}\r\n                </Button>\r\n              )}\r\n              {(showAll || showButtonState.showCancelGift) && (\r\n                <Button\r\n                  size=\"small\"\r\n                  variant=\"contained\"\r\n                  color=\"error\"\r\n                  startIcon={<FontAwesomeSvgIcon icon={IconUtil.getCancelSaleEventTypeIcon()} />}\r\n                  onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.CANCEL_OFFER) }}>\r\n                  {ActionName.cancelGift}\r\n                </Button>\r\n              )}\r\n            </Stack>\r\n          )}\r\n        </>\r\n      )}\r\n      <PunkDialog state={dialogState} setState={setDialogState} callbackAsync={dialogCallbackAsync}></PunkDialog>\r\n    </>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport { faGem, faSnowflake } from '@fortawesome/free-regular-svg-icons';\r\nimport { Verified } from '@mui/icons-material';\r\nimport { Box, Card, Chip, Link, Skeleton, Stack, styled, Typography, useMediaQuery, useTheme } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonConstants, CommonUtil, FormatUtil, getEmitter, getLogger, PunkTypes, TokenUtil, UrlUtil } from 'vitepunks-common';\r\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\r\nimport { usePunkInfo } from '../../../../hooks/punk.hook';\r\nimport { GET_MARKET_INFO_QUERY } from '../../../../queries';\r\nimport { GetMarketInfo } from '../../../../queries/__generated__/GetMarketInfo';\r\nimport { Alert } from '../../../common/components/alert';\r\nimport { ExplorerLink, ExplorerLinkType } from '../../../common/components/explorer-link';\r\nimport { FontAwesomeSvgIcon } from '../../../common/components/fa-icon';\r\nimport { BootstrapTooltip, ExtendedBootstrapTooltip } from '../../../common/components/tooltip';\r\nimport { PunkInfoActions } from '../info-actions';\r\n\r\nconst logger = getLogger();\r\n\r\nconst InfoContainer = styled(Card)(\r\n  ({ theme }) => `\r\n  position: relative;\r\n  overflow: auto;\r\n  width: 100%;\r\n  min-height: 400px;\r\n  background-color: rgba(255, 255, 255, 0.5);\r\n`,\r\n);\r\n\r\nconst BottomContent = styled(Box)(\r\n  ({ theme }) => `\r\n  position: absolute;\r\n  bottom: 24px;\r\n  left: 24px;\r\n  width: calc(100% - 48px);\r\n`,\r\n);\r\n\r\ninterface Props {\r\n  item: PunkTypes.Punk\r\n}\r\n\r\nexport const PunkInfo: React.FC<Props> = (props: Props) => {\r\n  const mounted = React.useRef(false);\r\n  const theme = useTheme();\r\n  const matches = useMediaQuery(theme.breakpoints.down('sm'));\r\n  const [marketStarted, setMarketStarted] = useState(false);\r\n  const { punkExtended, loading, error, refetchAsync } = usePunkInfo(props.item);\r\n  const query = useQuery<GetMarketInfo>(GET_MARKET_INFO_QUERY, {\r\n    fetchPolicy: 'network-only'\r\n  });\r\n  const context = useConnectedWeb3Context();\r\n  const emitter = getEmitter();\r\n\r\n  const refetch = query.refetch;\r\n\r\n  useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (error) {\r\n      logger.error(error)();\r\n    }\r\n  }, [error]);\r\n\r\n  useEffect(() => {\r\n    if (mounted.current) {\r\n      const info = query.data?.marketInfo;\r\n      if (info && mounted.current) {\r\n        setMarketStarted(info.marketStarted);\r\n      }\r\n    }\r\n  }, [query.data]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (state: PunkTypes.DocumentState) => {\r\n      if (mounted.current) {\r\n        if (state === PunkTypes.DocumentState.Active) {\r\n          refetchAsync();\r\n        }\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    };\r\n  }, [emitter, refetchAsync]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = () => {\r\n      if (mounted.current) {\r\n        refetch();\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.MarketChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.MarketChanged, handleEvent);\r\n    };\r\n  }, [emitter, refetch]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.PunkChangedEvent) => {\r\n      if (mounted.current) {\r\n        if (e.punkId === parseInt(props.item.id)) {\r\n          refetchAsync();\r\n        }\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    };\r\n  }, [emitter, props.item.id, refetchAsync]);\r\n\r\n  const formatViteTooltip = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatViteTooltip(bn);\r\n  }\r\n\r\n  const formatVite = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return bn.gt(0) ? TokenUtil.formatVite(bn) : \"0\";\r\n  }\r\n\r\n  return (\r\n    <InfoContainer>\r\n      <Box sx={{ p: 3 }}>\r\n        <Stack direction=\"row\" justifyContent=\"space-between\">\r\n          <Typography variant=\"h5\" fontSize={matches ? \"1.25rem\" : \"1.5rem\"} color=\"primary\" paragraph>{CommonConstants.PUNK_NAME} #{props.item.id}</Typography>\r\n          <Box>\r\n            <ExtendedBootstrapTooltip title={<span>Rarity rank</span>} placement=\"bottom\" arrow>\r\n              <Chip size=\"small\" icon={<FontAwesomeSvgIcon icon={faGem} sx={{ fontSize: \"small\", ml: 1 }} />} sx={{ fontSize: \"0.7rem\" }} label={props.item.rank} />\r\n            </ExtendedBootstrapTooltip>\r\n          </Box>\r\n        </Stack>\r\n        {props.item.attributes.length > 0 && (\r\n          <Stack spacing={1} direction=\"row\" sx={{ mb: 2 }}>\r\n            {props.item.attributes?.map((a: string) => (\r\n              <Chip key={a} label={a} variant=\"outlined\" size={matches ? \"small\" : \"medium\"} />\r\n            ))}\r\n          </Stack>\r\n        )}\r\n        {error ? (\r\n          <Alert message={FormatUtil.formatMessage(error)} type=\"warning\"></Alert>\r\n        ) : (\r\n          <>\r\n            <Stack spacing={1} direction=\"row\" sx={{ mb: 2 }}>\r\n              <Typography display=\"inline\">\r\n                <b>Owner</b>:\r\n              </Typography>\r\n              {loading ? (\r\n                <Skeleton animation=\"wave\" height={24} width=\"40%\" sx={{ display: \"inline\" }} />\r\n              ) : (\r\n                <Typography display=\"inline\" component=\"div\">\r\n                  {!punkExtended.owner ? (\r\n                    <>\r\n                      Not minted yet.\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <ExplorerLink type={ExplorerLinkType.Address} value={punkExtended.owner}>\r\n                        <ExtendedBootstrapTooltip title={punkExtended.owner}>\r\n                          <Box sx={{ mr: 1 }} component=\"span\">{CommonUtil.truncateStringInTheMiddle(punkExtended.owner, 20, 5)}</Box>\r\n                        </ExtendedBootstrapTooltip>\r\n                      </ExplorerLink>\r\n                      {context.account && punkExtended.owner.toLowerCase() === context.account.toLowerCase() && (\r\n                        <Chip size=\"small\" icon={<Verified />} label=\"You own this punk\" variant=\"filled\" sx={{ borderRadius: 1 }} color=\"secondary\" />\r\n                      )}\r\n                    </>\r\n                  )}\r\n                </Typography>\r\n              )}\r\n            </Stack>\r\n            <Stack spacing={1} direction=\"row\" sx={{ mb: 2 }}>\r\n              <Typography display=\"inline\">\r\n                <b>Image</b>:\r\n              </Typography>\r\n              <Link underline=\"hover\" href={UrlUtil.getPunkIpfsUrlByCid(punkExtended.cid)} target=\"_blank\">\r\n                <ExtendedBootstrapTooltip title=\"Image stored on IPFS\">\r\n                  <Box>\r\n                    <FontAwesomeSvgIcon sx={{ fontSize: \"1.2em\", mr: 0.5, verticalAlign: \"text-bottom\" }} icon={faSnowflake} />\r\n                    <Box component=\"span\" >\r\n                      Frozen\r\n                    </Box>\r\n                  </Box>\r\n                </ExtendedBootstrapTooltip>\r\n              </Link>\r\n            </Stack>\r\n            <Stack spacing={1} direction=\"row\" sx={{ mb: 2 }}>\r\n              <Typography display=\"inline\">\r\n                <b>Current bid</b>:\r\n              </Typography>\r\n              {loading ? (\r\n                <Skeleton animation=\"wave\" height={24} width=\"60%\" sx={{ display: \"inline\" }} />\r\n              ) : (\r\n                <Typography display=\"inline\">\r\n                  {!punkExtended.bid ? (\r\n                    <>\r\n                      -\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <BootstrapTooltip title={formatViteTooltip(punkExtended.bid.amount)}>\r\n                        <span>{formatVite(punkExtended.bid.amount)} {CommonConstants.CURRENCY_NAME}</span>\r\n                      </BootstrapTooltip>\r\n                      &nbsp;by <ExplorerLink type={ExplorerLinkType.Address} value={punkExtended.bid.bidder}><ExtendedBootstrapTooltip title={punkExtended.bid.bidder}>\r\n                        <span>{CommonUtil.truncateStringInTheMiddle(punkExtended.bid.bidder, 10, 5)}</span>\r\n                      </ExtendedBootstrapTooltip></ExplorerLink>\r\n                    </>\r\n                  )}\r\n                </Typography>\r\n              )}\r\n            </Stack>\r\n            <Stack spacing={1} direction=\"row\" sx={{ mb: 2 }}>\r\n              {(loading || punkExtended.offer) ? (\r\n                <>\r\n                  <Typography display=\"inline\">\r\n                    {punkExtended.offer?.minAmount.lte(0) ? (\r\n                      <>\r\n                        <b>Gift</b>:\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <b>Buy price</b>:\r\n                      </>\r\n                    )}\r\n                  </Typography>\r\n                  {loading ? (\r\n                    <Skeleton animation=\"wave\" height={24} width=\"30%\" sx={{ display: \"inline\" }} />\r\n                  ) : (\r\n                    <Typography display=\"inline\">\r\n                      {!punkExtended.offer ? (\r\n                        <>\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <BootstrapTooltip title={formatViteTooltip(punkExtended.offer.minAmount)}>\r\n                            <span>{formatVite(punkExtended.offer.minAmount)} {CommonConstants.CURRENCY_NAME}</span>\r\n                          </BootstrapTooltip>\r\n                          {punkExtended.offer.onlySellTo && !CommonUtil.isNullOrWhitespace(punkExtended.offer.onlySellTo) && (\r\n                            <>\r\n                              &nbsp;(<ExplorerLink type={ExplorerLinkType.Address} value={punkExtended.offer.onlySellTo}><ExtendedBootstrapTooltip title={punkExtended.offer.onlySellTo}>\r\n                                <span>{CommonUtil.truncateStringInTheMiddle(punkExtended.offer.onlySellTo, 10, 5)}</span>\r\n                              </ExtendedBootstrapTooltip></ExplorerLink>)\r\n                            </>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                    </Typography>\r\n                  )}\r\n                </>\r\n              ) : (\r\n                <Chip label=\"Not for sale\" variant=\"filled\" sx={{ borderRadius: 1 }} />\r\n              )}\r\n            </Stack>\r\n          </>\r\n        )}\r\n        <BottomContent>\r\n          <PunkInfoActions loading={loading} marketStarted={marketStarted} item={punkExtended} refetchAsync={refetchAsync}></PunkInfoActions>\r\n        </BottomContent>\r\n      </Box>\r\n    </InfoContainer >\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport { Container, Grid } from '@mui/material';\r\nimport React from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { FormatUtil } from 'vitepunks-common';\r\nimport { GET_PUNK_QUERY } from '../../../../queries';\r\nimport { GetPunk, GetPunkVariables } from '../../../../queries/__generated__/GetPunk';\r\nimport { Alert } from '../../../common/components/alert';\r\nimport { PunkActivity } from '../activity';\r\nimport { PunkImage } from '../image';\r\nimport { PunkInfo } from '../info';\r\n\r\nexport const PunkDetails: React.FC = (props: any) => {\r\n  const { id } = useParams();\r\n\r\n  const query = useQuery<GetPunk, GetPunkVariables>(GET_PUNK_QUERY, {\r\n    variables: {\r\n      id: id ?? \"-1\"\r\n    },\r\n    fetchPolicy: 'network-only'\r\n  });\r\n\r\n  const error = query.error;\r\n  const loading = query.loading;\r\n\r\n  if (error) {\r\n    return <Alert message={FormatUtil.formatMessage(error)} type=\"warning\"></Alert>\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {loading || !query.data ? (\r\n        <Alert message=\"Loading...\" type=\"default\" ></Alert>\r\n      ) : (\r\n        <Container maxWidth=\"lg\">\r\n          <Grid container spacing={3} direction=\"row\" marginBottom={3}>\r\n            <Grid item xs={12} md={5}>\r\n              <PunkImage image={query.data.punk.image} cid={query.data.punk.cid}></PunkImage>\r\n            </Grid>\r\n            <Grid item xs={12} md={7}>\r\n              <PunkInfo item={query.data.punk}></PunkInfo>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <PunkActivity item={query.data.punk}></PunkActivity>\r\n            </Grid>\r\n          </Grid>\r\n        </Container>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n","import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Slide, SlideProps } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { getEmitter, PunkTypes } from 'vitepunks-common';\r\n\r\nconst Transition = React.forwardRef(function Transition(props: SlideProps, ref: React.Ref<unknown>) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport const ConfirmTransactionDialog: React.FC = () => {\r\n  const [open, setOpen] = useState(false);\r\n  const emitter = getEmitter();\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (open: boolean) => {\r\n      setOpen(open)\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.ConfirmTransactionDialog, handleEvent)\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.ConfirmTransactionDialog, handleEvent)\r\n    };\r\n  }, [emitter, setOpen])\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      TransitionComponent={Transition}\r\n      keepMounted\r\n      onClose={handleClose}\r\n      style={{ zIndex: 9999 }}\r\n    >\r\n      <DialogTitle>ViteConnect</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          Please confirm transaction on VITE Wallet App\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} color=\"primary\">\r\n          Close\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import LaunchIcon from '@mui/icons-material/Launch';\r\nimport { Alert, Button, Container, Stack, Typography } from '@mui/material';\r\nimport { styled } from '@mui/system';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonConstants, getEmitter, getLogger, PunkTypes, TokenUtil } from 'vitepunks-common';\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { getGeneralService } from '../../../../services/general.service';\r\nimport { BootstrapTooltip } from '../../../common/components/tooltip';\r\n\r\nconst logger = getLogger();\r\n\r\nconst QuotaContainer = styled(Container)(({ theme }) => (`\r\n  position: absolute;\r\n  top: 64px;\r\n  right: 0;\r\n  width: 100%;\r\n  z-index: 9999;\r\n`));\r\n\r\nconst QuotaAlert = styled(Alert)(({ theme }) => (`\r\n  float: right;\r\n  background-color: rgba(255, 255, 255);\r\n`));\r\n\r\nexport const ContractQuota: React.FC = (props: any) => {\r\n  const mounted = React.useRef(false);\r\n  const [quota, setQuota] = useState<PunkTypes.ViteQuotaResult>({\r\n    currentQuota: new PunkTypes.BigNumberWrapper(\"0\"),\r\n    maxQuota: new PunkTypes.BigNumberWrapper(\"0\"),\r\n    stakeAmount: new PunkTypes.BigNumberWrapper(\"0\")\r\n  });\r\n  const [showContainer, setShowContainer] = useState<boolean>(false);\r\n  const service = getGeneralService();\r\n  const emitter = getEmitter();\r\n\r\n  React.useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let interval: NodeJS.Timeout;\r\n    if (showContainer) {\r\n      interval = setInterval(async () => {\r\n        const result = await service.getContractQuota();\r\n        logger.info(result.data.quota)();\r\n        if (mounted.current && result.data.quota) {\r\n          const quotaResult = result.data.quota as PunkTypes.ViteQuotaResult;\r\n          if (quotaResult.currentQuota.gte(quotaResult.maxQuota)) {\r\n            clearInterval(interval);\r\n            setShowContainer(false);\r\n          }\r\n          setQuota({\r\n            currentQuota: quotaResult.currentQuota,\r\n            maxQuota: quotaResult.maxQuota,\r\n            stakeAmount: quotaResult.stakeAmount\r\n          });\r\n        }\r\n      }, 2000);\r\n    }\r\n    return () => {\r\n      logger.info(\"clearInterval(interval)\")();\r\n      if (interval) {\r\n        clearInterval(interval);\r\n      }\r\n    }\r\n  }, [service, showContainer]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (_address: string, _quota: PunkTypes.ViteQuotaResult) => {\r\n      if (mounted.current && ClientConstants.QUOTA_THRESHOLD.gte(_quota.currentQuota.minus(ClientConstants.QUOTA_THRESHOLD))) {\r\n        setQuota({\r\n          currentQuota: _quota.currentQuota,\r\n          maxQuota: _quota.maxQuota,\r\n          stakeAmount: _quota.stakeAmount\r\n        });\r\n        setShowContainer(true);\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.QuotaChanged, handleEvent);\r\n    return () => {\r\n      logger.info(\"emitter.off(GlobalEvent.QuotaChanged, handleEvent)\")();\r\n      emitter.off(PunkTypes.GlobalEvent.QuotaChanged, handleEvent);\r\n    };\r\n  }, [emitter]);\r\n\r\n  const formatBigNumber = (bn: PunkTypes.BigNumberWrapper, decimals: number = CommonConstants.CURRENCY_DECIMALS) => {\r\n    return TokenUtil.formatBigNumber(bn, 0, decimals);\r\n  }\r\n\r\n  if (!showContainer || quota.maxQuota.eq(0)) {\r\n    return (\r\n      <>\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <QuotaContainer maxWidth=\"xl\">\r\n      <QuotaAlert icon={false} severity=\"info\" onClose={() => { setShowContainer(false) }} sx={{ mt: 3, mr: 2 }}>\r\n        <Typography marginBottom={1} paragraph>\r\n          <b>Contract quota is recharging...</b>\r\n        </Typography>\r\n        <BootstrapTooltip title={formatBigNumber(quota.currentQuota)} placement=\"left\" arrow>\r\n          <Typography marginBottom={1} paragraph>\r\n            {formatBigNumber(quota.currentQuota, 6)} / {formatBigNumber(quota.maxQuota, 6)}\r\n          </Typography>\r\n        </BootstrapTooltip>\r\n        <Typography marginBottom={1}>You can help by staking {CommonConstants.CURRENCY_NAME}</Typography>\r\n        <Stack spacing={1} direction=\"row\">\r\n          <Typography>What does this mean?</Typography>\r\n          <Button variant=\"outlined\" size=\"small\" href={ClientConstants.QUOTA_WIKI_URL} target=\"_blank\" endIcon={<LaunchIcon />}>\r\n            More info\r\n          </Button>\r\n        </Stack>\r\n      </QuotaAlert>\r\n    </QuotaContainer>\r\n  )\r\n}\r\n","import { useSnackbar } from 'notistack';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { HashRouter, Route, Routes } from 'react-router-dom';\r\nimport { getEmitter, getLogger, PunkTypes } from 'vitepunks-common';\r\nimport { getClientConfig } from '../../../../common/config';\r\nimport { getCommonContext } from '../../../../contexts/common.context';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { WebUtil } from '../../../../util/web.util';\r\nimport { AccountDetails } from '../../../account/components/details';\r\nimport { Test } from '../../../common/components/test';\r\nimport { TestImage } from '../../../common/components/test-image';\r\nimport { TestList } from '../../../common/components/test-list';\r\nimport { LandingMain } from '../../../landing/components/main';\r\nimport { Header } from '../../../layout/components/header';\r\nimport { MainScroll } from '../../../layout/components/main-scroll';\r\nimport { MainWrapper } from '../../../layout/components/main-wrapper';\r\nimport { MarketplaceBrowse } from '../../../marketplace/components/browse';\r\nimport { MarketplaceItem } from '../../../marketplace/components/item';\r\nimport { MintDialog } from '../../../punk/components/dialog-mint';\r\nimport { PunkDetails } from '../../../punk/components/main';\r\nimport { ConfirmTransactionDialog } from '../dialog-transaction';\r\nimport { ContractQuota } from '../quota';\r\n\r\nconst logger = getLogger();\r\n\r\nexport const Main: React.FC = (props: any) => {\r\n  const [visibility, setVisibility] = useState<PunkTypes.DocumentState>(PunkTypes.DocumentState.Unknown);\r\n  const emitter = getEmitter();\r\n  const context = getCommonContext();\r\n  const basename = getClientConfig().BASENAME ?? \"\";\r\n  SnackbarUtil.snackbar = useSnackbar();\r\n\r\n  useEffect(() => {\r\n    const handleEvent = async () => {\r\n      try {\r\n        await context.datasource.initAsync(context.network, PunkTypes.ProviderType.WEBSOCKET);\r\n        emitter.emitVisibilityChanged(WebUtil.getDocumentState());\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.ReInit, handleEvent);\r\n    return () => {\r\n      logger.info(\"emitter.off(GlobalEvent.ReInit, handleEvent)\")();\r\n      emitter.off(PunkTypes.GlobalEvent.ReInit, handleEvent);\r\n    };\r\n  }, [emitter, context.datasource, context.network]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = async () => {\r\n      const state = WebUtil.getDocumentState();\r\n      if (visibility !== state) {\r\n        if (state === PunkTypes.DocumentState.Active) {\r\n          // await context.datasource.initAsync(context.network);\r\n        }\r\n        logger.info(`visibilitychange before ${visibility} after ${state}`)();\r\n        setVisibility(state);\r\n        emitter.emitVisibilityChanged(state);\r\n      }\r\n    }\r\n    document.addEventListener('visibilitychange', handleEvent);\r\n    return () => {\r\n      logger.info(\"removeEventListener visibilitychange\")();\r\n      document.removeEventListener('visibilitychange', handleEvent);\r\n    };\r\n  }, [emitter, visibility, context.datasource, context.network]);\r\n\r\n  return (\r\n    <MainWrapper>\r\n      <HashRouter basename={basename}>\r\n        <Header />\r\n        <MainScroll>\r\n          <ContractQuota></ContractQuota>\r\n          <Routes>\r\n            <Route path=\"/account/:address\" element={<AccountDetails />} />\r\n            <Route path=\"/marketplace\" element={<MarketplaceBrowse />} />\r\n            <Route path=\"/marketplace/:tab\" element={<MarketplaceBrowse />} />\r\n            <Route path=\"/marketplace/item/:id\" element={<MarketplaceItem />} />\r\n            <Route path=\"/punk/:id\" element={<PunkDetails />} />\r\n            <Route path=\"/test-image\" element={<TestImage />} />\r\n            <Route path=\"/test-list\" element={<TestList />} />\r\n            <Route path=\"/test\" element={<Test />} />\r\n            <Route path=\"/\" element={<LandingMain />} />\r\n          </Routes>\r\n          <MintDialog></MintDialog>\r\n          <ConfirmTransactionDialog></ConfirmTransactionDialog>\r\n        </MainScroll>\r\n      </HashRouter>\r\n    </MainWrapper>\r\n  )\r\n}\r\n","import { ApolloProvider } from '@apollo/client';\r\nimport { LocalizationProvider } from '@mui/lab';\r\nimport DateAdapter from '@mui/lab/AdapterMoment';\r\nimport { styled } from '@mui/material/styles';\r\nimport { SnackbarProvider } from 'notistack';\r\nimport React from 'react';\r\nimport { CommonConfig } from 'vitepunks-common';\r\nimport { getApolloClient } from './clients/apollo.client';\r\nimport { getClientConfig } from './common/config';\r\nimport { ClientConstants } from './common/constants';\r\nimport { ConnectedWeb3 } from './contexts/connectedWeb3';\r\nimport { Web3Provider } from './contexts/web3';\r\nimport { Main } from './features/main/components/main';\r\n\r\nconst Background = styled('div')(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  background-image: url('${ClientConstants.BG_URL}');\r\n`,\r\n);\r\n\r\nconst App: React.FC = () => {\r\n  const clientConfig = getClientConfig();\r\n  CommonConfig.init(clientConfig);\r\n  const apolloClient = React.useMemo(() => getApolloClient(), [])\r\n  // Almost never return exponential notation\r\n  // BigNumber.config({ EXPONENTIAL_AT: 1e+9 })\r\n  return (\r\n    <LocalizationProvider dateAdapter={DateAdapter}>\r\n      <Background>\r\n        <SnackbarProvider maxSnack={3}>\r\n          <ApolloProvider client={apolloClient}>\r\n            <Web3Provider>\r\n              <ConnectedWeb3>\r\n                <Main />\r\n              </ConnectedWeb3>\r\n            </Web3Provider>\r\n          </ApolloProvider>\r\n        </SnackbarProvider>\r\n      </Background>\r\n    </LocalizationProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import CssBaseline from '@mui/material/CssBaseline';\r\nimport { ThemeProvider } from '@mui/material/styles';\r\nimport * as React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport theme from './theme';\r\n\r\nReactDOM.render(\r\n  <ThemeProvider theme={theme}>\r\n    {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\r\n    <CssBaseline />\r\n    <App />\r\n  </ThemeProvider>,\r\n  document.querySelector('#root'),\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./common.util\"), exports);\r\n__exportStar(require(\"./compress.util\"), exports);\r\n__exportStar(require(\"./emitter\"), exports);\r\n__exportStar(require(\"./ensure\"), exports);\r\n__exportStar(require(\"./explorer.util\"), exports);\r\n__exportStar(require(\"./file.util\"), exports);\r\n__exportStar(require(\"./filter.util\"), exports);\r\n__exportStar(require(\"./format.util\"), exports);\r\n__exportStar(require(\"./logger\"), exports);\r\n__exportStar(require(\"./retry.util\"), exports);\r\n__exportStar(require(\"./task\"), exports);\r\n__exportStar(require(\"./token.util\"), exports);\r\n__exportStar(require(\"./transform.util\"), exports);\r\n__exportStar(require(\"./types\"), exports);\r\n__exportStar(require(\"./url.util\"), exports);\r\n"],"sourceRoot":""}
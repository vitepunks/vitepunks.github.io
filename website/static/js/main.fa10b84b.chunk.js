(this["webpackJsonpvite-punks"]=this["webpackJsonpvite-punks"]||[]).push([[0],{12:function(e,t,n){"use strict";var r,a,c;n.d(t,"a",(function(){return r})),n.d(t,"g",(function(){return b})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return o})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"h",(function(){return h})),function(e){e[e.Unknown=0]="Unknown",e[e.Hidden=1]="Hidden",e[e.Active=2]="Active"}(r||(r={})),function(e){e.MetaMask="MetaMask"}(a||(a={})),function(e){e[e.ASC=0]="ASC",e[e.DESC=1]="DESC"}(c||(c={}));var i,s,o,u,l,d,f,h,b={Punk:"Punk",PunkEvent:"PunkEvent",MarketBid:"MarketBid",MarketOffer:"MarketOffer"};!function(e){e[e.ID=0]="ID",e[e.RANK=1]="RANK"}(i||(i={})),function(e){e[e.BID=0]="BID",e[e.OFFER=1]="OFFER"}(s||(s={})),function(e){e[e.Unknown=0]="Unknown",e[e.Mint=1]="Mint",e[e.Offer=2]="Offer",e[e.NewBid=3]="NewBid",e[e.CancelBid=4]="CancelBid",e[e.Buy=5]="Buy",e[e.CancelOffer=6]="CancelOffer"}(o||(o={})),function(e){e.Items="items",e.Activity="activity"}(u||(u={})),function(e){e[e.Unknown=0]="Unknown",e[e.Start=1]="Start",e[e.Stop=2]="Stop",e[e.MintPrice=3]="MintPrice",e[e.ActionPrice=4]="ActionPrice"}(l||(l={})),function(e){e.ReInit="ReInit",e.DocumentVisibilityChanged="DocumentVisibilityChanged",e.ConfirmTransactionDialog="ConfirmTransactionDialog",e.ConnectWalletDialog="ConnectWalletDialog",e.QuotaChanged="QuotaChanged",e.PunkFilterValuesChanged="PunkFilterValuesChanged",e.MarketChanged="MarketChanged",e.PunkChanged="PunkChanged"}(d||(d={})),function(e){e.Account="Account",e.Contract="Contract"}(f||(f={})),function(e){e.MarketChanged="MarketChanged",e.PunkChanged="PunkChanged"}(h||(h={}))},146:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return A}));var r=n(23),a=n(4),c=n(3),i=n.n(c),s=n(6),o=n(19),u=n(20),l=n(48),d=n(24),f=n.n(d),h=n(17),b=n(18),p=n(34),v=n(26),j=n(207),m=n(208),O=n(51),g=n(278).WS_RPC,y=Object(v.a)(),x={retryTimes:10,retryInterval:1e3},k=function(){function t(){var e=this;Object(o.a)(this,t),this._network=void 0,this._retryCount=void 0,this._isConnected=void 0,this._connector=void 0,this._provider=void 0,this._client=void 0,this._emitter=void 0,this._walletManager=void 0,this._connectorFactory=void 0,this.initAsync=function(){var t=Object(s.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){y.info("initAsync",n)(),e._network=n,e._connector=e._connectorFactory.create(n),e._provider=new g(n.rpcUrl,1e4,x);var a=!1;e._provider.on("close",(function(){y.info("Vite provider closed")(),e._emitter.emitReInit()})),e._provider.on("error",(function(t){y.error("Vite provider error",e._retryCount)(),a||(e._isConnected=!1,e._retryCount>=x.retryTimes?r(t):e._retryCount++)})),e._client=new l.ViteAPI(e._provider,(function(){y.info("ViteAPI connected to ".concat(e._provider.path))(),a=!0,e._retryCount=0,e._isConnected=!0,t()}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this._retryCount=0,this._isConnected=!1,this._emitter=Object(p.a)(),this._walletManager=Object(O.h)(),this._connectorFactory=new O.e(this._walletManager)}return Object(u.a)(t,[{key:"isConnected",get:function(){return this._isConnected}},{key:"connector",get:function(){return this._connector}},{key:"dispose",value:function(){var e;y.info("Disposing ViteClient")(),null===(e=this._provider)||void 0===e||e.destroy(),this._isConnected=!1}},{key:"encodeParameter",value:function(e,t){return l.abi.encodeParameter(e,t)}},{key:"encodeLogSignature",value:function(e,t){return l.abi.encodeLogSignature(e,t)}},{key:"requestAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r,a,c,o=this,u=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=u.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=u[a];if(!this._isConnected||!this._client){e.next=6;break}return c=j.a.promiseRetry(Object(s.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(n=o._client).request.apply(n,[t].concat(r)).catch(function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===t||void 0===t||null===(n=t.message)||void 0===n?void 0:n.toLowerCase().includes("connection error"))){e.next=8;break}return y.error("CONNECTION ERROR -> reconnect",o._network)(),o._emitter.emitReInit(),e.next=5,b.a.timeout(3e3);case 5:case 8:throw t;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))),e.abrupt("return",c);case 6:throw new Error("Vite client is not ready to make requests.");case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSnapshotChainHeightAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestAsync("ledger_getSnapshotChainHeight");case 2:return t=e.sent,e.abrupt("return",new f.a(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccountBlockHeightAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestAsync("ledger_getAccountInfoByAddress",t);case 2:return n=e.sent,e.abrupt("return",new f.a(n.blockCount));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBalanceAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestAsync("ledger_getAccountInfoByAddress",t);case 2:return n=e.sent,e.abrupt("return",new f.a(n.balanceInfoMap[h.a.VITE_TOKEN_ID].balance));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQuotaAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestAsync("contract_getQuotaByAccount",t);case 2:return n=e.sent,e.abrupt("return",{currentQuota:new f.a(n.currentQuota),maxQuota:new f.a(n.maxQuota),stakeAmount:new f.a(n.stakeAmount)});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var a,c,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>3&&void 0!==s[3]?s[3]:h.a.VITE_TOKEN_ID,c=l.accountBlock.createAccountBlock("send",{address:t.address,toAddress:n,tokenId:a,amount:r}),e.abrupt("return",this.sendAccountBlockAsync(t,c));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"stakeForQuotaAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.accountBlock.createAccountBlock("stakeForQuota",{address:t.address,beneficiaryAddress:n,amount:r}),e.abrupt("return",this.sendAccountBlockAsync(t,a));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"callContractAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r,a,c){var s,o,u,d=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>5&&void 0!==d[5]?d[5]:"0",o=d.length>6&&void 0!==d[6]?d[6]:h.a.VITE_TOKEN_ID,u=l.accountBlock.createAccountBlock("callContract",{address:t.address,abi:r,methodName:n,tokenId:o,amount:s,toAddress:c,params:a}),e.abrupt("return",this.sendAccountBlockAsync(t,u));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,c){return e.apply(this,arguments)}}()},{key:"createContractAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 1,10,1,a=l.accountBlock.createAccountBlock("createContract",{address:t.address,abi:n,code:r,responseLatency:1,params:[],quotaMultiplier:10,randomDegree:1}),e.abrupt("return",this.sendAccountBlockAsync(t,a));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"callOffChainMethodAsync",value:function(){var t=Object(s.a)(i.a.mark((function t(n,r,a,c){var s,o,u,d,f,h,b,p,v;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=l.abi.encodeFunctionCall(r,c),o=e.from(s,"hex").toString("base64"),t.next=4,this.requestAsync("contract_callOffChainMethod",{selfAddr:n,offChainCode:a,data:o});case 4:if(!(u=t.sent)){t.next=13;break}for(d=e.from(u,"base64").toString("hex"),f=[],h=0;h<r.outputs.length;h++)f.push(r.outputs[h].type);if(b=l.abi.decodeParameters(f,d),p=[],b)for(v=0;v<r.outputs.length;v++)r.outputs[v].name?p.push({name:r.outputs[v].name,value:b[v]}):p.push({name:"",value:b[v]});return t.abrupt("return",p);case 13:return t.abrupt("return","");case 14:case"end":return t.stop()}}),t,this)})));return function(e,n,r,a){return t.apply(this,arguments)}}()},{key:"decodeVmLog",value:function(e,t){for(var n=e.topics,r=0;r<t.length;r++){var a=t[r];if(l.abi.encodeLogSignature(a)===n[0]){var c=this.decodeVmLogByAbiItem(e,a);if(c)return c}}}},{key:"decodeVmLogByAbiItem",value:function(e,t){if(e&&e.data&&e.topics){var n=e.topics;return{topic:n[0],args:l.abi.decodeLog(t.inputs,l.utils._Buffer.from(e.data,"base64").toString("hex"),n.slice(1)),event:t.name}}}},{key:"getEventsByBlockAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r,c){var s,o,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.gt(r)){e.next=3;break}return y.info("getEventsByBlockAsync ".concat(n.toFixed()," > ").concat(r.toFixed()))(),e.abrupt("return",[]);case 3:return s={addressHeightRange:Object(a.a)({},t,{fromHeight:n.toFixed(),toHeight:r.toFixed()}),topics:c},e.prev=4,e.next=7,this.requestAsync("ledger_getVmLogsByFilter",s);case 7:return o=e.sent,e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(4),u=n.plus(r).div(2),y.info("Divide and conquer block fromHeight: ".concat(n.toFixed()," toHeight: ").concat(r.toFixed()," midHeight: ").concat(u.toFixed()))(),e.next=17,this.getEventsByBlockAsync(t,u.plus(1),r,c);case 17:return l=e.sent,e.abrupt("return",l);case 19:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"createAddressListenerAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={addressHeightRange:Object(a.a)({},t,{fromHeight:"0",toHeight:"0"})},e.next=3,null===(n=this._client)||void 0===n?void 0:n.subscribe("createVmlogSubscription",r);case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeListener",value:function(e){var t;y.info("removeListener")(),null===(t=this._client)||void 0===t||t.unsubscribe(e)}},{key:"waitForNextVmLogEventAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("waitForNextVmLogEvent")(),e.abrupt("return",new Promise(function(){var e=Object(s.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.on(function(){var e=Object(s.a)(i.a.mark((function e(t){var c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===t.length){e.next=3;break}throw console.log(t),new Error("Unexpected results");case 3:c=t[t.length-1],s=r.decodeVmLog(c.vmlog,n),y.info("vmLog",s)(),a(s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"waitForAccountBlockAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(i.a.mark((function e(c,o){var u,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=void 0,l=void 0,d=Date.now(),new m.a(Object(s.a)(i.a.mark((function e(){var c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(Date.now()-d>=1e4)){e.next=3;break}throw new Error("Task timed out");case 3:return e.next=5,a.requestAsync("ledger_getAccountBlockByHeight",t,n);case 5:if(c=e.sent){e.next=8;break}return e.abrupt("return",!0);case 8:if(s=c.receiveBlockHash){e.next=11;break}return e.abrupt("return",!0);case 11:return e.next=13,a.requestAsync("ledger_getAccountBlockByHash",s);case 13:if(o=e.sent){e.next=16;break}return e.abrupt("return",!0);case 16:return u=Object(r.a)(Object(r.a)({},a.getAccountBlockStatus(o)),{},{accountBlock:o}),e.abrupt("return",!1);case 20:return e.prev=20,e.t0=e.catch(0),l=e.t0,e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,null,[[0,20]])}))),500).start((function(){l?o(l):c(u)}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"receiveTransactionAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}return e.next=3,this.requestAsync("ledger_getUnreceivedBlocksByAddress",t.address,0,1);case 3:(r=e.sent)&&r.length>0&&(n=r[0]);case 5:if(n){e.next=8;break}return y.info("No Unreceived Blocks: ".concat(t.address))(),e.abrupt("return");case 8:return a=l.accountBlock.createAccountBlock("receive",{address:t.address,sendBlockHash:n.hash}),e.abrupt("return",this.sendAccountBlockAsync(t,a));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"receiveAllOnroadTxAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=10,e.next=3,this.requestAsync("ledger_getUnreceivedBlocksByAddress",t.address,0,n);case 3:r=e.sent,a=0;case 5:if(!(a<r.length)){e.next=12;break}return c=r[a],e.next=9,this.receiveTransactionAsync(t,c);case 9:a++,e.next=5;break;case 12:if(!(r.length>=n)){e.next=15;break}return e.next=15,this.receiveAllOnroadTxAsync(t);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendAccountBlockAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof O.g)){e.next=10;break}return n=n.setProvider(this._client).setPrivateKey(t.privateKey),e.next=4,n.autoSetPreviousAccountBlock();case 4:return e.next=6,n.sign().send();case 6:return r=e.sent,e.abrupt("return",r);case 10:if(!(t instanceof O.b)){e.next=30;break}if(!this.connector){e.next=27;break}return this._emitter.emitConfirmTransactionDialog(!0),e.prev=13,e.next=16,this.connector.sendTransactionAsync({block:n.accountBlock});case 16:return a=e.sent,this._emitter.emitConfirmTransactionDialog(!1),e.abrupt("return",a);case 21:throw e.prev=21,e.t0=e.catch(13),this._emitter.emitConfirmTransactionDialog(!1),e.t0;case 25:e.next=28;break;case 27:throw new Error("Connector is not defined");case 28:e.next=31;break;case 30:throw new Error("Account not supported");case 31:case"end":return e.stop()}}),e,this,[[13,21]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAccountBlockStatus",value:function(e){var t=this.resolveAccountBlockData(e),n="";switch(t){case 0:n="0, Execution succeed";break;case 1:n="1, Execution reverted";break;case 2:n="2, Max call depth exceeded"}return{status:t,statusTxt:n}}},{key:"resolveAccountBlockData",value:function(e){if(4!==e.blockType&&5!==e.blockType||!e.data)return 0;var t=l.utils._Buffer.from(e.data,"base64");return 33!==t.length?0:t[32]}}]),t}(),w=new k,A=function(){return w}}).call(this,n(193).Buffer)},17:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d}));var r=n(24),a=n.n(r),c=n(12),i=n(40),s={APP_NAME:"VitePunks",PUNK_NAME:"VitePunk",USE_MOCK_DATASOURCE:!1,NETWORK_ID:2,WEB_WALLET_STORAGE_SPACE:"VITEPUNKS_WEB_WALLET",SESSION_WALLET_STORAGE_SPACE:"VITEPUNKS_SESSION_WALLET",BG_URL:"./assets/images/bg.png",ITEM_BG_URL:"./assets/images/item_bg.png",SAMPLE_PUNK_URL:"./assets/images/punk_8311.png",LANDING_IMAGE_URL:"./assets/images/landing.png",QUOTA_WIKI_URL:"https://github.com/vitepunks/resources/wiki",MARKET_DATA_URL:"https://raw.githubusercontent.com/vitepunks/analytics/master/market_data/raw.json",DISCORD_URL:"https://discord.gg/FsB2uZTn5u",TWITTER_URL:"https://twitter.com/VitePunks",GITHUB_URL:"https://github.com/vitepunks",QUOTA_THRESHOLD:new a.a("100000"),CDN_URL:"https://cdn.vitepunks.com/",EXPLORER_URL:"https://buidl.viteview.xyz/#/",ZERO_ADDRESS:"vite_0000000000000000000000000000000000000000a4f3a0cb58",VITE_TOKEN_ID:"tti_5649544520544f4b454e6e40",CURRENCY_NAME:"VITE",CURRENCY_DECIMALS:18,TOTAL_MINTS:1e4},o=[{id:0,networkId:0,name:"UNKNOWN",rpcUrl:"",connectorUrl:""},{id:1,networkId:1,name:"MAINNET",rpcUrl:"wss://node.vite.net/gvite/ws",connectorUrl:"wss://biforst.vite.net"},{id:2,networkId:2,name:"TESTNET",rpcUrl:"wss://buidl.vite.net/gvite/ws",connectorUrl:"wss://biforst.vite.net"},{id:3,networkId:2,name:"TESTNET+MOCK",rpcUrl:"wss://buidl.vite.net/gvite/ws",connectorUrl:"wss://biforst.vite.net"},{id:4,networkId:5,name:"DEBUG",rpcUrl:"ws://localhost:23457",connectorUrl:"wss://biforst.vite.net"}],u=(i.a.ASC,i.a.DESC,[{name:"Id",type:i.b.ID},{name:"Rank",type:i.b.RANK},{name:"Bid",type:i.b.BID},{name:"Price",type:i.b.OFFER}]),l=[{name:"Unknown",type:c.f.Unknown.toString()},{name:"Mint",type:c.f.Mint.toString()},{name:"List",type:c.f.Offer.toString()},{name:"New bid",type:c.f.NewBid.toString()},{name:"Cancel bid",type:c.f.CancelBid.toString()},{name:"Buy",type:c.f.Buy.toString()},{name:"Clear",type:c.f.CancelOffer.toString()}],d={sortBy:i.b.ID,orderBy:i.a.DESC,search:""}},18:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r=n(3),a=n.n(r),c=n(6),i=n(19),s=n(20),o=n(175),u=n.n(o),l=n(293),d=n(12),f=function(){function t(){Object(i.a)(this,t)}return Object(s.a)(t,null,[{key:"isString",value:function(e){return"string"===typeof e||e instanceof String}},{key:"isNumber",value:function(e){return!isNaN(parseInt(e))&&isFinite(e)}},{key:"isNullOrWhitespace",value:function(e){return!t.isString(e)||(null===e||void 0===e||""===e.trim())}},{key:"isNullOrDefault",value:function(e,n){return t.isNullOrWhitespace(e)||e===n}},{key:"timeout",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"toJsonString",value:function(e){return JSON.stringify(e,null,2)}},{key:"toUint8Array",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";return new Uint8Array(e.from(t,n))}},{key:"imageUrlToBlob",value:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.abrupt("return",e.sent.blob());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"random",value:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},{key:"calculatePercentage",value:function(e,t){try{if(e&&t)return Math.floor(u()(e).div(u()(t)).mul(100).toNumber())}catch(n){}return 0}},{key:"calculateMaxRows",value:function(e,t,n){return Math.min(Math.min(e-t*n,t),e)}},{key:"uuid",value:function(){return Object(l.a)()}},{key:"appendPath",value:function(e,n){if(!e||!n||t.isNullOrWhitespace(e)||t.isNullOrWhitespace(n))return e;var r=n.startsWith("/")?n.substring(1,n.length):n;return e.endsWith("/")?e+r:e+"/"+r}}]),t}();f.truncateString=function(e,t){return e&&t<e.length?"".concat(e.substring(0,t),"..."):e},f.truncateStringInTheMiddle=function(e,t,n){if(e&&t+n<e.length)return"".concat(e.substring(0,t),"...").concat(e.substring(e.length-n,e.length));return e},f.getDocumentState=function(){return"hidden"===document.visibilityState?d.a.Hidden:d.a.Active}}).call(this,n(193).Buffer)},207:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3),a=n.n(r),c=n(6),i=n(19),s=n(20),o=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,null,[{key:"promiseRetry",value:function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c,i=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:5,c=i.length>2?i[2]:void 0,t.next=4,new Promise((function(e){return setTimeout(e,1e3*(5-r))}));case 4:return t.abrupt("return",r?n().catch((function(t){return e.promiseRetry(n,r-1,t)})):Promise.reject(c));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}()},208:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3),a=n.n(r),c=n(6),i=n(19),s=n(20),o=function(){function e(t,n){return Object(i.a)(this,e),this._taskTimer=void 0,this._taskInterval=void 0,this._task=void 0,this._callback=void 0,this._task=t,this._taskInterval=n,this}return Object(s.a)(e,[{key:"_run",value:function(){var e=this;this._taskTimer=setTimeout(Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._task){t.next=3;break}return e._onStop(),t.abrupt("return");case 3:return t.next=5,e._task();case 5:if(t.sent){t.next=8;break}return e._onStop(),t.abrupt("return");case 8:e._run();case 9:case"end":return t.stop()}}),t)}))),this._taskInterval)}},{key:"_onStop",value:function(){this._callback&&this._callback()}},{key:"start",value:function(e){this._callback=e,this._taskTimer||this._run()}},{key:"stop",value:function(){this._onStop(),this._taskTimer&&(window.clearTimeout(this._taskTimer),this._taskTimer=void 0)}}]),e}()},26:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(20),a=n(19),c=n(41),i=n(18),s=function e(t){Object(a.a)(this,e),this.banner=void 0,this.args=void 0,Object.assign(this,t)},o=function(){},u=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,[{key:"isEnabled",get:function(){return c.a.ENABLE_LOGGER}},{key:"timestamp",value:function(e){return"[".concat(e," ").concat((new Date).toLocaleTimeString(),"]")}},{key:"createLogEventModel",value:function(e){for(var t=function(e){return i.a.isString(e)?e:e instanceof Error?e.message:i.a.toJsonString(e)},n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var c=new s({banner:this.timestamp(e),args:null===r||void 0===r?void 0:r.map((function(e){return Array.isArray(e)?e.map((function(e){return t(e)})):t(e)}))});return c}},{key:"debug",get:function(){var e=this;return this.isEnabled?function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var c=e.createLogEventModel("DEBUG",r);return(t=Function.prototype.bind).call.apply(t,[console.debug,console,c.banner].concat(r))}:function(){return o}}},{key:"info",get:function(){var e=this;return this.isEnabled?function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var c=e.createLogEventModel("INFO",r);return(t=Function.prototype.bind).call.apply(t,[console.info,console,c.banner].concat(r))}:function(){return o}}},{key:"warn",get:function(){var e=this;return this.isEnabled?function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var c=e.createLogEventModel("WARN",r);return(t=Function.prototype.bind).call.apply(t,[console.warn,console,c.banner].concat(r))}:function(){return o}}},{key:"error",get:function(){var e=this;return function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(null===r||void 0===r?void 0:r.length)>0&&(i.a.isString(r[0])||r.push("(See console output for more information.)"));var c=e.createLogEventModel("ERROR",r);return(t=Function.prototype.bind).call.apply(t,[console.error,console,c.banner].concat(r))}}}]),e}(),l=new u,d=function(){return l}},282:function(e,t,n){},283:function(e,t,n){"use strict";n.r(t);var r,a=n(358),c=n(374),i=n(1),s=n.n(i),o=n(78),u=n.n(o),l=n(357),d=n(355),f=n(356),h=n(7),b=n(158),p=n(23),v=n(19),j=n(20),m=n(45),O=n(44),g=n(360),y=n(362),x=n(340),k=n(24),w=n.n(k),A=n(363),_=n(3),C=n.n(_),S=n(6),E=n(41),B=n(17),I=n(29),M=n(55),P=n(202),N=n(100),T=n(18),F=n(26),R=Object(F.a)(),L=new(function(){function e(){Object(v.a)(this,e),this._index=void 0,this.clear()}return Object(j.a)(e,[{key:"clear",value:function(){this._index=new P.Document({document:{id:"id",tag:"attributes",index:["id"]}})}},{key:"index",value:function(e){if(e){this.clear();var t,n=Object(M.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._index.add(r)}}catch(a){n.e(a)}finally{n.f()}}}},{key:"search",value:function(e,t){try{if(!t||T.a.isNullOrWhitespace(e))return t;if(T.a.isNumber(e)){var n=parseInt(e);if(n>0){var r=t[n-1];return r?[r]:[]}}var a=this._index.search({tag:e.split(","),limit:1e4}).map((function(e){return e.result}));if(a.length>0){if(1===a.length)return this.enrich(a[0].map((function(e){return e.toString()})),t);var c=N.intersection.apply(void 0,Object(I.a)(a));return this.enrich(c.map((function(e){return e.toString()})),t)}return}catch(i){return void R.error(i)()}}},{key:"enrich",value:function(e,t){return Object(N.intersectionWith)(t,e,(function(e,t){return e.id===t}))}}]),e}()),D=n(176),W=function(){function e(){Object(v.a)(this,e)}return Object(j.a)(e,null,[{key:"compress",value:function(e){return D.a.gzip(e,{to:"string"})}},{key:"decompress",value:function(e){return D.a.ungzip(e,{to:"string"})}}]),e}(),U=n(34),q=function(){function e(){Object(v.a)(this,e)}return Object(j.a)(e,null,[{key:"notNull",value:function(e,t,n){if(null===e||void 0===e)throw n?new Error(n):new Error("Unexpected null exception. "+t)}},{key:"notNullOrWhiteSpace",value:function(e,t,n){if(null===e||void 0===e||""===(null===e||void 0===e?void 0:e.trim()))throw n?new Error(n):new Error("Unexpected null exception. "+t)}},{key:"maxLength",value:function(e,t,n){if(e&&e.length>n)throw new Error("".concat(t," exceeds the maximum length of ").concat(n))}}]),e}(),H=n(204),V=n.n(H),Q=function e(){Object(v.a)(this,e)},$=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"readFileAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r,a=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"utf8",e.next=3,fetch(t);case 3:r=e.sent,e.t0=n,e.next="binary"===e.t0?7:8;break;case 7:return e.abrupt("return",r.arrayBuffer());case 8:return e.abrupt("return",r.text());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Q),z=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"readFileAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"utf8",e.abrupt("return",Promise.resolve(V.a.readFileSync(t,n)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Q);!function(e){e[e.Browser=0]="Browser",e[e.Local=1]="Local"}(r||(r={}));var G,K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Browser;return e===r.Local?new z:new $},Y=n(40),J=function(){function e(){Object(v.a)(this,e)}return Object(j.a)(e,null,[{key:"sortPunks",value:function(e,t,n){if(!n||!e||!t)return n;switch(e){case Y.b.ID:return Object(N.orderBy)(n,(function(e){return Number(e.id)}),t===Y.a.ASC?"asc":"desc");case Y.b.RANK:return Object(N.orderBy)(n,(function(e){return e.rank}),t===Y.a.ASC?"asc":"desc");case Y.b.BID:return n.filter((function(e){return!!e.bid&&e.bid.amount.gt(0)})).sort((function(e,n){var r,a,c,i,s=null!==(r=null===(a=e.bid)||void 0===a?void 0:a.amount)&&void 0!==r?r:new w.a(0),o=null!==(c=null===(i=n.bid)||void 0===i?void 0:i.amount)&&void 0!==c?c:new w.a(0);return t===Y.a.ASC?s.gt(o)?1:-1:s.gt(o)?-1:1}));case Y.b.OFFER:return n.filter((function(e){return!!e.offer&&e.offer.minAmount.gt(0)})).sort((function(e,n){var r,a,c,i,s=null!==(r=null===(a=e.offer)||void 0===a?void 0:a.minAmount)&&void 0!==r?r:new w.a(0),o=null!==(c=null===(i=n.offer)||void 0===i?void 0:i.minAmount)&&void 0!==c?c:new w.a(0);return t===Y.a.ASC?s.gt(o)?1:-1:s.gt(o)?-1:1}));default:return n}}}]),e}(),Z=n(63),X=n.n(Z),ee=function(){function e(){Object(v.a)(this,e),X.a.locale(navigator.language)}return Object(j.a)(e,[{key:"setLocale",value:function(e){X.a.locale(e)}},{key:"get",value:function(){return X()()}},{key:"getFromUnix",value:function(e){return X.a.unix(e)}},{key:"getFromMilliseconds",value:function(e){return X()(e,"x")}},{key:"getLocal",value:function(e){return X.a.utc(e).local()}},{key:"getLocalTime",value:function(e){return this.getLocal(e).format("LTS")}},{key:"getLocalDate",value:function(e){return this.getLocal(e).format("L")}},{key:"getLocalFormatted",value:function(e){return this.getLocalTime(e)+" "+this.getLocalDate(e)}},{key:"getLocalReverseFormatted",value:function(e){return this.getLocalDate(e)+" "+this.getLocalTime(e)}},{key:"getDuration",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"seconds",n=X()(e).unix()-X()().unix();return X.a.duration(n,t)}},{key:"isExpired",value:function(e){try{return!!e&&X.a.utc().unix()>=Number(e)}catch(t){return!1}}}]),e}(),te=n(12),ne=n(51),re=Object(F.a)(),ae=function(){function e(){Object(v.a)(this,e),this._punkInfos=void 0,this._emitter=void 0,this._moment=new ee,this._fileUtil=void 0,this._actionPrice=void 0,this._mintPrice=void 0,this._walletManager=void 0,this._punkSearch=void 0,this._punkAttributes=void 0,this._punks=void 0,this._punksFiltered=void 0,this._emitter=Object(U.a)(),this._fileUtil=K(),this._walletManager=Object(ne.h)(),this._punkSearch=L,this.clear()}return Object(j.a)(e,[{key:"clear",value:function(){this._punkAttributes=[],this._punks=[],this._punksFiltered={sortBy:B.b.sortBy,orderBy:B.b.orderBy,searchTerm:B.b.search,items:[]}}},{key:"initPunkAttributesAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fileUtil.readFileAsync("./assets/data/punk_attributes.json");case 2:t=e.sent,t=JSON.parse(t),this._punkAttributes=t;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initPunksAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t,n,r,a,c,i,s,o,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fileUtil.readFileAsync("./assets/data/punks.gz","binary");case 2:for(t=e.sent,t=JSON.parse(W.decompress(T.a.toUint8Array(t))),(n=this._punkInfos)&&n.length===B.a.TOTAL_MINTS||(re.info("Invalid punk infos")(),n=this.getDefaultPunkInfos()),r=0;r<t.length;r++)s=t[r],o=n[r],u={__typename:te.g.Punk,id:s.index.toString(),rank:s.rank,image:s.image,attributes:s.attributes,owner:null!==(a=o.owner)&&void 0!==a?a:null,bid:null!==(c=o.bid)&&void 0!==c?c:null,offer:null!==(i=o.offer)&&void 0!==i?i:null},this._punks.push(u),this._punksFiltered.orderBy===Y.a.ASC?this._punksFiltered.items.push(u):this._punksFiltered.items.unshift(u);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initBaseAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re.info("Init BaseDataSource")(),this._moment=new ee,this.clear(),e.next=5,this.initAsync(t);case 5:return e.next=7,this.initPunkAttributesAsync();case 7:return e.next=9,this.initPunkInfosAsync();case 9:return e.next=11,this.initPunksAsync();case 11:this._punkSearch.index(this._punks);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){re.info("Disposing BaseDataSource")(),this.disposeProtected()}},{key:"getAccount",value:function(){var e=this._walletManager.getActiveAccount();return q.notNull(e,"account","Please connect your wallet first."),e}},{key:"getPunkAttributesAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._punkAttributes);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPunkAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.a.isNumber(t)){e.next=2;break}throw new Error("Invalid punk identifier.");case 2:if(!((n=parseInt(t)-1)<0||n>=this._punks.length)){e.next=5;break}throw new Error("Punk does not exist.");case 5:return e.abrupt("return",this._punks[n]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPunksAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n,r,a,c){var i,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._punksFiltered.searchTerm===c&&this._punksFiltered.sortBy===r&&this._punksFiltered.orderBy===a||(re.info("limit",t,"offset",n,"sort",r,"order",a)(),this._punksFiltered.searchTerm=c,this._punksFiltered.items=null!==(i=this._punkSearch.search(c,this._punks))&&void 0!==i?i:[],this._punksFiltered.sortBy=r,this._punksFiltered.orderBy=a,this._punksFiltered.items=null!==(s=J.sortPunks(this._punksFiltered.sortBy,this._punksFiltered.orderBy,this._punksFiltered.items))&&void 0!==s?s:[]),e.abrupt("return",this._punksFiltered.items.slice(n,n+t));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,c){return e.apply(this,arguments)}}()},{key:"getPunksAllAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._punks);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getActionPriceAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._actionPrice){e.next=5;break}return e.next=3,this.getMarketInfoAsync();case 3:t=e.sent,this._actionPrice=t.actionPrice;case 5:return e.abrupt("return",this._actionPrice);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMintPriceAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._mintPrice){e.next=5;break}return e.next=3,this.getMarketInfoAsync();case 3:t=e.sent,this._mintPrice=t.mintPrice;case 5:return e.abrupt("return",this._mintPrice);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createId",value:function(){return T.a.uuid()}},{key:"getDefaultPunkInfos",value:function(){for(var e=[],t=1;t<=B.a.TOTAL_MINTS;t++)e.push({id:t.toString()});return e}}]),e}(),ce=function(){function e(){Object(v.a)(this,e)}return Object(j.a)(e,null,[{key:"defaultBigNumber",get:function(){return new k.BigNumber("0")}},{key:"toBigNumber",value:function(t){var n;return null!==(n=e.toMaybeBigNumber(t))&&void 0!==n?n:e.defaultBigNumber}},{key:"toMaybeBigNumber",value:function(e){return!e||T.a.isNullOrWhitespace(e)&&!T.a.isNumber(e)?null:new k.BigNumber(e)}},{key:"toAddress",value:function(e){return T.a.isNullOrWhitespace(e)||e===B.a.ZERO_ADDRESS?null:e}},{key:"toTimestamp",value:function(e){return e?Math.floor(e.getTime()/1e3).toString():"0"}},{key:"toPunkEvent",value:function(t){var n,r,a,c;return{__typename:null!==(n=t.__typename)&&void 0!==n?n:te.g.PunkEvent,id:null!==(r=t.id)&&void 0!==r?r:"".concat(t.accountBlockHash,"-").concat(t.accountBlockHeight,"-").concat(t.eventType),accountBlockHash:t.accountBlockHash,accountBlockHeight:e.toBigNumber(t.accountBlockHeight),timestamp:e.toBigNumber(t.timestamp),eventType:Number(t.eventType),punkId:t.punkId,amount:e.toBigNumber(t.amount),fromAddress:null!==(a=e.toAddress(t.fromAddress))&&void 0!==a?a:"",toAddress:null!==(c=e.toAddress(t.toAddress))&&void 0!==c?c:""}}},{key:"toPunkInfo",value:function(t){return t?{id:t.id,owner:t.owner,bid:e.toMarketBid(t.bid,t.id),offer:e.toMarketOffer(t.offer,t.id)}:null}},{key:"toMarketBid",value:function(t,n){var r;return t?{__typename:null!==(r=t.__typename)&&void 0!==r?r:te.g.MarketBid,itemIndex:e.toBigNumber(null!==n&&void 0!==n?n:t.itemIndex),bidder:t.bidder,amount:e.toBigNumber(t.amount)}:null}},{key:"toMarketOffer",value:function(t,n){var r,a;return t?{__typename:null!==(r=t.__typename)&&void 0!==r?r:te.g.MarketOffer,itemIndex:e.toBigNumber(null!==n&&void 0!==n?n:t.itemIndex),seller:t.seller,minAmount:e.toBigNumber(t.minAmount),onlySellTo:null!==(a=t.onlySellTo)&&void 0!==a?a:null}:null}}]),e}(),ie=Object(F.a)(),se=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(v.a)(this,n),(e=t.call(this))._events=void 0,e.clearMock(),e}return Object(j.a)(n,[{key:"clearMock",value:function(){this._events=[]}},{key:"initPunkInfosAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t,n,r,a,c,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fileUtil.readFileAsync("./assets/data/mock_infos.json");case 2:if(t=e.sent,t=JSON.parse(t),this._punkInfos=this.getDefaultPunkInfos(),t){n=Object(M.a)(t.punks);try{for(n.s();!(r=n.n()).done;)a=r.value,(c=ce.toPunkInfo(a))&&(i=parseInt(a.id)-1,this._punkInfos[i]=c)}catch(s){n.e(s)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("Init MockDataSource")(),this.clearMock(),e.next=4,this._fileUtil.readFileAsync("./assets/data/mock_events.json");case 4:for(n=e.sent,n=JSON.parse(n),r=0;r<n.length;r++)a=n[r],this._events.push(ce.toPunkEvent(a));this._events=this._events.reverse();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeProtected",value:function(){ie.info("Dispose MockDataSource")(),this.clearMock()}},{key:"getQuotaAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{currentQuota:new k.BigNumber("1000"),maxQuota:new k.BigNumber("2000"),stakeAmount:new k.BigNumber("10000")});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPunkEventsAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n,r,a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("id",t,"limit",n,"offset",r,"height",a)(),e.next=3,T.a.timeout(2e3);case 3:if(T.a.isNumber(t)){e.next=5;break}return e.abrupt("return",{blockHeight:ce.defaultBigNumber,events:[]});case 5:return e.abrupt("return",{blockHeight:ce.defaultBigNumber,events:this._events.filter((function(e){return e.punkId===parseInt(t)})).slice(r,r+n)});case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getPunkOwnerAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.timeout(2e3);case 2:if(T.a.isNumber(t)){e.next=4;break}return e.abrupt("return",void 0);case 4:if(n=this._events.find((function(e){return e.punkId.toString()===t&&e.eventType===te.f.Mint}))){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.abrupt("return",n.toAddress);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPunksByAddressAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n,r){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("_address",t,"limit",n,"offset",r)(),e.next=3,this.getPunkAsync("101");case 3:return e.t0=e.sent,e.next=6,this.getPunkAsync("201");case 6:return e.t1=e.sent,e.next=9,this.getPunkAsync("301");case 9:return e.t2=e.sent,e.next=12,this.getPunkAsync("401");case 12:return e.t3=e.sent,e.next=15,this.getPunkAsync("501");case 15:return e.t4=e.sent,e.next=18,this.getPunkAsync("601");case 18:return e.t5=e.sent,e.next=21,this.getPunkAsync("701");case 21:return e.t6=e.sent,e.next=24,this.getPunkAsync("801");case 24:return e.t7=e.sent,e.next=27,this.getPunkAsync("9999");case 27:return e.t8=e.sent,a=[e.t0,e.t1,e.t2,e.t3,e.t4,e.t5,e.t6,e.t7,e.t8],e.abrupt("return",a.slice(r,r+n));case 30:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getMarketBidAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.timeout(1e3);case 2:if(T.a.isNumber(t)){e.next=4;break}return e.abrupt("return",void 0);case 4:if(a=this._events.find((function(e){return e.punkId.toString()===t&&e.eventType===te.f.NewBid}))){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.abrupt("return",{__typename:te.g.MarketBid,itemIndex:ce.toBigNumber(t),bidder:null!==(n=a.fromAddress)&&void 0!==n?n:B.a.ZERO_ADDRESS,amount:null!==(r=a.amount)&&void 0!==r?r:ce.defaultBigNumber});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMarketOfferAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.timeout(1e3);case 2:if(T.a.isNumber(t)){e.next=4;break}return e.abrupt("return",void 0);case 4:if(r=this._events.find((function(e){return e.punkId.toString()===t&&e.eventType===te.f.Offer}))){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.next=9,this.getPunkOwnerAsync(t);case 9:return a=e.sent,e.abrupt("return",{__typename:te.g.MarketOffer,itemIndex:ce.toBigNumber(t),seller:null!==a&&void 0!==a?a:B.a.ZERO_ADDRESS,minAmount:null!==(n=r.amount)&&void 0!==n?n:ce.defaultBigNumber,onlySellTo:r.toAddress});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMarketEventsAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n,r){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("limit",t,"offset",n)(),e.next=3,T.a.timeout(500);case 3:return e.abrupt("return",{blockHeight:new k.BigNumber("0"),events:this._events.slice(n,n+t)});case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getMarketInfoAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("getMarketInfoAsync")(),e.abrupt("return",{marketStarted:!0,mintsRemaining:B.a.TOTAL_MINTS-this._events.filter((function(e){return e.eventType===te.f.Mint})).length,mintPrice:new k.BigNumber("12").shiftedBy(18),actionPrice:new k.BigNumber("3.1").shiftedBy(18)});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mintAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Method 'mintAsync' not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"offerAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n,r,a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("offerAsync","id",t,"tokenId",n,"amount",r,"address",a)(),e.next=3,T.a.timeout(2e3);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"cancelOfferAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("cancelOfferAsync","id",t)(),e.next=3,T.a.timeout(2e3);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"buyAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("buyAsync","id",t,"amount",n)(),e.next=3,T.a.timeout(2e3);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"bidAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("bidAsync","id",t,"amount",n)(),e.next=3,T.a.timeout(2e3);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"acceptBidAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("acceptBidAsync","id",t,"amount",n)(),e.next=3,T.a.timeout(2e3);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"cancelBidAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("cancelBidAsync","id",t)(),e.next=3,T.a.timeout(2e3);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ae),oe=new se,ue=n(206),le=n.n(ue),de=n(146),fe=function(){function e(){Object(v.a)(this,e)}return Object(j.a)(e,null,[{key:"formatMessage",value:function(e){var t="Something went wrong. Probably your account has insufficient balance or quota.";if(e){var n,r;if(console.log(e),T.a.isString(e))n=e;else e.message?n=e.message:(null===(r=e.error)||void 0===r?void 0:r.message)?n=e.error.message:e.graphQLErrors?n=e.graphQLErrors.length>0?e.graphQLErrors[0].message:t:"{}"===(n=JSON.stringify(e))&&(n=t);return n.length>128?n.substr(0,128)+"...":n}return t}},{key:"formatNumber",value:function(e){var t;return e?e.toLocaleString(null!==(t=navigator.language)&&void 0!==t?t:"en-US"):"0"}}]),e}(),he=Object(F.a)(),be=function(){function e(){Object(v.a)(this,e),this._fileUtil=void 0,this._minQuota=new w.a("10000"),this._client=void 0,this._contract=void 0,this.objectFromEntries=function(e){return Object.fromEntries(e.map((function(e){return[e.name,e.value]})))},this._fileUtil=K()}return Object(j.a)(e,[{key:"initAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._client=t,e.next=3,this.initAsyncProtected(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"contract",get:function(){return this._contract}},{key:"ensureQuotaAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t,n=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:this._minQuota,e.next=3,this._client.getQuotaAsync(this._contract.address);case 3:if(!e.sent.currentQuota.lte(t)){e.next=6;break}throw new Error("Contract has insufficient quota");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toBoolean",value:function(e){if("0"===e)return!1;if("1"===e)return!0;throw new Error("Value ".concat(e," is not boolean"))}},{key:"callContractAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n,r,a,c){var i,s,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureQuotaAsync();case 2:return e.prev=2,e.next=5,this._client.callContractAsync(t,n,this._contract.abi,r,this._contract.address,a,c);case 5:return i=e.sent,e.next=8,this._client.waitForAccountBlockAsync(t.address,i.height);case 8:return s=e.sent,e.abrupt("return",s);case 12:if(e.prev=12,e.t0=e.catch(2),!(o=fe.formatMessage(e.t0))){e.next=19;break}throw new Error(o);case 19:throw new Error("Error");case 20:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(t,n,r,a,c){return e.apply(this,arguments)}}()},{key:"stakeForQuotaAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._client.stakeForQuotaAsync(t,this._contract.address,n);case 2:return r=e.sent,e.next=5,this._client.waitForAccountBlockAsync(t.address,r.height);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createAddressListenerAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t,n,r=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this._client.createAddressListenerAsync(this._contract.address);case 3:return(n=e.sent).on((function(e){for(var n=0;n<e.length;n++){var a=e[n];he.info(a)();var c=r._client.decodeVmLog(a.vmlog,r._contract.abi);t.push(c)}})),e.abrupt("return",{logs:t,listener:n});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),pe=Object(F.a)();!function(e){e[e.getDeveloper=0]="getDeveloper",e[e.getMarketInfo=1]="getMarketInfo",e[e.isContract=2]="isContract",e[e.balanceOf=3]="balanceOf",e[e.ownerOf=4]="ownerOf",e[e.getMappedIndex=5]="getMappedIndex",e[e.totalSupply=6]="totalSupply",e[e.getTokensOf=7]="getTokensOf",e[e.tokenURI=8]="tokenURI",e[e.getBaseUrl=9]="getBaseUrl",e[e.getOffer=10]="getOffer",e[e.getBid=11]="getBid",e[e.transferEvent=12]="transferEvent",e[e.marketChangedEvent=13]="marketChangedEvent",e[e.punkChangedEvent=14]="punkChangedEvent"}(G||(G={}));var ve,je,me,Oe,ge,ye,xe,ke,we,Ae,_e,Ce,Se,Ee,Be,Ie,Me,Pe,Ne,Te,Fe,Re,Le,De=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(v.a)(this,n),(e=t.call(this))._abiMap=void 0,e._abiMap=new Map,e}return Object(j.a)(n,[{key:"initAsyncProtected",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fileUtil.readFileAsync(T.a.appendPath(t,"Punks.gz"),"binary");case 2:n=e.sent,this._contract=JSON.parse(W.decompress(T.a.toUint8Array(n,"binary"))),this._contract.address=E.a.CONTRACT_ADDRESS,this._abiMap.set(G.getDeveloper,this.getAbiItem("offchain","getDeveloper")),this._abiMap.set(G.getMarketInfo,this.getAbiItem("offchain","getMarketInfo")),this._abiMap.set(G.isContract,this.getAbiItem("offchain","isContract")),this._abiMap.set(G.balanceOf,this.getAbiItem("offchain","balanceOf")),this._abiMap.set(G.ownerOf,this.getAbiItem("offchain","ownerOf")),this._abiMap.set(G.getMappedIndex,this.getAbiItem("offchain","getMappedIndex")),this._abiMap.set(G.totalSupply,this.getAbiItem("offchain","totalSupply")),this._abiMap.set(G.getTokensOf,this.getAbiItem("offchain","getTokensOf")),this._abiMap.set(G.tokenURI,this.getAbiItem("offchain","tokenURI")),this._abiMap.set(G.getBaseUrl,this.getAbiItem("offchain","getBaseUrl")),this._abiMap.set(G.getOffer,this.getAbiItem("offchain","getOffer")),this._abiMap.set(G.getBid,this.getAbiItem("offchain","getBid")),this._abiMap.set(G.transferEvent,this.getAbiItem("event","Transfer")),this._abiMap.set(G.marketChangedEvent,this.getAbiItem("event","MarketChanged")),this._abiMap.set(G.punkChangedEvent,this.getAbiItem("event","PunkChanged"));case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAbiItem",value:function(e,t){return this._contract.abi.find((function(n){return n.type===e&&n.name===t}))}},{key:"getAbiItemByType",value:function(e){return this._abiMap.get(e)}},{key:"callOffChainMethodAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._client.callOffChainMethodAsync(this._contract.address,this.getAbiItemByType(t),this._contract.offChain,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setMintPriceAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.info("setMintPriceAsync",n)(),e.abrupt("return",this.callContractAsync(t,"setPrice",[te.c.MintPrice,n]));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setActionPriceAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.info("setActionPriceAsync",n)(),e.abrupt("return",this.callContractAsync(t,"setPrice",[te.c.ActionPrice,n]));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDeveloperAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync(G.getDeveloper,[]);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return n=t[0].value,pe.info("getDeveloperAsync",n)(),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setDeveloperAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.info("setDeveloperAsync",n)(),e.abrupt("return",this.callContractAsync(t,"setDeveloper",[n]));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMarketInfoAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync(G.getMarketInfo,[]);case 2:return t=e.sent,n=this.objectFromEntries(t),pe.info("getMarketInfoAsync",n)(),e.abrupt("return",{marketStarted:this.toBoolean(n.market_started),mintsRemaining:parseInt(n.mints_remaining),mintPrice:ce.toBigNumber(n.mint_price),actionPrice:ce.toBigNumber(n.action_price)});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setMarketStartedAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.info("setMarketStartedAsync",n)(),e.abrupt("return",this.callContractAsync(t,"setMarketStarted",[n]));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"isContractAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync(G.isContract,[t]);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return r=n[0].value,pe.info("isContractAsync",r)(),e.abrupt("return",this.toBoolean(r));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"balanceOfAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync(G.balanceOf,[t]);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return r=n[0].value,pe.info("balanceOfAsync",r)(),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ownerOfAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync(G.ownerOf,[t]);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return r=n[0].value,pe.info("ownerOfAsync",r)(),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMappedIndexAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync(G.getMappedIndex,[t]);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return r=n[0].value,pe.info("getMappedIndexAsync",t,":",r)(),e.abrupt("return",ce.toBigNumber(r));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setMappedIndicesAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n,r){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callContractAsync(t,"setMappedIndices",[n,r]));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"mintAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callContractAsync(t,"mint",[],n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"totalSupplyAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync(G.totalSupply,[]);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return r=n[0].value,pe.info("totalSupplyAsync",r)(),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTokensOfAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync(G.getTokensOf,[t]);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:return r=n[0].value,pe.info("getTokensOfAsync",r)(),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tokenURIAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync(G.tokenURI,[t]);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return r=n[0].value,pe.info("tokenURIAsync",r)(),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBaseUrlAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync(G.getBaseUrl,[]);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return n=t[0].value,pe.info("getBaseUrlAsync",n)(),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setBaseUrlAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callContractAsync(t,"setBaseUrl",[n]));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOfferAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync(G.getOffer,[t]);case 2:return n=e.sent,pe.info("getOfferAsync","_punkId",t,n)(),e.abrupt("return",{isForSale:this.toBoolean(n[0].value),itemIndex:new w.a(t),seller:n[1].value,minAmount:new w.a(n[2].value),onlySellTo:ce.toAddress(n[3].value)});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBidAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync(G.getBid,[t]);case 2:return n=e.sent,pe.info("getBidAsync","_punkId",t,n)(),e.abrupt("return",{hasBid:this.toBoolean(n[0].value),itemIndex:new w.a(t),bidder:n[1].value,amount:new w.a(n[2].value)});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOfferAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callContractAsync(t,"cancelOffer",[n]));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"offerAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n,r,a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.info("offerAsync punkId: ".concat(n," minSalePrice: ").concat(r," fee: ").concat(a))(),e.abrupt("return",this.callContractAsync(t,"offer",[n,r],null!==a&&void 0!==a?a:void 0));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"offerToAddressAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n,r,a,c){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.info("offerToAddressAsync punkId: ".concat(n," minSalePrice: ").concat(r," address: ").concat(a," fee: ").concat(c))(),e.abrupt("return",this.callContractAsync(t,"offerToAddress",[n,r,a],null!==c&&void 0!==c?c:void 0));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,c){return e.apply(this,arguments)}}()},{key:"buyAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n,r){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callContractAsync(t,"buy",[n],r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"cancelBidAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callContractAsync(t,"cancelBid",[n]));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"enterBidAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n,r,a){var c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.info("enterBidAsync punkId: ".concat(n," amount: ").concat(r," fee: ").concat(a))(),c=r,a&&!T.a.isNullOrWhitespace(a)&&(c=new w.a(r).plus(new w.a(a)).toFixed(),pe.info("enterBidAsync amount+fee: ".concat(c))()),e.abrupt("return",this.callContractAsync(t,"enterBid",[n],c));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"acceptBidAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n,r){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callContractAsync(t,"acceptBid",[n,r]));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(be),We=new De,Ue=Object(F.a)(),qe=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(v.a)(this,n),(e=t.call(this))._client=void 0,e._contract=void 0,e._listener=void 0,e.getNewMarketEventsAsync=function(){var t=Object(S.a)(C.a.mark((function t(n){var r,a,c,i;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e._contract.getAbiItemByType(G.punkChangedEvent),a=e._client.encodeLogSignature(r),c=[[a]],t.next=5,e._client.getAccountBlockHeightAsync(e._contract.contract.address);case 5:return i=t.sent,t.next=8,e._client.getEventsByBlockAsync(e._contract.contract.address,n,i,c);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e._client=Object(de.a)(),e._contract=We,e}return Object(j.a)(n,[{key:"initPunkInfosAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t,n,r,a,c,i,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le()({method:"get",url:B.a.MARKET_DATA_URL,responseType:"json",timeout:3e3});case 3:if(t=e.sent,n=t.data,this._punkInfos=this.getDefaultPunkInfos(),n){r=Object(M.a)(n.punks);try{for(r.s();!(a=r.n()).done;)c=a.value,(i=ce.toPunkInfo(c))&&(s=parseInt(c.id)-1,this._punkInfos[s]=i)}catch(o){r.e(o)}finally{r.f()}}return e.next=9,this.updatePunkInfosAsync(ce.toBigNumber(n.refHeight));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Ue.error(e.t0)();case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"initAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ue.info("Init ViteDataSource")(),this.disposeProtected(),e.next=4,this._client.initAsync(t);case 4:return e.next=6,this._contract.initAsync(this._client,"./assets/contracts");case 6:return e.next=8,this._client.createAddressListenerAsync(this._contract.contract.address);case 8:this._listener=e.sent,this._listener.on((function(e){var t;if(null===(t=n._contract)||void 0===t?void 0:t.contract.abi)for(var r=0;r<e.length;r++){var a=e[r],c=n._client.decodeVmLog(a.vmlog,n._contract.contract.abi);Ue.info(null!==c&&void 0!==c?c:a)(),c&&n.handleVmLogAsync(a.accountBlockHash,a.accountBlockHeight,c)}else Ue.error("Could not decode vmlog because contract abi is not defined.")()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeProtected",value:function(){Ue.info("Dispose ViteDataSource")(),this._listener&&this._client.removeListener(this._listener),this._client.dispose()}},{key:"getQuotaAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._client.getQuotaAsync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPunkEventsAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n,r,a){var c,i,s,o,u,l,d,f;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ue.info("id",t,"limit",n,"offset",r,"height",a)(),!T.a.isNullOrWhitespace(t)){e.next=3;break}return e.abrupt("return",{blockHeight:ce.defaultBigNumber,events:[]});case 3:return i=this._contract.getAbiItemByType(G.punkChangedEvent),s=this._client.encodeLogSignature(i),o=[[s],[],[this._client.encodeParameter("uint256",t)]],u=this.getEventsFromHeight(),e.next=9,this.getAccountBlockHeightAsync(this._contract.contract.address,a);case 9:return l=e.sent,e.next=12,this._client.getEventsByBlockAsync(this._contract.contract.address,u,l,o);case 12:return d=e.sent,d=null===(c=d)||void 0===c?void 0:c.reverse().slice(r,r+n),f=this.toPunkEvents(d),e.abrupt("return",{blockHeight:l,events:f});case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getPunkOwnerAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._contract.ownerOfAsync(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPunksByAddressAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n,r){var a,c,i,s,o,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ue.info("_address",t,"limit",n,"offset",r)(),!T.a.isNullOrWhitespace(t)){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,this._contract.getTokensOfAsync(t);case 5:a=(a=e.sent).slice(r,r+n),c=[],i=Object(M.a)(a),e.prev=9,i.s();case 11:if((s=i.n()).done){e.next=19;break}return o=s.value,e.next=15,this.getPunkAsync(o);case 15:u=e.sent,c.push(u);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),i.e(e.t0);case 24:return e.prev=24,i.f(),e.finish(24);case 27:return e.abrupt("return",c);case 28:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getMarketBidAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._contract.getBidAsync(t);case 2:if((n=e.sent)&&n.hasBid){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",{__typename:te.g.MarketBid,itemIndex:n.itemIndex,amount:n.amount,bidder:n.bidder});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMarketOfferAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._contract.getOfferAsync(t);case 2:if((r=e.sent)&&r.isForSale){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",{__typename:te.g.MarketOffer,itemIndex:r.itemIndex,minAmount:r.minAmount,seller:r.seller,onlySellTo:null!==(n=r.onlySellTo)&&void 0!==n?n:""});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMarketEventsAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n,r){var a,c,i,s,o,u,l,d;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ue.info("limit",t,"offset",n)(),c=this._contract.getAbiItemByType(G.punkChangedEvent),i=this._client.encodeLogSignature(c),s=[[i]],e.next=6,this.getAccountBlockHeightAsync(this._contract.contract.address,r);case 6:return o=e.sent,u=k.BigNumber.maximum(this.getEventsFromHeight(),o.minus(1e3)),e.next=10,this._client.getEventsByBlockAsync(this._contract.contract.address,u,o,s);case 10:return l=e.sent,l=null===(a=l)||void 0===a?void 0:a.reverse().slice(n,n+t),d=this.toPunkEvents(l),e.abrupt("return",{blockHeight:o,events:d});case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getMarketInfoAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._contract.getMarketInfoAsync();case 2:return t=e.sent,this._actionPrice=t.actionPrice,this._mintPrice=t.mintPrice,Ue.info("getMarketInfoAsync",t)(),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mintAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkQuotaAsync();case 2:return e.next=4,this.getMintPriceAsync();case 4:return t=e.sent,e.next=7,this._contract.mintAsync(this.getAccount(),t.toFixed());case 7:return n=e.sent,Ue.info("mintAsync",n)(),e.abrupt("return",0===n.status);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"offerAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n,r){var a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ue.info("offerAsync","id",t,"amount",n,"address",r)(),e.next=3,this.checkQuotaAsync();case 3:return e.next=5,this.getFeeAsync();case 5:if(a=e.sent,!r||T.a.isNullOrWhitespace(r)){e.next=12;break}return e.next=9,this._contract.offerToAddressAsync(this.getAccount(),t,n,r,a);case 9:c=e.sent,e.next=15;break;case 12:return e.next=14,this._contract.offerAsync(this.getAccount(),t,n,a);case 14:c=e.sent;case 15:return Ue.info("offerAsync",c)(),e.abrupt("return",0===c.status);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"cancelOfferAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ue.info("cancelOfferAsync","id",t)(),e.next=3,this.checkQuotaAsync();case 3:return e.next=5,this._contract.cancelOfferAsync(this.getAccount(),t);case 5:return n=e.sent,Ue.info("cancelOfferAsync",n)(),e.abrupt("return",0===n.status);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"buyAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkQuotaAsync();case 2:return Ue.info("buyAsync","id",t,"amount",n)(),e.next=5,this._contract.buyAsync(this.getAccount(),t,n);case 5:return r=e.sent,Ue.info("buyAsync",r)(),e.abrupt("return",0===r.status);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"bidAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ue.info("bidAsync","id",t,"amount",n)(),e.next=3,this.checkQuotaAsync();case 3:return e.next=5,this.getFeeAsync();case 5:return r=e.sent,e.next=8,this._contract.enterBidAsync(this.getAccount(),t,n,r);case 8:return a=e.sent,Ue.info(a)(),e.abrupt("return",0===a.status);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"acceptBidAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ue.info("acceptBidAsync","id",t,"amount",n)(),e.next=3,this.checkQuotaAsync();case 3:return e.next=5,this._contract.acceptBidAsync(this.getAccount(),t,n);case 5:return r=e.sent,Ue.info("acceptBidAsync",r)(),e.abrupt("return",0===r.status);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"cancelBidAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ue.info("cancelBidAsync","id",t)(),e.next=3,this.checkQuotaAsync();case 3:return e.next=5,this._contract.cancelBidAsync(this.getAccount(),t);case 5:return n=e.sent,Ue.info("cancelBidAsync",n)(),e.abrupt("return",0===n.status);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleVmLogAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n,r){var a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=r.event,e.next=e.t0===te.h.MarketChanged?4:e.t0===te.h.PunkChanged?15:18;break;case 4:a={timestamp:new k.BigNumber(r.args.timestamp),eventType:parseInt(r.args.eventType),value:new k.BigNumber(r.args.value)},e.t1=a.eventType,e.next=e.t1===te.c.ActionPrice?8:e.t1===te.c.MintPrice?10:12;break;case 8:return this._actionPrice=a.value,e.abrupt("break",13);case 10:return this._mintPrice=a.value,e.abrupt("break",13);case 12:return e.abrupt("break",13);case 13:return this._emitter.emitMarketChanged(a),e.abrupt("break",19);case 15:return c={accountBlockHash:t,accountBlockHeight:new k.BigNumber(n),timestamp:new k.BigNumber(r.args.timestamp),eventType:parseInt(r.args.eventType),punkId:parseInt(r.args.punkId),amount:new k.BigNumber(r.args.amount),fromAddress:r.args.fromAddress,toAddress:r.args.toAddress},this._emitter.emitPunkChanged(c),e.abrupt("break",19);case 18:return e.abrupt("break",19);case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(0),Ue.error(e.t2)();case 24:case"end":return e.stop()}}),e,this,[[0,21]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"toPunkEvents",value:function(e){if(!Array.isArray(e))return[];var t,n=[],r=Object(M.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,c=this.toPunkEvent(a);c&&n.push(c)}}catch(i){r.e(i)}finally{r.f()}return n}},{key:"toPunkEvent",value:function(e){if(!e)return null;var t=this._contract.getAbiItemByType(G.punkChangedEvent),n=this._client.decodeVmLogByAbiItem(e.vmlog,t);if(!n)return null;var r={accountBlockHash:e.accountBlockHash,accountBlockHeight:e.accountBlockHeight,timestamp:n.args.timestamp,eventType:n.args.eventType,punkId:n.args.punkId,amount:n.args.amount,fromAddress:n.args.fromAddress,toAddress:n.args.toAddress};return ce.toPunkEvent(r)}},{key:"getFeeAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getActionPriceAsync();case 2:if(!(t=e.sent).gt(0)){e.next=5;break}return e.abrupt("return",t.toFixed());case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccountBlockHeightAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new k.BigNumber("0"),!n||T.a.isNullOrWhitespace(n)){e.next=5;break}r=new k.BigNumber(n),e.next=8;break;case 5:return e.next=7,this._client.getAccountBlockHeightAsync(t);case 7:r=e.sent;case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getEventsFromHeight",value:function(){return E.a.IS_PRODUCTION,new k.BigNumber("0")}},{key:"checkQuotaAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._contract.contract.address,e.next=3,this.getQuotaAsync(t);case 3:n=e.sent,this._emitter.emitQuotaChanged(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updatePunkInfosAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r,a,c,i,s,o,u,l,d,f;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._punkInfos&&this._punkInfos.length===B.a.TOTAL_MINTS){e.next=3;break}return Ue.info("Invalid market data provided",null===(i=this._punkInfos)||void 0===i?void 0:i.length)(),e.abrupt("return");case 3:return Ue.info("Get market events with reference height",t.toFixed())(),e.next=6,this.getNewMarketEventsAsync(t);case 6:if(s=e.sent,Array.isArray(s)){e.next=10;break}return Ue.info("Get market events result is not an array")(),e.abrupt("return");case 10:Ue.info("events.length",s.length)(),o=Object(M.a)(s),e.prev=12,o.s();case 14:if((u=o.n()).done){e.next=39;break}if(l=u.value,d=this.toPunkEvent(l)){e.next=20;break}return Ue.info("Invalid punk event",l)(),e.abrupt("continue",37);case 20:f=this._punkInfos[d.punkId-1],e.t0=d.eventType,e.next=e.t0===te.f.Mint?24:e.t0===te.f.Offer?26:e.t0===te.f.NewBid?28:e.t0===te.f.CancelBid?30:e.t0===te.f.CancelOffer?32:e.t0===te.f.Buy?34:36;break;case 24:return f.owner=d.toAddress,e.abrupt("break",37);case 26:return f.offer={__typename:te.g.MarketOffer,itemIndex:ce.toBigNumber(d.id),seller:null!==(n=d.fromAddress)&&void 0!==n?n:"",minAmount:null!==(r=d.amount)&&void 0!==r?r:ce.defaultBigNumber,onlySellTo:d.toAddress},e.abrupt("break",37);case 28:return f.bid={__typename:te.g.MarketBid,itemIndex:ce.toBigNumber(d.id),bidder:null!==(a=d.fromAddress)&&void 0!==a?a:"",amount:null!==(c=d.amount)&&void 0!==c?c:ce.defaultBigNumber},e.abrupt("break",37);case 30:return f.bid=void 0,e.abrupt("break",37);case 32:return f.offer=void 0,e.abrupt("break",37);case 34:return f.owner=d.toAddress,e.abrupt("break",37);case 36:return e.abrupt("break",37);case 37:e.next=14;break;case 39:e.next=44;break;case 41:e.prev=41,e.t1=e.catch(12),o.e(e.t1);case 44:return e.prev=44,o.f(),e.finish(44);case 47:case"end":return e.stop()}}),e,this,[[12,41,44,47]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(ae),He=new qe,Ve=Object(F.a)(),Qe=function(){function e(){Object(v.a)(this,e),this._network=void 0,this._datasource=void 0}return Object(j.a)(e,[{key:"initAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B.a.USE_MOCK_DATASOURCE?this._datasource=oe:this._datasource=He,n=E.a.NETWORK_ID,this._network=null!==(t=B.c.find((function(e){return e.id===n})))&&void 0!==t?t:B.c[0],e.next=5,this._datasource.initBaseAsync(this._network);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){var e;Ve.info("Disposing CommonContext")(),null===(e=this._datasource)||void 0===e||e.dispose()}},{key:"network",get:function(){return this._network}},{key:"datasource",get:function(){return this._datasource}}]),e}(),$e=new Qe,ze=function(){return $e},Ge=n(27),Ke=n(366),Ye=Object(Ke.a)(ve||(ve=Object(Ge.a)(["\n  mutation Offer($id: ID!, $amount: String!, $address: String) {\n    offer(id: $id, amount: $amount, address: $address) @client\n  }\n"]))),Je=Object(Ke.a)(je||(je=Object(Ge.a)(["\n  mutation CancelOffer($id: ID!) {\n    cancelOffer(id: $id) @client\n  }\n"]))),Ze=Object(Ke.a)(me||(me=Object(Ge.a)(["\n  mutation Buy($id: ID!, $amount: String!) {\n    buy(id: $id, amount: $amount) @client\n  }\n"]))),Xe=Object(Ke.a)(Oe||(Oe=Object(Ge.a)(["\n  mutation Bid($id: ID!, $amount: String!) {\n    bid(id: $id, amount: $amount) @client\n  }\n"]))),et=Object(Ke.a)(ge||(ge=Object(Ge.a)(["\n  mutation AcceptBid($id: ID!, $amount: String!) {\n    acceptBid(id: $id, amount: $amount) @client\n  }\n"]))),tt=Object(Ke.a)(ye||(ye=Object(Ge.a)(["\n  mutation CancelBid($id: ID!) {\n    cancelBid(id: $id) @client\n  }\n"]))),nt={offer:function(e,t,n){return Object(S.a)(C.a.mark((function e(){var r,a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.amount,c=t.address,e.abrupt("return",n.client.datasource.offerAsync(r,a,c));case 2:case"end":return e.stop()}}),e)})))()},cancelOffer:function(e,t,n){return Object(S.a)(C.a.mark((function e(){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.abrupt("return",n.client.datasource.cancelOfferAsync(r));case 2:case"end":return e.stop()}}),e)})))()},buy:function(e,t,n){return Object(S.a)(C.a.mark((function e(){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.amount,e.abrupt("return",n.client.datasource.buyAsync(r,a));case 2:case"end":return e.stop()}}),e)})))()},bid:function(e,t,n){return Object(S.a)(C.a.mark((function e(){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.amount,e.abrupt("return",n.client.datasource.bidAsync(r,a));case 2:case"end":return e.stop()}}),e)})))()},acceptBid:function(e,t,n){return Object(S.a)(C.a.mark((function e(){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.amount,e.abrupt("return",n.client.datasource.acceptBidAsync(r,a));case 2:case"end":return e.stop()}}),e)})))()},cancelBid:function(e,t,n){return Object(S.a)(C.a.mark((function e(){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.abrupt("return",n.client.datasource.cancelBidAsync(r));case 2:case"end":return e.stop()}}),e)})))()}},rt=Object(Ke.a)(xe||(xe=Object(Ge.a)(["\n  mutation Mint {\n    mint @client\n  }\n"]))),at={mint:function(e,t,n){return Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.client.datasource.mintAsync());case 1:case"end":return e.stop()}}),e)})))()}},ct=Object(Ke.a)(ke||(ke=Object(Ge.a)(["\n  fragment PunkFields on Punk {\n    id\n    rank\n    image\n    attributes\n    owner\n    bid {\n      itemIndex\n      bidder\n      amount\n    }\n    offer {\n      itemIndex\n      seller\n      minAmount\n      onlySellTo\n    }\n  }\n"]))),it=Object(Ke.a)(we||(we=Object(Ge.a)(["\n  fragment PunkEventFields on PunkEvent {\n    id\n    accountBlockHash\n    accountBlockHeight\n    timestamp\n    eventType\n    punkId\n    amount\n    fromAddress\n    toAddress\n  }\n"]))),st=Object(Ke.a)(Ae||(Ae=Object(Ge.a)(["\n  query GetPunkAttributes {\n    punkAttributes @client\n  }\n"]))),ot=Object(Ke.a)(_e||(_e=Object(Ge.a)(["\n  ","\n  query GetPunkEvents($id: String!, $limit: Int!, $offset: Int!, $height: String) {\n    punkEvents(id: $id, limit: $limit, offset: $offset, height: $height) @client {\n      blockHeight\n      events {\n        ...PunkEventFields\n      }\n    }\n  }\n"])),it),ut=Object(Ke.a)(Ce||(Ce=Object(Ge.a)(["\n  query GetPunkOwner($id: String!) {\n    punkOwner(id: $id) @client\n  }\n"]))),lt=Object(Ke.a)(Se||(Se=Object(Ge.a)(["\n  ","\n  query GetPunk($id: ID!) {\n    punk(id: $id) @client {\n      ...PunkFields\n    }\n  }\n"])),ct),dt=Object(Ke.a)(Ee||(Ee=Object(Ge.a)(["\n  ","\n  query GetPunks($limit: Int!, $offset: Int!, $sort: PunkSortBy!, $order: OrderBy!, $search: String) {\n    punks(limit: $limit, offset: $offset, sort: $sort, order: $order, search: $search) @client {\n      ...PunkFields\n    }\n  }\n"])),ct),ft=Object(Ke.a)(Be||(Be=Object(Ge.a)(["\n  ","\n  query GetPunksAll {\n    punksAll @client {\n      ...PunkFields\n    }\n  }\n"])),ct),ht=Object(Ke.a)(Ie||(Ie=Object(Ge.a)(["\n  ","\n  query GetPunksByAddress($address: String!, $limit: Int!, $offset: Int!) {\n    punksByAddress(address: $address, limit: $limit, offset: $offset) @client {\n      ...PunkFields\n    }\n  }\n"])),ct),bt={punkAttributes:function(e,t,n){return Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.datasource.getPunkAttributesAsync();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()},punkEvents:function(e,t,n){return Object(S.a)(C.a.mark((function e(){var r,a,c,i,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.limit,c=t.offset,i=t.height,e.next=3,n.client.datasource.getPunkEventsAsync(r,a,c,i);case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})))()},punkOwner:function(e,t,n){return Object(S.a)(C.a.mark((function e(){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,n.client.datasource.getPunkOwnerAsync(r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))()},punk:function(e,t,n){return Object(S.a)(C.a.mark((function e(){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,n.client.datasource.getPunkAsync(r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))()},punks:function(e,t,n){return Object(S.a)(C.a.mark((function e(){var r,a,c,i,s,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.limit,a=t.offset,c=t.sort,i=t.order,s=t.search,e.next=3,n.client.datasource.getPunksAsync(r,a,c,i,s);case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})))()},punksAll:function(e,t,n){return Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.datasource.getPunksAllAsync();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()},punksByAddress:function(e,t,n){return Object(S.a)(C.a.mark((function e(){var r,a,c,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.address,a=t.limit,c=t.offset,e.next=3,n.client.datasource.getPunksByAddressAsync(r,a,c);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})))()}},pt=Object(Ke.a)(Me||(Me=Object(Ge.a)(["\n  fragment MarketBidFields on MarketBid {\n    itemIndex\n    bidder\n    amount\n  }\n"]))),vt=Object(Ke.a)(Pe||(Pe=Object(Ge.a)(["\n  fragment MarketOfferFields on MarketOffer {\n    itemIndex\n    seller\n    minAmount\n    onlySellTo\n  }\n"]))),jt=Object(Ke.a)(Ne||(Ne=Object(Ge.a)(["\n  query GetMarketInfo {\n    marketInfo @client {\n      marketStarted\n      mintsRemaining\n      mintPrice\n      actionPrice\n    }\n  }\n"]))),mt=Object(Ke.a)(Te||(Te=Object(Ge.a)(["\n  ","\n  query GetMarketBid($id: String!) {\n    marketBid(id: $id) @client {\n      ...MarketBidFields\n    }\n  }\n"])),pt),Ot=Object(Ke.a)(Fe||(Fe=Object(Ge.a)(["\n  ","\n  query GetMarketOffer($id: String!) {\n    marketOffer(id: $id) @client {\n      ...MarketOfferFields\n    }\n  }\n"])),vt),gt=Object(Ke.a)(Re||(Re=Object(Ge.a)(["\n  ","\n  query GetMarketEvents($limit: Int!, $offset: Int!, $height: String) {\n    marketEvents(limit: $limit, offset: $offset, height: $height) @client {\n      blockHeight\n      events {\n        ...PunkEventFields\n      }\n    }\n  }\n"])),it),yt={marketInfo:function(e,t,n){return Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.datasource.getMarketInfoAsync();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()},marketBid:function(e,t,n){return Object(S.a)(C.a.mark((function e(){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,n.client.datasource.getMarketBidAsync(r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))()},marketOffer:function(e,t,n){return Object(S.a)(C.a.mark((function e(){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,n.client.datasource.getMarketOfferAsync(r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))()},marketEvents:function(e,t,n){return Object(S.a)(C.a.mark((function e(){var r,a,c,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.limit,a=t.offset,c=t.height,e.next=3,n.client.datasource.getMarketEventsAsync(r,a,c);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})))()}},xt=Object(Ke.a)(Le||(Le=Object(Ge.a)(["\n  query GetQuota($address: String!) {\n    quota(address: $address) @client {\n      currentQuota\n      maxQuota\n      stakeAmount\n    }\n  }\n"]))),kt={quota:function(e,t,n){return Object(S.a)(C.a.mark((function e(){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.address,e.next=3,n.client.datasource.getQuotaAsync(r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))()}},wt=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"datasource",get:function(){return ze().datasource}}]),n}(g.a),At=new wt({cache:new y.a({typePolicies:{Query:{fields:{punks:Object(x.a)(["order","sort"]),punksByAddress:Object(x.a)(["address"])}}}}),resolvers:{BigNumber:new A.a({name:"BigNumber",description:"BigNumber custom scalar type",serialize:function(e){return e.toFixed()},parseValue:function(e){return new w.a(e)}}),Query:Object(p.a)(Object(p.a)(Object(p.a)({},kt),bt),yt),Mutation:Object(p.a)(Object(p.a)({},at),nt)},headers:{"client-name":"vite-punks","client-version":"1.2.2"}}),_t=function(){return At},Ct=n(9),St=new(function(){function e(){Object(v.a)(this,e),this._networkHeight=void 0,this._network=void 0,this._setNetworkCallback=void 0,this._networkHeight=new w.a("0")}return Object(j.a)(e,[{key:"networkHeight",get:function(){return this._networkHeight},set:function(e){this._networkHeight=e}},{key:"onSetNetworkCallback",set:function(e){this._setNetworkCallback=e}},{key:"getNetwork",value:function(){return this._network}},{key:"setNetwork",value:function(e){this._network=e,this._setNetworkCallback&&this._setNetworkCallback(this._network)}}]),e}()),Et=function(){return St},Bt=n(295),It=n(0),Mt=Object(h.a)("div")((function(e){e.theme;return"\n  padding-bottom: 10px;\n  padding-top: 10px;\n  padding-left: 24px;\n  padding-right: 24px;\n  text-align: right;\n"})),Pt=function(){return Object(It.jsx)(It.Fragment,{children:Object(It.jsx)(Mt,{children:Object(It.jsxs)(Bt.a,{children:["v","1.2.2"]})})})},Nt=n(387),Tt=n(389),Ft=Object(h.a)("div")((function(e){e.theme;return"\n  flex-grow: 1;\n"})),Rt=Object(h.a)(Bt.a)((function(e){e.theme;return"\n  flex-grow: 1;\n  margin-left: 10px !important;\n"})),Lt=function(e){return Object(It.jsx)(Ft,{children:Object(It.jsx)(Nt.a,{position:"static",children:Object(It.jsx)(Tt.a,{children:Object(It.jsx)(Rt,{variant:"h6",children:B.a.APP_NAME})})})})},Dt=n(81),Wt=n(390),Ut=["children"],qt=Object(h.a)("div")((function(e){e.theme;return"\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  align-items: center;\n  padding-bottom: 15px;\n  padding-top: 30px;\n  overflow: auto;\n  overflow-x: hidden;\n"})),Ht=Object(h.a)("div")((function(e){e.theme;return"\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"})),Vt=function(e){var t=e.children,n=Object(Dt.a)(e,Ut);return Object(It.jsx)(qt,Object(p.a)(Object(p.a)({id:"mainscroll"},n),{},{children:Object(It.jsx)(Wt.a,{maxWidth:"xl",children:Object(It.jsx)(Ht,{children:t})})}))},Qt=["children"],$t=Object(h.a)("div")((function(e){e.theme;return"\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n"})),zt=function(e){var t=e.children,n=Object(Dt.a)(e,Qt);return Object(It.jsx)($t,Object(p.a)(Object(p.a)({},n),{},{children:t}))},Gt=s.a.createContext(void 0),Kt=function(e){var t=Object(i.useState)(null),n=Object(Ct.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(null),s=Object(Ct.a)(c,2),o=s[0],u=s[1],l=Object(i.useState)(null),d=Object(Ct.a)(l,2),f=d[0],h=d[1];Object(ne.h)().onSetWalletCallback=u,Et().onSetNetworkCallback=h;var b={setError:a,error:r,wallet:o,network:f};return Object(It.jsx)(Gt.Provider,{value:b,children:e.children})},Yt=Object(F.a)(),Jt=s.a.createContext(void 0),Zt=function(){var e=s.a.useContext(Jt);if(!e)throw new Error("Component rendered outside the provider tree");return e},Xt=function(e){var t=Object(i.useState)(null),n=Object(Ct.a)(t,2),r=n[0],a=n[1],c=function(){var e=s.a.useContext(Gt);if(!e)throw new Error("Component rendered outside the provider tree");return e}(),o=ze(),u=c.wallet,l=c.network;Object(i.useEffect)((function(){u||Object(ne.h)().initWallet()}),[u]),Object(i.useEffect)((function(){if(!l){var e=Et(),t=E.a.NETWORK_ID;e.setNetwork(B.c.find((function(e){return e.id===t}))),Yt.info("Network:",e.getNetwork())()}}),[l]);var d=Object(i.useCallback)((function(){Object(ne.h)().removeWallet(),window.location.reload()}),[]);if(Object(i.useEffect)((function(){var e,t,n={account:null===u||void 0===u||null===(e=u.active)||void 0===e?void 0:e.address,network:l,logout:d};Yt.info("ConnectedWeb3.account",null===u||void 0===u||null===(t=u.active)||void 0===t?void 0:t.address)();var r=function(){var e=Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=12;break}return Yt.info("Init ConnectedWeb3")(),e.prev=2,a(null),e.next=6,o.initAsync();case 6:a(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),Yt.error(e.t0)();case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return r(),function(){o.dispose()}}),[u,l,d,o]),!r)return Object(It.jsxs)(zt,{children:[Object(It.jsx)(Lt,{}),Object(It.jsx)(Vt,{children:Object(It.jsx)(Bt.a,{children:"Loading..."})}),Object(It.jsx)(Pt,{})]});var f=Object(p.a)({},r);return Object(It.jsx)(Jt.Provider,{value:f,children:e.children})},en=n(47),tn=n(28),nn=function(){function e(){Object(v.a)(this,e)}return Object(j.a)(e,null,[{key:"enqueueError",value:function(t){var n=fe.formatMessage(t);"Session currently disconnected"===n&&Object(U.a)().emitConnectWalletDialog(!0);e.snackbar.enqueueSnackbar(n)}},{key:"enqueueMessage",value:function(t){e.snackbar.enqueueSnackbar(t)}}]),e}();nn.snackbar=void 0;var rn=n(375),an=n(380),cn=n(341),sn=n(114),on=n(388),un=function(e){var t,n,r="#000000",a="rgba(255, 255, 255, 0.5)";if("warning"===e.type)r="#611a15",a="rgba(255, 0, 0, 0.1)";return e.error&&console.log(T.a.toJsonString(e.error)),Object(It.jsx)(on.a,{children:Object(It.jsx)(cn.a,{sx:{color:null!==(t=e.color)&&void 0!==t?t:r,backgroundColor:null!==(n=e.backgroundColor)&&void 0!==n?n:a,padding:"15px",textAlign:"center"},children:Object(It.jsx)(Bt.a,{children:e.message})})})},ln=n(371),dn=function(e){var t,n,r,a=s.a.useRef(!1),c=s.a.useState(!1),i=Object(Ct.a)(c,2),o=i[0],u=i[1],l=function(){var t=Object(S.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(!0),t.prev=1,t.next=4,e.callbackFn();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),nn.enqueueError(fe.formatMessage(t.t0));case 9:a.current&&u(!1);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}();return s.a.useEffect((function(){return a.current=!0,function(){a.current=!1}}),[]),Object(It.jsx)(ln.a,{loading:o,size:null!==(t=e.size)&&void 0!==t?t:"small",variant:null!==(n=e.variant)&&void 0!==n?n:"contained",color:null!==(r=e.color)&&void 0!==r?r:"primary",fullWidth:e.fullWidth,disabled:e.disabled,onClick:l,startIcon:e.startIcon,sx:e.sx,children:e.children})},fn=n(108),hn=n(58),bn=n(393),pn=n(379),vn=n(392),jn=n(394),mn=function(){function e(){Object(v.a)(this,e)}return Object(j.a)(e,null,[{key:"roundBigNumber",value:function(e,t,n){return e.div(new k.BigNumber("10").pow(t)).decimalPlaces(n,k.BigNumber.ROUND_DOWN)}},{key:"formatBigNumber",value:function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:14,c=e.roundBigNumber(t,n,r);if(c.lte(0))return"<1";var i=c.toFormat();return a>=i.length?i:i.substring(0,a)+"..."}},{key:"formatVite",value:function(t){return e.formatBigNumber(t,B.a.CURRENCY_DECIMALS,2)}},{key:"formatViteTooltip",value:function(t){var n=e.roundBigNumber(t,B.a.CURRENCY_DECIMALS,B.a.CURRENCY_DECIMALS);return"".concat(n.toFormat()," $").concat(B.a.CURRENCY_NAME)}}]),e}(),On=function(){function e(){Object(v.a)(this,e)}return Object(j.a)(e,null,[{key:"getPunkUrl",value:function(e){return e&&!T.a.isNullOrWhitespace(e)?"https://cdn.vitepunks.com/punks/iso/".concat(e):""}}]),e}(),gn=n(222),yn=s.a.forwardRef((function(e,t){var n=e.icon,r=Object(Ct.a)(n.icon,5),a=r[0],c=r[1],i=r[4];return Object(It.jsx)(gn.a,{ref:t,viewBox:"0 0 ".concat(a," ").concat(c),sx:e.sx,children:"string"===typeof i?Object(It.jsx)("path",{d:i}):i.map((function(e,t){return Object(It.jsx)("path",{style:{opacity:0===t?.4:1},d:e})}))})})),xn=n(4),kn=n(85),wn=n(391),An=["className"],_n=["className"],Cn=["className"],Sn=function(e){return Object(It.jsx)(En,Object(p.a)(Object(p.a)({},e),{},{sx:Object(xn.a)({},"& .".concat(kn.a.tooltip),{maxWidth:"none"})}))},En=(Object(h.a)((function(e){var t=e.className,n=Object(Dt.a)(e,An);return Object(It.jsx)(wn.a,Object(p.a)(Object(p.a)({},n),{},{classes:{popper:t}}))}))((function(e){var t=e.theme;return Object(xn.a)({},"& .".concat(kn.a.tooltip),{backgroundColor:t.palette.common.white,color:"rgba(0, 0, 0, 0.87)",boxShadow:t.shadows[1],fontSize:11})})),Object(h.a)((function(e){var t=e.className,n=Object(Dt.a)(e,_n);return Object(It.jsx)(wn.a,Object(p.a)(Object(p.a)({},n),{},{arrow:!0,classes:{popper:t}}))}))((function(e){var t,n=e.theme;return t={},Object(xn.a)(t,"& .".concat(kn.a.arrow),{color:n.palette.common.black}),Object(xn.a)(t,"& .".concat(kn.a.tooltip),{backgroundColor:n.palette.common.black}),t}))),Bn=(Object(h.a)((function(e){var t=e.className,n=Object(Dt.a)(e,Cn);return Object(It.jsx)(wn.a,Object(p.a)(Object(p.a)({},n),{},{classes:{popper:t}}))}))((function(e){var t=e.theme;return Object(xn.a)({},"& .".concat(kn.a.tooltip),{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:t.typography.pxToRem(12),border:"1px solid #dadde9"})})),Object(h.a)("div")((function(e){e.theme;return"\n  position: relative;\n  height: 320px;\n  // animation: lightning 4s ease-out infinite;\n  background-image: url('".concat(B.a.ITEM_BG_URL,"');\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n")}))),In=Object(h.a)("div")((function(e){e.theme;return"\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  image-rendering: pixelated;\n"})),Mn=function(e){var t,n,r=function(e){return mn.formatViteTooltip(e)},a=function(e){return mn.formatVite(e)};return Object(It.jsx)(vn.a,{children:Object(It.jsxs)(bn.a,{component:en.b,to:"/punk/".concat(e.item.id),children:[Object(It.jsxs)(Bn,{children:[e.item.owner&&Object(It.jsx)(cn.a,{sx:{position:"absolute",top:5,left:5},children:Object(It.jsx)(Sn,{title:Object(It.jsx)("span",{children:e.item.owner}),placement:"bottom",arrow:!0,children:Object(It.jsx)(pn.a,{size:"small",icon:Object(It.jsx)(yn,{icon:fn.b,sx:{fontSize:"small",ml:1}}),sx:{fontSize:"0.7rem"},label:(n=e.item.owner,T.a.truncateStringInTheMiddle(n,10,5))})})}),Object(It.jsx)(cn.a,{sx:{position:"absolute",top:5,right:5},children:Object(It.jsx)(Sn,{title:Object(It.jsx)("span",{children:"Rarity rank"}),placement:"bottom",arrow:!0,children:Object(It.jsx)(pn.a,{size:"small",icon:Object(It.jsx)(yn,{icon:fn.a,sx:{fontSize:"small",ml:1}}),sx:{fontSize:"0.7rem"},label:e.item.rank})})}),Object(It.jsx)(cn.a,{sx:{position:"absolute",bottom:5,left:5,width:"calc(100% - 10px)"},children:Object(It.jsxs)(cn.a,{children:[e.item.bid&&Object(It.jsx)(Sn,{title:Object(It.jsxs)("span",{children:["Bid: ",r(e.item.bid.amount)]}),placement:"bottom",arrow:!0,children:Object(It.jsx)(pn.a,{size:"small",icon:Object(It.jsx)(yn,{icon:hn.f,sx:{fontSize:"small",ml:1}}),sx:{fontSize:"0.7rem",mt:1,mr:1},label:a(e.item.bid.amount)})}),e.item.offer&&e.item.offer.minAmount.gt(0)&&Object(It.jsx)(Sn,{title:Object(It.jsxs)("span",{children:["Price: ",r(e.item.offer.minAmount)]}),placement:"bottom",arrow:!0,children:Object(It.jsx)(pn.a,{size:"small",icon:Object(It.jsx)(yn,{icon:hn.i,sx:{fontSize:"small",ml:1}}),sx:{fontSize:"0.7rem",mt:1,float:"right"},label:a(e.item.offer.minAmount)})})]})}),Object(It.jsx)(In,{sx:{backgroundImage:"url('".concat(On.getPunkUrl(e.item.image),"')")}})]}),Object(It.jsxs)(jn.a,{sx:{p:0},children:[Object(It.jsxs)(Bt.a,{variant:"h6",component:"div",sx:{p:1},children:[B.a.PUNK_NAME," #",e.item.id]}),Object(It.jsx)(cn.a,{sx:{height:"70px",overflow:"auto"},children:Object(It.jsx)(cn.a,{sx:{p:1},children:null===(t=e.item.attributes)||void 0===t?void 0:t.map((function(e){return Object(It.jsx)(pn.a,{label:e,variant:"outlined",sx:{mb:1,mr:1},size:"small"},e)}))})})]})]})})},Pn=function(e){return Object(It.jsx)(It.Fragment,{children:e.error?Object(It.jsx)(un,{message:fe.formatMessage(e.error),type:"warning"}):Object(It.jsx)(It.Fragment,{children:e.query.loading||e.query.data&&e.query.data.punksByAddress.length>0?Object(It.jsx)(It.Fragment,{}):Object(It.jsx)(un,{message:"No punks found",type:"default"})})})},Nn=function(e){var t,n,r,a=Object(tn.g)().address,c=Object(i.useState)(!1),s=Object(Ct.a)(c,2),o=s[0],u=s[1],l=Object(i.useState)(!0),d=Object(Ct.a)(l,2),f=d[0],h=d[1],b=Object(i.useState)(void 0),p=Object(Ct.a)(b,2),v=p[0],j=p[1],m=Object(rn.a)(ht,{variables:{address:null!==a&&void 0!==a?a:"",offset:0,limit:8},fetchPolicy:"network-only"});Object(i.useEffect)((function(){u(m.loading)}),[m.loading]),Object(i.useEffect)((function(){j(m.error)}),[m.error]);var O=function(){var e=Object(S.a)(C.a.mark((function e(){var t,n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null!==(t=null===(n=m.data)||void 0===n?void 0:n.punksByAddress.length)&&void 0!==t?t:0,u(!0),e.prev=2,e.next=5,m.fetchMore({variables:{offset:r,limit:8}});case 5:a=e.sent,h(a.data.punksByAddress.length>=8),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),j(e.t0);case 12:u(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(It.jsxs)(It.Fragment,{children:[Object(It.jsx)(Bt.a,{variant:"h2",component:"div",textAlign:"center",sx:{pt:3},children:"Account"}),Object(It.jsx)(Bt.a,{variant:"subtitle1",component:"div",textAlign:"center",sx:{wordBreak:"break-all"},gutterBottom:!0,children:a}),Object(It.jsx)(Wt.a,{sx:{pt:3,pb:6},maxWidth:"xl",children:o||m.data&&m.data.punksByAddress.length>0?Object(It.jsxs)(It.Fragment,{children:[Object(It.jsx)(sn.a,{dataLength:null!==(t=null===(n=m.data)||void 0===n?void 0:n.punksByAddress.length)&&void 0!==t?t:0,next:O,hasMore:f,loader:Object(It.jsx)(an.a,{container:!0,spacing:3,justifyContent:"center",alignItems:"center",children:Object(It.jsx)(an.a,{item:!0,xs:12,md:6,children:o?Object(It.jsx)(un,{message:"Loading...",type:"default"}):Object(It.jsx)(Pn,{error:v,query:m})},"1")}),scrollableTarget:"mainscroll",children:Object(It.jsx)(an.a,{container:!0,spacing:3,justifyContent:"center",alignItems:"center",marginBottom:3,children:null===(r=m.data)||void 0===r?void 0:r.punksByAddress.map((function(e){return Object(It.jsx)(an.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(It.jsx)(Mn,{item:e})},e.id)}))})}),f&&!o&&Object(It.jsx)(cn.a,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:Object(It.jsx)(dn,{variant:"outlined",callbackFn:O,sx:{minWidth:"200px"},children:"Load more"})})]}):Object(It.jsx)(an.a,{container:!0,spacing:3,justifyContent:"center",alignItems:"center",children:Object(It.jsx)(an.a,{item:!0,xs:12,md:6,children:Object(It.jsx)(Pn,{error:v,query:m})},"1")})})]})},Tn=n(376),Fn=n(151),Rn=function(){var e=Object(ne.h)(),t=Object(de.a)(),n=Object(i.useCallback)((function(){Object(Fn.a)({particleCount:150,spread:60});var n=e.getWallet();(null===n||void 0===n?void 0:n.active)&&t.receiveAllOnroadTxAsync(n.active)}),[t,e]);return Object(It.jsxs)(It.Fragment,{children:["Test ","1.2.2"," ","https://vitescan.io/",Object(It.jsx)(Tn.a,{onClick:n,children:"Test"})]})},Ln=function(){function e(){var t=this;Object(v.a)(this,e),this._apollo=void 0,this.getById=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"network-only";return t._apollo.query({query:lt,variables:{id:e},fetchPolicy:n})},this.getOwnerAsync=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"network-only";return t._apollo.query({query:ut,variables:{id:e},fetchPolicy:n})},this.getBidAsync=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"network-only";return t._apollo.query({query:mt,variables:{id:e},fetchPolicy:n})},this.getOfferAsync=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"network-only";return t._apollo.query({query:Ot,variables:{id:e},fetchPolicy:n})},this.getEventsAsync=function(e,n,r,a){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"network-only";return t._apollo.query({query:ot,variables:{id:e,offset:n,limit:r,height:a},fetchPolicy:c})},this.getExtendedAsync=function(){var e=Object(S.a)(C.a.mark((function e(n){var r,a,c,i,s,o,u,l,d=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"network-only",a={__typename:te.g.Punk,id:n.id,rank:n.rank,image:n.image,attributes:n.attributes},e.next=4,t.getOwnerAsync(n.id,r);case 4:return c=e.sent,e.next=7,t.getBidAsync(n.id,r);case 7:return i=e.sent,e.next=10,t.getOfferAsync(n.id,r);case 10:return s=e.sent,o=Object(p.a)(Object(p.a)({},a),{},{owner:c.data.punkOwner,bid:i.data.marketBid,offer:s.data.marketOffer}),u=c.error||i.error||s.error,l=c.loading||i.loading||s.loading,e.abrupt("return",{punkExtended:o,ownerQuery:c,bidQuery:i,offerQuery:s,error:u,loading:l});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._apollo=_t()}return Object(j.a)(e,[{key:"mintAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._apollo.mutate({mutation:rt});case 2:return r=e.sent,e.abrupt("return",Boolean(null!==(t=null===(n=r.data)||void 0===n?void 0:n.mint)&&void 0!==t&&t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Dn=new Ln,Wn=function(){return Dn},Un=Object(h.a)("div")((function(e){e.theme;return"\n  position: relative;\n  width: 80vw;\n  height: 80vw; \n  max-width: 400px;\n  max-height: 400px;\n  animation: lightning 4s ease-out infinite;\n"})),qn=Object(h.a)("div")((function(e){e.theme;return"\n  width: 100%;\n  height: 100%;\n  border: 5px solid #fff;\n  border-radius: 50%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  background-image: url('".concat(B.a.ITEM_BG_URL,"');\n")})),Hn=Object(h.a)("div")((function(e){e.theme;return"\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  background-image: url('".concat(B.a.SAMPLE_PUNK_URL,"');\n  border-radius: 50%;\n  animation: toggle 4s linear -2s infinite alternate;\n  image-rendering: pixelated;\n")})),Vn=Object(h.a)("img")((function(e){e.theme;return"\n  top: 0;\n  left: 0;\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  border: 5px solid #fff;\n  border-radius: 50%;\n  visibility: hidden;\n  animation: toggle 4s linear 2s infinite alternate;\n"})),Qn=function(e){var t=Object(i.useState)(void 0),n=Object(Ct.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(void 0),s=Object(Ct.a)(c,2),o=s[0],u=s[1],l=Wn();return Object(i.useEffect)((function(){var t=function(){var t=Object(S.a)(C.a.mark((function t(){var n,r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.punkId1){t.next=5;break}return t.next=3,l.getById(e.punkId1.toString());case 3:n=t.sent,a(On.getPunkUrl(n.data.punk.image));case 5:if(!e.punkId2){t.next=10;break}return t.next=8,l.getById(e.punkId2.toString());case 8:r=t.sent,u(On.getPunkUrl(r.data.punk.image));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.punkId1,e.punkId2,l]),Object(It.jsx)(Un,{children:Object(It.jsxs)(qn,{children:[Object(It.jsx)(Hn,{sx:{backgroundImage:"url('".concat(null!==r&&void 0!==r?r:B.a.SAMPLE_PUNK_URL,"')")}}),Object(It.jsx)(Vn,{sx:{backgroundImage:"url('".concat(null!==o&&void 0!==o?o:B.a.SAMPLE_PUNK_URL,"')")}})]})})},$n=function(){return Object(It.jsx)(It.Fragment,{children:Object(It.jsx)(Qn,{punkId1:5667,punkId2:3848})})},zn=Object(F.a)(),Gn=function(){var e=Object(i.useState)([]),t=Object(Ct.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)([]),c=Object(Ct.a)(a,2),s=c[0],o=c[1];return Object(rn.a)(ft,{fetchPolicy:"network-only",onCompleted:function(e){r(e.punksAll)}}),Object(i.useEffect)((function(){var e,t=new Set([1631,2105,2203,3073,4171,4191,6819,7552,7864,8936,9650,9724]),r=[],a=Object(M.a)(n);try{for(a.s();!(e=a.n()).done;){var c=e.value;t.has(parseInt(c.id))&&r.push(c)}}catch(i){a.e(i)}finally{a.f()}r=r.reverse(),o(r),zn.info(r.length,n.length)()}),[n]),Object(It.jsx)(It.Fragment,{children:Object(It.jsx)(Wt.a,{sx:{pb:6},maxWidth:"xl",children:Object(It.jsx)(an.a,{container:!0,spacing:3,justifyContent:"center",alignItems:"center",marginBottom:3,children:s.map((function(e){return Object(It.jsx)(an.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(It.jsx)(Mn,{item:e})},e.id)}))})})})},Kn=n(161),Yn=n(397),Jn=n(346),Zn=n(399),Xn=function(e){var t=s.a.useMemo((function(){return new ee}),[]),n=t.getDuration(e.date),r=s.a.useRef(!1),a=s.a.useState({days:n.days()>0?n.days():0,hours:n.hours()>0?n.hours():0,minutes:n.minutes()>0?n.minutes():0,seconds:n.seconds()>0?n.seconds():0}),c=Object(Ct.a)(a,2),i=c[0],o=c[1];return n.asSeconds()>0&&setTimeout((function(){var n=t.getDuration(e.date);r.current&&o({days:n.days(),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds()})}),500),s.a.useEffect((function(){return r.current=!0,function(){r.current=!1}}),[]),Object(It.jsxs)(Bt.a,{variant:"subtitle1",color:"textSecondary",children:[Object(It.jsx)("b",{children:i.days})," days ",Object(It.jsx)("b",{children:i.hours})," hours ",Object(It.jsx)("b",{children:i.minutes})," minutes ",Object(It.jsx)("b",{children:i.seconds})," seconds"]})},er=n(211),tr=n.n(er),nr=n(381),rr=n(395),ar=n(396),cr=Object(h.a)((function(e){return Object(It.jsx)(nr.a,Object(p.a)({disableGutters:!0,elevation:0,square:!0},e))}))((function(e){var t=e.theme;return{border:"1px solid ".concat(t.palette.divider),"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},backgroundColor:"dark"===t.palette.mode?"rgba(0, 0, 0, .2)":"rgba(255, 255, 255, .2)"}})),ir=Object(h.a)((function(e){return Object(It.jsx)(rr.a,Object(p.a)({expandIcon:Object(It.jsx)(tr.a,{sx:{fontSize:"0.9rem"}})},e))}))((function(e){var t=e.theme;return{backgroundColor:"dark"===t.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:t.spacing(1)}}})),sr=Object(h.a)(ar.a)((function(e){return{padding:e.theme.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}})),or=function(){var e=s.a.useState("faq0"),t=Object(Ct.a)(e,2),n=t[0],r=t[1],a=function(e){return function(t,n){r(!!n&&e)}};return Object(It.jsxs)(It.Fragment,{children:[Object(It.jsx)(cn.a,{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:2,children:Object(It.jsxs)("div",{children:[Object(It.jsx)(Bt.a,{variant:"h5",color:"textSecondary",textAlign:"center",children:"FAQ"}),Object(It.jsx)(Bt.a,{variant:"subtitle1",color:"textSecondary",textAlign:"center",children:"Frequently Asked Questions"})]})}),Object(It.jsx)(cn.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(It.jsxs)(cn.a,{maxWidth:800,children:[Object(It.jsxs)(cr,{expanded:"faq0"===n,onChange:a("faq0"),children:[Object(It.jsx)(ir,{"aria-controls":"faq0-content",id:"faq0-header",children:Object(It.jsx)(Bt.a,{children:"What is the vision behind VitePunks?"})}),Object(It.jsx)(sr,{children:Object(It.jsxs)(Bt.a,{children:["Our main vision is to develop the best possible marketplace for our punks and maybe open it to other artists at some point, depending on what other NFT marketplaces will be released on Vite in the near future. What is very important to us is long-term availability. We would like to guarantee that our punks will be accessible as long as Vite exists. For example we plan to store our images on IPFS in addition to our own cloud storage.",Object(It.jsx)("br",{}),Object(It.jsx)("br",{}),"The compiled version of this website can already be cloned and forked on ",Object(It.jsx)(Yn.a,{underline:"hover",href:"https://github.com/vitepunks/vitepunks.github.io",target:"_blank",children:"GitHub"})," or accessed by this link ",Object(It.jsx)(Yn.a,{underline:"hover",href:"https://vitepunks.github.io/website/",target:"_blank",children:"https://vitepunks.github.io/website/"}),". Always with the hope to ensure resiliency and establish more trust overall long-term."]})})]}),Object(It.jsxs)(cr,{expanded:"faq1"===n,onChange:a("faq1"),children:[Object(It.jsx)(ir,{"aria-controls":"faq1-content",id:"faq1-header",children:Object(It.jsx)(Bt.a,{children:"Why is the smart contract not open-source yet?"})}),Object(It.jsx)(sr,{children:Object(It.jsx)(Bt.a,{children:"We understand that the situation for some is not satisfactory right now. Being pioneers in any space is always coupled with a lot of work, sometimes it gets rewarded, more often not. What we can assure is that we will make our smart contract public as soon as another high-quality project delivers something similar to us. Maybe this is the wrong approach but ultimately this is actually a really hard decision to make."})})]}),Object(It.jsxs)(cr,{expanded:"faq2"===n,onChange:a("faq2"),children:[Object(It.jsx)(ir,{"aria-controls":"faq2-content",id:"faq2-header",children:Object(It.jsx)(Bt.a,{children:"Where can I download the Vite Wallet App?"})}),Object(It.jsx)(sr,{children:Object(It.jsxs)(Bt.a,{children:["The Vite App Wallet can be downloaded for ",Object(It.jsx)(Yn.a,{underline:"hover",href:"https://play.google.com/store/apps/details?id=net.vite.wallet",target:"_blank",children:"Android"}),"\xa0or ",Object(It.jsx)(Yn.a,{underline:"hover",href:"https://apps.apple.com/ch/app/vite-multi-chain-wallet/id1437629486",target:"_blank",children:"iOS"}),"."]})})]}),Object(It.jsxs)(cr,{expanded:"faq3"===n,onChange:a("faq3"),children:[Object(It.jsx)(ir,{"aria-controls":"faq3-content",id:"faq3-header",children:Object(It.jsx)(Bt.a,{children:"How can I connect my wallet on my smartphone?"})}),Object(It.jsx)(sr,{children:Object(It.jsxs)(Bt.a,{children:["Connecting the wallet on your smartphone can be tricky because it is not possible to scan the QR code currently being displayed on your screen. To overcome this limitation detailed instructions can be found in our ",Object(It.jsx)(Yn.a,{underline:"hover",href:"https://github.com/vitepunks/resources/wiki/Connect-Wallet",target:"_blank",children:"wiki article"}),"."]})})]}),Object(It.jsxs)(cr,{expanded:"faq4"===n,onChange:a("faq4"),children:[Object(It.jsx)(ir,{"aria-controls":"faq4-content",id:"faq4-header",children:Object(It.jsx)(Bt.a,{children:"Is it possible to view my minted punks in my wallet?"})}),Object(It.jsx)(sr,{children:Object(It.jsxs)(Bt.a,{children:["Before this can be achieved, the Vite community has to agree on a commonly accepted standard. Currently it is being worked on as a bounty started by ViteLabs. You can find it ",Object(It.jsx)(Yn.a,{underline:"hover",href:"https://gitcoin.co/issue/vitelabs/bounties/18/100027282",target:"_blank",children:"here"}),". So in this sense we are truly similar to the original CryptoPunks project which pioneered the NFT space without having a standard at hand when released."]})})]}),Object(It.jsxs)(cr,{expanded:"faq5"===n,onChange:a("faq5"),children:[Object(It.jsx)(ir,{"aria-controls":"faq5-content",id:"faq5-header",children:Object(It.jsx)(Bt.a,{children:"How can I gift/transfer my punk to someone else?"})}),Object(It.jsx)(sr,{children:Object(It.jsxs)(Bt.a,{children:["This can be achieved by offering your punk for sale for 0 VITE to a specific address. Only this address will be able to claim the punk. Just follow the steps described in this ",Object(It.jsx)(Yn.a,{underline:"hover",href:"https://github.com/vitepunks/resources/wiki/Gifting",target:"_blank",children:"wiki article"}),"."]})})]})]})}),Object(It.jsx)(Bt.a,{variant:"subtitle1",color:"textSecondary",textAlign:"center",marginTop:2,children:"Community articles"}),Object(It.jsxs)(Bt.a,{variant:"subtitle2",color:"textSecondary",textAlign:"center",children:[Object(It.jsx)(Yn.a,{underline:"hover",href:"https://medium.com/@CPCLinoCrypto/cuestionario-realizado-a-vitepunks-dd6f3e40dae8",target:"_blank",children:"[Spanish]"}),"\xa0",Object(It.jsx)(Yn.a,{underline:"hover",href:"https://medium.com/@CPCLinoCrypto/questionnaire-answered-by-vitepunk-c1a9657c20ec",target:"_blank",children:"[English]"})]})]})},ur=n(377),lr=n(398),dr=function(e){var t=Object(i.useState)(100),n=Object(Ct.a)(t,2),r=n[0],a=n[1];return Object(i.useEffect)((function(){if(e.mintsRemaining&&e.mintsRemaining>0){var t=e.mintsRemaining===B.a.TOTAL_MINTS?100:90;a(Math.min(t,e.mintsRemaining/B.a.TOTAL_MINTS*100))}else a(100)}),[e.mintsRemaining]),Object(It.jsxs)(on.a,{elevation:3,sx:{width:"60%",textAlign:"center",mb:3},children:[Object(It.jsx)(cn.a,{sx:{px:2,pt:2,pb:1.5},children:e.loading||!e.mintsRemaining?Object(It.jsx)(ur.a,{animation:"wave",width:"50%"}):Object(It.jsxs)(Bt.a,{variant:"subtitle1",color:"textSecondary",children:[Object(It.jsx)("b",{children:fe.formatNumber(e.mintsRemaining)})," of ",fe.formatNumber(B.a.TOTAL_MINTS)," mintable"]})}),Object(It.jsx)(lr.a,{sx:{height:"8px"},variant:"determinate",color:r<=40?"error":"primary",value:r})]})},fr=n(345),hr=Object(F.a)(),br=n(185),pr=Object(br.a)({typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},palette:{primary:{main:"#133995"},secondary:{main:"#6817ff"}}}),vr=function(){function e(){Object(v.a)(this,e)}return Object(j.a)(e,null,[{key:"getBaseUrl",value:function(e){var t=e;return t&&!T.a.isNullOrWhitespace(t)||(t=E.a.EXPLORER_URL),t=t.endsWith("/")?t.substring(0,t.length-1):t}},{key:"getAddressUrl",value:function(t,n){var r=e.getBaseUrl(n);return r===e.DEFAULT_BASE_URL?"".concat(r,"/address/").concat(t):"".concat(r,"/account/").concat(t)}},{key:"getTxUrl",value:function(t,n){var r=e.getBaseUrl(n);return e.DEFAULT_BASE_URL,"".concat(r,"/tx/").concat(t)}}]),e}();vr.DEFAULT_BASE_URL="https://vitescan.io";var jr,mr=Object(F.a)(),Or=Object(h.a)("div")((function(e){e.theme;return'\n  position: relative;\n  height: 320px;\n  // animation: lightning 4s ease-out infinite;\n  background-image: url("'.concat(B.a.ITEM_BG_URL,'");\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n')})),gr=Object(h.a)("div")((function(e){e.theme;return"\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  image-rendering: pixelated;\n"})),yr=function(e){var t=Object(fr.a)(pr.breakpoints.up("md")),n=function(){return T.a.truncateStringInTheMiddle(e.address,10,5)};return Object(It.jsxs)(cn.a,{sx:{width:"100%"},children:[Object(It.jsxs)(cn.a,{sx:{display:"flex",alignItems:"center"},children:[t&&Object(It.jsx)(cn.a,{sx:{mr:1,minWidth:"115px"},children:Object(It.jsx)(Sn,{title:e.address,placement:"bottom",arrow:!0,children:Object(It.jsx)(Yn.a,{underline:"hover",href:vr.getAddressUrl(e.address),target:"_blank",variant:"body2",color:"text.secondary",children:n()})})}),Object(It.jsx)(cn.a,{sx:{width:"100%",mr:1},children:Object(It.jsx)(lr.a,Object(p.a)({variant:"determinate",sx:{height:5}},e))}),Object(It.jsx)(cn.a,{sx:{minWidth:35},children:Object(It.jsx)(Bt.a,{variant:"body2",color:"text.secondary",children:e.label})})]}),!t&&Object(It.jsx)(Sn,{title:e.address,placement:"bottom",arrow:!0,children:Object(It.jsx)(Yn.a,{underline:"hover",variant:"body2",color:"text.secondary",children:n()})})]})},xr=function(){var e,t=s.a.useRef(!1),n="6297",r=s.a.useMemo((function(){return new ee}),[]),a=s.a.useMemo((function(){return ze()}),[]),c=Object(i.useState)(!1),o=Object(Ct.a)(c,2),u=o[0],l=o[1],d=Object(i.useState)(0),f=Object(Ct.a)(d,2),h=f[0],b=f[1],p=Object(i.useState)([]),v=Object(Ct.a)(p,2),j=v[0],m=v[1],O=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"network-only",r=Object(rn.a)(lt,{variables:{id:e},notifyOnNetworkStatusChange:!0,fetchPolicy:n,refetchWritePolicy:"overwrite"}),a=r.error,c=r.loading;return{punk:null===(t=r.data)||void 0===t?void 0:t.punk,error:a,loading:c}}(n),g=O.punk,y=r.getFromUnix(1643673599),x=Object(fr.a)(pr.breakpoints.up("md"));return Object(i.useEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]),Object(i.useEffect)((function(){var e=function(){var e=Object(S.a)(C.a.mark((function e(){var n,r,c,i,s,o,u,d,f;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.datasource.getPunksAllAsync();case 2:n=e.sent,r=new Map,c=Object(M.a)(n);try{for(c.s();!(i=c.n()).done;)(s=i.value).owner&&((o=r.get(s.owner))||(o={address:s.owner,total:0,rares:0}),o.total++,s.rank<100&&o.rares++,r.set(s.owner,o))}catch(h){c.e(h)}finally{c.f()}u=[],d=0,r.forEach((function(e,t){e.rares>0&&(u.push(e),e.rares>d&&(d=e.rares))})),mr.info("_holderMap.size",r.size,"holders.length",u.length)(),f=Object(N.orderBy)(u,[function(e){return e.rares},function(e){return e.total}],["desc","desc"]),t&&(b(d),m(f.splice(0,Math.min(7,f.length))),l(!1));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();l(!0),setTimeout((function(){e()}),2e3)}),[a.datasource]),Object(It.jsx)(cn.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(It.jsx)(cn.a,{maxWidth:900,children:Object(It.jsx)(on.a,{style:{backgroundColor:"rgba(255, 255, 255, 0.5)"},children:Object(It.jsxs)(cn.a,{sx:{display:x?"flex":"inherit",px:2,pt:2,pb:2,width:"100%"},children:[Object(It.jsx)(vn.a,{sx:{minWidth:x?"350px":"100%"},children:Object(It.jsxs)(bn.a,{component:en.b,to:"/punk/".concat(n),target:"_blank",children:[Object(It.jsxs)(Or,{children:[Object(It.jsx)(cn.a,{sx:{position:"absolute",top:5,right:5},children:Object(It.jsx)(Sn,{title:Object(It.jsx)("span",{children:"Rarity rank"}),placement:"bottom",arrow:!0,children:Object(It.jsx)(pn.a,{size:"small",icon:Object(It.jsx)(yn,{icon:fn.a,sx:{fontSize:"small",ml:1}}),sx:{fontSize:"0.7rem"},label:null===g||void 0===g?void 0:g.rank})})}),Object(It.jsx)(gr,{sx:{backgroundImage:'url("'.concat(On.getPunkUrl(null===g||void 0===g?void 0:g.image),'")')}})]}),Object(It.jsxs)(jn.a,{sx:{p:0},children:[Object(It.jsxs)(Bt.a,{variant:"h6",component:"div",sx:{p:1},children:[B.a.PUNK_NAME," #",n]}),Object(It.jsx)(cn.a,{sx:{height:"70px",overflow:"auto"},children:Object(It.jsx)(cn.a,{sx:{p:1},children:null===g||void 0===g||null===(e=g.attributes)||void 0===e?void 0:e.map((function(e){return Object(It.jsx)(pn.a,{label:e,variant:"outlined",sx:{mb:1,mr:1},size:"small"},e)}))})})]})]})}),Object(It.jsxs)(cn.a,{sx:{flexGrow:1,ml:x?2:0,mt:x?0:2},children:[Object(It.jsx)(Bt.a,{variant:"h6",paragraph:!0,children:"\ud83d\udc8e Rarity contest"}),"The address owning the most rare punks below rank ",100," when the contest ends will be awarded ",Object(It.jsxs)(Yn.a,{underline:"hover",component:en.b,to:"/punk/".concat(n),target:"_blank",children:[B.a.PUNK_NAME," #",n]})," with rarity rank ",Object(It.jsx)(pn.a,{size:"small",label:null===g||void 0===g?void 0:g.rank}),Object(It.jsx)("br",{}),"In case 2 or more addresses own the same amount of rare punks, the address with overall more punks will be awarded.",Object(It.jsx)(cn.a,{sx:{mt:3},children:u?Object(It.jsxs)(It.Fragment,{children:[Object(It.jsx)(ur.a,{animation:"wave"}),Object(It.jsx)(ur.a,{animation:"wave",sx:{mt:.5}}),Object(It.jsx)(ur.a,{animation:"wave",sx:{mt:.5}}),Object(It.jsx)(ur.a,{animation:"wave",sx:{mt:.5}}),Object(It.jsx)(ur.a,{animation:"wave",sx:{mt:.5}}),Object(It.jsx)(ur.a,{animation:"wave",sx:{mt:.5}})]}):Object(It.jsx)(It.Fragment,{children:j.map((function(e){return Object(It.jsx)(yr,{value:e.rares/h*100,label:e.rares.toString(),address:e.address},e.address)}))})}),Object(It.jsx)(on.a,{elevation:3,sx:{p:2,textAlign:"center",mt:3},children:Object(It.jsx)(Xn,{date:y.toISOString()})})]})]})})})})},kr=Object(F.a)(),wr=function(){var e=s.a.useMemo((function(){return new ee}),[]).getLocal("2021-12-21T17:00:00+0000"),t=s.a.useRef(!1),n=Object(i.useState)({number:new w.a("0"),displayNumber:"0"}),r=Object(Ct.a)(n,2),a=r[0],c=r[1],o=Object(i.useState)(!1),u=Object(Ct.a)(o,2),l=u[0],d=u[1],f=Object(i.useState)(!1),h=Object(Ct.a)(f,2),b=h[0],p=h[1],v=Object(i.useState)(void 0),j=Object(Ct.a)(v,2),m=j[0],O=j[1],g=Object(U.a)(),y=Wn(),x=Object(rn.a)(jt,{fetchPolicy:"network-only"}),k=x.refetch;Object(i.useEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]),Object(i.useEffect)((function(){var e=function(e){e===te.a.Active&&(kr.info("Refreshing market info")(),k())};return g.on(te.b.DocumentVisibilityChanged,e),function(){g.off(te.b.DocumentVisibilityChanged,e)}}),[g,k]),Object(i.useEffect)((function(){var e=function(e){kr.info("eventType: ".concat(e.eventType," amount: ").concat(e.value.toFixed()," timestamp: ").concat(e.timestamp.toFixed()))(),k()};return g.on(te.b.MarketChanged,e),function(){g.off(te.b.MarketChanged,e)}}),[g,k]),Object(i.useEffect)((function(){var e=function(e){var t;kr.info("eventType: ".concat(e.eventType," punkId: ").concat(e.punkId," amount: ").concat(null===(t=e.amount)||void 0===t?void 0:t.toFixed()," fromAddress: ").concat(e.fromAddress," toAddress: ").concat(e.toAddress," timestamp: ").concat(e.timestamp.toFixed()))(),k()};return g.on(te.b.PunkChanged,e),function(){g.off(te.b.PunkChanged,e)}}),[g,k]),Object(i.useEffect)((function(){var e,n=null===(e=x.data)||void 0===e?void 0:e.marketInfo;n&&t.current&&(c({number:new w.a(n.mintPrice),displayNumber:mn.formatVite(new w.a(n.mintPrice))}),d(n.marketStarted),p(n.marketStarted&&n.mintsRemaining>0),O(n.mintsRemaining))}),[x.data]);var A=function(){var e=Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.mintAsync();case 3:e.sent?nn.enqueueMessage("Mint success"):nn.enqueueError("Mint failed"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),kr.error(e.t0)(),nn.enqueueError(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(It.jsx)(Wt.a,{maxWidth:"lg",sx:{mt:10},children:Object(It.jsxs)(an.a,{container:!0,spacing:3,direction:"row",justifyContent:"center",alignItems:"center",marginBottom:3,children:[Object(It.jsx)(an.a,{item:!0,sm:12,md:6,children:Object(It.jsx)(cn.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(It.jsxs)("div",{children:[Object(It.jsx)(Bt.a,{variant:"h3",color:"primary",children:B.a.APP_NAME}),Object(It.jsxs)(Bt.a,{variant:"subtitle1",color:"textSecondary",paragraph:!0,children:["The very first NFT collection powered by ",Object(It.jsx)(Yn.a,{underline:"hover",href:"https://www.vite.org/",target:"_blank",children:"Vite chain"}),". Now is your chance to make Vite history and become owner of an isometric punk. Get yourself ready for the metaverse.",l?Object(It.jsxs)(It.Fragment,{children:["\xa0Mint a punk for ",a.displayNumber," ",B.a.CURRENCY_NAME," now!"]}):Object(It.jsx)(It.Fragment,{children:"\xa0Minting will open in:"})]}),l?Object(It.jsx)(dr,{loading:x.loading,mintsRemaining:m}):Object(It.jsx)(on.a,{elevation:3,sx:{p:2,width:"60%",textAlign:"center",mb:3},children:Object(It.jsx)(Xn,{date:e.toISOString()})}),Object(It.jsxs)(Jn.a,{spacing:2,direction:"row",children:[Object(It.jsx)(dn,{variant:"contained",color:"primary",callbackFn:A,sx:{minWidth:"100px"},disabled:!b,children:"Mint"}),Object(It.jsx)(Tn.a,{variant:"outlined",color:"primary",component:en.b,to:"/marketplace",children:"Browse"})]})]})})}),Object(It.jsx)(an.a,{item:!0,sm:12,md:6,children:Object(It.jsx)(cn.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(It.jsx)("video",{width:"100%",preload:"",autoPlay:!0,muted:!0,playsInline:!0,loop:!0,style:{opacity:"0.8"},children:Object(It.jsx)("source",{src:B.a.CDN_URL+"videos/nye_640x360.mp4",type:"video/mp4"})})})}),Object(It.jsxs)(an.a,{item:!0,xs:12,marginTop:10,children:[Object(It.jsx)(cn.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(It.jsx)(Bt.a,{variant:"subtitle1",color:"textSecondary",children:"Connect with us"})}),Object(It.jsx)(cn.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(It.jsxs)(Jn.a,{spacing:2,direction:"row",children:[Object(It.jsx)(Zn.a,{"aria-label":"Twitter",href:B.a.TWITTER_URL,target:"_blank",children:Object(It.jsx)(yn,{icon:Kn.c})}),Object(It.jsx)(Zn.a,{"aria-label":"GitHub",href:B.a.GITHUB_URL,target:"_blank",children:Object(It.jsx)(yn,{icon:Kn.b})}),Object(It.jsx)(Zn.a,{"aria-label":"Discord",href:B.a.DISCORD_URL,target:"_blank",children:Object(It.jsx)(yn,{icon:Kn.a})})]})})]}),Object(It.jsx)(an.a,{item:!0,xs:12,marginTop:10,children:Object(It.jsx)(xr,{})}),Object(It.jsx)(an.a,{item:!0,xs:12,marginTop:10,children:Object(It.jsx)(or,{})}),Object(It.jsx)(an.a,{item:!0,xs:12,marginTop:2,children:Object(It.jsx)(cn.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(It.jsx)(cn.a,{maxWidth:800,children:Object(It.jsx)("img",{width:"100%",alt:"main",src:B.a.LANDING_IMAGE_URL})})})}),Object(It.jsx)(an.a,{item:!0,xs:12,marginTop:1,children:Object(It.jsx)(cn.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(It.jsxs)("div",{children:[Object(It.jsx)(Bt.a,{variant:"h5",color:"textSecondary",textAlign:"center",paragraph:!0,children:"Disclaimer"}),Object(It.jsxs)(Bt.a,{variant:"subtitle1",color:"textSecondary",textAlign:"center",paragraph:!0,children:["The intention of ",B.a.APP_NAME," is to showcase the capabilities of the Vite Blockchain. ",B.a.APP_NAME," is not affiliated with CryptoPunks and LarvaLabs. The value of a ",B.a.PUNK_NAME," is not related to the value of a CryptoPunk. ",B.a.APP_NAME," is a homage to the CryptoPunk project of LarvaLabs. With ",B.a.APP_NAME," we thank LarvaLabs for their pioneering and for creating the CryptoPunk project. The project that basically started the ever growing NFT movement.",l&&a.number.gt(0)&&Object(It.jsxs)(It.Fragment,{children:["\xa0Why mint for ",a.displayNumber," ",B.a.CURRENCY_NAME,"? The minting of ",B.a.APP_NAME," is set at ",a.displayNumber," ",B.a.CURRENCY_NAME,". This means that during the initial minting phase, you will be able to generate a random punk for ",a.displayNumber," ",B.a.CURRENCY_NAME,". When all 10,000 Punks are minted, you can get a Punk by using the marketplace. That the minting is set at ",a.displayNumber," ",B.a.CURRENCY_NAME," has a couple of reasons. As you know, keeping up, maintaining and further developing a system costs money. We want to keep ",B.a.APP_NAME," running for years to come and we hope to integrate ",B.a.APP_NAME," with other NFT marketplaces in the near future."]})]})]})})})]})})},Ar=n(183),_r=n.n(Ar),Cr=n(213),Sr=n.n(Cr),Er=n(212),Br=n.n(Er),Ir=n(46),Mr=n(400),Pr=n(349),Nr=n(401),Tr=n(402),Fr=n(403),Rr=n(372),Lr=n(351),Dr=n(350),Wr=n(162),Ur=function(e){var t=Object(i.useRef)(null);return Object(i.useEffect)((function(){var n={size:240,ecLevel:Wr.ecLevel.HIGH,minVersion:4,background:"#fff",mode:Wr.modes.DRAW_WITH_IMAGE_BOX,radius:0,image:"./assets/images/logo640.png",mSize:.3};e.text&&t.current&&(n.size=Math.min(240,t.current.clientWidth-10),t.current.innerHTML="",new Wr.qrcode(t.current).generate(e.text,n).then((function(){console.log("QR code generated")})))}),[e.text]),Object(It.jsx)("div",{ref:t})},qr=Object(F.a)(),Hr=function(e){var t=Object(i.useState)(""),n=Object(Ct.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(!1),o=Object(Ct.a)(c,2),u=o[0],l=o[1],d=Object(i.useState)(void 0),f=Object(Ct.a)(d,2),h=f[0],b=f[1],p=e.onClose,v=e.open,j=e.setOpen,m=ze(),O=Object(ne.h)(),g=Object(U.a)(),y=s.a.useMemo((function(){return new ne.e(O)}),[O]),x=s.a.useCallback(Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.createAsync(m.network);case 3:t=e.sent,qr.info(t.uri)(),a(t.uri),l(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),qr.error(e.t0)(),l(!0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[y,m.network]);Object(i.useEffect)((function(){var e=function(e){j(e)};return g.on(te.b.ConnectWalletDialog,e),function(){g.off(te.b.ConnectWalletDialog,e),a(""),l(!1)}}),[g,j]),Object(i.useEffect)((function(){v&&(b(void 0),x())}),[v,x]);return Object(It.jsxs)(Mr.a,{onClose:function(){p()},open:v,maxWidth:"xs",children:[Object(It.jsx)(Pr.a,{children:"Connect Wallet"}),Object(It.jsxs)(Nr.a,{children:[Object(It.jsx)(Tr.a,{children:"Scan the QR code via Vite Wallet App"}),Object(It.jsxs)(Dr.a,{sx:{mt:2,textAlign:"center"},children:[T.a.isNullOrWhitespace(r)?Object(It.jsx)(It.Fragment,{children:u?Object(It.jsxs)(It.Fragment,{children:[Object(It.jsx)(Bt.a,{gutterBottom:!0,children:"Error"}),Object(It.jsx)(dn,{variant:"outlined",callbackFn:x,children:"Retry"})]}):Object(It.jsx)(It.Fragment,{children:"Loading..."})}):Object(It.jsx)(Ur,{text:r}),Object(It.jsxs)(Tr.a,{marginTop:1,children:["Don't have the Vite Wallet App? ",Object(It.jsx)(Yn.a,{underline:"hover",href:"https://vite.org/airdrop",target:"_blank",children:"Download here"})]})]}),E.a.ENABLE_MNEMONIC_LOGIN&&Object(It.jsxs)(Dr.a,{sx:{mt:2,textAlign:"center"},children:[Object(It.jsxs)(Fr.a,{fullWidth:!0,variant:"standard",children:[Object(It.jsx)(Rr.a,{htmlFor:"mnemonic",children:"Mnemonic"}),Object(It.jsx)(Lr.a,{id:"mnemonic",value:h,onChange:function(e){b(e.target.value)},type:"text",autoComplete:"new-password"})]}),Object(It.jsx)(Tn.a,{variant:"contained",sx:{mt:1},onClick:function(){var e;O.createWebWallet(T.a.isNullOrWhitespace(h)?null!==(e="spell barely teach wisdom best tragic three lyrics second notable excuse hobby example tenant business midnight member canal energy evoke debate tortoise high infant")?e:"":null!==h&&void 0!==h?h:"")||nn.enqueueError("Invalid mnemonic")},children:"Use test account"})]})]})]})},Vr=Object(h.a)("div")((function(e){e.theme;return"\n  flex-grow: 1;\n"})),Qr=Object(h.a)(Bt.a)((function(e){e.theme;return"\n  flex-grow: 1;\n  margin-left: 10px !important;\n"})),$r=function(e){var t,n=Object(tn.f)(),r=Object(Ir.a)(),a=Object(fr.a)(r.breakpoints.up("sm")),c=Zt(),i=s.a.useState(!1),o=Object(Ct.a)(i,2),u=o[0],l=o[1],d=function(){n("/account/".concat(c.account))};return Object(It.jsx)(Vr,{children:Object(It.jsx)(Nt.a,{position:"static",color:"transparent",children:Object(It.jsxs)(Tt.a,{children:[Object(It.jsx)("a",{href:"./",style:{height:"40px"},children:Object(It.jsx)("img",{src:"./assets/images/logo640.png",alt:"logo",width:"40"})}),Object(It.jsx)(Qr,{variant:"h6",color:"#fff",children:Object(It.jsx)("a",{href:"./",style:{color:"inherit",textDecoration:"inherit"},children:B.a.APP_NAME})}),Object(It.jsx)(Tn.a,{sx:{mr:2},component:en.b,to:"/marketplace",children:a?Object(It.jsx)(It.Fragment,{children:"Marketplace"}):Object(It.jsx)(Br.a,{})}),c.account?Object(It.jsxs)(It.Fragment,{children:[Object(It.jsx)(Sn,{sx:{mr:1},title:Object(It.jsx)(s.a.Fragment,{children:Object(It.jsx)("p",{children:c.account})}),placement:"bottom",arrow:!0,children:a?Object(It.jsx)(pn.a,{icon:Object(It.jsx)(_r.a,{}),label:(t=c.account,T.a.truncateStringInTheMiddle(t,10,5)),variant:"outlined",onClick:d}):Object(It.jsx)(Tn.a,{color:"inherit",onClick:d,children:Object(It.jsx)(_r.a,{})})}),Object(It.jsx)(Tn.a,{color:"inherit",onClick:function(){c.logout()},children:Object(It.jsx)(Sr.a,{})})]}):Object(It.jsx)(Tn.a,{variant:"contained",color:"primary",onClick:function(){l(!0)},children:"Connect wallet"}),Object(It.jsx)(Hr,{open:u,setOpen:l,onClose:function(){l(!1)}})]})})})},zr=n(215),Gr=n.n(zr),Kr=n(216),Yr=n.n(Kr),Jr=n(364),Zr=n(412),Xr=function(){function e(){var t=this;Object(v.a)(this,e),this._apollo=void 0,this.getMarketInfoAsync=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"network-only";return t._apollo.query({query:jt,fetchPolicy:e})},this.getEventsAsync=function(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"network-only";return t._apollo.query({query:gt,variables:{offset:e,limit:n,height:r},fetchPolicy:a})},this._apollo=_t()}return Object(j.a)(e,[{key:"offerAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n,r){var a,c,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._apollo.mutate({mutation:Ye,variables:{id:t,amount:n,address:T.a.isNullOrWhitespace(r)?void 0:r}});case 2:return i=e.sent,e.abrupt("return",Boolean(null!==(a=null===(c=i.data)||void 0===c?void 0:c.offer)&&void 0!==a&&a));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"cancelOfferAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._apollo.mutate({mutation:Je,variables:{id:t}});case 2:return a=e.sent,e.abrupt("return",Boolean(null!==(n=null===(r=a.data)||void 0===r?void 0:r.cancelOffer)&&void 0!==n&&n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"buyAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){var r,a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._apollo.mutate({mutation:Ze,variables:{id:t,amount:n}});case 2:return c=e.sent,e.abrupt("return",Boolean(null!==(r=null===(a=c.data)||void 0===a?void 0:a.buy)&&void 0!==r&&r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"bidAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){var r,a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._apollo.mutate({mutation:Xe,variables:{id:t,amount:n}});case 2:return c=e.sent,e.abrupt("return",Boolean(null!==(r=null===(a=c.data)||void 0===a?void 0:a.bid)&&void 0!==r&&r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"acceptBidAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){var r,a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._apollo.mutate({mutation:et,variables:{id:t,amount:n}});case 2:return c=e.sent,e.abrupt("return",Boolean(null!==(r=null===(a=c.data)||void 0===a?void 0:a.acceptBid)&&void 0!==r&&r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"cancelBidAsync",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._apollo.mutate({mutation:tt,variables:{id:t}});case 2:return a=e.sent,e.abrupt("return",Boolean(null!==(n=null===(r=a.data)||void 0===r?void 0:r.cancelBid)&&void 0!==n&&n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ea=new Xr,ta=function(){return ea},na=n(214),ra=n(383),aa=n(404),ca=n(405),ia=n(406),sa=n(407),oa=n(408),ua=n(409),la=function e(){Object(v.a)(this,e)};la.getBuyEventTypeIcon=function(){return hn.c},la.getClaimEventTypeIcon=function(){return hn.e},la.getOfferEventTypeIcon=function(){return hn.i},la.getCancelSaleEventTypeIcon=function(){return hn.g},la.getCancelGiftEventTypeIcon=function(){return hn.d},la.getPunkEventTypeIcon=function(e,t){switch(e){case te.f.Mint:return hn.j;case te.f.Offer:return t&&t.gt(0)?la.getOfferEventTypeIcon():la.getClaimEventTypeIcon();case te.f.NewBid:return hn.f;case te.f.CancelBid:return hn.a;case te.f.Buy:return t&&t.gt(0)?la.getBuyEventTypeIcon():la.getClaimEventTypeIcon();case te.f.CancelOffer:return t&&t.gt(0)?la.getCancelSaleEventTypeIcon():la.getCancelGiftEventTypeIcon();default:return hn.h}},function(e){e[e.Address=0]="Address",e[e.Transaction=1]="Transaction"}(jr||(jr={}));var da=function(e){var t=Object(i.useCallback)((function(){if(e.value&&!T.a.isNullOrWhitespace(e.value))return e.type===jr.Address?vr.getAddressUrl(e.value):vr.getTxUrl(e.value)}),[e.value,e.type]),n=Object(i.useState)(t()),r=Object(Ct.a)(n,2),a=r[0],c=r[1];return Object(i.useEffect)((function(){c(t())}),[e.value,e.type,t]),!a||T.a.isNullOrWhitespace(a)?Object(It.jsx)(It.Fragment,{children:e.children}):Object(It.jsx)(Yn.a,{underline:"hover",href:a,target:"_blank",children:e.children})},fa=Object(h.a)(ra.a)((function(e){e.theme;return"\n  background-image: url('".concat(B.a.ITEM_BG_URL,"');\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  image-rendering: pixelated;\n  margin-right: 10px;\n")})),ha=Object(h.a)(aa.a)((function(e){e.theme;return"\n  background-color: rgba(255, 255, 255, 0.3);\n"})),ba=function(e){var t,n,r,a,c,i=Object(rn.a)(lt,{variables:{id:e.item.punkId.toString()}}),s=new ee,o=function(e){return s.getLocalReverseFormatted(s.getFromUnix(e))};return Object(It.jsxs)(ca.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(It.jsxs)(aa.a,{component:"th",scope:"row",children:[Object(It.jsx)(na.a,{icon:la.getPunkEventTypeIcon(e.item.eventType,e.item.amount)})," ",Object(It.jsx)("b",{children:function(){switch(e.item.eventType){case te.f.Offer:if(!e.item.amount||e.item.amount.lte(0))return"Gift";break;case te.f.Buy:if(!e.item.amount||e.item.amount.lte(0))return"Claim gift"}return B.d[e.item.eventType].name}()})]}),Object(It.jsx)(aa.a,{children:Object(It.jsxs)(Yn.a,{underline:"hover",component:en.b,to:"/punk/".concat(e.item.punkId),display:"flex",alignItems:"center",children:[Object(It.jsx)(fa,{variant:"rounded",src:On.getPunkUrl(null===(t=i.data)||void 0===t?void 0:t.punk.image)}),B.a.PUNK_NAME," #",e.item.punkId]})}),Object(It.jsx)(aa.a,{children:(null===(n=e.item.amount)||void 0===n?void 0:n.gt(0))?Object(It.jsx)(It.Fragment,{children:Object(It.jsx)(Sn,{title:(c=e.item.amount,mn.formatViteTooltip(c)),children:Object(It.jsx)("span",{children:function(e){return mn.formatVite(e)}(e.item.amount)})})}):Object(It.jsx)(It.Fragment,{})}),Object(It.jsx)(aa.a,{children:Object(It.jsx)(da,{type:jr.Address,value:e.item.fromAddress,children:Object(It.jsx)(Sn,{title:null!==(r=e.item.fromAddress)&&void 0!==r?r:"",children:Object(It.jsx)("span",{children:T.a.truncateStringInTheMiddle(e.item.fromAddress,10,5)})})})}),Object(It.jsx)(aa.a,{children:Object(It.jsx)(da,{type:jr.Address,value:e.item.toAddress,children:Object(It.jsx)(Sn,{title:null!==(a=e.item.toAddress)&&void 0!==a?a:"",children:Object(It.jsx)("span",{children:T.a.truncateStringInTheMiddle(e.item.toAddress,10,5)})})})}),Object(It.jsx)(aa.a,{align:"right",children:e.item.eventType===te.f.Mint&&E.a.PRE_MINT_HEIGHT&&e.item.accountBlockHeight.lte(E.a.PRE_MINT_HEIGHT)?Object(It.jsx)(It.Fragment,{children:o(e.item.timestamp.toFixed())}):Object(It.jsx)(da,{type:jr.Transaction,value:e.item.accountBlockHash,children:o(e.item.timestamp.toFixed())})})]})},pa=function(e){return Object(It.jsx)(an.a,{item:!0,xs:12,md:6,children:e.loading?Object(It.jsx)(un,{message:"Loading...",type:"default"}):Object(It.jsx)(It.Fragment,{children:e.error?Object(It.jsx)(un,{message:fe.formatMessage(e.error),type:"warning"}):Object(It.jsx)(It.Fragment,{children:e.events.length>0?Object(It.jsx)(It.Fragment,{}):Object(It.jsx)(un,{message:"No activity yet",type:"default"})})})},"1")},va=function(e){var t,n;return Object(It.jsx)(on.a,{id:"event-list",style:{height:null!==(t=e.height)&&void 0!==t?t:300,overflow:"auto",backgroundColor:"rgba(255, 255, 255, 0.5)"},children:e.newEvents.length>0||e.events.length>0?Object(It.jsx)(sn.a,{dataLength:null!==(n=e.events.length)&&void 0!==n?n:0,next:e.fetchMoreDataAsync,hasMore:e.hasMore,loader:Object(It.jsx)(an.a,{container:!0,spacing:3,justifyContent:"center",alignItems:"center",children:Object(It.jsx)(pa,Object(p.a)({},e))}),scrollableTarget:"event-list",children:Object(It.jsx)(ia.a,{children:Object(It.jsxs)(sa.a,{stickyHeader:!0,children:[Object(It.jsx)(oa.a,{children:Object(It.jsxs)(ca.a,{children:[Object(It.jsx)(ha,{}),Object(It.jsx)(ha,{children:Object(It.jsx)("b",{children:"Punk"})}),Object(It.jsx)(ha,{children:Object(It.jsx)("b",{children:"Amount"})}),Object(It.jsx)(ha,{children:Object(It.jsx)("b",{children:"From"})}),Object(It.jsx)(ha,{children:Object(It.jsx)("b",{children:"To"})}),Object(It.jsx)(ha,{align:"right",children:Object(It.jsx)("b",{children:"Date"})})]})}),Object(It.jsxs)(ua.a,{children:[e.newEvents.map((function(e){return Object(It.jsx)(ba,{item:e},"new-events-".concat(e.id))})),e.events.map((function(e){return Object(It.jsx)(ba,{item:e},"events-".concat(e.id))}))]})]})})}):Object(It.jsx)(an.a,{sx:{height:"100%"},container:!0,spacing:3,justifyContent:"center",alignItems:"center",children:Object(It.jsx)(pa,Object(p.a)({},e))})})},ja=Object(F.a)(),ma=function(e){var t=Object(i.useState)(!1),n=Object(Ct.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(!0),s=Object(Ct.a)(c,2),o=s[0],u=s[1],l=Object(i.useState)(void 0),d=Object(Ct.a)(l,2),f=d[0],h=d[1],b=Object(i.useState)([]),p=Object(Ct.a)(b,2),v=p[0],j=p[1],m=Object(i.useState)([]),O=Object(Ct.a)(m,2),g=O[0],y=O[1],x=ta(),k=Object(U.a)(),w=Object(rn.a)(gt,{variables:{offset:0,limit:8},fetchPolicy:"network-only",onCompleted:function(e){j(e.marketEvents.events.map((function(e){return ce.toPunkEvent(e)})))}});Object(i.useEffect)((function(){a(w.loading)}),[w.loading]),Object(i.useEffect)((function(){h(w.error)}),[w.error]);var A=function(){var e=Object(S.a)(C.a.mark((function e(){var t,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ja.info("fetchMoreDataAsync",v.length)(),n=null===(t=w.data)||void 0===t?void 0:t.marketEvents.blockHeight.toString(),a(!0),e.prev=3,e.next=6,x.getEventsAsync(v.length,8,n);case 6:r=e.sent,u(r.data.marketEvents.events.length>=8),r.data.marketEvents.events.length>0&&j([].concat(Object(I.a)(v),Object(I.a)(r.data.marketEvents.events.map((function(e){return ce.toPunkEvent(e)}))))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),h(e.t0);case 14:a(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),_=w.refetch,E=Object(i.useCallback)((function(){ja.info("Refreshing market activity")(),_(),y([])}),[_]);Object(i.useEffect)((function(){var e=function(e){e===te.a.Active&&E()};return k.on(te.b.DocumentVisibilityChanged,e),function(){k.off(te.b.DocumentVisibilityChanged,e)}}),[k,E]);var B=Object(i.useCallback)((function(e){y([ce.toPunkEvent(e)].concat(Object(I.a)(g)))}),[g]);return Object(i.useEffect)((function(){var e=function(e){ja.info("newMarketEvent",e)(),B(e)};return ja.info("emitter.on",te.b.PunkChanged)(),k.on(te.b.PunkChanged,e),function(){ja.info("emitter.off",te.b.PunkChanged)(),k.off(te.b.PunkChanged,e)}}),[k,B]),Object(It.jsx)(va,{events:v,newEvents:g,error:f,loading:r,hasMore:o,height:500,fetchMoreDataAsync:A})},Oa=n(184),ga=n.n(Oa),ya=n(368),xa=n(373),ka=n(411),wa=n(361),Aa=n(370),_a=n(378),Ca=n(386),Sa=function(){var e,t,n=Object(i.useState)(B.b),r=Object(Ct.a)(n,2),a=r[0],c=r[1],s=Object(U.a)(),o=Object(rn.a)(st,{fetchPolicy:"network-only"}),u=function(e,t){s.emitPunkFilterValuesChanged(e,t)};return Object(It.jsxs)(an.a,{container:!0,sx:{mb:2},spacing:3,children:[Object(It.jsx)(an.a,{item:!0,md:3}),Object(It.jsx)(an.a,{item:!0,xs:12,md:6,children:Object(It.jsx)(ya.a,{multiple:!0,freeSolo:!0,id:"search-autocomplete",options:null!==(e=null===(t=o.data)||void 0===t?void 0:t.punkAttributes)&&void 0!==e?e:[],getOptionLabel:function(e){return e},size:"small",fullWidth:!0,onChange:function(e,t){var n=Object(p.a)(Object(p.a)({},a),{},{search:t.join(",")});c(n),u(a,n)},filterSelectedOptions:!0,renderInput:function(e){return Object(It.jsx)(xa.a,Object(p.a)(Object(p.a)({},e),{},{label:"Search"}))}})}),Object(It.jsx)(an.a,{item:!0,xs:12,md:3,children:Object(It.jsx)(ka.a,{children:Object(It.jsxs)(Jn.a,{direction:"row",justifyContent:"end",spacing:2,children:[Object(It.jsxs)(Fr.a,{size:"small",children:[Object(It.jsx)(Rr.a,{id:"sortby-select-label",children:"Sort by"}),Object(It.jsx)(wa.a,{labelId:"sortby-select-label",id:"sortby-select",value:a.sortBy,label:"Sort by",onChange:function(e){var t=Object(p.a)(Object(p.a)({},a),{},{sortBy:e.target.value});c(t),u(a,t)},children:B.e.map((function(e){return Object(It.jsxs)(Aa.a,{value:e.type,children:[e.name,"\xa0"]},e.type)}))})]}),Object(It.jsxs)(_a.a,{size:"small",exclusive:!0,value:a.orderBy,onChange:function(e,t){var n=Object(p.a)(Object(p.a)({},a),{},{orderBy:t});c(n),u(a,n)},children:[Object(It.jsx)(Ca.a,{value:Y.a.ASC,children:Object(It.jsx)(ga.a,{sx:{transform:"rotate(180deg)"}})}),Object(It.jsx)(Ca.a,{value:Y.a.DESC,children:Object(It.jsx)(ga.a,{})})]})]})})})]})},Ea=Object(F.a)(),Ba=function(e){return Object(It.jsx)(It.Fragment,{children:e.error?Object(It.jsx)(un,{message:fe.formatMessage(e.error),type:"warning"}):Object(It.jsx)(It.Fragment,{children:e.query.loading||e.query.data&&e.query.data.punks.length>0?Object(It.jsx)(It.Fragment,{}):Object(It.jsx)(un,{message:"No punks found",type:"default"})})})},Ia=function(e){return Object(It.jsx)(an.a,{container:!0,spacing:3,justifyContent:"center",alignItems:"center",children:Object(It.jsx)(an.a,{item:!0,xs:12,md:6,children:e.loading?Object(It.jsx)(un,{message:"Loading...",type:"default"}):Object(It.jsx)(Ba,{error:e.error,query:e.query})},"1")})},Ma=function(e){var t,n,r,a=Object(i.useState)(!1),c=Object(Ct.a)(a,2),s=c[0],o=c[1],u=Object(i.useState)(!0),l=Object(Ct.a)(u,2),d=l[0],f=l[1],h=Object(i.useState)(void 0),b=Object(Ct.a)(h,2),p=b[0],v=b[1],j=Object(i.useState)({sortBy:B.b.sortBy,orderBy:B.b.orderBy,search:""}),m=Object(Ct.a)(j,2),O=m[0],g=m[1],y=Object(U.a)(),x=Object(rn.a)(dt,{variables:{offset:0,limit:8,sort:O.sortBy,order:O.orderBy,search:O.search},fetchPolicy:"network-only"});Object(i.useEffect)((function(){o(x.loading)}),[x.loading]),Object(i.useEffect)((function(){v(x.error)}),[x.error]);var k=function(){var e=Object(S.a)(C.a.mark((function e(){var t,n,r,a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),a=null!==(t=null===(n=x.data)||void 0===n?void 0:n.punks.length)&&void 0!==t?t:0,o(!0),e.prev=3,e.next=6,x.fetchMore({variables:{offset:a,limit:8}});case 6:c=e.sent,Ea.info("fetchMoreDataAsync1 took ".concat((new Date).getTime()-r,"ms"))(),f(c.data.punks.length>=8),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),v(e.t0);case 14:o(!1),Ea.info("fetchMoreDataAsync2 took ".concat((new Date).getTime()-r,"ms"))();case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),w=x.refetch;return Object(i.useEffect)((function(){w({offset:0,limit:8,sort:O.sortBy,order:O.orderBy,search:O.search})}),[O,w]),Object(i.useEffect)((function(){var e=function(e,t){f(!0),g({sortBy:t.sortBy,orderBy:t.orderBy,search:t.search})};return y.on(te.b.PunkFilterValuesChanged,e),function(){Ea.info("emitter.off",te.b.PunkFilterValuesChanged)(),y.off(te.b.PunkFilterValuesChanged,e)}}),[y]),Object(It.jsxs)(It.Fragment,{children:[Object(It.jsx)(Sa,{}),s||x.data&&x.data.punks.length>0?Object(It.jsxs)(It.Fragment,{children:[Object(It.jsx)(sn.a,{dataLength:null!==(t=null===(n=x.data)||void 0===n?void 0:n.punks.length)&&void 0!==t?t:0,next:k,hasMore:d,loader:Object(It.jsx)(Ia,{loading:s,error:p,query:x}),scrollThreshold:"200px",scrollableTarget:"mainscroll",children:Object(It.jsx)(an.a,{container:!0,spacing:3,justifyContent:"center",alignItems:"center",marginBottom:3,children:null===(r=x.data)||void 0===r?void 0:r.punks.map((function(e){return Object(It.jsx)(an.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(It.jsx)(Mn,{item:e})},e.id)}))})}),d&&!s&&Object(It.jsx)(cn.a,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:Object(It.jsx)(dn,{variant:"outlined",callbackFn:k,sx:{minWidth:"200px"},children:"Load more"})})]}):Object(It.jsx)(Ia,{loading:s,error:p,query:x})]})},Pa=["children","value","index"];function Na(e){var t=e.children,n=e.value,r=e.index,a=Object(Dt.a)(e,Pa);return Object(It.jsx)("div",Object(p.a)(Object(p.a)({role:"tabpanel",hidden:n!==r,id:"marketplace-tabpanel-".concat(r),"aria-labelledby":"marketplace-tab-".concat(r)},a),{},{children:n===r&&Object(It.jsx)(cn.a,{sx:{p:2},children:t})}))}var Ta=function(e){var t=Object(tn.f)(),n=Object(tn.g)().tab===te.d.Activity?1:0,r=s.a.useState(n),a=Object(Ct.a)(r,2),c=a[0],i=a[1];n!==c&&i(n);return Object(It.jsxs)(It.Fragment,{children:[Object(It.jsx)(Bt.a,{variant:"h2",component:"div",textAlign:"center",sx:{pt:3},gutterBottom:!0,children:"Marketplace"}),Object(It.jsx)(cn.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(It.jsxs)(Jr.a,{value:c,onChange:function(e,n){if(i(n),1===n)t("/marketplace/activity");else t("/marketplace")},children:[Object(It.jsx)(Zr.a,{icon:Object(It.jsx)(Gr.a,{}),label:"Items",value:0}),Object(It.jsx)(Zr.a,{icon:Object(It.jsx)(Yr.a,{}),label:"Activity",value:1})]})}),Object(It.jsxs)(Wt.a,{sx:{pb:6},maxWidth:"xl",children:[Object(It.jsx)(Na,{value:c,index:0,children:Object(It.jsx)(Ma,{})}),Object(It.jsx)(Na,{value:c,index:1,children:Object(It.jsx)(cn.a,{marginTop:5,children:Object(It.jsx)(ma,{})})})]})]})},Fa=function(e){return Object(It.jsx)(It.Fragment,{children:"MarketplaceItem"})},Ra=n(413),La=Object(h.a)(vn.a)((function(e){e.theme;return"\n  width: 100%;\n  height: 100vw; \n  background-color: rgba(255, 255, 255, 0.5);\n"})),Da=Object(h.a)("div")((function(e){e.theme;return"\n  position: relative;\n  width: 100%;\n  height: 100%;\n"})),Wa=Object(h.a)("div")((function(e){e.theme;return"\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  background-image: url('".concat(B.a.ITEM_BG_URL,"');\n")})),Ua=Object(h.a)("img")((function(e){e.theme;return"\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: contain;\n  image-rendering: pixelated;\n"})),qa=function(e){var t;return Object(It.jsx)(La,{sx:{maxHeight:null!==(t=e.maxHeight)&&void 0!==t?t:"400px"},children:Object(It.jsx)(Da,{children:Object(It.jsx)(Wa,{children:Object(It.jsx)(Ua,{sx:{backgroundImage:"url('".concat(On.getPunkUrl(e.image),"')")}})})})})},Ha=Object(F.a)(),Va=function(){var e=Object(i.useState)(!1),t=Object(Ct.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(-1),c=Object(Ct.a)(a,2),s=c[0],o=c[1],u=Object(i.useState)(""),l=Object(Ct.a)(u,2),d=l[0],f=l[1],h=Object(U.a)(),b=Wn(),p=Zt();Object(i.useEffect)((function(){var e=function(){var e=Object(S.a)(C.a.mark((function e(t){var n,a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.eventType!==te.f.Mint||(null===(n=t.toAddress)||void 0===n?void 0:n.toLowerCase())!==(null===(a=p.account)||void 0===a?void 0:a.toLowerCase())){e.next=8;break}return Ha.info("Show mint dialog")(),e.next=4,b.getById(t.punkId.toString());case 4:c=e.sent,o(t.punkId),f(c.data.punk.image),r(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return h.on(te.b.PunkChanged,e),function(){h.off(te.b.PunkChanged,e)}}),[h,b,p.account,r]),Object(i.useEffect)((function(){n&&function(){for(var e=1;e<4;e++)setTimeout((function(){Object(Fn.a)({particleCount:200,spread:100,zIndex:9999})}),225*e)}()}),[n]);var v=function(){f(""),r(!1)};return s<0?Object(It.jsx)(It.Fragment,{}):Object(It.jsxs)(Mr.a,{open:n,transitionDuration:500,keepMounted:!0,onClose:v,style:{zIndex:9999},children:[Object(It.jsx)(Pr.a,{children:"\ud83c\udf89 Mint success!"}),Object(It.jsxs)(Nr.a,{children:[Object(It.jsxs)(Tr.a,{paddingBottom:1,children:["You have successfully minted ",Object(It.jsxs)(Yn.a,{underline:"hover",component:en.b,to:"/punk/".concat(s),onClick:v,children:[B.a.PUNK_NAME," #",s]})]}),Object(It.jsx)(qa,{image:d,maxHeight:"300px"})]}),Object(It.jsxs)(Ra.a,{children:[Object(It.jsx)(Tn.a,{onClick:v,children:"Close"}),Object(It.jsx)(Tn.a,{component:en.b,to:"/account/".concat(p.account),variant:"contained",onClick:v,children:"My punks"})]})]})},Qa=Object(F.a)(),$a=function(e){var t=Object(i.useState)(!1),n=Object(Ct.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(!0),s=Object(Ct.a)(c,2),o=s[0],u=s[1],l=Object(i.useState)(void 0),d=Object(Ct.a)(l,2),f=d[0],h=d[1],b=Object(i.useState)([]),p=Object(Ct.a)(b,2),v=p[0],j=p[1],m=Object(i.useState)([]),O=Object(Ct.a)(m,2),g=O[0],y=O[1],x=Wn(),k=Object(U.a)(),w=Object(rn.a)(ot,{variables:{id:e.item.id,offset:0,limit:8},fetchPolicy:"network-only",onCompleted:function(e){j(e.punkEvents.events.map((function(e){return ce.toPunkEvent(e)})))}});Object(i.useEffect)((function(){a(w.loading)}),[w.loading]),Object(i.useEffect)((function(){h(w.error)}),[w.error]);var A=function(){var t=Object(S.a)(C.a.mark((function t(){var n,r,c;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Qa.info("fetchMoreDataAsync",v.length)(),r=null===(n=w.data)||void 0===n?void 0:n.punkEvents.blockHeight.toString(),a(!0),t.prev=3,t.next=6,x.getEventsAsync(e.item.id,v.length,8,r);case 6:c=t.sent,u(c.data.punkEvents.events.length>=8),c.data.punkEvents.events.length>0&&j([].concat(Object(I.a)(v),Object(I.a)(c.data.punkEvents.events.map((function(e){return ce.toPunkEvent(e)}))))),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),h(t.t0);case 14:a(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}(),_=w.refetch,E=Object(i.useCallback)((function(){Qa.info("Refreshing punk activity")(),_(),y([])}),[_]);Object(i.useEffect)((function(){var e=function(e){e===te.a.Active&&E()};return k.on(te.b.DocumentVisibilityChanged,e),function(){k.off(te.b.DocumentVisibilityChanged,e)}}),[k,E]);var B=Object(i.useCallback)((function(e){y([ce.toPunkEvent(e)].concat(Object(I.a)(g)))}),[g]);return Object(i.useEffect)((function(){var t=function(t){Qa.info("newPunkEvent",t)(),t.punkId===parseInt(e.item.id)&&B(t)};return Qa.info("emitter.on",te.b.PunkChanged)(),k.on(te.b.PunkChanged,t),function(){Qa.info("emitter.off",te.b.PunkChanged)(),k.off(te.b.PunkChanged,t)}}),[k,e.item.id,B]),Object(It.jsx)(va,{events:v,newEvents:g,error:f,loading:r,hasMore:o,fetchMoreDataAsync:A})},za=n(353),Ga=n(414),Ka=function(e){var t=Object(i.useState)(""),n=Object(Ct.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(!1),s=Object(Ct.a)(c,2),o=s[0],u=s[1],l=ta(),d=function(e){a(e),u(T.a.isNullOrWhitespace(e)||new k.BigNumber(e).lte(0))},f=e.updateFee;Object(i.useEffect)((function(){e.state.open&&(d(""),f("cache-first"))}),[e.state,f]);var h=function(){e.setState(Object(p.a)(Object(p.a)({},e.state),{},{open:!1}))},b=function(){var t=Object(S.a)(C.a.mark((function t(){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=new k.BigNumber(r).shiftedBy(B.a.CURRENCY_DECIMALS),t.next=4,l.bidAsync(e.item.id,n.toFixed());case 4:t.sent?(nn.enqueueMessage("Bid success"),h()):(nn.enqueueError("Error"),f()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),nn.enqueueError(t.t0);case 11:return t.prev=11,t.next=14,e.refetchAsync();case 14:return t.finish(11);case 15:case"end":return t.stop()}}),t,null,[[0,8,11,15]])})));return function(){return t.apply(this,arguments)}}();return Object(It.jsxs)(Mr.a,{onClose:h,open:e.state.open,maxWidth:"xs",fullWidth:!0,children:[Object(It.jsx)(Pr.a,{children:"Bid"}),Object(It.jsxs)(Nr.a,{children:[Object(It.jsxs)(Tr.a,{children:["Place a bid for ",B.a.PUNK_NAME," #",e.item.id]}),Object(It.jsxs)(Fr.a,{fullWidth:!0,sx:{mt:2},variant:"standard",children:[Object(It.jsx)(Rr.a,{htmlFor:"amount",children:"Amount"}),Object(It.jsx)(Lr.a,{id:"amount",value:r,onChange:function(e){d(e.target.value)},type:"number",autoFocus:!0,startAdornment:Object(It.jsxs)(Ga.a,{position:"start",children:["$",B.a.CURRENCY_NAME]})})]}),e.fee.gt(0)&&Object(It.jsxs)(Tr.a,{align:"right",children:["+ ",mn.formatVite(e.fee)," ",B.a.CURRENCY_NAME," protocol fee"]})]}),Object(It.jsxs)(Ra.a,{children:[Object(It.jsx)(Tn.a,{onClick:h,children:"Cancel"}),Object(It.jsx)(dn,{size:"medium",color:"primary",callbackFn:b,disabled:o,children:"Confirm"})]})]})},Ya=function(e){var t=Object(i.useState)(""),n=Object(Ct.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(""),s=Object(Ct.a)(c,2),o=s[0],u=s[1],l=Object(i.useState)(!1),d=Object(Ct.a)(l,2),f=d[0],h=d[1],b=ta(),v=function(e){a(e),h(T.a.isNullOrWhitespace(e)||new k.BigNumber(e).lt(0))},j=e.updateFee;Object(i.useEffect)((function(){e.state.open&&(v(""),u(""),j("cache-first"))}),[e.state,j]);var m=function(){e.setState(Object(p.a)(Object(p.a)({},e.state),{},{open:!1}))},O=function(){var t=Object(S.a)(C.a.mark((function t(){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=new k.BigNumber(r).shiftedBy(B.a.CURRENCY_DECIMALS),t.next=4,b.offerAsync(e.item.id,n.toFixed(),T.a.isNullOrWhitespace(o)?void 0:o);case 4:t.sent?(nn.enqueueMessage("Listed for sale"),m()):(nn.enqueueError("Error"),j()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),nn.enqueueError(t.t0);case 11:return t.prev=11,t.next=14,e.refetchAsync();case 14:return t.finish(11);case 15:case"end":return t.stop()}}),t,null,[[0,8,11,15]])})));return function(){return t.apply(this,arguments)}}();return Object(It.jsxs)(Mr.a,{onClose:m,open:e.state.open,maxWidth:"xs",fullWidth:!0,children:[Object(It.jsx)(Pr.a,{children:"Sell"}),Object(It.jsxs)(Nr.a,{children:[Object(It.jsxs)(Tr.a,{children:["List ",B.a.PUNK_NAME," #",e.item.id," for sale"]}),Object(It.jsxs)(Fr.a,{fullWidth:!0,sx:{mt:2},variant:"standard",children:[Object(It.jsx)(Rr.a,{htmlFor:"amount",children:"Amount"}),Object(It.jsx)(Lr.a,{id:"amount",value:r,onChange:function(e){v(e.target.value)},type:"number",autoFocus:!0,startAdornment:Object(It.jsxs)(Ga.a,{position:"start",children:["$",B.a.CURRENCY_NAME]})})]}),e.fee.gt(0)?Object(It.jsxs)(Tr.a,{align:"right",children:["+ ",mn.formatVite(e.fee)," ",B.a.CURRENCY_NAME," protocol fee"]}):Object(It.jsx)(cn.a,{marginTop:2}),Object(It.jsxs)(Fr.a,{fullWidth:!0,variant:"standard",children:[Object(It.jsx)(Rr.a,{htmlFor:"address",children:"Address (optional)"}),Object(It.jsx)(Lr.a,{id:"address",value:o,onChange:function(e){u(e.target.value)},placeholder:"Only this address will be eligible to buy",type:"text"})]})]}),Object(It.jsxs)(Ra.a,{children:[Object(It.jsx)(Tn.a,{onClick:m,children:"Cancel"}),Object(It.jsx)(dn,{size:"medium",color:"primary",callbackFn:O,disabled:f,children:"Confirm"})]})]})},Ja=Object(F.a)(),Za=function(e){var t=s.a.useRef(!1),n=Object(i.useState)(ce.defaultBigNumber),r=Object(Ct.a)(n,2),a=r[0],c=r[1],o=ta(),u=Object(U.a)();s.a.useEffect((function(){return t.current=!0,function(){t.current=!1}}),[]);var l=Object(i.useCallback)(Object(S.a)(C.a.mark((function e(){var n,r,a,i=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>0&&void 0!==i[0]?i[0]:"network-only",!t.current){e.next=13;break}return c(ce.defaultBigNumber),e.prev=3,e.next=6,o.getMarketInfoAsync(n);case 6:r=e.sent,t.current&&(a=r.data.marketInfo)&&a.actionPrice.gt(0)&&c(a.actionPrice),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),Ja.error(e.t0)();case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),[o]);switch(Object(i.useEffect)((function(){var e=function(e){Ja.info("eventType: ".concat(e.eventType," amount: ").concat(e.value.toFixed()," timestamp: ").concat(e.timestamp.toFixed()))(),l()};return Ja.info("emitter.on",te.b.MarketChanged)(),u.on(te.b.MarketChanged,e),function(){Ja.info("emitter.off",te.b.MarketChanged)(),u.off(te.b.MarketChanged,e)}}),[u,l]),e.state.type){case te.e.BID:return Object(It.jsx)(Ka,{item:e.item,state:e.state,fee:a,updateFee:l,setState:e.setState,refetchAsync:e.refetchAsync});case te.e.OFFER:return Object(It.jsx)(Ya,{item:e.item,state:e.state,fee:a,updateFee:l,setState:e.setState,refetchAsync:e.refetchAsync});default:return Object(It.jsx)(It.Fragment,{})}},Xa=Object(F.a)(),ec=function(e){var t=s.a.useRef(!1),n=Object(i.useState)(!1),r=Object(Ct.a)(n,2),a=r[0],c=r[1],o=Object(i.useState)(!1),u=Object(Ct.a)(o,1)[0],l=Object(i.useState)({showAny:!1,showBuy:!1,showClaim:!1,showBid:!1,showSell:!1,showAcceptBid:!1,showCancelBid:!1,showCancelSale:!1,showCancelGift:!1}),d=Object(Ct.a)(l,2),f=d[0],h=d[1],b=Object(i.useState)({type:te.e.BID,open:!1}),v=Object(Ct.a)(b,2),j=v[0],m=v[1],O=Zt(),g=ta();s.a.useEffect((function(){return t.current=!0,function(){t.current=!1}}),[]),Object(i.useEffect)((function(){if(t.current){var n,r,a,i,s,o,u,l,d=(null===(n=e.item.owner)||void 0===n?void 0:n.toLowerCase())===(null===(r=O.account)||void 0===r?void 0:r.toLowerCase()),f={showAny:!1,showBuy:!1,showClaim:!1,showBid:!1,showSell:!1,showAcceptBid:!1,showCancelBid:!1,showCancelSale:!1,showCancelGift:!1};e.item.owner&&!T.a.isNullOrWhitespace(e.item.owner)?c(!0):c(!1),e.marketStarted&&!T.a.isNullOrWhitespace(O.account)&&(f.showAny=!0),d||!e.item.offer||!T.a.isNullOrWhitespace(e.item.offer.onlySellTo)&&(null===(a=e.item.offer.onlySellTo)||void 0===a?void 0:a.toLowerCase())!==(null===(i=O.account)||void 0===i?void 0:i.toLowerCase())||(e.item.offer.minAmount.gt(0)?f.showBuy=!0:f.showClaim=!0),d||(null===(s=e.item.bid)||void 0===s?void 0:s.bidder.toLowerCase())===(null===(o=O.account)||void 0===o?void 0:o.toLowerCase())||(f.showBid=!0),d&&!e.item.offer&&(f.showSell=!0),d&&e.item.bid&&(f.showAcceptBid=!0),d||(null===(u=e.item.bid)||void 0===u?void 0:u.bidder.toLowerCase())!==(null===(l=O.account)||void 0===l?void 0:l.toLowerCase())||(f.showCancelBid=!0),d&&e.item.offer&&(e.item.offer.minAmount.gt(0)?f.showCancelSale=!0:f.showCancelGift=!0),h(f)}}),[e.marketStarted,e.item,O.account]);var y=function(){var e=Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nn.enqueueMessage("Transaction failed"),e.prev=1,e.next=4,g.getMarketInfoAsync();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Xa.error(e.t0)();case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var t=Object(S.a)(C.a.mark((function t(){var n,r,a=arguments;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>0&&void 0!==a[0]&&a[0],t.prev=1,e.item.offer){t.next=4;break}throw new Error("".concat(B.a.PUNK_NAME," #").concat(e.item.id," is not for sale"));case 4:return t.next=6,g.buyAsync(e.item.id,e.item.offer.minAmount.toFixed());case 6:if(!t.sent){t.next=12;break}r=n?"claimed":"bought",nn.enqueueMessage("Congratulations! You ".concat(r," ").concat(B.a.PUNK_NAME," #").concat(e.item.id)),t.next=14;break;case 12:return t.next=14,y();case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),nn.enqueueError(t.t0);case 19:return t.prev=19,t.next=22,e.refetchAsync();case 22:return t.finish(19);case 23:case"end":return t.stop()}}),t,null,[[1,16,19,23]])})));return function(){return t.apply(this,arguments)}}(),k=function(){var t=Object(S.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.item.bid){t.next=3;break}throw new Error("".concat(B.a.PUNK_NAME," #").concat(e.item.id," has no bid"));case 3:return t.next=5,g.acceptBidAsync(e.item.id,e.item.bid.amount.toFixed());case 5:if(!t.sent){t.next=10;break}nn.enqueueMessage("Congratulations! You sold ".concat(B.a.PUNK_NAME," #").concat(e.item.id)),t.next=12;break;case 10:return t.next=12,y();case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),nn.enqueueError(t.t0);case 17:return t.prev=17,t.next=20,e.refetchAsync();case 20:return t.finish(17);case 21:case"end":return t.stop()}}),t,null,[[0,14,17,21]])})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=Object(S.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.cancelBidAsync(e.item.id);case 3:if(!t.sent){t.next=8;break}nn.enqueueMessage("Bid cancelled"),t.next=10;break;case 8:return t.next=10,y();case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),nn.enqueueError(t.t0);case 15:return t.prev=15,t.next=18,e.refetchAsync();case 18:return t.finish(15);case 19:case"end":return t.stop()}}),t,null,[[0,12,15,19]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var t=Object(S.a)(C.a.mark((function t(){var n,r,a=arguments;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>0&&void 0!==a[0]&&a[0],t.prev=1,t.next=4,g.cancelOfferAsync(e.item.id);case 4:if(!t.sent){t.next=10;break}r=n?"Gift":"Sale",nn.enqueueMessage("".concat(r," cancelled")),t.next=12;break;case 10:return t.next=12,y();case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),nn.enqueueError(t.t0);case 17:return t.prev=17,t.next=20,e.refetchAsync();case 20:return t.finish(17);case 21:case"end":return t.stop()}}),t,null,[[1,14,17,21]])})));return function(){return t.apply(this,arguments)}}(),_=function(e){t.current&&m(Object(p.a)(Object(p.a)({},j),{},{type:e,open:!0}))};return a&&f.showAny?Object(It.jsxs)(It.Fragment,{children:[Object(It.jsxs)(Jn.a,{spacing:1,direction:"row",children:[(u||f.showBuy)&&Object(It.jsx)(dn,{variant:"contained",color:"primary",startIcon:Object(It.jsx)(yn,{icon:la.getBuyEventTypeIcon()}),callbackFn:x,children:"Buy"}),(u||f.showClaim)&&Object(It.jsx)(dn,{variant:"contained",color:"primary",startIcon:Object(It.jsx)(yn,{icon:la.getClaimEventTypeIcon()}),callbackFn:Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(!0);case 2:case"end":return e.stop()}}),e)}))),children:"Claim"}),(u||f.showBid)&&Object(It.jsx)(Tn.a,{variant:"contained",color:"primary",startIcon:Object(It.jsx)(yn,{icon:la.getPunkEventTypeIcon(te.f.NewBid)}),onClick:function(){_(te.e.BID)},children:"Bid"}),(u||f.showSell)&&Object(It.jsx)(Tn.a,{variant:"contained",color:"primary",startIcon:Object(It.jsx)(yn,{icon:la.getOfferEventTypeIcon()}),onClick:function(){_(te.e.OFFER)},children:"Sell"}),(u||f.showAcceptBid)&&Object(It.jsx)(dn,{variant:"contained",color:"primary",startIcon:Object(It.jsx)(yn,{icon:hn.b}),callbackFn:k,children:"Accept bid"})]}),(u||f.showCancelBid||f.showCancelSale||f.showCancelGift)&&Object(It.jsxs)(Jn.a,{spacing:1,direction:"row",marginTop:1,children:[(u||f.showCancelBid)&&Object(It.jsx)(dn,{variant:"contained",color:"error",startIcon:Object(It.jsx)(yn,{icon:la.getPunkEventTypeIcon(te.f.CancelBid)}),callbackFn:w,children:"Cancel bid"}),(u||f.showCancelSale)&&Object(It.jsx)(dn,{variant:"contained",color:"error",startIcon:Object(It.jsx)(yn,{icon:la.getCancelSaleEventTypeIcon()}),callbackFn:A,children:"Cancel sale"}),(u||f.showCancelGift)&&Object(It.jsx)(dn,{variant:"contained",color:"error",startIcon:Object(It.jsx)(yn,{icon:la.getCancelSaleEventTypeIcon()}),callbackFn:Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(!0);case 1:case"end":return e.stop()}}),e)}))),children:"Cancel gift"})]}),Object(It.jsx)(Za,{item:e.item,state:j,setState:m,refetchAsync:e.refetchAsync})]}):Object(It.jsx)(It.Fragment,{})},tc=Object(F.a)(),nc=Object(h.a)(vn.a)((function(e){e.theme;return"\n  position: relative;\n  overflow: auto;\n  width: 100%;\n  height: 80vw;\n  min-height: 320px;\n  max-height: 400px;\n  background-color: rgba(255, 255, 255, 0.5);\n"})),rc=Object(h.a)(cn.a)((function(e){e.theme;return"\n  position: absolute;\n  bottom: 24px;\n  left: 24px;\n  width: calc(100% - 48px);\n"})),ac=function(e){var t,n,r=s.a.useRef(!1),a=Object(Ir.a)(),c=Object(fr.a)(a.breakpoints.down("sm")),o=Object(i.useState)(!1),u=Object(Ct.a)(o,2),l=u[0],d=u[1],f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"network-only",n=s.a.useMemo((function(){return{__typename:te.g.Punk,id:e.id,rank:e.rank,image:e.image,attributes:e.attributes}}),[e]),r=s.a.useState(n),a=Object(Ct.a)(r,2),c=a[0],i=a[1],o=s.a.useState(new Date(0)),u=Object(Ct.a)(o,2),l=u[0],d=u[1],f=Object(rn.a)(ut,{variables:{id:e.id.toString()},notifyOnNetworkStatusChange:!0,fetchPolicy:t,refetchWritePolicy:"overwrite",onCompleted:function(e){i(Object(p.a)(Object(p.a)({},c),{},{owner:e.punkOwner}))}}),h=Object(rn.a)(mt,{variables:{id:e.id.toString()},notifyOnNetworkStatusChange:!0,fetchPolicy:t,refetchWritePolicy:"overwrite",onCompleted:function(e){i(Object(p.a)(Object(p.a)({},c),{},{bid:e.marketBid}))}}),b=Object(rn.a)(Ot,{variables:{id:e.id.toString()},notifyOnNetworkStatusChange:!0,fetchPolicy:t,refetchWritePolicy:"overwrite",onCompleted:function(e){i(Object(p.a)(Object(p.a)({},c),{},{offer:e.marketOffer}))}}),v=f.error||h.error||b.error,j=f.loading||h.loading||b.loading,m=function(){var t=Object(S.a)(C.a.mark((function t(){var r,a,c;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(hr.info("refetchAsync",(new Date).getTime(),l.getTime())(),!((new Date).getTime()>=l.getTime()+500)){t.next=13;break}return d(new Date),t.prev=3,t.next=6,Promise.all([f.refetch().then((function(e){return r=e.data.punkOwner})),h.refetch().then((function(e){return a=e.data.marketBid})),b.refetch().then((function(e){return c=e.data.marketOffer}))]);case 6:hr.info("Refetching punk ".concat(e.id),r,a,c)(),i(Object(p.a)(Object(p.a)({},n),{},{owner:r,bid:a,offer:c})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),hr.error(t.t0)();case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(){return t.apply(this,arguments)}}();return{punkExtended:c,error:v,loading:j,refetchAsync:m}}(e.item),h=f.punkExtended,b=f.loading,v=f.error,j=f.refetchAsync,m=Object(rn.a)(jt,{fetchPolicy:"network-only"}),O=Zt(),g=Object(U.a)(),y=m.refetch;Object(i.useEffect)((function(){return r.current=!0,function(){r.current=!1}}),[]),Object(i.useEffect)((function(){v&&tc.error(v)()}),[v]),Object(i.useEffect)((function(){if(r.current){var e,t=null===(e=m.data)||void 0===e?void 0:e.marketInfo;t&&r.current&&d(t.marketStarted)}}),[m.data]),Object(i.useEffect)((function(){var e=function(e){r.current&&e===te.a.Active&&j()};return g.on(te.b.DocumentVisibilityChanged,e),function(){g.off(te.b.DocumentVisibilityChanged,e)}}),[g,j]),Object(i.useEffect)((function(){var e=function(){r.current&&y()};return g.on(te.b.MarketChanged,e),function(){g.off(te.b.MarketChanged,e)}}),[g,y]),Object(i.useEffect)((function(){var t=function(t){r.current&&t.punkId===parseInt(e.item.id)&&j()};return g.on(te.b.PunkChanged,t),function(){g.off(te.b.PunkChanged,t)}}),[g,e.item.id,j]);var x=function(e){return mn.formatViteTooltip(e)},k=function(e){return e.gt(0)?mn.formatVite(e):"0"};return Object(It.jsx)(nc,{children:Object(It.jsxs)(cn.a,{sx:{p:3},children:[Object(It.jsxs)(Jn.a,{direction:"row",justifyContent:"space-between",children:[Object(It.jsxs)(Bt.a,{variant:"h5",fontSize:c?"1.25rem":"1.5rem",color:"primary",paragraph:!0,children:[B.a.PUNK_NAME," #",e.item.id]}),Object(It.jsx)(cn.a,{children:Object(It.jsx)(Sn,{title:Object(It.jsx)("span",{children:"Rarity rank"}),placement:"bottom",arrow:!0,children:Object(It.jsx)(pn.a,{size:"small",icon:Object(It.jsx)(yn,{icon:fn.a,sx:{fontSize:"small",ml:1}}),sx:{fontSize:"0.7rem"},label:e.item.rank})})})]}),e.item.attributes.length>0&&Object(It.jsx)(Jn.a,{spacing:1,direction:"row",sx:{mb:2},children:null===(t=e.item.attributes)||void 0===t?void 0:t.map((function(e){return Object(It.jsx)(pn.a,{label:e,variant:"outlined",size:c?"small":"medium"},e)}))}),v?Object(It.jsx)(un,{message:fe.formatMessage(v),type:"warning"}):Object(It.jsxs)(It.Fragment,{children:[Object(It.jsxs)(Jn.a,{spacing:1,direction:"row",sx:{mb:2},children:[Object(It.jsxs)(Bt.a,{display:"inline",children:[Object(It.jsx)("b",{children:"Owner"}),":"]}),b?Object(It.jsx)(ur.a,{animation:"wave",height:24,width:"40%",sx:{display:"inline"}}):Object(It.jsx)(Bt.a,{display:"inline",component:"div",children:h.owner?Object(It.jsxs)(It.Fragment,{children:[Object(It.jsx)(da,{type:jr.Address,value:h.owner,children:Object(It.jsx)(Sn,{title:h.owner,children:Object(It.jsx)("span",{children:T.a.truncateStringInTheMiddle(h.owner,20,5)})})}),O.account&&h.owner.toLowerCase()===O.account.toLowerCase()&&Object(It.jsx)(pn.a,{size:"small",icon:Object(It.jsx)(za.a,{}),label:"You own this punk",variant:"filled",sx:{borderRadius:1,ml:1},color:"secondary"})]}):Object(It.jsx)(It.Fragment,{children:"Not minted yet."})})]}),Object(It.jsxs)(Jn.a,{spacing:1,direction:"row",sx:{mb:2},children:[Object(It.jsxs)(Bt.a,{display:"inline",children:[Object(It.jsx)("b",{children:"Current bid"}),":"]}),b?Object(It.jsx)(ur.a,{animation:"wave",height:24,width:"60%",sx:{display:"inline"}}):Object(It.jsx)(Bt.a,{display:"inline",children:h.bid?Object(It.jsxs)(It.Fragment,{children:[Object(It.jsx)(En,{title:x(h.bid.amount),children:Object(It.jsxs)("span",{children:[k(h.bid.amount)," ",B.a.CURRENCY_NAME]})}),"\xa0by ",Object(It.jsx)(da,{type:jr.Address,value:h.bid.bidder,children:Object(It.jsx)(Sn,{title:h.bid.bidder,children:Object(It.jsx)("span",{children:T.a.truncateStringInTheMiddle(h.bid.bidder,10,5)})})})]}):Object(It.jsx)(It.Fragment,{children:"-"})})]}),Object(It.jsx)(Jn.a,{spacing:1,direction:"row",sx:{mb:2},children:b||h.offer?Object(It.jsxs)(It.Fragment,{children:[Object(It.jsx)(Bt.a,{display:"inline",children:(null===(n=h.offer)||void 0===n?void 0:n.minAmount.lte(0))?Object(It.jsxs)(It.Fragment,{children:[Object(It.jsx)("b",{children:"Gift"}),":"]}):Object(It.jsxs)(It.Fragment,{children:[Object(It.jsx)("b",{children:"Buy price"}),":"]})}),b?Object(It.jsx)(ur.a,{animation:"wave",height:24,width:"30%",sx:{display:"inline"}}):Object(It.jsx)(Bt.a,{display:"inline",children:h.offer?Object(It.jsxs)(It.Fragment,{children:[Object(It.jsx)(En,{title:x(h.offer.minAmount),children:Object(It.jsxs)("span",{children:[k(h.offer.minAmount)," ",B.a.CURRENCY_NAME]})}),h.offer.onlySellTo&&!T.a.isNullOrWhitespace(h.offer.onlySellTo)&&Object(It.jsxs)(It.Fragment,{children:["\xa0(",Object(It.jsx)(da,{type:jr.Address,value:h.offer.onlySellTo,children:Object(It.jsx)(Sn,{title:h.offer.onlySellTo,children:Object(It.jsx)("span",{children:T.a.truncateStringInTheMiddle(h.offer.onlySellTo,10,5)})})}),")"]})]}):Object(It.jsx)(It.Fragment,{})})]}):Object(It.jsx)(pn.a,{label:"Not for sale",variant:"filled",sx:{borderRadius:1}})})]}),Object(It.jsx)(rc,{children:Object(It.jsx)(ec,{marketStarted:l,item:h,refetchAsync:j})})]})})},cc=function(e){var t=Object(tn.g)().id,n=Object(rn.a)(lt,{variables:{id:null!==t&&void 0!==t?t:"-1"},fetchPolicy:"network-only"}),r=n.error,a=n.loading;return r?Object(It.jsx)(un,{message:fe.formatMessage(r),type:"warning"}):Object(It.jsx)(It.Fragment,{children:a||!n.data?Object(It.jsx)(un,{message:"Loading...",type:"default"}):Object(It.jsx)(Wt.a,{maxWidth:"lg",children:Object(It.jsxs)(an.a,{container:!0,spacing:3,direction:"row",marginBottom:3,children:[Object(It.jsx)(an.a,{item:!0,xs:12,md:5,children:Object(It.jsx)(qa,{image:n.data.punk.image})}),Object(It.jsx)(an.a,{item:!0,xs:12,md:7,children:Object(It.jsx)(ac,{item:n.data.punk})}),Object(It.jsx)(an.a,{item:!0,xs:12,children:Object(It.jsx)($a,{item:n.data.punk})})]})})})},ic=n(335),sc=s.a.forwardRef((function(e,t){return Object(It.jsx)(ic.a,Object(p.a)({direction:"up",ref:t},e))})),oc=function(){var e=Object(i.useState)(!1),t=Object(Ct.a)(e,2),n=t[0],r=t[1],a=Object(U.a)();Object(i.useEffect)((function(){var e=function(e){r(e)};return a.on(te.b.ConfirmTransactionDialog,e),function(){a.off(te.b.ConfirmTransactionDialog,e)}}),[a,r]);var c=function(){r(!1)};return Object(It.jsxs)(Mr.a,{open:n,TransitionComponent:sc,keepMounted:!0,onClose:c,style:{zIndex:9999},children:[Object(It.jsx)(Pr.a,{children:"ViteConnect"}),Object(It.jsx)(Nr.a,{children:Object(It.jsx)(Tr.a,{children:"Please confirm transaction on VITE Wallet App"})}),Object(It.jsx)(Ra.a,{children:Object(It.jsx)(Tn.a,{onClick:c,color:"primary",children:"Close"})})]})},uc=n(217),lc=n.n(uc),dc=n(367),fc=n(354),hc=new function e(){var t=this;Object(v.a)(this,e),this._apollo=void 0,this.getContractQuota=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"network-only";return t._apollo.query({query:xt,variables:{address:E.a.CONTRACT_ADDRESS},fetchPolicy:e})},this._apollo=_t()},bc=Object(F.a)(),pc=Object(fc.a)(Wt.a)((function(e){e.theme;return"\n  position: absolute;\n  top: 64px;\n  right: 0;\n  width: 100%;\n  z-index: 9999;\n"})),vc=Object(fc.a)(dc.a)((function(e){e.theme;return"\n  float: right;\n  background-color: rgba(255, 255, 255);\n"})),jc=function(e){var t=s.a.useRef(!1),n=Object(i.useState)({currentQuota:new w.a("0"),maxQuota:new w.a("0"),stakeAmount:new w.a("0")}),r=Object(Ct.a)(n,2),a=r[0],c=r[1],o=Object(i.useState)(!1),u=Object(Ct.a)(o,2),l=u[0],d=u[1],f=hc,h=Object(U.a)();s.a.useEffect((function(){return t.current=!0,function(){t.current=!1}}),[]),Object(i.useEffect)((function(){var e;return l&&(e=setInterval(Object(S.a)(C.a.mark((function n(){var r,a;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.getContractQuota();case 2:r=n.sent,bc.info(r.data.quota)(),t.current&&r.data.quota&&((a=r.data.quota).currentQuota.gte(a.maxQuota)&&(clearInterval(e),d(!1)),c({currentQuota:a.currentQuota,maxQuota:a.maxQuota,stakeAmount:a.stakeAmount}));case 5:case"end":return n.stop()}}),n)}))),2e3)),function(){bc.info("clearInterval(interval)")(),e&&clearInterval(e)}}),[f,l]),Object(i.useEffect)((function(){var e=function(e,n){t.current&&B.a.QUOTA_THRESHOLD.gte(n.currentQuota.minus(B.a.QUOTA_THRESHOLD))&&(c({currentQuota:n.currentQuota,maxQuota:n.maxQuota,stakeAmount:n.stakeAmount}),d(!0))};return h.on(te.b.QuotaChanged,e),function(){bc.info("emitter.off(GlobalEvent.QuotaChanged, handleEvent)")(),h.off(te.b.QuotaChanged,e)}}),[h]);var b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B.a.CURRENCY_DECIMALS;return mn.formatBigNumber(e,0,t)};return!l||a.maxQuota.eq(0)?Object(It.jsx)(It.Fragment,{}):Object(It.jsx)(pc,{maxWidth:"xl",children:Object(It.jsxs)(vc,{icon:!1,severity:"info",onClose:function(){d(!1)},sx:{mt:3,mr:2},children:[Object(It.jsx)(Bt.a,{marginBottom:1,paragraph:!0,children:Object(It.jsx)("b",{children:"Contract quota is recharging..."})}),Object(It.jsx)(En,{title:b(a.currentQuota),placement:"left",arrow:!0,children:Object(It.jsxs)(Bt.a,{marginBottom:1,paragraph:!0,children:[b(a.currentQuota,6)," / ",b(a.maxQuota,6)]})}),Object(It.jsxs)(Bt.a,{marginBottom:1,children:["You can help by staking ",B.a.CURRENCY_NAME]}),Object(It.jsxs)(Jn.a,{spacing:1,direction:"row",children:[Object(It.jsx)(Bt.a,{children:"What does this mean?"}),Object(It.jsx)(Tn.a,{variant:"outlined",size:"small",href:B.a.QUOTA_WIKI_URL,target:"_blank",endIcon:Object(It.jsx)(lc.a,{}),children:"More info"})]})]})})},mc=Object(F.a)(),Oc=function(e){var t,n=Object(i.useState)(te.a.Unknown),r=Object(Ct.a)(n,2),a=r[0],c=r[1],s=Object(U.a)(),o=ze(),u=null!==(t=E.a.BASENAME)&&void 0!==t?t:"";return nn.snackbar=Object(b.b)(),Object(i.useEffect)((function(){var e=function(){var e=Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.datasource.initAsync(o.network);case 3:s.emitVisibilityChanged(T.a.getDocumentState()),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return s.on(te.b.ReInit,e),function(){mc.info("emitter.off(GlobalEvent.ReInit, handleEvent)")(),s.off(te.b.ReInit,e)}}),[s,o.datasource,o.network]),Object(i.useEffect)((function(){var e=function(){var e=Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=T.a.getDocumentState(),a!==t&&(te.a.Active,mc.info("visibilitychange before ".concat(a," after ").concat(t))(),c(t),s.emitVisibilityChanged(t));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return document.addEventListener("visibilitychange",e),function(){mc.info("removeEventListener visibilitychange")(),document.removeEventListener("visibilitychange",e)}}),[s,a,o.datasource,o.network]),Object(It.jsx)(zt,{children:Object(It.jsxs)(en.a,{basename:u,children:[Object(It.jsx)($r,{}),Object(It.jsxs)(Vt,{children:[Object(It.jsx)(jc,{}),Object(It.jsxs)(tn.c,{children:[Object(It.jsx)(tn.a,{path:"/account/:address",element:Object(It.jsx)(Nn,{})}),Object(It.jsx)(tn.a,{path:"/marketplace",element:Object(It.jsx)(Ta,{})}),Object(It.jsx)(tn.a,{path:"/marketplace/:tab",element:Object(It.jsx)(Ta,{})}),Object(It.jsx)(tn.a,{path:"/marketplace/item/:id",element:Object(It.jsx)(Fa,{})}),Object(It.jsx)(tn.a,{path:"/punk/:id",element:Object(It.jsx)(cc,{})}),Object(It.jsx)(tn.a,{path:"/test-image",element:Object(It.jsx)($n,{})}),Object(It.jsx)(tn.a,{path:"/test-list",element:Object(It.jsx)(Gn,{})}),Object(It.jsx)(tn.a,{path:"/test",element:Object(It.jsx)(Rn,{})}),Object(It.jsx)(tn.a,{path:"/",element:Object(It.jsx)(wr,{})})]}),Object(It.jsx)(Va,{}),Object(It.jsx)(oc,{})]})]})})},gc=Object(h.a)("div")((function(e){e.theme;return"\n  width: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  background-image: url('".concat(B.a.BG_URL,"');\n")})),yc=function(){var e=s.a.useMemo((function(){return _t()}),[]);return Object(It.jsx)(d.a,{dateAdapter:f.a,children:Object(It.jsx)(gc,{children:Object(It.jsx)(b.a,{maxSnack:3,children:Object(It.jsx)(l.a,{client:e,children:Object(It.jsx)(Kt,{children:Object(It.jsx)(Xt,{children:Object(It.jsx)(Oc,{})})})})})})})},xc=(n(282),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,415)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))});u.a.render(Object(It.jsxs)(c.a,{theme:pr,children:[Object(It.jsx)(a.a,{}),Object(It.jsx)(yc,{})]}),document.querySelector("#root")),xc()},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(19),a=n(20),c=n(45),i=n(44),s=n(203),o=n.n(s),u=n(12),l=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"emitReInit",value:function(){this.emit(u.b.ReInit)}},{key:"emitVisibilityChanged",value:function(e){this.emit(u.b.DocumentVisibilityChanged,e)}},{key:"emitConfirmTransactionDialog",value:function(e){this.emit(u.b.ConfirmTransactionDialog,e)}},{key:"emitConnectWalletDialog",value:function(e){this.emit(u.b.ConnectWalletDialog,e)}},{key:"emitQuotaChanged",value:function(e,t){this.emit(u.b.QuotaChanged,e,t)}},{key:"emitMarketChanged",value:function(e){this.emit(u.b.MarketChanged,e)}},{key:"emitPunkChanged",value:function(e){this.emit(u.b.PunkChanged,e)}},{key:"emitPunkFilterValuesChanged",value:function(e,t){this.emit(u.b.PunkFilterValuesChanged,e,t)}}]),n}(o.a),d=new l,f=function(){return d}},40:function(e,t,n){"use strict";var r,a;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),function(e){e.ASC="ASC",e.DESC="DESC"}(r||(r={})),function(e){e.BID="BID",e.ID="ID",e.OFFER="OFFER",e.RANK="RANK"}(a||(a={}))},41:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(19),a=n(20),c=n(24),i=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"IS_PRODUCTION",get:function(){return!0}},{key:"CONTRACT_ADDRESS",get:function(){return"vite_fd06f4ef9a32fcabcdcae1857c1cab18b496ef1eafd1b4edc1"}},{key:"PRE_MINT_HEIGHT",get:function(){return new c.BigNumber("1150")}},{key:"EXPLORER_URL",get:function(){return"https://vitescan.io/"}},{key:"ENABLE_LOGGER",get:function(){return!1}},{key:"ENABLE_MNEMONIC_LOGIN",get:function(){return!1}},{key:"NETWORK_ID",get:function(){return parseInt("1")}},{key:"BASENAME",get:function(){return""}}]),e}()},51:function(e,t,n){"use strict";n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return C})),n.d(t,"h",(function(){return T})),n.d(t,"c",(function(){return j})),n.d(t,"f",(function(){return m})),n.d(t,"a",(function(){return O})),n.d(t,"g",(function(){return y})),n.d(t,"b",(function(){return x}));var r,a=n(3),c=n.n(a),i=n(6),s=n(19),o=n(20),u=n(120),l=n(74),d=n(45),f=n(44),h=n(205),b=n.n(h),p=n(26);!function(e){e.Web="Web",e.Session="Session"}(r||(r={}));var v,j=function(){function e(t,n){Object(s.a)(this,e),this._type=void 0,this.active=void 0,this.accounts=[],this._type=t,this.baseInitinit(n)}return Object(o.a)(e,[{key:"type",get:function(){return this._type}},{key:"baseInitinit",value:function(e){var t=this;e&&(this.active=e.active?this.createAccount(e.active):void 0,e.accounts&&Array.isArray(e.accounts)&&e.accounts.forEach((function(e){t.accounts.push(t.createAccount(e))}))),this.accounts||(this.accounts=[])}}],[{key:"fromJS",value:function(e){switch((e="object"===typeof e?e:{})._type){case r.Web:return new m(e);case r.Session:return new O(e)}}}]),e}(),m=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,r.Web,e)).mnemonic=void 0,a.init(e),a}return Object(o.a)(n,[{key:"init",value:function(e){e&&(this.mnemonic=e.mnemonic)}},{key:"createAccount",value:function(e){return new y(e)}}]),n}(j),O=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,r.Session,e)).session=void 0,a.timestamp=void 0,a.init(e),a}return Object(o.a)(n,[{key:"init",value:function(e){e&&(this.session=e.session,this.timestamp=e.timestamp)}},{key:"createAccount",value:function(e){return new x(e)}}]),n}(j);!function(e){e.Web="Web",e.Session="Session"}(v||(v={}));var g=function(){function e(t,n){Object(s.a)(this,e),this._type=void 0,this.id=void 0,this.address=void 0,this._type=t,this.baseInit(n)}return Object(o.a)(e,[{key:"type",get:function(){return this._type}},{key:"baseInit",value:function(e){e&&(this.id=e.id,this.address=e.address)}}],[{key:"fromJS",value:function(e){switch((e="object"===typeof e?e:{})._type){case r.Web:return new y(e);case r.Session:return new x(e)}}}]),e}(),y=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,v.Web,e)).privateKey=void 0,r.init(e),r}return Object(o.a)(n,[{key:"init",value:function(e){e&&(this.privateKey=e.privateKey)}}]),n}(g),x=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,v.Session,e)}return n}(g),k=Object(p.a)(),w=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,a){var c;return Object(s.a)(this,n),(c=t.call(this,r,a))._walletManager=void 0,c._walletManager=e,c.on("connect",(function(e,t){k.info("WalletConnector.connect",e,t)();var n=t.params[0].accounts;c.saveSession(n)})),c.on("disconnect",(function(e,t){k.info("WalletConnector.disconnect",e,t)(),c.stopBizHeartBeat(),c._walletManager.removeWallet()})),c.on("session_update",(function(e,t){k.info("WalletConnector.session_update",e,t)();var n=t[0];n&&n.accounts&&c.saveSession(n.accounts)})),c}return Object(o.a)(n,[{key:"uri",get:function(){return Object(u.a)(Object(l.a)(n.prototype),"uri",this)}},{key:"on",value:function(e,t){return Object(u.a)(Object(l.a)(n.prototype),"on",this).call(this,e,t)}},{key:"off",value:function(e,t){return Object(u.a)(Object(l.a)(n.prototype),"off",this).call(this,e,t)}},{key:"saveSession",value:function(e){if(!e||!e[0])throw new Error("address is null");for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(new x({id:n.toString(),address:r}))}var a=new O({active:t[0],accounts:t,session:this.session,timestamp:(new Date).getTime()});this._walletManager.setWallet(a)}},{key:"updateSession",value:function(){var e=this._walletManager.getWallet();e&&e instanceof O&&(e.timestamp=(new Date).getTime(),this._walletManager.updateWalletStore(e))}},{key:"createSession",value:function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)(Object(l.a)(n.prototype),"createSession",this).call(this);case 2:return e.abrupt("return",this.uri);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendTransactionAsync",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t,n,r,a=this,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,n=new Array(t),r=0;r<t;r++)n[r]=i[r];return e.abrupt("return",new Promise((function(e,t){a.on("disconnect",(function(){t("Request aborted due to disconnect.")})),a.sendCustomRequest({method:"vite_signAndSendTx",params:n}).then((function(t){a.updateSession(),e(t)})).catch((function(e){t(e)}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"signMessageAsync",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t,n,r,a=this,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,n=new Array(t),r=0;r<t;r++)n[r]=i[r];return e.abrupt("return",new Promise((function(e,t){a.on("disconnect",(function(){t("Request aborted due to disconnect.")})),a.sendCustomRequest({method:"vite_signMessage",params:n}).then((function(t){a.updateSession(),e(t)})).catch((function(e){t(e)}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"killSessionAsync",value:function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)(Object(l.a)(n.prototype),"killSession",this).call(this);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(b.a),A=n(18),_=Object(p.a)(),C=function(){function e(t){Object(s.a)(this,e),this._walletManager=void 0,this._walletManager=t}return Object(o.a)(e,[{key:"session",get:function(){return this._walletManager.getValidSession()}},{key:"createConnector",value:function(e){var t=this._walletManager.getActiveAccount(),n={bridge:e.connectorUrl,session:this.session},r=t?{lastAccount:t.address}:void 0;return new w(this._walletManager,n,r)}},{key:"create",value:function(e){var t=this.createConnector(e);return this.session||t.createSession().then((function(){return _.info("IWalletConnector connected",t.uri)()})),t}},{key:"createAsync",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.createConnector(t),this.session){e.next=7;break}return e.next=4,A.a.timeout(1e3);case 4:return e.next=6,n.createSession();case 6:_.info("IWalletConnector connected",n.uri)();case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),S=n(48),E=n(17),B=Object(p.a)(),I=function(){function e(){Object(s.a)(this,e),this._webWalletKey=E.a.WEB_WALLET_STORAGE_SPACE,this._sessionWalletKey=E.a.SESSION_WALLET_STORAGE_SPACE}return Object(o.a)(e,[{key:"clear",value:function(){localStorage.removeItem(this._webWalletKey),sessionStorage.removeItem(this._sessionWalletKey)}},{key:"getItem",value:function(){var e;try{(e=localStorage.getItem(this._webWalletKey))||(e=sessionStorage.getItem(this._sessionWalletKey))}catch(t){return void B.error(t)()}if(e)try{return j.fromJS(JSON.parse(e))}catch(t){return void B.error(t)()}}},{key:"setItem",value:function(e){var t=JSON.stringify(e);try{switch(e.type){case r.Web:localStorage.setItem(this._webWalletKey,t);break;case r.Session:sessionStorage.setItem(this._sessionWalletKey,t);break;default:throw new Error("Wallet type '".concat(e.type,"' is not supported."))}}catch(n){B.error(n)()}}}]),e}(),M=Object(p.a)(),P=function(){function e(){Object(s.a)(this,e),this._store=void 0,this._wallet=void 0,this._mnemonicDeriveIndex=0,this._setWalletCallback=void 0,this._store=new I}return Object(o.a)(e,[{key:"initWallet",value:function(){var e=this._store.getItem();e&&(this._wallet=e,this._mnemonicDeriveIndex=e.accounts.length,this.updateWallet())}},{key:"onSetWalletCallback",set:function(e){this._setWalletCallback=e}},{key:"getWallet",value:function(){return this._wallet}},{key:"setWallet",value:function(e){this._wallet=e,this.updateWalletStore(e),this.updateWallet()}},{key:"updateWallet",value:function(){this._setWalletCallback&&this._setWalletCallback(this._wallet)}},{key:"updateWalletStore",value:function(e){e&&this._store.setItem(e)}},{key:"createWebWallet",value:function(e){if(this.validateMnemonic(e)){this.resetWallet();var t=this.createWebWalletAccount(e,0),n=new m({active:t,mnemonic:e,accounts:[t]});return this.setWallet(n),n}}},{key:"removeWallet",value:function(){this.resetWallet(),this.updateWallet()}},{key:"getAccountByAddress",value:function(e){var t,n;return null===(t=this._wallet)||void 0===t||null===(n=t.accounts)||void 0===n?void 0:n.find((function(t){return t.address===e}))}},{key:"addAccount",value:function(){if(this._wallet instanceof m){var e=this.createWebWalletAccount(this._wallet.mnemonic);return this._wallet.accounts.push(e),this.setActiveAccount(e),e}}},{key:"getActiveAccount",value:function(){var e;return null===(e=this._wallet)||void 0===e?void 0:e.active}},{key:"setActiveAccount",value:function(e){return!!this._wallet&&(this._wallet.active=e,this._store.setItem(this._wallet),this.updateWallet(),!0)}},{key:"getAccounts",value:function(){return this._wallet?this._wallet.accounts:[]}},{key:"getValidSession",value:function(){var e=this._store.getItem();if(e&&e instanceof O){if((new Date).getTime()-e.timestamp<6e5)return e.session;M.info("Found expired session.",e)()}}},{key:"resetWallet",value:function(){this._wallet=void 0,this._mnemonicDeriveIndex=0,this._store.clear()}},{key:"createWebWalletAccount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._mnemonicDeriveIndex,n=S.wallet.deriveAddress({mnemonics:e,index:t}),r=n.privateKey,a=new y({id:t.toString(),privateKey:r,address:S.wallet.createAddressByPrivateKey(r).address});return this._mnemonicDeriveIndex=t+1,a}},{key:"validateMnemonic",value:function(e){return!!e&&S.wallet.validateMnemonics(e)}}]),e}(),N=new P,T=function(){return N}}},[[283,1,2]]]);
//# sourceMappingURL=main.fa10b84b.chunk.js.map
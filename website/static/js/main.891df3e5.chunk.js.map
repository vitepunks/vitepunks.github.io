{"version":3,"sources":["../../common/dist/common/index.js","../../common/dist/wallet/index.js","../../common/dist/search/index.js","../../common/dist/contracts/index.js","../../common/dist/contracts/base.contract.js","../../common/dist/clients/index.js","../../common/dist/datasources/index.js","../../common/dist/common/config.js","../../common/dist/common/constants.js","../../common/dist/util/common.util.js","../../common/dist/util/compress.util.js","../../common/dist/util/emitter.js","../../common/dist/util/ensure.js","../../common/dist/util/explorer.util.js","../../common/dist/util/file.util.js","../../common/dist/util/filter.util.js","../../common/dist/util/format.util.js","../../common/dist/util/logger.js","../../common/dist/util/retry.util.js","../../common/dist/util/task.js","../../common/dist/util/token.util.js","../../common/dist/util/transform.util.js","../../common/dist/util/types.js","../../common/dist/util/url.util.js","../../common/dist/wallet/connector.js","../../common/dist/wallet/manager.js","../../common/dist/wallet/store.js","../../common/dist/wallet/types.js","../../common/dist/search/punk.search.js","../../common/dist/contracts/punks.contract.js","../../common/dist/clients/vite.client.js","../../common/dist/datasources/base.datasource.js","../../common/dist/datasources/vite.datasource.js","../../common/dist/index.js","common/config.ts","common/constants.ts","storage/wallet.storage.ts","util/file.util.ts","datasources/mock.datasource.ts","contracts/punks.contract.ts","datasources/vite.datasource.ts","storage/account.storage.ts","wallet/connector.ts","wallet/factory.ts","contexts/common.context.ts","mutations/market.ts","mutations/punk.ts","queries/punk.ts","queries/market.ts","queries/general.ts","clients/apollo.client.ts","common/network.ts","features/layout/components/footer/component.tsx","features/layout/components/header-loading/component.tsx","features/layout/components/main-scroll/component.tsx","features/layout/components/main-wrapper/component.tsx","features/main/components/loading/component.tsx","contexts/web3.tsx","contexts/connectedWeb3.tsx","util/snackbar.util.ts","util/web.util.ts","features/common/components/alert/component.tsx","features/common/components/click-once-button/component.tsx","features/common/components/fa-icon/component.tsx","features/common/components/tooltip/component.tsx","features/marketplace/components/browse-item/component.tsx","features/punk/components/infinite-list/component.tsx","services/general.service.ts","services/market.service.ts","util/icon.util.ts","features/common/components/explorer-link/component.tsx","util/moment.util.ts","features/common/components/event-list-loading/component.tsx","features/punk/components/dialog-accept/component.tsx","features/punk/components/dialog-bid/component.tsx","features/punk/components/dialog-cancel/component.tsx","features/punk/components/dialog-gift/component.tsx","features/punk/components/dialog-offer/component.tsx","features/punk/components/dialog/component.tsx","features/account/components/auction-list/component.tsx","features/account/components/auctions/component.tsx","features/account/components/details/component.tsx","features/common/components/test/component.tsx","services/punk.service.ts","features/landing/components/main-image/component.tsx","features/common/components/test-image/component.tsx","features/common/components/test-list/component.tsx","features/common/components/countdown/component.tsx","features/landing/components/faq/component.tsx","features/landing/components/mints-remaining/component.tsx","hooks/punk.hook.ts","theme.tsx","features/landing/components/ranking/component.tsx","features/landing/components/main/component.tsx","features/main/components/qrcode/component.tsx","features/main/components/login/component.tsx","features/layout/components/header/component.tsx","features/common/components/event-list/component.tsx","features/marketplace/components/browse-activity/component.tsx","features/marketplace/components/browse-items-filter/component.tsx","features/marketplace/components/browse-items/component.tsx","features/marketplace/components/browse/component.tsx","features/marketplace/components/item/component.tsx","features/punk/components/image/component.tsx","features/punk/components/dialog-mint/component.tsx","features/punk/components/activity/component.tsx","features/punk/components/info-actions/component.tsx","features/punk/components/info/component.tsx","features/punk/components/main/component.tsx","features/main/components/dialog-transaction/component.tsx","features/main/components/quota/component.tsx","features/main/components/main/component.tsx","App.tsx","reportWebVitals.ts","index.tsx","../../common/dist/util/index.js"],"names":["__createBinding","this","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__exportStar","exports","p","prototype","hasOwnProperty","call","value","require","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","pop","length","push","BaseContract","util_1","logger","getLogger","_minQuota","PunkTypes","BigNumberWrapper","objectFromEntries","entries","fromEntries","map","entry","name","initAsync","client","basePath","_a","_client","initContractAsyncProtected","initAsyncProtected","_contract","configurable","ensureQuotaAsync","_quota","getQuotaAsync","address","currentQuota","lte","Error","toBoolean","concat","callContractAsync","_account","_methodName","_params","amount","tokenId","result1","error_1","message","abi","waitForAccountBlockAsync","height","FormatUtil","formatMessage","stakeForQuotaAsync","_amount","createAddressListenerAsync","logs","listener","_this","on","results","index","info","vmLog","decodeVmLog","vmlog","CommonConfig","init","_config","USE_IPFS","set","_flag","IS_PRODUCTION","CONTRACT_ADDRESS","EXPLORER_URL","ENABLE_LOGGER","DefaultPunkFilterValues","ActionName","PunkEventTypes","PunkSortTypes","OrderTypes","Networks","CommonConstants","PUNK_NAME","MARKET_DATA_URL","CDN_URL","IPFS_GATEWAY_URL","ZERO_ADDRESS","VITE_TOKEN_ID","CURRENCY_NAME","CURRENCY_DECIMALS","TOTAL_MINTS","id","networkId","rpcUrl","connectorUrl","type","OrderBy","ASC","DESC","PunkSortBy","ID","RANK","BID","OFFER","PunkEventType","Unknown","toString","Mint","Offer","NewBid","CancelBid","Buy","CancelOffer","unknown","list","bid","buy","sale","sell","gift","listing","transfer","claim","accept","acceptBid","cancel","cancelBid","cancelSale","cancelGift","sortBy","orderBy","search","CommonUtil","big_js_1","uuid_1","isString","String","isNumber","isNaN","parseInt","isFinite","isNullOrWhitespace","trim","isNullOrDefault","defaultValue","timeout","ms","setTimeout","toJsonString","data","JSON","stringify","toUint8Array","encoding","Uint8Array","Buffer","from","imageUrlToBlob","url","fetch","blob","random","min","max","Math","floor","calculatePercentage","current","goal","default","div","mul","toNumber","error","calculateMaxRows","total","rpp","page","uuid","v4","appendPath","_path","_appendix","appendix","startsWith","substring","endsWith","isValidHttpUrl","URL","protocol","truncateString","str","maxLength","truncateStringInTheMiddle","strPositionStart","strPositionEnd","CompressUtil","pako","compress","gzip","to","decompress","ungzip","__extends","extendStatics","d","b","setPrototypeOf","__proto__","Array","__","constructor","getEmitter","GlobalEmitter","events_1","_1","_super","arguments","emitReInit","emit","GlobalEvent","ReInit","emitVisibilityChanged","state","DocumentVisibilityChanged","emitConfirmTransactionDialog","open","ConfirmTransactionDialog","emitConnectWalletDialog","ConnectWalletDialog","emitQuotaChanged","quota","QuotaChanged","emitMarketChanged","event","MarketChanged","emitPunkChanged","PunkChanged","emitPunkFilterValuesChanged","oldValues","newValues","PunkFilterValuesChanged","EventEmitter","emitter","Ensure","notNull","property","propertyName","notNullOrWhiteSpace","ExplorerUtil","__1","getBaseUrl","_baseUrl","baseUrl","getAddressUrl","_address","DEFAULT_BASE_URL","getTxUrl","_tx","getNodeFileUtil","NodeFileUtil","getLocalFileUtil","LocalFileUtil","FileUtil","fs","node_fetch_1","readFileAsync","path","readFileSync","writeFileAsync","writeFileSync","localFileUtil","response","arrayBuffer","text","nodeFileUtil","FilterUtil","lodash_1","sortPunks","sort","order","punks","Number","rank","filter","gt","a","_c","_d","_e","_f","_b","offer","minAmount","defaultMessage","console","log","graphQLErrors","substr","formatNumber","number","toLocaleString","navigator","language","__spreadArray","pack","ar","i","l","slice","ExtendedConsoleLogger","ConsoleLogger","LogEventModel","assign","noop","isEnabled","debug","bind","warn","timestamp","Date","toLocaleTimeString","createLogEventModel","args","_i","mapFn","banner","isArray","e1","Function","RetryUtil","promiseRetry","fn","retries","err","catch","Task","task","interval","_task","_taskInterval","_run","_taskTimer","_onStop","_callback","start","callback","stop","window","clearTimeout","TokenUtil","bignumber_js_1","roundBigNumber","bn","tokenDecimals","decimals","BigNumber","pow","decimalPlaces","ROUND_DOWN","formatBigNumber","maxDigits","rounded","formatted","toFormat","formatVite","formatViteFull","formatViteTooltip","TransformUtil","toBigNumber","toMaybeBigNumber","defaultBigNumber","toAddress","toTimestamp","date","getTime","toPunkEvent","__typename","TypeNames","PunkEvent","accountBlockHash","accountBlockHeight","eventType","punkId","fromAddress","toPunkInfo","owner","toMarketBid","toMarketOffer","itemIndex","MarketBid","bidder","MarketOffer","seller","onlySellTo","toAccountAuction","auction","auctionType","DocumentState","WalletType","OrderType","ProviderType","Punk","PunkSortType","PunkDialogType","MarketplaceTab","MarketEventType","AccountAuctionType","ViteQuotaType","VmLogEvent","UrlUtil","getPunkUrl","image","cid","getPunkIpfsUrlByCid","getPunkIpfsUrl","WalletManager","vitejs_1","_store","_mnemonicDeriveIndex","initWallet","wallet","getItem","_wallet","accounts","updateWallet","cb","_setWalletCallback","getWallet","setWallet","updateWalletStore","setItem","createWebWallet","mnemonic","validateMnemonic","resetWallet","account","createWebWalletAccount","WebWallet","active","removeWallet","getAccountByAddress","find","addAccount","setActiveAccount","getActiveAccount","getAccounts","getValidSession","SessionWallet","session","clear","privateKey","deriveAddress","mnemonics","WebWalletAccount","createAddressByPrivateKey","validateMnemonics","SessionWalletAccount","WalletAccount","WalletAccountType","Wallet","_type","baseInit","fromJS","Web","Session","createAccount","forEach","getPunkSearch","PunkSearch","flexsearch_1","_index","Document","document","tag","punks_1","add","query","mappedResult","split","limit","enrich","intersectedResult","intersection","ids","intersectionWith","PunksBaseContract","AbiItemType","base_contract_1","_abiMap","Map","getDeveloper","getAbiItem","getMarketInfo","isContract","balanceOf","ownerOf","getMappedIndex","totalSupply","getTokensOf","tokenURI","getOffer","getBid","transferEvent","marketChangedEvent","punkChangedEvent","_name","getAbiItemByType","_abiItemType","callOffChainMethodAsync","offChain","setMintPriceAsync","_price","MintPrice","setActionPriceAsync","ActionPrice","getDeveloperAsync","setDeveloperAsync","getMarketInfoAsync","marketStarted","market_started","mintsRemaining","mints_remaining","mintPrice","mint_price","actionPrice","action_price","setMarketStartedAsync","_started","isContractAsync","balanceOfAsync","_owner","ownerOfAsync","_tokenId","getMappedIndexAsync","_refId","setMappedIndicesAsync","_indices","_startIndex","mintAsync","_mintPrice","totalSupplyAsync","getTokensOfAsync","tokenURIAsync","getBaseUrlAsync","setBaseUrlAsync","getOfferAsync","_punkId","isForSale","getBidAsync","hasBid","cancelOfferAsync","offerAsync","_minSalePrice","_fee","offerToAddressAsync","buyAsync","cancelBidAsync","enterBidAsync","plus","toFixed","acceptBidAsync","_minPrice","__assign","s","getViteClient","ViteClient","common_1","wallet_1","HTTP_RPC","WS_RPC","providerOptions","retryTimes","retryInterval","network","providerType","connector","_network","_connector","isResolved","WEBSOCKET","_provider","_emitter","_isConnected","ViteAPI","dispose","destroy","encodeParameter","param","encodeLogSignature","jsonFunction","methodName","requestAsync","method","request","toLowerCase","includes","getSnapshotChainHeightAsync","getAccountBlockHeightAsync","blockCount","getBalanceAsync","balanceInfoMap","balance","maxQuota","stakeAmount","sendAsync","block","accountBlock","createAccountBlock","sendAccountBlockAsync","beneficiaryAddress","params","createContractAsync","binary","code","responseLatency","quotaMultiplier","randomDegree","contractAddress","offchaincode","dataBase64","resultBytes","outputs","offchainDecodeResult","resultList","encodeFunctionCall","selfAddr","offChainCode","decodeParameters","topics","j","abiItem","decodeVmLogByAbiItem","topic","decodeLog","inputs","utils","_Buffer","getEventsByBlockAsync","fromHeight","toHeight","payload","midHeight","addressHeightRange","subscribe","removeListener","unsubscribe","waitForNextVmLogEventAsync","now","blockByHeight","receiveBlockHash","blockByHash","err_1","getAccountBlockStatus","receiveTransactionAsync","blocks","ab","sendBlockHash","hash","receiveAllOnroadTxAsync","RECEIVE_PER_ROUND","error_2","setProvider","setPrivateKey","autoSetPreviousAccountBlock","sign","send","sendTransactionAsync","status","resolveAccountBlockData","statusTxt","blockType","bytes","BaseDataSource","search_1","_accountAuctions","_punkSearch","_punkAttributes","_punks","_punksFiltered","searchTerm","items","initPunkAttributesAsync","attributes","fileUtil","parse","initPunksAsync","infos","punk","_punkInfos","getDefaultPunkInfos","unshift","updatePunksAsync","initAccountAuctionsAsync","addAccountAuction","bidAuction","offerAuction","_auction","auctions","Bid","initBaseAsync","initPunkInfosAsync","disposeProtected","getAccount","walletManager","getPunkAttributesAsync","getPunkAsync","getPunksAsync","_limit","_offset","_sort","_order","_search","getPunksAllAsync","getActionPriceAsync","_actionPrice","getMintPriceAsync","getAccountAuctionsAsync","_cursor","cursorIndex","orderAccountAuctions","findIndex","eq","cursor","prev","createId","ViteBaseDataSource","axios_1","clients_1","contracts_1","getNewMarketEventsAsync","_from","encodedLogSignature","contract","responseType","updatePunkInfosAsync","refHeight","_listener","handleVmLogAsync","getPunkEventsAsync","_id","_height","events","blockHeight","getEventsFromHeight","reverse","toPunkEvents","getPunkOwnerAsync","getPunksByAddressAsync","result_1","getMarketBidAsync","getMarketOfferAsync","getMarketEventsAsync","maximum","minus","checkQuotaAsync","fee","getFeeAsync","bidAsync","marketEvent","punkEvent","transformed","decoded","_refHeight","events_2","_g","config","_useIpfs","process","getClientConfig","ClientConstants","APP_NAME","USE_MOCK_DATASOURCE","WEB_WALLET_STORAGE_SPACE","SESSION_WALLET_STORAGE_SPACE","BG_URL","ITEM_BG_URL","SAMPLE_PUNK_URL","LANDING_IMAGE_URL","QUOTA_WIKI_URL","DISCORD_URL","TWITTER_URL","GITHUB_URL","QUOTA_THRESHOLD","WalletStore","_webWalletKey","_sessionWalletKey","localStorage","removeItem","sessionStorage","saveData","manager","getWalletManager","BrowserFileUtil","browserFileUtil","getBrowserFileUtil","MockDataSource","_events","clearMock","shiftedBy","ds","PunksContract","_fileUtil","punksContract","ViteDataSource","WalletConnector","opts","meta","_walletManager","saveSession","stopBizHeartBeat","sessionAccounts","existing","uri","res","rej","sendCustomRequest","r","updateSession","Connector","WalletConnectorFactory","bridge","lastAccount","createConnector","createSession","CommonContext","_isInitialized","_datasource","clientConfig","NETWORK_ID","walletConnectorFactory","checkIpfsAsync","img","Image","onload","onerror","src","context","getCommonContext","OFFER_MUTATION","gql","CANCEL_OFFER_MUTATION","BUY_MUTATION","BID_MUTATION","ACCEPT_BID_MUTATION","CANCEL_BID_MUTATION","MarketMutations","parent","datasource","cancelOffer","MINT_MUTATION","PunkMutations","mint","PUNK_FIELDS","PUNK_EVENT_FIELDS","GET_PUNK_ATTRIBUTES_QUERY","GET_PUNK_EVENTS_QUERY","GET_PUNK_OWNER_QUERY","GET_PUNK_QUERY","GET_PUNKS_QUERY","GET_PUNKS_ALL_QUERY","GET_PUNKS_BY_ADDRESS_QUERY","PunkQueries","punkAttributes","punkEvents","offset","punkOwner","punksAll","punksByAddress","MARKET_BID_FIELDS","MARKET_OFFER_FIELDS","GET_MARKET_INFO_QUERY","GET_MARKET_BID_QUERY","GET_MARKET_OFFER_QUERY","GET_MARKET_EVENTS_QUERY","MarketQueries","marketInfo","marketBid","marketOffer","marketEvents","GET_QUOTA_QUERY","GET_ACCOUNT_AUCTIONS_QUERY","GeneralQueries","accountAuctions","ApolloClientWrapper","ApolloClient","cache","InMemoryCache","typePolicies","Query","fields","offsetLimitPagination","resolvers","GraphQLScalarType","description","serialize","parseValue","Mutation","headers","getApolloClient","_networkHeight","_setNetworkCallback","getNetworkManager","Root","styled","theme","Footer","Typography","TitleTypography","HeaderLoading","props","AppBar","position","Toolbar","variant","MainScrollStyled","MainScrollInner","MainScroll","children","restProps","Container","maxWidth","MainWrapperStyled","MainWrapper","MainLoading","useState","retryCount","setRetryCount","useEffect","Chip","size","Web3Context","React","createContext","Web3Provider","setError","setNetwork","onSetWalletCallback","onSetNetworkCallback","Provider","ConnectedWeb3Context","useConnectedWeb3Context","useContext","ConnectedWeb3","connection","setConnection","mounted","useRef","web3Context","useWeb3Context","commonContext","networkManager","getNetwork","logout","useCallback","location","reload","_retryCount","startTimestamp","retryId","isInitialized","minDelay","elapsed","SnackbarUtil","snackbar","enqueueSnackbar","WebUtil","getDocumentState","visibilityState","Hidden","Active","Alert","color","backgroundColor","Paper","Box","sx","padding","textAlign","ClickOnceButton","isDisabled","setIsDisabled","handleClick","callbackFn","enqueueError","LoadingButton","loading","fullWidth","disabled","onClick","startIcon","FontAwesomeSvgIcon","forwardRef","ref","icon","width","svgPathData","SvgIcon","viewBox","style","opacity","ExtendedBootstrapTooltip","BootstrapTooltip","tooltipClasses","tooltip","className","Tooltip","classes","popper","palette","common","white","boxShadow","shadows","fontSize","arrow","black","CustomCardMedia","typography","pxToRem","border","PunkImage","MarketplaceBrowseItem","Card","CardActionArea","component","RouterLink","item","top","left","title","placement","faUserCircle","ml","right","faGem","bottom","faHandHoldingUsd","mt","mr","faTag","float","backgroundImage","CardContent","overflow","mb","EmptyResult","isLoading","isEmpty","InfiniteListLoading","Grid","container","spacing","justifyContent","alignItems","xs","md","InfinitePunkList","pt","pb","dataLength","fetchMoreDataAsync","hasMore","loader","scrollThreshold","scrollableTarget","marginBottom","sm","lg","display","minWidth","service","_apollo","getContractQuota","_fetchPolicy","variables","fetchPolicy","getAccountAuctions","getGeneralService","MarketService","getEventsAsync","mutate","mutation","Boolean","getMarketService","IconUtil","getBuyEventTypeIcon","faDonate","getClaimEventTypeIcon","faExchangeAlt","getOfferEventTypeIcon","getGiftEventTypeIcon","faGift","getCancelSaleEventTypeIcon","faPowerOff","getCancelGiftEventTypeIcon","faEraser","getPunkEventTypeIcon","faTrophy","faBan","faQuestion","getAccountAuctionTypeIcon","ExplorerLinkType","MomentUtil","moment","locale","unix","utc","local","getLocal","format","getLocalTime","getLocalDate","unit","diff","duration","EventListLoading","count","PunkAcceptDialog","setAmount","ACCEPT_OFFER","handleClose","setState","handleConfirmAsync","_message","_success","replace","enqueueMessage","callbackAsync","Dialog","onClose","DialogTitle","DialogContent","gutterBottom","FormControl","Input","DialogActions","Button","PunkBidDialog","setDisabled","changeAmount","updateFee","DialogContentText","InputLabel","htmlFor","onChange","target","autoFocus","startAdornment","InputAdornment","align","PunkCancelDialog","actionName","setActionName","CANCEL_BID","PunkGiftDialog","setAddress","changeAddress","placeholder","marginTop","PunkOfferDialog","lt","PunkDialog","setFee","handleEvent","off","success","GIFT","CANCEL_OFFER","ACCEPT_BID","CustomAvatar","Avatar","CustomTableCell","TableCell","EventTableRow","isAnon","setIsAnon","isOwner","setIsOwner","useQuery","onCompleted","momentUtil","handleClaimAsync","handleOpenDialog","TableRow","scope","getEventName","Link","underline","getLocalReverseFormatted","getFromUnix","isAuthorized","AccountAuctionList","currentAuction","setCurrentAuction","UNKNOWN","dialogState","setDialogState","emptyMessage","_item","cleanupAsync","dialogCallbackAsync","newEvents","TableContainer","Table","stickyHeader","TableHead","TableBody","AccountAuctions","setIsAuthorized","setIsLoading","setHasMore","setCursor","setEvents","setNewEvents","refetchDataAsync","refetch","refresh","refreshAsync","addNewEvent","Stack","direction","IconButton","AccountDetails","useParams","currentLength","fetchMore","wordBreak","Test","viteClient","confetti","particleCount","spread","PunkService","getById","getOwnerAsync","getExtendedAsync","_punk","defaultPunkExtended","ownerQuery","bidQuery","offerQuery","punkExtended","getPunkService","ImageContainer","Img1","Img2","LandingMainImage","imageUrl1","setImageUrl1","imageUrl2","setImageUrl2","setImageUrlsAsync","punkId1","punk1","punkId2","punk2","TestImage","TestList","allPunks","setAllPunks","setPunks","Set","filtered","has","Countdown","useMemo","getDuration","days","hours","minutes","seconds","asSeconds","Accordion","disableGutters","elevation","square","divider","borderBottom","mode","AccordionSummary","expandIcon","flexDirection","transform","marginLeft","AccordionDetails","MuiAccordionDetails","borderTop","LandingFaq","faqExpanded","setFaqExpanded","handleChange","panel","newExpanded","expanded","href","MintsRemaining","pct","setPct","minValue","px","Skeleton","animation","LinearProgress","createTheme","fontFamily","join","primary","main","secondary","LinearProgressWithLabel","matches","useMediaQuery","breakpoints","up","truncateAddress","LandingRanking","maxRares","setMaxRares","ranks","setRanks","notifyOnNetworkStatusChange","refetchWritePolicy","usePunkById","setRanksAsync","_holderMap","_existing","rares","_holders","_maxRares","key","_holdersOrdered","h","splice","flexGrow","paragraph","toISOString","LandingMain","displayNumber","setMintPrice","setMarketStarted","canMint","setCanMint","setMintsRemaining","punkService","handleMintAsync","preload","autoPlay","muted","playsInline","loop","faTwitter","faGithub","faDiscord","alt","QrCode","elementRef","defaultOpt","ecLevel","HIGH","minVersion","background","modes","DRAW_WITH_IMAGE_BOX","radius","mSize","clientWidth","innerHTML","qrcode","generate","LoginDialog","setUri","setMnemonic","setOpen","connectorFactory","handleCreateSession","createAsync","ENABLE_MNEMONIC_LOGIN","autoComplete","Header","navigate","useNavigate","useTheme","loginOpen","setLoginOpen","showAccount","textDecoration","Fragment","ExplorerLink","getUrl","Address","setUrl","formatTimestamp","PRE_MINT_HEIGHT","isPreMint","Transaction","EventList","MarketplaceBrowseActivity","MarketplaceBrowseItemsFilter","values","setValues","attributesQuery","emitEvent","Autocomplete","multiple","freeSolo","options","getOptionLabel","option","filterSelectedOptions","renderInput","TextField","FormGroup","Select","labelId","MenuItem","ToggleButtonGroup","exclusive","ToggleButton","MarketplaceBrowseItems","setFilter","TabPanel","other","role","hidden","MarketplaceBrowse","initialValue","tab","Activity","setValue","borderColor","Tabs","newValue","Tab","MarketplaceItem","CardContainer","Img","imageUrl","setImageUrl","maxHeight","MintDialog","setPunkId","punkImage","setPunkImage","punkCid","setPunkCid","zIndex","transitionDuration","keepMounted","paddingBottom","PunkActivity","PunkInfoActions","hasOwner","setHasOwner","showAll","showAny","showBuy","showClaim","showBid","showSell","showAcceptBid","showCancelBid","showCancelSale","showCancelGift","showButtonState","setShowButtonState","handleFailureAsync","refetchAsync","faCheck","InfoContainer","BottomContent","PunkInfo","down","setPunkExtended","dateRef","setDateRef","all","newOwner","newBid","newOffer","usePunkInfo","Verified","borderRadius","verticalAlign","faSnowflake","PunkDetails","Transition","Slide","TransitionComponent","QuotaContainer","QuotaAlert","ContractQuota","setQuota","showContainer","setShowContainer","setInterval","quotaResult","gte","clearInterval","severity","endIcon","Main","visibility","setVisibility","basename","BASENAME","useSnackbar","addEventListener","removeEventListener","element","Background","App","apolloClient","LocalizationProvider","dateAdapter","DateAdapter","maxSnack","ApolloProvider","reportWebVitals","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","ThemeProvider","CssBaseline","querySelector"],"mappings":"gHACA,IAAIA,EAAmBC,MAAQA,KAAKD,kBAAqBE,OAAOC,OAAU,SAASC,EAAGC,EAAGC,EAAGC,QAC7EC,IAAPD,IAAkBA,EAAKD,GAC3BJ,OAAOO,eAAeL,EAAGG,EAAI,CAAEG,YAAY,EAAMC,IAAK,WAAa,OAAON,EAAEC,OAC1E,SAASF,EAAGC,EAAGC,EAAGC,QACTC,IAAPD,IAAkBA,EAAKD,GAC3BF,EAAEG,GAAMF,EAAEC,KAEVM,EAAgBX,MAAQA,KAAKW,cAAiB,SAASP,EAAGQ,GAC1D,IAAK,IAAIC,KAAKT,EAAa,YAANS,GAAoBZ,OAAOa,UAAUC,eAAeC,KAAKJ,EAASC,IAAId,EAAgBa,EAASR,EAAGS,IAE3HZ,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDN,EAAaO,EAAQ,KAAaN,GAClCD,EAAaO,EAAQ,KAAgBN,I,iCCZrC,IAAIb,EAAmBC,MAAQA,KAAKD,kBAAqBE,OAAOC,OAAU,SAASC,EAAGC,EAAGC,EAAGC,QAC7EC,IAAPD,IAAkBA,EAAKD,GAC3BJ,OAAOO,eAAeL,EAAGG,EAAI,CAAEG,YAAY,EAAMC,IAAK,WAAa,OAAON,EAAEC,OAC1E,SAASF,EAAGC,EAAGC,EAAGC,QACTC,IAAPD,IAAkBA,EAAKD,GAC3BF,EAAEG,GAAMF,EAAEC,KAEVM,EAAgBX,MAAQA,KAAKW,cAAiB,SAASP,EAAGQ,GAC1D,IAAK,IAAIC,KAAKT,EAAa,YAANS,GAAoBZ,OAAOa,UAAUC,eAAeC,KAAKJ,EAASC,IAAId,EAAgBa,EAASR,EAAGS,IAE3HZ,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDN,EAAaO,EAAQ,KAAgBN,GACrCD,EAAaO,EAAQ,KAAcN,GACnCD,EAAaO,EAAQ,KAAYN,GACjCD,EAAaO,EAAQ,KAAYN,I,iCCdjC,IAAIb,EAAmBC,MAAQA,KAAKD,kBAAqBE,OAAOC,OAAU,SAASC,EAAGC,EAAGC,EAAGC,QAC7EC,IAAPD,IAAkBA,EAAKD,GAC3BJ,OAAOO,eAAeL,EAAGG,EAAI,CAAEG,YAAY,EAAMC,IAAK,WAAa,OAAON,EAAEC,OAC1E,SAASF,EAAGC,EAAGC,EAAGC,QACTC,IAAPD,IAAkBA,EAAKD,GAC3BF,EAAEG,GAAMF,EAAEC,KAEVM,EAAgBX,MAAQA,KAAKW,cAAiB,SAASP,EAAGQ,GAC1D,IAAK,IAAIC,KAAKT,EAAa,YAANS,GAAoBZ,OAAOa,UAAUC,eAAeC,KAAKJ,EAASC,IAAId,EAAgBa,EAASR,EAAGS,IAE3HZ,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDN,EAAaO,EAAQ,KAAkBN,I,iCCXvC,IAAIb,EAAmBC,MAAQA,KAAKD,kBAAqBE,OAAOC,OAAU,SAASC,EAAGC,EAAGC,EAAGC,QAC7EC,IAAPD,IAAkBA,EAAKD,GAC3BJ,OAAOO,eAAeL,EAAGG,EAAI,CAAEG,YAAY,EAAMC,IAAK,WAAa,OAAON,EAAEC,OAC1E,SAASF,EAAGC,EAAGC,EAAGC,QACTC,IAAPD,IAAkBA,EAAKD,GAC3BF,EAAEG,GAAMF,EAAEC,KAEVM,EAAgBX,MAAQA,KAAKW,cAAiB,SAASP,EAAGQ,GAC1D,IAAK,IAAIC,KAAKT,EAAa,YAANS,GAAoBZ,OAAOa,UAAUC,eAAeC,KAAKJ,EAASC,IAAId,EAAgBa,EAASR,EAAGS,IAE3HZ,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDN,EAAaO,EAAQ,KAAoBN,GACzCD,EAAaO,EAAQ,KAAqBN,I,iCCZ1C,IAAIO,EAAanB,MAAQA,KAAKmB,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUV,GAAS,IAAMW,EAAKL,EAAUM,KAAKZ,IAAW,MAAOa,GAAKJ,EAAOI,IACpF,SAASC,EAASd,GAAS,IAAMW,EAAKL,EAAS,MAAUN,IAAW,MAAOa,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAJlB,IAAef,EAIae,EAAOC,KAAOR,EAAQO,EAAOf,QAJ1CA,EAIyDe,EAAOf,MAJhDA,aAAiBK,EAAIL,EAAQ,IAAIK,GAAE,SAAUG,GAAWA,EAAQR,OAITiB,KAAKP,EAAWI,GAClGH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,YAGlEO,EAAepC,MAAQA,KAAKoC,aAAgB,SAAUhB,EAASiB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOjD,OAAUyC,EACvJ,SAASM,EAAKG,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAIe,UAAU,mCAC3B,KAAOX,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARY,EAAG,GAASb,EAAC,OAAaa,EAAG,GAAKb,EAAC,SAAeC,EAAID,EAAC,SAAeC,EAAExB,KAAKuB,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAExB,KAAKuB,EAAGa,EAAG,KAAKnB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGY,EAAK,CAAS,EAARA,EAAG,GAAQZ,EAAEvB,QACzBmC,EAAG,IACP,KAAK,EAAG,KAAK,EAAGZ,EAAIY,EAAI,MACxB,KAAK,EAAc,OAAXV,EAAEC,QAAgB,CAAE1B,MAAOmC,EAAG,GAAInB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKV,EAAEI,IAAIQ,MAAOZ,EAAEG,KAAKS,MAAO,SACxC,QACI,KAAkBd,GAAZA,EAAIE,EAAEG,MAAYU,OAAS,GAAKf,EAAEA,EAAEe,OAAS,MAAkB,IAAVH,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEV,EAAI,EAAG,SACjG,GAAc,IAAVU,EAAG,MAAcZ,GAAMY,EAAG,GAAKZ,EAAE,IAAMY,EAAG,GAAKZ,EAAE,IAAM,CAAEE,EAAEC,MAAQS,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYV,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIY,EAAI,MAC7D,GAAIZ,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIU,KAAKJ,GAAK,MACvDZ,EAAE,IAAIE,EAAEI,IAAIQ,MAChBZ,EAAEG,KAAKS,MAAO,SAEtBF,EAAKf,EAAKrB,KAAKI,EAASsB,GAC1B,MAAOZ,GAAKsB,EAAK,CAAC,EAAGtB,GAAIS,EAAI,EAjBrB,QAiBoCD,EAAIE,EAAI,EACtD,GAAY,EAARY,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEnC,MAAOmC,EAAG,GAAKA,EAAG,QAAK,EAAQnB,MAAM,GArB9BL,CAAK,CAACsB,EAAGC,OAwB7DlD,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQ6C,kBAAe,EACvB,IAAIC,EAASxC,EAAQ,IACjByC,GAAS,EAAID,EAAOE,aACpBH,EAA8B,WAC9B,SAASA,IACLzD,KAAK6D,UAAY,IAAIH,EAAOI,UAAUC,iBAAiB,SACvD/D,KAAKgE,kBAAoB,SAAUC,GAC/B,OAAOhE,OAAOiE,YAAYD,EAAQE,KAAI,SAAUC,GAC5C,MAAO,CAACA,EAAMC,KAAMD,EAAMnD,YAoItC,OAhIAwC,EAAa3C,UAAUwD,UAAY,SAAUC,EAAQC,GACjD,OAAOrD,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAED,OADA3C,KAAK0E,QAAUH,EACR,CAAC,EAAavE,KAAK2E,2BAA2BH,IACzD,KAAK,EAED,OADAC,EAAG7B,OACI,CAAC,EAAa5C,KAAK4E,sBAC9B,KAAK,EAED,OADAH,EAAG7B,OACI,CAAC,WAK5B3C,OAAOO,eAAeiD,EAAa3C,UAAW,WAAY,CACtDJ,IAAK,WACD,OAAOV,KAAK6E,WAEhBpE,YAAY,EACZqE,cAAc,IAElBrB,EAAa3C,UAAUiE,iBAAmB,SAAUC,GAEhD,YADe,IAAXA,IAAqBA,EAAShF,KAAK6D,WAChC1C,EAAUnB,UAAM,OAAQ,GAAQ,WAEnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK0E,QAAQO,cAAcjF,KAAK6E,UAAUK,UACvE,KAAK,EAED,GADST,EAAG7B,OACDuC,aAAaC,IAAIJ,GACxB,MAAM,IAAIK,MAAM,mCAEpB,MAAO,CAAC,WAK5B5B,EAAa3C,UAAUwE,UAAY,SAAUrE,GACzC,GAAc,MAAVA,EACA,OAAO,EAEN,GAAc,MAAVA,EACL,OAAO,EAGP,MAAM,IAAIoE,MAAM,SAASE,OAAOtE,EAAO,qBAG/CwC,EAAa3C,UAAU0E,kBAAoB,SAAUC,EAAUC,EAAaC,EAASC,EAAQC,GACzF,OAAO1E,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAI8F,EAAkBC,EAASC,EAC/B,OAAO5D,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK+E,oBAClC,KAAK,EACDN,EAAG7B,OACH6B,EAAG9B,MAAQ,EACf,KAAK,EAED,OADA8B,EAAG5B,KAAKW,KAAK,CAAC,EAAG,EAAJ,CAAS,IACf,CAAC,EAAaxD,KAAK0E,QAAQc,kBAAkBC,EAAUC,EAAa1F,KAAK6E,UAAUoB,IAAKN,EAAS3F,KAAK6E,UAAUK,QAASU,EAAQC,IAC5I,KAAK,EAED,OADAC,EAAUrB,EAAG7B,OACN,CAAC,EAAa5C,KAAK0E,QAAQwB,yBAAyBT,EAASP,QAASY,EAAQK,SACzF,KAAK,EAED,MAAO,CAAC,EADE1B,EAAG7B,QAEjB,KAAK,EAGD,MAFAmD,EAAUtB,EAAG7B,QACboD,EAAUtC,EAAO0C,WAAWC,cAAcN,IAEhC,IAAIV,MAAMW,GAGV,IAAIX,MAAM,SAGxB,KAAK,EAAG,MAAO,CAAC,WAKhC5B,EAAa3C,UAAUwF,mBAAqB,SAAUb,EAAUc,GAC5D,OAAOpF,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAI8F,EACJ,OAAO1D,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK0E,QAAQ4B,mBAAmBb,EAAUzF,KAAK6E,UAAUK,QAASqB,IAC/F,KAAK,EAED,OADAT,EAAUrB,EAAG7B,OACN,CAAC,EAAa5C,KAAK0E,QAAQwB,yBAAyBT,EAASP,QAASY,EAAQK,SACzF,KAAK,EAED,MAAO,CAAC,EADE1B,EAAG7B,gBAMjCa,EAAa3C,UAAU0F,2BAA6B,WAChD,OAAOrF,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIyG,EAAMC,EACNC,EAAQ3G,KACZ,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAED,OADA8D,EAAO,GACA,CAAC,EAAazG,KAAK0E,QAAQ8B,2BAA2BxG,KAAK6E,UAAUK,UAChF,KAAK,EAUD,OATAwB,EAAWjC,EAAG7B,QACLgE,IAAG,SAAUC,GAClB,IAAK,IAAIC,EAAQ,EAAGA,EAAQD,EAAQtD,OAAQuD,IAAS,CACjD,IAAI9E,EAAS6E,EAAQC,GACrBnD,EAAOoD,KAAK/E,EAAZ2B,GACA,IAAIqD,EAAQL,EAAMjC,QAAQuC,YAAYjF,EAAOkF,MAAOP,EAAM9B,UAAUoB,KACpEQ,EAAKjD,KAAKwD,OAGX,CAAC,EAAc,CACdP,KAAMA,EACNC,SAAUA,YAM/BjD,EAzIuB,GA2IlC7C,EAAQ6C,aAAeA,G,iCCnLvB,IAAI1D,EAAmBC,MAAQA,KAAKD,kBAAqBE,OAAOC,OAAU,SAASC,EAAGC,EAAGC,EAAGC,QAC7EC,IAAPD,IAAkBA,EAAKD,GAC3BJ,OAAOO,eAAeL,EAAGG,EAAI,CAAEG,YAAY,EAAMC,IAAK,WAAa,OAAON,EAAEC,OAC1E,SAASF,EAAGC,EAAGC,EAAGC,QACTC,IAAPD,IAAkBA,EAAKD,GAC3BF,EAAEG,GAAMF,EAAEC,KAEVM,EAAgBX,MAAQA,KAAKW,cAAiB,SAASP,EAAGQ,GAC1D,IAAK,IAAIC,KAAKT,EAAa,YAANS,GAAoBZ,OAAOa,UAAUC,eAAeC,KAAKJ,EAASC,IAAId,EAAgBa,EAASR,EAAGS,IAE3HZ,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDN,EAAaO,EAAQ,KAAkBN,I,iCCXvC,IAAIb,EAAmBC,MAAQA,KAAKD,kBAAqBE,OAAOC,OAAU,SAASC,EAAGC,EAAGC,EAAGC,QAC7EC,IAAPD,IAAkBA,EAAKD,GAC3BJ,OAAOO,eAAeL,EAAGG,EAAI,CAAEG,YAAY,EAAMC,IAAK,WAAa,OAAON,EAAEC,OAC1E,SAASF,EAAGC,EAAGC,EAAGC,QACTC,IAAPD,IAAkBA,EAAKD,GAC3BF,EAAEG,GAAMF,EAAEC,KAEVM,EAAgBX,MAAQA,KAAKW,cAAiB,SAASP,EAAGQ,GAC1D,IAAK,IAAIC,KAAKT,EAAa,YAANS,GAAoBZ,OAAOa,UAAUC,eAAeC,KAAKJ,EAASC,IAAId,EAAgBa,EAASR,EAAGS,IAE3HZ,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDN,EAAaO,EAAQ,KAAsBN,GAC3CD,EAAaO,EAAQ,KAAsBN,I,iCCZ3CX,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQuG,kBAAe,EACvB,IAAIA,EAA8B,WAC9B,SAASA,KA2CT,OAzCAA,EAAaC,KAAO,SAAUC,GAC1BrH,KAAKqH,QAAUA,GAEnBpH,OAAOO,eAAe2G,EAAc,WAAY,CAC5CzG,IAAK,WACD,OAAOV,KAAKqH,QAAQC,UAExBC,IAAK,SAAUC,GACXxH,KAAKqH,QAAQC,SAAWE,GAE5B/G,YAAY,EACZqE,cAAc,IAElB7E,OAAOO,eAAe2G,EAAc,gBAAiB,CACjDzG,IAAK,WACD,OAAOV,KAAKqH,QAAQI,eAExBhH,YAAY,EACZqE,cAAc,IAElB7E,OAAOO,eAAe2G,EAAc,mBAAoB,CACpDzG,IAAK,WACD,OAAOV,KAAKqH,QAAQK,kBAExBjH,YAAY,EACZqE,cAAc,IAElB7E,OAAOO,eAAe2G,EAAc,eAAgB,CAChDzG,IAAK,WACD,OAAOV,KAAKqH,QAAQM,cAExBlH,YAAY,EACZqE,cAAc,IAElB7E,OAAOO,eAAe2G,EAAc,gBAAiB,CACjDzG,IAAK,WACD,OAAOV,KAAKqH,QAAQO,eAExBnH,YAAY,EACZqE,cAAc,IAEXqC,EA5CuB,GA8ClCvG,EAAQuG,aAAeA,G,iCChDvBlH,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQiH,wBAA0BjH,EAAQkH,WAAalH,EAAQmH,eAAiBnH,EAAQoH,cAAgBpH,EAAQqH,WAAarH,EAAQsH,SAAWtH,EAAQuH,qBAAkB,EAC1K,IAAIzE,EAASxC,EAAQ,IACrBN,EAAQuH,gBAAkB,CACtBC,UAAW,WACXC,gBAAiB,oFACjBC,QAAS,6BAETC,iBAAkB,oCAClBZ,aAAc,gCACda,aAAc,0DACdC,cAAe,+BACfC,cAAe,OACfC,kBAAmB,GACnBC,YAAa,KAEjBhI,EAAQsH,SAAW,CACf,CACIW,GAAI,EACJC,UAAW,EACXzE,KAAM,UACN0E,OAAQ,GACRC,aAAc,IAElB,CACIH,GAAI,EACJC,UAAW,EACXzE,KAAM,UACN0E,OAAQ,+BACRC,aAAc,0BAElB,CACIH,GAAI,EACJC,UAAW,EACXzE,KAAM,UACN0E,OAAQ,gCACRC,aAAc,0BAElB,CACIH,GAAI,EACJC,UAAW,EACXzE,KAAM,eACN0E,OAAQ,gCACRC,aAAc,0BAElB,CACIH,GAAI,EACJC,UAAW,EACXzE,KAAM,QACN0E,OAAQ,uBACRC,aAAc,2BAGtBpI,EAAQqH,WAAa,CACjB,CACI5D,KAAM,MACN4E,KAAMvF,EAAOI,UAAUoF,QAAQC,KAEnC,CACI9E,KAAM,OACN4E,KAAMvF,EAAOI,UAAUoF,QAAQE,OAGvCxI,EAAQoH,cAAgB,CACpB,CACI3D,KAAM,KACN4E,KAAMvF,EAAOI,UAAUuF,WAAWC,IAEtC,CACIjF,KAAM,OACN4E,KAAMvF,EAAOI,UAAUuF,WAAWE,MAEtC,CACIlF,KAAM,MACN4E,KAAMvF,EAAOI,UAAUuF,WAAWG,KAEtC,CACInF,KAAM,QACN4E,KAAMvF,EAAOI,UAAUuF,WAAWI,QAG1C7I,EAAQmH,eAAiB,CACrB,CACI1D,KAAM,UACN4E,KAAMvF,EAAOI,UAAU4F,cAAcC,QAAQC,YAEjD,CACIvF,KAAM,OACN4E,KAAMvF,EAAOI,UAAU4F,cAAcG,KAAKD,YAE9C,CACIvF,KAAM,OACN4E,KAAMvF,EAAOI,UAAU4F,cAAcI,MAAMF,YAE/C,CACIvF,KAAM,UACN4E,KAAMvF,EAAOI,UAAU4F,cAAcK,OAAOH,YAEhD,CACIvF,KAAM,aACN4E,KAAMvF,EAAOI,UAAU4F,cAAcM,UAAUJ,YAEnD,CACIvF,KAAM,MACN4E,KAAMvF,EAAOI,UAAU4F,cAAcO,IAAIL,YAE7C,CACIvF,KAAM,QACN4E,KAAMvF,EAAOI,UAAU4F,cAAcQ,YAAYN,aAGzDhJ,EAAQkH,WAAa,CACjBqC,QAAS,UACTC,KAAM,OACNC,IAAK,MACLC,IAAK,MACLC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,QAAS,UACTC,SAAU,WACVC,MAAO,QACPC,OAAQ,SACRC,UAAW,aACXC,OAAQ,SACRC,UAAW,aACXC,WAAY,cACZC,WAAY,eAEhBtK,EAAQiH,wBAA0B,CAC9BsD,OAAQzH,EAAOI,UAAUuF,WAAWC,GACpC8B,QAAS1H,EAAOI,UAAUoF,QAAQE,KAClCiC,OAAQ,K,kCCrIZ,YACA,IAAIlK,EAAanB,MAAQA,KAAKmB,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUV,GAAS,IAAMW,EAAKL,EAAUM,KAAKZ,IAAW,MAAOa,GAAKJ,EAAOI,IACpF,SAASC,EAASd,GAAS,IAAMW,EAAKL,EAAS,MAAUN,IAAW,MAAOa,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAJlB,IAAef,EAIae,EAAOC,KAAOR,EAAQO,EAAOf,QAJ1CA,EAIyDe,EAAOf,MAJhDA,aAAiBK,EAAIL,EAAQ,IAAIK,GAAE,SAAUG,GAAWA,EAAQR,OAITiB,KAAKP,EAAWI,GAClGH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,YAGlEO,EAAepC,MAAQA,KAAKoC,aAAgB,SAAUhB,EAASiB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOjD,OAAUyC,EACvJ,SAASM,EAAKG,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAIe,UAAU,mCAC3B,KAAOX,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARY,EAAG,GAASb,EAAC,OAAaa,EAAG,GAAKb,EAAC,SAAeC,EAAID,EAAC,SAAeC,EAAExB,KAAKuB,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAExB,KAAKuB,EAAGa,EAAG,KAAKnB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGY,EAAK,CAAS,EAARA,EAAG,GAAQZ,EAAEvB,QACzBmC,EAAG,IACP,KAAK,EAAG,KAAK,EAAGZ,EAAIY,EAAI,MACxB,KAAK,EAAc,OAAXV,EAAEC,QAAgB,CAAE1B,MAAOmC,EAAG,GAAInB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKV,EAAEI,IAAIQ,MAAOZ,EAAEG,KAAKS,MAAO,SACxC,QACI,KAAkBd,GAAZA,EAAIE,EAAEG,MAAYU,OAAS,GAAKf,EAAEA,EAAEe,OAAS,MAAkB,IAAVH,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEV,EAAI,EAAG,SACjG,GAAc,IAAVU,EAAG,MAAcZ,GAAMY,EAAG,GAAKZ,EAAE,IAAMY,EAAG,GAAKZ,EAAE,IAAM,CAAEE,EAAEC,MAAQS,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYV,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIY,EAAI,MAC7D,GAAIZ,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIU,KAAKJ,GAAK,MACvDZ,EAAE,IAAIE,EAAEI,IAAIQ,MAChBZ,EAAEG,KAAKS,MAAO,SAEtBF,EAAKf,EAAKrB,KAAKI,EAASsB,GAC1B,MAAOZ,GAAKsB,EAAK,CAAC,EAAGtB,GAAIS,EAAI,EAjBrB,QAiBoCD,EAAIE,EAAI,EACtD,GAAY,EAARY,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEnC,MAAOmC,EAAG,GAAKA,EAAG,QAAK,EAAQnB,MAAM,GArB9BL,CAAK,CAACsB,EAAGC,OAwB7DlD,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQ0K,gBAAa,EACrB,IAAIC,EAAWrK,EAAQ,KACnBsK,EAAStK,EAAQ,KACjBoK,EAA4B,WAC5B,SAASA,KA8FT,OA5FAA,EAAWG,SAAW,SAAUxK,GAC5B,MAAwB,kBAAVA,GAAsBA,aAAiByK,QAEzDJ,EAAWK,SAAW,SAAU1K,GAC5B,OAAQ2K,MAAMC,SAAS5K,KAAW6K,SAAS7K,IAE/CqK,EAAWS,mBAAqB,SAAU9K,GACtC,OAAKqK,EAAWG,SAASxK,KAKJ,OAAVA,QAA4BV,IAAVU,GAAwC,KAAjBA,EAAM+K,SAG9DV,EAAWW,gBAAkB,SAAUhL,EAAOiL,GAC1C,OAAOZ,EAAWS,mBAAmB9K,IAAUA,IAAUiL,GAE7DZ,EAAWa,QAAU,SAAUC,GAC3B,OAAO,IAAI5K,SAAQ,SAAUC,GAAW,OAAO4K,WAAW5K,EAAS2K,OAEvEd,EAAWgB,aAAe,SAAUC,GAChC,OAAOC,KAAKC,UAAUF,EAAM,KAAM,IAEtCjB,EAAWoB,aAAe,SAAUH,EAAMI,GAEtC,YADiB,IAAbA,IAAuBA,EAAW,QAC/B,IAAIC,WAAWC,EAAOC,KAAKP,EAAMI,KAE5CrB,EAAWyB,eAAiB,SAAUC,GAClC,OAAO7L,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAasK,MAAMD,IACnC,KAAK,EAAG,MAAO,CAAC,EAAevI,EAAG7B,OAAQsK,gBAK1D5B,EAAW6B,OAAS,SAAUC,EAAKC,GAC/B,OAAOC,KAAKC,MAAMD,KAAKH,UAAYE,EAAMD,EAAM,GAAKA,IAExD9B,EAAWkC,oBAAsB,SAAUC,EAASC,GAChD,IACI,GAAID,GAAWC,EACX,OAAOJ,KAAKC,OAAM,EAAIhC,EAASoC,SAASF,GAASG,KAAI,EAAIrC,EAASoC,SAASD,IAAOG,IAAI,KAAKC,YAGnG,MAAOC,IAEP,OAAO,GAEXzC,EAAW0C,iBAAmB,SAAUC,EAAOC,EAAKC,GAChD,OAAOb,KAAKF,IAAIE,KAAKF,IAAIa,EAAQC,EAAMC,EAAMD,GAAMD,IAEvD3C,EAAW8C,KAAO,WACd,OAAO,EAAI5C,EAAO6C,OAEtB/C,EAAWgD,WAAa,SAAUC,EAAOC,GACrC,IAAKD,IAAUC,GAAalD,EAAWS,mBAAmBwC,IAAUjD,EAAWS,mBAAmByC,GAC9F,OAAOD,EAEX,IACIE,EAAWD,EAAUE,WADT,KACiCF,EAAUG,UAAU,EAAGH,EAAUjL,QAAUiL,EAC5F,OAAOD,EAAMK,SAFG,KAEmBL,EAAQE,EAAWF,EAFtC,IAE0DE,GAE9EnD,EAAWuD,eAAiB,SAAU5N,GAClC,IAAI+L,EACJ,IACIA,EAAM,IAAI8B,IAAI7N,GAElB,MAAOyB,GACH,OAAO,EAEX,MAAwB,UAAjBsK,EAAI+B,UAAyC,WAAjB/B,EAAI+B,UAE3CzD,EAAW0D,eAAiB,SAAUC,EAAKC,GACvC,OAAID,GACIC,EAAYD,EAAI1L,OACT,GAAGgC,OAAO0J,EAAIN,UAAU,EAAGO,GAAY,OAG/CD,GAEX3D,EAAW6D,0BAA4B,SAAUF,EAAKG,EAAkBC,GACpE,GAAIJ,GACyBG,EAAmBC,EACnBJ,EAAI1L,OACzB,MAAO,GAAGgC,OAAO0J,EAAIN,UAAU,EAAGS,GAAmB,OAAO7J,OAAO0J,EAAIN,UAAUM,EAAI1L,OAAS8L,EAAgBJ,EAAI1L,SAG1H,OAAO0L,GAEJ3D,EA/FqB,GAiGhC1K,EAAQ0K,WAAaA,I,2DCzIrBrL,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQ0O,kBAAe,EACvB,IAAIC,EAAOrO,EAAQ,KACfoO,EAA8B,WAC9B,SAASA,KAQT,OANAA,EAAaE,SAAW,SAAUjD,GAC9B,OAAOgD,EAAKE,KAAKlD,EAAM,CAAEmD,GAAI,YAEjCJ,EAAaK,WAAa,SAAUpD,GAChC,OAAOgD,EAAKK,OAAOrD,EAAM,CAAEmD,GAAI,YAE5BJ,EATuB,GAWlC1O,EAAQ0O,aAAeA,G,iCCdvB,IAAIO,EAAa7P,MAAQA,KAAK6P,WAAe,WACzC,IAAIC,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgB7P,OAAOgQ,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUJ,EAAGC,GAAKD,EAAEG,UAAYF,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAInP,KAAKmP,EAAO/P,OAAOa,UAAUC,eAAeC,KAAKgP,EAAGnP,KAAIkP,EAAElP,GAAKmP,EAAEnP,KACzFiP,EAAcC,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAChB,GAAiB,oBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAI3M,UAAU,uBAAyBqI,OAAOsE,GAAK,iCAE7D,SAASI,IAAOpQ,KAAKqQ,YAAcN,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEjP,UAAkB,OAANkP,EAAa/P,OAAOC,OAAO8P,IAAMI,EAAGtP,UAAYkP,EAAElP,UAAW,IAAIsP,IAZ1C,GAe7CnQ,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQ0P,WAAa1P,EAAQ2P,mBAAgB,EAC7C,IAAIC,EAAWtP,EAAQ,KACnBuP,EAAKvP,EAAQ,IACbqP,EAA+B,SAAUG,GAEzC,SAASH,IACL,OAAkB,OAAXG,GAAmBA,EAAOvO,MAAMnC,KAAM2Q,YAAc3Q,KA0B/D,OA5BA6P,EAAUU,EAAeG,GAIzBH,EAAczP,UAAU8P,WAAa,WACjC5Q,KAAK6Q,KAAKJ,EAAG3M,UAAUgN,YAAYC,SAEvCR,EAAczP,UAAUkQ,sBAAwB,SAAUC,GACtDjR,KAAK6Q,KAAKJ,EAAG3M,UAAUgN,YAAYI,0BAA2BD,IAElEV,EAAczP,UAAUqQ,6BAA+B,SAAUC,GAC7DpR,KAAK6Q,KAAKJ,EAAG3M,UAAUgN,YAAYO,yBAA0BD,IAEjEb,EAAczP,UAAUwQ,wBAA0B,SAAUF,GACxDpR,KAAK6Q,KAAKJ,EAAG3M,UAAUgN,YAAYS,oBAAqBH,IAE5Db,EAAczP,UAAU0Q,iBAAmB,SAAUtM,EAASuM,GAC1DzR,KAAK6Q,KAAKJ,EAAG3M,UAAUgN,YAAYY,aAAcxM,EAASuM,IAE9DlB,EAAczP,UAAU6Q,kBAAoB,SAAUC,GAClD5R,KAAK6Q,KAAKJ,EAAG3M,UAAUgN,YAAYe,cAAeD,IAEtDrB,EAAczP,UAAUgR,gBAAkB,SAAUF,GAChD5R,KAAK6Q,KAAKJ,EAAG3M,UAAUgN,YAAYiB,YAAaH,IAEpDrB,EAAczP,UAAUkR,4BAA8B,SAAUC,EAAWC,GACvElS,KAAK6Q,KAAKJ,EAAG3M,UAAUgN,YAAYqB,wBAAyBF,EAAWC,IAEpE3B,EA7BwB,CA8BjCC,EAAS4B,cACXxR,EAAQ2P,cAAgBA,EACxB,IAAI8B,EAAU,IAAI9B,EAIlB3P,EAAQ0P,WAHS,WACb,OAAO+B,I,iCCrDXpS,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQ0R,YAAS,EACjB,IAAIA,EAAwB,WACxB,SAASA,KA2BT,OAzBAA,EAAOC,QAAU,SAAUC,EAAUC,EAAczM,GAC/C,GAAiB,OAAbwM,QAAkCjS,IAAbiS,EACrB,MAAIxM,EACM,IAAIX,MAAMW,GAGV,IAAIX,MAAM,8BAAgCoN,IAI5DH,EAAOI,oBAAsB,SAAUF,EAAUC,EAAczM,GAC3D,GAAiB,OAAbwM,QAAkCjS,IAAbiS,GAAoG,MAA5D,OAAbA,QAAkC,IAAbA,OAAsB,EAASA,EAASxG,QAC7G,MAAIhG,EACM,IAAIX,MAAMW,GAGV,IAAIX,MAAM,8BAAgCoN,IAI5DH,EAAOpD,UAAY,SAAUsD,EAAUC,EAAcvD,GACjD,GAAIsD,GAAYA,EAASjP,OAAS2L,EAC9B,MAAM,IAAI7J,MAAM,GAAGE,OAAOkN,EAAc,mCAAmClN,OAAO2J,KAGnFoD,EA5BiB,GA8B5B1R,EAAQ0R,OAASA,G,iCChCjBrS,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQ+R,kBAAe,EACvB,IAAIlC,EAAKvP,EAAQ,IACb0R,EAAM1R,EAAQ,GACdyR,EAA8B,WAC9B,SAASA,KAyBT,OAvBAA,EAAaE,WAAa,SAAUC,GAChC,IAAIC,EAAUD,EAKd,OAJKC,IAAWtC,EAAGnF,WAAWS,mBAAmBgH,KAC7CA,EAAUH,EAAIzL,aAAaQ,cAE/BoL,EAAUA,EAAQnE,SAAS,KAAOmE,EAAQpE,UAAU,EAAGoE,EAAQxP,OAAS,GAAKwP,GAGjFJ,EAAaK,cAAgB,SAAUC,EAAUH,GAC7C,IAAIC,EAAUJ,EAAaE,WAAWC,GACtC,OAAIC,IAAYJ,EAAaO,iBAClB,GAAG3N,OAAOwN,EAAS,aAAaxN,OAAO0N,GAE3C,GAAG1N,OAAOwN,EAAS,aAAaxN,OAAO0N,IAElDN,EAAaQ,SAAW,SAAUC,EAAKN,GACnC,IAAIC,EAAUJ,EAAaE,WAAWC,GACtC,OAAgBH,EAAaO,iBAClB,GAAG3N,OAAOwN,EAAS,QAAQxN,OAAO6N,IAIjDT,EAAaO,iBAAmB,sBACzBP,EA1BuB,GA4BlC/R,EAAQ+R,aAAeA,G,iCChCvB,IAAI9C,EAAa7P,MAAQA,KAAK6P,WAAe,WACzC,IAAIC,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgB7P,OAAOgQ,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUJ,EAAGC,GAAKD,EAAEG,UAAYF,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAInP,KAAKmP,EAAO/P,OAAOa,UAAUC,eAAeC,KAAKgP,EAAGnP,KAAIkP,EAAElP,GAAKmP,EAAEnP,KACzFiP,EAAcC,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAChB,GAAiB,oBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAI3M,UAAU,uBAAyBqI,OAAOsE,GAAK,iCAE7D,SAASI,IAAOpQ,KAAKqQ,YAAcN,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEjP,UAAkB,OAANkP,EAAa/P,OAAOC,OAAO8P,IAAMI,EAAGtP,UAAYkP,EAAElP,UAAW,IAAIsP,IAZ1C,GAezCjP,EAAanB,MAAQA,KAAKmB,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUV,GAAS,IAAMW,EAAKL,EAAUM,KAAKZ,IAAW,MAAOa,GAAKJ,EAAOI,IACpF,SAASC,EAASd,GAAS,IAAMW,EAAKL,EAAS,MAAUN,IAAW,MAAOa,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAJlB,IAAef,EAIae,EAAOC,KAAOR,EAAQO,EAAOf,QAJ1CA,EAIyDe,EAAOf,MAJhDA,aAAiBK,EAAIL,EAAQ,IAAIK,GAAE,SAAUG,GAAWA,EAAQR,OAITiB,KAAKP,EAAWI,GAClGH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,YAGlEO,EAAepC,MAAQA,KAAKoC,aAAgB,SAAUhB,EAASiB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOjD,OAAUyC,EACvJ,SAASM,EAAKG,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAIe,UAAU,mCAC3B,KAAOX,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARY,EAAG,GAASb,EAAC,OAAaa,EAAG,GAAKb,EAAC,SAAeC,EAAID,EAAC,SAAeC,EAAExB,KAAKuB,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAExB,KAAKuB,EAAGa,EAAG,KAAKnB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGY,EAAK,CAAS,EAARA,EAAG,GAAQZ,EAAEvB,QACzBmC,EAAG,IACP,KAAK,EAAG,KAAK,EAAGZ,EAAIY,EAAI,MACxB,KAAK,EAAc,OAAXV,EAAEC,QAAgB,CAAE1B,MAAOmC,EAAG,GAAInB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKV,EAAEI,IAAIQ,MAAOZ,EAAEG,KAAKS,MAAO,SACxC,QACI,KAAkBd,GAAZA,EAAIE,EAAEG,MAAYU,OAAS,GAAKf,EAAEA,EAAEe,OAAS,MAAkB,IAAVH,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEV,EAAI,EAAG,SACjG,GAAc,IAAVU,EAAG,MAAcZ,GAAMY,EAAG,GAAKZ,EAAE,IAAMY,EAAG,GAAKZ,EAAE,IAAM,CAAEE,EAAEC,MAAQS,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYV,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIY,EAAI,MAC7D,GAAIZ,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIU,KAAKJ,GAAK,MACvDZ,EAAE,IAAIE,EAAEI,IAAIQ,MAChBZ,EAAEG,KAAKS,MAAO,SAEtBF,EAAKf,EAAKrB,KAAKI,EAASsB,GAC1B,MAAOZ,GAAKsB,EAAK,CAAC,EAAGtB,GAAIS,EAAI,EAjBrB,QAiBoCD,EAAIE,EAAI,EACtD,GAAY,EAARY,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEnC,MAAOmC,EAAG,GAAKA,EAAG,QAAK,EAAQnB,MAAM,GArB9BL,CAAK,CAACsB,EAAGC,OAwB7DlD,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQyS,gBAAkBzS,EAAQ0S,aAAe1S,EAAQ2S,iBAAmB3S,EAAQ4S,cAAgB5S,EAAQ6S,cAAW,EACvH,IAAIC,EAAKxS,EAAQ,KACbyS,EAAezS,EAAQ,KACvBuS,EACA,aAIJ7S,EAAQ6S,SAAWA,EACnB,IAAID,EAA+B,SAAU9C,GAEzC,SAAS8C,IACL,OAAkB,OAAX9C,GAAmBA,EAAOvO,MAAMnC,KAAM2Q,YAAc3Q,KAiB/D,OAnBA6P,EAAU2D,EAAe9C,GAIzB8C,EAAc1S,UAAU8S,cAAgB,SAAUC,EAAMlH,GAEpD,YADiB,IAAbA,IAAuBA,EAAW,QAC/BxL,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,MAAO,CAAC,EAAcjD,QAAQC,QAAQiS,EAAGI,aAAaD,EAAMlH,YAIxE6G,EAAc1S,UAAUiT,eAAiB,SAAUF,EAAMtH,EAAMI,GAC3D,OAAOxL,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,MAAO,CAAC,EAAcjD,QAAQC,QAAQiS,EAAGM,cAAcH,EAAMtH,EAAMI,YAIxE6G,EApBwB,CAqBjCC,GACF7S,EAAQ4S,cAAgBA,EACxB,IAAIS,EAAgB,IAAIT,EAIxB5S,EAAQ2S,iBAHe,WACnB,OAAOU,GAGX,IAAIX,EAA8B,SAAU5C,GAExC,SAAS4C,IACL,OAAkB,OAAX5C,GAAmBA,EAAOvO,MAAMnC,KAAM2Q,YAAc3Q,KA6B/D,OA/BA6P,EAAUyD,EAAc5C,GAIxB4C,EAAaxS,UAAU8S,cAAgB,SAAUC,EAAMlH,GAEnD,YADiB,IAAbA,IAAuBA,EAAW,QAC/BxL,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIkU,EACJ,OAAO9R,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,GAAa,EAAIgR,EAAahG,SAASkG,IACvD,KAAK,EAED,OADAK,EAAWzP,EAAG7B,OAEL,WADD+J,EAEO,CAAC,EAAcuH,EAASC,eAExB,CAAC,EAAcD,EAASE,gBAO3Dd,EAAaxS,UAAUiT,eAAiB,SAAUF,EAAMtH,EAAMI,GAC1D,OAAOxL,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,MAAO,CAAC,UAIb6O,EAhCuB,CAiChCG,GACF7S,EAAQ0S,aAAeA,EACvB,IAAIe,EAAe,IAAIf,EAIvB1S,EAAQyS,gBAHc,WAClB,OAAOgB,I,iCC9HXpU,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQ0T,gBAAa,EACrB,IAAIC,EAAWrT,EAAQ,KACnBuP,EAAKvP,EAAQ,IACboT,EAA4B,WAC5B,SAASA,KAmCT,OAjCAA,EAAWE,UAAY,SAAUC,EAAMC,EAAOC,GAC1C,IAAKA,IAAUF,IAASC,EACpB,OAAOC,EAEX,OAAQF,GACJ,KAAKhE,EAAG3M,UAAUuF,WAAWC,GACzB,OAAO,EAAIiL,EAASnJ,SAASuJ,GAAO,SAAU9T,GAAK,OAAO+T,OAAO/T,EAAEgI,MAAQ6L,IAAUjE,EAAG3M,UAAUoF,QAAQC,IAAM,MAAQ,QAC5H,KAAKsH,EAAG3M,UAAUuF,WAAWE,KACzB,OAAO,EAAIgL,EAASnJ,SAASuJ,GAAO,SAAU9T,GAAK,OAAOA,EAAEgU,OAASH,IAAUjE,EAAG3M,UAAUoF,QAAQC,IAAM,MAAQ,QACtH,KAAKsH,EAAG3M,UAAUuF,WAAWG,IACzB,OAAOmL,EAAMG,QAAO,SAAUhT,GAAK,QAASA,EAAEuI,KAAOvI,EAAEuI,IAAIzE,OAAOmP,GAAG,MAAON,MAAK,SAAUO,EAAGhF,GAC1F,IAAIiF,EAAIC,EAAIC,EAAIC,EACZ3Q,EAA4E,QAAtEyQ,EAAsB,QAAhBD,EAAKD,EAAE3K,WAAwB,IAAP4K,OAAgB,EAASA,EAAGrP,cAA2B,IAAPsP,EAAgBA,EAAK,IAAIzE,EAAG3M,UAAUC,iBAAiB,GAC3IsR,EAA4E,QAAtED,EAAsB,QAAhBD,EAAKnF,EAAE3F,WAAwB,IAAP8K,OAAgB,EAASA,EAAGvP,cAA2B,IAAPwP,EAAgBA,EAAK,IAAI3E,EAAG3M,UAAUC,iBAAiB,GAC/I,OAAI2Q,IAAUjE,EAAG3M,UAAUoF,QAAQC,IACxB1E,EAAGsQ,GAAGM,GAAM,GAAK,EAErB5Q,EAAGsQ,GAAGM,IAAO,EAAI,KAEhC,KAAK5E,EAAG3M,UAAUuF,WAAWI,MACzB,OAAOkL,EAAMG,QAAO,SAAUhT,GAAK,QAASA,EAAEwT,OAASxT,EAAEwT,MAAMC,UAAUR,GAAG,MAAON,MAAK,SAAUO,EAAGhF,GACjG,IAAIiF,EAAIC,EAAIC,EAAIC,EACZ3Q,EAAiF,QAA3EyQ,EAAwB,QAAlBD,EAAKD,EAAEM,aAA0B,IAAPL,OAAgB,EAASA,EAAGM,iBAA8B,IAAPL,EAAgBA,EAAK,IAAIzE,EAAG3M,UAAUC,iBAAiB,GAChJsR,EAAiF,QAA3ED,EAAwB,QAAlBD,EAAKnF,EAAEsF,aAA0B,IAAPH,OAAgB,EAASA,EAAGI,iBAA8B,IAAPH,EAAgBA,EAAK,IAAI3E,EAAG3M,UAAUC,iBAAiB,GACpJ,OAAI2Q,IAAUjE,EAAG3M,UAAUoF,QAAQC,IACxB1E,EAAGsQ,GAAGM,GAAM,GAAK,EAErB5Q,EAAGsQ,GAAGM,IAAO,EAAI,KAEhC,QACI,OAAOV,IAGZL,EApCqB,GAsChC1T,EAAQ0T,WAAaA,G,iCC1CrBrU,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQwF,gBAAa,EACrB,IAAIqK,EAAKvP,EAAQ,IACbkF,EAA4B,WAC5B,SAASA,KA+CT,OA7CAA,EAAWC,cAAgB,SAAUkG,GACjC,IAAI9H,EACA+Q,EAAiB,iFACrB,GAAIjJ,EAAM,CACNkJ,QAAQC,IAAInJ,GACZ,IAAIvG,OAAU,EA0Bd,OAzBKyK,EAAGnF,WAAWG,SAASc,GAuBxBvG,EAAUuG,EAtBNA,EAAKvG,QACLA,EAAUuG,EAAKvG,SAEY,QAArBvB,EAAK8H,EAAKwB,aAA0B,IAAPtJ,OAAgB,EAASA,EAAGuB,SAC/DA,EAAUuG,EAAKwB,MAAM/H,QAEhBuG,EAAKoJ,cAEN3P,EADAuG,EAAKoJ,cAAcpS,OAAS,EAClBgJ,EAAKoJ,cAAc,GAAG3P,QAGtBwP,EAKE,QADhBxP,EAAUwG,KAAKC,UAAUF,MAErBvG,EAAUwP,GAOlBxP,EAAQzC,OAAS,IACVyC,EAAQ4P,OAAO,EAAG,KAAO,MAE7B5P,EAEX,OAAOwP,GAEXpP,EAAWyP,aAAe,SAAUC,GAChC,IAAIrR,EACJ,OAAKqR,EAGEA,EAAOC,eAA6C,QAA7BtR,EAAKuR,UAAUC,gBAA6B,IAAPxR,EAAgBA,EAAK,SAF7E,KAIR2B,EAhDqB,GAkDhCxF,EAAQwF,WAAaA,G,iCCrDrB,IAAI8P,EAAiBlW,MAAQA,KAAKkW,eAAkB,SAAUxG,EAAI5C,EAAMqJ,GACpE,GAAIA,GAA6B,IAArBxF,UAAUpN,OAAc,IAAK,IAA4B6S,EAAxBC,EAAI,EAAGC,EAAIxJ,EAAKvJ,OAAY8S,EAAIC,EAAGD,KACxED,GAAQC,KAAKvJ,IACRsJ,IAAIA,EAAKjG,MAAMrP,UAAUyV,MAAMvV,KAAK8L,EAAM,EAAGuJ,IAClDD,EAAGC,GAAKvJ,EAAKuJ,IAGrB,OAAO3G,EAAGnK,OAAO6Q,GAAMjG,MAAMrP,UAAUyV,MAAMvV,KAAK8L,KAEtD7M,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQgD,UAAYhD,EAAQ4V,sBAAwB5V,EAAQ6V,cAAgB7V,EAAQ8V,mBAAgB,EACpG,IAAI9D,EAAM1R,EAAQ,GACdwV,EACA,SAAuBtP,GACnBnH,OAAO0W,OAAO3W,KAAMoH,IAI5BxG,EAAQ8V,cAAgBA,EACxB,IAAIE,EAAO,aACPH,EAA+B,WAC/B,SAASA,KAyDT,OAvDAxW,OAAOO,eAAeiW,EAAc3V,UAAW,YAAa,CACxDJ,IAAK,WACD,OAAOkS,EAAIzL,aAAaS,eAE5BnH,YAAY,EACZqE,cAAc,IAElB7E,OAAOO,eAAeiW,EAAc3V,UAAW,QAAS,CACpDJ,IAAK,WACD,OAAIV,KAAK6W,UACEpB,QAAQqB,MAAMC,KAAKtB,SAGnBmB,GAGfnW,YAAY,EACZqE,cAAc,IAElB7E,OAAOO,eAAeiW,EAAc3V,UAAW,OAAQ,CACnDJ,IAAK,WACD,OAAIV,KAAK6W,UACEpB,QAAQ1O,KAAKgQ,KAAKtB,SAGlBmB,GAGfnW,YAAY,EACZqE,cAAc,IAElB7E,OAAOO,eAAeiW,EAAc3V,UAAW,OAAQ,CACnDJ,IAAK,WACD,OAAIV,KAAK6W,UACEpB,QAAQuB,KAAKD,KAAKtB,SAGlBmB,GAGfnW,YAAY,EACZqE,cAAc,IAElB7E,OAAOO,eAAeiW,EAAc3V,UAAW,QAAS,CACpDJ,IAAK,WACD,OAAIV,KAAK6W,UACEpB,QAAQ1H,MAAMgJ,KAAKtB,SAGnBmB,GAGfnW,YAAY,EACZqE,cAAc,IAEX2R,EA1DwB,GA4DnC7V,EAAQ6V,cAAgBA,EACxB,IAAID,EAAuC,WACvC,SAASA,KAsIT,OApIAvW,OAAOO,eAAegW,EAAsB1V,UAAW,YAAa,CAChEJ,IAAK,WACD,OAAOkS,EAAIzL,aAAaS,eAE5BnH,YAAY,EACZqE,cAAc,IAElB0R,EAAsB1V,UAAUmW,UAAY,SAAUhO,GAClD,MAAO,IAAI1D,OAAO0D,EAAM,KAAK1D,QAAO,IAAI2R,MAAOC,qBAAsB,MAEzEX,EAAsB1V,UAAUsW,oBAAsB,SAAUnO,GAE5D,IADA,IAAIoO,EAAO,GACFC,EAAK,EAAGA,EAAK3G,UAAUpN,OAAQ+T,IACpCD,EAAKC,EAAK,GAAK3G,UAAU2G,GAE7B,IAAIC,EAAQ,SAAUzV,GAClB,OAAI8Q,EAAItH,WAAWG,SAAS3J,GACjBA,EAEFA,aAAauD,MACXvD,EAAEkE,QAEN4M,EAAItH,WAAWgB,aAAaxK,IAEnCE,EAAS,IAAI0U,EAAc,CAC3Bc,OAAQxX,KAAKiX,UAAUhO,GACvBoO,KAAe,OAATA,QAA0B,IAATA,OAAkB,EAASA,EAAKlT,KAAI,SAAUrC,GAAK,OAAOqO,MAAMsH,QAAQ3V,GAAKA,EAAEqC,KAAI,SAAUuT,GAAM,OAAOH,EAAMG,MAAUH,EAAMzV,QAE3J,OAAOE,GAEX/B,OAAOO,eAAegW,EAAsB1V,UAAW,QAAS,CAC5DJ,IAAK,WACD,IAAIiG,EAAQ3G,KACZ,OAAIA,KAAK6W,UACE,WAGH,IAFA,IAAIpS,EACA4S,EAAO,GACFC,EAAK,EAAGA,EAAK3G,UAAUpN,OAAQ+T,IACpCD,EAAKC,GAAM3G,UAAU2G,GAEzB,IAAItV,EAAS2E,EAAMyQ,oBAAoB,QAASC,GAChD,OAAQ5S,EAAKkT,SAAS7W,UAAUiW,MAAM/V,KAAKmB,MAAMsC,EAAIyR,EAAc,CAACT,QAAQqB,MAAOrB,QAASzT,EAAOwV,QAASH,GAAM,KAI/G,WAEH,IADA,IAAIA,EAAO,GACFC,EAAK,EAAGA,EAAK3G,UAAUpN,OAAQ+T,IACpCD,EAAKC,GAAM3G,UAAU2G,GAEzB,OAAOV,IAInBnW,YAAY,EACZqE,cAAc,IAElB7E,OAAOO,eAAegW,EAAsB1V,UAAW,OAAQ,CAC3DJ,IAAK,WACD,IAAIiG,EAAQ3G,KACZ,OAAIA,KAAK6W,UACE,WAGH,IAFA,IAAIpS,EACA4S,EAAO,GACFC,EAAK,EAAGA,EAAK3G,UAAUpN,OAAQ+T,IACpCD,EAAKC,GAAM3G,UAAU2G,GAEzB,IAAItV,EAAS2E,EAAMyQ,oBAAoB,OAAQC,GAC/C,OAAQ5S,EAAKkT,SAAS7W,UAAUiW,MAAM/V,KAAKmB,MAAMsC,EAAIyR,EAAc,CAACT,QAAQ1O,KAAM0O,QAASzT,EAAOwV,QAASH,GAAM,KAI9G,WAEH,IADA,IAAIA,EAAO,GACFC,EAAK,EAAGA,EAAK3G,UAAUpN,OAAQ+T,IACpCD,EAAKC,GAAM3G,UAAU2G,GAEzB,OAAOV,IAInBnW,YAAY,EACZqE,cAAc,IAElB7E,OAAOO,eAAegW,EAAsB1V,UAAW,OAAQ,CAC3DJ,IAAK,WACD,IAAIiG,EAAQ3G,KACZ,OAAIA,KAAK6W,UACE,WAGH,IAFA,IAAIpS,EACA4S,EAAO,GACFC,EAAK,EAAGA,EAAK3G,UAAUpN,OAAQ+T,IACpCD,EAAKC,GAAM3G,UAAU2G,GAEzB,IAAItV,EAAS2E,EAAMyQ,oBAAoB,OAAQC,GAC/C,OAAQ5S,EAAKkT,SAAS7W,UAAUiW,MAAM/V,KAAKmB,MAAMsC,EAAIyR,EAAc,CAACT,QAAQuB,KAAMvB,QAASzT,EAAOwV,QAASH,GAAM,KAI9G,WAEH,IADA,IAAIA,EAAO,GACFC,EAAK,EAAGA,EAAK3G,UAAUpN,OAAQ+T,IACpCD,EAAKC,GAAM3G,UAAU2G,GAEzB,OAAOV,IAInBnW,YAAY,EACZqE,cAAc,IAElB7E,OAAOO,eAAegW,EAAsB1V,UAAW,QAAS,CAC5DJ,IAAK,WACD,IAAIiG,EAAQ3G,KACZ,OAAO,WAGH,IAFA,IAAIyE,EACA4S,EAAO,GACFC,EAAK,EAAGA,EAAK3G,UAAUpN,OAAQ+T,IACpCD,EAAKC,GAAM3G,UAAU2G,IAEX,OAATD,QAA0B,IAATA,OAAkB,EAASA,EAAK9T,QAAU,IACvDqP,EAAItH,WAAWG,SAAS4L,EAAK,KAC9BA,EAAK7T,KAAK,+CAGlB,IAAIxB,EAAS2E,EAAMyQ,oBAAoB,QAASC,GAChD,OAAQ5S,EAAKkT,SAAS7W,UAAUiW,MAAM/V,KAAKmB,MAAMsC,EAAIyR,EAAc,CAACT,QAAQ1H,MAAO0H,QAASzT,EAAOwV,QAASH,GAAM,MAG1H5W,YAAY,EACZqE,cAAc,IAEX0R,EAvIgC,GAyI3C5V,EAAQ4V,sBAAwBA,EAChC,IAAI7S,EAAS,IAAI6S,EAIjB5V,EAAQgD,UAHQ,WACZ,OAAOD,I,iCC7NX,IAAIxC,EAAanB,MAAQA,KAAKmB,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUV,GAAS,IAAMW,EAAKL,EAAUM,KAAKZ,IAAW,MAAOa,GAAKJ,EAAOI,IACpF,SAASC,EAASd,GAAS,IAAMW,EAAKL,EAAS,MAAUN,IAAW,MAAOa,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAJlB,IAAef,EAIae,EAAOC,KAAOR,EAAQO,EAAOf,QAJ1CA,EAIyDe,EAAOf,MAJhDA,aAAiBK,EAAIL,EAAQ,IAAIK,GAAE,SAAUG,GAAWA,EAAQR,OAITiB,KAAKP,EAAWI,GAClGH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,YAGlEO,EAAepC,MAAQA,KAAKoC,aAAgB,SAAUhB,EAASiB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOjD,OAAUyC,EACvJ,SAASM,EAAKG,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAIe,UAAU,mCAC3B,KAAOX,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARY,EAAG,GAASb,EAAC,OAAaa,EAAG,GAAKb,EAAC,SAAeC,EAAID,EAAC,SAAeC,EAAExB,KAAKuB,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAExB,KAAKuB,EAAGa,EAAG,KAAKnB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGY,EAAK,CAAS,EAARA,EAAG,GAAQZ,EAAEvB,QACzBmC,EAAG,IACP,KAAK,EAAG,KAAK,EAAGZ,EAAIY,EAAI,MACxB,KAAK,EAAc,OAAXV,EAAEC,QAAgB,CAAE1B,MAAOmC,EAAG,GAAInB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKV,EAAEI,IAAIQ,MAAOZ,EAAEG,KAAKS,MAAO,SACxC,QACI,KAAkBd,GAAZA,EAAIE,EAAEG,MAAYU,OAAS,GAAKf,EAAEA,EAAEe,OAAS,MAAkB,IAAVH,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEV,EAAI,EAAG,SACjG,GAAc,IAAVU,EAAG,MAAcZ,GAAMY,EAAG,GAAKZ,EAAE,IAAMY,EAAG,GAAKZ,EAAE,IAAM,CAAEE,EAAEC,MAAQS,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYV,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIY,EAAI,MAC7D,GAAIZ,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIU,KAAKJ,GAAK,MACvDZ,EAAE,IAAIE,EAAEI,IAAIQ,MAChBZ,EAAEG,KAAKS,MAAO,SAEtBF,EAAKf,EAAKrB,KAAKI,EAASsB,GAC1B,MAAOZ,GAAKsB,EAAK,CAAC,EAAGtB,GAAIS,EAAI,EAjBrB,QAiBoCD,EAAIE,EAAI,EACtD,GAAY,EAARY,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEnC,MAAOmC,EAAG,GAAKA,EAAG,QAAK,EAAQnB,MAAM,GArB9BL,CAAK,CAACsB,EAAGC,OAwB7DlD,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQgX,eAAY,EACpB,IAAIA,EAA2B,WAC3B,SAASA,KAgBT,OAbAA,EAAUC,aAAe,SAAUC,EAAIC,EAASC,GAE5C,YADgB,IAAZD,IAAsBA,EAAU,GAC7B5W,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa,IAAInB,SAAQ,SAAUC,GAAW,OAAO4K,WAAW5K,EAAyB,KAAf,EAAIsW,QAC9F,KAAK,EAED,OADAtT,EAAG7B,OACI,CAAC,EAAemV,EAAgCD,IAAKG,OAAM,SAAUlK,GAAS,OAAO6J,EAAUC,aAAaC,EAAKC,EAAU,EAAIhK,MAArGvM,QAAQE,OAAOsW,YAK7DJ,EAjBoB,GAmB/BhX,EAAQgX,UAAYA,G,iCCzDpB,IAAIzW,EAAanB,MAAQA,KAAKmB,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUV,GAAS,IAAMW,EAAKL,EAAUM,KAAKZ,IAAW,MAAOa,GAAKJ,EAAOI,IACpF,SAASC,EAASd,GAAS,IAAMW,EAAKL,EAAS,MAAUN,IAAW,MAAOa,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAJlB,IAAef,EAIae,EAAOC,KAAOR,EAAQO,EAAOf,QAJ1CA,EAIyDe,EAAOf,MAJhDA,aAAiBK,EAAIL,EAAQ,IAAIK,GAAE,SAAUG,GAAWA,EAAQR,OAITiB,KAAKP,EAAWI,GAClGH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,YAGlEO,EAAepC,MAAQA,KAAKoC,aAAgB,SAAUhB,EAASiB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOjD,OAAUyC,EACvJ,SAASM,EAAKG,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAIe,UAAU,mCAC3B,KAAOX,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARY,EAAG,GAASb,EAAC,OAAaa,EAAG,GAAKb,EAAC,SAAeC,EAAID,EAAC,SAAeC,EAAExB,KAAKuB,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAExB,KAAKuB,EAAGa,EAAG,KAAKnB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGY,EAAK,CAAS,EAARA,EAAG,GAAQZ,EAAEvB,QACzBmC,EAAG,IACP,KAAK,EAAG,KAAK,EAAGZ,EAAIY,EAAI,MACxB,KAAK,EAAc,OAAXV,EAAEC,QAAgB,CAAE1B,MAAOmC,EAAG,GAAInB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKV,EAAEI,IAAIQ,MAAOZ,EAAEG,KAAKS,MAAO,SACxC,QACI,KAAkBd,GAAZA,EAAIE,EAAEG,MAAYU,OAAS,GAAKf,EAAEA,EAAEe,OAAS,MAAkB,IAAVH,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEV,EAAI,EAAG,SACjG,GAAc,IAAVU,EAAG,MAAcZ,GAAMY,EAAG,GAAKZ,EAAE,IAAMY,EAAG,GAAKZ,EAAE,IAAM,CAAEE,EAAEC,MAAQS,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYV,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIY,EAAI,MAC7D,GAAIZ,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIU,KAAKJ,GAAK,MACvDZ,EAAE,IAAIE,EAAEI,IAAIQ,MAChBZ,EAAEG,KAAKS,MAAO,SAEtBF,EAAKf,EAAKrB,KAAKI,EAASsB,GAC1B,MAAOZ,GAAKsB,EAAK,CAAC,EAAGtB,GAAIS,EAAI,EAjBrB,QAiBoCD,EAAIE,EAAI,EACtD,GAAY,EAARY,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEnC,MAAOmC,EAAG,GAAKA,EAAG,QAAK,EAAQnB,MAAM,GArB9BL,CAAK,CAACsB,EAAGC,OAwB7DlD,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQsX,UAAO,EACf,IAAIA,EAAsB,WACtB,SAASA,EAAKC,EAAMC,GAGhB,OAFApY,KAAKqY,MAAQF,EACbnY,KAAKsY,cAAgBF,EACdpY,KA0CX,OAxCAkY,EAAKpX,UAAUyX,KAAO,WAClB,IAAI5R,EAAQ3G,KACZA,KAAKwY,WAAanM,YAAW,WAAc,OAAOlL,EAAUwF,OAAO,OAAQ,GAAQ,WAC/E,OAAOvE,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EACD,OAAK3C,KAAKqY,MAIH,CAAC,EAAarY,KAAKqY,UAHtBrY,KAAKyY,UACE,CAAC,IAGhB,KAAK,EACD,OAAMhU,EAAG7B,QAIT5C,KAAKuY,OACE,CAAC,KAJJvY,KAAKyY,UACE,CAAC,aAMrBzY,KAAKsY,gBAEhBJ,EAAKpX,UAAU2X,QAAU,WACrBzY,KAAK0Y,WAAa1Y,KAAK0Y,aAE3BR,EAAKpX,UAAU6X,MAAQ,SAAUC,GAC7B5Y,KAAK0Y,UAAYE,EACb5Y,KAAKwY,YAGTxY,KAAKuY,QAETL,EAAKpX,UAAU+X,KAAO,WAClB7Y,KAAKyY,UACAzY,KAAKwY,aAGVM,OAAOC,aAAa/Y,KAAKwY,YACzBxY,KAAKwY,gBAAajY,IAEf2X,EA9Ce,GAgD1BtX,EAAQsX,KAAOA,G,iCCtFfjY,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQoY,eAAY,EACpB,IAAIC,EAAiB/X,EAAQ,KACzB0R,EAAM1R,EAAQ,GACd8X,EAA2B,WAC3B,SAASA,KA2BT,OAzBAA,EAAUE,eAAiB,SAAUC,EAAIC,EAAeC,GACpD,OAAOF,EAAGvL,IAAI,IAAIqL,EAAeK,UAAU,MAAMC,IAAIH,IAAgBI,cAAcH,EAAUJ,EAAeK,UAAUG,aAE1HT,EAAUU,gBAAkB,SAAUP,EAAIC,EAAeC,EAAUM,QAC7C,IAAdA,IAAwBA,EAAY,IACxC,IAAIC,EAAUZ,EAAUE,eAAeC,EAAIC,EAAeC,GAC1D,GAAIO,EAAQxU,IAAI,GACZ,MAAO,KAEX,IAAIyU,EAAYD,EAAQE,WACxB,OAAIH,GAAaE,EAAUtW,OAChBsW,EAEJA,EAAUlL,UAAU,EAAGgL,GAAa,OAE/CX,EAAUe,WAAa,SAAUZ,GAC7B,OAAOH,EAAUU,gBAAgBP,EAAIvG,EAAIzK,gBAAgBQ,kBAAmB,IAEhFqQ,EAAUgB,eAAiB,SAAUb,GACjC,OAAOH,EAAUE,eAAeC,EAAIvG,EAAIzK,gBAAgBQ,kBAAmBiK,EAAIzK,gBAAgBQ,mBAAmBmR,YAEtHd,EAAUiB,kBAAoB,SAAUd,GACpC,IAAIS,EAAUZ,EAAUE,eAAeC,EAAIvG,EAAIzK,gBAAgBQ,kBAAmBiK,EAAIzK,gBAAgBQ,mBACtG,MAAO,GAAGpD,OAAOqU,EAAQE,WAAY,MAAMvU,OAAOqN,EAAIzK,gBAAgBO,gBAEnEsQ,EA5BoB,GA8B/BpY,EAAQoY,UAAYA,G,iCClCpB/Y,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQsZ,mBAAgB,EACxB,IAAIzJ,EAAKvP,EAAQ,IACb0R,EAAM1R,EAAQ,GACdgZ,EAA+B,WAC/B,SAASA,KA8FT,OA5FAja,OAAOO,eAAe0Z,EAAe,mBAAoB,CACrDxZ,IAAK,WACD,OAAO,IAAI+P,EAAG3M,UAAUC,iBAAiB,MAE7CtD,YAAY,EACZqE,cAAc,IAElBoV,EAAcC,YAAc,SAAUrE,GAClC,IAAIrR,EACJ,OAAyD,QAAjDA,EAAKyV,EAAcE,iBAAiBtE,UAA4B,IAAPrR,EAAgBA,EAAKyV,EAAcG,kBAExGH,EAAcE,iBAAmB,SAAUtE,GACvC,OAAKA,GAAWrF,EAAGnF,WAAWS,mBAAmB+J,KAAYrF,EAAGnF,WAAWK,SAASmK,GACzE,KAEJ,IAAIrF,EAAG3M,UAAUC,iBAAiB+R,IAE7CoE,EAAcI,UAAY,SAAUrZ,GAChC,OAAIwP,EAAGnF,WAAWS,mBAAmB9K,IAAUA,IAAU2R,EAAIzK,gBAAgBK,aAClE,KAEJvH,GAEXiZ,EAAcK,YAAc,SAAUC,GAClC,OAAIA,EACOlN,KAAKC,MAAMiN,EAAKC,UAAY,KAAM7Q,WAEtC,KAEXsQ,EAAcQ,YAAc,SAAU9I,GAClC,IAAInN,EAAI4Q,EAAIJ,EAAIC,EAChB,MAAO,CACHyF,WAAwC,QAA3BlW,EAAKmN,EAAM+I,kBAA+B,IAAPlW,EAAgBA,EAAKgM,EAAG3M,UAAU8W,UAAUC,UAC5FhS,GAAwB,QAAnBwM,EAAKzD,EAAM/I,UAAuB,IAAPwM,EAAgBA,EAAK,GAAG9P,OAAOqM,EAAMkJ,iBAAkB,KAAKvV,OAAOqM,EAAMmJ,mBAAoB,KAAKxV,OAAOqM,EAAMoJ,WAC/IF,iBAAkBlJ,EAAMkJ,iBACxBC,mBAAoBb,EAAcC,YAAYvI,EAAMmJ,oBACpD9D,UAAWiD,EAAcC,YAAYvI,EAAMqF,WAC3C+D,UAAWpG,OAAOhD,EAAMoJ,WACxBC,OAAQrJ,EAAMqJ,OACdrV,OAAQsU,EAAcC,YAAYvI,EAAMhM,QACxCsV,YAAmE,QAArDjG,EAAKiF,EAAcI,UAAU1I,EAAMsJ,oBAAiC,IAAPjG,EAAgBA,EAAK,GAChGqF,UAA+D,QAAnDpF,EAAKgF,EAAcI,UAAU1I,EAAM0I,kBAA+B,IAAPpF,EAAgBA,EAAK,KAGpGgF,EAAciB,WAAa,SAAUpU,GACjC,OAAKA,EAGE,CACH8B,GAAI9B,EAAK8B,GACTuS,MAAOrU,EAAKqU,MACZ/Q,IAAK6P,EAAcmB,YAAYtU,EAAKsD,IAAKtD,EAAK8B,IAC9CyM,MAAO4E,EAAcoB,cAAcvU,EAAKuO,MAAOvO,EAAK8B,KAN7C,MASfqR,EAAcmB,YAAc,SAAUhR,EAAKkR,GACvC,IAAI9W,EACJ,OAAK4F,EAGE,CACHsQ,WAAsC,QAAzBlW,EAAK4F,EAAIsQ,kBAA+B,IAAPlW,EAAgBA,EAAKgM,EAAG3M,UAAU8W,UAAUY,UAC1FD,UAAWrB,EAAcC,YAA0B,OAAdoB,QAAoC,IAAdA,EAAuBA,EAAYlR,EAAIkR,WAClGE,OAAQpR,EAAIoR,OACZ7V,OAAQsU,EAAcC,YAAY9P,EAAIzE,QACtCqR,UAAWiD,EAAcE,iBAAiB/P,EAAI4M,YAPvC,MAUfiD,EAAcoB,cAAgB,SAAUhG,EAAOiG,GAC3C,IAAI9W,EAAI4Q,EACR,OAAKC,EAGE,CACHqF,WAAwC,QAA3BlW,EAAK6Q,EAAMqF,kBAA+B,IAAPlW,EAAgBA,EAAKgM,EAAG3M,UAAU8W,UAAUc,YAC5FH,UAAWrB,EAAcC,YAA0B,OAAdoB,QAAoC,IAAdA,EAAuBA,EAAYjG,EAAMiG,WACpGI,OAAQrG,EAAMqG,OACdpG,UAAW2E,EAAcC,YAAY7E,EAAMC,WAC3CqG,WAAwC,QAA3BvG,EAAKC,EAAMsG,kBAA+B,IAAPvG,EAAgBA,EAAK,KACrE4B,UAAWiD,EAAcE,iBAAiB9E,EAAM2B,YARzC,MAWfiD,EAAc2B,iBAAmB,SAAUC,GACvC,MAAO,CACH7E,UAAWiD,EAAcC,YAAY2B,EAAQ7E,WAC7C8E,YAAanH,OAAOkH,EAAQC,aAC5Bd,OAAQa,EAAQb,OAChBG,MAAOU,EAAQV,MACfxV,OAAQsU,EAAcC,YAAY2B,EAAQlW,QAC1CV,QAAS4W,EAAQ5W,UAGlBgV,EA/FwB,GAiGnCtZ,EAAQsZ,cAAgBA,G,iCCrGxB,IAAIrK,EAAa7P,MAAQA,KAAK6P,WAAe,WACzC,IAAIC,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgB7P,OAAOgQ,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUJ,EAAGC,GAAKD,EAAEG,UAAYF,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAInP,KAAKmP,EAAO/P,OAAOa,UAAUC,eAAeC,KAAKgP,EAAGnP,KAAIkP,EAAElP,GAAKmP,EAAEnP,KACzFiP,EAAcC,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAChB,GAAiB,oBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAI3M,UAAU,uBAAyBqI,OAAOsE,GAAK,iCAE7D,SAASI,IAAOpQ,KAAKqQ,YAAcN,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEjP,UAAkB,OAANkP,EAAa/P,OAAOC,OAAO8P,IAAMI,EAAGtP,UAAYkP,EAAElP,UAAW,IAAIsP,IAZ1C,GAe7CnQ,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQkD,eAAY,EACpB,IAAImV,EAAiB/X,EAAQ,MAE7B,SAAW4C,GACP,IAAIC,EAAkC,SAAU2M,GAE5C,SAAS3M,IACL,OAAkB,OAAX2M,GAAmBA,EAAOvO,MAAMnC,KAAM2Q,YAAc3Q,KAE/D,OAJA6P,EAAU9L,EAAkB2M,GAIrB3M,EAL2B,CAMpCkV,EAAetL,SACjB7J,EAAUC,iBAAmBA,EAE7B,SAAWmF,GACPA,EAAO,IAAU,MACjBA,EAAO,KAAW,OAFtB,CAGapF,EAAUoF,UAAYpF,EAAUoF,QAAU,KAEvD,SAAWG,GACPA,EAAU,IAAU,MACpBA,EAAU,GAAS,KACnBA,EAAU,MAAY,QACtBA,EAAU,KAAW,OAJzB,CAKgBvF,EAAUuF,aAAevF,EAAUuF,WAAa,KAEhE,SAAW2S,GACPA,EAAcA,EAAa,QAAc,GAAK,UAC9CA,EAAcA,EAAa,OAAa,GAAK,SAC7CA,EAAcA,EAAa,OAAa,GAAK,SAHjD,CAImBlY,EAAUkY,gBAAkBlY,EAAUkY,cAAgB,KAEzE,SAAWC,GACPA,EAAU,SAAe,WAD7B,CAEgBnY,EAAUmY,aAAenY,EAAUmY,WAAa,KAEhE,SAAWC,GACPA,EAAUA,EAAS,IAAU,GAAK,MAClCA,EAAUA,EAAS,KAAW,GAAK,OAFvC,CAGepY,EAAUoY,YAAcpY,EAAUoY,UAAY,KAE7D,SAAWC,GACPA,EAAaA,EAAY,KAAW,GAAK,OACzCA,EAAaA,EAAY,UAAgB,GAAK,YAFlD,CAGkBrY,EAAUqY,eAAiBrY,EAAUqY,aAAe,KACtErY,EAAU8W,UAAY,CAClBwB,KAAM,OACNvB,UAAW,YACXW,UAAW,YACXE,YAAa,eAGjB,SAAWW,GACPA,EAAaA,EAAY,GAAS,GAAK,KACvCA,EAAaA,EAAY,KAAW,GAAK,OAF7C,CAGkBvY,EAAUuY,eAAiBvY,EAAUuY,aAAe,KAEtE,SAAWC,GACPA,EAAeA,EAAc,QAAc,GAAK,UAChDA,EAAeA,EAAc,IAAU,GAAK,MAC5CA,EAAeA,EAAc,MAAY,GAAK,QAC9CA,EAAeA,EAAc,KAAW,GAAK,OAC7CA,EAAeA,EAAc,WAAiB,GAAK,aACnDA,EAAeA,EAAc,aAAmB,GAAK,eACrDA,EAAeA,EAAc,WAAiB,GAAK,aACnDA,EAAeA,EAAc,aAAmB,GAAK,eARzD,CASoBxY,EAAUwY,iBAAmBxY,EAAUwY,eAAiB,KAE5E,SAAW5S,GACPA,EAAcA,EAAa,QAAc,GAAK,UAC9CA,EAAcA,EAAa,KAAW,GAAK,OAC3CA,EAAcA,EAAa,MAAY,GAAK,QAC5CA,EAAcA,EAAa,OAAa,GAAK,SAC7CA,EAAcA,EAAa,UAAgB,GAAK,YAChDA,EAAcA,EAAa,IAAU,GAAK,MAC1CA,EAAcA,EAAa,YAAkB,GAAK,cAPtD,CAQmB5F,EAAU4F,gBAAkB5F,EAAU4F,cAAgB,KAEzE,SAAW6S,GACPA,EAAc,MAAY,QAC1BA,EAAc,SAAe,WAFjC,CAGoBzY,EAAUyY,iBAAmBzY,EAAUyY,eAAiB,KAE5E,SAAWC,GACPA,EAAgBA,EAAe,QAAc,GAAK,UAClDA,EAAgBA,EAAe,MAAY,GAAK,QAChDA,EAAgBA,EAAe,KAAW,GAAK,OAC/CA,EAAgBA,EAAe,UAAgB,GAAK,YACpDA,EAAgBA,EAAe,YAAkB,GAAK,cAL1D,CAMqB1Y,EAAU0Y,kBAAoB1Y,EAAU0Y,gBAAkB,KAE/E,SAAWC,GACPA,EAAmBA,EAAkB,QAAc,GAAK,UACxDA,EAAmBA,EAAkB,MAAY,GAAK,QACtDA,EAAmBA,EAAkB,IAAU,GAAK,MAHxD,CAIwB3Y,EAAU2Y,qBAAuB3Y,EAAU2Y,mBAAqB,KAExF,SAAW3L,GACPA,EAAW,OAAa,SACxBA,EAAW,0BAAgC,4BAC3CA,EAAW,yBAA+B,2BAC1CA,EAAW,oBAA0B,sBACrCA,EAAW,aAAmB,eAC9BA,EAAW,wBAA8B,0BACzCA,EAAW,cAAoB,gBAC/BA,EAAW,YAAkB,cARjC,CASiBhN,EAAUgN,cAAgBhN,EAAUgN,YAAc,KAEnE,SAAW4L,GACPA,EAAa,QAAc,UAC3BA,EAAa,SAAe,WAFhC,CAGmB5Y,EAAU4Y,gBAAkB5Y,EAAU4Y,cAAgB,KAEzE,SAAWC,GACPA,EAAU,cAAoB,gBAC9BA,EAAU,YAAkB,cAFhC,CAGgB7Y,EAAU6Y,aAAe7Y,EAAU6Y,WAAa,KAhHpE,CAiHe/b,EAAQkD,YAAclD,EAAQkD,UAAY,M,iCCpIzD7D,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQgc,aAAU,EAClB,IAAInM,EAAKvP,EAAQ,IACb0R,EAAM1R,EAAQ,GACd0b,EAAyB,WACzB,SAASA,KA4BT,OA1BAA,EAAQC,WAAa,SAAUC,EAAOC,GAClC,OAAID,IAAUrM,EAAGnF,WAAWS,mBAAmB+Q,GACvClK,EAAIzL,aAAaG,SACbyV,IAAQtM,EAAGnF,WAAWS,mBAAmBgR,GAClCH,EAAQI,oBAAoBD,GAEhCH,EAAQK,eAAeH,GAGvB,uCAAuCvX,OAAOuX,GAGtD,IAEXF,EAAQI,oBAAsB,SAAUD,GACpC,OAAIA,IAAQtM,EAAGnF,WAAWS,mBAAmBgR,GAClC,GAAGxX,OAAOqN,EAAIzK,gBAAgBI,kBAAkBhD,OAAOwX,GAE3D,IAEXH,EAAQK,eAAiB,SAAUH,GAC/B,OAAIA,IAAUrM,EAAGnF,WAAWS,mBAAmB+Q,GACpC,GAAGvX,OAAOqN,EAAIzK,gBAAgBI,iBAAkB,mDAAmDhD,OAAOuX,GAE9G,IAEJF,EA7BkB,GA+B7Bhc,EAAQgc,QAAUA,G,iCCnClB3c,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,K,iCCAtDhB,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQsc,mBAAgB,EACxB,IAAIC,EAAWjc,EAAQ,KACnBuP,EAAKvP,EAAQ,KAEbyC,GAAS,EADHzC,EAAQ,GACG0C,aACjBsZ,EAA+B,WAC/B,SAASA,EAAcE,GACnBpd,KAAKqd,qBAAuB,EAC5Brd,KAAKod,OAASA,EA4HlB,OA1HAF,EAAcpc,UAAUwc,WAAa,WACjC,IAAIC,EAASvd,KAAKod,OAAOI,UACrBD,IACAvd,KAAKyd,QAAUF,EACfvd,KAAKqd,qBAAuBE,EAAOG,SAASna,OAC5CvD,KAAK2d,iBAGb1d,OAAOO,eAAe0c,EAAcpc,UAAW,sBAAuB,CAClEyG,IAAK,SAAUqW,GACX5d,KAAK6d,mBAAqBD,GAE9Bnd,YAAY,EACZqE,cAAc,IAElBoY,EAAcpc,UAAUgd,UAAY,WAChC,OAAO9d,KAAKyd,SAEhBP,EAAcpc,UAAUid,UAAY,SAAUR,GAC1Cvd,KAAKyd,QAAUF,EACfvd,KAAKge,kBAAkBT,GACvBvd,KAAK2d,gBAETT,EAAcpc,UAAU6c,aAAe,WAC/B3d,KAAK6d,oBACL7d,KAAK6d,mBAAmB7d,KAAKyd,UAGrCP,EAAcpc,UAAUkd,kBAAoB,SAAUT,GAC9CA,GACAvd,KAAKod,OAAOa,QAAQV,IAG5BL,EAAcpc,UAAUod,gBAAkB,SAAUC,GAChD,GAAKne,KAAKoe,iBAAiBD,GAA3B,CAGAne,KAAKqe,cACL,IAAIC,EAAUte,KAAKue,uBAAuBJ,EAAU,GAChDZ,EAAS,IAAI9M,EAAG+N,UAAU,CAC1BC,OAAQH,EACRH,SAAUA,EACVT,SAAU,CACNY,KAIR,OADAte,KAAK+d,UAAUR,GACRA,IAEXL,EAAcpc,UAAU4d,aAAe,WACnC1e,KAAKqe,cACLre,KAAK2d,gBAETT,EAAcpc,UAAU6d,oBAAsB,SAAUzZ,GACpD,IAAIT,EAAI4Q,EACR,OAAuF,QAA/EA,EAA6B,QAAvB5Q,EAAKzE,KAAKyd,eAA4B,IAAPhZ,OAAgB,EAASA,EAAGiZ,gBAA6B,IAAPrI,OAAgB,EAASA,EAAGuJ,MAAK,SAAU9c,GAAK,OAAOA,EAAEoD,UAAYA,MAExKgY,EAAcpc,UAAU+d,WAAa,WACjC,GAAI7e,KAAKyd,mBAAmBhN,EAAG+N,UAAW,CACtC,IAAIF,EAAUte,KAAKue,uBAAuBve,KAAKyd,QAAQU,UAGvD,OAFAne,KAAKyd,QAAQC,SAASla,KAAK8a,GAC3Bte,KAAK8e,iBAAiBR,GACfA,IAIfpB,EAAcpc,UAAUie,iBAAmB,WACvC,IAAIta,EACJ,OAA+B,QAAvBA,EAAKzE,KAAKyd,eAA4B,IAAPhZ,OAAgB,EAASA,EAAGga,QAEvEvB,EAAcpc,UAAUge,iBAAmB,SAAUR,GACjD,QAAIte,KAAKyd,UACLzd,KAAKyd,QAAQgB,OAASH,EACtBte,KAAKod,OAAOa,QAAQje,KAAKyd,SACzBzd,KAAK2d,gBACE,IAIfT,EAAcpc,UAAUke,YAAc,WAClC,OAAIhf,KAAKyd,QACEzd,KAAKyd,QAAQC,SAEjB,IAEXR,EAAcpc,UAAUme,gBAAkB,WACtC,IAAI1B,EAASvd,KAAKod,OAAOI,UACzB,GAAID,GAAUA,aAAkB9M,EAAGyO,cAAe,CAC9C,IAAI,IAAIhI,MAAOuD,UAAY8C,EAAOtG,UAAY,IAC1C,OAAOsG,EAAO4B,QAGdxb,EAAOoD,KAAK,yBAA0BwW,EAAtC5Z,KAKZuZ,EAAcpc,UAAUud,YAAc,WAClCre,KAAKyd,aAAUld,EACfP,KAAKqd,qBAAuB,EAC5Brd,KAAKod,OAAOgC,SAEhBlC,EAAcpc,UAAUyd,uBAAyB,SAAUJ,EAAUrX,QACnD,IAAVA,IAAoBA,EAAQ9G,KAAKqd,sBACrC,IAAIgC,EAAalC,EAASI,OAAO+B,cAAc,CAC3CC,UAAWpB,EACXrX,MAAOA,IACRuY,WACCf,EAAU,IAAI7N,EAAG+O,iBAAiB,CAClC3W,GAAI/B,EAAM8C,WACVyV,WAAYA,EACZna,QAASiY,EAASI,OAAOkC,0BAA0BJ,GAAYna,UAGnE,OADAlF,KAAKqd,qBAAuBvW,EAAQ,EAC7BwX,GAEXpB,EAAcpc,UAAUsd,iBAAmB,SAAUD,GACjD,QAAIA,GACOhB,EAASI,OAAOmC,kBAAkBvB,IAI1CjB,EA/HwB,GAiInCtc,EAAQsc,cAAgBA,G,iCCvIxBjd,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,K,iCCAtD,IAiBIgb,EAjBApM,EAAa7P,MAAQA,KAAK6P,WAAe,WACzC,IAAIC,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgB7P,OAAOgQ,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUJ,EAAGC,GAAKD,EAAEG,UAAYF,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAInP,KAAKmP,EAAO/P,OAAOa,UAAUC,eAAeC,KAAKgP,EAAGnP,KAAIkP,EAAElP,GAAKmP,EAAEnP,KACzFiP,EAAcC,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAChB,GAAiB,oBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAI3M,UAAU,uBAAyBqI,OAAOsE,GAAK,iCAE7D,SAASI,IAAOpQ,KAAKqQ,YAAcN,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEjP,UAAkB,OAANkP,EAAa/P,OAAOC,OAAO8P,IAAMI,EAAGtP,UAAYkP,EAAElP,UAAW,IAAIsP,IAZ1C,GAe7CnQ,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQ+e,qBAAuB/e,EAAQ4e,iBAAmB5e,EAAQgf,cAAgBhf,EAAQif,kBAAoBjf,EAAQse,cAAgBte,EAAQ4d,UAAY5d,EAAQkf,OAASlf,EAAQqb,gBAAa,EAEhM,SAAWA,GACPA,EAAU,IAAU,MACpBA,EAAU,QAAc,UAF5B,CAGGA,EAAarb,EAAQqb,aAAerb,EAAQqb,WAAa,KAC5D,IAAI6D,EAAwB,WACxB,SAASA,EAAO7W,EAAM7B,GAClBpH,KAAK0d,SAAW,GAChB1d,KAAK+f,MAAQ9W,EACbjJ,KAAKggB,SAAS5Y,GAmClB,OAjCA0Y,EAAOG,OAAS,SAAU1T,GAEtB,QADAA,EAAuB,kBAATA,EAAoBA,EAAO,IAC5BwT,OACT,KAAK9D,EAAWiE,IACZ,OAAO,IAAI1B,EAAUjS,GACzB,KAAK0P,EAAWkE,QACZ,OAAO,IAAIjB,EAAc3S,KAMrCtM,OAAOO,eAAesf,EAAOhf,UAAW,OAAQ,CAC5CJ,IAAK,WACD,OAAOV,KAAK+f,OAEhBtf,YAAY,EACZqE,cAAc,IAElBgb,EAAOhf,UAAUkf,SAAW,SAAUzT,GAClC,IAAI5F,EAAQ3G,KACRuM,IACAvM,KAAKye,OAASlS,EAAKkS,OAASze,KAAKogB,cAAc7T,EAAKkS,aAAUle,EAC1DgM,EAAKmR,UAAYvN,MAAMsH,QAAQlL,EAAKmR,WACpCnR,EAAKmR,SAAS2C,SAAQ,SAAU/B,GAC5B3X,EAAM+W,SAASla,KAAKmD,EAAMyZ,cAAc9B,QAI/Cte,KAAK0d,WACN1d,KAAK0d,SAAW,KAGjBoC,EAvCiB,GAyC5Blf,EAAQkf,OAASA,EACjB,IAAItB,EAA2B,SAAU9N,GAErC,SAAS8N,EAAUpX,GACf,IAAIT,EAAQ+J,EAAO1P,KAAKhB,KAAMic,EAAWiE,IAAK9Y,IAASpH,KAEvD,OADA2G,EAAMS,KAAKA,GACJT,EAUX,OAdAkJ,EAAU2O,EAAW9N,GAMrB8N,EAAU1d,UAAUsG,KAAO,SAAUmF,GAC7BA,IACAvM,KAAKme,SAAW5R,EAAK4R,WAG7BK,EAAU1d,UAAUsf,cAAgB,SAAU7T,GAC1C,OAAO,IAAIiT,EAAiBjT,IAEzBiS,EAfoB,CAgB7BsB,GACFlf,EAAQ4d,UAAYA,EACpB,IAmBIqB,EAnBAX,EAA+B,SAAUxO,GAEzC,SAASwO,EAAc9X,GACnB,IAAIT,EAAQ+J,EAAO1P,KAAKhB,KAAMic,EAAWkE,QAAS/Y,IAASpH,KAE3D,OADA2G,EAAMS,KAAKA,GACJT,EAWX,OAfAkJ,EAAUqP,EAAexO,GAMzBwO,EAAcpe,UAAUsG,KAAO,SAAUmF,GACjCA,IACAvM,KAAKmf,QAAU5S,EAAK4S,QACpBnf,KAAKiX,UAAY1K,EAAK0K,YAG9BiI,EAAcpe,UAAUsf,cAAgB,SAAU7T,GAC9C,OAAO,IAAIoT,EAAqBpT,IAE7B2S,EAhBwB,CAiBjCY,GACFlf,EAAQse,cAAgBA,EAExB,SAAWW,GACPA,EAAiB,IAAU,MAC3BA,EAAiB,QAAc,UAFnC,CAGGA,EAAoBjf,EAAQif,oBAAsBjf,EAAQif,kBAAoB,KACjF,IAAID,EAA+B,WAC/B,SAASA,EAAc3W,EAAM7B,GACzBpH,KAAK+f,MAAQ9W,EACbjJ,KAAKggB,SAAS5Y,GA2BlB,OAzBAwY,EAAcK,OAAS,SAAU1T,GAE7B,QADAA,EAAuB,kBAATA,EAAoBA,EAAO,IAC5BwT,OACT,KAAK9D,EAAWiE,IACZ,OAAO,IAAIV,EAAiBjT,GAChC,KAAK0P,EAAWkE,QACZ,OAAO,IAAIR,EAAqBpT,KAM5CtM,OAAOO,eAAeof,EAAc9e,UAAW,OAAQ,CACnDJ,IAAK,WACD,OAAOV,KAAK+f,OAEhBtf,YAAY,EACZqE,cAAc,IAElB8a,EAAc9e,UAAUkf,SAAW,SAAUzT,GACrCA,IACAvM,KAAK6I,GAAK0D,EAAK1D,GACf7I,KAAKkF,QAAUqH,EAAKrH,UAGrB0a,EA9BwB,GAgCnChf,EAAQgf,cAAgBA,EACxB,IAAIJ,EAAkC,SAAU9O,GAE5C,SAAS8O,EAAiBpY,GACtB,IAAIT,EAAQ+J,EAAO1P,KAAKhB,KAAM6f,EAAkBK,IAAK9Y,IAASpH,KAE9D,OADA2G,EAAMS,KAAKA,GACJT,EAOX,OAXAkJ,EAAU2P,EAAkB9O,GAM5B8O,EAAiB1e,UAAUsG,KAAO,SAAUmF,GACpCA,IACAvM,KAAKqf,WAAa9S,EAAK8S,aAGxBG,EAZ2B,CAapCI,GACFhf,EAAQ4e,iBAAmBA,EAC3B,IAAIG,EAAsC,SAAUjP,GAEhD,SAASiP,EAAqBvY,GAC1B,OAAOsJ,EAAO1P,KAAKhB,KAAM6f,EAAkBM,QAAS/Y,IAASpH,KAEjE,OAJA6P,EAAU8P,EAAsBjP,GAIzBiP,EAL+B,CAMxCC,GACFhf,EAAQ+e,qBAAuBA,G,iCCjK/B1f,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQ0f,cAAgB1f,EAAQ2f,gBAAa,EAC7C,IAAIC,EAAetf,EAAQ,KACvBqT,EAAWrT,EAAQ,KACnBwC,EAASxC,EAAQ,IACjByC,GAAS,EAAID,EAAOE,aACpB2c,EAA4B,WAC5B,SAASA,IACLvgB,KAAKof,QA0DT,OAxDAmB,EAAWzf,UAAUse,MAAQ,WACzBpf,KAAKygB,OAAS,IAAID,EAAaE,SAAS,CACpCC,SAAU,CACN9X,GAAI,KACJ+X,IAAK,aACL9Z,MAAO,CAAC,UAMpByZ,EAAWzf,UAAUgG,MAAQ,SAAU6N,GACnC,GAAIA,EAAO,CACP3U,KAAKof,QACL,IAAK,IAAI9H,EAAK,EAAGuJ,EAAUlM,EAAO2C,EAAKuJ,EAAQtd,OAAQ+T,IAAM,CACzD,IAAIzW,EAAIggB,EAAQvJ,GAChBtX,KAAKygB,OAAOK,IAAIjgB,MAI5B0f,EAAWzf,UAAUuK,OAAS,SAAU0V,EAAOpM,GAC3C,IACI,IAAKA,GAASjR,EAAO4H,WAAWS,mBAAmBgV,GAC/C,OAAOpM,EAEX,GAAIjR,EAAO4H,WAAWK,SAASoV,GAAQ,CACnC,IAAIja,EAAQ+E,SAASkV,GACrB,GAAIja,EAAQ,EAAG,CACX,IAAIjG,EAAI8T,EAAM7N,EAAQ,GACtB,OAAQjG,EAAS,CAACA,GAAN,IAGpB,IAIImgB,EAJShhB,KAAKygB,OAAOpV,OAAO,CAC5BuV,IAAKG,EAAME,MAAM,KACjBC,MAAO,MAEe/c,KAAI,SAAUrC,GAAK,OAAOA,EAAEE,UACtD,GAAIgf,EAAazd,OAAS,EAAG,CACzB,GAA4B,IAAxByd,EAAazd,OACb,OAAOvD,KAAKmhB,OAAOH,EAAa,GAAG7c,KAAI,SAAUrC,GAAK,OAAOA,EAAE8H,cAAgB+K,GAG/E,IAAIyM,EAAoB7M,EAAS8M,aAAalf,WAAM,EAAQ6e,GAC5D,OAAOhhB,KAAKmhB,OAAOC,EAAkBjd,KAAI,SAAUrC,GAAK,OAAOA,EAAE8H,cAAgB+K,GAGzF,OAEJ,MAAO5G,GAEH,YADApK,EAAOoK,MAAMA,EAAbpK,KAIR4c,EAAWzf,UAAUqgB,OAAS,SAAUG,EAAK3M,GACzC,OAAO,EAAIJ,EAASgN,kBAAkB5M,EAAO2M,GAAK,SAAUnhB,EAAG0I,GAAM,OAAO1I,EAAE0I,KAAOA,MAElF0X,EA5DqB,GA8DhC3f,EAAQ2f,WAAaA,EACrB,IAAIlV,EAAS,IAAIkV,EAIjB3f,EAAQ0f,cAHY,WAChB,OAAOjV,I,iCCvEX,IAAIwE,EAAa7P,MAAQA,KAAK6P,WAAe,WACzC,IAAIC,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgB7P,OAAOgQ,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUJ,EAAGC,GAAKD,EAAEG,UAAYF,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAInP,KAAKmP,EAAO/P,OAAOa,UAAUC,eAAeC,KAAKgP,EAAGnP,KAAIkP,EAAElP,GAAKmP,EAAEnP,KACzFiP,EAAcC,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAChB,GAAiB,oBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAI3M,UAAU,uBAAyBqI,OAAOsE,GAAK,iCAE7D,SAASI,IAAOpQ,KAAKqQ,YAAcN,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEjP,UAAkB,OAANkP,EAAa/P,OAAOC,OAAO8P,IAAMI,EAAGtP,UAAYkP,EAAElP,UAAW,IAAIsP,IAZ1C,GAezCjP,EAAanB,MAAQA,KAAKmB,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUV,GAAS,IAAMW,EAAKL,EAAUM,KAAKZ,IAAW,MAAOa,GAAKJ,EAAOI,IACpF,SAASC,EAASd,GAAS,IAAMW,EAAKL,EAAS,MAAUN,IAAW,MAAOa,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAJlB,IAAef,EAIae,EAAOC,KAAOR,EAAQO,EAAOf,QAJ1CA,EAIyDe,EAAOf,MAJhDA,aAAiBK,EAAIL,EAAQ,IAAIK,GAAE,SAAUG,GAAWA,EAAQR,OAITiB,KAAKP,EAAWI,GAClGH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,YAGlEO,EAAepC,MAAQA,KAAKoC,aAAgB,SAAUhB,EAASiB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOjD,OAAUyC,EACvJ,SAASM,EAAKG,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAIe,UAAU,mCAC3B,KAAOX,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARY,EAAG,GAASb,EAAC,OAAaa,EAAG,GAAKb,EAAC,SAAeC,EAAID,EAAC,SAAeC,EAAExB,KAAKuB,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAExB,KAAKuB,EAAGa,EAAG,KAAKnB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGY,EAAK,CAAS,EAARA,EAAG,GAAQZ,EAAEvB,QACzBmC,EAAG,IACP,KAAK,EAAG,KAAK,EAAGZ,EAAIY,EAAI,MACxB,KAAK,EAAc,OAAXV,EAAEC,QAAgB,CAAE1B,MAAOmC,EAAG,GAAInB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKV,EAAEI,IAAIQ,MAAOZ,EAAEG,KAAKS,MAAO,SACxC,QACI,KAAkBd,GAAZA,EAAIE,EAAEG,MAAYU,OAAS,GAAKf,EAAEA,EAAEe,OAAS,MAAkB,IAAVH,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEV,EAAI,EAAG,SACjG,GAAc,IAAVU,EAAG,MAAcZ,GAAMY,EAAG,GAAKZ,EAAE,IAAMY,EAAG,GAAKZ,EAAE,IAAM,CAAEE,EAAEC,MAAQS,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYV,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIY,EAAI,MAC7D,GAAIZ,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIU,KAAKJ,GAAK,MACvDZ,EAAE,IAAIE,EAAEI,IAAIQ,MAChBZ,EAAEG,KAAKS,MAAO,SAEtBF,EAAKf,EAAKrB,KAAKI,EAASsB,GAC1B,MAAOZ,GAAKsB,EAAK,CAAC,EAAGtB,GAAIS,EAAI,EAjBrB,QAiBoCD,EAAIE,EAAI,EACtD,GAAY,EAARY,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEnC,MAAOmC,EAAG,GAAKA,EAAG,QAAK,EAAQnB,MAAM,GArB9BL,CAAK,CAACsB,EAAGC,OAwB7DlD,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQ4gB,kBAAoB5gB,EAAQ6gB,iBAAc,EAClD,IAGIA,EAHA/d,EAASxC,EAAQ,IACjBwgB,EAAkBxgB,EAAQ,KAC1ByC,GAAS,EAAID,EAAOE,cAExB,SAAW6d,GACPA,EAAYA,EAAW,aAAmB,GAAK,eAC/CA,EAAYA,EAAW,cAAoB,GAAK,gBAChDA,EAAYA,EAAW,WAAiB,GAAK,aAC7CA,EAAYA,EAAW,UAAgB,GAAK,YAC5CA,EAAYA,EAAW,QAAc,GAAK,UAC1CA,EAAYA,EAAW,eAAqB,GAAK,iBACjDA,EAAYA,EAAW,YAAkB,GAAK,cAC9CA,EAAYA,EAAW,YAAkB,GAAK,cAC9CA,EAAYA,EAAW,SAAe,GAAK,WAC3CA,EAAYA,EAAW,WAAiB,GAAK,aAC7CA,EAAYA,EAAW,SAAe,IAAM,WAC5CA,EAAYA,EAAW,OAAa,IAAM,SAC1CA,EAAYA,EAAW,cAAoB,IAAM,gBACjDA,EAAYA,EAAW,mBAAyB,IAAM,qBACtDA,EAAYA,EAAW,iBAAuB,IAAM,mBAfxD,CAgBGA,EAAc7gB,EAAQ6gB,cAAgB7gB,EAAQ6gB,YAAc,KAC/D,IAAID,EAAmC,SAAU9Q,GAE7C,SAAS8Q,IACL,IAAI7a,EAAQ+J,EAAO1P,KAAKhB,OAASA,KAEjC,OADA2G,EAAMgb,QAAU,IAAIC,IACbjb,EAiXX,OArXAkJ,EAAU2R,EAAmB9Q,GAM7B8Q,EAAkB1gB,UAAU8D,mBAAqB,WAC7C,OAAOzD,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAgB/B,OAfAzE,KAAK2hB,QAAQpa,IAAIka,EAAYI,aAAc7hB,KAAK8hB,WAAW,WAAY,iBACvE9hB,KAAK2hB,QAAQpa,IAAIka,EAAYM,cAAe/hB,KAAK8hB,WAAW,WAAY,kBACxE9hB,KAAK2hB,QAAQpa,IAAIka,EAAYO,WAAYhiB,KAAK8hB,WAAW,WAAY,eACrE9hB,KAAK2hB,QAAQpa,IAAIka,EAAYQ,UAAWjiB,KAAK8hB,WAAW,WAAY,cACpE9hB,KAAK2hB,QAAQpa,IAAIka,EAAYS,QAASliB,KAAK8hB,WAAW,WAAY,YAClE9hB,KAAK2hB,QAAQpa,IAAIka,EAAYU,eAAgBniB,KAAK8hB,WAAW,WAAY,mBACzE9hB,KAAK2hB,QAAQpa,IAAIka,EAAYW,YAAapiB,KAAK8hB,WAAW,WAAY,gBACtE9hB,KAAK2hB,QAAQpa,IAAIka,EAAYY,YAAariB,KAAK8hB,WAAW,WAAY,gBACtE9hB,KAAK2hB,QAAQpa,IAAIka,EAAYa,SAAUtiB,KAAK8hB,WAAW,WAAY,aACnE9hB,KAAK2hB,QAAQpa,IAAIka,EAAY5O,WAAY7S,KAAK8hB,WAAW,WAAY,eACrE9hB,KAAK2hB,QAAQpa,IAAIka,EAAYc,SAAUviB,KAAK8hB,WAAW,WAAY,aACnE9hB,KAAK2hB,QAAQpa,IAAIka,EAAYe,OAAQxiB,KAAK8hB,WAAW,WAAY,WACjE9hB,KAAK2hB,QAAQpa,IAAIka,EAAYgB,cAAeziB,KAAK8hB,WAAW,QAAS,aACrE9hB,KAAK2hB,QAAQpa,IAAIka,EAAYiB,mBAAoB1iB,KAAK8hB,WAAW,QAAS,kBAC1E9hB,KAAK2hB,QAAQpa,IAAIka,EAAYkB,iBAAkB3iB,KAAK8hB,WAAW,QAAS,gBACjE,CAAC,UAIpBN,EAAkB1gB,UAAUghB,WAAa,SAAU/B,EAAO6C,GACtD,OAAO5iB,KAAK6E,UAAUoB,IAAI2Y,MAAK,SAAU9c,GAAK,OAAOA,EAAEmH,OAAS8W,GAASje,EAAEuC,OAASue,MAExFpB,EAAkB1gB,UAAU+hB,iBAAmB,SAAUC,GACrD,OAAO9iB,KAAK2hB,QAAQjhB,IAAIoiB,IAE5BtB,EAAkB1gB,UAAUiiB,wBAA0B,SAAUD,EAAcnd,GAC1E,OAAOxE,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,MAAO,CAAC,EAAczE,KAAK0E,QAAQqe,wBAAwB/iB,KAAK6E,UAAUK,QAASlF,KAAK6iB,iBAAiBC,GAAe9iB,KAAK6E,UAAUme,SAAUrd,WAI7J6b,EAAkB1gB,UAAUmiB,kBAAoB,SAAUxd,EAAUyd,GAChE,OAAO/hB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAE/B,OADAd,EAAOoD,KAAK,oBAAqBmc,EAAjCvf,GACO,CAAC,EAAc3D,KAAKwF,kBAAkBC,EAAU,WAAY,CAAC/B,EAAOI,UAAU0Y,gBAAgB2G,UAAWD,YAI5H1B,EAAkB1gB,UAAUsiB,oBAAsB,SAAU3d,EAAUyd,GAClE,OAAO/hB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAE/B,OADAd,EAAOoD,KAAK,sBAAuBmc,EAAnCvf,GACO,CAAC,EAAc3D,KAAKwF,kBAAkBC,EAAU,WAAY,CAAC/B,EAAOI,UAAU0Y,gBAAgB6G,YAAaH,YAI9H1B,EAAkB1gB,UAAUwiB,kBAAoB,WAC5C,OAAOniB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EAAQf,EACZ,OAAOmB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK+iB,wBAAwBtB,EAAYI,aAAc,KACpF,KAAK,EAED,OADA7f,EAASyC,EAAG7B,SAIZ3B,EAAQe,EAAO,GAAGf,MAClB0C,EAAOoD,KAAK,oBAAqB9F,EAAjC0C,GACO,CAAC,EAAc1C,IAJX,CAAC,OAAcV,WAS9CihB,EAAkB1gB,UAAUyiB,kBAAoB,SAAU9d,EAAUwN,GAChE,OAAO9R,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAE/B,OADAd,EAAOoD,KAAK,oBAAqBkM,EAAjCtP,GACO,CAAC,EAAc3D,KAAKwF,kBAAkBC,EAAU,eAAgB,CAACwN,YAIpFuO,EAAkB1gB,UAAU0iB,mBAAqB,WAC7C,OAAOriB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EAAQF,EACZ,OAAOM,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK+iB,wBAAwBtB,EAAYM,cAAe,KACrF,KAAK,EAID,OAHA/f,EAASyC,EAAG7B,OACZd,EAAI9B,KAAKgE,kBAAkBhC,GAC3B2B,EAAOoD,KAAK,qBAAsBjF,EAAlC6B,GACO,CAAC,EAAc,CACd8f,cAAezjB,KAAKsF,UAAUxD,EAAE4hB,gBAChCC,eAAgB9X,SAAS/J,EAAE8hB,iBAC3BC,UAAWngB,EAAOwW,cAAcC,YAAYrY,EAAEgiB,YAC9CC,YAAargB,EAAOwW,cAAcC,YAAYrY,EAAEkiB,wBAM5ExC,EAAkB1gB,UAAUmjB,sBAAwB,SAAUxe,EAAUye,GACpE,OAAO/iB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAE/B,OADAd,EAAOoD,KAAK,wBAAyBmd,EAArCvgB,GACO,CAAC,EAAc3D,KAAKwF,kBAAkBC,EAAU,mBAAoB,CAACye,YAIxF1C,EAAkB1gB,UAAUqjB,gBAAkB,SAAUlR,GACpD,OAAO9R,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EAAQf,EACZ,OAAOmB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK+iB,wBAAwBtB,EAAYO,WAAY,CAAC/O,KACnF,KAAK,EAED,OADAjR,EAASyC,EAAG7B,SAIZ3B,EAAQe,EAAO,GAAGf,MAClB0C,EAAOoD,KAAK,kBAAmB9F,EAA/B0C,GACO,CAAC,EAAc3D,KAAKsF,UAAUrE,KAJ1B,CAAC,GAAc,WAS9CugB,EAAkB1gB,UAAUsjB,eAAiB,SAAUC,GACnD,OAAOljB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EAAQf,EACZ,OAAOmB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK+iB,wBAAwBtB,EAAYQ,UAAW,CAACoC,KAClF,KAAK,EAED,OADAriB,EAASyC,EAAG7B,SAIZ3B,EAAQe,EAAO,GAAGf,MAClB0C,EAAOoD,KAAK,iBAAkB9F,EAA9B0C,GACO,CAAC,EAAc1C,IAJX,CAAC,OAAcV,WAS9CihB,EAAkB1gB,UAAUwjB,aAAe,SAAUC,GACjD,OAAOpjB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EAAQf,EACZ,OAAOmB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK+iB,wBAAwBtB,EAAYS,QAAS,CAACqC,KAChF,KAAK,EAED,OADAviB,EAASyC,EAAG7B,SAIZ3B,EAAQe,EAAO,GAAGf,MAClB0C,EAAOoD,KAAK,eAAgB9F,EAA5B0C,GACO,CAAC,EAAc1C,IAJX,CAAC,OAAcV,WAS9CihB,EAAkB1gB,UAAU0jB,oBAAsB,SAAUC,GACxD,OAAOtjB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EAAQf,EACZ,OAAOmB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK+iB,wBAAwBtB,EAAYU,eAAgB,CAACsC,KACvF,KAAK,EAED,OADAziB,EAASyC,EAAG7B,SAIZ3B,EAAQe,EAAO,GAAGf,MAClB0C,EAAOoD,KAAK,sBAAuB0d,EAAQ,IAAKxjB,EAAhD0C,GACO,CAAC,EAAcD,EAAOwW,cAAcC,YAAYlZ,KAJ5C,CAAC,OAAcV,WAS9CihB,EAAkB1gB,UAAU4jB,sBAAwB,SAAUjf,EAAUkf,EAAUC,GAC9E,OAAOzjB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,MAAO,CAAC,EAAczE,KAAKwF,kBAAkBC,EAAU,mBAAoB,CAACkf,EAAUC,YAIlGpD,EAAkB1gB,UAAU+jB,UAAY,SAAUpf,EAAUqf,GACxD,OAAO3jB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,MAAO,CAAC,EAAczE,KAAKwF,kBAAkBC,EAAU,OAAQ,GAAIqf,WAI/EtD,EAAkB1gB,UAAUikB,iBAAmB,SAAUV,GACrD,OAAOljB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EAAQf,EACZ,OAAOmB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK+iB,wBAAwBtB,EAAYW,YAAa,KACnF,KAAK,EAED,OADApgB,EAASyC,EAAG7B,SAIZ3B,EAAQe,EAAO,GAAGf,MAClB0C,EAAOoD,KAAK,mBAAoB9F,EAAhC0C,GACO,CAAC,EAAc1C,IAJX,CAAC,OAAcV,WAS9CihB,EAAkB1gB,UAAUkkB,iBAAmB,SAAUX,GACrD,OAAOljB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EAAQf,EACZ,OAAOmB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK+iB,wBAAwBtB,EAAYY,YAAa,CAACgC,KACpF,KAAK,EAED,OADAriB,EAASyC,EAAG7B,SAIZ3B,EAAQe,EAAO,GAAGf,MAClB0C,EAAOoD,KAAK,mBAAoB9F,EAAhC0C,GACO,CAAC,EAAc1C,IAJX,CAAC,EAAc,YAS9CugB,EAAkB1gB,UAAUmkB,cAAgB,SAAUV,GAClD,OAAOpjB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EAAQf,EACZ,OAAOmB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK+iB,wBAAwBtB,EAAYa,SAAU,CAACiC,KACjF,KAAK,EAED,OADAviB,EAASyC,EAAG7B,SAIZ3B,EAAQe,EAAO,GAAGf,MAClB0C,EAAOoD,KAAK,gBAAiB9F,EAA7B0C,GACO,CAAC,EAAc1C,IAJX,CAAC,OAAcV,WAS9CihB,EAAkB1gB,UAAUokB,gBAAkB,WAC1C,OAAO/jB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EAAQf,EACZ,OAAOmB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK+iB,wBAAwBtB,EAAY5O,WAAY,KAClF,KAAK,EAED,OADA7Q,EAASyC,EAAG7B,SAIZ3B,EAAQe,EAAO,GAAGf,MAClB0C,EAAOoD,KAAK,kBAAmB9F,EAA/B0C,GACO,CAAC,EAAc1C,IAJX,CAAC,OAAcV,WAS9CihB,EAAkB1gB,UAAUqkB,gBAAkB,SAAU1f,EAAUqN,GAC9D,OAAO3R,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,MAAO,CAAC,EAAczE,KAAKwF,kBAAkBC,EAAU,aAAc,CAACqN,YAIlF0O,EAAkB1gB,UAAUskB,cAAgB,SAAUC,GAClD,OAAOlkB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EACJ,OAAOI,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK+iB,wBAAwBtB,EAAYc,SAAU,CAAC8C,KACjF,KAAK,EAGD,OAFArjB,EAASyC,EAAG7B,OACZe,EAAOoD,KAAK,gBAAiB,UAAWse,EAASrjB,EAAjD2B,GACO,CAAC,EAAc,CACd2hB,UAAWtlB,KAAKsF,UAAUtD,EAAO,GAAGf,OACpCsa,UAAW,IAAI7X,EAAOI,UAAUC,iBAAiBshB,GACjD1J,OAAQ3Z,EAAO,GAAGf,MAClBsU,UAAW,IAAI7R,EAAOI,UAAUC,iBAAiB/B,EAAO,GAAGf,OAC3D2a,WAAYlY,EAAOwW,cAAcI,UAAUtY,EAAO,GAAGf,iBAMjFugB,EAAkB1gB,UAAUykB,YAAc,SAAUF,GAChD,OAAOlkB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EACJ,OAAOI,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK+iB,wBAAwBtB,EAAYe,OAAQ,CAAC6C,KAC/E,KAAK,EAGD,OAFArjB,EAASyC,EAAG7B,OACZe,EAAOoD,KAAK,cAAe,UAAWse,EAASrjB,EAA/C2B,GACO,CAAC,EAAc,CACd6hB,OAAQxlB,KAAKsF,UAAUtD,EAAO,GAAGf,OACjCsa,UAAW,IAAI7X,EAAOI,UAAUC,iBAAiBshB,GACjD5J,OAAQzZ,EAAO,GAAGf,MAClB2E,OAAQ,IAAIlC,EAAOI,UAAUC,iBAAiB/B,EAAO,GAAGf,iBAMpFugB,EAAkB1gB,UAAU2kB,iBAAmB,SAAUhgB,EAAU4f,GAC/D,OAAOlkB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,MAAO,CAAC,EAAczE,KAAKwF,kBAAkBC,EAAU,cAAe,CAAC4f,YAInF7D,EAAkB1gB,UAAU4kB,WAAa,SAAUjgB,EAAU4f,EAASM,EAAeC,GACjF,OAAOzkB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAE/B,OADAd,EAAOoD,KAAK,sBAAsBxB,OAAO8f,EAAS,mBAAmB9f,OAAOogB,EAAe,UAAUpgB,OAAOqgB,GAA5GjiB,GACO,CAAC,EAAc3D,KAAKwF,kBAAkBC,EAAU,QAAS,CAAC4f,EAASM,GAAyB,OAATC,QAA0B,IAATA,EAAkBA,OAAOrlB,WAIhJihB,EAAkB1gB,UAAU+kB,oBAAsB,SAAUpgB,EAAU4f,EAASM,EAAe1S,EAAU2S,GACpG,OAAOzkB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAE/B,OADAd,EAAOoD,KAAK,+BAA+BxB,OAAO8f,EAAS,mBAAmB9f,OAAOogB,EAAe,cAAcpgB,OAAO0N,EAAU,UAAU1N,OAAOqgB,GAApJjiB,GACO,CAAC,EAAc3D,KAAKwF,kBAAkBC,EAAU,iBAAkB,CAAC4f,EAASM,EAAe1S,GAAoB,OAAT2S,QAA0B,IAATA,EAAkBA,OAAOrlB,WAInKihB,EAAkB1gB,UAAUglB,SAAW,SAAUrgB,EAAU4f,EAAS9e,GAChE,OAAOpF,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,MAAO,CAAC,EAAczE,KAAKwF,kBAAkBC,EAAU,MAAO,CAAC4f,GAAU9e,WAIrFib,EAAkB1gB,UAAUilB,eAAiB,SAAUtgB,EAAU4f,GAC7D,OAAOlkB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,MAAO,CAAC,EAAczE,KAAKwF,kBAAkBC,EAAU,YAAa,CAAC4f,YAIjF7D,EAAkB1gB,UAAUklB,cAAgB,SAAUvgB,EAAU4f,EAAS9e,EAASqf,GAC9E,OAAOzkB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAI4F,EACJ,OAAOxD,EAAYpC,MAAM,SAAUyE,GAO/B,OANAd,EAAOoD,KAAK,yBAAyBxB,OAAO8f,EAAS,aAAa9f,OAAOgB,EAAS,UAAUhB,OAAOqgB,GAAnGjiB,GACAiC,EAASW,EACLqf,IAASliB,EAAO4H,WAAWS,mBAAmB6Z,KAC9ChgB,EAAS,IAAIlC,EAAOI,UAAUC,iBAAiBwC,GAAS0f,KAAK,IAAIviB,EAAOI,UAAUC,iBAAiB6hB,IAAOM,UAC1GviB,EAAOoD,KAAK,6BAA6BxB,OAAOK,GAAhDjC,IAEG,CAAC,EAAc3D,KAAKwF,kBAAkBC,EAAU,WAAY,CAAC4f,GAAUzf,WAI1F4b,EAAkB1gB,UAAUqlB,eAAiB,SAAU1gB,EAAU4f,EAASe,GACtE,OAAOjlB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,MAAO,CAAC,EAAczE,KAAKwF,kBAAkBC,EAAU,YAAa,CAAC4f,EAASe,YAInF5E,EAtX4B,CAuXrCE,EAAgBje,cAClB7C,EAAQ4gB,kBAAoBA,G,kCCnc5B,YACA,IAAI6E,EAAYrmB,MAAQA,KAAKqmB,UAAa,WAStC,OARAA,EAAWpmB,OAAO0W,QAAU,SAASnU,GACjC,IAAK,IAAI8jB,EAAGjQ,EAAI,EAAGnT,EAAIyN,UAAUpN,OAAQ8S,EAAInT,EAAGmT,IAE5C,IAAK,IAAIxV,KADTylB,EAAI3V,UAAU0F,GACOpW,OAAOa,UAAUC,eAAeC,KAAKslB,EAAGzlB,KACzD2B,EAAE3B,GAAKylB,EAAEzlB,IAEjB,OAAO2B,GAEJ6jB,EAASlkB,MAAMnC,KAAM2Q,YAE5BxP,EAAanB,MAAQA,KAAKmB,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUV,GAAS,IAAMW,EAAKL,EAAUM,KAAKZ,IAAW,MAAOa,GAAKJ,EAAOI,IACpF,SAASC,EAASd,GAAS,IAAMW,EAAKL,EAAS,MAAUN,IAAW,MAAOa,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAJlB,IAAef,EAIae,EAAOC,KAAOR,EAAQO,EAAOf,QAJ1CA,EAIyDe,EAAOf,MAJhDA,aAAiBK,EAAIL,EAAQ,IAAIK,GAAE,SAAUG,GAAWA,EAAQR,OAITiB,KAAKP,EAAWI,GAClGH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,YAGlEO,EAAepC,MAAQA,KAAKoC,aAAgB,SAAUhB,EAASiB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOjD,OAAUyC,EACvJ,SAASM,EAAKG,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAIe,UAAU,mCAC3B,KAAOX,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARY,EAAG,GAASb,EAAC,OAAaa,EAAG,GAAKb,EAAC,SAAeC,EAAID,EAAC,SAAeC,EAAExB,KAAKuB,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAExB,KAAKuB,EAAGa,EAAG,KAAKnB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGY,EAAK,CAAS,EAARA,EAAG,GAAQZ,EAAEvB,QACzBmC,EAAG,IACP,KAAK,EAAG,KAAK,EAAGZ,EAAIY,EAAI,MACxB,KAAK,EAAc,OAAXV,EAAEC,QAAgB,CAAE1B,MAAOmC,EAAG,GAAInB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKV,EAAEI,IAAIQ,MAAOZ,EAAEG,KAAKS,MAAO,SACxC,QACI,KAAkBd,GAAZA,EAAIE,EAAEG,MAAYU,OAAS,GAAKf,EAAEA,EAAEe,OAAS,MAAkB,IAAVH,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEV,EAAI,EAAG,SACjG,GAAc,IAAVU,EAAG,MAAcZ,GAAMY,EAAG,GAAKZ,EAAE,IAAMY,EAAG,GAAKZ,EAAE,IAAM,CAAEE,EAAEC,MAAQS,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYV,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIY,EAAI,MAC7D,GAAIZ,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIU,KAAKJ,GAAK,MACvDZ,EAAE,IAAIE,EAAEI,IAAIQ,MAChBZ,EAAEG,KAAKS,MAAO,SAEtBF,EAAKf,EAAKrB,KAAKI,EAASsB,GAC1B,MAAOZ,GAAKsB,EAAK,CAAC,EAAGtB,GAAIS,EAAI,EAjBrB,QAiBoCD,EAAIE,EAAI,EACtD,GAAY,EAARY,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEnC,MAAOmC,EAAG,GAAKA,EAAG,QAAK,EAAQnB,MAAM,GArB9BL,CAAK,CAACsB,EAAGC,OAwBzD+S,EAAiBlW,MAAQA,KAAKkW,eAAkB,SAAUxG,EAAI5C,EAAMqJ,GACpE,GAAIA,GAA6B,IAArBxF,UAAUpN,OAAc,IAAK,IAA4B6S,EAAxBC,EAAI,EAAGC,EAAIxJ,EAAKvJ,OAAY8S,EAAIC,EAAGD,KACxED,GAAQC,KAAKvJ,IACRsJ,IAAIA,EAAKjG,MAAMrP,UAAUyV,MAAMvV,KAAK8L,EAAM,EAAGuJ,IAClDD,EAAGC,GAAKvJ,EAAKuJ,IAGrB,OAAO3G,EAAGnK,OAAO6Q,GAAMjG,MAAMrP,UAAUyV,MAAMvV,KAAK8L,KAEtD7M,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQ2lB,cAAgB3lB,EAAQ4lB,gBAAa,EAC7C,IAAIrJ,EAAWjc,EAAQ,KACnBulB,EAAWvlB,EAAQ,KACnBwC,EAASxC,EAAQ,IACjBwlB,EAAWxlB,EAAQ,KACnBylB,EAAWzlB,EAAQ,KAAqBylB,SACxCC,EAAS1lB,EAAQ,KAAmB0lB,OACpCjjB,GAAS,EAAID,EAAOE,aAEpBijB,EAAkB,CAAEC,WAAY,GAAIC,cAAe,KACnDP,EAA4B,WAC5B,SAASA,IACL,IAAI7f,EAAQ3G,KACZA,KAAKsE,UAAY,SAAU0iB,EAASC,EAAcC,GAAa,OAAO/lB,EAAUwF,OAAO,OAAQ,GAAQ,WACnG,IAAIA,EAAQ3G,KACZ,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,MAAO,CAAC,EAAc,IAAIjD,SAAQ,SAAUC,EAASC,GAC7CiC,EAAOoD,KAAK,YAAaigB,EAAzBrjB,GACAgD,EAAMwgB,SAAWH,EACjBrgB,EAAMygB,WAAaF,EACnB,IAAIG,GAAa,EACbJ,IAAiBvjB,EAAOI,UAAUqY,aAAamL,WAC/C3gB,EAAM4gB,UAAY,IAAIX,EAAOI,EAAQje,OAd3C,IAcoE8d,GAE9DlgB,EAAM4gB,UAAU3gB,GAAG,SAAS,WACxBjD,EAAOoD,KAAK,uBAAZpD,GACAgD,EAAM6gB,SAAS5W,gBAEnBjK,EAAM4gB,UAAU3gB,GAAG,SAAS,SAAUoR,GAClCrU,EAAOoK,MAAM,sBAAuBsZ,EAApC1jB,GACI0jB,IAEJ1gB,EAAM8gB,cAAe,EACrB/lB,EAAOsW,QAIXrR,EAAM4gB,UAAY,IAAIZ,EAASK,EAAQje,QAE3CpC,EAAMjC,QAAU,IAAIyY,EAASuK,QAAQ/gB,EAAM4gB,WAAW,WAClD5jB,EAAOoD,KAAK,wBAAwBxB,OAAOoB,EAAM4gB,UAAU1T,MAA3DlQ,GACA0jB,GAAa,EACb1gB,EAAM8gB,cAAe,EACrBhmB,kBAKpBzB,KAAKynB,cAAe,EACpBznB,KAAKwnB,UAAW,EAAI9jB,EAAO4M,cAojB/B,OAljBArQ,OAAOO,eAAegmB,EAAW1lB,UAAW,cAAe,CACvDJ,IAAK,WACD,OAAOV,KAAKynB,cAEhBhnB,YAAY,EACZqE,cAAc,IAElB7E,OAAOO,eAAegmB,EAAW1lB,UAAW,YAAa,CACrDJ,IAAK,WACD,OAAOV,KAAKonB,YAEhB3mB,YAAY,EACZqE,cAAc,IAElB0hB,EAAW1lB,UAAU6mB,QAAU,WAC3B,IAAIljB,EACJd,EAAOoD,KAAK,uBAAZpD,GAC0B,QAAzBc,EAAKzE,KAAKunB,iBAA8B,IAAP9iB,GAAyBA,EAAGmjB,UAC9D5nB,KAAKynB,cAAe,GAExBjB,EAAW1lB,UAAU+mB,gBAAkB,SAAU5e,EAAM6e,GACnD,OAAO3K,EAASlX,IAAI4hB,gBAAgB5e,EAAM6e,IAE9CtB,EAAW1lB,UAAUinB,mBAAqB,SAAUC,EAAcC,GAC9D,OAAO9K,EAASlX,IAAI8hB,mBAAmBC,EAAcC,IAEzDzB,EAAW1lB,UAAUonB,aAAe,SAAUC,GAE1C,IADA,IAAI9Q,EAAO,GACFC,EAAK,EAAGA,EAAK3G,UAAUpN,OAAQ+T,IACpCD,EAAKC,EAAK,GAAK3G,UAAU2G,GAE7B,OAAOnW,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EACA2E,EAAQ3G,KACZ,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,GAAIzE,KAAKynB,cAAgBznB,KAAK0E,QAuB1B,OAtBA1C,EAAS0B,EAAOkU,UAAUC,cAAa,WAAc,OAAO1W,EAAUwF,OAAO,OAAQ,GAAQ,WACzF,IAAIlC,EACAkC,EAAQ3G,KACZ,OAAOoC,EAAYpC,MAAM,SAAUqV,GAC/B,MAAO,CAAC,GAAe5Q,EAAKzE,KAAK0E,SAAS0jB,QAAQjmB,MAAMsC,EAAIyR,EAAc,CAACiS,GAAS9Q,GAAM,IAAQY,OAAM,SAAUlK,GAAS,OAAO5M,EAAUwF,OAAO,OAAQ,GAAQ,WAC3J,IAAIlC,EACJ,OAAOrC,EAAYpC,MAAM,SAAUqV,GAC/B,OAAQA,EAAG1S,OACP,KAAK,EACD,OAA6E,QAAtE8B,EAAe,OAAVsJ,QAA4B,IAAVA,OAAmB,EAASA,EAAM/H,eAA4B,IAAPvB,OAAgB,EAASA,EAAG4jB,cAAcC,SAAS,sBACxI3kB,EAAOoK,MAAM,gCAAiC/N,KAAKmnB,SAAnDxjB,GACA3D,KAAKwnB,SAAS5W,aACP,CAAC,EAAalN,EAAO4H,WAAWa,QAAQ,OAHsH,CAAC,EAAa,GAIvL,KAAK,EAED,MADAkJ,EAAGzS,OACGmL,EACV,KAAK,EAAG,MAAMA,sBAM/B,CAAC,EAAc/L,GAGtB,MAAM,IAAIqD,MAAM,qDAMhCmhB,EAAW1lB,UAAUynB,4BAA8B,WAC/C,OAAOpnB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EACJ,OAAOI,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAKkoB,aAAa,kCAC/C,KAAK,EAED,OADAlmB,EAASyC,EAAG7B,OACL,CAAC,EAAc,IAAIc,EAAOI,UAAUC,iBAAiB/B,YAKhFwkB,EAAW1lB,UAAU0nB,2BAA6B,SAAUtjB,GACxD,OAAO/D,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EACJ,OAAOI,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAKkoB,aAAa,iCAAkChjB,IACjF,KAAK,EAED,OADAlD,EAASyC,EAAG7B,OACL,CAAC,EAAc,IAAIc,EAAOI,UAAUC,iBAAiB/B,EAAOymB,qBAKvFjC,EAAW1lB,UAAU4nB,gBAAkB,SAAUxjB,GAC7C,OAAO/D,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EACJ,OAAOI,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAKkoB,aAAa,iCAAkChjB,IACjF,KAAK,EAED,OADAlD,EAASyC,EAAG7B,OACL,CAAC,EAAc,IAAIc,EAAOI,UAAUC,iBAAiB/B,EAAO2mB,eAAelC,EAASte,gBAAgBM,eAAemgB,kBAK9IpC,EAAW1lB,UAAUmE,cAAgB,SAAUC,GAC3C,OAAO/D,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EACJ,OAAOI,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAKkoB,aAAa,6BAA8BhjB,IAC7E,KAAK,EAED,OADAlD,EAASyC,EAAG7B,OACL,CAAC,EAAc,CACduC,aAAc,IAAIzB,EAAOI,UAAUC,iBAAiB/B,EAAOmD,cAC3D0jB,SAAU,IAAInlB,EAAOI,UAAUC,iBAAiB/B,EAAO6mB,UACvDC,YAAa,IAAIplB,EAAOI,UAAUC,iBAAiB/B,EAAO8mB,uBAMtFtC,EAAW1lB,UAAUioB,UAAY,SAAUzK,EAAShE,EAAW1U,EAAQC,GAEnE,YADgB,IAAZA,IAAsBA,EAAU4gB,EAASte,gBAAgBM,eACtDtH,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgpB,EACJ,OAAO5mB,EAAYpC,MAAM,SAAUyE,GAQ/B,OAPAukB,EAAQ7L,EAAS8L,aACZC,mBAAmB,OAAQ,CAC5BhkB,QAASoZ,EAAQpZ,QACjBoV,UAAWA,EACXzU,QAASA,EACTD,OAAQA,IAEL,CAAC,EAAc5F,KAAKmpB,sBAAsB7K,EAAS0K,WAItExC,EAAW1lB,UAAUwF,mBAAqB,SAAUgY,EAAS8K,EAAoBxjB,GAC7E,OAAOzE,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgpB,EACJ,OAAO5mB,EAAYpC,MAAM,SAAUyE,GAO/B,OANAukB,EAAQ7L,EAAS8L,aACZC,mBAAmB,gBAAiB,CACrChkB,QAASoZ,EAAQpZ,QACjBkkB,mBAAoBA,EACpBxjB,OAAQA,IAEL,CAAC,EAAc5F,KAAKmpB,sBAAsB7K,EAAS0K,WAItExC,EAAW1lB,UAAU0E,kBAAoB,SAAU8Y,EAAS2J,EAAYhiB,EAAKojB,EAAQ/O,EAAW1U,EAAQC,GAGpG,YAFe,IAAXD,IAAqBA,EAAS,UAClB,IAAZC,IAAsBA,EAAU4gB,EAASte,gBAAgBM,eACtDtH,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgpB,EACJ,OAAO5mB,EAAYpC,MAAM,SAAUyE,GAW/B,OAVAukB,EAAQ7L,EAAS8L,aACZC,mBAAmB,eAAgB,CACpChkB,QAASoZ,EAAQpZ,QACjBe,IAAKA,EACLgiB,WAAYA,EACZpiB,QAASA,EACTD,OAAQA,EACR0U,UAAWA,EACX+O,OAAQA,IAEL,CAAC,EAAcrpB,KAAKmpB,sBAAsB7K,EAAS0K,WAItExC,EAAW1lB,UAAUwoB,oBAAsB,SAAUhL,EAASrY,EAAKsjB,GAC/D,OAAOpoB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAoDgpB,EACpD,OAAO5mB,EAAYpC,MAAM,SAAUyE,GAc/B,OAbkB,EACA,GACH,EACfukB,EAAQ7L,EAAS8L,aACZC,mBAAmB,iBAAkB,CACtChkB,QAASoZ,EAAQpZ,QACjBe,IAAKA,EACLujB,KAAMD,EACNE,gBARc,EASdJ,OAAQ,GACRK,gBATc,GAUdC,aATW,IAWR,CAAC,EAAc3pB,KAAKmpB,sBAAsB7K,EAAS0K,WAItExC,EAAW1lB,UAAUiiB,wBAA0B,SAAU6G,EAAiB3jB,EAAK4jB,EAAcR,GACzF,OAAOloB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIuM,EAAMud,EAAY9nB,EAAQ+nB,EAAaC,EAAYC,EAAsBC,EAAY7T,EACzF,OAAOjU,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAGD,OAFA4J,EAAO4Q,EAASlX,IAAIkkB,mBAAmBlkB,EAAKojB,GAC5CS,EAAajd,EAAOC,KAAKP,EAAM,OAAO3C,SAAS,UACxC,CAAC,EAAa5J,KAAKkoB,aAAa,8BAA+B,CAC9DkC,SAAUR,EACVS,aAAcR,EACdtd,KAAMud,KAElB,KAAK,EAED,GADA9nB,EAASyC,EAAG7B,OACA,CAGR,IAFAmnB,EAAcld,EAAOC,KAAK9K,EAAQ,UAAU4H,SAAS,OACrDogB,EAAU,GACL3T,EAAI,EAAGA,EAAIpQ,EAAI+jB,QAAQzmB,OAAQ8S,IAChC2T,EAAQxmB,KAAKyC,EAAI+jB,QAAQ3T,GAAGpN,MAIhC,GAFAghB,EAAuB9M,EAASlX,IAAIqkB,iBAAiBN,EAASD,GAC9DG,EAAa,GACTD,EACA,IAAK5T,EAAI,EAAGA,EAAIpQ,EAAI+jB,QAAQzmB,OAAQ8S,IAC5BpQ,EAAI+jB,QAAQ3T,GAAGhS,KACf6lB,EAAW1mB,KAAK,CACZa,KAAM4B,EAAI+jB,QAAQ3T,GAAGhS,KACrBpD,MAAOgpB,EAAqB5T,KAIhC6T,EAAW1mB,KAAK,CACZa,KAAM,GACNpD,MAAOgpB,EAAqB5T,KAK5C,MAAO,CAAC,EAAc6T,GAE1B,MAAO,CAAC,EAAc,YAK1C1D,EAAW1lB,UAAUmG,YAAc,SAAUD,EAAOf,GAEhD,IADA,IAAIskB,EAASvjB,EAAMujB,OACVC,EAAI,EAAGA,EAAIvkB,EAAI1C,OAAQinB,IAAK,CACjC,IAAIC,EAAUxkB,EAAIukB,GAClB,GAAIrN,EAASlX,IAAI8hB,mBAAmB0C,KAAaF,EAAO,GAAI,CACxD,IAAIvoB,EAAShC,KAAK0qB,qBAAqB1jB,EAAOyjB,GAC9C,GAAIzoB,EACA,OAAOA,KAMvBwkB,EAAW1lB,UAAU4pB,qBAAuB,SAAU1jB,EAAOyjB,GACzD,GAAKzjB,GAAUA,EAAMuF,MAASvF,EAAMujB,OAApC,CAGA,IAAIA,EAASvjB,EAAMujB,OAMnB,MALU,CACNI,MAAOJ,EAAO,GACdlT,KAAM8F,EAASlX,IAAI2kB,UAAUH,EAAQI,OAAQ1N,EAAS2N,MAAMC,QAAQje,KAAK9F,EAAMuF,KAAM,UAAU3C,SAAS,OAAQ2gB,EAAOhU,MAAM,IAC7H3E,MAAO6Y,EAAQpmB,QAIvBmiB,EAAW1lB,UAAUkqB,sBAAwB,SAAU9lB,EAAS+lB,EAAYC,EAAUX,GAClF,OAAOppB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAImrB,EAA0BC,EAC1B3mB,EACJ,OAAOrC,EAAYpC,MAAM,SAAUqV,GAC/B,OAAQA,EAAG1S,OACP,KAAK,EACD,GAAIsoB,EAAWlW,GAAGmW,GAEd,OADAvnB,EAAOoD,KAAK,yBAAyBxB,OAAO0lB,EAAW/E,UAAW,OAAO3gB,OAAO2lB,EAAShF,WAAzFviB,GACO,CAAC,EAAc,IAE1BwnB,EAAU,CACNE,oBAAqB5mB,EAAK,GACtBA,EAAGS,GAAW,CACV+lB,WAAYA,EAAW/E,UACvBgF,SAAUA,EAAShF,WAEvBzhB,GACJ8lB,OAAQA,GAEZlV,EAAG1S,MAAQ,EACf,KAAK,EAED,OADA0S,EAAGxS,KAAKW,KAAK,CAAC,EAAG,EAAJ,CAAS,IACf,CAAC,EAAaxD,KAAKkoB,aAAa,2BAA4BiD,IACvE,KAAK,EAED,MAAO,CAAC,EADC9V,EAAGzS,QAEhB,KAAK,EAID,OAHUyS,EAAGzS,OACbwoB,EAAYH,EAAWhF,KAAKiF,GAAUtd,IAAI,GAC1CjK,EAAOoD,KAAK,wCAAwCxB,OAAO0lB,EAAW/E,UAAW,eAAe3gB,OAAO2lB,EAAShF,UAAW,gBAAgB3gB,OAAO6lB,EAAUlF,WAA5JviB,GACO,CAAC,EAAa3D,KAAKgrB,sBAAsB9lB,EAASkmB,EAAUnF,KAAK,GAAIiF,EAAUX,IAC1F,KAAK,EAGD,MAAO,CAAC,EAFDlV,EAAGzS,QAGd,KAAK,EAAG,MAAO,CAAC,WAKhC4jB,EAAW1lB,UAAU0F,2BAA6B,SAAUtB,GACxD,IAAIT,EACJ,OAAOtD,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAImrB,EACA9V,EACJ,OAAOjT,EAAYpC,MAAM,SAAUiV,GAC/B,OAAQA,EAAGtS,OACP,KAAK,EASD,OARAwoB,EAAU,CACNE,oBAAqBhW,EAAK,GACtBA,EAAGnQ,GAAW,CACV+lB,WAAY,IACZC,SAAU,KAEd7V,IAED,CAAC,EAAsC,QAAvB5Q,EAAKzE,KAAK0E,eAA4B,IAAPD,OAAgB,EAASA,EAAG6mB,UAAU,0BAA2BH,IAC3H,KAAK,EAED,MAAO,CAAC,EADClW,EAAGrS,gBAMhC4jB,EAAW1lB,UAAUyqB,eAAiB,SAAU3Z,GAC5C,IAAInN,EACJd,EAAOoD,KAAK,iBAAZpD,GACwB,QAAvBc,EAAKzE,KAAK0E,eAA4B,IAAPD,GAAyBA,EAAG+mB,YAAY5Z,IAE5E4U,EAAW1lB,UAAU2qB,2BAA6B,SAAU/kB,EAAUT,GAClE,OAAO9E,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAI2G,EAAQ3G,KACZ,OAAOoC,EAAYpC,MAAM,SAAUyE,GAE/B,OADAd,EAAOoD,KAAK,wBAAZpD,GACO,CAAC,EAAc,IAAInC,SAAQ,SAAUC,GAAW,OAAON,EAAUwF,OAAO,OAAQ,GAAQ,WACvF,IAAIA,EAAQ3G,KACZ,OAAOoC,EAAYpC,MAAM,SAAUyE,GAoB/B,OAjBAiC,EAASE,IAAG,SAAUC,GAAW,OAAO1F,EAAUwF,OAAO,OAAQ,GAAQ,WACrE,IAAI3E,EAAQgF,EACZ,OAAO5E,EAAYpC,MAAM,SAAUyE,GAC/B,GAAuB,IAAnBoC,EAAQtD,OAER,MADAkS,QAAQC,IAAI7O,GACN,IAAIxB,MAAM,sBASpB,OAPArD,EAAS6E,EAAQA,EAAQtD,OAAS,GAClCyD,EAAQhH,KAAKiH,YAAYjF,EAAOkF,MAAOjB,GACvCtC,EAAOoD,KAAK,QAASC,EAArBrD,GAIAlC,EAAQuF,GACD,CAAC,YAGT,CAAC,oBAMhCwf,EAAW1lB,UAAUoF,yBAA2B,SAAUhB,EAASiB,GAC/D,OAAOhF,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAI2G,EAAQ3G,KACZ,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,MAAO,CAAC,EAAc,IAAIjD,SAAQ,SAAUC,EAASC,GAAU,OAAOP,EAAUwF,OAAO,OAAQ,GAAQ,WAC/F,IAAI3E,EAAQ+L,EAAOkJ,EAAWkB,EAC1BxR,EAAQ3G,KACZ,OAAOoC,EAAYpC,MAAM,SAAUyE,GA+C/B,OA9CAzC,OAASzB,EACTwN,OAAQxN,EACR0W,EAAYC,KAAKwU,MACjBvT,EAAO,IAAIzU,EAAOwU,MAAK,WAAc,OAAO/W,EAAUwF,OAAO,OAAQ,GAAQ,WACzE,IAAIglB,EAAeC,EAAkBC,EAAaC,EAClD,OAAO1pB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAED,GADA8B,EAAG5B,KAAKW,KAAK,CAAC,EAAG,EAAJ,CAAS,IAClB0T,KAAKwU,MAAQzU,GA5avC,IA6a0B,MAAM,IAAI5R,MAAM,kBAEpB,MAAO,CAAC,EAAarF,KAAKkoB,aAAa,iCAAkChjB,EAASiB,IACtF,KAAK,EAED,OADAwlB,EAAgBlnB,EAAG7B,UAInBgpB,EAAmBD,EAAcC,kBAI1B,CAAC,EAAa5rB,KAAKkoB,aAAa,+BAAgC0D,IAN5D,CAAC,GAAc,GAO9B,KAAK,EAED,OADAC,EAAcpnB,EAAG7B,SAIjBZ,EAASqkB,EAASA,EAAS,GAAIrmB,KAAK+rB,sBAAsBF,IAAe,CAAE5C,aAAc4C,IAClF,CAAC,GAAc,IAHX,CAAC,GAAc,GAI9B,KAAK,EAGD,OAFAC,EAAQrnB,EAAG7B,OACXmL,EAAQ+d,EACD,CAAC,GAAc,GAC1B,KAAK,EAAG,MAAO,CAAC,YAGrB,KACP3T,EAAKQ,OAAM,WACH5K,EACArM,EAAOqM,GAGPtM,EAAQO,MAGT,CAAC,oBAMhCwkB,EAAW1lB,UAAUkrB,wBAA0B,SAAU1N,EAAS0K,GAC9D,OAAO7nB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIisB,EAAQC,EACZ,OAAO9pB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EACD,OAAMqmB,EAAc,CAAC,EAAa,GAC3B,CAAC,EAAahpB,KAAKkoB,aAAa,sCAAuC5J,EAAQpZ,QAAS,EAAG,IACtG,KAAK,GACD+mB,EAASxnB,EAAG7B,SACEqpB,EAAO1oB,OAAS,IAC1BylB,EAAQiD,EAAO,IAEnBxnB,EAAG9B,MAAQ,EACf,KAAK,EACD,OAAKqmB,GAILkD,EAAK/O,EAAS8L,aACTC,mBAAmB,UAAW,CAC/BhkB,QAASoZ,EAAQpZ,QACjBinB,cAAenD,EAAMoD,OAElB,CAAC,EAAcpsB,KAAKmpB,sBAAsB7K,EAAS4N,MARtDvoB,EAAOoD,KAAK,yBAAyBxB,OAAO+Y,EAAQpZ,SAApDvB,GACO,CAAC,YAYhC6iB,EAAW1lB,UAAUurB,wBAA0B,SAAU/N,GACrD,OAAOnd,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIssB,EAAmBL,EAAQ5V,EAAG2S,EAClC,OAAO5mB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAED,OADA2pB,EAAoB,GACb,CAAC,EAAatsB,KAAKkoB,aAAa,sCAAuC5J,EAAQpZ,QAAS,EAAGonB,IACtG,KAAK,EACDL,EAASxnB,EAAG7B,OACZyT,EAAI,EACJ5R,EAAG9B,MAAQ,EACf,KAAK,EACD,OAAM0T,EAAI4V,EAAO1oB,QACjBylB,EAAQiD,EAAO5V,GACR,CAAC,EAAarW,KAAKgsB,wBAAwB1N,EAAS0K,KAF1B,CAAC,EAAa,GAGnD,KAAK,EACDvkB,EAAG7B,OACH6B,EAAG9B,MAAQ,EACf,KAAK,EAED,OADA0T,IACO,CAAC,EAAa,GACzB,KAAK,EACD,OAAM4V,EAAO1oB,QAAU+oB,EAChB,CAAC,EAAatsB,KAAKqsB,wBAAwB/N,IADA,CAAC,EAAa,GAEpE,KAAK,EACD7Z,EAAG7B,OACH6B,EAAG9B,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,WAKhC6jB,EAAW1lB,UAAUqoB,sBAAwB,SAAU7K,EAAS0K,GAC5D,OAAO7nB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAYgC,EAAQuqB,EACpB,OAAOnqB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EACD,OAAM2b,aAAmBoI,EAASlH,iBAE3B,CAAC,GADRwJ,EAAQA,EAAMwD,YAAYxsB,KAAK0E,SAAS+nB,cAAcnO,EAAQe,aACnCqN,+BAFiC,CAAC,EAAa,GAG9E,KAAK,EAED,OADAjoB,EAAG7B,OACI,CAAC,EAAaomB,EAAM2D,OAAOC,QACtC,KAAK,EAED,MAAO,CAAC,EADR5qB,EAASyC,EAAG7B,QAEhB,KAAK,EACD,KAAM0b,aAAmBoI,EAAS/G,sBAAuB,MAAO,CAAC,EAAa,IAC9E,IAAK3f,KAAKknB,UAAW,MAAO,CAAC,EAAa,GAC1ClnB,KAAKwnB,SAASrW,8BAA6B,GAC3C1M,EAAG9B,MAAQ,EACf,KAAK,EAED,OADA8B,EAAG5B,KAAKW,KAAK,CAAC,EAAG,EAAJ,CAAS,IACf,CAAC,EAAaxD,KAAKknB,UAAU2F,qBAAqB,CACjD7D,MAAOA,EAAMC,gBAEzB,KAAK,EAGD,OAFAjnB,EAASyC,EAAG7B,OACZ5C,KAAKwnB,SAASrW,8BAA6B,GACpC,CAAC,EAAcnP,GAC1B,KAAK,EAGD,MAFAuqB,EAAU9nB,EAAG7B,OACb5C,KAAKwnB,SAASrW,8BAA6B,GACrCob,EACV,KAAK,EAAG,MAAO,CAAC,EAAa,GAC7B,KAAK,EAAG,MAAM,IAAIlnB,MAAM,4BACxB,KAAK,EAAG,MAAO,CAAC,EAAa,IAC7B,KAAK,GAAI,MAAM,IAAIA,MAAM,yBACzB,KAAK,GAAI,MAAO,CAAC,WAKjCmhB,EAAW1lB,UAAUirB,sBAAwB,SAAU9C,GACnD,IAAI6D,EAAS9sB,KAAK+sB,wBAAwB9D,GACtC+D,EAAY,GAChB,OAAQF,GACJ,KAAK,EACDE,EAAY,uBACZ,MACJ,KAAK,EACDA,EAAY,wBACZ,MACJ,KAAK,EACDA,EAAY,6BAGpB,MAAO,CACHF,OAAQA,EACRE,UAAWA,IAGnBxG,EAAW1lB,UAAUisB,wBAA0B,SAAU9D,GACrD,GAAgC,IAA3BA,EAAagE,WAA8C,IAA3BhE,EAAagE,YAC7ChE,EAAa1c,KACd,OAAO,EAEX,IAAI2gB,EAAQ/P,EAAS2N,MAAMC,QAAQje,KAAKmc,EAAa1c,KAAM,UAC3D,OAAqB,KAAjB2gB,EAAM3pB,OACC,EAEJ2pB,EAAM,KAEV1G,EA3lBqB,GA6lBhC5lB,EAAQ4lB,WAAaA,EACrB,IAAIjiB,EAAS,IAAIiiB,EAIjB5lB,EAAQ2lB,cAHY,WAChB,OAAOhiB,K,2DCnqBX,IAAIpD,EAAanB,MAAQA,KAAKmB,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUV,GAAS,IAAMW,EAAKL,EAAUM,KAAKZ,IAAW,MAAOa,GAAKJ,EAAOI,IACpF,SAASC,EAASd,GAAS,IAAMW,EAAKL,EAAS,MAAUN,IAAW,MAAOa,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAJlB,IAAef,EAIae,EAAOC,KAAOR,EAAQO,EAAOf,QAJ1CA,EAIyDe,EAAOf,MAJhDA,aAAiBK,EAAIL,EAAQ,IAAIK,GAAE,SAAUG,GAAWA,EAAQR,OAITiB,KAAKP,EAAWI,GAClGH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,YAGlEO,EAAepC,MAAQA,KAAKoC,aAAgB,SAAUhB,EAASiB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOjD,OAAUyC,EACvJ,SAASM,EAAKG,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAIe,UAAU,mCAC3B,KAAOX,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARY,EAAG,GAASb,EAAC,OAAaa,EAAG,GAAKb,EAAC,SAAeC,EAAID,EAAC,SAAeC,EAAExB,KAAKuB,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAExB,KAAKuB,EAAGa,EAAG,KAAKnB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGY,EAAK,CAAS,EAARA,EAAG,GAAQZ,EAAEvB,QACzBmC,EAAG,IACP,KAAK,EAAG,KAAK,EAAGZ,EAAIY,EAAI,MACxB,KAAK,EAAc,OAAXV,EAAEC,QAAgB,CAAE1B,MAAOmC,EAAG,GAAInB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKV,EAAEI,IAAIQ,MAAOZ,EAAEG,KAAKS,MAAO,SACxC,QACI,KAAkBd,GAAZA,EAAIE,EAAEG,MAAYU,OAAS,GAAKf,EAAEA,EAAEe,OAAS,MAAkB,IAAVH,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEV,EAAI,EAAG,SACjG,GAAc,IAAVU,EAAG,MAAcZ,GAAMY,EAAG,GAAKZ,EAAE,IAAMY,EAAG,GAAKZ,EAAE,IAAM,CAAEE,EAAEC,MAAQS,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYV,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIY,EAAI,MAC7D,GAAIZ,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIU,KAAKJ,GAAK,MACvDZ,EAAE,IAAIE,EAAEI,IAAIQ,MAChBZ,EAAEG,KAAKS,MAAO,SAEtBF,EAAKf,EAAKrB,KAAKI,EAASsB,GAC1B,MAAOZ,GAAKsB,EAAK,CAAC,EAAGtB,GAAIS,EAAI,EAjBrB,QAiBoCD,EAAIE,EAAI,EACtD,GAAY,EAARY,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEnC,MAAOmC,EAAG,GAAKA,EAAG,QAAK,EAAQnB,MAAM,GArB9BL,CAAK,CAACsB,EAAGC,OAwB7DlD,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQusB,oBAAiB,EACzB,IAAI1G,EAAWvlB,EAAQ,KACnBksB,EAAWlsB,EAAQ,KACnBwC,EAASxC,EAAQ,IACjByC,GAAS,EAAID,EAAOE,aACpBupB,EAAgC,WAChC,SAASA,IACLntB,KAAKqtB,iBAAmB,IAAIzL,IAC5B5hB,KAAKwnB,UAAW,EAAI9jB,EAAO4M,cAC3BtQ,KAAKstB,aAAc,EAAIF,EAAS9M,iBAChCtgB,KAAKof,QAkUT,OAhUA+N,EAAersB,UAAUse,MAAQ,WAC7Bpf,KAAKutB,gBAAkB,GACvBvtB,KAAKwtB,OAAS,GACdxtB,KAAKytB,eAAiB,CAClBtiB,OAAQsb,EAAS5e,wBAAwBsD,OACzCC,QAASqb,EAAS5e,wBAAwBuD,QAC1CsiB,WAAYjH,EAAS5e,wBAAwBwD,OAC7CsiB,MAAO,KAGfR,EAAersB,UAAU8sB,wBAA0B,WAC/C,OAAOzsB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAI6tB,EACJ,OAAOzrB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK8tB,SAASla,cAAc,gDACzD,KAAK,EAID,OAHAia,EAAappB,EAAG7B,OAChBirB,EAAarhB,KAAKuhB,MAAMF,GACxB7tB,KAAKutB,gBAAkBM,EAChB,CAAC,WAK5BV,EAAersB,UAAUktB,eAAiB,WACtC,IAAIvpB,EAAI4Q,EAAIJ,EAAIC,EAChB,OAAO/T,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAI2U,EAAOsZ,EAAOnnB,EAAOjG,EAAGkG,EAAMmnB,EAClC,OAAO9rB,EAAYpC,MAAM,SAAUmV,GAC/B,OAAQA,EAAGxS,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK8tB,SAASla,cAAc,kCAA6D,WACtH,KAAK,EAQD,IAPAe,EAAQQ,EAAGvS,OACX+R,EAAQnI,KAAKuhB,MAAMrqB,EAAO4L,aAAaK,WAAWjM,EAAO4H,WAAWoB,aAAaiI,MACjFsZ,EAAQjuB,KAAKmuB,aACCF,EAAM1qB,SAAWkjB,EAASte,gBAAgBS,cACpDjF,EAAOoD,KAAK,qBAAZpD,GACAsqB,EAAQjuB,KAAKouB,uBAEZtnB,EAAQ,EAAGA,EAAQ6N,EAAMpR,OAAQuD,IAClCjG,EAAI8T,EAAM7N,GACVC,EAAOknB,EAAMnnB,GACbonB,EAAO,CACHvT,WAAYjX,EAAOI,UAAU8W,UAAUwB,KACvCvT,GAAIhI,EAAEiG,MAAM8C,WACZiL,KAAMhU,EAAEgU,KACRiI,MAAOjc,EAAEic,MACTC,IAAsB,QAAhBtY,EAAK5D,EAAEkc,WAAwB,IAAPtY,EAAgBA,EAAK,IACnDopB,WAAYhtB,EAAEgtB,WACdzS,MAA6B,QAArB/F,EAAKtO,EAAKqU,aAA0B,IAAP/F,EAAgBA,EAAK,KAC1DhL,IAAyB,QAAnB4K,EAAKlO,EAAKsD,WAAwB,IAAP4K,EAAgBA,EAAK,KACtDK,MAA6B,QAArBJ,EAAKnO,EAAKuO,aAA0B,IAAPJ,EAAgBA,EAAK,MAE9DlV,KAAKwtB,OAAOhqB,KAAK0qB,GACbluB,KAAKytB,eAAeriB,UAAY1H,EAAOI,UAAUoF,QAAQC,IACzDnJ,KAAKytB,eAAeE,MAAMnqB,KAAK0qB,GAG/BluB,KAAKytB,eAAeE,MAAMU,QAAQH,GAG1C,MAAO,CAAC,WAK5Bf,EAAersB,UAAUwtB,iBAAmB,WACxC,IAAI7pB,EAAI4Q,EAAIJ,EACZ,OAAO9T,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAI8G,EAAOjG,EAAGkG,EACd,OAAO3E,EAAYpC,MAAM,SAAUkV,GAC/B,GAAIlV,KAAKmuB,WACL,IAAKrnB,EAAQ,EAAGA,EAAQ9G,KAAKwtB,OAAOjqB,OAAQuD,IACxCjG,EAAIb,KAAKwtB,OAAO1mB,GAChBC,EAAO/G,KAAKmuB,WAAWrnB,GACvBjG,EAAEua,MAA8B,QAArB3W,EAAKsC,EAAKqU,aAA0B,IAAP3W,EAAgBA,EAAK,KAC7D5D,EAAEwJ,IAA0B,QAAnBgL,EAAKtO,EAAKsD,WAAwB,IAAPgL,EAAgBA,EAAK,KACzDxU,EAAEyU,MAA8B,QAArBL,EAAKlO,EAAKuO,aAA0B,IAAPL,EAAgBA,EAAK,KAGrE,MAAO,CAAC,UAIpBkY,EAAersB,UAAUytB,yBAA2B,WAChD,OAAOptB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIwuB,EAAmBlX,EAAI7S,EAAI5D,EAAG4tB,EAAYC,EAC1C/nB,EAAQ3G,KACZ,OAAOoC,EAAYpC,MAAM,SAAUqV,GAU/B,IATArV,KAAKqtB,iBAAmB,IAAIzL,IAC5B4M,EAAoB,SAAUvb,EAAU0b,GACpC,IAAIC,EAAWjoB,EAAM0mB,iBAAiB3sB,IAAIuS,GACrC2b,IACDA,EAAW,GACXjoB,EAAM0mB,iBAAiB9lB,IAAI0L,EAAU2b,IAEzCA,EAASprB,KAAKmrB,IAEbrX,EAAK,EAAG7S,EAAKzE,KAAKwtB,OAAQlW,EAAK7S,EAAGlB,OAAQ+T,KAC3CzW,EAAI4D,EAAG6S,IACD8D,QAAU1X,EAAO4H,WAAWS,mBAAmBlL,EAAEua,SAC/Cva,EAAEwJ,KAAOxJ,EAAEwJ,IAAI4M,YACfwX,EAAa,CACTxX,UAAWpW,EAAEwJ,IAAI4M,UACjB8E,YAAarY,EAAOI,UAAU2Y,mBAAmBoS,IACjD5T,OAAQpP,SAAShL,EAAEgI,IACnBuS,MAAOva,EAAEua,MACTxV,OAAQ/E,EAAEwJ,IAAIzE,OACdV,QAASrE,EAAEwJ,IAAIoR,QAEnB+S,EAAkB3tB,EAAEua,MAAOqT,GACvBA,EAAWvpB,UAAYxB,EAAO4H,WAAWS,mBAAmB0iB,EAAWvpB,UAAYupB,EAAWvpB,UAAYrE,EAAEua,OAC5GoT,EAAkBC,EAAWvpB,QAASupB,IAG1C5tB,EAAEyU,OAASzU,EAAEyU,MAAM2B,YACnByX,EAAe,CACXzX,UAAWpW,EAAEyU,MAAM2B,UACnB8E,YAAarY,EAAOI,UAAU2Y,mBAAmB3S,MACjDmR,OAAQpP,SAAShL,EAAEgI,IACnBuS,MAAOva,EAAEua,MACTxV,OAAQ/E,EAAEyU,MAAMC,UAChBrQ,QAASrE,EAAEyU,MAAMsG,YAErB4S,EAAkB3tB,EAAEua,MAAOsT,GACvBA,EAAaxpB,UAAYxB,EAAO4H,WAAWS,mBAAmB2iB,EAAaxpB,UAAYwpB,EAAaxpB,UAAYrE,EAAEua,OAClHoT,EAAkBE,EAAaxpB,QAASwpB,KAKxD,MAAO,CAAC,UAIpBvB,EAAersB,UAAUguB,cAAgB,SAAU9H,EAASC,EAAcC,GACtE,OAAO/lB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAGD,OAFAgB,EAAOoD,KAAK,sBAAZpD,GACA3D,KAAKof,QACE,CAAC,EAAapf,KAAKsE,UAAU0iB,EAASC,EAAcC,IAC/D,KAAK,EAED,OADAziB,EAAG7B,OACI,CAAC,EAAa5C,KAAK4tB,2BAC9B,KAAK,EAED,OADAnpB,EAAG7B,OACI,CAAC,EAAa5C,KAAK+uB,sBAC9B,KAAK,EAED,OADAtqB,EAAG7B,OACI,CAAC,EAAa5C,KAAKguB,kBAC9B,KAAK,EAGD,OAFAvpB,EAAG7B,OACH5C,KAAKstB,YAAYxmB,MAAM9G,KAAKwtB,QACrB,CAAC,WAK5BL,EAAersB,UAAU6mB,QAAU,WAC/BhkB,EAAOoD,KAAK,2BAAZpD,GACA3D,KAAKgvB,oBAET7B,EAAersB,UAAUmuB,WAAa,WAClC,IAAI3Q,EAAUte,KAAKkvB,cAAcnQ,mBAEjC,OADArb,EAAO4O,OAAOC,QAAQ+L,EAAS,UAAW,qCACnCA,GAEX6O,EAAersB,UAAUquB,uBAAyB,WAC9C,OAAOhuB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,MAAO,CAAC,EAAczE,KAAKutB,wBAIvCJ,EAAersB,UAAUsuB,aAAe,SAAUvmB,GAC9C,OAAO1H,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIib,EACJ,OAAO7Y,EAAYpC,MAAM,SAAUyE,GAC/B,IAAKf,EAAO4H,WAAWK,SAAS9C,GAC5B,MAAM,IAAIxD,MAAM,4BAGpB,IADA4V,EAASpP,SAAShD,GAAM,GACX,GAAKoS,GAAUjb,KAAKwtB,OAAOjqB,OACpC,MAAM,IAAI8B,MAAM,wBAEpB,MAAO,CAAC,EAAcrF,KAAKwtB,OAAOvS,WAI9CkS,EAAersB,UAAUuuB,cAAgB,SAAUC,EAAQC,EAASC,EAAOC,EAAQC,GAC/E,IAAIjrB,EAAI4Q,EACR,OAAOlU,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUiV,GAU/B,OARIjV,KAAKytB,eAAeC,aAAegC,GAAW1vB,KAAKytB,eAAetiB,SAAWqkB,GAASxvB,KAAKytB,eAAeriB,UAAYqkB,IACtH9rB,EAAOoD,KAAK,QAASuoB,EAAQ,SAAUC,EAAS,OAAQC,EAAO,QAASC,EAAxE9rB,GACA3D,KAAKytB,eAAeC,WAAagC,EACjC1vB,KAAKytB,eAAeE,MAAiE,QAAxDlpB,EAAKzE,KAAKstB,YAAYjiB,OAAOqkB,EAAS1vB,KAAKwtB,eAA4B,IAAP/oB,EAAgBA,EAAK,GAClHzE,KAAKytB,eAAetiB,OAASqkB,EAC7BxvB,KAAKytB,eAAeriB,QAAUqkB,EAC9BzvB,KAAKytB,eAAeE,MAAmI,QAA1HtY,EAAK3R,EAAO4Q,WAAWE,UAAUxU,KAAKytB,eAAetiB,OAAQnL,KAAKytB,eAAeriB,QAASpL,KAAKytB,eAAeE,cAA2B,IAAPtY,EAAgBA,EAAK,IAEjL,CAAC,EAAcrV,KAAKytB,eAAeE,MAAMpX,MAAMgZ,EAASA,EAAUD,WAIrFnC,EAAersB,UAAU6uB,iBAAmB,WACxC,OAAOxuB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,MAAO,CAAC,EAAczE,KAAKwtB,eAIvCL,EAAersB,UAAU8uB,oBAAsB,WAC3C,OAAOzuB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EACJ,OAAOI,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EACD,OAAM3C,KAAK6vB,aAAqB,CAAC,EAAa,GACvC,CAAC,EAAa7vB,KAAKwjB,sBAC9B,KAAK,EACDxhB,EAASyC,EAAG7B,OACZ5C,KAAK6vB,aAAe7tB,EAAO+hB,YAC3Btf,EAAG9B,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAc3C,KAAK6vB,sBAKnD1C,EAAersB,UAAUgvB,kBAAoB,WACzC,OAAO3uB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EACJ,OAAOI,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EACD,OAAM3C,KAAK8kB,WAAmB,CAAC,EAAa,GACrC,CAAC,EAAa9kB,KAAKwjB,sBAC9B,KAAK,EACDxhB,EAASyC,EAAG7B,OACZ5C,KAAK8kB,WAAa9iB,EAAO6hB,UACzBpf,EAAG9B,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAc3C,KAAK8kB,oBAKnDqI,EAAersB,UAAUivB,wBAA0B,SAAU9c,EAAUqc,EAAQU,GAC3E,IAAIvrB,EAAI4Q,EACR,OAAOlU,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIiwB,EAAarB,EAAU5sB,EAC3B,OAAOI,EAAYpC,MAAM,SAAUiV,GAC/B,OAAQA,EAAGtS,OACP,KAAK,EAID,OAHAgB,EAAOoD,KAAK,0BAA2BkM,EAAUqc,EAAQU,EAAzDrsB,GACAssB,EAAc,EACdrB,EAAW,GACJoB,IAAWtsB,EAAO4H,WAAWS,mBAAmBikB,GAAkB,CAAC,EAAa,GAChF,CAAC,EAAahwB,KAAK+uB,sBAC9B,KAAK,EAED,OADA9Z,EAAGrS,OACI,CAAC,EAAa5C,KAAKsuB,oBAC9B,KAAK,EAED,OADArZ,EAAGrS,OACI,CAAC,EAAa5C,KAAKuuB,4BAC9B,KAAK,EAID,OAHAtZ,EAAGrS,OACH5C,KAAKkwB,qBAAqBjd,GAC1B2b,EAA0D,QAA9CnqB,EAAKzE,KAAKqtB,iBAAiB3sB,IAAIuS,UAA8B,IAAPxO,EAAgBA,EAAK,GAChF,CAAC,EAAa,GACzB,KAAK,EACDmqB,EAA0D,QAA9CvZ,EAAKrV,KAAKqtB,iBAAiB3sB,IAAIuS,UAA8B,IAAPoC,EAAgBA,EAAK,GACvF4a,EAAcrB,EAASuB,WAAU,SAAUruB,GAAK,OAAOA,EAAEmV,UAAUmZ,GAAG,IAAI1sB,EAAOI,UAAUC,iBAAiBisB,OAC5GrsB,EAAOoD,KAAK,SAAUipB,EAAS,cAAeC,EAA9CtsB,IACqB,IAAjBssB,GACAtsB,EAAOoD,KAAK,iDAAZpD,GACAirB,EAAW,IAGXA,EAAWA,EAASrY,MAAM0Z,EAAc,GAE5Chb,EAAGtS,MAAQ,EACf,KAAK,EAED,OADAX,EAAS4sB,EAASrY,MAAM,EAAG+Y,GACpB,CAAC,EAAc,CACde,OAAQ,CACJC,KAAkB,OAAZN,QAAgC,IAAZA,EAAqBA,EAAU,KACzDnuB,KAAM+sB,EAASrrB,OAAS+rB,EAASttB,EAAOA,EAAOuB,OAAS,GAAG0T,UAAUiP,UAAY,MAErF0I,SAAU5sB,YAMtCmrB,EAAersB,UAAUyvB,SAAW,WAChC,OAAO7sB,EAAO4H,WAAW8C,QAE7B+e,EAAersB,UAAUstB,oBAAsB,WAE3C,IADA,IAAIH,EAAQ,GACHnnB,EAAQ,EAAGA,GAAS2f,EAASte,gBAAgBS,YAAa9B,IAC/DmnB,EAAMzqB,KAAK,CACPqF,GAAI/B,EAAM8C,aAGlB,OAAOqkB,GAEXd,EAAersB,UAAUovB,qBAAuB,SAAUjd,GACtD,IAAI2b,EAAW5uB,KAAKqtB,iBAAiB3sB,IAAIuS,GACpC2b,IAGLA,EAAWA,EAASna,MAAK,SAAUO,EAAGhF,GAClC,OAAOgF,EAAEiC,UAAUlC,GAAG/E,EAAEiH,YAAc,EAAI,KAE9CjX,KAAKqtB,iBAAiB9lB,IAAI0L,EAAU2b,KAEjCzB,EAvUyB,GAyUpCvsB,EAAQusB,eAAiBA,G,iCCnXzB,IAAItd,EAAa7P,MAAQA,KAAK6P,WAAe,WACzC,IAAIC,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgB7P,OAAOgQ,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUJ,EAAGC,GAAKD,EAAEG,UAAYF,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAInP,KAAKmP,EAAO/P,OAAOa,UAAUC,eAAeC,KAAKgP,EAAGnP,KAAIkP,EAAElP,GAAKmP,EAAEnP,KACzFiP,EAAcC,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAChB,GAAiB,oBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAI3M,UAAU,uBAAyBqI,OAAOsE,GAAK,iCAE7D,SAASI,IAAOpQ,KAAKqQ,YAAcN,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEjP,UAAkB,OAANkP,EAAa/P,OAAOC,OAAO8P,IAAMI,EAAGtP,UAAYkP,EAAElP,UAAW,IAAIsP,IAZ1C,GAezCjP,EAAanB,MAAQA,KAAKmB,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUV,GAAS,IAAMW,EAAKL,EAAUM,KAAKZ,IAAW,MAAOa,GAAKJ,EAAOI,IACpF,SAASC,EAASd,GAAS,IAAMW,EAAKL,EAAS,MAAUN,IAAW,MAAOa,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAJlB,IAAef,EAIae,EAAOC,KAAOR,EAAQO,EAAOf,QAJ1CA,EAIyDe,EAAOf,MAJhDA,aAAiBK,EAAIL,EAAQ,IAAIK,GAAE,SAAUG,GAAWA,EAAQR,OAITiB,KAAKP,EAAWI,GAClGH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,YAGlEO,EAAepC,MAAQA,KAAKoC,aAAgB,SAAUhB,EAASiB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOjD,OAAUyC,EACvJ,SAASM,EAAKG,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAIe,UAAU,mCAC3B,KAAOX,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARY,EAAG,GAASb,EAAC,OAAaa,EAAG,GAAKb,EAAC,SAAeC,EAAID,EAAC,SAAeC,EAAExB,KAAKuB,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAExB,KAAKuB,EAAGa,EAAG,KAAKnB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGY,EAAK,CAAS,EAARA,EAAG,GAAQZ,EAAEvB,QACzBmC,EAAG,IACP,KAAK,EAAG,KAAK,EAAGZ,EAAIY,EAAI,MACxB,KAAK,EAAc,OAAXV,EAAEC,QAAgB,CAAE1B,MAAOmC,EAAG,GAAInB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKV,EAAEI,IAAIQ,MAAOZ,EAAEG,KAAKS,MAAO,SACxC,QACI,KAAkBd,GAAZA,EAAIE,EAAEG,MAAYU,OAAS,GAAKf,EAAEA,EAAEe,OAAS,MAAkB,IAAVH,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEV,EAAI,EAAG,SACjG,GAAc,IAAVU,EAAG,MAAcZ,GAAMY,EAAG,GAAKZ,EAAE,IAAMY,EAAG,GAAKZ,EAAE,IAAM,CAAEE,EAAEC,MAAQS,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYV,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIY,EAAI,MAC7D,GAAIZ,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIU,KAAKJ,GAAK,MACvDZ,EAAE,IAAIE,EAAEI,IAAIQ,MAChBZ,EAAEG,KAAKS,MAAO,SAEtBF,EAAKf,EAAKrB,KAAKI,EAASsB,GAC1B,MAAOZ,GAAKsB,EAAK,CAAC,EAAGtB,GAAIS,EAAI,EAjBrB,QAiBoCD,EAAIE,EAAI,EACtD,GAAY,EAARY,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEnC,MAAOmC,EAAG,GAAKA,EAAG,QAAK,EAAQnB,MAAM,GArB9BL,CAAK,CAACsB,EAAGC,OAwB7DlD,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDL,EAAQ4vB,wBAAqB,EAC7B,IAAIC,EAAUvvB,EAAQ,KAClBuP,EAAKvP,EAAQ,KACbwvB,EAAYxvB,EAAQ,KACpBulB,EAAWvlB,EAAQ,KACnByvB,EAAczvB,EAAQ,KACtBwC,EAASxC,EAAQ,IACjByC,GAAS,EAAID,EAAOE,aACpB4sB,EAAoC,SAAU9f,GAE9C,SAAS8f,IACL,IAAI7pB,EAAQ+J,EAAO1P,KAAKhB,OAASA,KAsBjC,OArBA2G,EAAMiqB,wBAA0B,SAAUC,GAAS,OAAO1vB,EAAUwF,OAAO,OAAQ,GAAQ,WACvF,IAAI8jB,EAASqG,EAAqBvG,EAAQW,EAC1C,OAAO9oB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAQD,OAPA8nB,EAAUzqB,KAAK+wB,SAASlO,iBAAiB8N,EAAYlP,YAAYkB,kBACjEmO,EAAsB9wB,KAAK0E,QAAQqjB,mBAAmB0C,GACtDF,EAAS,CACL,CACIuG,IAGD,CAAC,EAAa9wB,KAAK0E,QAAQ8jB,2BAA2BxoB,KAAK+wB,SAASA,SAAS7rB,UACxF,KAAK,EAED,OADAgmB,EAAWzmB,EAAG7B,OACP,CAAC,EAAa5C,KAAK0E,QAAQsmB,sBAAsBhrB,KAAK+wB,SAASA,SAAS7rB,QAAS2rB,EAAO3F,EAAUX,IAC7G,KAAK,EAAG,MAAO,CAAC,EAAc9lB,EAAG7B,gBAI7C+D,EAAMjC,SAAU,EAAIgsB,EAAUnK,iBACvB5f,EA8nBX,OAtpBAkJ,EAAU2gB,EAAoB9f,GA0B9B8f,EAAmB1vB,UAAUiuB,mBAAqB,WAC9C,OAAO5tB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EAAQisB,EAAO3W,EAAI7S,EAAI5D,EAAGkG,EAAMD,EAAOf,EAC3C,OAAO3D,EAAYpC,MAAM,SAAUqV,GAC/B,OAAQA,EAAG1S,OACP,KAAK,EAED,OADA0S,EAAGxS,KAAKW,KAAK,CAAC,EAAG,EAAJ,CAAS,IACf,CAAC,GAAa,EAAIitB,EAAQ9iB,SAAS,CAClCwa,OAAQ,MACRnb,IAAKyZ,EAAStf,aAAaM,cAAgBgf,EAASte,gBAAgBE,gBAAkB,GACtF2oB,aAAc,OACd7kB,QAAS,OAErB,KAAK,EAID,GAHAnK,EAASqT,EAAGzS,OACZqrB,EAAQjsB,EAAOuK,KACfvM,KAAKmuB,WAAanuB,KAAKouB,sBACnBH,GAAS9d,MAAMsH,QAAQwW,EAAMtZ,OAC7B,IAAK2C,EAAK,EAAG7S,EAAKwpB,EAAMtZ,MAAO2C,EAAK7S,EAAGlB,OAAQ+T,IAC3CzW,EAAI4D,EAAG6S,IACPvQ,EAAOrD,EAAOwW,cAAciB,WAAWta,MAEnCiG,EAAQ+E,SAAShL,EAAEgI,IAAM,EACzB7I,KAAKmuB,WAAWrnB,GAASC,GAIrC,MAAO,CAAC,EAAa/G,KAAKixB,qBAAqBvtB,EAAOwW,cAAcC,YAAY8T,EAAMiD,aAC1F,KAAK,EAED,OADA7b,EAAGzS,OACI,CAAC,EAAa,GACzB,KAAK,EAGD,OAFAmD,EAAUsP,EAAGzS,OACbe,EAAOoK,MAAMhI,EAAbpC,GACO,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,WAKhC6sB,EAAmB1vB,UAAUwD,UAAY,SAAU0iB,EAASC,EAAcC,GACtE,OAAO/lB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIyE,EACAkC,EAAQ3G,KACZ,OAAOoC,EAAYpC,MAAM,SAAUqV,GAC/B,OAAQA,EAAG1S,OACP,KAAK,EAGD,OAFAgB,EAAOoD,KAAK,sBAAZpD,GACA3D,KAAKgvB,mBACE,CAAC,EAAahvB,KAAK0E,QAAQJ,UAAU0iB,EAASC,EAAcC,IACvE,KAAK,EAED,OADA7R,EAAGzS,OACI,CAAC,EAAa5C,KAAK+wB,SAASzsB,UAAUtE,KAAK0E,QAAS,uBAC/D,KAAK,EAGD,OAFA2Q,EAAGzS,OACH6B,EAAKzE,KACE,CAAC,EAAaA,KAAK0E,QAAQ8B,2BAA2BxG,KAAK+wB,SAASA,SAAS7rB,UACxF,KAAK,EAkBD,OAjBAT,EAAG0sB,UAAY9b,EAAGzS,OAClB5C,KAAKmxB,UAAUvqB,IAAG,SAAUC,GACxB,IAAIpC,EACJ,GAAgC,QAAzBA,EAAKkC,EAAMoqB,gBAA6B,IAAPtsB,OAAgB,EAASA,EAAGssB,SAAS9qB,IAIzE,IAAK,IAAIa,EAAQ,EAAGA,EAAQD,EAAQtD,OAAQuD,IAAS,CACjD,IAAI9E,EAAS6E,EAAQC,GACjBE,EAAQL,EAAMjC,QAAQuC,YAAYjF,EAAOkF,MAAOP,EAAMoqB,SAASA,SAAS9qB,KAC5EtC,EAAOoD,KAAe,OAAVC,QAA4B,IAAVA,EAAmBA,EAAQhF,EAAzD2B,GACIqD,GACAL,EAAMyqB,iBAAiBpvB,EAAO8Y,iBAAkB9Y,EAAO+Y,mBAAoB/T,QARnFrD,EAAOoK,MAAM,8DAAbpK,MAaD,CAAC,WAK5B6sB,EAAmB1vB,UAAUkuB,iBAAmB,WAC5CrrB,EAAOoD,KAAK,yBAAZpD,GACI3D,KAAKmxB,WACLnxB,KAAK0E,QAAQ6mB,eAAevrB,KAAKmxB,WAErCnxB,KAAK0E,QAAQijB,WAEjB6I,EAAmB1vB,UAAUmE,cAAgB,SAAUgO,GACnD,OAAO9R,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,MAAO,CAAC,EAAczE,KAAK0E,QAAQO,cAAcgO,WAI7Dud,EAAmB1vB,UAAUuwB,mBAAqB,SAAUC,EAAKhC,EAAQC,EAASgC,GAC9E,OAAOpwB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIyqB,EAASqG,EAAqBvG,EAAQU,EAAYC,EAAUlpB,EAAQwvB,EACxE,OAAOpvB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAED,OADAgB,EAAOoD,KAAK,KAAMuqB,EAAK,QAAShC,EAAQ,SAAUC,EAAS,SAAUgC,EAArE5tB,GACID,EAAO4H,WAAWS,mBAAmBulB,GAC9B,CAAC,EAAc,CACdG,YAAa/tB,EAAOwW,cAAcG,iBAClCmX,OAAQ,MAGpB/G,EAAUzqB,KAAK+wB,SAASlO,iBAAiB8N,EAAYlP,YAAYkB,kBACjEmO,EAAsB9wB,KAAK0E,QAAQqjB,mBAAmB0C,GACtDF,EAAS,CACL,CACIuG,GAEJ,GAGA,CAEI9wB,KAAK0E,QAAQmjB,gBAAgB,UAAWyJ,KAGhDrG,EAAajrB,KAAK0xB,sBACX,CAAC,EAAa1xB,KAAKwoB,2BAA2BxoB,KAAK+wB,SAASA,SAAS7rB,QAASqsB,KACzF,KAAK,EAED,OADArG,EAAWzmB,EAAG7B,OACP,CAAC,EAAa5C,KAAK0E,QAAQsmB,sBAAsBhrB,KAAK+wB,SAASA,SAAS7rB,QAAS+lB,EAAYC,EAAUX,IAClH,KAAK,EAID,OAFAvoB,EAAoB,QADpBA,EAASyC,EAAG7B,cAC2B,IAAXZ,OAAoB,EAASA,EAAO2vB,UAAUpb,MAAMgZ,EAASA,EAAUD,GACnGkC,EAASxxB,KAAK4xB,aAAa5vB,GACpB,CAAC,EAAc,CACdyvB,YAAavG,EACbsG,OAAQA,YAMpChB,EAAmB1vB,UAAU+wB,kBAAoB,SAAUP,GACvD,OAAOnwB,EAAUnB,UAAM,OAAQ,GAAQ,WAEnC,OAAOoC,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK+wB,SAASzM,aAAagN,IACxD,KAAK,EAED,MAAO,CAAC,EADC7sB,EAAG7B,gBAMhC4tB,EAAmB1vB,UAAUgxB,uBAAyB,SAAU7e,EAAUqc,EAAQC,GAC9E,OAAOpuB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EAAQ2S,EAAO2C,EAAIya,EAAUlpB,EAAIqlB,EACrC,OAAO9rB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAED,OADAgB,EAAOoD,KAAK,yBAA0BkM,EAAUqc,EAAQC,EAAxD5rB,GACID,EAAO4H,WAAWS,mBAAmBkH,GAC9B,CAAC,EAAc,IAEnB,CAAC,EAAajT,KAAK+wB,SAAS/L,iBAAiB/R,IACxD,KAAK,EAEDjR,GADAA,EAASyC,EAAG7B,QACI2T,MAAMgZ,EAASA,EAAUD,GACzC3a,EAAQ,GACR2C,EAAK,EAAGya,EAAW/vB,EACnByC,EAAG9B,MAAQ,EACf,KAAK,EACD,OAAM2U,EAAKya,EAASxuB,QACpBsF,EAAKkpB,EAASza,GACP,CAAC,EAAatX,KAAKovB,aAAavmB,KAFH,CAAC,EAAa,GAGtD,KAAK,EACDqlB,EAAOzpB,EAAG7B,OACV+R,EAAMnR,KAAK0qB,GACXzpB,EAAG9B,MAAQ,EACf,KAAK,EAED,OADA2U,IACO,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAc3C,WAK9C6b,EAAmB1vB,UAAUkxB,kBAAoB,SAAUV,GACvD,OAAOnwB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EACJ,OAAOI,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK+wB,SAASxL,YAAY+L,IACvD,KAAK,EAED,OADAtvB,EAASyC,EAAG7B,SACIZ,EAAOwjB,OAGhB,CAAC,EAAc,CACd7K,WAAYjX,EAAOI,UAAU8W,UAAUY,UACvCD,UAAWvZ,EAAOuZ,UAClB3V,OAAQ5D,EAAO4D,OACf6V,OAAQzZ,EAAOyZ,OACfxE,UAAW,OAPR,CAAC,EAAc,cAa9CuZ,EAAmB1vB,UAAUmxB,oBAAsB,SAAUX,GACzD,IAAI7sB,EACJ,OAAOtD,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EACJ,OAAOI,EAAYpC,MAAM,SAAUqV,GAC/B,OAAQA,EAAG1S,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK+wB,SAAS3L,cAAckM,IACzD,KAAK,EAED,OADAtvB,EAASqT,EAAGzS,SACIZ,EAAOsjB,UAGhB,CAAC,EAAc,CACd3K,WAAYjX,EAAOI,UAAU8W,UAAUc,YACvCH,UAAWvZ,EAAOuZ,UAClBhG,UAAWvT,EAAOuT,UAClBoG,OAAQ3Z,EAAO2Z,OACfC,WAAyC,QAA5BnX,EAAKzC,EAAO4Z,kBAA+B,IAAPnX,EAAgBA,EAAK,GACtEwS,UAAW,OARR,CAAC,EAAc,cAc9CuZ,EAAmB1vB,UAAUoxB,qBAAuB,SAAU5C,EAAQC,EAASgC,GAC3E,OAAOpwB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIyqB,EAASqG,EAAqBvG,EAAQW,EAAUD,EAAYjpB,EAAQwvB,EACxE,OAAOpvB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EASD,OARAgB,EAAOoD,KAAK,uBAAwBuoB,EAAQC,EAA5C5rB,GACA8mB,EAAUzqB,KAAK+wB,SAASlO,iBAAiB8N,EAAYlP,YAAYkB,kBACjEmO,EAAsB9wB,KAAK0E,QAAQqjB,mBAAmB0C,GACtDF,EAAS,CACL,CACIuG,IAGD,CAAC,EAAa9wB,KAAKwoB,2BAA2BxoB,KAAK+wB,SAASA,SAAS7rB,QAASqsB,IACzF,KAAK,EAGD,OAFArG,EAAWzmB,EAAG7B,OACdqoB,EAAavnB,EAAOI,UAAUC,iBAAiBouB,QAAQnyB,KAAK0xB,sBAAuBxG,EAASkH,MAAM,MAC3F,CAAC,EAAapyB,KAAK0E,QAAQsmB,sBAAsBhrB,KAAK+wB,SAASA,SAAS7rB,QAAS+lB,EAAYC,EAAUX,IAClH,KAAK,EAID,OAFAvoB,EAAoB,QADpBA,EAASyC,EAAG7B,cAC2B,IAAXZ,OAAoB,EAASA,EAAO2vB,UAAUpb,MAAMgZ,EAASA,EAAUD,GACnGkC,EAASxxB,KAAK4xB,aAAa5vB,GACpB,CAAC,EAAc,CACdyvB,YAAavG,EACbsG,OAAQA,YAMpChB,EAAmB1vB,UAAU0iB,mBAAqB,WAC9C,OAAOriB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EACJ,OAAOI,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK+wB,SAASvN,sBAC3C,KAAK,EAKD,OAJAxhB,EAASyC,EAAG7B,OACZ5C,KAAK6vB,aAAe7tB,EAAO+hB,YAC3B/jB,KAAK8kB,WAAa9iB,EAAO6hB,UACzBlgB,EAAOoD,KAAK,qBAAsB/E,EAAlC2B,GACO,CAAC,EAAc3B,WAK1CwuB,EAAmB1vB,UAAU+jB,UAAY,WACrC,OAAO1jB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAI6jB,EAAW7hB,EACf,OAAOI,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAKqyB,mBAClC,KAAK,EAED,OADA5tB,EAAG7B,OACI,CAAC,EAAa5C,KAAK8vB,qBAC9B,KAAK,EAED,OADAjM,EAAYpf,EAAG7B,OACR,CAAC,EAAa5C,KAAK+wB,SAASlM,UAAU7kB,KAAKivB,aAAcpL,EAAUqC,YAC9E,KAAK,EAGD,OAFAlkB,EAASyC,EAAG7B,OACZe,EAAOoD,KAAK,YAAa/E,EAAzB2B,GACO,CAAC,EAAgC,IAAlB3B,EAAO8qB,gBAKjD0D,EAAmB1vB,UAAU4kB,WAAa,SAAU4L,EAAK/qB,EAAS0M,GAC9D,OAAO9R,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIsyB,EAAKtwB,EACT,OAAOI,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAED,OADAgB,EAAOoD,KAAK,aAAc,KAAMuqB,EAAK,SAAU/qB,EAAS,UAAW0M,EAAnEtP,GACO,CAAC,EAAa3D,KAAKqyB,mBAC9B,KAAK,EAED,OADA5tB,EAAG7B,OACI,CAAC,EAAa5C,KAAKuyB,eAC9B,KAAK,EAED,OADAD,EAAM7tB,EAAG7B,QACHqQ,GAAavP,EAAO4H,WAAWS,mBAAmBkH,GAAmB,CAAC,EAAa,GAClF,CAAC,EAAajT,KAAK+wB,SAASlL,oBAAoB7lB,KAAKivB,aAAcqC,EAAK/qB,EAAS0M,EAAUqf,IACtG,KAAK,EAED,OADAtwB,EAASyC,EAAG7B,OACL,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAa5C,KAAK+wB,SAASrL,WAAW1lB,KAAKivB,aAAcqC,EAAK/qB,EAAS+rB,IACvF,KAAK,EACDtwB,EAASyC,EAAG7B,OACZ6B,EAAG9B,MAAQ,EACf,KAAK,EAED,OADAgB,EAAOoD,KAAK,aAAc/E,EAA1B2B,GACO,CAAC,EAAgC,IAAlB3B,EAAO8qB,gBAKjD0D,EAAmB1vB,UAAU2kB,iBAAmB,SAAU6L,GACtD,OAAOnwB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EACJ,OAAOI,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAED,OADAgB,EAAOoD,KAAK,mBAAoB,KAAMuqB,EAAtC3tB,GACO,CAAC,EAAa3D,KAAKqyB,mBAC9B,KAAK,EAED,OADA5tB,EAAG7B,OACI,CAAC,EAAa5C,KAAK+wB,SAAStL,iBAAiBzlB,KAAKivB,aAAcqC,IAC3E,KAAK,EAGD,OAFAtvB,EAASyC,EAAG7B,OACZe,EAAOoD,KAAK,mBAAoB/E,EAAhC2B,GACO,CAAC,EAAgC,IAAlB3B,EAAO8qB,gBAKjD0D,EAAmB1vB,UAAUglB,SAAW,SAAUwL,EAAK/qB,GACnD,OAAOpF,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EACJ,OAAOI,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAKqyB,mBAClC,KAAK,EAGD,OAFA5tB,EAAG7B,OACHe,EAAOoD,KAAK,WAAY,KAAMuqB,EAAK,SAAU/qB,EAA7C5C,GACO,CAAC,EAAa3D,KAAK+wB,SAASjL,SAAS9lB,KAAKivB,aAAcqC,EAAK/qB,IACxE,KAAK,EAGD,OAFAvE,EAASyC,EAAG7B,OACZe,EAAOoD,KAAK,WAAY/E,EAAxB2B,GACO,CAAC,EAAgC,IAAlB3B,EAAO8qB,gBAKjD0D,EAAmB1vB,UAAU0xB,SAAW,SAAUlB,EAAK/qB,GACnD,OAAOpF,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIsyB,EAAKtwB,EACT,OAAOI,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAED,OADAgB,EAAOoD,KAAK,WAAY,KAAMuqB,EAAK,SAAU/qB,EAA7C5C,GACO,CAAC,EAAa3D,KAAKqyB,mBAC9B,KAAK,EAED,OADA5tB,EAAG7B,OACI,CAAC,EAAa5C,KAAKuyB,eAC9B,KAAK,EAED,OADAD,EAAM7tB,EAAG7B,OACF,CAAC,EAAa5C,KAAK+wB,SAAS/K,cAAchmB,KAAKivB,aAAcqC,EAAK/qB,EAAS+rB,IACtF,KAAK,EAGD,OAFAtwB,EAASyC,EAAG7B,OACZe,EAAOoD,KAAK/E,EAAZ2B,GACO,CAAC,EAAgC,IAAlB3B,EAAO8qB,gBAKjD0D,EAAmB1vB,UAAUqlB,eAAiB,SAAUmL,EAAK/qB,GACzD,OAAOpF,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EACJ,OAAOI,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAED,OADAgB,EAAOoD,KAAK,iBAAkB,KAAMuqB,EAAK,SAAU/qB,EAAnD5C,GACO,CAAC,EAAa3D,KAAKqyB,mBAC9B,KAAK,EAED,OADA5tB,EAAG7B,OACI,CAAC,EAAa5C,KAAK+wB,SAAS5K,eAAenmB,KAAKivB,aAAcqC,EAAK/qB,IAC9E,KAAK,EAGD,OAFAvE,EAASyC,EAAG7B,OACZe,EAAOoD,KAAK,iBAAkB/E,EAA9B2B,GACO,CAAC,EAAgC,IAAlB3B,EAAO8qB,gBAKjD0D,EAAmB1vB,UAAUilB,eAAiB,SAAUuL,GACpD,OAAOnwB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EACJ,OAAOI,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAED,OADAgB,EAAOoD,KAAK,iBAAkB,KAAMuqB,EAApC3tB,GACO,CAAC,EAAa3D,KAAKqyB,mBAC9B,KAAK,EAED,OADA5tB,EAAG7B,OACI,CAAC,EAAa5C,KAAK+wB,SAAShL,eAAe/lB,KAAKivB,aAAcqC,IACzE,KAAK,EAGD,OAFAtvB,EAASyC,EAAG7B,OACZe,EAAOoD,KAAK,iBAAkB/E,EAA9B2B,GACO,CAAC,EAAgC,IAAlB3B,EAAO8qB,gBAKjD0D,EAAmB1vB,UAAUswB,iBAAmB,SAAUtW,EAAkBC,EAAoB7T,GAC5F,OAAO/F,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIyyB,EAAaC,EACjB,OAAOtwB,EAAYpC,MAAM,SAAUyE,GAC/B,IACI,OAAQyC,EAAM0K,OACV,KAAKlO,EAAOI,UAAU6Y,WAAW9K,cAM7B,QALA4gB,EAAc,CACVxb,UAAW,IAAIvT,EAAOI,UAAUC,iBAAiBmD,EAAMmQ,KAAKJ,WAC5D+D,UAAWnP,SAAS3E,EAAMmQ,KAAK2D,WAC/B/Z,MAAO,IAAIyC,EAAOI,UAAUC,iBAAiBmD,EAAMmQ,KAAKpW,SAExC+Z,WAChB,KAAKtX,EAAOI,UAAU0Y,gBAAgB6G,YAClCrjB,KAAK6vB,aAAe4C,EAAYxxB,MAChC,MACJ,KAAKyC,EAAOI,UAAU0Y,gBAAgB2G,UAClCnjB,KAAK8kB,WAAa2N,EAAYxxB,MAKtCjB,KAAKwnB,SAAS7V,kBAAkB8gB,GAChC,MACJ,KAAK/uB,EAAOI,UAAU6Y,WAAW5K,YAC7B2gB,EAAY,CACR5X,iBAAkBA,EAClBC,mBAAoB,IAAIrX,EAAOI,UAAUC,iBAAiBgX,GAC1D9D,UAAW,IAAIvT,EAAOI,UAAUC,iBAAiBmD,EAAMmQ,KAAKJ,WAC5D+D,UAAWnP,SAAS3E,EAAMmQ,KAAK2D,WAC/BC,OAAQpP,SAAS3E,EAAMmQ,KAAK4D,QAC5BrV,OAAQ,IAAIlC,EAAOI,UAAUC,iBAAiBmD,EAAMmQ,KAAKzR,QACzDsV,YAAahU,EAAMmQ,KAAK6D,YACxBZ,UAAWpT,EAAMmQ,KAAKiD,WAE1Bta,KAAKwnB,SAAS1V,gBAAgB4gB,IAM1C,MAAO3kB,GACHpK,EAAOoK,MAAMA,EAAbpK,GAEJ,MAAO,CAAC,UAIpB6sB,EAAmB1vB,UAAU8wB,aAAe,SAAUJ,GAClD,IAAKrhB,MAAMsH,QAAQ+Z,GACf,MAAO,GAGX,IADA,IAAIxvB,EAAS,GACJsV,EAAK,EAAG9G,EAAWghB,EAAQla,EAAK9G,EAASjN,OAAQ+T,IAAM,CAC5D,IAAIxV,EAAI0O,EAAS8G,GACbqb,EAAc3yB,KAAK0a,YAAY5Y,GAC/B6wB,GACA3wB,EAAOwB,KAAKmvB,GAGpB,OAAO3wB,GAEXwuB,EAAmB1vB,UAAU4Z,YAAc,SAAU9I,GACjD,IAAKA,EACD,OAAO,KAEX,IAAI6Y,EAAUzqB,KAAK+wB,SAASlO,iBAAiB8N,EAAYlP,YAAYkB,kBACjEiQ,EAAU5yB,KAAK0E,QAAQgmB,qBAAqB9Y,EAAM1K,MAAOujB,GAC7D,IAAKmI,EACD,OAAO,KAEX,IAAID,EAAc,CACd7X,iBAAkBlJ,EAAMkJ,iBACxBC,mBAAoBnJ,EAAMmJ,mBAC1B9D,UAAW2b,EAAQvb,KAAKJ,UACxB+D,UAAW4X,EAAQvb,KAAK2D,UACxBC,OAAQ2X,EAAQvb,KAAK4D,OACrBrV,OAAQgtB,EAAQvb,KAAKzR,OACrBsV,YAAa0X,EAAQvb,KAAK6D,YAC1BZ,UAAWsY,EAAQvb,KAAKiD,WAE5B,OAAO5W,EAAOwW,cAAcQ,YAAYiY,IAE5CnC,EAAmB1vB,UAAUyxB,YAAc,WACvC,OAAOpxB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAI+jB,EACJ,OAAO3hB,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3C,KAAK4vB,uBAClC,KAAK,EAED,OADA7L,EAActf,EAAG7B,QACDmS,GAAG,GACR,CAAC,EAAcgP,EAAYmC,WAE/B,CAAC,EAAc,cAK1CsK,EAAmB1vB,UAAU0nB,2BAA6B,SAAUvV,EAAUse,GAC1E,OAAOpwB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAImG,EACJ,OAAO/D,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAED,OADAwD,EAAS,IAAIzC,EAAOI,UAAUC,iBAAiB,MACzCwtB,GAAY7tB,EAAO4H,WAAWS,mBAAmBwlB,GAAkB,CAAC,EAAa,IACvFprB,EAAS,IAAIzC,EAAOI,UAAUC,iBAAiBwtB,GACxC,CAAC,EAAa,IACzB,KAAK,EAAG,MAAO,CAAC,EAAavxB,KAAK0E,QAAQ8jB,2BAA2BvV,IACrE,KAAK,EACD9M,EAAS1B,EAAG7B,OACZ6B,EAAG9B,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAcwD,WAK9CqqB,EAAmB1vB,UAAU4wB,oBAAsB,WAK/C,OAJIjL,EAAStf,aAAaM,cAInB,IAAI/D,EAAOI,UAAUC,iBAAiB,MAEjDysB,EAAmB1vB,UAAUuxB,gBAAkB,WAC3C,OAAOlxB,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIkF,EAASuM,EACb,OAAOrP,EAAYpC,MAAM,SAAUyE,GAC/B,OAAQA,EAAG9B,OACP,KAAK,EAED,OADAuC,EAAUlF,KAAK+wB,SAASA,SAAS7rB,QAC1B,CAAC,EAAalF,KAAKiF,cAAcC,IAC5C,KAAK,EAGD,OAFAuM,EAAQhN,EAAG7B,OACX5C,KAAKwnB,SAAShW,iBAAiBtM,EAASuM,GACjC,CAAC,WAK5B+e,EAAmB1vB,UAAUmwB,qBAAuB,SAAU4B,GAC1D,IAAIpuB,EAAI4Q,EAAIJ,EAAIC,EAAIC,EAAIC,EACxB,OAAOjU,EAAUnB,UAAM,OAAQ,GAAQ,WACnC,IAAIwxB,EAAQla,EAAIwb,EAAUhxB,EAAG4wB,EAAWxE,EACxC,OAAO9rB,EAAYpC,MAAM,SAAU+yB,GAC/B,OAAQA,EAAGpwB,OACP,KAAK,EACD,OAAK3C,KAAKmuB,YAAcnuB,KAAKmuB,WAAW5qB,SAAWkjB,EAASte,gBAAgBS,aAI5EjF,EAAOoD,KAAK,0CAA2C8rB,EAAW3M,UAAlEviB,GACO,CAAC,EAAa3D,KAAK4wB,wBAAwBiC,MAJ9ClvB,EAAOoD,KAAK,+BAA2D,QAA1BtC,EAAKzE,KAAKmuB,kBAA+B,IAAP1pB,OAAgB,EAASA,EAAGlB,OAA3GI,GACO,CAAC,IAIhB,KAAK,EAED,GADA6tB,EAASuB,EAAGnwB,QACPuN,MAAMsH,QAAQ+Z,GAEf,OADA7tB,EAAOoD,KAAK,2CAAZpD,GACO,CAAC,GAGZ,IADAA,EAAOoD,KAAK,gBAAiByqB,EAAOjuB,OAApCI,GACK2T,EAAK,EAAGwb,EAAWtB,EAAQla,EAAKwb,EAASvvB,OAAQ+T,IAGlD,GAFAxV,EAAIgxB,EAASxb,GACbob,EAAY1yB,KAAK0a,YAAY5Y,GAM7B,OADAosB,EAAOluB,KAAKmuB,WAAWuE,EAAUzX,OAAS,GAClCyX,EAAU1X,WACd,KAAKtX,EAAOI,UAAU4F,cAAcG,KAChCqkB,EAAK9S,MAAQsX,EAAUpY,UACvB,MACJ,KAAK5W,EAAOI,UAAU4F,cAAcI,MAChCokB,EAAK5Y,MAAQ,CACTqF,WAAYjX,EAAOI,UAAU8W,UAAUc,YACvCH,UAAW7X,EAAOwW,cAAcC,YAAYuY,EAAU7pB,IACtD8S,OAAyC,QAAhCtG,EAAKqd,EAAUxX,mBAAgC,IAAP7F,EAAgBA,EAAK,GACtEE,UAAuC,QAA3BN,EAAKyd,EAAU9sB,cAA2B,IAAPqP,EAAgBA,EAAKvR,EAAOwW,cAAcG,iBACzFuB,WAAY8W,EAAUpY,UACtBrD,UAAWyb,EAAUzb,WAEzB,MACJ,KAAKvT,EAAOI,UAAU4F,cAAcK,OAChCmkB,EAAK7jB,IAAM,CACPsQ,WAAYjX,EAAOI,UAAU8W,UAAUY,UACvCD,UAAW7X,EAAOwW,cAAcC,YAAYuY,EAAU7pB,IACtD4S,OAAyC,QAAhCvG,EAAKwd,EAAUxX,mBAAgC,IAAPhG,EAAgBA,EAAK,GACtEtP,OAAoC,QAA3BuP,EAAKud,EAAU9sB,cAA2B,IAAPuP,EAAgBA,EAAKzR,EAAOwW,cAAcG,iBACtFpD,UAAWyb,EAAUzb,WAEzB,MACJ,KAAKvT,EAAOI,UAAU4F,cAAcM,UAChCkkB,EAAK7jB,IAAM,KACX,MACJ,KAAK3G,EAAOI,UAAU4F,cAAcQ,YAChCgkB,EAAK5Y,MAAQ,KACb,MACJ,KAAK5R,EAAOI,UAAU4F,cAAcO,IAChCikB,EAAK9S,MAAQsX,EAAUpY,UACnB4T,EAAK7jB,KAAO6jB,EAAK7jB,IAAIoR,OAAO4M,iBAAkD,QAA9BjT,EAAKsd,EAAUpY,iBAA8B,IAAPlF,OAAgB,EAASA,EAAGiT,iBAClH6F,EAAK7jB,SAAM9J,QApCnBoD,EAAOoD,KAAK,qBAAsBjF,EAAlC6B,GA2CR,MAAO,CAAC,WAKrB6sB,EAvpB6B,CAwpBtC/f,EAAG0c,gBACLvsB,EAAQ4vB,mBAAqBA,G,+BCrtB7B,IAAIzwB,EAAmBC,MAAQA,KAAKD,kBAAqBE,OAAOC,OAAU,SAASC,EAAGC,EAAGC,EAAGC,QAC7EC,IAAPD,IAAkBA,EAAKD,GAC3BJ,OAAOO,eAAeL,EAAGG,EAAI,CAAEG,YAAY,EAAMC,IAAK,WAAa,OAAON,EAAEC,OAC1E,SAASF,EAAGC,EAAGC,EAAGC,QACTC,IAAPD,IAAkBA,EAAKD,GAC3BF,EAAEG,GAAMF,EAAEC,KAEVM,EAAgBX,MAAQA,KAAKW,cAAiB,SAASP,EAAGQ,GAC1D,IAAK,IAAIC,KAAKT,EAAa,YAANS,GAAoBZ,OAAOa,UAAUC,eAAeC,KAAKJ,EAASC,IAAId,EAAgBa,EAASR,EAAGS,IAE3HZ,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDN,EAAaO,EAAQ,KAAaN,GAClCD,EAAaO,EAAQ,IAAWN,GAChCD,EAAaO,EAAQ,KAAaN,GAClCD,EAAaO,EAAQ,KAAaN,GAClCD,EAAaO,EAAQ,KAAgBN,GACrCD,EAAaO,EAAQ,KAAcN,GACnCD,EAAaO,EAAQ,KAAkBN,I,2TCuCjCoyB,EAAS,IAvDf,iDACUC,UAAoB,EAD9B,0CAEE,WACE,OAAOjzB,KAAKizB,UAHhB,IAKE,SAAazrB,GACXxH,KAAKizB,SAAWzrB,IANpB,yBAQE,WAIE,OAAO0rB,IAZX,4BAcE,WAIE,MAAOA,4DAlBX,2BAoBE,WAIE,OAAO,IAAIpvB,YAAUC,iBAAiBmvB,UAxB1C,wBA0BE,WAIE,MAAOA,yBA9BX,yBAgCE,WAIE,OAAOA,IApCX,iCAsCE,WAIE,OAAOA,IA1CX,sBA4CE,WAIE,OAAOrnB,SAASqnB,OAhDpB,oBAkDE,WACE,MAAOA,OAnDX,MAyDaC,EAAkB,WAC7B,OAAOH,GC1DII,EAAkB,CAC7BC,SAAU,YACVC,qBAAqB,EACrBC,yBAA0B,uBAC1BC,6BAA8B,2BAC9BC,OAAQ,yBACRC,YAAa,8BACbC,gBAAiB,gCACjBC,kBAAmB,8BACnBC,eAAgB,8CAChBC,YAAa,gCACbC,YAAa,gCACbC,WAAY,+BACZC,gBAAiB,IAAInwB,YAAUC,iBAAiB,W,SCZ5CJ,GAASC,sBAEFswB,GAAb,iDAEmBC,cAAgBf,EAAgBG,yBAFnD,KAGmBa,kBAAoBhB,EAAgBI,6BAHvD,yCAKE,WACEa,aAAaC,WAAWt0B,KAAKm0B,eAC7BI,eAAeD,WAAWt0B,KAAKo0B,qBAPnC,qBAUE,WACE,IAAI7nB,EAEJ,KACEA,EAAO8nB,aAAa7W,QAAQxd,KAAKm0B,kBAE/B5nB,EAAOgoB,eAAe/W,QAAQxd,KAAKo0B,oBAErC,MAAOpc,GAEP,YADArU,GAAOoK,MAAMiK,EAAbrU,GAIF,GAAK4I,EAIL,IACE,OAAOuT,SAAOG,OAAOzT,KAAKuhB,MAAMxhB,IAChC,MAAOyL,GAEP,YADArU,GAAOoK,MAAMiK,EAAbrU,MA9BN,qBAmCE,SAAQ4I,GACN,IAAMioB,EAAWhoB,KAAKC,UAAUF,GAEhC,IACE,OAAQA,EAAKtD,MACX,KAAKgT,aAAWiE,IACdmU,aAAapW,QAAQje,KAAKm0B,cAAeK,GACzC,MACF,KAAKvY,aAAWkE,QACdoU,eAAetW,QAAQje,KAAKo0B,kBAAmBI,GAC/C,MACF,QACE,MAAM,IAAInvB,MAAJ,uBAA0BkH,EAAKtD,KAA/B,yBAEV,MAAO+O,GACPrU,GAAOoK,MAAMiK,EAAbrU,QAlDN,KAuDM8wB,GAAU,IAAIvX,gBAAc,IAAIgX,IAEzBQ,GAAmB,WAC9B,OAAOD,IC7DIE,GAAb,0MACE,WAAoB9gB,GAApB,6BAAAmB,EAAA,6DAAkCrI,EAAlC,+BAA6D,OAA7D,SACyBM,MAAM4G,GAD/B,OACQK,EADR,YAEUvH,EAFV,OAGS,WAHT,+CAIauH,EAASC,eAJtB,gCAMaD,EAASE,QANtB,2CADF,0HAUE,WAAqBP,EAActH,EAAWI,GAA9C,SAAAqI,EAAA,0FAVF,gEAAqCvB,YAe/BmhB,GAAkB,IAAID,GAEfE,GAAqB,WAChC,OAAOD,IChBHjxB,GAASC,sBAEFkxB,GAAb,kDAGE,aAAe,IAAD,8BACZ,gBAHMC,aAEM,EAEZ,EAAKC,YAFO,EAHhB,6CAQE,WACEh1B,KAAK+0B,QAAU,KATnB,oBAYE,WACE,OAAOF,OAbX,yBAeE,WACE,OAAOH,OAhBX,uEAmBE,uBAAA7zB,EAAA,qFACoBb,KAAK8tB,SAASla,cAAc,iCADhD,OAKE,GAJIqa,EADN,OAEEA,EAAQzhB,KAAKuhB,MAAME,GAEnBjuB,KAAKmuB,WAAanuB,KAAKouB,sBACnBH,EAAO,CAAC,EAAD,aACOA,EAAMtZ,OADb,IACT,2BAAW9T,EAAkB,SACrBkG,EAAOmT,gBAAciB,WAAWta,MAE9BiG,EAAQ+E,SAAShL,EAAEgI,IAAM,EAC/B7I,KAAKmuB,WAAWrnB,GAASC,GALpB,+BALb,gDAnBF,oHAmCE,WAAgBigB,GAAhB,mBAAAhS,EAAA,6DACErR,GAAOoD,KAAK,sBAAZpD,GACA3D,KAAKg1B,YAFP,SAIqBh1B,KAAK8tB,SAASla,cAAc,kCAJjD,OAME,IAFI4d,EAJN,OAKEA,EAAShlB,KAAKuhB,MAAMyD,GACX1qB,EAAQ,EAAGA,EAAQ0qB,EAAOjuB,OAAQuD,IACnChF,EAAI0vB,EAAO1qB,GACjB9G,KAAK+0B,QAAQvxB,KAAK0W,gBAAcQ,YAAY5Y,IAE9C9B,KAAK+0B,QAAU/0B,KAAK+0B,QAAQpD,UAV9B,gDAnCF,qFAgDE,WACEhuB,GAAOoD,KAAK,yBAAZpD,GACA3D,KAAKg1B,cAlDT,kEAqDE,WAAoB/hB,GAApB,SAAA+B,EAAA,+EACS,CACL7P,aAAc,IAAIrB,YAAUC,iBAAiB,QAC7C8kB,SAAU,IAAI/kB,YAAUC,iBAAiB,QACzC+kB,YAAa,IAAIhlB,YAAUC,iBAAiB,WAJhD,2CArDF,8HA6DE,WAAyButB,EAAahC,EAAgBC,EAAiBgC,GAAvE,SAAAvc,EAAA,6DACErR,GAAOoD,KAAK,KAAMuqB,EAAK,QAAShC,EAAQ,SAAUC,EAAS,SAAUgC,EAArE5tB,GADF,SAEQ2H,aAAWa,QAAQ,KAF3B,UAGOb,aAAWK,SAAS2lB,GAH3B,yCAIW,CACLG,YAAavX,gBAAcG,iBAC3BmX,OAAQ,KANd,gCASS,CACLC,YAAavX,gBAAcG,iBAC3BmX,OAAQxxB,KAAK+0B,QAAQjgB,QAAO,SAAAhT,GAAC,OAAIA,EAAEmZ,SAAWpP,SAASylB,MAAM/a,MAAMgZ,EAASA,EAAUD,KAX1F,gDA7DF,mIA4EE,WAAwBgC,GAAxB,eAAAtc,EAAA,sEACQ1J,aAAWa,QAAQ,KAD3B,UAEOb,aAAWK,SAAS2lB,GAF3B,8CAGW/wB,GAHX,UAKQuB,EAAI9B,KAAK+0B,QAAQnW,MAAK,SAAA9c,GAAC,OAAIA,EAAEmZ,OAAOrR,aAAe0nB,GAAOxvB,EAAEkZ,YAAclX,YAAU4F,cAAcG,QAL1G,8CAOWtJ,GAPX,gCASSuB,EAAEwY,WATX,gDA5EF,kIAwFE,WAA6BrH,EAAkBqc,EAAgBC,GAA/D,eAAAva,EAAA,6DACErR,GAAOoD,KAAK,WAAYkM,EAAU,QAASqc,EAAQ,SAAUC,EAA7D5rB,GADF,SAGU3D,KAAKovB,aAAa,OAH5B,mCAIUpvB,KAAKovB,aAAa,OAJ5B,mCAKUpvB,KAAKovB,aAAa,OAL5B,oCAMUpvB,KAAKovB,aAAa,OAN5B,qCAOUpvB,KAAKovB,aAAa,OAP5B,qCAQUpvB,KAAKovB,aAAa,OAR5B,qCASUpvB,KAAKovB,aAAa,OAT5B,qCAUUpvB,KAAKovB,aAAa,OAV5B,qCAWUpvB,KAAKovB,aAAa,QAX5B,2BAEQza,EAFR,iEAaSA,EAAM4B,MAAMgZ,EAASA,EAAUD,IAbxC,iDAxFF,iIAwGE,WAAwBgC,GAAxB,mBAAAtc,EAAA,sEACQ1J,aAAWa,QAAQ,KAD3B,UAEOb,aAAWK,SAAS2lB,GAF3B,8CAGW/wB,GAHX,UAKQuB,EAAI9B,KAAK+0B,QAAQnW,MAAK,SAAA9c,GAAC,OAAIA,EAAEmZ,OAAOrR,aAAe0nB,GAAOxvB,EAAEkZ,YAAclX,YAAU4F,cAAcK,UAL1G,8CAOWxJ,GAPX,gCASS,CACLoa,WAAY7W,YAAU8W,UAAUY,UAChCD,UAAWrB,gBAAcC,YAAYmX,GACrC7V,OAAM,UAAE3Z,EAAEoZ,mBAAJ,QAAmB/S,kBAAgBK,aACzC5C,OAAM,UAAE9D,EAAE8D,cAAJ,QAAcsU,gBAAcG,iBAClCpD,UAAW,OAdf,gDAxGF,+HA0HE,WAA0Bqa,GAA1B,mBAAAtc,EAAA,sEACQ1J,aAAWa,QAAQ,KAD3B,UAEOb,aAAWK,SAAS2lB,GAF3B,8CAGW/wB,GAHX,UAKQuB,EAAI9B,KAAK+0B,QAAQnW,MAAK,SAAA9c,GAAC,OAAIA,EAAEmZ,OAAOrR,aAAe0nB,GAAOxvB,EAAEkZ,YAAclX,YAAU4F,cAAcI,SAL1G,8CAOWvJ,GAPX,uBASuBP,KAAK6xB,kBAAkBP,GAT9C,cASQ3V,EATR,yBAUS,CACLhB,WAAY7W,YAAU8W,UAAUc,YAChCH,UAAWrB,gBAAcC,YAAYmX,GACrC3V,OAAM,OAAEA,QAAF,IAAEA,IAAUxT,kBAAgBK,aAClC+M,UAAS,UAAEzT,EAAE8D,cAAJ,QAAcsU,gBAAcG,iBACrCuB,WAAY9Z,EAAEwY,UACdrD,UAAW,OAhBf,iDA1HF,gIA8IE,WAA2BqY,EAAgBC,EAAiBgC,GAA5D,SAAAvc,EAAA,6DACErR,GAAOoD,KAAK,QAASuoB,EAAQ,SAAUC,EAAvC5rB,GADF,SAEQ2H,aAAWa,QAAQ,KAF3B,gCAGS,CACLslB,YAAa,IAAI3tB,YAAUC,iBAAiB,KAC5CytB,OAAQxxB,KAAK+0B,QAAQxe,MAAMgZ,EAASA,EAAUD,KALlD,gDA9IF,kIAuJE,sBAAAta,EAAA,6DACErR,GAAOoD,KAAK,qBAAZpD,GADF,kBAES,CACL8f,eAAe,EACfE,eAAgBxb,kBAAgBS,YAAc5I,KAAK+0B,QAAQjgB,QAAO,SAAAhT,GAAC,OAAIA,EAAEkZ,YAAclX,YAAU4F,cAAcG,QAAMtG,OACrHsgB,UAAW,IAAI/f,YAAUC,iBAAiB,MAAMkxB,UAAU,IAC1DlR,YAAa,IAAIjgB,YAAUC,iBAAiB,OAAOkxB,UAAU,MANjE,gDAvJF,oHAiKE,sBAAAjgB,EAAA,4DACQ,IAAI3P,MAAM,uCADlB,2CAjKF,qHAqKE,WAAiBisB,EAAa/M,EAAkBhe,EAAiB0M,GAAjE,SAAA+B,EAAA,6DACErR,GAAOoD,KAAK,aAAc,KAAMuqB,EAAK,UAAW/M,EAAU,SAAUhe,EAAS,UAAW0M,EAAxFtP,GADF,SAEQ2H,aAAWa,QAAQ,KAF3B,iCAGS,GAHT,2CArKF,kIA2KE,WAAuBmlB,GAAvB,SAAAtc,EAAA,6DACErR,GAAOoD,KAAK,mBAAoB,KAAMuqB,EAAtC3tB,GADF,SAEQ2H,aAAWa,QAAQ,KAF3B,iCAGS,GAHT,2CA3KF,oHAiLE,WAAemlB,EAAa/qB,GAA5B,SAAAyO,EAAA,6DACErR,GAAOoD,KAAK,WAAY,KAAMuqB,EAAK,SAAU/qB,EAA7C5C,GADF,SAEQ2H,aAAWa,QAAQ,KAF3B,iCAGS,GAHT,2CAjLF,sHAuLE,WAAemlB,EAAa/qB,GAA5B,SAAAyO,EAAA,6DACErR,GAAOoD,KAAK,WAAY,KAAMuqB,EAAK,SAAU/qB,EAA7C5C,GADF,SAEQ2H,aAAWa,QAAQ,KAF3B,iCAGS,GAHT,2CAvLF,4HA6LE,WAAqBmlB,EAAa/qB,GAAlC,SAAAyO,EAAA,6DACErR,GAAOoD,KAAK,iBAAkB,KAAMuqB,EAAK,SAAU/qB,EAAnD5C,GADF,SAEQ2H,aAAWa,QAAQ,KAF3B,iCAGS,GAHT,2CA7LF,4HAmME,WAAqBmlB,GAArB,SAAAtc,EAAA,6DACErR,GAAOoD,KAAK,iBAAkB,KAAMuqB,EAApC3tB,GADF,SAEQ2H,aAAWa,QAAQ,KAF3B,iCAGS,GAHT,2CAnMF,4DAAoCghB,kBA0M9B+H,GAAK,IAAIJ,GC7MFK,GAAb,kDAGE,aAAe,IAAD,8BACZ,gBAHeC,eAEH,EAEZ,EAAKA,UAAYP,KAFL,EAHhB,qGAQE,WAA2CrwB,GAA3C,uFAC8BxE,KAAKo1B,UAAUxhB,cAActI,aAAWgD,WAAW9J,EAAU,qBAAgD,UAD3I,OACQ6wB,EADR,OAEEr1B,KAAK6E,UAAY2H,KAAKuhB,MAAMze,eAAaK,WAAWrE,aAAWoB,aAAa2oB,EAAe,YAC3Fr1B,KAAK6E,UAAUK,QAAUiC,eAAaO,iBAHxC,gDARF,4DAAmC8Z,qBAe7BuP,GAAW,IAAIoE,GCbRG,GAAb,4JACE,WACE,ODcKvE,KChBT,oBAIE,WACE,OAAO8D,OALX,yBAOE,WACE,OAAOH,SARX,GAAoClE,sBAY9B0E,GAAK,IAAII,G,ICLC,IAZhB,iDACU7vB,cADV,2CAGE,WACE,OAAOzF,KAAKyF,UAJhB,IAOE,SAAY6Y,GACVte,KAAKyF,SAAW6Y,MARpB,M,sCCGM3a,GAASC,sBAEF2xB,GAAb,kDAGE,WAAYrG,EAA8BsG,EAAWC,GAAa,IAAD,8BAC/D,cAAMD,EAAMC,IAHGC,oBAEgD,EAE/D,EAAKA,eAAiBxG,EACtB,EAAKtoB,GAAG,WAAW,SAACoR,EAAUmT,GAC5BxnB,GAAOoD,KAAK,0BAA2BiR,EAAKmT,EAA5CxnB,GACA,IAAQ+Z,EAAayN,EAAQ9B,OAAO,GAA5B3L,SACR,EAAKiY,YAAYjY,MAEnB,EAAK9W,GAAG,cAAc,SAACoR,EAAUmT,GAC/BxnB,GAAOoD,KAAK,6BAA8BiR,EAAKmT,EAA/CxnB,GACA,EAAKiyB,mBACL,EAAKF,eAAehX,kBAEtB,EAAK9X,GAAG,kBAAkB,SAACoR,EAAUmT,GACnCxnB,GAAOoD,KAAK,iCAAkCiR,EAAKmT,EAAnDxnB,GACA,IAAMwb,EAAUgM,EAAQ,GACpBhM,GAAWA,EAAQzB,UACrB,EAAKiY,YAAYxW,EAAQzB,aAjBkC,EAHnE,qCAyBE,WACE,OAAO,qDA1BX,gBA6BE,SAAG9L,EAAwBlL,GACzB,OAAO,4DAASkL,EAAOlL,KA9B3B,iBAiCE,SAAIkL,EAAwBlL,GAC1B,OAAO,6DAAUkL,EAAOlL,KAlC5B,yBAqCE,SAAYgX,GACV,IAAKA,IAAaA,EAAS,GACzB,MAAM,IAAIrY,MAAM,mBAGlB,IADA,IAAMwwB,EAA0C,GACvC/uB,EAAQ,EAAGA,EAAQ4W,EAASna,OAAQuD,IAAS,CACpD,IAAM5B,EAAUwY,EAAS5W,GACzB+uB,EAAgBryB,KAAK,IAAImc,uBAAqB,CAC5C9W,GAAI/B,EAAM8C,WACV1E,QAASA,KAGb,IAAMqY,EAAS,IAAI2B,gBAAc,CAC/BT,OAAQoX,EAAgB,GACxBnY,SAAUmY,EACV1W,QAASnf,KAAKmf,QACdlI,WAAW,IAAIC,MAAOuD,YAExBza,KAAK01B,eAAe3X,UAAUR,KAvDlC,2BA0DE,WACE,IAAMuY,EAAW91B,KAAK01B,eAAe5X,YACjCgY,GAAYA,aAAoB5W,kBAClC4W,EAAS7e,WAAY,IAAIC,MAAOuD,UAChCza,KAAK01B,eAAe1X,kBAAkB8X,MA9D5C,kEAkEE,sBAAA9gB,EAAA,8KAEShV,KAAK+1B,KAFd,gDAlEF,+HAuEE,mDAAA/gB,EAAA,qEAA8BqC,EAA9B,yBAA8BA,EAA9B,iCACS,IAAI7V,SAAQ,SAACw0B,EAAKC,GACvB,EAAKrvB,GAAG,cAAc,WACpBqvB,EAAI,yCAGN,EAAKC,kBAAkB,CAAE/N,OAAQ,qBAAsBkB,OAAQhS,IAAQnV,MAAK,SAACi0B,GAC3E,EAAKC,gBACLJ,EAAIG,MACHle,OAAM,SAACnW,GACRm0B,EAAIn0B,UAVV,2CAvEF,2HAsFE,mDAAAkT,EAAA,qEAA0BqC,EAA1B,yBAA0BA,EAA1B,iCACS,IAAI7V,SAAQ,SAACw0B,EAAKC,GACvB,EAAKrvB,GAAG,cAAc,WACpBqvB,EAAI,yCAGN,EAAKC,kBAAkB,CAAE/N,OAAQ,mBAAoBkB,OAAQhS,IAAQnV,MAAK,SAACi0B,GACzE,EAAKC,gBACLJ,EAAIG,MACHle,OAAM,SAACnW,GACRm0B,EAAIn0B,UAVV,2CAtFF,2HAqGE,sBAAAkT,EAAA,4LArGF,2DAAqCqhB,MCF/B1yB,GAASC,sBAEF0yB,GAAb,WAGE,WAAYpH,GAA+B,yBAF1BwG,oBAEyB,EACxC11B,KAAK01B,eAAiBxG,EAJ1B,yCAOE,WACE,OAAOlvB,KAAK01B,eAAezW,oBAR/B,6BAWE,SAAwB+H,GACtB,IAAM1I,EAAUte,KAAK01B,eAAe3W,mBAC9ByW,EAAO,CACXe,OAAQvP,EAAQhe,aAChBmW,QAASnf,KAAKmf,SAEVsW,EAAOnX,EAAU,CAAEkY,YAAalY,EAAQpZ,cAAY3E,EAE1D,OADkB,IAAIg1B,GAAgBv1B,KAAK01B,eAAgBF,EAAMC,KAlBrE,oBAsBE,SAAOzO,GACL,IAAME,EAAYlnB,KAAKy2B,gBAAgBzP,GAMvC,OAJKhnB,KAAKmf,SACR+H,EAAUwP,gBAAgBx0B,MAAK,kBAAMyB,GAAOoD,KAAK,6BAA8BmgB,EAAU6O,IAApDpyB,MAGhCujB,IA7BX,gEAgCE,WAAkBF,GAAlB,eAAAhS,EAAA,yDACQkS,EAAYlnB,KAAKy2B,gBAAgBzP,GAElChnB,KAAKmf,QAHZ,gCAIU7T,aAAWa,QAAQ,KAJ7B,uBAKU+a,EAAUwP,gBALpB,OAMI/yB,GAAOoD,KAAK,6BAA8BmgB,EAAU6O,IAApDpyB,GANJ,gCASSujB,GATT,gDAhCF,8DCGMvjB,GAASC,sBAEF+yB,GAAb,iDACUC,gBAA0B,EADpC,KAEUzP,cAFV,OAGU0P,iBAHV,sFAKE,kCAAA7hB,EAAA,6DACEhV,KAAK42B,gBAAiB,EAClBxD,EAAgBE,oBAClBtzB,KAAK62B,YNiMF3B,GM/LHl1B,KAAK62B,YJAF3B,GIEC4B,EAAe3D,IACfrqB,EAAYguB,EAAaC,WAC/B/2B,KAAKmnB,SAAL,UAAgBjf,WAAS0W,MAAK,SAAA9c,GAAC,OAAIA,EAAE+G,KAAOC,YAA5C,QAA0DZ,WAAS,GAC7D8uB,EAAyB,IAAIV,GAAuB5B,MAV5D,SAWQ10B,KAAK62B,YAAY/H,cAAc9uB,KAAKmnB,SAAUrjB,YAAUqY,aAAamL,UAAW0P,EAAuB92B,OAAOF,KAAKmnB,WAX3H,wBAYQnnB,KAAKi3B,iBAZb,QAaEtzB,GAAOoD,KAAK,aAAc+vB,EAAaxvB,SAAvC3D,GACA3D,KAAK42B,gBAAiB,EAdxB,iDALF,yHAsBE,kHACS,IAAIp1B,QAAJ,uCAAY,WAAOC,GAAP,iBAAAuT,EAAA,sEACE,EAAK6hB,YAAYzH,aAAa,KADhC,OACXlB,EADW,QAEbgJ,EAAM,IAAIC,OACVC,OAAS,WACXjE,IAAkB7rB,UAAW,EAC7B7F,KAEFy1B,EAAIG,QAAU,WACZlE,IAAkB7rB,UAAW,EAC7B7F,KAEFy1B,EAAII,IAAM1a,UAAQC,WAAWqR,EAAKpR,OAXjB,2CAAZ,wDADT,2CAtBF,2EAsCE,WAAiB,IAAD,EACdnZ,GAAOoD,KAAK,0BAAZpD,GACA,UAAA3D,KAAK62B,mBAAL,SAAkBlP,YAxCtB,yBA2CE,WACE,OAAO3nB,KAAK42B,iBA5ChB,mBA+CE,WACE,OAAO52B,KAAKmnB,WAhDhB,sBAmDE,WACE,OAAOnnB,KAAK62B,gBApDhB,KAwDMU,GAAU,IAAIZ,GAEPa,GAAmB,WAC9B,OAAOD,I,mBClEIE,GAAiBC,aAAH,oKAMdC,GAAwBD,aAAH,wGAMrBE,GAAeF,aAAH,2HAMZG,GAAeH,aAAH,2HAMZI,GAAsBJ,aAAH,uIAMnBK,GAAsBL,aAAH,oGAMnBM,GAAkB,CACvB1iB,MADuB,SACjB2iB,EADiB,EAC0BV,GAA2C,OAAD,qHAAtE1uB,EAAsE,EAAtEA,GAAIjD,EAAkE,EAAlEA,OAAQV,EAA0D,EAA1DA,QAA0D,kBACxFqyB,EAAQhzB,OAAO2zB,WAAWxS,WAAW7c,EAAIjD,EAAQV,IADuC,8CAG3FizB,YAJuB,SAIXF,EAJW,EAIeV,GAA2C,OAAD,iHAArD1uB,EAAqD,EAArDA,GAAqD,kBAC7E0uB,EAAQhzB,OAAO2zB,WAAWzS,iBAAiB5c,IADkC,8CAGhFyB,IAPuB,SAOnB2tB,EAPmB,EAOeV,GAA2C,OAAD,mHAA7D1uB,EAA6D,EAA7DA,GAAIjD,EAAyD,EAAzDA,OAAyD,kBAC7E2xB,EAAQhzB,OAAO2zB,WAAWpS,SAASjd,EAAIjD,IADsC,8CAGhFyE,IAVuB,SAUnB4tB,EAVmB,EAUeV,GAA2C,OAAD,mHAA7D1uB,EAA6D,EAA7DA,GAAIjD,EAAyD,EAAzDA,OAAyD,kBAC7E2xB,EAAQhzB,OAAO2zB,WAAW1F,SAAS3pB,EAAIjD,IADsC,8CAGhFkF,UAbuB,SAabmtB,EAba,EAaqBV,GAA2C,OAAD,mHAA7D1uB,EAA6D,EAA7DA,GAAIjD,EAAyD,EAAzDA,OAAyD,kBACnF2xB,EAAQhzB,OAAO2zB,WAAW/R,eAAetd,EAAIjD,IADsC,8CAGtFoF,UAhBuB,SAgBbitB,EAhBa,EAgBaV,GAA2C,OAAD,iHAArD1uB,EAAqD,EAArDA,GAAqD,kBAC3E0uB,EAAQhzB,OAAO2zB,WAAWnS,eAAeld,IADkC,+CCpDzEuvB,GAAgBV,aAAH,uEAMbW,GAAgB,CACrBC,KADqB,SAChBL,EAAa5O,EAAakO,GAA2C,OAAD,6HACtEA,EAAQhzB,OAAO2zB,WAAWrT,aAD4C,+CCNpE0T,GAAcb,aAAH,yRAsBXc,GAAoBd,aAAH,yNAcjBe,GAA4Bf,aAAH,2FAMzBgB,GAAwBhB,aAAH,gSAC9Bc,IAWSG,GAAuBjB,aAAH,wGAMpBkB,GAAiBlB,aAAH,8HACvBa,IAQSM,GAAkBnB,aAAH,8QACxBa,IAQSO,GAAsBpB,aAAH,mHAC5Ba,IAQSQ,GAA6BrB,aAAH,kOACnCa,IAQSS,GAAc,CACnBC,eADmB,SACJhB,EAAa5O,EAAakO,GAA4C,OAAD,0HACnEA,EAAQhzB,OAAO2zB,WAAW/I,yBADyC,cAClFntB,EADkF,yBAEjFA,GAFiF,8CAIpFk3B,WALmB,SAKRjB,EALQ,EAKyCV,GAAwD,OAAD,yHAAzF1uB,EAAyF,EAAzFA,GAAIqY,EAAqF,EAArFA,MAAOiY,EAA8E,EAA9EA,OAAQhzB,EAAsE,EAAtEA,OAAsE,SAClGoxB,EAAQhzB,OAAO2zB,WAAW7G,mBAAmBxoB,EAAIqY,EAAOiY,EAAQhzB,GADkC,cACjHnE,EADiH,yBAEhHA,GAFgH,8CAInHo3B,UATmB,SASTnB,EATS,EASiBV,GAAiD,OAAD,mHAA3D1uB,EAA2D,EAA3DA,GAA2D,SACnE0uB,EAAQhzB,OAAO2zB,WAAWrG,kBAAkBhpB,GADuB,cAClF7G,EADkF,yBAEjFA,GAFiF,8CAIpFksB,KAbmB,SAad+J,EAbc,EAaYV,GAAkD,OAAD,mHAA5D1uB,EAA4D,EAA5DA,GAA4D,SAC/D0uB,EAAQhzB,OAAO2zB,WAAW9I,aAAavmB,GADwB,cAC9E7G,EAD8E,yBAE7EA,GAF6E,8CAIhF2S,MAjBmB,SAiBbsjB,EAjBa,EAiB6CV,GAAoD,OAAD,2HAA9FrW,EAA8F,EAA9FA,MAAOiY,EAAuF,EAAvFA,OAAQ1kB,EAA+E,EAA/EA,KAAMC,EAAyE,EAAzEA,MAAOrJ,EAAkE,EAAlEA,OAAkE,SAClGksB,EAAQhzB,OAAO2zB,WAAW7I,cAAcnO,EAAOiY,EAAQ1kB,EAAMC,EAAOrJ,GAD8B,cACjHrJ,EADiH,yBAEhHA,GAFgH,8CAInHq3B,SArBmB,SAqBVpB,EAAa5O,EAAakO,GAAoD,OAAD,0HACrEA,EAAQhzB,OAAO2zB,WAAWvI,mBAD2C,cACpF3tB,EADoF,yBAEnFA,GAFmF,8CAItFs3B,eAzBmB,SAyBJrB,EAzBI,EAyB0CV,GAAoD,OAAD,uHAAlFryB,EAAkF,EAAlFA,QAASgc,EAAyE,EAAzEA,MAAOiY,EAAkE,EAAlEA,OAAkE,SAC/F5B,EAAQhzB,OAAO2zB,WAAWpG,uBAAuB5sB,EAASgc,EAAOiY,GAD8B,cAC9Gn3B,EAD8G,yBAE7GA,GAF6G,+CCxH3Gu3B,GAAoB7B,aAAH,mIASjB8B,GAAsB9B,aAAH,0JAUnB+B,GAAwB/B,aAAH,2KAWrBgC,GAAuBhC,aAAH,iJAC7B6B,IAQSI,GAAyBjC,aAAH,uJAC/B8B,IAQSI,GAA0BlC,aAAH,6QAChCc,IAWSqB,GAAgB,CACrBC,WADqB,SACV7B,EAAa5O,EAAakO,GAAwD,OAAD,0HAC3EA,EAAQhzB,OAAO2zB,WAAW1U,qBADiD,cAC1FxhB,EAD0F,yBAEzFA,GAFyF,8CAI5F+3B,UALqB,SAKX9B,EALW,EAKeV,GAA8D,OAAD,mHAAxE1uB,EAAwE,EAAxEA,GAAwE,SAChF0uB,EAAQhzB,OAAO2zB,WAAWlG,kBAAkBnpB,GADoC,cAC/F7G,EAD+F,yBAE9FA,GAF8F,8CAIjGg4B,YATqB,SAST/B,EATS,EASiBV,GAAgE,OAAD,mHAA1E1uB,EAA0E,EAA1EA,GAA0E,SACpF0uB,EAAQhzB,OAAO2zB,WAAWjG,oBAAoBppB,GADsC,cACnG7G,EADmG,yBAElGA,GAFkG,8CAIrGi4B,aAbqB,SAaRhC,EAbQ,EAaqCV,GAAwD,OAAD,uHAArFrW,EAAqF,EAArFA,MAAOiY,EAA8E,EAA9EA,OAAQhzB,EAAsE,EAAtEA,OAAsE,SAChGoxB,EAAQhzB,OAAO2zB,WAAWhG,qBAAqBhR,EAAOiY,EAAQhzB,GADkC,cAC/GnE,EAD+G,yBAE9GA,GAF8G,+CC1E5Gk4B,GAAkBxC,aAAH,+KAUfyC,GAA6BzC,aAAH,mYAmB1B0C,GAAiB,CACtB3oB,MADsB,SAChBwmB,EADgB,EACeV,GAAoE,OAAD,mHAAnFryB,EAAmF,EAAnFA,QAAmF,SACvFqyB,EAAQhzB,OAAO2zB,WAAWjzB,cAAcC,GAD+C,cACtGlD,EADsG,yBAErGA,GAFqG,8CAIxGq4B,gBALsB,SAKNpC,EALM,EAKwCV,GAA6D,OAAD,uHAA3FryB,EAA2F,EAA3FA,QAASgc,EAAkF,EAAlFA,MAAOmP,EAA2E,EAA3EA,OAA2E,SACzGkH,EAAQhzB,OAAO2zB,WAAWnI,wBAAwB7qB,EAASgc,EAAOmP,GADuC,cACxHruB,EADwH,yBAEvHA,GAFuH,+CCtBrHs4B,GAAb,8JACE,WACE,OAAO9C,KAAmBU,eAF9B,GAAyCqC,KA4CnCh2B,GAAS,IAAI+1B,GAAoB,CAErCE,MAxC2B,IAAIC,IAAc,CAC7CC,aAAc,CACZC,MAAO,CACLC,OAAQ,CAENjmB,MAAOkmB,YAAsB,CAAC,QAAS,SACvCvB,eAAgBuB,YAAsB,CAAC,iBAmC7CC,UAjBqB,CACrBxhB,UAZsB,IAAIyhB,IAAkB,CAC5C12B,KAAM,YACN22B,YAAa,+BACbC,UAH4C,SAGlCh6B,GACR,OAAOA,EAAMilB,WAEfgV,WAN4C,SAMjCj6B,GACT,OAAO,IAAI6C,YAAUC,iBAAiB9C,MAMxC05B,MAAM,uCACDP,IACApB,IACAa,IAELsB,SAAS,2BACJ9C,IACAL,KASLoD,QAAS,CACP,cAAelI,aACf,iBAAkBA,YAITmI,GAAkB,WAC7B,OAAO92B,I,QCpCHkwB,GAAU,IAjChB,WAKE,aAAe,yBAJP6G,oBAIM,OAHNnU,cAGM,OAFNoU,yBAEM,EACZv7B,KAAKs7B,eAAiB,IAAIx3B,YAAUC,iBAAiB,KANzD,+CAaE,WACE,OAAO/D,KAAKs7B,gBAdhB,IASE,SAAkBn1B,GAChBnG,KAAKs7B,eAAiBn1B,IAV1B,gCAiBE,SAAyByX,GACvB5d,KAAKu7B,oBAAsB3d,IAlB/B,wBAqBE,WACE,OAAO5d,KAAKmnB,WAtBhB,wBAyBE,SAAWH,GACThnB,KAAKmnB,SAAWH,EACZhnB,KAAKu7B,qBACPv7B,KAAKu7B,oBAAoBv7B,KAAKmnB,cA5BpC,MAmCaqU,GAAoB,WAC/B,OAAO/G,I,4BCpCHgH,GAAOC,YAAO,MAAPA,EACX,cAAGC,MAAH,kIASWC,GAAS,WACpB,OACE,qCACE,eAACH,GAAD,UACE,gBAACI,GAAA,EAAD,eAAc3I,iB,oBCZhBuI,GAAOC,YAAO,MAAPA,EACX,cAAGC,MAAH,+BAKIG,GAAkBJ,YAAOG,KAAPH,EACtB,cAAGC,MAAH,gEAMWI,GAA0B,SAACC,GACtC,OACE,eAAC,GAAD,UACE,eAACC,GAAA,EAAD,CAAQC,SAAS,SAAjB,SACE,eAACC,GAAA,EAAD,UACE,eAACL,GAAD,CAAiBM,QAAQ,KAAzB,SACGhJ,EAAgBC,kB,mCCpBvBgJ,GAAmBX,YAAO,MAAPA,EACvB,cAAGC,MAAH,6LAYIW,GAAkBZ,YAAO,MAAPA,EACtB,cAAGC,MAAH,mFAOWY,GAAuB,SAAAP,GAClC,IAAQQ,EAA2BR,EAA3BQ,SAAaC,EAArB,aAAmCT,EAAnC,IAEA,OACE,eAACK,GAAD,yBAAkBxzB,GAAG,cAAiB4zB,GAAtC,aACE,eAACC,GAAA,EAAD,CAAWC,SAAS,KAApB,SACE,eAACL,GAAD,UAAkBE,U,gBC3BpBI,GAAoBlB,YAAO,MAAPA,EACxB,cAAGC,MAAH,6EAOWkB,GAAwB,SAAAb,GACnC,IAAQQ,EAA2BR,EAA3BQ,SAAaC,EAArB,aAAmCT,EAAnC,IAEA,OAAO,eAACY,GAAD,2BAAuBH,GAAvB,aAAmCD,MCF/BM,GAA+B,SAACd,GAC3C,MAAoCe,mBAAiB,GAArD,oBAAOC,EAAP,KAAmBC,EAAnB,KAMA,OAJAC,qBAAU,WACRD,EAAcjB,EAAMgB,cACnB,CAAChB,EAAMgB,aAGR,gBAAC,GAAD,WACE,eAAC,GAAD,IACA,gBAAC,GAAD,WACE,eAACnB,GAAA,EAAD,yBACCmB,EAAa,GACZ,eAACG,GAAA,EAAD,CAAMC,KAAK,QAAQz6B,MAAOq6B,EAAYZ,QAAQ,gBAGlD,eAAC,GAAD,QChBAiB,GAAcC,IAAMC,mBAAmCh9B,GAgBhDi9B,GAAgC,SAACxB,GAC5C,MAA0Be,mBAAuB,MAAjD,oBAAOhvB,EAAP,KAAc0vB,EAAd,KACA,EAA4BV,mBAA2C,MAAvE,oBAAOxf,EAAP,KAAeQ,EAAf,KACA,EAA8Bgf,mBAAmC,MAAjE,oBAAO/V,EAAP,KAAgB0W,EAAhB,KAEsBhJ,KACRiJ,oBAAsB5f,EAEbyd,KACRoC,qBAAuBF,EAEtC,IAAMnG,EAAwB,CAC5BkG,WACA1vB,QACAwP,SACAyJ,WAGF,OACE,eAACqW,GAAYQ,SAAb,CAAsB58B,MAAOs2B,EAA7B,SAAuCyE,EAAMQ,YCtC3C74B,GAASC,sBAQTk6B,GAAuBR,IAAMC,mBAA4Ch9B,GAKlEw9B,GAA0B,WACrC,IAAMxG,EAAU+F,IAAMU,WAAWF,IAEjC,IAAKvG,EACH,MAAM,IAAIlyB,MAAM,gDAGlB,OAAOkyB,GAWI0G,GAAiC,SAACjC,GAC7C,MAAoCe,mBAAuC,MAA3E,oBAAOmB,EAAP,KAAmBC,EAAnB,KACA,EAAoCpB,mBAAiB,GAArD,oBAAOC,EAAP,KAAmBC,EAAnB,KACMmB,EAAUd,IAAMe,QAAO,GACvBC,ED9BsB,WAC5B,IAAM/G,EAAU+F,IAAMU,WAAWX,IAEjC,IAAK9F,EACH,MAAM,IAAIlyB,MAAM,gDAGlB,OAAOkyB,ECuBagH,GACdC,EAAgBhH,KAEdja,EAAoB+gB,EAApB/gB,OAAQyJ,EAAYsX,EAAZtX,QAEhBsW,IAAMJ,WAAU,WAEd,OADAkB,EAAQ3wB,SAAU,EACX,WACL2wB,EAAQ3wB,SAAU,KAEnB,IAEHyvB,qBAAU,WACH3f,GACmBmX,KACRpX,eAEf,CAACC,IAEJ2f,qBAAU,WACR,IAAKlW,EAAS,CACZ,IAAMyX,EAAiBjD,KACjB1yB,EAAYqqB,IAAkB4D,WACpC0H,EAAef,WAAWx1B,WAAS0W,MAAK,SAAA9c,GAAC,OAAIA,EAAE+G,KAAOC,MACtDnF,GAAOoD,KAAK,WAAY03B,EAAeC,aAAvC/6B,MAED,CAACqjB,IAEJ,IAAM2X,EAASC,uBAAY,WACHlK,KACRhW,eACd5F,OAAO+lB,SAASC,WACf,IAqDH,OAnDA5B,qBAAU,WAAO,IAAD,IACRj8B,EAAQ,CACZqd,QAAO,OAAEf,QAAF,IAAEA,GAAF,UAAEA,EAAQkB,cAAV,aAAE,EAAgBvZ,QACzB8hB,UACA2X,UAGFh7B,GAAOoD,KAAK,wBAAZ,OAAqCwW,QAArC,IAAqCA,GAArC,UAAqCA,EAAQkB,cAA7C,aAAqC,EAAgBvZ,QAArDvB,GAEA,IAAMW,EAAS,uCAAG,gDAAA0Q,EAAA,yDAAO+pB,EAAP,+BAA6B,GACzC/X,EADY,wBAEdrjB,GAAOoD,KAAK,qBAAsBg4B,EAAlCp7B,GACIo7B,GAAe,GACjBjmB,OAAO+lB,SAASC,SAEZE,EAAiB9nB,KAAKwU,MACtBuT,EAAU5yB,WAAU,sBAAC,sBAAA2I,EAAA,0DACrBopB,EAAQ3wB,SAAY+wB,EAAcU,cADb,uBAEvBV,EAAc7W,UACdoX,IACA9B,EAAc8B,GAJS,SAKjBzzB,aAAWa,QAAQ,KALF,OAMvB7H,EAAUy6B,GANa,2CAQxB,KAfW,SAiBZZ,EAAc,MAjBF,UAkBNK,EAAcl6B,YAlBR,QAmBZ24B,EAAc,GACdkB,EAAcl9B,GApBF,kDAsBZ0C,GAAOoK,MAAP,KAAApK,GACAoV,aAAakmB,GACPE,EAAW,IACXC,EAAUloB,KAAKwU,MAAQsT,EAC7B3yB,YAAW,WACL+xB,EAAQ3wB,UAAY+wB,EAAcU,gBACpCH,IACA9B,EAAc8B,GACdz6B,EAAUy6B,MAEXK,EAAUD,EAAW,EAAIA,EAAWC,GAhC3B,0DAAH,qDAqCf,OADA96B,IACO,WACLk6B,EAAc7W,aAEf,CAACpK,EAAQyJ,EAAS2X,EAAQH,IAG3B,qCACIN,EAGA,eAACJ,GAAqBD,SAAtB,CAA+B58B,MAAOi9B,EAAtC,SAAmDlC,EAAMQ,WAFzD,eAAC,GAAD,CAAaQ,WAAYA,O,kBCjIXqC,GAAtB,iGAEE,SAAoBtxB,GAClB,IAAM/H,EAAUI,aAAWC,cAAc0H,GACzB,mCAAZ/H,GACcsK,uBACRgB,yBAAwB,GAElC+tB,EAAaC,SAASC,gBAAgBv5B,KAR1C,4BAUE,SAAsBA,GACpBq5B,EAAaC,SAASC,gBAAgBv5B,OAX1C,KAAsBq5B,GACbC,c,ECFF,IAAeE,GAAtB,kCAAsBA,GACNC,iBAAmB,WAC/B,MAAiC,WAA7B9e,SAAS+e,gBACJ57B,YAAUkY,cAAc2jB,OAE1B77B,YAAUkY,cAAc4jB,Q,sDCKtBC,GAAyB,SAAC7D,GAAkB,IAAD,IAClD8D,EAAQ,UACRC,EAAkB,2BAEtB,GACO,YADC/D,EAAM/yB,KAEV62B,EAAQ,UACRC,EAAkB,uBAUtB,OAJI/D,EAAMjuB,OACR0H,QAAQC,IAAIpK,aAAWgB,aAAa0vB,EAAMjuB,QAI1C,eAACiyB,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CAAKC,GAAI,CACPJ,MAAK,UAAE9D,EAAM8D,aAAR,QAAiBA,EACtBC,gBAAe,UAAE/D,EAAM+D,uBAAR,QAA2BA,EAC1CI,QAAS,OACTC,UAAW,UAJb,SAME,eAACvE,GAAA,EAAD,UAAaG,EAAMh2B,e,UClBdq6B,GAAmC,SAACrE,GAAkB,IAAD,MAC1DoC,EAAUd,IAAMe,QAAO,GAC7B,EAAoCf,IAAMP,UAAS,GAAnD,oBAAOuD,EAAP,KAAmBC,EAAnB,KAEMC,EAAW,uCAAG,sBAAAxrB,EAAA,6DAClBurB,GAAc,GADI,kBAGVvE,EAAMyE,aAHI,sDAKhBpB,GAAaqB,aAAat6B,aAAWC,cAAX,OALV,OAOd+3B,EAAQ3wB,SACV8yB,GAAc,GARE,yDAAH,qDAmBjB,OAPAjD,IAAMJ,WAAU,WAEd,OADAkB,EAAQ3wB,SAAU,EACX,WACL2wB,EAAQ3wB,SAAU,KAEnB,IAGD,eAACkzB,GAAA,EAAD,CACEC,QAASN,EACTlD,KAAI,UAAEpB,EAAMoB,YAAR,QAAgB,QACpBhB,QAAO,UAAEJ,EAAMI,eAAR,QAAmB,YAC1B0D,MAAK,UAAE9D,EAAM8D,aAAR,QAAiB,UACtBe,UAAW7E,EAAM6E,UACjBC,SAAU9E,EAAM8E,SAChBC,QAASP,EACTQ,UAAWhF,EAAMgF,UACjBd,GAAIlE,EAAMkE,GATZ,SAWGlE,EAAMQ,Y,0DC1CAyE,GAAqB3D,IAAM4D,YACtC,SAAClF,EAAOmF,GACN,IAAQC,EAASpF,EAAToF,KAER,eAEIA,EADFA,KADF,GACSC,EADT,KACgBl7B,EADhB,KAC4Bm7B,EAD5B,KAIA,OACE,eAACC,GAAA,EAAD,CAASJ,IAAKA,EAAKK,QAAO,cAASH,EAAT,YAAkBl7B,GAAU+5B,GAAIlE,EAAMkE,GAAhE,SAC0B,kBAAhBoB,EACN,uBAAMvxB,EAAGuxB,IASTA,EAAYn9B,KAAI,SAAC4L,EAAWsG,GAAZ,OACd,uBAAMorB,MAAO,CAAEC,QAAe,IAANrrB,EAAU,GAAM,GAAKtG,EAAGA,Y,8ECzB/C4xB,GAAyD,SAAC3F,GACrE,OACE,eAAC4F,GAAD,2BAAsB5F,GAAtB,IAA6BkE,GAAE,6BAAW2B,KAAeC,SAAY,CAAEnF,SAAU,aAexEiF,IAXelG,aAAO,gBAAGqG,EAAH,EAAGA,UAAc/F,EAAjB,0BACjC,eAACgG,GAAA,EAAD,2BAAahG,GAAb,IAAoBiG,QAAS,CAAEC,OAAQH,QADbrG,EAEzB,gBAAGC,EAAH,EAAGA,MAAH,oCACMkG,KAAeC,SAAY,CAChC/B,gBAAiBpE,EAAMwG,QAAQC,OAAOC,MACtCvC,MAAO,sBACPwC,UAAW3G,EAAM4G,QAAQ,GACzBC,SAAU,QAIkB9G,aAAO,gBAAGqG,EAAH,EAAGA,UAAc/F,EAAjB,0BACrC,eAACgG,GAAA,EAAD,2BAAahG,GAAb,IAAoByG,OAAK,EAACR,QAAS,CAAEC,OAAQH,QADfrG,EAE7B,kBAAGC,EAAH,EAAGA,MAAH,wCACMkG,KAAeY,OAAU,CAC9B3C,MAAOnE,EAAMwG,QAAQC,OAAOM,QAF7B,4BAIMb,KAAeC,SAAY,CAChC/B,gBAAiBpE,EAAMwG,QAAQC,OAAOM,QALvC,MCbGC,IDsBqBjH,aAAO,gBAAGqG,EAAH,EAAGA,UAAc/F,EAAjB,0BAChC,eAACgG,GAAA,EAAD,2BAAahG,GAAb,IAAoBiG,QAAS,CAAEC,OAAQH,QADdrG,EAExB,gBAAGC,EAAH,EAAGA,MAAH,oCACMkG,KAAeC,SAAY,CAChC/B,gBAAiB,UACjBD,MAAO,sBACPnD,SAAU,IACV6F,SAAU7G,EAAMiH,WAAWC,QAAQ,IACnCC,OAAQ,yBC9BYpH,YAAO,MAAPA,EAAc,cAAGC,MAAH,qIAIXvI,EAAgBM,YAJL,yGAUhCqP,GAAYrH,YAAO,MAAPA,EAChB,cAAGC,MAAH,0KAcWqH,GAAyC,SAAChH,GAAkB,IAAD,EAC7C92B,EAGnB+U,EAAoB,SAACd,GACzB,OAAOH,YAAUiB,kBAAkBd,IAE/BY,EAAa,SAACZ,GAClB,OAAOH,YAAUe,WAAWZ,IAE9B,OACE,eAAC8pB,GAAA,EAAD,UACE,gBAACC,GAAA,EAAD,CAAgBC,UAAWC,KAAY1zB,GAAE,gBAAWssB,EAAMqH,KAAKx6B,IAA/D,UACE,gBAAC85B,GAAD,WACG3G,EAAMqH,KAAKjoB,OACV,eAAC6kB,GAAA,EAAD,CAAKC,GAAI,CAAEhE,SAAU,WAAYoH,IAAK,EAAGC,KAAM,GAA/C,SACE,eAAC,GAAD,CAA0BC,MAAO,gCAAOxH,EAAMqH,KAAKjoB,QAAeqoB,UAAU,SAAShB,OAAK,EAA1F,SACE,eAACtF,GAAA,EAAD,CAAMC,KAAK,QAAQgE,KAAM,eAACH,GAAD,CAAoBG,KAAMsC,KAAcxD,GAAI,CAAEsC,SAAU,QAASmB,GAAI,KAASzD,GAAI,CAAEsC,SAAU,UAAY7/B,OAhBxHuC,EAgB+I82B,EAAMqH,KAAKjoB,MAf1K9P,aAAW6D,0BAA0BjK,EAAS,GAAI,UAmBnD,eAAC+6B,GAAA,EAAD,CAAKC,GAAI,CAAEhE,SAAU,WAAYoH,IAAK,EAAGM,MAAO,GAAhD,SACE,eAAC,GAAD,CAA0BJ,MAAO,gDAA0BC,UAAU,SAAShB,OAAK,EAAnF,SACE,eAACtF,GAAA,EAAD,CAAMC,KAAK,QAAQgE,KAAM,eAACH,GAAD,CAAoBG,KAAMyC,KAAO3D,GAAI,CAAEsC,SAAU,QAASmB,GAAI,KAASzD,GAAI,CAAEsC,SAAU,UAAY7/B,MAAOq5B,EAAMqH,KAAKxuB,WAGlJ,eAACorB,GAAA,EAAD,CAAKC,GAAI,CAAEhE,SAAU,WAAY4H,OAAQ,EAAGP,KAAM,EAAGlC,MAAO,qBAA5D,SACE,gBAACpB,GAAA,EAAD,WACGjE,EAAMqH,KAAKh5B,KACV,eAAC,GAAD,CAA0Bm5B,MAAO,0CAAYvpB,EAAkB+hB,EAAMqH,KAAKh5B,IAAIzE,WAAiB69B,UAAU,SAAShB,OAAK,EAAvH,SACE,eAACtF,GAAA,EAAD,CAAMC,KAAK,QAAQgE,KAAM,eAACH,GAAD,CAAoBG,KAAM2C,KAAkB7D,GAAI,CAAEsC,SAAU,QAASmB,GAAI,KAASzD,GAAI,CAAEsC,SAAU,SAAUwB,GAAI,EAAGC,GAAI,GAAKthC,MAAOoX,EAAWiiB,EAAMqH,KAAKh5B,IAAIzE,YAGzLo2B,EAAMqH,KAAK/tB,OAAS0mB,EAAMqH,KAAK/tB,MAAMC,UAAUR,GAAG,IACjD,eAAC,GAAD,CAA0ByuB,MAAO,4CAAcvpB,EAAkB+hB,EAAMqH,KAAK/tB,MAAMC,cAAoBkuB,UAAU,SAAShB,OAAK,EAA9H,SACE,eAACtF,GAAA,EAAD,CAAMC,KAAK,QAAQgE,KAAM,eAACH,GAAD,CAAoBG,KAAM8C,KAAOhE,GAAI,CAAEsC,SAAU,QAASmB,GAAI,KAASzD,GAAI,CAAEsC,SAAU,SAAUwB,GAAI,EAAGG,MAAO,SAAWxhC,MAAOoX,EAAWiiB,EAAMqH,KAAK/tB,MAAMC,oBAK9L,eAAC,GAAD,CAAW2qB,GAAI,CAAEkE,gBAAgB,QAAD,OAAUxnB,UAAQC,WAAWmf,EAAMqH,KAAKvmB,MAAOkf,EAAMqH,KAAKtmB,KAA1D,YAElC,gBAACsnB,GAAA,EAAD,CAAanE,GAAI,CAAEr/B,EAAG,GAAtB,UACE,gBAACg7B,GAAA,EAAD,CAAYO,QAAQ,KAAK+G,UAAU,MAAMjD,GAAI,CAAEr/B,EAAG,GAAlD,UACGsH,kBAAgBC,UADnB,KACgC4zB,EAAMqH,KAAKx6B,MAE3C,eAACo3B,GAAA,EAAD,CAAKC,GAAI,CAAE/5B,OAAQ,OAAQm+B,SAAU,QAArC,SACE,eAACrE,GAAA,EAAD,CAAKC,GAAI,CAAEr/B,EAAG,GAAd,mBACGm7B,EAAMqH,KAAKxV,kBADd,aACG,EAAuB1pB,KAAI,SAAC6Q,GAAD,OAC1B,eAACmoB,GAAA,EAAD,CAAcx6B,MAAOqS,EAAGonB,QAAQ,WAAW8D,GAAI,CAAEqE,GAAI,EAAGN,GAAI,GAAK7G,KAAK,SAA3DpoB,mBCzErBwvB,GAA0C,SAACxI,GAC/C,OACE,qCACGA,EAAMjuB,MACL,eAAC,GAAD,CAAO/H,QAASI,aAAWC,cAAc21B,EAAMjuB,OAAQ9E,KAAK,YAE5D,qCACG+yB,EAAMyI,YAAczI,EAAM0I,QACzB,+BAEA,eAAC,GAAD,CAAO1+B,QAAQ,iBAAiBiD,KAAK,iBAc3C07B,GAA0D,SAAC3I,GAC/D,OACE,eAAC4I,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAGC,eAAe,SAASC,WAAW,SAA/D,SACE,eAACJ,GAAA,EAAD,CAAMvB,MAAI,EAAS4B,GAAI,GAAIC,GAAI,EAA/B,SACGlJ,EAAMyI,UACL,eAAC,GAAD,CAAOz+B,QAAQ,aAAaiD,KAAK,YAEjC,eAAC,GAAD,CAAa8E,MAAOiuB,EAAMjuB,MAAO02B,UAAWzI,EAAMyI,UAAWC,QAAS1I,EAAM0I,WAJjE,QAmBRS,GAAoD,SAACnJ,GAChE,OACE,qCACE,eAACU,GAAA,EAAD,CAAWwD,GAAI,CAAEkF,GAAI,EAAGC,GAAI,GAAK1I,SAAS,KAA1C,SACGX,EAAMrO,MAAMpqB,OAAS,EACpB,uCACE,eAAC,KAAD,CACE+hC,WAAYtJ,EAAMrO,MAAMpqB,OACxB1B,KAAMm6B,EAAMuJ,mBACZC,QAASxJ,EAAMwJ,QACfC,OACE,eAAC,GAAD,CAAqB13B,MAAOiuB,EAAMjuB,MAAO02B,UAAWzI,EAAMyI,UAAWC,QAAS1I,EAAMrO,MAAMpqB,QAAU,IAEtGmiC,gBAAgB,QAChBC,iBAAiB,aARnB,SAUE,eAACf,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAGC,eAAe,SAASC,WAAW,SAASY,aAAc,EAAtF,SACG5J,EAAMrO,MAAMxpB,KAAI,SAACtD,GAAD,OACf,eAAC+jC,GAAA,EAAD,CAAMvB,MAAI,EAAY4B,GAAI,GAAIY,GAAI,EAAGX,GAAI,EAAGY,GAAI,EAAhD,SACE,eAAC,GAAD,CAAuBzC,KAAMxiC,KADfA,EAAEgI,WAMvBmzB,EAAMwJ,UAAYxJ,EAAMyI,WACvB,eAACxE,GAAA,EAAD,CAAKC,GAAI,CAAEmB,MAAO,OAAQ0E,QAAS,OAAQhB,eAAgB,UAA3D,SACE,eAAC,GAAD,CAAiB3I,QAAQ,WAAWqE,WAAYzE,EAAMuJ,mBAAoBrF,GAAI,CAAE8F,SAAU,SAA1F,4BAKN,eAAC,GAAD,CAAqBj4B,MAAOiuB,EAAMjuB,MAAO02B,UAAWzI,EAAMyI,UAAWC,QAAS1I,EAAMrO,MAAMpqB,QAAU,S,kDCvDxG0iC,GAAU,IA3Bd,aAAe,IAAD,gCAFGC,aAEH,OAIdC,iBAAmB,WAAiD,IAAhDC,EAA+C,uDAAnB,eAC9C,OAAO,EAAKF,QAAQnlB,MAAmC,CACrDA,MAAOmZ,GACPmM,UAAW,CACTnhC,QAASiuB,IAAkBzrB,kBAE7B4+B,YAAaF,KAVH,KAcdG,mBAAqB,SAACtzB,EAAkBqc,EAAgBU,GAAyE,IAAhDoW,EAA+C,uDAAnB,eAC3G,OAAO,EAAKF,QAAQnlB,MAAuD,CACzEA,MAAOoZ,GACPkM,UAAW,CACTnhC,QAAS+N,EACTiO,MAAOoO,EACPe,OAAQL,GAEVsW,YAAaF,KArBfpmC,KAAKkmC,QAAU7K,MA4BNmL,GAAoB,WAC/B,OAAOP,I,oGC1BHQ,G,WAGJ,aAAe,IAAD,gCAFGP,aAEH,OAId1iB,mBAAqB,WAAiD,IAAhD4iB,EAA+C,uDAAnB,eAChD,OAAO,EAAKF,QAAQnlB,MAAqB,CACvCA,MAAO0Y,GACP6M,YAAaF,KAPH,KAWdM,eAAiB,SAACnX,EAAiBD,EAAgBiC,GAAyE,IAAhD6U,EAA+C,uDAAnB,eACtG,OAAO,EAAKF,QAAQnlB,MAAiD,CACnEA,MAAO6Y,GACPyM,UAAW,CACTlN,OAAQ5J,EACRrO,MAAOoO,EACPnpB,OAAQorB,GAEV+U,YAAaF,KAlBfpmC,KAAKkmC,QAAU7K,K,qFAsBjB,WAAiBxyB,EAAYjD,EAAgBV,GAA7C,mBAAA8P,EAAA,sEACuBhV,KAAKkmC,QAAQS,OAA8B,CAC9DC,SAAUnP,GACV4O,UAAW,CACTx9B,GAAIA,EACJjD,OAAQA,EACRV,QAASoG,aAAWS,mBAAmB7G,QAAW3E,EAAY2E,KANpE,cACQlD,EADR,yBASS6kC,QAAO,oBAAC7kC,EAAOuK,YAAR,aAAC,EAAa+I,aAAd,WAThB,gD,gIAYA,WAAuBzM,GAAvB,mBAAAmM,EAAA,sEACuBhV,KAAKkmC,QAAQS,OAA0C,CAC1EC,SAAUjP,GACV0O,UAAW,CACTx9B,GAAIA,KAJV,cACQ7G,EADR,yBAOS6kC,QAAO,oBAAC7kC,EAAOuK,YAAR,aAAC,EAAa4rB,mBAAd,WAPhB,gD,oHAUA,WAAetvB,EAAYjD,GAA3B,mBAAAoP,EAAA,sEACuBhV,KAAKkmC,QAAQS,OAA0B,CAC1DC,SAAUhP,GACVyO,UAAW,CACTx9B,GAAIA,EACJjD,OAAQA,KALd,cACQ5D,EADR,yBAQS6kC,QAAO,oBAAC7kC,EAAOuK,YAAR,aAAC,EAAajC,WAAd,WARhB,gD,sHAWA,WAAezB,EAAYjD,GAA3B,mBAAAoP,EAAA,sEACuBhV,KAAKkmC,QAAQS,OAA0B,CAC1DC,SAAU/O,GACVwO,UAAW,CACTx9B,GAAIA,EACJjD,OAAQA,KALd,cACQ5D,EADR,yBAQS6kC,QAAO,oBAAC7kC,EAAOuK,YAAR,aAAC,EAAalC,WAAd,WARhB,gD,4HAWA,WAAqBxB,EAAYjD,GAAjC,mBAAAoP,EAAA,sEACuBhV,KAAKkmC,QAAQS,OAAsC,CACtEC,SAAU9O,GACVuO,UAAW,CACTx9B,GAAIA,EACJjD,OAAQA,KALd,cACQ5D,EADR,yBAQS6kC,QAAO,oBAAC7kC,EAAOuK,YAAR,aAAC,EAAazB,iBAAd,WARhB,gD,4HAWA,WAAqBjC,GAArB,mBAAAmM,EAAA,sEACuBhV,KAAKkmC,QAAQS,OAAsC,CACtEC,SAAU7O,GACVsO,UAAW,CACTx9B,GAAIA,KAJV,cACQ7G,EADR,yBAOS6kC,QAAO,oBAAC7kC,EAAOuK,YAAR,aAAC,EAAavB,iBAAd,WAPhB,gD,8DAWIi7B,GAAU,IAAIQ,GAEPK,GAAmB,WAC9B,OAAOb,IC1Gac,GAAtB,kCAAsBA,GACbC,oBAAsB,WAC3B,OAAOC,MAFWF,GAIbG,sBAAwB,WAC7B,OAAOC,MALWJ,GAQbK,sBAAwB,WAC7B,OAAOlD,MATW6C,GAWbM,qBAAuB,WAC5B,OAAOC,MAZWP,GAcbQ,2BAA6B,WAClC,OAAOC,MAfWT,GAiBbU,2BAA6B,WAClC,OAAOC,MAlBWX,GAoBbY,qBAAuB,SAAC3sB,EAAoCpV,GACjE,OAAQoV,GACN,KAAKlX,YAAU4F,cAAcG,KAC3B,OAAO+9B,KACT,KAAK9jC,YAAU4F,cAAcI,MAC3B,OAAIlE,GAAUA,EAAOmP,GAAG,GACfgyB,GAASK,wBAEXL,GAASM,uBAClB,KAAKvjC,YAAU4F,cAAcK,OAC3B,OAAOg6B,KACT,KAAKjgC,YAAU4F,cAAcM,UAC3B,OAAO69B,KACT,KAAK/jC,YAAU4F,cAAcO,IAC3B,OAAIrE,GAAUA,EAAOmP,GAAG,GACfgyB,GAASC,sBAEXD,GAASG,wBAClB,KAAKpjC,YAAU4F,cAAcQ,YAC3B,OAAItE,GAAUA,EAAOmP,GAAG,GACfgyB,GAASQ,6BAEXR,GAASU,6BAClB,QACE,OAAOK,OA5COf,GA+CbgB,0BAA4B,SAAChsB,EAA2CnW,GAC7E,OAAQmW,GACN,KAAKjY,YAAU2Y,mBAAmBoS,IAChC,OAAOkY,GAASY,qBAAqB7jC,YAAU4F,cAAcK,OAAQnE,GACvE,KAAK9B,YAAU2Y,mBAAmB3S,MAChC,OAAOi9B,GAASY,qBAAqB7jC,YAAU4F,cAAcI,MAAOlE,GACtE,QACE,OAAOmhC,GAASY,qBAAqB7jC,YAAU4F,cAAcC,QAAS/D,K,IC/ClEoiC,G,oBCRCC,GAAb,WACE,aAAe,oBACbC,KAAOC,OAAOnyB,UAAUC,UAF5B,6CAKE,SAAiBA,GACfiyB,KAAOC,OAAOlyB,KANlB,iBASE,WACE,OAAOiyB,SAVX,yBAaE,SAAmB1tB,GACjB,OAAO0tB,KAAOE,KAAK5tB,KAdvB,iCAiBE,SAA2BA,GACzB,OAAO0tB,KAAO1tB,EAAM,OAlBxB,sBAqBE,SAAgBA,GACd,OAAO0tB,KAAOG,IAAI7tB,GAAM8tB,UAtB5B,0BAyBE,SAAoB9tB,GAClB,OAAOxa,KAAKuoC,SAAS/tB,GAAMguB,OAAO,SA1BtC,0BA6BE,SAAoBhuB,GAClB,OAAOxa,KAAKuoC,SAAS/tB,GAAMguB,OAAO,OA9BtC,+BAiCE,SAAyBhuB,GACvB,OAAOxa,KAAKyoC,aAAajuB,GAAQ,IAAMxa,KAAK0oC,aAAaluB,KAlC7D,sCAqCE,SAAgCA,GAC9B,OAAOxa,KAAK0oC,aAAaluB,GAAQ,IAAMxa,KAAKyoC,aAAajuB,KAtC7D,yBAyCE,SAAmBA,GAAkG,IAAvFmuB,EAAsF,uDAA5B,UAChFC,EAAOV,KAAO1tB,GAAM4tB,OAASF,OAASE,OAC5C,OAAOF,KAAOW,SAASD,EAAMD,KA3CjC,uBA8CE,SAAiB1xB,GACf,IACE,QAAIA,GACKixB,KAAOG,MAAMD,QAAUxzB,OAAOqC,GAGvC,MAAOlJ,GACP,OAAO,OArDb,KCUa+6B,GAAoD,SAAC9M,GAChE,OACE,eAAC4I,GAAA,EAAD,CAAMvB,MAAI,EAAS4B,GAAI,GAAIC,GAAI,EAA/B,SACGlJ,EAAM4E,QACL,eAAC,GAAD,CAAO56B,QAAQ,aAAaiD,KAAK,YAEjC,qCACG+yB,EAAMjuB,MACL,eAAC,GAAD,CAAO/H,QAASI,aAAWC,cAAc21B,EAAMjuB,OAAQ9E,KAAK,YAE5D,qCACG+yB,EAAM+M,MAAQ,EACb,+BAEA,eAAC,GAAD,CAAO/iC,QAASg2B,EAAMh2B,QAASiD,KAAK,iBAZjC,M,4DCDN+/B,GAAoC,SAAChN,GAChD,MAA4Be,mBAAS,IAArC,oBAAOn3B,EAAP,KAAeqjC,EAAf,KACMhD,EAAUa,KAEhB5J,qBAAU,WACyD,IAAD,EAIzD,EAJHlB,EAAM/qB,MAAMhI,OAASnF,YAAUwY,eAAe4sB,cAChD,UAAIlN,EAAM/qB,MAAMoyB,KAAK/tB,aAArB,aAAI,EAAwBC,UAAUR,GAAG,KACvCk0B,EAAUjwB,YAAUiB,kBAAkB+hB,EAAM/qB,MAAMoyB,KAAK/tB,MAAMC,aAG/D,UAAIymB,EAAM/qB,MAAMoyB,KAAKh5B,WAArB,aAAI,EAAsBzE,OAAOmP,GAAG,KAClCk0B,EAAUjwB,YAAUiB,kBAAkB+hB,EAAM/qB,MAAMoyB,KAAKh5B,IAAIzE,WAG9D,CAACo2B,EAAM/qB,QAEV,IAAMk4B,EAAc,WAClBnN,EAAMoN,SAAN,2BACKpN,EAAM/qB,OADX,IAEEG,MAAM,MAIJi4B,EAAkB,uCAAG,gCAAAr0B,EAAA,yDACrBs0B,EADqB,4CAC2BnhC,kBAAgBC,UAD3C,aACyD4zB,EAAM/qB,MAAMoyB,KAAKx6B,IAC/F0gC,GAAW,EAFU,SAInBvN,EAAM/qB,MAAMhI,OAASnF,YAAUwY,eAAe4sB,aAJ3B,oBAKhBlN,EAAM/qB,MAAMoyB,KAAK/tB,MALD,sBAMb,IAAIjQ,MAAJ,UAAa8C,kBAAgBC,UAA7B,aAA2C4zB,EAAM/qB,MAAMoyB,KAAKx6B,GAA5D,qBANa,uBAQJo9B,EAAQngB,SAASkW,EAAM/qB,MAAMoyB,KAAKx6B,GAAImzB,EAAM/qB,MAAMoyB,KAAK/tB,MAAMC,UAAU2Q,WARnE,OAQrBqjB,EARqB,OASrBD,EAAWA,EAASE,QAAQ,eAAgB,UATvB,2BAWhBxN,EAAM/qB,MAAMoyB,KAAKh5B,IAXD,uBAYb,IAAIhF,MAAJ,UAAa8C,kBAAgBC,UAA7B,aAA2C4zB,EAAM/qB,MAAMoyB,KAAKx6B,GAA5D,gBAZa,yBAcJo9B,EAAQ9f,eAAe6V,EAAM/qB,MAAMoyB,KAAKx6B,GAAxC,UAA4CmzB,EAAM/qB,MAAMoyB,KAAKh5B,WAA7D,aAA4C,EAAsBzE,OAAOsgB,WAdrE,QAcrBqjB,EAdqB,OAerBD,EAAWA,EAASE,QAAQ,eAAgB,QAfvB,QAiBnBD,GACFlK,GAAaoK,eAAeH,GAC5BH,KAEA9J,GAAaqB,aAAa,SArBL,kDAwBvB6I,GAAW,EACXlK,GAAaqB,aAAb,MAzBuB,mCA2BjB1E,EAAM0N,cAAcH,GA3BH,4FAAH,qDA+BxB,OACE,gBAACI,GAAA,EAAD,CAAQC,QAAST,EAAa/3B,KAAM4qB,EAAM/qB,MAAMG,KAAMurB,SAAS,KAAKkE,WAAS,EAA7E,UACE,eAACgJ,GAAA,EAAD,oCACA,gBAACC,GAAA,EAAD,WACG9N,EAAM/qB,MAAMhI,OAASnF,YAAUwY,eAAe4sB,aAC7C,gBAACrN,GAAA,EAAD,CAAYO,QAAQ,QAAQ0D,MAAM,gBAAgBiK,cAAY,EAA9D,iBACO5hC,kBAAgBC,UADvB,KACoC4zB,EAAM/qB,MAAMoyB,KAAKx6B,MAGrD,qCACE,gBAACgzB,GAAA,EAAD,CAAYO,QAAQ,QAAQ0D,MAAM,gBAAgBiK,cAAY,EAA9D,4BACkB5hC,kBAAgBC,UADlC,KAC+C4zB,EAAM/qB,MAAMoyB,KAAKx6B,QAOpE,eAACmhC,GAAA,EAAD,CAAanJ,WAAS,EAACX,GAAI,CAAE8D,GAAI,GAAK5H,QAAQ,WAA9C,SACE,eAAC6N,GAAA,EAAD,CACEphC,GAAG,SACH5H,MAAO2E,EAEPk7B,UAAQ,SAId,gBAACoJ,GAAA,EAAD,WACE,eAACC,GAAA,EAAD,CAAQpJ,QAASoI,EAAjB,mBACA,eAAC,GAAD,CAAiB/L,KAAK,SAAS0C,MAAM,UAAUW,WAAY4I,EAA3D,4B,8BChFKe,GAAiC,SAACpO,GAC7C,MAA4Be,mBAAiB,IAA7C,oBAAOn3B,EAAP,KAAeqjC,EAAf,KACA,EAAgClM,oBAAkB,GAAlD,oBAAO+D,EAAP,KAAiBuJ,EAAjB,KACMpE,EAAUa,KAEVwD,EAAe,SAAC1kC,GACpBqjC,EAAUrjC,GACVykC,EAAY/+B,aAAWS,mBAAmBnG,IAAW,IAAI9B,YAAUC,iBAAiB6B,GAAQR,IAAI,KAG5FmlC,EAAYvO,EAAMuO,UAExBrN,qBAAU,WACJlB,EAAM/qB,MAAMG,OACdk5B,EAAa,IACbC,EAAU,kBAEX,CAACvO,EAAM/qB,MAAOs5B,IAEjB,IAAMpB,EAAc,WAClBnN,EAAMoN,SAAN,2BACKpN,EAAM/qB,OADX,IAEEG,MAAM,MAQJi4B,EAAkB,uCAAG,8BAAAr0B,EAAA,6DACrBu0B,GAAW,EADU,SAGjBhjC,EAAU,IAAIzC,YAAUC,iBAAiB6B,GAAQqvB,UAAU9sB,kBAAgBQ,mBAH1D,SAINs9B,EAAQzT,SAASwJ,EAAM/qB,MAAMoyB,KAAKx6B,GAAItC,EAAQ2f,WAJxC,QAIvBqjB,EAJuB,SAMrBlK,GAAaoK,eAAe,eAC5BN,MAEA9J,GAAaqB,aAAa,SAC1B6J,KAVqB,gDAavBhB,GAAW,EACXlK,GAAaqB,aAAb,MAduB,mCAgBjB1E,EAAM0N,cAAcH,GAhBH,2FAAH,qDAoBxB,OACE,gBAACI,GAAA,EAAD,CAAQC,QAAST,EAAa/3B,KAAM4qB,EAAM/qB,MAAMG,KAAMurB,SAAS,KAAKkE,WAAS,EAA7E,UACE,eAACgJ,GAAA,EAAD,kBACA,gBAACC,GAAA,EAAD,WACE,gBAACU,GAAA,EAAD,8BACmBriC,kBAAgBC,UADnC,KACgD4zB,EAAM/qB,MAAMoyB,KAAKx6B,MAEjE,gBAACmhC,GAAA,EAAD,CAAanJ,WAAS,EAACX,GAAI,CAAE8D,GAAI,GAAK5H,QAAQ,WAA9C,UACE,eAACqO,GAAA,EAAD,CAAYC,QAAQ,SAApB,oBACA,eAACT,GAAA,EAAD,CACEphC,GAAG,SACH5H,MAAO2E,EACP+kC,SApCW,SAAC/4B,GACpB04B,EAAa14B,EAAMg5B,OAAO3pC,QAoClBgI,KAAK,SACL4hC,WAAS,EACTC,eAAgB,gBAACC,GAAA,EAAD,CAAgB7O,SAAS,QAAzB,cAAmC/zB,kBAAgBO,sBAGtEszB,EAAM1J,IAAIvd,GAAG,IACZ,gBAACy1B,GAAA,EAAD,CAAmBQ,MAAM,QAAzB,eACKhyB,YAAUe,WAAWiiB,EAAM1J,KADhC,IACuCnqB,kBAAgBO,cADvD,sBAKJ,gBAACwhC,GAAA,EAAD,WACE,eAACC,GAAA,EAAD,CAAQpJ,QAASoI,EAAjB,oBACA,eAAC,GAAD,CAAiB/L,KAAK,SAAS0C,MAAM,UAAUW,WAAY4I,EAAoBvI,SAAUA,EAAzF,4BC/EKmK,GAAoC,SAACjP,GAChD,MAAoCe,mBAAS,IAA7C,oBAAOmO,EAAP,KAAmBC,EAAnB,KACMlF,EAAUa,KAEhB5J,qBAAU,WAAO,IAAD,EACdiO,EAAcnP,EAAM/qB,MAAMhI,OAASnF,YAAUwY,eAAe8uB,WAAatjC,aAAWuC,KAAO,UAAA2xB,EAAM/qB,MAAMoyB,KAAK/tB,aAAjB,eAAwBC,UAAUR,GAAG,IAAKjN,aAAW4C,QAAU5C,aAAW2C,QACpK,CAACuxB,EAAM/qB,QAEV,IAAMk4B,EAAc,WAClBnN,EAAMoN,SAAN,2BACKpN,EAAM/qB,OADX,IAEEG,MAAM,MAIJi4B,EAAkB,uCAAG,4BAAAr0B,EAAA,yDACrBu0B,GAAW,EADU,SAGnBvN,EAAM/qB,MAAMhI,OAASnF,YAAUwY,eAAe8uB,WAH3B,gCAIJnF,EAAQlgB,eAAeiW,EAAM/qB,MAAMoyB,KAAKx6B,IAJpC,OAIrB0gC,EAJqB,+CAMJtD,EAAQxgB,iBAAiBuW,EAAM/qB,MAAMoyB,KAAKx6B,IANtC,QAMrB0gC,EANqB,eAQnBA,GACFlK,GAAaoK,eAAb,UAA+ByB,EAA/B,eACA/B,KAEA9J,GAAaqB,aAAa,SAZL,kDAevB6I,GAAW,EACXlK,GAAaqB,aAAb,MAhBuB,mCAkBjB1E,EAAM0N,cAAcH,GAlBH,4FAAH,qDAsBxB,OACE,gBAACI,GAAA,EAAD,CAAQC,QAAST,EAAa/3B,KAAM4qB,EAAM/qB,MAAMG,KAAMurB,SAAS,KAAKkE,WAAS,EAA7E,UACE,eAACgJ,GAAA,EAAD,qBACA,eAACC,GAAA,EAAD,UACE,gBAACU,GAAA,EAAD,yBACcU,EAAW7iB,cADzB,QAC6ClgB,kBAAgBC,UAD7D,KAC0E4zB,EAAM/qB,MAAMoyB,KAAKx6B,QAG7F,gBAACqhC,GAAA,EAAD,WACE,eAACC,GAAA,EAAD,CAAQpJ,QAASoI,EAAjB,mBACA,eAAC,GAAD,CAAiB/L,KAAK,SAAS0C,MAAM,UAAUW,WAAY4I,EAA3D,4BC5CKgC,GAAkC,SAACrP,GAC9C,MAA8Be,mBAAiB,IAA/C,oBAAO73B,EAAP,KAAgBomC,EAAhB,KACA,EAAgCvO,oBAAkB,GAAlD,oBAAO+D,EAAP,KAAiBuJ,EAAjB,KACMpE,EAAUa,KAOVyD,EAAYvO,EAAMuO,UAExBrN,qBAAU,WACJlB,EAAM/qB,MAAMG,OACdk6B,EAAW,IACXf,EAAU,kBAEX,CAACvO,EAAM/qB,MAAOs5B,IAEjB,IAAMpB,EAAc,WAClBnN,EAAMoN,SAAN,2BACKpN,EAAM/qB,OADX,IAEEG,MAAM,MAQJi4B,EAAkB,uCAAG,8BAAAr0B,EAAA,6DACrBu0B,GAAW,EADU,SAGjBhjC,EAAU,IAAIzC,YAAUC,iBAAiB,GAHxB,SAINkiC,EAAQvgB,WAAWsW,EAAM/qB,MAAMoyB,KAAKx6B,GAAItC,EAAQ2f,UAAW5a,aAAWS,mBAAmB7G,QAAW3E,EAAY2E,GAJ1G,QAIvBqkC,EAJuB,SAMrBlK,GAAaoK,eAAb,UAA+B3hC,aAAW2C,KAA1C,aACA0+B,MAEA9J,GAAaqB,aAAa,SAC1B6J,KAVqB,gDAavBhB,GAAW,EACXlK,GAAaqB,aAAb,MAduB,mCAgBjB1E,EAAM0N,cAAcH,GAhBH,2FAAH,qDAoBxB,OACE,gBAACI,GAAA,EAAD,CAAQC,QAAST,EAAa/3B,KAAM4qB,EAAM/qB,MAAMG,KAAMurB,SAAS,KAAKkE,WAAS,EAA7E,UACE,eAACgJ,GAAA,EAAD,4BACA,gBAACC,GAAA,EAAD,WACE,gBAACU,GAAA,EAAD,uBACYriC,kBAAgBC,UAD5B,KACyC4zB,EAAM/qB,MAAMoyB,KAAKx6B,GAD1D,gBAGA,gBAACmhC,GAAA,EAAD,CAAanJ,WAAS,EAACzE,QAAQ,WAA/B,UACE,eAACqO,GAAA,EAAD,CAAYC,QAAQ,UAApB,qBACA,eAACT,GAAA,EAAD,CACEphC,GAAG,UACH5H,MAAOiE,EACPylC,SApCkB,SAAC/4B,IArBP,SAAC1M,GACrBomC,EAAWpmC,GACXmlC,EAAY/+B,aAAWS,mBAAmB7G,IAoB1CqmC,CAAc35B,EAAMg5B,OAAO3pC,QAoCnBuqC,YAAY,8CACZviC,KAAK,YAGR+yB,EAAM1J,IAAIvd,GAAG,GACZ,gBAACy1B,GAAA,EAAD,CAAmBQ,MAAM,QAAzB,eACKhyB,YAAUe,WAAWiiB,EAAM1J,KADhC,IACuCnqB,kBAAgBO,cADvD,mBAIA,eAACu3B,GAAA,EAAD,CAAKwL,UAAW,OAGpB,gBAACvB,GAAA,EAAD,WACE,eAACC,GAAA,EAAD,CAAQpJ,QAASoI,EAAjB,oBACA,eAAC,GAAD,CAAiB/L,KAAK,SAAS0C,MAAM,UAAUW,WAAY4I,EAAoBvI,SAAUA,EAAzF,4BC7EK4K,GAAmC,SAAC1P,GAC/C,MAA4Be,mBAAiB,IAA7C,oBAAOn3B,EAAP,KAAeqjC,EAAf,KACA,EAA8BlM,mBAAiB,IAA/C,oBAAO73B,EAAP,KAAgBomC,EAAhB,KACA,EAAgCvO,oBAAkB,GAAlD,oBAAO+D,EAAP,KAAiBuJ,EAAjB,KACMpE,EAAUa,KAEVwD,EAAe,SAAC1kC,GACpBqjC,EAAUrjC,GACVykC,EAAY/+B,aAAWS,mBAAmBnG,IAAW,IAAI9B,YAAUC,iBAAiB6B,GAAQ+lC,GAAG,KAG3FpB,EAAYvO,EAAMuO,UAExBrN,qBAAU,WACJlB,EAAM/qB,MAAMG,OACdk5B,EAAa,IACbgB,EAAW,IACXf,EAAU,kBAEX,CAACvO,EAAM/qB,MAAOs5B,IAEjB,IAAMpB,EAAc,WAClBnN,EAAMoN,SAAN,2BACKpN,EAAM/qB,OADX,IAEEG,MAAM,MAYJi4B,EAAkB,uCAAG,8BAAAr0B,EAAA,6DACrBu0B,GAAW,EADU,SAGjBhjC,EAAU,IAAIzC,YAAUC,iBAAiB6B,GAAQqvB,UAAU9sB,kBAAgBQ,mBAH1D,SAINs9B,EAAQvgB,WAAWsW,EAAM/qB,MAAMoyB,KAAKx6B,GAAItC,EAAQ2f,UAAW5a,aAAWS,mBAAmB7G,QAAW3E,EAAY2E,GAJ1G,QAIvBqkC,EAJuB,SAMrBlK,GAAaoK,eAAe,mBAC5BN,MAEA9J,GAAaqB,aAAa,SAC1B6J,KAVqB,gDAavBhB,GAAW,EACXlK,GAAaqB,aAAb,MAduB,mCAgBjB1E,EAAM0N,cAAcH,GAhBH,2FAAH,qDAoBxB,OACE,gBAACI,GAAA,EAAD,CAAQC,QAAST,EAAa/3B,KAAM4qB,EAAM/qB,MAAMG,KAAMurB,SAAS,KAAKkE,WAAS,EAA7E,UACE,eAACgJ,GAAA,EAAD,mBACA,gBAACC,GAAA,EAAD,WACE,gBAACU,GAAA,EAAD,mBACQriC,kBAAgBC,UADxB,KACqC4zB,EAAM/qB,MAAMoyB,KAAKx6B,GADtD,eAGA,gBAACmhC,GAAA,EAAD,CAAanJ,WAAS,EAACX,GAAI,CAAE8D,GAAI,GAAK5H,QAAQ,WAA9C,UACE,eAACqO,GAAA,EAAD,CAAYC,QAAQ,SAApB,oBACA,eAACT,GAAA,EAAD,CACEphC,GAAG,SACH5H,MAAO2E,EACP+kC,SAxCiB,SAAC/4B,GAC1B04B,EAAa14B,EAAMg5B,OAAO3pC,QAwClBgI,KAAK,SACL4hC,WAAS,EACTC,eAAgB,gBAACC,GAAA,EAAD,CAAgB7O,SAAS,QAAzB,cAAmC/zB,kBAAgBO,sBAGtEszB,EAAM1J,IAAIvd,GAAG,GACZ,gBAACy1B,GAAA,EAAD,CAAmBQ,MAAM,QAAzB,eACKhyB,YAAUe,WAAWiiB,EAAM1J,KADhC,IACuCnqB,kBAAgBO,cADvD,mBAIA,eAACu3B,GAAA,EAAD,CAAKwL,UAAW,IAElB,gBAACzB,GAAA,EAAD,CAAanJ,WAAS,EAACzE,QAAQ,WAA/B,UACE,eAACqO,GAAA,EAAD,CAAYC,QAAQ,UAApB,gCACA,eAACT,GAAA,EAAD,CACEphC,GAAG,UACH5H,MAAOiE,EACPylC,SAtDkB,SAAC/4B,GAC3B05B,EAAW15B,EAAMg5B,OAAO3pC,QAsDhBuqC,YAAY,4CACZviC,KAAK,eAIX,gBAACihC,GAAA,EAAD,WACE,eAACC,GAAA,EAAD,CAAQpJ,QAASoI,EAAjB,oBACA,eAAC,GAAD,CAAiB/L,KAAK,SAAS0C,MAAM,UAAUW,WAAY4I,EAAoBvI,SAAUA,EAAzF,4BCpGFn9B,GAASC,sBAQFgoC,GAA8B,SAAC5P,GAC1C,IAAMoC,EAAUd,IAAMe,QAAO,GAC7B,EAAsBtB,mBAAqC7iB,gBAAcG,kBAAzE,oBAAOiY,EAAP,KAAYuZ,EAAZ,KACM5F,EAAUa,KACVz0B,EAAU/B,uBAEhBgtB,IAAMJ,WAAU,WAEd,OADAkB,EAAQ3wB,SAAU,EACX,WACL2wB,EAAQ3wB,SAAU,KAEnB,IAEH,IAAM88B,EAAY3L,sBAAW,sBAAC,4CAAA5pB,EAAA,yDAAOoxB,EAAP,+BAAmC,gBAC3DhI,EAAQ3wB,QADgB,wBAE1Bo+B,EAAO3xB,gBAAcG,kBAFK,kBAIH4rB,EAAQziB,mBAAmB4iB,GAJxB,OAIlBpkC,EAJkB,OAKpBo8B,EAAQ3wB,UACJ1G,EAAO/E,EAAOuK,KAAKutB,aACb/yB,EAAKgd,YAAYhP,GAAG,IAC9B82B,EAAO9kC,EAAKgd,aARQ,kDAYxBpgB,GAAOoK,MAAP,KAAApK,GAZwB,0DAe3B,CAACsiC,IAeJ,OAbA/I,qBAAU,WACR,IAAM4O,EAAc,SAAChqC,GACnB6B,GAAOoD,KAAP,qBAA0BjF,EAAEkZ,UAA5B,oBAAiDlZ,EAAEb,MAAMilB,UAAzD,uBAAiFpkB,EAAEmV,UAAUiP,WAA7FviB,GACA4mC,KAIF,OAFA5mC,GAAOoD,KAAK,aAAcjD,YAAUgN,YAAYe,cAAhDlO,GACA0O,EAAQzL,GAAG9C,YAAUgN,YAAYe,cAAei6B,GACzC,WACLnoC,GAAOoD,KAAK,cAAejD,YAAUgN,YAAYe,cAAjDlO,GACA0O,EAAQ05B,IAAIjoC,YAAUgN,YAAYe,cAAei6B,MAElD,CAACz5B,EAASk4B,IAELvO,EAAM/qB,MAAMhI,MAClB,KAAKnF,YAAUwY,eAAe9S,IAC5B,OAAO,eAAC,GAAD,CAAeyH,MAAO+qB,EAAM/qB,MAAOqhB,IAAKA,EAAKiY,UAAWA,EAAWnB,SAAUpN,EAAMoN,SAAUM,cAAe,SAACsC,GAAD,OAAahQ,EAAM0N,cAAcsC,MACtJ,KAAKloC,YAAUwY,eAAe7S,MAC5B,OAAO,eAAC,GAAD,CAAiBwH,MAAO+qB,EAAM/qB,MAAOqhB,IAAKA,EAAKiY,UAAWA,EAAWnB,SAAUpN,EAAMoN,SAAUM,cAAe,SAACsC,GAAD,OAAahQ,EAAM0N,cAAcsC,MACxJ,KAAKloC,YAAUwY,eAAe2vB,KAC5B,OAAO,eAAC,GAAD,CAAgBh7B,MAAO+qB,EAAM/qB,MAAOqhB,IAAKA,EAAKiY,UAAWA,EAAWnB,SAAUpN,EAAMoN,SAAUM,cAAe,SAACsC,GAAD,OAAahQ,EAAM0N,cAAcsC,MACvJ,KAAKloC,YAAUwY,eAAe8uB,WAC9B,KAAKtnC,YAAUwY,eAAe4vB,aAC5B,OAAO,eAAC,GAAD,CAAkBj7B,MAAO+qB,EAAM/qB,MAAOm4B,SAAUpN,EAAMoN,SAAUM,cAAe,SAACsC,GAAD,OAAahQ,EAAM0N,cAAcsC,MACzH,KAAKloC,YAAUwY,eAAe6vB,WAC9B,KAAKroC,YAAUwY,eAAe4sB,aAC5B,OAAO,eAAC,GAAD,CAAkBj4B,MAAO+qB,EAAM/qB,MAAOm4B,SAAUpN,EAAMoN,SAAUM,cAAe,SAACsC,GAAD,OAAahQ,EAAM0N,cAAcsC,MACzH,QACE,OAAO,iCCvDProC,GAASC,sBASTwoC,GAAe1Q,YAAO2Q,KAAP3Q,EAAe,cAAGC,MAAH,2CACTvI,EAAgBM,YADP,8JAS9B4Y,GAAkB5Q,YAAO6Q,KAAP7Q,EAAkB,cAAGC,MAAH,6DAIpC6Q,GAA8C,SAACxQ,GAA+B,IAAD,MAkBxD/kB,EAIEkC,EArB3B,EAA4B4jB,oBAAS,GAArC,oBAAO0P,EAAP,KAAeC,EAAf,KACA,EAA8B3P,oBAAS,GAAvC,oBAAO4P,EAAP,KAAgBC,EAAhB,KAEMrV,EAAUwG,KAEVhd,EAAQ8rB,aAAoCjU,GAAgB,CAChEyN,UAAW,CACTx9B,GAAImzB,EAAMqH,KAAKpoB,OAAOrR,YAExB08B,YAAa,eACbwG,YAAa,SAACvgC,GAAU,IAAD,IACrBmgC,EAAUphC,aAAWS,mBAAmBwrB,EAAQjZ,UAChDsuB,GAAW,UAAArgC,EAAK2hB,KAAK9S,aAAV,eAAiBiN,kBAAjB,UAAmCkP,EAAQjZ,eAA3C,aAAmC,EAAiB+J,mBAG7D0kB,EAAa,IAAI9E,GA6BjB+E,EAAgB,uCAAG,4BAAAh4B,EAAA,qEACnB+L,EAAMxU,YADa,aACnB,EAAY2hB,MADO,gCAEf8N,EAAMgR,iBAAiBhR,EAAMqH,MAFd,2CAAH,qDAMhB4J,EAAmB,SAACltB,GAAqC,IAAD,GAC5D,UAAIgB,EAAMxU,YAAV,aAAI,EAAY2hB,OACd8N,EAAMiR,iBAAiBltB,EAAOgB,EAAMxU,KAAK2hB,KAAM8N,EAAMqH,OAIzD,OACE,gBAAC6J,GAAA,EAAD,CAAUhN,GAAI,CAAE,mCAAoC,CAAE4C,OAAQ,IAA9D,UACE,gBAACyJ,GAAA,EAAD,CAAWpJ,UAAU,KAAKgK,MAAM,MAAhC,UACE,eAAC,KAAD,CAAiB/L,KAAM2F,GAASgB,0BAA0B/L,EAAMqH,KAAKtnB,YAAaigB,EAAMqH,KAAKz9B,UAD/F,IAC2G,6BA9B1F,WACnB,OAAQo2B,EAAMqH,KAAKtnB,aACjB,KAAKjY,YAAU2Y,mBAAmB3S,MAChC,OAAKkyB,EAAMqH,KAAKz9B,QAAUo2B,EAAMqH,KAAKz9B,OAAOR,IAAI,GACvC0C,aAAW2C,KAEb3C,aAAWsC,KACpB,KAAKtG,YAAU2Y,mBAAmBoS,IAChC,OAAO/mB,aAAWuC,IAItB,OAAOvC,aAAWqC,QAkB+FijC,QAE/G,eAACb,GAAA,EAAD,UACE,gBAACc,GAAA,EAAD,CAAMC,UAAU,QAAQnK,UAAWC,KAAY1zB,GAAE,gBAAWssB,EAAMqH,KAAKpoB,QAAU8qB,QAAQ,OAAOf,WAAW,SAA3G,UACE,eAACoH,GAAD,CAAchQ,QAAQ,UAAU9E,IAAK1a,UAAQC,WAAR,UAAmBkE,EAAMxU,YAAzB,aAAmB,EAAY2hB,KAAKpR,MAApC,UAA2CiE,EAAMxU,YAAjD,aAA2C,EAAY2hB,KAAKnR,OAEhG5U,kBAAgBC,UAHnB,KAGgC4zB,EAAMqH,KAAKpoB,YAG7C,eAACsxB,GAAA,EAAD,WACG,UAAAvQ,EAAMqH,KAAKz9B,cAAX,eAAmBmP,GAAG,IACrB,qCACE,eAAC,GAAD,CAA0ByuB,OAlDTrqB,EAkDkC6iB,EAAMqH,KAAKz9B,OAjD/DoT,YAAUiB,kBAAkBd,IAiD3B,SACE,gCA/CO,SAACA,GAClB,OAAOH,YAAUe,WAAWZ,GA8CXY,CAAWiiB,EAAMqH,KAAKz9B,cAIjC,iCAIJ,eAAC2mC,GAAA,EAAD,WA/DqBt1B,EAgEF+kB,EAAMqH,KAAKpsB,UAAUiP,UA/DnC6mB,EAAWQ,yBAAyBR,EAAWS,YAAYv2B,OAiEhE,gBAACs1B,GAAA,EAAD,CAAWvB,MAAM,QAAjB,UACGhP,EAAMqH,KAAKtnB,cAAgBjY,YAAU2Y,mBAAmB3S,OACvD,qCACG6iC,GAAWF,EACV,eAACtC,GAAA,EAAD,CAAQ/M,KAAK,QAAQhB,QAAQ,WAAW8D,GAAI,CAAE8F,SAAU,QAAUjF,QAAS,WAAQkM,EAAiBnpC,YAAUwY,eAAe4vB,eAAiBpL,UAAW9E,EAAMyR,aAA/J,SAA8K3lC,aAAWiD,SAEzL,sCACIixB,EAAMqH,KAAKz9B,QAAUo2B,EAAMqH,KAAKz9B,OAAOR,IAAI,GAC3C,eAAC,GAAD,CAAiBg4B,KAAK,QAAQhB,QAAQ,WAAW0D,MAAM,YAAYI,GAAI,CAAE8F,SAAU,QAAUvF,WAAYuM,EAAkBlM,UAAW9E,EAAMyR,aAA5I,SAA2J3lC,aAAW8C,QAEtK,eAACu/B,GAAA,EAAD,CAAQ/M,KAAK,QAAQhB,QAAQ,WAAW8D,GAAI,CAAE8F,SAAU,QAAUjF,QAAS,WAAQkM,EAAiBnpC,YAAUwY,eAAe4sB,eAAiBpI,UAAW9E,EAAMyR,aAA/J,SAA8K3lC,aAAWwC,UAOlM0xB,EAAMqH,KAAKtnB,cAAgBjY,YAAU2Y,mBAAmBoS,KACvD,qCACG8d,GAAWF,EACV,eAACtC,GAAA,EAAD,CAAQ/M,KAAK,QAAQhB,QAAQ,WAAW8D,GAAI,CAAE8F,SAAU,QAAUlG,MAAM,YAAYiB,QAAS,WAAQkM,EAAiBnpC,YAAUwY,eAAe6vB,aAAerL,UAAW9E,EAAMyR,aAA/K,SAA8L3lC,aAAW+C,SAEzM,eAACs/B,GAAA,EAAD,CAAQ/M,KAAK,QAAQhB,QAAQ,WAAW8D,GAAI,CAAE8F,SAAU,QAAUjF,QAAS,WAAQkM,EAAiBnpC,YAAUwY,eAAe8uB,aAAetK,UAAW9E,EAAMyR,aAA7J,SAA4K3lC,aAAWiD,kBAqBxL2iC,GAAsC,SAAC1R,GAAkB,IAAD,IACnE,EAA4Ce,mBAAmC,IAA/E,oBAAO4Q,EAAP,KAAuBC,EAAvB,KACA,EAAsC7Q,mBAAoC,CACxE9zB,KAAMnF,YAAUwY,eAAeuxB,QAC/Bz8B,MAAM,EACNiyB,KAAM,KAHR,oBAAOyK,EAAP,KAAoBC,EAApB,KAMM9H,EAAUa,KACVkH,EAAe,qBAEfhB,EAAgB,uCAAG,WAAOiB,GAAP,SAAAj5B,EAAA,kEAEjBi5B,EAAMlyB,cAAgBjY,YAAU2Y,mBAAmB3S,MAFlC,sBAGb,IAAIzE,MAAJ,UAAa8C,kBAAgBC,UAA7B,aAA2C6lC,EAAMhzB,OAAjD,uBAHa,uBAKCgrB,EAAQngB,SAASmoB,EAAMhzB,OAAOrR,WAAYqkC,EAAMroC,OAAOsgB,WALxD,eAOnBmZ,GAAaoK,eAAb,uCAA4DthC,kBAAgBC,UAA5E,aAA0F6lC,EAAMhzB,SAP7E,gDAUrBokB,GAAaqB,aAAb,MAVqB,yBAYrB1E,EAAMkS,aAAaD,GAZE,4EAAH,sDAgBhBhB,EAAmB,SAACltB,EAAiCkuB,EAAuBtf,GAChFif,EAAkBjf,GAClBof,EAAe,2BACVD,GADS,IAEZ7kC,KAAM8W,EACN3O,MAAM,EACNiyB,KAAM4K,MAIJE,EAAmB,uCAAG,WAAO5E,GAAP,SAAAv0B,EAAA,sDAC1BrR,GAAOoD,KAAK,sBAAuBwiC,EAAnC5lC,GACI4lC,GACFvN,EAAMkS,aAAaP,GAHK,2CAAH,sDAOzB,OACE,uCACE,eAAC3N,GAAA,EAAD,CACEn3B,GAAG,aACH44B,MAAO,CACLt7B,OAAM,UAAE61B,EAAM71B,cAAR,QAAkB,IACxBm+B,SAAU,OACVvE,gBAAiB,4BALrB,SAQG/D,EAAMoS,UAAU7qC,OAAS,GAAKy4B,EAAMxK,OAAOjuB,OAAS,EACnD,eAAC,KAAD,CACE+hC,WAAU,UAAEtJ,EAAMxK,OAAOjuB,cAAf,QAAyB,EACnC1B,KAAMm6B,EAAMuJ,mBACZC,QAASxJ,EAAMwJ,QACfC,OACE,eAACb,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAGC,eAAe,SAASC,WAAW,SAA/D,SACE,eAAC,GAAD,CAAkBpE,QAAS5E,EAAM4E,QAAS7yB,MAAOiuB,EAAMjuB,MAAOg7B,MAAO/M,EAAMxK,OAAOjuB,OAAQyC,QAASgoC,MAGvGrI,iBAAiB,aATnB,SAWE,eAAC0I,GAAA,EAAD,UACE,gBAACC,GAAA,EAAD,CAAOC,cAAY,EAAnB,UACE,eAACC,GAAA,EAAD,UACE,gBAACtB,GAAA,EAAD,WACE,eAACZ,GAAD,IACA,eAACA,GAAD,UAAiB,wCACjB,eAACA,GAAD,UAAiB,0CACjB,eAACA,GAAD,UAAiB,wCACjB,eAACA,GAAD,CAAiBtB,MAAM,QAAvB,SAA+B,+CAGnC,gBAACyD,GAAA,EAAD,WACGzS,EAAMoS,UAAUjqC,KAAI,SAACrC,GAAD,OACnB,eAAC,GAAD,CAEE2rC,aAAczR,EAAMyR,aACpBT,iBAAkBA,EAClBC,iBAAkBA,EAClB5J,KAAMvhC,GALR,qBACqBA,EAAEmV,UAAUiP,eAMlC8V,EAAMxK,OAAOrtB,KAAI,SAACrC,GAAD,OAChB,eAAC,GAAD,CAEE2rC,aAAczR,EAAMyR,aACpBT,iBAAkBA,EAClBC,iBAAkBA,EAClB5J,KAAMvhC,GALR,iBACiBA,EAAEmV,UAAUiP,yBAUvC,eAAC0e,GAAA,EAAD,CAAM1E,GAAI,CAAE/5B,OAAQ,QAAU0+B,WAAS,EAACC,QAAS,EAAGC,eAAe,SAASC,WAAW,SAAvF,SACE,eAAC,GAAD,CAAkBpE,QAAS5E,EAAM4E,QAAS7yB,MAAOiuB,EAAMjuB,MAAOg7B,MAAO/M,EAAMxK,OAAOjuB,OAAQyC,QAASgoC,QAIzG,eAAC,GAAD,CAAY/8B,MAAO68B,EAAa1E,SAAU2E,EAAgBrE,cAAeyE,QCrQzExqC,GAASC,sBAOF8qC,GAAmC,SAAC1S,GAC/C,IACA,EAAwCe,oBAAS,GAAjD,oBAAO0Q,EAAP,KAAqBkB,EAArB,KACA,EAAkC5R,oBAAS,GAA3C,oBAAO0H,EAAP,KAAkBmK,EAAlB,KACA,EAA8B7R,oBAAS,GAAvC,oBAAOyI,EAAP,KAAgBqJ,EAAhB,KACA,EAA0B9R,wBAAcx8B,GAAxC,oBAAOwN,EAAP,KAAc0vB,EAAd,KACA,EAA4BV,wBAAkCx8B,GAA9D,oBAAO8vB,EAAP,KAAeye,EAAf,KACA,EAA4B/R,mBAAqC,IAAjE,oBAAOvL,EAAP,KAAeud,EAAf,KACA,EAAkChS,mBAAqC,IAAvE,oBAAOqR,EAAP,KAAkBY,EAAlB,KACM/I,EAAUO,KACVn0B,EAAU/B,uBAEVinB,EAAUwG,KAEVhd,EAAQ8rB,aAA0D1S,GAA4B,CAClGkM,UAAW,CACTnhC,QAAS82B,EAAM92B,QACfgc,MAhBU,GAmBZolB,YAAa,eAEbwG,YAAa,SAACvgC,GAAU,IAAD,EACrBuiC,EAAUviC,EAAK8tB,gBAAgBhK,QAC/B0e,EAAUxiC,EAAK8tB,gBAAgBzL,SAASzqB,KAAI,SAAArC,GAAC,OAAIoY,gBAAc2B,iBAAiB/Z,OAChF+sC,GAAYvjC,aAAWS,mBAAX,UAA8BQ,EAAK8tB,gBAAgBhK,cAAnD,aAA8B,EAA6BxuB,UAI3Eq7B,qBAAU,WAAO,IAAD,IACdyR,GAAgB,UAAA3S,EAAM92B,eAAN,eAAemjB,kBAAf,UAAiCkP,EAAQjZ,eAAzC,aAAiC,EAAiB+J,kBACjE,CAAC2T,EAAM92B,QAASqyB,EAAQjZ,UAE3B4e,qBAAU,WACR0R,EAAa7tB,EAAM6f,WAClB,CAAC7f,EAAM6f,UAEV1D,qBAAU,WACRO,EAAS1c,EAAMhT,SACd,CAACgT,EAAMhT,QAEV,IAAMw3B,EAAkB,uCAAG,8BAAAvwB,EAAA,6DACzBrR,GAAOoD,KAAK,qBAAsByqB,EAAOjuB,OAAzCI,GACAirC,GAAa,GAFY,kBAIF3I,EAAQM,mBAAmBvK,EAAM92B,QA5C5C,EA4CW,OAAiDmrB,QAAjD,IAAiDA,OAAjD,EAAiDA,EAAQxuB,MAJvD,OAIjBG,EAJiB,OAKvB8sC,EAAU9sC,EAAOuK,KAAK8tB,gBAAgBhK,QACtCwe,GAAYvjC,aAAWS,mBAAX,UAA8B/J,EAAOuK,KAAK8tB,gBAAgBhK,cAA1D,aAA8B,EAAoCxuB,OAC1EG,EAAOuK,KAAK8tB,gBAAgBzL,SAASrrB,OAAS,GAChDwrC,EAAU,GAAD,oBACJvd,GADI,aAEJxvB,EAAOuK,KAAK8tB,gBAAgBzL,SAASzqB,KAAI,SAAArC,GAAC,OAAIoY,gBAAc2B,iBAAiB/Z,SAV7D,kDAcvB27B,EAAS,EAAD,IAde,QAgBzBmR,GAAa,GAhBY,0DAAH,qDAmBlBV,EAAY,uCAAG,WAAOD,GAAP,SAAAj5B,EAAA,6DACfi5B,IACFc,EAAUvd,EAAO1c,QAAO,SAAAhT,GAAC,OAAKA,EAAEmV,UAAUmZ,GAAG6d,EAAMh3B,eACnD+3B,EAAaZ,EAAUt5B,QAAO,SAAAhT,GAAC,OAAKA,EAAEmV,UAAUmZ,GAAG6d,EAAMh3B,gBAHxC,SAMbgvB,EAAQM,mBAAmBvK,EAAM92B,QAjE3B,GA2DO,uBAOb82B,EAAMiT,mBAPO,2CAAH,sDAUZC,EAAUnuB,EAAMmuB,QAEhBC,EAAUvQ,uBAAY,WAC1Bj7B,GAAOoD,KAAK,8BAAZpD,GACAurC,MACC,CAACA,IAEEE,EAAY,uCAAG,sBAAAp6B,EAAA,6DACnBrR,GAAOoD,KAAK,qCAAZpD,GADmB,SAEburC,IAFa,uBAGblT,EAAMiT,mBAHO,2CAAH,qDAMlB/R,qBAAU,WACR,IAAM4O,EAAc,SAAC76B,GACfA,IAAUnN,YAAUkY,cAAc4jB,QACpCuP,KAIJ,OADA98B,EAAQzL,GAAG9C,YAAUgN,YAAYI,0BAA2B46B,GACrD,WACLz5B,EAAQ05B,IAAIjoC,YAAUgN,YAAYI,0BAA2B46B,MAE9D,CAACz5B,EAAS88B,IAEb,IAAME,EAAczQ,uBAAY,SAAC98B,GAE/BktC,EAAa,aAERZ,MAEJ,CAACA,IAeJ,OAbAlR,qBAAU,WACR,IAAM4O,EAAc,SAAChqC,GACnB6B,GAAOoD,KAAK,iBAAkBjF,EAA9B6B,GACA0rC,EAAYvtC,IAId,OAFA6B,GAAOoD,KAAK,aAAcjD,YAAUgN,YAAYiB,YAAhDpO,GACA0O,EAAQzL,GAAG9C,YAAUgN,YAAYiB,YAAa+5B,GACvC,WACLnoC,GAAOoD,KAAK,cAAejD,YAAUgN,YAAYiB,YAAjDpO,GACA0O,EAAQ05B,IAAIjoC,YAAUgN,YAAYiB,YAAa+5B,MAEhD,CAACz5B,EAASg9B,IAGX,uCACE,eAACC,GAAA,EAAD,CAAOC,UAAU,MAAMxK,eAAe,WAAWC,WAAW,SAASF,QAAS,EAA9E,SACE,eAAC0K,GAAA,EAAD,CAAYpS,KAAK,QAAQ,aAAW,UAAU+F,UAAU,OAAOpC,QAASqO,EAAxE,SACE,eAAC,KAAD,CAAU5M,SAAS,cAGvB,eAAC,GAAD,CACEhR,OAAQA,EACR4c,UAAWA,EACXrgC,MAAOA,EACP6yB,QAAS6D,EACTe,QAASA,EACTr/B,OAAQ,IACRo/B,mBAAoBA,EACpB2I,aAAcA,EACdT,aAAcA,QC7ITgC,GAA2B,SAACzT,GAAgB,IAAD,IAC9C92B,EAAYwqC,eAAZxqC,QAER,EAAkC63B,oBAAS,GAA3C,oBAAO0H,EAAP,KAAkBmK,EAAlB,KACA,EAA8B7R,oBAAS,GAAvC,oBAAOyI,EAAP,KAAgBqJ,EAAhB,KACA,EAA0B9R,wBAAcx8B,GAAxC,oBAAOwN,EAAP,KAAc0vB,EAAd,KAEM1c,EAAQ8rB,aAAwD9T,GAA4B,CAChGsN,UAAW,CACTnhC,QAAO,OAAEA,QAAF,IAAEA,IAAW,GACpBi0B,OAAQ,EACRjY,MATU,GAWZolB,YAAa,eACbwG,YAAa,SAACvgC,GACZsiC,EAAWtiC,EAAK+sB,eAAe/1B,QAbrB,MAiBd25B,qBAAU,WACR0R,EAAa7tB,EAAM6f,WAClB,CAAC7f,EAAM6f,UAEV1D,qBAAU,WACRO,EAAS1c,EAAMhT,SACd,CAACgT,EAAMhT,QAEV,IAAMw3B,EAAkB,uCAAG,kCAAAvwB,EAAA,6DACnB26B,EADmB,oBACH5uB,EAAMxU,YADH,aACH,EAAY+sB,eAAe/1B,cADxB,QACkC,EAC3DqrC,GAAa,GAFY,kBAIF7tB,EAAM6uB,UAAU,CACnCvJ,UAAW,CACTlN,OAAQwW,EACRzuB,MAhCM,KAyBa,OAIjBlf,EAJiB,OAUvB6sC,EAAW7sC,EAAOuK,KAAK+sB,eAAe/1B,QAnC5B,GAyBa,gDAYvBk6B,EAAS,EAAD,IAZe,QAczBmR,GAAa,GAdY,yDAAH,qDAiBlBK,EAAgB,uCAAG,sBAAAj6B,EAAA,sEACjB+L,EAAMmuB,QAAQ,CAClBhqC,QAAO,OAAEA,QAAF,IAAEA,IAAW,GACpBi0B,OAAQ,EACRjY,MA9CU,IA0CW,2CAAH,qDAQtB,OACE,uCACE,eAACwb,GAAA,EAAD,CAAWC,SAAS,KAAKuD,GAAI,CAAE0F,aAAc,GAA7C,SACE,gBAAChB,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAGC,eAAe,SAASC,WAAW,SAA/D,UACE,gBAACJ,GAAA,EAAD,CAAMvB,MAAI,EAAC4B,GAAI,GAAIC,GAAI,EAAvB,UACE,eAACrJ,GAAA,EAAD,CAAYO,QAAQ,KAAK+G,UAAU,MAAM/C,UAAU,SAASF,GAAI,CAAEkF,GAAI,GAAtE,qBAGA,eAACvJ,GAAA,EAAD,CAAYO,QAAQ,YAAY+G,UAAU,MAAM/C,UAAU,SAASF,GAAI,CAAE2P,UAAW,aAAe9F,cAAY,EAA/G,SACG7kC,OAGL,eAAC0/B,GAAA,EAAD,CAAMvB,MAAI,EAAC4B,GAAI,GAAIC,GAAI,EAAvB,SACE,eAAC,GAAD,CAAiBhgC,QAAO,OAAEA,QAAF,IAAEA,IAAW,GAAI+pC,iBAAkBA,WAIjE,eAAC,GAAD,CACEthB,MAAK,oBAAE5M,EAAMxU,YAAR,aAAE,EAAY+sB,sBAAd,QAAgC,GACrCiM,mBAAoBA,EACpBx3B,MAAOA,EACP02B,UAAWA,EACXe,QAASA,Q,UC7EJsK,GAAO,WAClB,IAAM5gB,EAAgBwF,KAChBqb,EAAaxpB,0BAEbwa,EAAUnC,uBAAY,WAC1BoR,aAAS,CACPC,cAAe,IACfC,OAAQ,KAEV,IAAM3yB,EAAS2R,EAAcpR,aAC7B,OAAIP,QAAJ,IAAIA,OAAJ,EAAIA,EAAQkB,SACVsxB,EAAW1jB,wBAAwB9O,EAAOkB,UAE3C,CAACsxB,EAAY7gB,IAChB,OACE,+CACQgE,SADR,IACwCA,uBACtC,eAACiX,GAAA,EAAD,CAAQpJ,QAASA,EAAjB,sBCXAoP,G,WAGJ,aAAe,IAAD,gCAFGjK,aAEH,OAIdkK,QAAU,SAAC9e,GAA6D,IAAhD8U,EAA+C,uDAAnB,eAClD,OAAO,EAAKF,QAAQnlB,MAAiC,CACnDA,MAAO6X,GACPyN,UAAW,CACTx9B,GAAIyoB,GAENgV,YAAaF,KAVH,KAcdiK,cAAgB,SAAC/e,GAA6D,IAAhD8U,EAA+C,uDAAnB,eACxD,OAAO,EAAKF,QAAQnlB,MAA2C,CAC7DA,MAAO4X,GACP0N,UAAW,CACTx9B,GAAIyoB,GAENgV,YAAaF,KApBH,KAwBd7gB,YAAc,SAAC+L,GAA6D,IAAhD8U,EAA+C,uDAAnB,eACtD,OAAO,EAAKF,QAAQnlB,MAA2C,CAC7DA,MAAO2Y,GACP2M,UAAW,CACTx9B,GAAIyoB,GAENgV,YAAaF,KA9BH,KAkCdhhB,cAAgB,SAACkM,GAA6D,IAAhD8U,EAA+C,uDAAnB,eACxD,OAAO,EAAKF,QAAQnlB,MAA+C,CACjEA,MAAO4Y,GACP0M,UAAW,CACTx9B,GAAIyoB,GAENgV,YAAaF,KAxCH,KA4CdM,eAAiB,SAACpV,EAAa/B,EAAiBD,EAAgBiC,GAAyE,IAAhD6U,EAA+C,uDAAnB,eACnH,OAAO,EAAKF,QAAQnlB,MAA6C,CAC/DA,MAAO2X,GACP2N,UAAW,CACTx9B,GAAIyoB,EACJ6H,OAAQ5J,EACRrO,MAAOoO,EACPnpB,OAAQorB,GAEV+U,YAAaF,KArDH,KAyDdkK,iBAzDc,uCAyDK,WAAOC,GAAP,yCAAAv7B,EAAA,6DAA8BoxB,EAA9B,+BAA0D,eACrEoK,EAAsB,CAC1B71B,WAAY7W,YAAU8W,UAAUwB,KAChCvT,GAAI0nC,EAAM1nC,GACVgM,KAAM07B,EAAM17B,KACZiI,MAAOyzB,EAAMzzB,MACbC,IAAKwzB,EAAMxzB,IACX8Q,WAAY0iB,EAAM1iB,YAPH,SASQ,EAAKwiB,cAAcE,EAAM1nC,GAAIu9B,GATrC,cASXqK,EATW,gBAUM,EAAKlrB,YAAYgrB,EAAM1nC,GAAIu9B,GAVjC,cAUXsK,EAVW,iBAWQ,EAAKtrB,cAAcmrB,EAAM1nC,GAAIu9B,GAXrC,eAWXuK,EAXW,OAaXC,EAbW,2BAcZJ,GAdY,IAefp1B,MAAOq1B,EAAWlkC,KAAK6sB,UACvB/uB,IAAK6P,gBAAcmB,YAAYq1B,EAASnkC,KAAKwtB,WAC7CzkB,MAAO4E,gBAAcoB,cAAcq1B,EAAWpkC,KAAKytB,eAG/CjsB,EAAQ0iC,EAAW1iC,OAAS2iC,EAAS3iC,OAAS4iC,EAAW5iC,MACzD6yB,EAAU6P,EAAW7P,SAAW8P,EAAS9P,SAAW+P,EAAW/P,QArBpD,kBAuBV,CACLgQ,eACAH,aACAC,WACAC,aACA5iC,QACA6yB,YA7Be,4CAzDL,sDACZ5gC,KAAKkmC,QAAU7K,K,oFAyFjB,gCAAArmB,EAAA,sEACuBhV,KAAKkmC,QAAQS,OAAa,CAC7CC,SAAUxO,KAFd,cACQp2B,EADR,yBAIS6kC,QAAO,oBAAC7kC,EAAOuK,YAAR,aAAC,EAAa+rB,YAAd,WAJhB,gD,6DAQI2N,GAAU,IAAIkK,GAEPU,GAAiB,WAC5B,OAAO5K,IC9GH6K,GAAiBpV,YAAO,MAAPA,EACrB,cAAGC,MAAH,gKAUIxE,GAAQuE,YAAO,MAAPA,EACZ,cAAGC,MAAH,0NAQyBvI,EAAgBM,YARzC,YAYIqd,GAAOrV,YAAO,MAAPA,EACX,cAAGC,MAAH,wKAMyBvI,EAAgBO,gBANzC,yHAcIqd,GAAOtV,YAAO,MAAPA,EACX,cAAGC,MAAH,qTAsBWsV,GAAoC,SAACjV,GAChD,MAAkCe,wBAAwBx8B,GAA1D,oBAAO2wC,EAAP,KAAkBC,EAAlB,KACA,EAAkCpU,wBAAwBx8B,GAA1D,oBAAO6wC,EAAP,KAAkBC,EAAlB,KACMpL,EAAU4K,KAgBhB,OAdA3T,qBAAU,WACR,IAAMoU,EAAiB,uCAAG,8BAAAt8B,EAAA,0DACpBgnB,EAAMuV,QADc,gCAEFtL,EAAQmK,QAAQpU,EAAMuV,QAAQ3nC,YAF5B,OAEhB4nC,EAFgB,OAGtBL,EAAav0B,UAAQC,WAAW20B,EAAMjlC,KAAK2hB,KAAKpR,MAAO00B,EAAMjlC,KAAK2hB,KAAKnR,MAHjD,WAKpBif,EAAMyV,QALc,iCAMFxL,EAAQmK,QAAQpU,EAAMyV,QAAQ7nC,YAN5B,OAMhB8nC,EANgB,OAOtBL,EAAaz0B,UAAQC,WAAW60B,EAAMnlC,KAAK2hB,KAAKpR,MAAO40B,EAAMnlC,KAAK2hB,KAAKnR,MAPjD,4CAAH,qDAUvBu0B,MACC,CAACtV,EAAMuV,QAASvV,EAAMyV,QAASxL,IAGhC,eAAC6K,GAAD,UACE,gBAAC,GAAD,WACE,eAACC,GAAD,CAAM7Q,GAAI,CAAEkE,gBAAgB,QAAD,cAAU8M,QAAV,IAAUA,IAAa9d,EAAgBO,gBAAvC,SAC3B,eAACqd,GAAD,CAAM9Q,GAAI,CAAEkE,gBAAgB,QAAD,cAAUgN,QAAV,IAAUA,IAAahe,EAAgBO,gBAAvC,eCxFtBge,GAAY,WACvB,OACE,qCACE,eAAC,GAAD,CAAkBJ,QAAS,KAAME,QAAS,UCE1C9tC,GAASC,sBAEFguC,GAAW,WACtB,MAAgC7U,mBAA2B,IAA3D,oBAAO8U,EAAP,KAAiBC,EAAjB,KACA,EAA0B/U,mBAA2B,IAArD,oBAAOpoB,EAAP,KAAco9B,EAAd,KAmCA,OAjCAlF,aAAsB/T,GAAqB,CACzCwN,YAAa,eACbwG,YAAa,SAACvgC,GACZulC,EAAYvlC,EAAK8sB,aAIrB6D,qBAAU,WACR,IADc,EACR5b,EAAM,IAAI0wB,IAAI,CAClB,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAEEC,EAAW,GAfD,eAgBEJ,GAhBF,IAgBd,2BAA0B,CAAC,IAAhBhxC,EAAe,QACpBygB,EAAI4wB,IAAIrmC,SAAShL,EAAEgI,MACrBopC,EAASzuC,KAAK3C,IAlBJ,8BAqBdoxC,EAAWA,EAAStgB,UACpBogB,EAASE,GACTtuC,GAAOoD,KAAKkrC,EAAS1uC,OAAQsuC,EAAStuC,OAAtCI,KACC,CAACkuC,IAGF,qCACE,eAACnV,GAAA,EAAD,CAAWwD,GAAI,CAAEmF,GAAI,GAAK1I,SAAS,KAAnC,SACE,eAACiI,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAGC,eAAe,SAASC,WAAW,SAASY,aAAc,EAAtF,SACGjxB,EAAMxQ,KAAI,SAACtD,GAAD,OACT,eAAC+jC,GAAA,EAAD,CAAMvB,MAAI,EAAY4B,GAAI,GAAIY,GAAI,EAAGX,GAAI,EAAGY,GAAI,EAAhD,SACE,eAAC,GAAD,CAAuBzC,KAAMxiC,KADfA,EAAEgI,c,UCrCjBspC,GAA6B,SAACnW,GACzC,IAAMkM,EAAS5K,IAAM8U,SAAoB,WACvC,OAAO,IAAInK,KACV,IACGY,EAAWX,EAAOmK,YAAYrW,EAAMxhB,MACpC4jB,EAAUd,IAAMe,QAAO,GAC7B,EAA0Bf,IAAMP,SAAyB,CACvDuV,KAAMzJ,EAASyJ,OAAS,EAAIzJ,EAASyJ,OAAS,EAC9CC,MAAO1J,EAAS0J,QAAU,EAAI1J,EAAS0J,QAAU,EACjDC,QAAS3J,EAAS2J,UAAY,EAAI3J,EAAS2J,UAAY,EACvDC,QAAS5J,EAAS4J,UAAY,EAAI5J,EAAS4J,UAAY,IAJzD,oBAAOxhC,EAAP,KAAcm4B,EAAd,KA4BA,OArBIP,EAAS6J,YAAc,GACzBrmC,YAAW,WACT,IAAMw8B,EAAWX,EAAOmK,YAAYrW,EAAMxhB,MACtC4jB,EAAQ3wB,SACV27B,EAAS,CACPkJ,KAAMzJ,EAASyJ,OACfC,MAAO1J,EAAS0J,QAChBC,QAAS3J,EAAS2J,UAClBC,QAAS5J,EAAS4J,cAGrB,KAGLnV,IAAMJ,WAAU,WAEd,OADAkB,EAAQ3wB,SAAU,EACX,WACL2wB,EAAQ3wB,SAAU,KAEnB,IAGD,gBAACouB,GAAA,EAAD,CAAYO,QAAQ,YAAY0D,MAAM,gBAAtC,UACE,6BAAI7uB,EAAMqhC,OADZ,SAC2B,6BAAIrhC,EAAMshC,QADrC,UACsD,6BAAIthC,EAAMuhC,UADhE,YACqF,6BAAIvhC,EAAMwhC,UAD/F,e,mDC9CEE,GAAYjX,aAAO,SAACM,GAAD,OACvB,eAAC,KAAD,aAAc4W,gBAAc,EAACC,UAAW,EAAGC,QAAM,GAAK9W,MADtCN,EAEf,gBAAGC,EAAH,EAAGA,MAAH,MAAgB,CACjBmH,OAAO,aAAD,OAAenH,EAAMwG,QAAQ4Q,SACnC,qBAAsB,CACpBC,aAAc,GAEhB,WAAY,CACVjN,QAAS,QAEXhG,gBACyB,SAAvBpE,EAAMwG,QAAQ8Q,KACV,oBACA,8BAGFC,GAAmBxX,aAAO,SAACM,GAAD,OAC9B,eAAC,KAAD,aACEmX,WAAY,eAAC,KAAD,CAA0BjT,GAAI,CAAEsC,SAAU,aAClDxG,MAHiBN,EAKtB,gBAAGC,EAAH,EAAGA,MAAH,MAAgB,CACjBoE,gBACyB,SAAvBpE,EAAMwG,QAAQ8Q,KACV,2BACA,qBACNG,cAAe,cACf,wDAAyD,CACvDC,UAAW,iBAEb,iCAAkC,CAChCC,WAAY3X,EAAMmJ,QAAQ,QAIxByO,GAAmB7X,YAAO8X,KAAP9X,EAA4B,kBAAgB,CACnEyE,QADmD,EAAGxE,MACvCmJ,QAAQ,GACvB2O,UAAW,oCAGAC,GAAa,WACxB,MAAsCpW,IAAMP,SAAyB,QAArE,oBAAO4W,EAAP,KAAoBC,EAApB,KAEMC,EAAe,SAACC,GAAD,OAAmB,SAACliC,EAA6BmiC,GACpEH,IAAeG,GAAcD,KAG/B,OACE,uCACE,eAAC7T,GAAA,EAAD,CAAK8F,QAAQ,OAAOhB,eAAe,SAASC,WAAW,SAASY,aAAc,EAA9E,SACE,iCACE,eAAC/J,GAAA,EAAD,CAAYO,QAAQ,KAAK0D,MAAM,gBAAgBM,UAAU,SAAzD,iBAGA,eAACvE,GAAA,EAAD,CAAYO,QAAQ,YAAY0D,MAAM,gBAAgBM,UAAU,SAAhE,6CAKJ,eAACH,GAAA,EAAD,CAAK8F,QAAQ,OAAOhB,eAAe,SAASC,WAAW,SAAvD,SACE,gBAAC/E,GAAA,EAAD,CAAKtD,SAAU,IAAf,UACE,gBAAC,GAAD,CAAWqX,SAA0B,SAAhBL,EAAwBhJ,SAAUkJ,EAAa,QAApE,UACE,eAAC,GAAD,CAAkB,gBAAc,eAAehrC,GAAG,cAAlD,SACE,eAACgzB,GAAA,EAAD,qDAEF,eAAC,GAAD,UACE,gBAACA,GAAA,EAAD,gXAEkJ,eAACwR,GAAA,EAAD,CAAMC,UAAU,QAAQ2G,KAAK,wBAAwBrJ,OAAO,SAA5D,wBAFlJ,kCAG+B,eAACyC,GAAA,EAAD,CAAMC,UAAU,QAAQ2G,KAAK,mBAAmBrJ,OAAO,SAAvD,kBAH/B,yCAIE,wBACA,wBALF,oEAOuB,eAACyC,GAAA,EAAD,CAAMC,UAAU,QAAQ2G,KAAK,mDAAmDrJ,OAAO,SAAvF,oBAPvB,6BAQwB,eAACyC,GAAA,EAAD,CAAMC,UAAU,QAAQ2G,KAAK,uCAAuCrJ,OAAO,SAA3E,kDARxB,mHAaJ,gBAAC,GAAD,CAAWoJ,SAA0B,SAAhBL,EAAwBhJ,SAAUkJ,EAAa,QAApE,UACE,eAAC,GAAD,CAAkB,gBAAc,eAAehrC,GAAG,cAAlD,SACE,eAACgzB,GAAA,EAAD,+DAEF,eAAC,GAAD,UACE,eAACA,GAAA,EAAD,ubAQJ,gBAAC,GAAD,CAAWmY,SAA0B,SAAhBL,EAAwBhJ,SAAUkJ,EAAa,QAApE,UACE,eAAC,GAAD,CAAkB,gBAAc,eAAehrC,GAAG,cAAlD,SACE,eAACgzB,GAAA,EAAD,0DAEF,eAAC,GAAD,UACE,gBAACA,GAAA,EAAD,wDAC4C,eAACwR,GAAA,EAAD,CAAMC,UAAU,QAAQ2G,KAAK,gEAAgErJ,OAAO,SAApG,qBAD5C,UAEW,eAACyC,GAAA,EAAD,CAAMC,UAAU,QAAQ2G,KAAK,qEAAqErJ,OAAO,SAAzG,iBAFX,YAMJ,gBAAC,GAAD,CAAWoJ,SAA0B,SAAhBL,EAAwBhJ,SAAUkJ,EAAa,QAApE,UACE,eAAC,GAAD,CAAkB,gBAAc,eAAehrC,GAAG,cAAlD,SACE,eAACgzB,GAAA,EAAD,8DAEF,eAAC,GAAD,UACE,gBAACA,GAAA,EAAD,oOAEwE,eAACwR,GAAA,EAAD,CAAMC,UAAU,QAAQ2G,KAAK,6DAA6DrJ,OAAO,SAAjG,0BAFxE,YAMJ,gBAAC,GAAD,CAAWoJ,SAA0B,SAAhBL,EAAwBhJ,SAAUkJ,EAAa,QAApE,UACE,eAAC,GAAD,CAAkB,gBAAc,eAAehrC,GAAG,cAAlD,SACE,eAACgzB,GAAA,EAAD,qEAEF,eAAC,GAAD,UACE,gBAACA,GAAA,EAAD,6LAEmF,eAACwR,GAAA,EAAD,CAAMC,UAAU,QAAQ2G,KAAK,0DAA0DrJ,OAAO,SAA9F,kBAFnF,qKAOJ,gBAAC,GAAD,CAAWoJ,SAA0B,SAAhBL,EAAwBhJ,SAAUkJ,EAAa,QAApE,UACE,eAAC,GAAD,CAAkB,gBAAc,eAAehrC,GAAG,cAAlD,SACE,eAACgzB,GAAA,EAAD,iEAEF,eAAC,GAAD,UACE,gBAACA,GAAA,EAAD,8LAE0C,eAACwR,GAAA,EAAD,CAAMC,UAAU,QAAQ2G,KAAK,sDAAsDrJ,OAAO,SAA1F,0BAF1C,iBAQR,eAAC/O,GAAA,EAAD,CAAYO,QAAQ,YAAY0D,MAAM,gBAAgBM,UAAU,SAASqL,UAAW,EAApF,gCAGA,gBAAC5P,GAAA,EAAD,CAAYO,QAAQ,YAAY0D,MAAM,gBAAgBM,UAAU,SAAhE,UACE,eAACiN,GAAA,EAAD,CAAMC,UAAU,QAAQ2G,KAAK,oFAAoFrJ,OAAO,SAAxH,uBADF,OAGE,eAACyC,GAAA,EAAD,CAAMC,UAAU,QAAQ2G,KAAK,oFAAoFrJ,OAAO,SAAxH,8B,oBC5IKsJ,GAAkC,SAAClY,GAC9C,MAAsBe,mBAAS,KAA/B,oBAAOoX,EAAP,KAAYC,EAAZ,KAWA,OATAlX,qBAAU,WACR,GAAIlB,EAAMrY,gBAAkBqY,EAAMrY,eAAiB,EAAG,CACpD,IAAM0wB,EAAWrY,EAAMrY,iBAAmBxb,kBAAgBS,YAAc,IAAM,GAC9EwrC,EAAO9mC,KAAKF,IAAIinC,EAAUrY,EAAMrY,eAAiBxb,kBAAgBS,YAAc,WAE/EwrC,EAAO,OAER,CAACpY,EAAMrY,iBAGR,gBAACqc,GAAA,EAAD,CAAO6S,UAAW,EAAG3S,GAAI,CAAEmB,MAAO,MAAOjB,UAAW,SAAUmE,GAAI,GAAlE,UACE,eAACtE,GAAA,EAAD,CAAKC,GAAI,CAAEoU,GAAI,EAAGlP,GAAI,EAAGC,GAAI,KAA7B,SACGrJ,EAAM4E,UAAY5E,EAAMrY,eACvB,eAAC4wB,GAAA,EAAD,CAAUC,UAAU,OAAOnT,MAAM,QAEjC,gBAACxF,GAAA,EAAD,CAAYO,QAAQ,YAAY0D,MAAM,gBAAtC,UACE,6BAAI15B,aAAWyP,aAAammB,EAAMrY,kBADpC,OAC6Dvd,aAAWyP,aAAa1N,kBAAgBS,aADrG,iBAKJ,eAAC6rC,GAAA,EAAD,CAAgBvU,GAAI,CAAE/5B,OAAQ,OAASi2B,QAAQ,cAAc0D,MAAOqU,GAAO,GAAK,QAAU,UAAWlzC,MAAOkzC,Q,oBCtB5GxwC,GAASC,sB,UCmBA+3B,GAzBD+Y,aAAY,CACxB9R,WAAY,CACV+R,WAAY,CACV,gBACA,qBACA,aACA,SACA,mBACA,QACA,aACA,sBACA,mBACA,qBACAC,KAAK,MAETzS,QAAS,CACP0S,QAAS,CACPC,KAAM,WAERC,UAAW,CACTD,KAAM,cCPNnxC,GAASC,sBAET++B,GAAkBjH,YAAO,MAAPA,EAAc,cAAGC,MAAH,qIAIXvI,EAAgBM,YAJL,wGAUhCqP,GAAYrH,YAAO,MAAPA,EAChB,cAAGC,MAAH,0KAeIqZ,GAAkE,SAAChZ,GACvE,IAAMiZ,EAAUC,aAAcvZ,GAAMwZ,YAAYC,GAAG,OAI7CC,EAAkB,WACtB,OAAO/pC,aAAW6D,0BAA0B6sB,EAAM92B,QAAS,GAAI,IAEjE,OACE,gBAAC+6B,GAAA,EAAD,CAAKC,GAAI,CAAEmB,MAAO,QAAlB,UACE,gBAACpB,GAAA,EAAD,CAAKC,GAAI,CAAE6F,QAAS,OAAQf,WAAY,UAAxC,UACGiQ,GACC,eAAChV,GAAA,EAAD,CAAKC,GAAI,CAAE+D,GAAI,EAAG+B,SAAU,SAA5B,SACE,eAAC,GAAD,CAA0BxC,MAAOxH,EAAM92B,QAASu+B,UAAU,SAAShB,OAAK,EAAxE,SACE,eAAC4K,GAAA,EAAD,CAAMC,UAAU,QAAQ2G,KAX3BthC,eAAaK,cAAcgpB,EAAM92B,SAWiB0lC,OAAO,SAASxO,QAAQ,QAAQ0D,MAAM,iBAArF,SAAuGuV,UAI7G,eAACpV,GAAA,EAAD,CAAKC,GAAI,CAAEmB,MAAO,OAAQ4C,GAAI,GAA9B,SACE,eAACwQ,GAAA,EAAD,aAAgBrY,QAAQ,cAAc8D,GAAI,CAAE/5B,OAAQ,IAAS61B,MAE/D,eAACiE,GAAA,EAAD,CAAKC,GAAI,CAAE8F,SAAU,IAArB,SACE,eAACnK,GAAA,EAAD,CAAYO,QAAQ,QAAQ0D,MAAM,iBAAlC,SAAoD9D,EAAMr5B,cAG5DsyC,GACA,eAAC,GAAD,CAA0BzR,MAAOxH,EAAM92B,QAASu+B,UAAU,SAAShB,OAAK,EAAxE,SACE,eAAC4K,GAAA,EAAD,CAAMC,UAAU,QAAQlR,QAAQ,QAAQ0D,MAAM,iBAA9C,SAAgEuV,YAa7DC,GAAiB,WAAO,IAAD,EAC5BlX,EAAUd,IAAMe,QAAO,GACvBpjB,EAAS,OAETitB,EAAS5K,IAAM8U,SAAoB,WACvC,OAAO,IAAInK,KACV,IACG1Q,EAAU+F,IAAM8U,SAAuB,WAC3C,OAAO5a,OACN,IACH,EAAkCuF,oBAAS,GAA3C,oBAAO0H,EAAP,KAAkBmK,EAAlB,KACA,EAAgC7R,mBAAS,GAAzC,oBAAOwY,EAAP,KAAiBC,EAAjB,KACA,EAA0BzY,mBAAuB,IAAjD,oBAAO0Y,EAAP,KAAcC,EAAd,KACA,EFtFyB,SAACrwB,GAAiE,IAAD,EAA/C+gB,EAA+C,uDAAnB,eACjErlB,EAAQ8rB,aAAoCjU,GAAgB,CAChEyN,UAAW,CACTx9B,GAAIwc,GAENswB,6BAA6B,EAC7BrP,YAAaF,EACbwP,mBAAoB,cAGhB7nC,EAAQgT,EAAMhT,MACd6yB,EAAU7f,EAAM6f,QAItB,MAAO,CACL1S,KAH+B,UAAGnN,EAAMxU,YAAT,aAAG,EAAY2hB,KAI9CngB,QACA6yB,WEoEeiV,CAAY56B,GAArBiT,EAAR,EAAQA,KACF1T,EAAO0tB,EAAOsF,YAAY,YAC1ByH,EAAUC,aAAcvZ,GAAMwZ,YAAYC,GAAG,OAmEnD,OAjEAlY,qBAAU,WAER,OADAkB,EAAQ3wB,SAAU,EACX,WACL2wB,EAAQ3wB,SAAU,KAEnB,IAEHyvB,qBAAU,WACR,IAAM4Y,EAAa,uCAAG,4CAAA9gC,EAAA,sEACCuiB,EAAQW,WAAWvI,mBADpB,OACdnC,EADc,OAEduoB,EAAa,IAAIn0B,IAFH,eAGJ4L,GAHI,IAGpB,4BAAW3sB,EAAa,SAChBua,SACA46B,EAAYD,EAAWr1C,IAAIG,EAAEua,UAE/B46B,EAAY,CACV9wC,QAASrE,EAAEua,MACXnN,MAAO,EACPgoC,MAAO,IAGXD,EAAU/nC,QACNpN,EAAEgU,KApCQ,KAqCZmhC,EAAUC,QAEZF,EAAWxuC,IAAI1G,EAAEua,MAAO46B,IAjBR,8BAqBdE,EAAyB,GAC3BC,EAAY,EAChBJ,EAAW11B,SAAQ,SAACpf,EAAmBm1C,GACjCn1C,EAAMg1C,MAAQ,IAChBC,EAAS1yC,KAAKvC,GACVA,EAAMg1C,MAAQE,IAChBA,EAAYl1C,EAAMg1C,WAIxBtyC,GAAOoD,KAAK,kBAAmBgvC,EAAW3Y,KAAM,iBAAkB8Y,EAAS3yC,OAA3EI,GAEM0yC,EAAkBjrC,mBACtB8qC,EACA,CACE,SAACI,GAAD,OAAmBA,EAAEL,OACrB,SAACK,GAAD,OAAmBA,EAAEroC,QAEvB,CACE,OACA,SAIAmwB,IACFoX,EAAYW,GACZT,EAASW,EAAgBE,OAAO,EAAGjpC,KAAKF,IAAI,EAAGipC,EAAgB9yC,UAC/DqrC,GAAa,IAhDK,4CAAH,qDAmDnBA,GAAa,GACbviC,YAAW,WACTypC,MACC,OACF,CAACve,EAAQW,aAGV,eAAC+H,GAAA,EAAD,CAAK8F,QAAQ,OAAOhB,eAAe,SAASC,WAAW,SAAvD,SACE,eAAC/E,GAAA,EAAD,CAAKtD,SAAU,IAAf,SACE,eAACqD,GAAA,EAAD,CACEyB,MAAO,CACL1B,gBAAiB,4BAFrB,SAKE,gBAACE,GAAA,EAAD,CAAKC,GAAI,CAAE6F,QAASkP,EAAU,OAAS,UAAWX,GAAI,EAAGlP,GAAI,EAAGC,GAAI,EAAGhE,MAAO,QAA9E,UACE,eAAC4B,GAAA,EAAD,CAAM/C,GAAI,CAAE8F,SAAUiP,EAAU,QAAU,QAA1C,SACE,gBAAC/R,GAAA,EAAD,CAAgBC,UAAWC,KAAY1zB,GAAE,gBAAWuL,GAAU2vB,OAAO,SAArE,UACE,gBAAC,GAAD,WACE,eAAC3K,GAAA,EAAD,CAAKC,GAAI,CAAEhE,SAAU,WAAYoH,IAAK,EAAGM,MAAO,GAAhD,SACE,eAAC,GAAD,CAA0BJ,MAAO,gDAA0BC,UAAU,SAAShB,OAAK,EAAnF,SACE,eAACtF,GAAA,EAAD,CAAMC,KAAK,QAAQgE,KAAM,eAACH,GAAD,CAAoBG,KAAMyC,KAAO3D,GAAI,CAAEsC,SAAU,QAASmB,GAAI,KAASzD,GAAI,CAAEsC,SAAU,UAAY7/B,MAAK,OAAEurB,QAAF,IAAEA,OAAF,EAAEA,EAAMrZ,WAG7I,eAAC,GAAD,CAAWqrB,GAAI,CAAEkE,gBAAgB,QAAD,OAAUxnB,UAAQC,WAAR,OAAmBqR,QAAnB,IAAmBA,OAAnB,EAAmBA,EAAMpR,MAAzB,OAAgCoR,QAAhC,IAAgCA,OAAhC,EAAgCA,EAAMnR,KAAhD,YAElC,gBAACsnB,GAAA,EAAD,CAAanE,GAAI,CAAEr/B,EAAG,GAAtB,UACE,gBAACg7B,GAAA,EAAD,CAAYO,QAAQ,KAAK+G,UAAU,MAAMjD,GAAI,CAAEr/B,EAAG,GAAlD,UACGsH,kBAAgBC,UADnB,KACgC6S,KAEhC,eAACglB,GAAA,EAAD,CAAKC,GAAI,CAAE/5B,OAAQ,OAAQm+B,SAAU,QAArC,SACE,eAACrE,GAAA,EAAD,CAAKC,GAAI,CAAEr/B,EAAG,GAAd,gBACGqtB,QADH,IACGA,GADH,UACGA,EAAML,kBADT,aACG,EAAkB1pB,KAAI,SAAC6Q,GAAD,OACrB,eAACmoB,GAAA,EAAD,CAAcx6B,MAAOqS,EAAGonB,QAAQ,WAAW8D,GAAI,CAAEqE,GAAI,EAAGN,GAAI,GAAK7G,KAAK,SAA3DpoB,kBAOvB,gBAACirB,GAAA,EAAD,CAAKC,GAAI,CAAEsW,SAAU,EAAG7S,GAAIsR,EAAU,EAAI,EAAGjR,GAAIiR,EAAU,EAAI,GAA/D,UACE,eAACpZ,GAAA,EAAD,CAAYO,QAAQ,KAAKqa,WAAS,EAAlC,yCADF,qDAhHY,IAgHZ,0CAGU,gBAACpJ,GAAA,EAAD,CAAMC,UAAU,QAAQnK,UAAWC,KAAY1zB,GAAE,gBAAWuL,GAAU2vB,OAAO,SAA7E,UAAuFziC,kBAAgBC,UAAvG,KAAoH6S,KAH9H,qBAIc,eAACkiB,GAAA,EAAD,CAAMC,KAAK,QAAQz6B,MAAK,OAAEurB,QAAF,IAAEA,OAAF,EAAEA,EAAMrZ,OAC5C,wBALF,sHAOE,eAACorB,GAAA,EAAD,CAAKC,GAAI,CAAE8D,GAAI,GAAf,SACGS,EACC,uCACE,eAAC8P,GAAA,EAAD,CAAUC,UAAU,SACpB,eAACD,GAAA,EAAD,CAAUC,UAAU,OAAOtU,GAAI,CAAE8D,GAAI,MACrC,eAACuQ,GAAA,EAAD,CAAUC,UAAU,OAAOtU,GAAI,CAAE8D,GAAI,MACrC,eAACuQ,GAAA,EAAD,CAAUC,UAAU,OAAOtU,GAAI,CAAE8D,GAAI,MACrC,eAACuQ,GAAA,EAAD,CAAUC,UAAU,OAAOtU,GAAI,CAAE8D,GAAI,MACrC,eAACuQ,GAAA,EAAD,CAAUC,UAAU,OAAOtU,GAAI,CAAE8D,GAAI,SAGvC,qCACGyR,EAAMtxC,KAAI,SAACrC,GAAD,OACT,eAAC,GAAD,CAAyCb,MAAOa,EAAEm0C,MAAQV,EAAW,IAAK5yC,MAAOb,EAAEm0C,MAAMrsC,WAAY1E,QAASpD,EAAEoD,SAAlFpD,EAAEoD,gBAKxC,eAAC86B,GAAA,EAAD,CAAO6S,UAAW,EAAG3S,GAAI,CAAEr/B,EAAG,EAAGu/B,UAAW,SAAU4D,GAAI,GAA1D,SACE,eAAC,GAAD,CAAWxpB,KAAMA,EAAKk8B,+BC/MhC/yC,GAASC,sBAEF+yC,GAAc,WACzB,IAGMn8B,EAHS8iB,IAAM8U,SAAoB,WACvC,OAAO,IAAInK,KACV,IACiBM,SAAS,4BAEvBnK,EAAUd,IAAMe,QAAO,GAC7B,EAAkCtB,mBAAqC,CACrEjnB,OAAQ,IAAIhS,YAAUC,iBAAiB,KACvC6yC,cAAe,MAFjB,oBAAO/yB,EAAP,KAAkBgzB,EAAlB,KAIA,EAA0C9Z,oBAAS,GAAnD,oBAAOtZ,EAAP,KAAsBqzB,EAAtB,KACA,EAA8B/Z,oBAAS,GAAvC,oBAAOga,EAAP,KAAgBC,EAAhB,KACA,EAA4Cja,wBAAwBx8B,GAApE,oBAAOojB,EAAP,KAAuBszB,EAAvB,KACM5kC,EAAU/B,uBACV4mC,EAAcrG,KAEd9vB,EAAQ8rB,aAAwBpT,GAAuB,CAC3D6M,YAAa,iBAGT4I,EAAUnuB,EAAMmuB,QAEtBhS,qBAAU,WAER,OADAkB,EAAQ3wB,SAAU,EACX,WACL2wB,EAAQ3wB,SAAU,KAEnB,IAEHyvB,qBAAU,WACR,IAAM4O,EAAc,SAAC76B,GACfA,IAAUnN,YAAUkY,cAAc4jB,SACpCj8B,GAAOoD,KAAK,yBAAZpD,GACAurC,MAIJ,OADA78B,EAAQzL,GAAG9C,YAAUgN,YAAYI,0BAA2B46B,GACrD,WACLz5B,EAAQ05B,IAAIjoC,YAAUgN,YAAYI,0BAA2B46B,MAE9D,CAACz5B,EAAS68B,IAEbhS,qBAAU,WACR,IAAM4O,EAAc,SAAChqC,GACnB6B,GAAOoD,KAAP,qBAA0BjF,EAAEkZ,UAA5B,oBAAiDlZ,EAAEb,MAAMilB,UAAzD,uBAAiFpkB,EAAEmV,UAAUiP,WAA7FviB,GACAurC,KAGF,OADA78B,EAAQzL,GAAG9C,YAAUgN,YAAYe,cAAei6B,GACzC,WACLz5B,EAAQ05B,IAAIjoC,YAAUgN,YAAYe,cAAei6B,MAElD,CAACz5B,EAAS68B,IAEbhS,qBAAU,WACR,IAAM4O,EAAc,SAAChqC,GAAmC,IAAD,EACrD6B,GAAOoD,KAAP,qBAA0BjF,EAAEkZ,UAA5B,oBAAiDlZ,EAAEmZ,OAAnD,8BAAqEnZ,EAAE8D,cAAvE,aAAqE,EAAUsgB,UAA/E,yBAAyGpkB,EAAEoZ,YAA3G,uBAAqIpZ,EAAEwY,UAAvI,uBAA+JxY,EAAEmV,UAAUiP,WAA3KviB,GACAurC,KAGF,OADA78B,EAAQzL,GAAG9C,YAAUgN,YAAYiB,YAAa+5B,GACvC,WACLz5B,EAAQ05B,IAAIjoC,YAAUgN,YAAYiB,YAAa+5B,MAEhD,CAACz5B,EAAS68B,IAEbhS,qBAAU,WAAO,IAAD,EACRn2B,EAAI,UAAGga,EAAMxU,YAAT,aAAG,EAAYutB,WACrB/yB,GAAQq3B,EAAQ3wB,UAClBopC,EAAa,CACX/gC,OAAQ,IAAIhS,YAAUC,iBAAiBgD,EAAK8c,WAC5C+yB,cAAe59B,YAAUe,WAAW,IAAIjW,YAAUC,iBAAiBgD,EAAK8c,cAE1EizB,EAAiB/vC,EAAK0c,eACtBuzB,EAAWjwC,EAAK0c,eAAiB1c,EAAK4c,eAAiB,GACvDszB,EAAkBlwC,EAAK4c,mBAExB,CAAC5C,EAAMxU,OAEV,IAAM4qC,EAAe,uCAAG,sBAAAniC,EAAA,+EAECkiC,EAAYryB,YAFb,cAIlBwa,GAAaoK,eAAe,gBAE5BpK,GAAaqB,aAAa,eANR,gDASpB/8B,GAAOoK,MAAP,KAAApK,GACA07B,GAAaqB,aAAb,MAVoB,yDAAH,qDAcrB,OACE,eAAChE,GAAA,EAAD,CAAWC,SAAS,KAAKuD,GAAI,CAAE8D,GAAI,IAAnC,SACE,gBAACY,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAGyK,UAAU,MAAMxK,eAAe,SAASC,WAAW,SAASY,aAAc,EAAtG,UACE,eAAChB,GAAA,EAAD,CAAMvB,MAAI,EAACwC,GAAI,GAAIX,GAAI,EAAvB,SACE,eAACjF,GAAA,EAAD,CAAK8F,QAAQ,OAAOhB,eAAe,SAASC,WAAW,SAAvD,SACE,iCACE,eAACnJ,GAAA,EAAD,CAAYO,QAAQ,KAAK0D,MAAM,UAA/B,SACG1M,EAAgBC,WAEnB,gBAACwI,GAAA,EAAD,CAAYO,QAAQ,YAAY0D,MAAM,gBAAgB2W,WAAS,EAA/D,sDAC2C,eAACpJ,GAAA,EAAD,CAAMC,UAAU,QAAQ2G,KAAK,wBAAwBrJ,OAAO,SAA5D,wBAD3C,yHAGInnB,EAMA,8DACyBI,EAAU+yB,cADnC,IACmDzuC,kBAAgBO,cADnE,WALA,sEAUF+a,EAKA,eAAC,GAAD,CAAgBmd,QAAS7f,EAAM6f,QAASjd,eAAgBA,IAJxD,eAACqc,GAAA,EAAD,CAAO6S,UAAW,EAAG3S,GAAI,CAAEr/B,EAAG,EAAGwgC,MAAO,MAAOjB,UAAW,SAAUmE,GAAI,GAAxE,SACE,eAAC,GAAD,CAAW/pB,KAAMA,EAAKk8B,kBAK1B,gBAACpH,GAAA,EAAD,CAAOxK,QAAS,EAAGyK,UAAU,MAA7B,UACE,eAAC,GAAD,CAAiBnT,QAAQ,YAAY0D,MAAM,UAAUW,WAAY0W,EAAiBjX,GAAI,CAAE8F,SAAU,SAAWlF,UAAWiW,EAAxH,kBAGA,eAAC5M,GAAA,EAAD,CAAQ/N,QAAQ,WAAW0D,MAAM,UAAUqD,UAAWC,KAAY1zB,GAAG,eAArE,8BAOR,eAACk1B,GAAA,EAAD,CAAMvB,MAAI,EAACwC,GAAI,GAAIX,GAAI,EAAvB,SACE,eAACjF,GAAA,EAAD,CAAK8F,QAAQ,OAAOhB,eAAe,SAASC,WAAW,SAAvD,SAEE,wBAAO3D,MAAM,OAAO+V,QAAQ,GAAGC,UAAQ,EAACC,OAAK,EAACC,aAAW,EAACC,MAAI,EAAC/V,MAAO,CAAEC,QAAS,OAAjF,SACE,yBAAQpK,IAAKnvB,kBAAgBG,QAAU,+BAAgCW,KAAK,oBAIlF,gBAAC27B,GAAA,EAAD,CAAMvB,MAAI,EAAC4B,GAAI,GAAIwG,UAAW,GAA9B,UACE,eAACxL,GAAA,EAAD,CAAK8F,QAAQ,OAAOhB,eAAe,SAASC,WAAW,SAAvD,SACE,eAACnJ,GAAA,EAAD,CAAYO,QAAQ,YAAY0D,MAAM,gBAAtC,+BAIF,eAACG,GAAA,EAAD,CAAK8F,QAAQ,OAAOhB,eAAe,SAASC,WAAW,SAAvD,SACE,gBAACsK,GAAA,EAAD,CAAOxK,QAAS,EAAGyK,UAAU,MAA7B,UACE,eAACC,GAAA,EAAD,CAAY,aAAW,UAAUyE,KAAM7gB,EAAgBW,YAAa6W,OAAO,SAA3E,SACE,eAAC3J,GAAD,CAAoBG,KAAMqW,SAE5B,eAACjI,GAAA,EAAD,CAAY,aAAW,SAASyE,KAAM7gB,EAAgBY,WAAY4W,OAAO,SAAzE,SACE,eAAC3J,GAAD,CAAoBG,KAAMsW,SAE5B,eAAClI,GAAA,EAAD,CAAY,aAAW,UAAUyE,KAAM7gB,EAAgBU,YAAa8W,OAAO,SAA3E,SACE,eAAC3J,GAAD,CAAoBG,KAAMuW,iBAKlC,eAAC/S,GAAA,EAAD,CAAMvB,MAAI,EAAC4B,GAAI,GAAIwG,UAAW,GAA9B,SACE,eAAC,GAAD,MAEF,eAAC7G,GAAA,EAAD,CAAMvB,MAAI,EAAC4B,GAAI,GAAIwG,UAAW,GAA9B,SACE,eAAC,GAAD,MAEF,eAAC7G,GAAA,EAAD,CAAMvB,MAAI,EAAC4B,GAAI,GAAIwG,UAAW,EAA9B,SACE,eAACxL,GAAA,EAAD,CAAK8F,QAAQ,OAAOhB,eAAe,SAASC,WAAW,SAAvD,SACE,eAAC/E,GAAA,EAAD,CAAKtD,SAAU,IAAf,SACE,sBAAK0E,MAAM,OAAOuW,IAAI,OAAOtgB,IAAKlE,EAAgBQ,0BAIxD,eAACgR,GAAA,EAAD,CAAMvB,MAAI,EAAC4B,GAAI,GAAIwG,UAAW,EAA9B,SACE,eAACxL,GAAA,EAAD,CAAK8F,QAAQ,OAAOhB,eAAe,SAASC,WAAW,SAAvD,SACE,iCACE,eAACnJ,GAAA,EAAD,CAAYO,QAAQ,KAAK0D,MAAM,gBAAgBM,UAAU,SAASqW,WAAS,EAA3E,wBAGA,gBAAC5a,GAAA,EAAD,CAAYO,QAAQ,YAAY0D,MAAM,gBAAgBM,UAAU,SAASqW,WAAS,EAAlF,8BACoBrjB,EAAgBC,SADpC,2CAEM,eAACga,GAAA,EAAD,CAAMC,UAAU,QAAQ2G,KAAK,wBAAwBrJ,OAAO,SAA5D,wBAFN,KAE+FxX,EAAgBC,SAF/G,qEAGkBlrB,kBAAgBC,UAHlC,iDAG2FgrB,EAAgBC,SAH3G,6DAIQD,EAAgBC,SAJxB,sJAMG5P,GAAiBI,EAAU/N,OAAOf,GAAG,IACpC,2DACsB8O,EAAU+yB,cADhC,IACgDzuC,kBAAgBO,cADhE,oBAEkB0qB,EAAgBC,SAFlC,cAEuDxP,EAAU+yB,cAFjE,IAEiFzuC,kBAAgBO,cAFjG,sGAGoGmb,EAAU+yB,cAH9G,IAG8HzuC,kBAAgBO,cAH9I,+GAM8Bmb,EAAU+yB,cANxC,IAMwDzuC,kBAAgBO,cANxE,+HAOmB0qB,EAAgBC,SAPnC,uDAOiGD,EAAgBC,SAPjH,sE,4FCzMLwkB,GAA0B,SAAC7b,GACtC,IAAM8b,EAAazZ,iBAAuB,MAwB1C,OAtBAnB,qBAAU,WACR,IAAM6a,EAAa,CACjB3a,KAAM,IACN4a,QAASA,WAAQC,KACjBC,WAAY,EACZC,WAAY,OACZlF,KAAMmF,SAAMC,oBACZC,OAAQ,EACRx7B,MAAOoW,8BACPqlB,MAAO,IAGLvc,EAAM5nB,MAAQ0jC,EAAWrqC,UAC3BsqC,EAAW3a,KAAO9vB,KAAKF,IAAI,IAAK0qC,EAAWrqC,QAAQ+qC,YAAc,IACjEV,EAAWrqC,QAAQgrC,UAAY,GACrB,IAAIC,UAAOZ,EAAWrqC,SAC9BkrC,SAAS3c,EAAM5nB,KAAM2jC,GAAY71C,MAAK,WACtCuT,QAAQC,IAAI,2BAGf,CAACsmB,EAAM5nB,OAGR,sBAAK+sB,IAAK2W,KCrBRn0C,GAASC,sBAQFg1C,GAA+B,SAAC5c,GAC3C,MAAsBe,mBAAiB,IAAvC,oBAAOhH,EAAP,KAAY8iB,EAAZ,KACA,EAA0B9b,oBAAS,GAAnC,oBAAOhvB,EAAP,KAAc0vB,EAAd,KACA,EAAgCV,wBAAwBx8B,GAAxD,oBAAO4d,EAAP,KAAiB26B,EAAjB,KACQlP,EAA2B5N,EAA3B4N,QAASx4B,EAAkB4qB,EAAlB5qB,KAAM2nC,EAAY/c,EAAZ+c,QACjBxhB,EAAUC,KACVtI,EAAgBwF,KAChBriB,EAAU/B,uBACV0oC,EAAmB1b,IAAM8U,SAAgC,WAC7D,OAAO,IAAI9b,GAAuBpH,KACjC,CAACA,IACE+pB,EAAsB3b,IAAMsB,YAAN,sBAAkB,4BAAA5pB,EAAA,+EAElBgkC,EAAiBE,YAAY3hB,EAAQvQ,SAFnB,OAEpCE,EAFoC,OAG1CvjB,GAAOoD,KAAKmgB,EAAU6O,IAAtBpyB,GACAk1C,EAAO3xB,EAAU6O,KACjB0H,GAAS,GALiC,gDAO1C95B,GAAOoK,MAAP,KAAApK,GACA85B,GAAS,GARiC,yDAU3C,CAACub,EAAkBzhB,EAAQvQ,UAE9BkW,qBAAU,WACR,IAAM4O,EAAc,SAAC16B,GACnB2nC,EAAQ3nC,IAGV,OADAiB,EAAQzL,GAAG9C,YAAUgN,YAAYS,oBAAqBu6B,GAC/C,WACLz5B,EAAQ05B,IAAIjoC,YAAUgN,YAAYS,oBAAqBu6B,GACvD+M,EAAO,IACPpb,GAAS,MAEV,CAACprB,EAAS0mC,IAEb7b,qBAAU,WACJ9rB,IACF0nC,OAAYv4C,GACZ04C,OAED,CAAC7nC,EAAM6nC,IAiBV,OACE,gBAACtP,GAAA,EAAD,CAAQC,QAhBU,WAClBA,KAe8Bx4B,KAAMA,EAAMurB,SAAS,KAAnD,UACE,eAACkN,GAAA,EAAD,6BACA,gBAACC,GAAA,EAAD,WACE,eAACU,GAAA,EAAD,mDAGA,gBAAC,KAAD,CAAKtK,GAAI,CAAE8D,GAAI,EAAG5D,UAAW,UAA7B,UACG90B,aAAWS,mBAAmBgqB,GAC7B,qCACGhoB,EACC,uCACE,eAAC8tB,GAAA,EAAD,CAAYkO,cAAY,EAAxB,mBACA,eAAC,GAAD,CAAiB3N,QAAQ,WAAWqE,WAAYwY,EAAhD,sBAGF,sDAMJ,eAAC,GAAD,CAAQ7kC,KAAM2hB,IAEhB,gBAACyU,GAAA,EAAD,CAAmBiB,UAAW,EAA9B,6CACkC,eAAC4B,GAAA,EAAD,CAAMC,UAAU,QAAQ2G,KAAK,2BAA2BrJ,OAAO,SAA/D,iCAGnCzX,IAAkBgmB,uBACjB,gBAAC,KAAD,CAAKjZ,GAAI,CAAE8D,GAAI,EAAG5D,UAAW,UAA7B,UACE,gBAAC4J,GAAA,EAAD,CAAanJ,WAAS,EAACzE,QAAQ,WAA/B,UACE,eAACqO,GAAA,EAAD,CAAYC,QAAQ,WAApB,sBACA,eAACT,GAAA,EAAD,CACEphC,GAAG,WACH5H,MAAOkd,EACPwsB,SA9Ce,SAAC/4B,GAC5BknC,EAAYlnC,EAAMg5B,OAAO3pC,QA8CbgI,KAAK,OACLmwC,aAAa,oBAGjB,eAACjP,GAAA,EAAD,CAAQ/N,QAAQ,YAAY8D,GAAI,CAAE8D,GAAI,GAAKjD,QA/CjC,WAAO,IAAD,EACT7R,EAAchR,gBAAgB5S,aAAWS,mBAAmBoS,GAA9B,UAA0C+U,yKAA1C,EAA4E,GAA5E,OAAiF/U,QAAjF,IAAiFA,IAAY,KAExIkhB,GAAaqB,aAAa,qBA4CpB,wCCzGNjF,GAAOC,YAAO,MAAPA,EACX,cAAGC,MAAH,+BAIIG,GAAkBJ,YAAOG,KAAPH,EACtB,cAAGC,MAAH,gEAKW0d,GAAmB,SAACrd,GAC/B,IAkByB92B,EAlBnBo0C,EAAWC,eACX5d,EAAQ6d,eACRvE,EAAUC,aAAcvZ,EAAMwZ,YAAYC,GAAG,OAC7C7d,EAAUwG,KAChB,EAAkCT,IAAMP,UAAS,GAAjD,oBAAO0c,EAAP,KAAkBC,EAAlB,KAkBMC,EAAc,WAClBL,EAAS,YAAD,OAAa/hB,EAAQjZ,WAG/B,OACE,eAAC,GAAD,UACE,eAAC2d,GAAA,EAAD,CAAQC,SAAS,SAAS4D,MAAM,cAAhC,SACE,gBAAC3D,GAAA,EAAD,WACE,oBAAG8X,KAAK,KAAKxS,MAAO,CAAEt7B,OAAQ,QAA9B,SACE,sBAAKmxB,IAAK,8BAA+BsgB,IAAI,OAAOvW,MAAM,SAE5D,eAAC,GAAD,CAAiBjF,QAAQ,KAAK0D,MAAM,OAApC,SACE,oBAAGmU,KAAK,KAAKxS,MAAO,CAAE3B,MAAO,UAAW8Z,eAAgB,WAAxD,SACGxmB,EAAgBC,aAGrB,eAAC8W,GAAA,EAAD,CAAQjK,GAAI,CAAE+D,GAAI,GAAKd,UAAWC,KAAY1zB,GAAG,eAAjD,SACGulC,EACC,qDAIA,eAAC,KAAD,MAGH1d,EAAQjZ,QACP,uCACE,eAAC,GAAD,CAA0B4hB,GAAI,CAAE+D,GAAI,GAAKT,MACvC,eAAC,IAAMqW,SAAP,UACE,6BAAItiB,EAAQjZ,YAEdmlB,UAAU,SAAShB,OAAK,EAJ1B,SAKGwS,EACC,eAAC9X,GAAA,EAAD,CAAMiE,KAAM,eAAC,KAAD,IAA8Bz+B,OArCjCuC,EAqCwDqyB,EAAQjZ,QApChFhT,aAAW6D,0BAA0BjK,EAAS,GAAI,IAoCwCk3B,QAAQ,WAAW2E,QAAS4Y,IAE/G,eAACxP,GAAA,EAAD,CAAQrK,MAAM,UAAUiB,QAAS4Y,EAAjC,SACE,eAAC,KAAD,QAIN,eAACxP,GAAA,EAAD,CAAQrK,MAAM,UAAUiB,QApDV,WACxBxJ,EAAQoH,UAmDE,SACE,eAAC,KAAD,SAIJ,eAACwL,GAAA,EAAD,CAAQ/N,QAAQ,YAAY0D,MAAM,UAAUiB,QA7D7B,WACvB2Y,GAAa,IA4DL,4BAIF,eAAC,GAAD,CAAatoC,KAAMqoC,EAAWV,QAASW,EAAc9P,QAzDpC,WACvB8P,GAAa,c,wE1B7BL1R,O,qBAAAA,I,8BAAAA,Q,KAKL,IAAM8R,GAAgC,SAAC9d,GAC5C,IAAM+d,EAASnb,uBAAY,WACzB,GAAK5C,EAAM/6B,QAASqK,aAAWS,mBAAmBiwB,EAAM/6B,OAGxD,OAAQ+6B,EAAM/yB,OACP++B,GAAiBgS,QACbrnC,eAAaK,cAAcgpB,EAAM/6B,OAEjC0R,eAAaQ,SAAS6oB,EAAM/6B,SAEtC,CAAC+6B,EAAM/6B,MAAO+6B,EAAM/yB,OACvB,EAAsB8zB,mBAAwBgd,KAA9C,oBAAO/sC,EAAP,KAAYitC,EAAZ,KAMA,OAJA/c,qBAAU,WACR+c,EAAOF,OACN,CAAC/d,EAAM/6B,MAAO+6B,EAAM/yB,KAAM8wC,KAExB/sC,GAAO1B,aAAWS,mBAAmBiB,GAEtC,qCACGgvB,EAAMQ,WAMX,eAAC6Q,GAAA,EAAD,CAAMC,UAAU,QAAQ2G,KAAMjnC,EAAK49B,OAAO,SAA1C,SACG5O,EAAMQ,Y2BtBP4P,GAAe1Q,YAAO2Q,KAAP3Q,EAAe,cAAGC,MAAH,2CACTvI,EAAgBM,YADP,8JAS9B4Y,GAAkB5Q,YAAO6Q,KAAP7Q,EAAkB,cAAGC,MAAH,6DAIpC6Q,GAA8C,SAACxQ,GAA+B,IAAD,UAatD7iB,EAZrB4H,EAAQ8rB,aAAoCjU,GAAgB,CAChEyN,UAAW,CACTx9B,GAAImzB,EAAMqH,KAAKpoB,OAAOrR,YAExB08B,YAAa,iBAETyG,EAAa,IAAI9E,GAEjBiS,EAAkB,SAACjjC,GACvB,OAAO81B,EAAWQ,yBAAyBR,EAAWS,YAAYv2B,KAsCpE,OACE,gBAACi2B,GAAA,EAAD,CAAUhN,GAAI,CAAE,mCAAoC,CAAE4C,OAAQ,IAA9D,UACE,gBAACyJ,GAAA,EAAD,CAAWpJ,UAAU,KAAKgK,MAAM,MAAhC,UACE,eAAC,KAAD,CAAiB/L,KAAM2F,GAASY,qBAAqB3L,EAAMqH,KAAKroB,UAAsCghB,EAAMqH,KAAKz9B,UADnH,IAC+H,6BAtB9G,WAEnB,OADkBo2B,EAAMqH,KAAKroB,WAE3B,KAAKlX,YAAU4F,cAAcI,MAC3B,IAAKkyB,EAAMqH,KAAKz9B,QAAUo2B,EAAMqH,KAAKz9B,OAAOR,IAAI,GAC9C,OAAO0C,aAAW2C,KAEpB,MACF,KAAK3G,YAAU4F,cAAcO,IAC3B,IAAK+xB,EAAMqH,KAAKz9B,QAAUo2B,EAAMqH,KAAKz9B,OAAOR,IAAI,GAC9C,OAAO0C,aAAW6C,SAMxB,OAAO5C,iBAAei0B,EAAMqH,KAAKroB,WAAW3W,KAMyF+oC,QAEnI,eAACb,GAAA,EAAD,UACE,gBAACc,GAAA,EAAD,CAAMC,UAAU,QAAQnK,UAAWC,KAAY1zB,GAAE,gBAAWssB,EAAMqH,KAAKpoB,QAAU8qB,QAAQ,OAAOf,WAAW,SAA3G,UACE,eAAC,GAAD,CAAc5I,QAAQ,UAAU9E,IAAK1a,UAAQC,WAAR,UAAmBkE,EAAMxU,YAAzB,aAAmB,EAAY2hB,KAAKpR,MAApC,UAA2CiE,EAAMxU,YAAjD,aAA2C,EAAY2hB,KAAKnR,OAEhG5U,kBAAgBC,UAHnB,KAGgC4zB,EAAMqH,KAAKpoB,YAG7C,eAACsxB,GAAA,EAAD,WACG,UAAAvQ,EAAMqH,KAAKz9B,cAAX,eAAmBmP,GAAG,IACrB,qCACE,eAAC,GAAD,CAA0ByuB,OAlDTrqB,EAkDkC6iB,EAAMqH,KAAKz9B,OAjD/DoT,YAAUiB,kBAAkBd,IAiD3B,SACE,gCA/CO,SAACA,GAClB,OAAOH,YAAUe,WAAWZ,GA8CXY,CAAWiiB,EAAMqH,KAAKz9B,cAIjC,iCAIJ,eAAC2mC,GAAA,EAAD,UACE,eAAC,GAAD,CAActjC,KAAM++B,GAAiBgS,QAAS/4C,MAAO+6B,EAAMqH,KAAKnoB,YAAhE,SACE,eAAC,GAAD,CAA0BsoB,MAAK,UAAExH,EAAMqH,KAAKnoB,mBAAb,QAA4B,GAA3D,SACE,gCAAO5P,aAAW6D,0BAA0B6sB,EAAMqH,KAAKnoB,YAAa,GAAI,WAI9E,eAACqxB,GAAA,EAAD,UACE,eAAC,GAAD,CAActjC,KAAM++B,GAAiBgS,QAAS/4C,MAAO+6B,EAAMqH,KAAK/oB,UAAhE,SACE,eAAC,GAAD,CAA0BkpB,MAAK,UAAExH,EAAMqH,KAAK/oB,iBAAb,QAA0B,GAAzD,SACE,gCAAOhP,aAAW6D,0BAA0B6sB,EAAMqH,KAAK/oB,UAAW,GAAI,WAI5E,eAACiyB,GAAA,EAAD,CAAWvB,MAAM,QAAjB,SAjEc,WAChB,IAAMlU,EAAe3D,IACrB,QAAI6I,EAAMqH,KAAKroB,YAAclX,YAAU4F,cAAcG,OAASitB,EAAaqjB,kBAGpEne,EAAMqH,KAAKtoB,mBAAmB3V,IAAI0xB,EAAaqjB,iBA6DjDC,GACC,qCACGF,EAAgBle,EAAMqH,KAAKpsB,UAAUiP,aAGxC,eAAC,GAAD,CAAcjd,KAAM++B,GAAiBqS,YAAap5C,MAAO+6B,EAAMqH,KAAKvoB,iBAApE,SACGo/B,EAAgBle,EAAMqH,KAAKpsB,UAAUiP,mBAkBrCo0B,GAA6B,SAACte,GAAkB,IAAD,IACpDgS,EAAe,kBACrB,OACE,eAAChO,GAAA,EAAD,CACEn3B,GAAG,aACH44B,MAAO,CACLt7B,OAAM,UAAE61B,EAAM71B,cAAR,QAAkB,IACxBm+B,SAAU,OACVvE,gBAAiB,4BALrB,SAQG/D,EAAMoS,UAAU7qC,OAAS,GAAKy4B,EAAMxK,OAAOjuB,OAAS,EACnD,eAAC,KAAD,CACE+hC,WAAU,UAAEtJ,EAAMxK,OAAOjuB,cAAf,QAAyB,EACnC1B,KAAMm6B,EAAMuJ,mBACZC,QAASxJ,EAAMwJ,QACfC,OACE,eAACb,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAGC,eAAe,SAASC,WAAW,SAA/D,SACE,eAAC,GAAD,CAAkBpE,QAAS5E,EAAM4E,QAAS7yB,MAAOiuB,EAAMjuB,MAAOg7B,MAAO/M,EAAMxK,OAAOjuB,OAAQyC,QAASgoC,MAGvGrI,iBAAiB,aATnB,SAWE,eAAC0I,GAAA,EAAD,UACE,gBAACC,GAAA,EAAD,CAAOC,cAAY,EAAnB,UACE,eAACC,GAAA,EAAD,UACE,gBAACtB,GAAA,EAAD,WACE,eAAC,GAAD,IACA,eAAC,GAAD,UAAiB,wCACjB,eAAC,GAAD,UAAiB,0CACjB,eAAC,GAAD,UAAiB,wCACjB,eAAC,GAAD,UAAiB,sCACjB,eAAC,GAAD,CAAiBlC,MAAM,QAAvB,SAA+B,6CAGnC,gBAACyD,GAAA,EAAD,WACGzS,EAAMoS,UAAUjqC,KAAI,SAACrC,GAAD,OACnB,eAAC,GAAD,CAA0CuhC,KAAMvhC,GAAhD,qBAAkCA,EAAE+G,QAErCmzB,EAAMxK,OAAOrtB,KAAI,SAACrC,GAAD,OAChB,eAAC,GAAD,CAAsCuhC,KAAMvhC,GAA5C,iBAA8BA,EAAE+G,kBAM1C,eAAC+7B,GAAA,EAAD,CAAM1E,GAAI,CAAE/5B,OAAQ,QAAU0+B,WAAS,EAACC,QAAS,EAAGC,eAAe,SAASC,WAAW,SAAvF,SACE,eAAC,GAAD,CAAkBpE,QAAS5E,EAAM4E,QAAS7yB,MAAOiuB,EAAMjuB,MAAOg7B,MAAO/M,EAAMxK,OAAOjuB,OAAQyC,QAASgoC,SCxLvGrqC,GAASC,sBAEF22C,GAAsC,SAACve,GAClD,IACA,EAAkCe,oBAAS,GAA3C,oBAAO0H,EAAP,KAAkBmK,EAAlB,KACA,EAA8B7R,oBAAS,GAAvC,oBAAOyI,EAAP,KAAgBqJ,EAAhB,KACA,EAA0B9R,wBAAcx8B,GAAxC,oBAAOwN,EAAP,KAAc0vB,EAAd,KACA,EAA4BV,mBAAgC,IAA5D,oBAAOvL,EAAP,KAAeud,EAAf,KACA,EAAkChS,mBAAgC,IAAlE,oBAAOqR,EAAP,KAAkBY,EAAlB,KACM/I,EAAUa,KACVz0B,EAAU/B,uBAEVyQ,EAAQ8rB,aAAoDjT,GAAyB,CACzFyM,UAAW,CACTlN,OAAQ,EACRjY,MAZU,GAcZolB,YAAa,eACbwG,YAAa,SAACvgC,GACZwiC,EAAUxiC,EAAK0tB,aAAazI,OAAOrtB,KAAI,SAAArC,GAAC,OAAIoY,gBAAcQ,YAAY5Y,UAI1Eo7B,qBAAU,WACR0R,EAAa7tB,EAAM6f,WAClB,CAAC7f,EAAM6f,UAEV1D,qBAAU,WACRO,EAAS1c,EAAMhT,SACd,CAACgT,EAAMhT,QAEV,IAAMw3B,EAAkB,uCAAG,gCAAAvwB,EAAA,6DACzBrR,GAAOoD,KAAK,qBAAsByqB,EAAOjuB,OAAzCI,GACM8tB,EAFmB,UAEU1Q,EAAMxU,YAFhB,aAEU,EAAY0tB,aAAaxI,YAAY7nB,WACxEglC,GAAa,GAHY,kBAKF3I,EAAQS,eAAelV,EAAOjuB,OAjCzC,EAiCwDkuB,GAL3C,OAKjBzvB,EALiB,OAMvB6sC,EAAW7sC,EAAOuK,KAAK0tB,aAAazI,OAAOjuB,QAlCjC,GAmCNvB,EAAOuK,KAAK0tB,aAAazI,OAAOjuB,OAAS,GAC3CwrC,EAAU,GAAD,oBACJvd,GADI,aAEJxvB,EAAOuK,KAAK0tB,aAAazI,OAAOrtB,KAAI,SAAArC,GAAC,OAAIoY,gBAAcQ,YAAY5Y,SAVnD,kDAcvB27B,EAAS,EAAD,IAde,QAgBzBmR,GAAa,GAhBY,0DAAH,qDAmBlBM,EAAUnuB,EAAMmuB,QAEhBC,EAAUvQ,uBAAY,WAC1Bj7B,GAAOoD,KAAK,6BAAZpD,GACAurC,IACAF,EAAa,MACZ,CAACE,IAEJhS,qBAAU,WACR,IAAM4O,EAAc,SAAC76B,GACfA,IAAUnN,YAAUkY,cAAc4jB,QACpCuP,KAIJ,OADA98B,EAAQzL,GAAG9C,YAAUgN,YAAYI,0BAA2B46B,GACrD,WACLz5B,EAAQ05B,IAAIjoC,YAAUgN,YAAYI,0BAA2B46B,MAE9D,CAACz5B,EAAS88B,IAEb,IAAME,EAAczQ,uBAAY,SAAC98B,GAC/BktC,EAAa,CACX90B,gBAAcQ,YAAY5Y,IADhB,oBAEPssC,OAEJ,CAACA,IAeJ,OAbAlR,qBAAU,WACR,IAAM4O,EAAc,SAAChqC,GACnB6B,GAAOoD,KAAK,iBAAkBjF,EAA9B6B,GACA0rC,EAAYvtC,IAId,OAFA6B,GAAOoD,KAAK,aAAcjD,YAAUgN,YAAYiB,YAAhDpO,GACA0O,EAAQzL,GAAG9C,YAAUgN,YAAYiB,YAAa+5B,GACvC,WACLnoC,GAAOoD,KAAK,cAAejD,YAAUgN,YAAYiB,YAAjDpO,GACA0O,EAAQ05B,IAAIjoC,YAAUgN,YAAYiB,YAAa+5B,MAEhD,CAACz5B,EAASg9B,IAGX,eAAC,GAAD,CACE7d,OAAQA,EACR4c,UAAWA,EACXrgC,MAAOA,EACP6yB,QAAS6D,EACTe,QAASA,EACTr/B,OAAQ,IACRo/B,mBAAoBA,K,2FClGbiV,GAAyC,WAAO,IAAD,IAC1D,EAA4Bzd,mBAAqCl1B,2BAAjE,oBAAO4yC,EAAP,KAAeC,EAAf,KACMroC,EAAU/B,uBAEVqqC,EAAkB9N,aAA4BpU,GAA2B,CAC7E6N,YAAa,iBAGTsU,EAAY,SAAC3oC,EAAuCC,GACxDG,EAAQL,4BAA4BC,EAAWC,IAqBjD,OACE,gBAAC0yB,GAAA,EAAD,CAAMC,WAAS,EAAC3E,GAAI,CAAEqE,GAAI,GAAKO,QAAS,EAAxC,UACE,eAACF,GAAA,EAAD,CAAMvB,MAAI,EAAC6B,GAAI,IACf,eAACN,GAAA,EAAD,CAAMvB,MAAI,EAAC4B,GAAI,GAAIC,GAAI,EAAvB,SACE,eAAC2V,GAAA,EAAD,CACEC,UAAQ,EACRC,UAAQ,EACRlyC,GAAG,sBACHmyC,QAAO,oBAAEL,EAAgBpuC,YAAlB,aAAE,EAAsB0sB,sBAAxB,QAA0C,GACjDgiB,eAAgB,SAACC,GAAD,OAAYA,GAC5B9d,KAAK,QACLyD,WAAW,EACX8J,SAxBmB,SAAC/4B,EAAuC3Q,GACjE,IAAMiR,EAAqC,2BAAQuoC,GAAR,IAAgBpvC,OAAQpK,EAAM2zC,KAAK,OAC9E8F,EAAUxoC,GACV0oC,EAAUH,EAAQvoC,IAsBZipC,uBAAqB,EACrBC,YAAa,SAAC/xB,GAAD,OACX,eAACgyB,GAAA,EAAD,2BACMhyB,GADN,IAEE1mB,MAAM,iBAKd,eAACiiC,GAAA,EAAD,CAAMvB,MAAI,EAAC4B,GAAI,GAAIC,GAAI,EAAvB,SACE,eAACoW,GAAA,EAAD,UACE,gBAAChM,GAAA,EAAD,CAAOC,UAAU,MAAMxK,eAAe,MAAMD,QAAS,EAArD,UACE,gBAACkF,GAAA,EAAD,CAAa5M,KAAK,QAAlB,UACE,eAACqN,GAAA,EAAD,CAAY5hC,GAAG,sBAAf,qBACA,eAAC0yC,GAAA,EAAD,CACEC,QAAQ,sBACR3yC,GAAG,gBACH5H,MAAOw5C,EAAOtvC,OACdxI,MAAM,UACNgoC,SAlDa,SAAC/4B,GAC1B,IAAMM,EAAqC,2BAAQuoC,GAAR,IAAgBtvC,OAAQyG,EAAMg5B,OAAO3pC,QAChFy5C,EAAUxoC,GACV0oC,EAAUH,EAAQvoC,IA0CR,SAOGlK,gBAAc7D,KAAI,SAAArC,GAAC,OAClB,gBAAC25C,GAAA,EAAD,CAAuBx6C,MAAOa,EAAEmH,KAAhC,UAAuCnH,EAAEuC,KAAzC,SAAevC,EAAEmH,cAYvB,gBAACyyC,GAAA,EAAD,CAAmBte,KAAK,QAAQue,WAAS,EAAC16C,MAAOw5C,EAAOrvC,QAASu/B,SArD/C,SAAC/4B,EAAkD3Q,GAC7E,IAAMiR,EAAqC,2BAAQuoC,GAAR,IAAgBrvC,QAASnK,IACpEy5C,EAAUxoC,GACV0oC,EAAUH,EAAQvoC,IAkDV,UACE,eAAC0pC,GAAA,EAAD,CAAc36C,MAAO6C,YAAUoF,QAAQC,IAAvC,SACE,eAAC,KAAD,CAAU+2B,GAAI,CAAEmT,UAAW,sBAE7B,eAACuI,GAAA,EAAD,CAAc36C,MAAO6C,YAAUoF,QAAQE,KAAvC,SACE,eAAC,KAAD,oBClFVzF,GAASC,sBAEFi4C,GAAmC,SAAC7f,GAAgB,IAAD,IAE9D,EAAkCe,oBAAS,GAA3C,oBAAO0H,EAAP,KAAkBmK,EAAlB,KACA,EAA8B7R,oBAAS,GAAvC,oBAAOyI,EAAP,KAAgBqJ,EAAhB,KACA,EAA0B9R,wBAAcx8B,GAAxC,oBAAOwN,EAAP,KAAc0vB,EAAd,KACA,EAA4BV,mBAAqC,CAC/D5xB,OAAQtD,0BAAwBsD,OAChCC,QAASvD,0BAAwBuD,QACjCC,OAAQ,KAHV,oBAAOyJ,EAAP,KAAegnC,EAAf,KAKMzpC,EAAU/B,uBAEVyQ,EAAQ8rB,aAAsChU,GAAiB,CACnEwN,UAAW,CACTlN,OAAQ,EACRjY,MAdU,EAeVzM,KAAMK,EAAO3J,OACbuJ,MAAOI,EAAO1J,QACdC,OAAQyJ,EAAOzJ,QAEjBi7B,YAAa,eACbwG,YAAa,SAACvgC,GACZsiC,EAAWtiC,EAAKoI,MAAMpR,QArBZ,MAyBd25B,qBAAU,WACR0R,EAAa7tB,EAAM6f,WAClB,CAAC7f,EAAM6f,UAEV1D,qBAAU,WACRO,EAAS1c,EAAMhT,SACd,CAACgT,EAAMhT,QAEV,IAAMw3B,EAAkB,uCAAG,oCAAAvwB,EAAA,6DACnBgqB,GAAiB,IAAI9nB,MAAOuD,UAC5Bk1B,EAFmB,oBAEH5uB,EAAMxU,YAFH,aAEH,EAAYoI,MAAMpR,cAFf,QAEyB,EAClDqrC,GAAa,GAHY,kBAKF7tB,EAAM6uB,UAAU,CACnCvJ,UAAW,CACTlN,OAAQwW,EACRzuB,MAzCM,KAiCa,OAKjBlf,EALiB,OAWvB2B,GAAOoD,KAAP,oCAAwC,IAAImQ,MAAOuD,UAAYukB,EAA/D,MAAAr7B,GACAkrC,EAAW7sC,EAAOuK,KAAKoI,MAAMpR,QA7CnB,GAiCa,kDAcvBk6B,EAAS,EAAD,IAde,QAgBzBmR,GAAa,GACbjrC,GAAOoD,KAAP,oCAAwC,IAAImQ,MAAOuD,UAAYukB,EAA/D,MAAAr7B,GAjByB,0DAAH,qDAoBlBurC,EAAUnuB,EAAMmuB,QA4BtB,OA1BAhS,qBAAU,WACRgS,EAAQ,CACN/V,OAAQ,EACRjY,MA1DU,EA2DVzM,KAAMK,EAAO3J,OACbuJ,MAAOI,EAAO1J,QACdC,OAAQyJ,EAAOzJ,WAEhB,CAACyJ,EAAQo6B,IAEZhS,qBAAU,WACR,IAAM4O,EAAc,SAAC75B,EAAuCC,GAC1D28B,GAAW,GACXiN,EAAU,CACR3wC,OAAQ+G,EAAU/G,OAClBC,QAAS8G,EAAU9G,QACnBC,OAAQ6G,EAAU7G,UAItB,OADAgH,EAAQzL,GAAG9C,YAAUgN,YAAYqB,wBAAyB25B,GACnD,WACLnoC,GAAOoD,KAAK,cAAejD,YAAUgN,YAAYqB,wBAAjDxO,GACA0O,EAAQ05B,IAAIjoC,YAAUgN,YAAYqB,wBAAyB25B,MAE5D,CAACz5B,IAGF,uCACE,eAAC,GAAD,IACA,eAAC,GAAD,CACEsb,MAAK,oBAAE5M,EAAMxU,YAAR,aAAE,EAAYoI,aAAd,QAAuB,GAC5B4wB,mBAAoBA,EACpBx3B,MAAOA,EACP02B,UAAWA,EACXe,QAASA,Q,gCCrFjB,SAASuW,GAAS/f,GAChB,IAAQQ,EAAqCR,EAArCQ,SAAUv7B,EAA2B+6B,EAA3B/6B,MAAO6F,EAAoBk1B,EAApBl1B,MAAUk1C,EAAnC,aAA6ChgB,EAA7C,IAEA,OACE,8CACEigB,KAAK,WACLC,OAAQj7C,IAAU6F,EAClB+B,GAAE,+BAA0B/B,GAC5B,4CAAoCA,IAChCk1C,GALN,aAOG/6C,IAAU6F,GACT,eAACm5B,GAAA,EAAD,CAAKC,GAAI,CAAEr/B,EAAG,GAAd,SACG27B,OAOJ,IAAM2f,GAA8B,SAACngB,GAC1C,IAAMsd,EAAWC,eAUX6C,EATU1M,eAAR2M,MAEMv4C,YAAUyY,eAAe+/B,SAC5B,EAEA,EAKX,EAA0Bhf,IAAMP,SAAiBqf,GAAjD,oBAAOn7C,EAAP,KAAcs7C,EAAd,KACIH,IAAiBn7C,GACnBs7C,EAASH,GAeX,OACE,uCACE,eAACvgB,GAAA,EAAD,CAAYO,QAAQ,KAAK+G,UAAU,MAAM/C,UAAU,SAASF,GAAI,CAAEkF,GAAI,GAAK2E,cAAY,EAAvF,yBAGA,eAAC9J,GAAA,EAAD,CAAKC,GAAI,CAAE8S,aAAc,EAAGwJ,YAAa,WAAzC,SACE,gBAACC,GAAA,EAAD,CAAMx7C,MAAOA,EAAO0pC,SAlBL,SAAC/4B,EAA6B8qC,GAEjD,GADAH,EAASG,GAEF,IADCA,EAEJpD,EAAS,8BAGTA,EAAS,iBAWT,UACE,eAACqD,GAAA,EAAD,CAAKvb,KAAM,eAAC,KAAD,IAAgBz+B,MAAM,QAAQ1B,MAAO,IAChD,eAAC07C,GAAA,EAAD,CAAKvb,KAAM,eAAC,KAAD,IAAkBz+B,MAAM,WAAW1B,MAAO,SAGzD,gBAACy7B,GAAA,EAAD,CAAWwD,GAAI,CAAEmF,GAAI,GAAK1I,SAAS,KAAnC,UACE,eAACof,GAAD,CAAU96C,MAAOA,EAAO6F,MAAO,EAA/B,SACE,eAAC,GAAD,MAEF,eAACi1C,GAAD,CAAU96C,MAAOA,EAAO6F,MAAO,EAA/B,SACE,eAACm5B,GAAA,EAAD,CAAKwL,UAAW,EAAhB,SACE,eAAC,GAAD,eC/ECmR,GAA4B,SAAC5gB,GACxC,OACE,0DCEE6gB,GAAgBnhB,YAAOuH,KAAPvH,EACpB,cAAGC,MAAH,gGAOImV,GAAiBpV,YAAO,MAAPA,EACrB,cAAGC,MAAH,sEAOIxE,GAAQuE,YAAO,MAAPA,EACZ,cAAGC,MAAH,wKAMyBvI,EAAgBM,YANzC,YAUIopB,GAAMphB,YAAO,MAAPA,EACV,cAAGC,MAAH,4KAgBWoH,GAA6B,SAAC/G,GAAkB,IAAD,EAC1D,EAAgCe,mBAAS,IAAzC,oBAAOggB,EAAP,KAAiBC,EAAjB,KAMA,OAJA9f,qBAAU,WACR8f,EAAYpgC,UAAQC,WAAWmf,EAAMlf,MAAOkf,EAAMjf,QACjD,CAACif,EAAMlf,MAAOkf,EAAMjf,MAGrB,eAAC8/B,GAAD,CAAe3c,GAAI,CAAE+c,UAAS,UAAEjhB,EAAMihB,iBAAR,QAAqB,SAAnD,SACE,eAAC,GAAD,UACE,eAAC,GAAD,UACE,eAACH,GAAD,CAAK5c,GAAI,CAAEkE,gBAAgB,QAAD,OAAU2Y,EAAV,gBCpD9Bp5C,GAASC,sBAEFs5C,GAAuB,WAClC,MAAwBngB,oBAAS,GAAjC,oBAAO3rB,EAAP,KAAa2nC,EAAb,KACA,EAA4Bhc,oBAAU,GAAtC,oBAAO9hB,EAAP,KAAekiC,EAAf,KACA,EAAkCpgB,mBAAS,IAA3C,oBAAOqgB,EAAP,KAAkBC,EAAlB,KACA,EAA8BtgB,mBAAS,IAAvC,oBAAOugB,EAAP,KAAgBC,EAAhB,KACMlrC,EAAU/B,uBACV21B,EAAU4K,KACVtZ,EAAUwG,KAEhBb,qBAAU,WACR,IAAM4O,EAAW,uCAAG,WAAOhqC,GAAP,mBAAAkT,EAAA,yDAEdlT,EAAEkZ,YAAclX,YAAU4F,cAAcG,OAAQ,UAAA/H,EAAEwY,iBAAF,eAAa+N,kBAAb,UAA+BkP,EAAQjZ,eAAvC,aAA+B,EAAiB+J,eAFlF,uBAGhB1kB,GAAOoD,KAAK,mBAAZpD,GAHgB,SAIGsiC,EAAQmK,QAAQtuC,EAAEmZ,OAAOrR,YAJ5B,OAIVskB,EAJU,OAKhBivB,EAAUr7C,EAAEmZ,QACZoiC,EAAanvB,EAAK3hB,KAAK2hB,KAAKpR,OAC5BygC,EAAWrvB,EAAK3hB,KAAK2hB,KAAKnR,KAC1Bg8B,GAAQ,GARQ,2CAAH,sDAYjB,OADA1mC,EAAQzL,GAAG9C,YAAUgN,YAAYiB,YAAa+5B,GACvC,WACLz5B,EAAQ05B,IAAIjoC,YAAUgN,YAAYiB,YAAa+5B,MAEhD,CAACz5B,EAAS4zB,EAAS1O,EAAQjZ,QAASy6B,IAEvC7b,qBAAU,WACJ9rB,GAAO,WAQT,IAPA,IAOStK,EAAQ,EAAGA,EAAQ,EAAGA,IAC7BuF,YAAW,WAPX2jC,aAAS,CACPC,cAAe,IACfC,OAAQ,IACRsN,OAAQ,SAMC,IAAR12C,GAXI,KAcV,CAACsK,IAEJ,IAAM+3B,EAAc,WAClBkU,EAAa,IACbtE,GAAQ,IAGV,OAAI99B,EAAS,EAET,+BAMF,gBAAC0uB,GAAA,EAAD,CACEv4B,KAAMA,EACNqsC,mBAAoB,IACpBC,aAAW,EACX9T,QAAST,EACT1H,MAAO,CAAE+b,OAAQ,MALnB,UAOE,eAAC3T,GAAA,EAAD,yCACA,gBAACC,GAAA,EAAD,WACE,gBAACU,GAAA,EAAD,CAAmBmT,cAAe,EAAlC,0CAC+B,gBAACtQ,GAAA,EAAD,CAAMC,UAAU,QAAQnK,UAAWC,KAAY1zB,GAAE,gBAAWuL,GAAU8lB,QAASoI,EAA/E,UAA6FhhC,kBAAgBC,UAA7G,KAA0H6S,QAEzJ,eAAC,GAAD,CAAW6B,MAAOsgC,EAAWrgC,IAAKugC,EAASL,UAAU,aAEvD,gBAAC/S,GAAA,EAAD,WACE,eAACC,GAAA,EAAD,CAAQpJ,QAASoI,EAAjB,mBAGA,eAACgB,GAAA,EAAD,CAAQhH,UAAWC,KAAY1zB,GAAE,mBAAc6nB,EAAQjZ,SAAW8d,QAAQ,YAAY2E,QAASoI,EAA/F,6BC9EFxlC,GAASC,sBAMFg6C,GAAgC,SAAC5hB,GAC5C,IACA,EAAkCe,oBAAS,GAA3C,oBAAO0H,EAAP,KAAkBmK,EAAlB,KACA,EAA8B7R,oBAAS,GAAvC,oBAAOyI,EAAP,KAAgBqJ,EAAhB,KACA,EAA0B9R,wBAAcx8B,GAAxC,oBAAOwN,EAAP,KAAc0vB,EAAd,KACA,EAA4BV,mBAAgC,IAA5D,oBAAOvL,EAAP,KAAeud,EAAf,KACA,EAAkChS,mBAAgC,IAAlE,oBAAOqR,EAAP,KAAkBY,EAAlB,KACM/I,EAAU4K,KACVx+B,EAAU/B,uBAEVyQ,EAAQ8rB,aAAgDnU,GAAuB,CACnF2N,UAAW,CACTx9B,GAAImzB,EAAMqH,KAAKx6B,GACfswB,OAAQ,EACRjY,MAbU,GAeZolB,YAAa,eACbwG,YAAa,SAACvgC,GACZwiC,EAAUxiC,EAAK2sB,WAAW1H,OAAOrtB,KAAI,SAAArC,GAAC,OAAIoY,gBAAcQ,YAAY5Y,UAIxEo7B,qBAAU,WACR0R,EAAa7tB,EAAM6f,WAClB,CAAC7f,EAAM6f,UAEV1D,qBAAU,WACRO,EAAS1c,EAAMhT,SACd,CAACgT,EAAMhT,QAEV,IAAMw3B,EAAkB,uCAAG,gCAAAvwB,EAAA,6DACzBrR,GAAOoD,KAAK,qBAAsByqB,EAAOjuB,OAAzCI,GACM8tB,EAFmB,UAEU1Q,EAAMxU,YAFhB,aAEU,EAAY2sB,WAAWzH,YAAY7nB,WACtEglC,GAAa,GAHY,kBAKF3I,EAAQS,eAAe1K,EAAMqH,KAAKx6B,GAAI2oB,EAAOjuB,OAlCxD,EAkCuEkuB,GAL1D,OAKjBzvB,EALiB,OAMvB6sC,EAAW7sC,EAAOuK,KAAK2sB,WAAW1H,OAAOjuB,QAnC/B,GAoCNvB,EAAOuK,KAAK2sB,WAAW1H,OAAOjuB,OAAS,GACzCwrC,EAAU,GAAD,oBACJvd,GADI,aAEJxvB,EAAOuK,KAAK2sB,WAAW1H,OAAOrtB,KAAI,SAAArC,GAAC,OAAIoY,gBAAcQ,YAAY5Y,SAVjD,kDAcvB27B,EAAS,EAAD,IAde,QAgBzBmR,GAAa,GAhBY,0DAAH,qDAmBlBM,EAAUnuB,EAAMmuB,QAEhBC,EAAUvQ,uBAAY,WAC1Bj7B,GAAOoD,KAAK,2BAAZpD,GACAurC,IACAF,EAAa,MACZ,CAACE,IAEJhS,qBAAU,WACR,IAAM4O,EAAc,SAAC76B,GACfA,IAAUnN,YAAUkY,cAAc4jB,QACpCuP,KAIJ,OADA98B,EAAQzL,GAAG9C,YAAUgN,YAAYI,0BAA2B46B,GACrD,WACLz5B,EAAQ05B,IAAIjoC,YAAUgN,YAAYI,0BAA2B46B,MAE9D,CAACz5B,EAAS88B,IAEb,IAAME,EAAczQ,uBAAY,SAAC98B,GAC/BktC,EAAa,CACX90B,gBAAcQ,YAAY5Y,IADhB,oBAEPssC,OAEJ,CAACA,IAiBJ,OAfAlR,qBAAU,WACR,IAAM4O,EAAc,SAAChqC,GACnB6B,GAAOoD,KAAK,eAAgBjF,EAA5B6B,GACI7B,EAAEmZ,SAAWpP,SAASmwB,EAAMqH,KAAKx6B,KACnCwmC,EAAYvtC,IAKhB,OAFA6B,GAAOoD,KAAK,aAAcjD,YAAUgN,YAAYiB,YAAhDpO,GACA0O,EAAQzL,GAAG9C,YAAUgN,YAAYiB,YAAa+5B,GACvC,WACLnoC,GAAOoD,KAAK,cAAejD,YAAUgN,YAAYiB,YAAjDpO,GACA0O,EAAQ05B,IAAIjoC,YAAUgN,YAAYiB,YAAa+5B,MAEhD,CAACz5B,EAAS2pB,EAAMqH,KAAKx6B,GAAIwmC,IAG1B,eAAC,GAAD,CACE7d,OAAQA,EACR4c,UAAWA,EACXrgC,MAAOA,EACP6yB,QAAS6D,EACTe,QAASA,EACTD,mBAAoBA,K,UCpGpB5hC,GAASC,sBAqBFi6C,GAAmC,SAAC7hB,GAC/C,IAAMoC,EAAUd,IAAMe,QAAO,GAC7B,EAAgCtB,oBAAkB,GAAlD,oBAAO+gB,EAAP,KAAiBC,EAAjB,KACA,EAAkBhhB,oBAAkB,GAA7BihB,EAAP,qBACA,EAA8CjhB,mBAA0B,CACtEkhB,SAAS,EACTC,SAAS,EACTC,WAAW,EACXC,SAAS,EACTC,UAAU,EACVC,eAAe,EACfC,eAAe,EACfC,gBAAgB,EAChBC,gBAAgB,IATlB,oBAAOC,EAAP,KAAwBC,EAAxB,KAWA,EAAsC5hB,mBAAoC,CACxE9zB,KAAMnF,YAAUwY,eAAeuxB,QAC/Bz8B,MAAM,EACNiyB,KAAMrH,EAAMqH,OAHd,oBAAOyK,EAAP,KAAoBC,EAApB,KAKMxW,EAAUwG,KACVkI,EAAUa,KAEhBxJ,IAAMJ,WAAU,WAEd,OADAkB,EAAQ3wB,SAAU,EACX,WACL2wB,EAAQ3wB,SAAU,KAEnB,IAEHyvB,qBAAU,WACR,GAAIkB,EAAQ3wB,QAAS,CAAC,IAAD,gBACfk/B,GAAU,UAAA3Q,EAAMqH,KAAKjoB,aAAX,eAAkBiN,kBAAlB,UAAoCkP,EAAQjZ,eAA5C,aAAoC,EAAiB+J,eAC7DpX,EAAyB,CAC7BgtC,SAAS,EACTC,SAAS,EACTC,WAAW,EACXC,SAAS,EACTC,UAAU,EACVC,eAAe,EACfC,eAAe,EACfC,gBAAgB,EAChBC,gBAAgB,GAGdziB,EAAMqH,KAAKjoB,QAAU9P,aAAWS,mBAAmBiwB,EAAMqH,KAAKjoB,OAChE2iC,GAAY,GAEZA,GAAY,GAEV/hB,EAAMvY,gBAAkBnY,aAAWS,mBAAmBwrB,EAAQjZ,WAChErN,EAAMgtC,SAAU,GAEbtR,IAAW3Q,EAAMqH,KAAK/tB,QAAUhK,aAAWS,mBAAmBiwB,EAAMqH,KAAK/tB,MAAMsG,cAAe,UAAAogB,EAAMqH,KAAK/tB,MAAMsG,kBAAjB,eAA6ByM,kBAA7B,UAA+CkP,EAAQjZ,eAAvD,aAA+C,EAAiB+J,iBAC7J2T,EAAMqH,KAAK/tB,MAAMC,UAAUR,GAAG,GAChC9D,EAAMitC,SAAU,EAEhBjtC,EAAMktC,WAAY,GAGjBxR,IAAW,UAAA3Q,EAAMqH,KAAKh5B,WAAX,eAAgBoR,OAAO4M,kBAAvB,UAAyCkP,EAAQjZ,eAAjD,aAAyC,EAAiB+J,iBACxEpX,EAAMmtC,SAAU,GAEdzR,IAAY3Q,EAAMqH,KAAK/tB,QACzBrE,EAAMotC,UAAW,GAEf1R,GAAW3Q,EAAMqH,KAAKh5B,MACxB4G,EAAMqtC,eAAgB,GAEnB3R,IAAW,UAAA3Q,EAAMqH,KAAKh5B,WAAX,eAAgBoR,OAAO4M,kBAAvB,UAAyCkP,EAAQjZ,eAAjD,aAAyC,EAAiB+J,iBACxEpX,EAAMstC,eAAgB,GAEpB5R,GAAW3Q,EAAMqH,KAAK/tB,QACpB0mB,EAAMqH,KAAK/tB,MAAMC,UAAUR,GAAG,GAChC9D,EAAMutC,gBAAiB,EAEvBvtC,EAAMwtC,gBAAiB,GAG3BE,EAAmB1tC,MAEpB,CAAC+qB,EAAMvY,cAAeuY,EAAMqH,KAAM9L,EAAQjZ,UAE7C,IAAMsgC,EAAkB,uCAAG,sBAAA5pC,EAAA,6DACzBqqB,GAAaoK,eAAe,sBADH,kBAIjBxD,EAAQziB,qBAJS,sDAMvB7f,GAAOoK,MAAP,KAAApK,GANuB,wDAAH,qDAUlBqpC,EAAgB,uCAAG,sBAAAh4B,EAAA,kEAEhBgnB,EAAMqH,KAAK/tB,MAFK,sBAGb,IAAIjQ,MAAJ,UAAa8C,kBAAgBC,UAA7B,aAA2C4zB,EAAMqH,KAAKx6B,GAAtD,uBAHa,uBAKCo9B,EAAQngB,SAASkW,EAAMqH,KAAKx6B,GAAImzB,EAAMqH,KAAK/tB,MAAMC,UAAU2Q,WAL5D,mCAOnBmZ,GAAaoK,eAAb,uCAA4DthC,kBAAgBC,UAA5E,aAA0F4zB,EAAMqH,KAAKx6B,KAPlF,yCASb+1C,IATa,0DAYrBvf,GAAaqB,aAAb,MAZqB,mCAcf1E,EAAM6iB,eAdS,4FAAH,qDAkBhB5R,EAAmB,SAACltB,GACpBqe,EAAQ3wB,SACVsgC,EAAe,2BACVD,GADS,IAEZ7kC,KAAM8W,EACN3O,MAAM,EACNiyB,KAAMrH,EAAMqH,SAKZ8K,EAAmB,uCAAG,WAAO5E,GAAP,SAAAv0B,EAAA,yDACrBu0B,EADqB,gCAElBqV,IAFkB,uBAIpB5iB,EAAM6iB,eAJc,2CAAH,sDAOzB,OAAKf,GAAaY,EAAgBT,QAOhC,uCACGjiB,EAAM4E,QACL,eAAC2T,GAAA,EAAD,CAAUC,UAAU,OAAOruC,OAAQ,KAEnC,uCACE,gBAACmpC,GAAA,EAAD,CAAOxK,QAAS,EAAGyK,UAAU,MAA7B,WACIyO,GAAWU,EAAgBR,UAC3B,eAAC/T,GAAA,EAAD,CACE/N,QAAQ,YACR0D,MAAM,UACNkB,UAAW,eAACC,GAAD,CAAoBG,KAAM2F,GAASC,wBAC9CjG,QAAS,WAAQkM,EAAiBnpC,YAAUwY,eAAe4sB,eAJ7D,SAKGphC,aAAWwC,OAGd0zC,GAAWU,EAAgBP,YAC3B,eAAC,GAAD,CACE/hB,QAAQ,YACR0D,MAAM,UACNkB,UAAW,eAACC,GAAD,CAAoBG,KAAM2F,GAASM,yBAC9C5G,WAAYuM,EAJd,SAKGllC,aAAW8C,SAGdozC,GAAWU,EAAgBN,UAC3B,eAACjU,GAAA,EAAD,CACE/N,QAAQ,YACR0D,MAAM,UACNkB,UAAW,eAACC,GAAD,CAAoBG,KAAM2F,GAASY,qBAAqB7jC,YAAU4F,cAAcK,UAC3Fg3B,QAAS,WAAQkM,EAAiBnpC,YAAUwY,eAAe9S,MAJ7D,SAKG1B,aAAWuC,OAGd2zC,GAAWU,EAAgBL,WAC3B,uCACE,eAAClU,GAAA,EAAD,CACE/N,QAAQ,YACR0D,MAAM,UACNkB,UAAW,eAACC,GAAD,CAAoBG,KAAM2F,GAASK,0BAC9CrG,QAAS,WAAQkM,EAAiBnpC,YAAUwY,eAAe7S,QAJ7D,SAKG3B,aAAW0C,OAEd,eAAC2/B,GAAA,EAAD,CACE/N,QAAQ,YACR0D,MAAM,UACNkB,UAAW,eAACC,GAAD,CAAoBG,KAAM2F,GAASM,yBAC9CtG,QAAS,WAAQkM,EAAiBnpC,YAAUwY,eAAe2vB,OAJ7D,SAKGnkC,aAAW2C,WAIhBuzC,GAAWU,EAAgBJ,gBAC3B,eAACnU,GAAA,EAAD,CACE/M,KAAK,QACLhB,QAAQ,YACR0D,MAAM,UACNkB,UAAW,eAACC,GAAD,CAAoBG,KAAM0d,OACrC/d,QAAS,WAAQkM,EAAiBnpC,YAAUwY,eAAe6vB,aAL7D,SAMGrkC,aAAWgD,gBAIhBkzC,GAAWU,EAAgBH,eAAiBG,EAAgBF,gBAAkBE,EAAgBD,iBAC9F,gBAACnP,GAAA,EAAD,CAAOxK,QAAS,EAAGyK,UAAU,MAAM9D,UAAW,EAA9C,WACIuS,GAAWU,EAAgBH,gBAC3B,eAACpU,GAAA,EAAD,CACE/M,KAAK,QACLhB,QAAQ,YACR0D,MAAM,QACNkB,UAAW,eAACC,GAAD,CAAoBG,KAAM2F,GAASY,qBAAqB7jC,YAAU4F,cAAcM,aAC3F+2B,QAAS,WAAQkM,EAAiBnpC,YAAUwY,eAAe8uB,aAL7D,SAMGtjC,aAAWkD,aAGdgzC,GAAWU,EAAgBF,iBAC3B,eAACrU,GAAA,EAAD,CACE/M,KAAK,QACLhB,QAAQ,YACR0D,MAAM,QACNkB,UAAW,eAACC,GAAD,CAAoBG,KAAM2F,GAASQ,+BAC9CxG,QAAS,WAAQkM,EAAiBnpC,YAAUwY,eAAe4vB,eAL7D,SAMGpkC,aAAWmD,cAGd+yC,GAAWU,EAAgBD,iBAC3B,eAACtU,GAAA,EAAD,CACE/M,KAAK,QACLhB,QAAQ,YACR0D,MAAM,QACNkB,UAAW,eAACC,GAAD,CAAoBG,KAAM2F,GAASQ,+BAC9CxG,QAAS,WAAQkM,EAAiBnpC,YAAUwY,eAAe4vB,eAL7D,SAMGpkC,aAAWoD,mBAOxB,eAAC,GAAD,CAAY+F,MAAO68B,EAAa1E,SAAU2E,EAAgBrE,cAAeyE,OAvGzE,gCCpJAxqC,GAASC,sBAETm7C,GAAgBrjB,YAAOuH,KAAPvH,EACpB,cAAGC,MAAH,6IASIqjB,GAAgBtjB,YAAOuE,KAAPvE,EACpB,cAAGC,MAAH,kGAYWsjB,GAA4B,SAACjjB,GAAkB,IAAD,IACnDoC,EAAUd,IAAMe,QAAO,GACvB1C,EAAQ6d,eACRvE,EAAUC,aAAcvZ,EAAMwZ,YAAY+J,KAAK,OACrD,EAA0CniB,oBAAS,GAAnD,oBAAOtZ,EAAP,KAAsBqzB,EAAtB,KACA,EjBZyB,SAACvG,GAAuE,IAAhDnK,EAA+C,uDAAnB,eACvEoK,EAAsBlT,IAAM8U,SAAwB,WACxD,MAAO,CACLz3B,WAAY7W,YAAU8W,UAAUwB,KAChCvT,GAAI0nC,EAAM1nC,GACVgM,KAAM07B,EAAM17B,KACZiI,MAAOyzB,EAAMzzB,MACbC,IAAKwzB,EAAMxzB,IACX8Q,WAAY0iB,EAAM1iB,cAEnB,CAAC0iB,IACJ,EAAwCjT,IAAMP,SAAyByT,GAAvE,oBAAOI,EAAP,KAAqBuO,EAArB,KACA,EAA8B7hB,IAAMP,SAAe,IAAI7lB,KAAK,IAA5D,oBAAOkoC,EAAP,KAAgBC,EAAhB,KAEM5O,EAAa5D,aAA8ClU,GAAsB,CACrF0N,UAAW,CACTx9B,GAAI0nC,EAAM1nC,GAAGe,YAEf+rC,6BAA6B,EAC7BrP,YAAaF,EACbwP,mBAAoB,YACpB9I,YAAa,SAACvgC,GACZ4yC,EAAgB,2BACXvO,GADU,IAEbx1B,MAAO7O,EAAK6sB,gBAKZsX,EAAW7D,aAA8CnT,GAAsB,CACnF2M,UAAW,CACTx9B,GAAI0nC,EAAM1nC,GAAGe,YAEf+rC,6BAA6B,EAC7BrP,YAAaF,EACbwP,mBAAoB,YACpB9I,YAAa,SAACvgC,GACZ4yC,EAAgB,2BACXvO,GADU,IAEbvmC,IAAK6P,gBAAcmB,YAAY9O,EAAKwtB,iBAKpC4W,EAAa9D,aAAkDlT,GAAwB,CAC3F0M,UAAW,CACTx9B,GAAI0nC,EAAM1nC,GAAGe,YAEf+rC,6BAA6B,EAC7BrP,YAAaF,EACbwP,mBAAoB,YACpB9I,YAAa,SAACvgC,GACZ4yC,EAAgB,2BACXvO,GADU,IAEbt7B,MAAO4E,gBAAcoB,cAAc/O,EAAKytB,mBAKxCjsB,EAAQ0iC,EAAW1iC,OAAS2iC,EAAS3iC,OAAS4iC,EAAW5iC,MACzD6yB,EAAU6P,EAAW7P,SAAW8P,EAAS9P,SAAW+P,EAAW/P,QAE/Die,EAAY,uCAAG,gCAAA7pC,EAAA,yDACnBrR,GAAOoD,KAAK,gBAAgB,IAAImQ,MAAOuD,UAAW2kC,EAAQ3kC,UAA1D9W,MACI,IAAIuT,MAAOuD,WAAa2kC,EAAQ3kC,UAAY,KAF7B,wBAGjB4kC,EAAW,IAAInoC,MAHE,kBAQT1V,QAAQ89C,IAAI,CAChB7O,EAAWvB,UAAUhtC,MAAK,SAAAJ,GAAC,OAAIy9C,EAAWz9C,EAAEyK,KAAK6sB,aACjDsX,EAASxB,UAAUhtC,MAAK,SAAAJ,GAAC,OAAI09C,EAAS19C,EAAEyK,KAAKwtB,aAC7C4W,EAAWzB,UAAUhtC,MAAK,SAAAJ,GAAC,OAAI29C,EAAW39C,EAAEyK,KAAKytB,iBAXpC,OAafr2B,GAAOoD,KAAP,0BAA+BwpC,EAAM1nC,IAAM02C,EAAUC,EAAQC,EAA7D97C,GACAw7C,EAAgB,2BACX3O,GADU,IAEbp1B,MAAOmkC,EACPl1C,IAAKm1C,EACLlqC,MAAOmqC,KAlBM,kDAqBf97C,GAAOoK,MAAP,KAAApK,GArBe,0DAAH,qDA0BlB,MAAO,CACLitC,eACA7iC,QACA6yB,UACAie,gBiBhFqDa,CAAY1jB,EAAMqH,MAAjEuN,EAAR,EAAQA,aAAchQ,EAAtB,EAAsBA,QAAS7yB,EAA/B,EAA+BA,MAAO8wC,EAAtC,EAAsCA,aAChC99B,EAAQ8rB,aAAwBpT,GAAuB,CAC3D6M,YAAa,iBAET/O,EAAUwG,KACV1rB,EAAU/B,uBAEV4+B,EAAUnuB,EAAMmuB,QAEtBhS,qBAAU,WAER,OADAkB,EAAQ3wB,SAAU,EACX,WACL2wB,EAAQ3wB,SAAU,KAEnB,IAEHyvB,qBAAU,WACJnvB,GACFpK,GAAOoK,MAAMA,EAAbpK,KAED,CAACoK,IAEJmvB,qBAAU,WACR,GAAIkB,EAAQ3wB,QAAS,CAAC,IAAD,EACb1G,EAAI,UAAGga,EAAMxU,YAAT,aAAG,EAAYutB,WACrB/yB,GAAQq3B,EAAQ3wB,SAClBqpC,EAAiB/vC,EAAK0c,kBAGzB,CAAC1C,EAAMxU,OAEV2wB,qBAAU,WACR,IAAM4O,EAAc,SAAC76B,GACfmtB,EAAQ3wB,SACNwD,IAAUnN,YAAUkY,cAAc4jB,QACpCif,KAKN,OADAxsC,EAAQzL,GAAG9C,YAAUgN,YAAYI,0BAA2B46B,GACrD,WACLz5B,EAAQ05B,IAAIjoC,YAAUgN,YAAYI,0BAA2B46B,MAE9D,CAACz5B,EAASwsC,IAEb3hB,qBAAU,WACR,IAAM4O,EAAc,WACd1N,EAAQ3wB,SACVyhC,KAIJ,OADA78B,EAAQzL,GAAG9C,YAAUgN,YAAYe,cAAei6B,GACzC,WACLz5B,EAAQ05B,IAAIjoC,YAAUgN,YAAYe,cAAei6B,MAElD,CAACz5B,EAAS68B,IAEbhS,qBAAU,WACR,IAAM4O,EAAc,SAAChqC,GACfs8B,EAAQ3wB,SACN3L,EAAEmZ,SAAWpP,SAASmwB,EAAMqH,KAAKx6B,KACnCg2C,KAKN,OADAxsC,EAAQzL,GAAG9C,YAAUgN,YAAYiB,YAAa+5B,GACvC,WACLz5B,EAAQ05B,IAAIjoC,YAAUgN,YAAYiB,YAAa+5B,MAEhD,CAACz5B,EAAS2pB,EAAMqH,KAAKx6B,GAAIg2C,IAE5B,IAAM5kC,EAAoB,SAACd,GACzB,OAAOH,YAAUiB,kBAAkBd,IAG/BY,EAAa,SAACZ,GAClB,OAAOA,EAAGpE,GAAG,GAAKiE,YAAUe,WAAWZ,GAAM,KAG/C,OACE,eAAC4lC,GAAD,UACE,gBAAC9e,GAAA,EAAD,CAAKC,GAAI,CAAEr/B,EAAG,GAAd,UACE,gBAACyuC,GAAA,EAAD,CAAOC,UAAU,MAAMxK,eAAe,gBAAtC,UACE,gBAAClJ,GAAA,EAAD,CAAYO,QAAQ,KAAKoG,SAAUyS,EAAU,UAAY,SAAUnV,MAAM,UAAU2W,WAAS,EAA5F,UAA8FtuC,kBAAgBC,UAA9G,KAA2H4zB,EAAMqH,KAAKx6B,MACtI,eAACo3B,GAAA,EAAD,UACE,eAAC,GAAD,CAA0BuD,MAAO,gDAA0BC,UAAU,SAAShB,OAAK,EAAnF,SACE,eAACtF,GAAA,EAAD,CAAMC,KAAK,QAAQgE,KAAM,eAACH,GAAD,CAAoBG,KAAMyC,KAAO3D,GAAI,CAAEsC,SAAU,QAASmB,GAAI,KAASzD,GAAI,CAAEsC,SAAU,UAAY7/B,MAAOq5B,EAAMqH,KAAKxuB,cAInJmnB,EAAMqH,KAAKxV,WAAWtqB,OAAS,GAC9B,eAAC+rC,GAAA,EAAD,CAAOxK,QAAS,EAAGyK,UAAU,MAAMrP,GAAI,CAAEqE,GAAI,GAA7C,mBACGvI,EAAMqH,KAAKxV,kBADd,aACG,EAAuB1pB,KAAI,SAAC6Q,GAAD,OAC1B,eAACmoB,GAAA,EAAD,CAAcx6B,MAAOqS,EAAGonB,QAAQ,WAAWgB,KAAM6X,EAAU,QAAU,UAA1DjgC,QAIhBjH,EACC,eAAC,GAAD,CAAO/H,QAASI,aAAWC,cAAc0H,GAAQ9E,KAAK,YAEtD,uCACE,gBAACqmC,GAAA,EAAD,CAAOxK,QAAS,EAAGyK,UAAU,MAAMrP,GAAI,CAAEqE,GAAI,GAA7C,UACE,gBAAC1I,GAAA,EAAD,CAAYkK,QAAQ,SAApB,UACE,uCADF,OAGCnF,EACC,eAAC2T,GAAA,EAAD,CAAUC,UAAU,OAAOruC,OAAQ,GAAIk7B,MAAM,MAAMnB,GAAI,CAAE6F,QAAS,YAElE,eAAClK,GAAA,EAAD,CAAYkK,QAAQ,SAAS5C,UAAU,MAAvC,SACIyN,EAAax1B,MAKb,uCACE,eAAC,GAAD,CAAcnS,KAAM++B,GAAiBgS,QAAS/4C,MAAO2vC,EAAax1B,MAAlE,SACE,eAAC,GAAD,CAA0BooB,MAAOoN,EAAax1B,MAA9C,SACE,eAAC6kB,GAAA,EAAD,CAAKC,GAAI,CAAE+D,GAAI,GAAKd,UAAU,OAA9B,SAAsC73B,aAAW6D,0BAA0ByhC,EAAax1B,MAAO,GAAI,SAGtGmc,EAAQjZ,SAAWsyB,EAAax1B,MAAMiN,gBAAkBkP,EAAQjZ,QAAQ+J,eACvE,eAAC8U,GAAA,EAAD,CAAMC,KAAK,QAAQgE,KAAM,eAACue,GAAA,EAAD,IAAch9C,MAAM,oBAAoBy5B,QAAQ,SAAS8D,GAAI,CAAE0f,aAAc,GAAK9f,MAAM,iBAXrH,8DAkBR,gBAACwP,GAAA,EAAD,CAAOxK,QAAS,EAAGyK,UAAU,MAAMrP,GAAI,CAAEqE,GAAI,GAA7C,UACE,gBAAC1I,GAAA,EAAD,CAAYkK,QAAQ,SAApB,UACE,uCADF,OAGA,eAACsH,GAAA,EAAD,CAAMC,UAAU,QAAQ2G,KAAMr3B,UAAQI,oBAAoB4zB,EAAa7zB,KAAM6tB,OAAO,SAApF,SACE,eAAC,GAAD,CAA0BpH,MAAM,uBAAhC,SACE,gBAACvD,GAAA,EAAD,WACE,eAACgB,GAAD,CAAoBf,GAAI,CAAEsC,SAAU,QAASyB,GAAI,GAAK4b,cAAe,eAAiBze,KAAM0e,OAC5F,eAAC7f,GAAA,EAAD,CAAKkD,UAAU,OAAf,8BAOR,gBAACmM,GAAA,EAAD,CAAOxK,QAAS,EAAGyK,UAAU,MAAMrP,GAAI,CAAEqE,GAAI,GAA7C,UACE,gBAAC1I,GAAA,EAAD,CAAYkK,QAAQ,SAApB,UACE,6CADF,OAGCnF,EACC,eAAC2T,GAAA,EAAD,CAAUC,UAAU,OAAOruC,OAAQ,GAAIk7B,MAAM,MAAMnB,GAAI,CAAE6F,QAAS,YAElE,eAAClK,GAAA,EAAD,CAAYkK,QAAQ,SAApB,SACI6K,EAAavmC,IAKb,uCACE,eAACu3B,GAAD,CAAkB4B,MAAOvpB,EAAkB22B,EAAavmC,IAAIzE,QAA5D,SACE,kCAAOmU,EAAW62B,EAAavmC,IAAIzE,QAAnC,IAA6CuC,kBAAgBO,mBAFjE,UAIW,eAAC,GAAD,CAAcO,KAAM++B,GAAiBgS,QAAS/4C,MAAO2vC,EAAavmC,IAAIoR,OAAtE,SAA8E,eAAC,GAAD,CAA0B+nB,MAAOoN,EAAavmC,IAAIoR,OAAlD,SACrF,gCAAOnQ,aAAW6D,0BAA0ByhC,EAAavmC,IAAIoR,OAAQ,GAAI,YAT7E,gDAgBR,eAAC6zB,GAAA,EAAD,CAAOxK,QAAS,EAAGyK,UAAU,MAAMrP,GAAI,CAAEqE,GAAI,GAA7C,SACI3D,GAAWgQ,EAAat7B,MACxB,uCACE,eAACumB,GAAA,EAAD,CAAYkK,QAAQ,SAApB,UACG,UAAA6K,EAAat7B,aAAb,eAAoBC,UAAUnQ,IAAI,IACjC,uCACE,sCADF,OAIA,uCACE,2CADF,SAKHw7B,EACC,eAAC2T,GAAA,EAAD,CAAUC,UAAU,OAAOruC,OAAQ,GAAIk7B,MAAM,MAAMnB,GAAI,CAAE6F,QAAS,YAElE,eAAClK,GAAA,EAAD,CAAYkK,QAAQ,SAApB,SACI6K,EAAat7B,MAIb,uCACE,eAACssB,GAAD,CAAkB4B,MAAOvpB,EAAkB22B,EAAat7B,MAAMC,WAA9D,SACE,kCAAOwE,EAAW62B,EAAat7B,MAAMC,WAArC,IAAkDpN,kBAAgBO,mBAEnEkoC,EAAat7B,MAAMsG,aAAetQ,aAAWS,mBAAmB6kC,EAAat7B,MAAMsG,aAClF,+CACS,eAAC,GAAD,CAAc3S,KAAM++B,GAAiBgS,QAAS/4C,MAAO2vC,EAAat7B,MAAMsG,WAAxE,SAAoF,eAAC,GAAD,CAA0B4nB,MAAOoN,EAAat7B,MAAMsG,WAApD,SACzF,gCAAOtQ,aAAW6D,0BAA0ByhC,EAAat7B,MAAMsG,WAAY,GAAI,SAFnF,UARJ,oCAoBR,eAACuhB,GAAA,EAAD,CAAMx6B,MAAM,eAAey5B,QAAQ,SAAS8D,GAAI,CAAE0f,aAAc,UAKxE,eAACZ,GAAD,UACE,eAAC,GAAD,CAAiBpe,QAASA,EAASnd,cAAeA,EAAe4f,KAAMuN,EAAciO,aAAcA,YCvPhGkB,GAAwB,SAAC/jB,GACpC,IAAQnzB,EAAO6mC,eAAP7mC,GAEFkY,EAAQ8rB,aAAoCjU,GAAgB,CAChEyN,UAAW,CACTx9B,GAAE,OAAEA,QAAF,IAAEA,IAAM,MAEZy9B,YAAa,iBAGTv4B,EAAQgT,EAAMhT,MACd6yB,EAAU7f,EAAM6f,QAEtB,OAAI7yB,EACK,eAAC,GAAD,CAAO/H,QAASI,aAAWC,cAAc0H,GAAQ9E,KAAK,YAI7D,qCACG23B,IAAY7f,EAAMxU,KACjB,eAAC,GAAD,CAAOvG,QAAQ,aAAaiD,KAAK,YAEjC,eAACyzB,GAAA,EAAD,CAAWC,SAAS,KAApB,SACE,gBAACiI,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAGyK,UAAU,MAAM3J,aAAc,EAA1D,UACE,eAAChB,GAAA,EAAD,CAAMvB,MAAI,EAAC4B,GAAI,GAAIC,GAAI,EAAvB,SACE,eAAC,GAAD,CAAWpoB,MAAOiE,EAAMxU,KAAK2hB,KAAKpR,MAAOC,IAAKgE,EAAMxU,KAAK2hB,KAAKnR,QAEhE,eAAC6nB,GAAA,EAAD,CAAMvB,MAAI,EAAC4B,GAAI,GAAIC,GAAI,EAAvB,SACE,eAAC,GAAD,CAAU7B,KAAMtiB,EAAMxU,KAAK2hB,SAE7B,eAAC0W,GAAA,EAAD,CAAMvB,MAAI,EAAC4B,GAAI,GAAf,SACE,eAAC,GAAD,CAAc5B,KAAMtiB,EAAMxU,KAAK2hB,iB,UCvCvC8xB,GAAa1iB,IAAM4D,YAAW,SAAoBlF,EAAmBmF,GACzE,OAAO,eAAC8e,GAAA,EAAD,aAAO1Q,UAAU,KAAKpO,IAAKA,GAASnF,OAGhC3qB,GAAqC,WAChD,MAAwB0rB,oBAAS,GAAjC,oBAAO3rB,EAAP,KAAa2nC,EAAb,KACM1mC,EAAU/B,uBAEhB4sB,qBAAU,WACR,IAAM4O,EAAc,SAAC16B,GACnB2nC,EAAQ3nC,IAGV,OADAiB,EAAQzL,GAAG9C,YAAUgN,YAAYO,yBAA0By6B,GACpD,WACLz5B,EAAQ05B,IAAIjoC,YAAUgN,YAAYO,yBAA0By6B,MAE7D,CAACz5B,EAAS0mC,IAEb,IAAM5P,EAAc,WAClB4P,GAAQ,IAGV,OACE,gBAACpP,GAAA,EAAD,CACEv4B,KAAMA,EACN8uC,oBAAqBF,GACrBtC,aAAW,EACX9T,QAAST,EACT1H,MAAO,CAAE+b,OAAQ,MALnB,UAOE,eAAC3T,GAAA,EAAD,0BACA,eAACC,GAAA,EAAD,UACE,eAACU,GAAA,EAAD,8DAIF,eAACN,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CAAQpJ,QAASoI,EAAarJ,MAAM,UAApC,yB,yCChCFn8B,GAASC,sBAETu8C,GAAiBzkB,aAAOgB,KAAPhB,EAAkB,cAAGC,MAAH,kGAQnCykB,GAAa1kB,aAAOmE,KAAPnE,EAAc,cAAGC,MAAH,yEAKpB0kB,GAA0B,SAACrkB,GACtC,IAAMoC,EAAUd,IAAMe,QAAO,GAC7B,EAA0BtB,mBAAoC,CAC5D53B,aAAc,IAAIrB,YAAUC,iBAAiB,KAC7C8kB,SAAU,IAAI/kB,YAAUC,iBAAiB,KACzC+kB,YAAa,IAAIhlB,YAAUC,iBAAiB,OAH9C,oBAAO0N,EAAP,KAAc6uC,EAAd,KAKA,EAA0CvjB,oBAAkB,GAA5D,oBAAOwjB,EAAP,KAAsBC,EAAtB,KACMva,EAAUO,KACVn0B,EAAU/B,uBAEhBgtB,IAAMJ,WAAU,WAEd,OADAkB,EAAQ3wB,SAAU,EACX,WACL2wB,EAAQ3wB,SAAU,KAEnB,IAEHyvB,qBAAU,WACR,IAAI9kB,EAmBJ,OAlBImoC,IACFnoC,EAAWqoC,YAAW,sBAAC,8BAAAzrC,EAAA,sEACAixB,EAAQE,mBADR,OACfnkC,EADe,OAErB2B,GAAOoD,KAAK/E,EAAOuK,KAAKkF,MAAxB9N,GACIy6B,EAAQ3wB,SAAWzL,EAAOuK,KAAKkF,SAC3BivC,EAAc1+C,EAAOuK,KAAKkF,OAChBtM,aAAaw7C,IAAID,EAAY73B,YAC3C+3B,cAAcxoC,GACdooC,GAAiB,IAEnBF,EAAS,CACPn7C,aAAcu7C,EAAYv7C,aAC1B0jB,SAAU63B,EAAY73B,SACtBC,YAAa43B,EAAY53B,eAZR,2CAepB,MAEE,WACLnlB,GAAOoD,KAAK,0BAAZpD,GACIyU,GACFwoC,cAAcxoC,MAGjB,CAAC6tB,EAASsa,IAEbrjB,qBAAU,WACR,IAAM4O,EAAc,SAAC74B,EAAkBjO,GACjCo5B,EAAQ3wB,SAAW2lB,EAAgBa,gBAAgB0sB,IAAI37C,EAAOG,aAAaitB,MAAMgB,EAAgBa,oBACnGqsB,EAAS,CACPn7C,aAAcH,EAAOG,aACrB0jB,SAAU7jB,EAAO6jB,SACjBC,YAAa9jB,EAAO8jB,cAEtB03B,GAAiB,KAIrB,OADAnuC,EAAQzL,GAAG9C,YAAUgN,YAAYY,aAAco6B,GACxC,WACLnoC,GAAOoD,KAAK,qDAAZpD,GACA0O,EAAQ05B,IAAIjoC,YAAUgN,YAAYY,aAAco6B,MAEjD,CAACz5B,IAEJ,IAAMqH,EAAkB,SAACP,GAA0F,IAA1DE,EAAyD,uDAAtClR,kBAAgBQ,kBAC1F,OAAOqQ,YAAUU,gBAAgBP,EAAI,EAAGE,IAG1C,OAAKknC,GAAiB9uC,EAAMoX,SAASuH,GAAG,GAEpC,+BAMF,eAAC+vB,GAAD,CAAgBxjB,SAAS,KAAzB,SACE,gBAACyjB,GAAD,CAAYhf,MAAM,EAAOyf,SAAS,OAAOjX,QAAS,WAAQ4W,GAAiB,IAAUtgB,GAAI,CAAE8D,GAAI,EAAGC,GAAI,GAAtG,UACE,eAACpI,GAAA,EAAD,CAAY+J,aAAc,EAAG6Q,WAAS,EAAtC,SACE,mEAEF,eAAC7U,GAAD,CAAkB4B,MAAO9pB,EAAgBjI,EAAMtM,cAAes+B,UAAU,OAAOhB,OAAK,EAApF,SACE,gBAAC5G,GAAA,EAAD,CAAY+J,aAAc,EAAG6Q,WAAS,EAAtC,UACG/8B,EAAgBjI,EAAMtM,aAAc,GADvC,MAC8CuU,EAAgBjI,EAAMoX,SAAU,QAGhF,gBAACgT,GAAA,EAAD,CAAY+J,aAAc,EAA1B,qCAAsDz9B,kBAAgBO,iBACtE,gBAAC4mC,GAAA,EAAD,CAAOxK,QAAS,EAAGyK,UAAU,MAA7B,UACE,eAAC1T,GAAA,EAAD,mCACA,eAACsO,GAAA,EAAD,CAAQ/N,QAAQ,WAAWgB,KAAK,QAAQ6W,KAAM7gB,EAAgBS,eAAgB+W,OAAO,SAASkW,QAAS,eAAC,KAAD,IAAvG,gCCxFJn9C,GAASC,sBAEFm9C,GAAiB,SAAC/kB,GAAgB,IAAD,EAC5C,EAAoCe,mBAAkCj5B,YAAUkY,cAAcrS,SAA9F,oBAAOq3C,EAAP,KAAmBC,EAAnB,KACM5uC,EAAU/B,uBACVinB,EAAUC,KACV0pB,EAAQ,UAAG/tB,IAAkBguB,gBAArB,QAAiC,GAuC/C,OAtCA9hB,GAAaC,SAAW8hB,cAExBlkB,qBAAU,WACR,IAAM4O,EAAW,uCAAG,4BAAA92B,EAAA,sEAEVgiB,EAAyB,IAAIV,GAAuB5B,MAF1C,SAGV6C,EAAQW,WAAW5zB,UAAUizB,EAAQvQ,QAASljB,YAAUqY,aAAamL,UAAW0P,EAAuB92B,OAAOq3B,EAAQvQ,UAH5G,OAIhB3U,EAAQrB,sBAAsBwuB,GAAQC,oBAJtB,gDAMhBhqB,QAAQC,IAAR,MANgB,yDAAH,qDAUjB,OADArD,EAAQzL,GAAG9C,YAAUgN,YAAYC,OAAQ+6B,GAClC,WACLnoC,GAAOoD,KAAK,+CAAZpD,GACA0O,EAAQ05B,IAAIjoC,YAAUgN,YAAYC,OAAQ+6B,MAE3C,CAACz5B,EAASklB,EAAQW,WAAYX,EAAQvQ,UAEzCkW,qBAAU,WACR,IAAM4O,EAAW,uCAAG,4BAAA92B,EAAA,sDACZ/D,EAAQuuB,GAAQC,mBAClBuhB,IAAe/vC,IACHnN,YAAUkY,cAAc4jB,OAGtCj8B,GAAOoD,KAAP,kCAAuCi6C,EAAvC,kBAA2D/vC,GAA3DtN,GACAs9C,EAAchwC,GACdoB,EAAQrB,sBAAsBC,IARd,2CAAH,qDAYjB,OADA0P,SAAS0gC,iBAAiB,mBAAoBvV,GACvC,WACLnoC,GAAOoD,KAAK,uCAAZpD,GACAgd,SAAS2gC,oBAAoB,mBAAoBxV,MAElD,CAACz5B,EAAS2uC,EAAYzpB,EAAQW,WAAYX,EAAQvQ,UAGnD,eAAC,GAAD,UACE,gBAAC,KAAD,CAAYk6B,SAAUA,EAAtB,UACE,eAAC,GAAD,IACA,gBAAC,GAAD,WACE,eAAC,GAAD,IACA,gBAAC,KAAD,WACE,eAAC,KAAD,CAAOrtC,KAAK,oBAAoB0tC,QAAS,eAAC,GAAD,MACzC,eAAC,KAAD,CAAO1tC,KAAK,eAAe0tC,QAAS,eAAC,GAAD,MACpC,eAAC,KAAD,CAAO1tC,KAAK,oBAAoB0tC,QAAS,eAAC,GAAD,MACzC,eAAC,KAAD,CAAO1tC,KAAK,wBAAwB0tC,QAAS,eAAC,GAAD,MAC7C,eAAC,KAAD,CAAO1tC,KAAK,YAAY0tC,QAAS,eAAC,GAAD,MACjC,eAAC,KAAD,CAAO1tC,KAAK,cAAc0tC,QAAS,eAAC,GAAD,MACnC,eAAC,KAAD,CAAO1tC,KAAK,aAAa0tC,QAAS,eAAC,GAAD,MAClC,eAAC,KAAD,CAAO1tC,KAAK,QAAQ0tC,QAAS,eAAC,GAAD,MAC7B,eAAC,KAAD,CAAO1tC,KAAK,IAAI0tC,QAAS,eAAC,GAAD,SAE3B,eAAC,GAAD,IACA,eAAC,GAAD,aC1EJC,GAAa9lB,YAAO,MAAPA,EACjB,cAAGC,MAAH,uJAKyBvI,EAAgBK,OALzC,YAgCaguB,GAvBO,WACpB,IAAM3qB,EAAe3D,IACrBhsB,eAAaC,KAAK0vB,GAClB,IAAM4qB,EAAepkB,IAAM8U,SAAQ,kBAAM/W,OAAmB,IAG5D,OACE,eAACsmB,EAAA,EAAD,CAAsBC,YAAaC,IAAnC,SACE,eAACL,GAAD,UACE,eAAC,IAAD,CAAkBM,SAAU,EAA5B,SACE,eAACC,EAAA,EAAD,CAAgBx9C,OAAQm9C,EAAxB,SACE,eAAC,GAAD,UACE,eAAC,GAAD,UACE,eAAC,GAAD,iBCvBDM,I,OAZS,SAACC,GACnBA,GAAeA,aAAuBtqC,UACxC,8BAAqBzV,MAAK,YAAkD,IAA/CggD,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOD,GACPE,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAQL,QCAdM,IAASC,OACP,gBAACC,EAAA,EAAD,CAAe9mB,MAAOA,GAAtB,UAEE,eAAC+mB,EAAA,EAAD,IACA,eAAC,GAAD,OAEF/hC,SAASgiC,cAAc,UAMzBX,M,gCCpBA,IAAIjiD,EAAmBC,MAAQA,KAAKD,kBAAqBE,OAAOC,OAAU,SAASC,EAAGC,EAAGC,EAAGC,QAC7EC,IAAPD,IAAkBA,EAAKD,GAC3BJ,OAAOO,eAAeL,EAAGG,EAAI,CAAEG,YAAY,EAAMC,IAAK,WAAa,OAAON,EAAEC,OAC1E,SAASF,EAAGC,EAAGC,EAAGC,QACTC,IAAPD,IAAkBA,EAAKD,GAC3BF,EAAEG,GAAMF,EAAEC,KAEVM,EAAgBX,MAAQA,KAAKW,cAAiB,SAASP,EAAGQ,GAC1D,IAAK,IAAIC,KAAKT,EAAa,YAANS,GAAoBZ,OAAOa,UAAUC,eAAeC,KAAKJ,EAASC,IAAId,EAAgBa,EAASR,EAAGS,IAE3HZ,OAAOO,eAAeI,EAAS,aAAc,CAAEK,OAAO,IACtDN,EAAaO,EAAQ,KAAkBN,GACvCD,EAAaO,EAAQ,KAAoBN,GACzCD,EAAaO,EAAQ,KAAcN,GACnCD,EAAaO,EAAQ,KAAaN,GAClCD,EAAaO,EAAQ,KAAoBN,GACzCD,EAAaO,EAAQ,KAAgBN,GACrCD,EAAaO,EAAQ,KAAkBN,GACvCD,EAAaO,EAAQ,KAAkBN,GACvCD,EAAaO,EAAQ,KAAaN,GAClCD,EAAaO,EAAQ,KAAiBN,GACtCD,EAAaO,EAAQ,KAAWN,GAChCD,EAAaO,EAAQ,KAAiBN,GACtCD,EAAaO,EAAQ,KAAqBN,GAC1CD,EAAaO,EAAQ,KAAYN,GACjCD,EAAaO,EAAQ,KAAeN,K","file":"static/js/main.891df3e5.chunk.js","sourcesContent":["\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./config\"), exports);\r\n__exportStar(require(\"./constants\"), exports);\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./connector\"), exports);\r\n__exportStar(require(\"./manager\"), exports);\r\n__exportStar(require(\"./store\"), exports);\r\n__exportStar(require(\"./types\"), exports);\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./punk.search\"), exports);\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./base.contract\"), exports);\r\n__exportStar(require(\"./punks.contract\"), exports);\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseContract = void 0;\r\nvar util_1 = require(\"../util\");\r\nvar logger = (0, util_1.getLogger)();\r\nvar BaseContract = /** @class */ (function () {\r\n    function BaseContract() {\r\n        this._minQuota = new util_1.PunkTypes.BigNumberWrapper(\"10000\");\r\n        this.objectFromEntries = function (entries) {\r\n            return Object.fromEntries(entries.map(function (entry) {\r\n                return [entry.name, entry.value];\r\n            }));\r\n        };\r\n    }\r\n    BaseContract.prototype.initAsync = function (client, basePath) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this._client = client;\r\n                        return [4 /*yield*/, this.initContractAsyncProtected(basePath)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.initAsyncProtected()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Object.defineProperty(BaseContract.prototype, \"contract\", {\r\n        get: function () {\r\n            return this._contract;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    BaseContract.prototype.ensureQuotaAsync = function (_quota) {\r\n        if (_quota === void 0) { _quota = this._minQuota; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this._client.getQuotaAsync(this._contract.address)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (result.currentQuota.lte(_quota)) {\r\n                            throw new Error(\"Contract has insufficient quota\");\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseContract.prototype.toBoolean = function (value) {\r\n        if (value === \"0\") {\r\n            return false;\r\n        }\r\n        else if (value === \"1\") {\r\n            return true;\r\n        }\r\n        else {\r\n            throw new Error(\"Value \".concat(value, \" is not boolean\"));\r\n        }\r\n    };\r\n    BaseContract.prototype.callContractAsync = function (_account, _methodName, _params, amount, tokenId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result1, result2, error_1, message;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.ensureQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        _a.trys.push([2, 5, , 6]);\r\n                        return [4 /*yield*/, this._client.callContractAsync(_account, _methodName, this._contract.abi, _params, this._contract.address, amount, tokenId)];\r\n                    case 3:\r\n                        result1 = _a.sent();\r\n                        return [4 /*yield*/, this._client.waitForAccountBlockAsync(_account.address, result1.height)];\r\n                    case 4:\r\n                        result2 = _a.sent();\r\n                        return [2 /*return*/, result2];\r\n                    case 5:\r\n                        error_1 = _a.sent();\r\n                        message = util_1.FormatUtil.formatMessage(error_1);\r\n                        if (message) {\r\n                            throw new Error(message);\r\n                        }\r\n                        else {\r\n                            throw new Error(\"Error\");\r\n                        }\r\n                        return [3 /*break*/, 6];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseContract.prototype.stakeForQuotaAsync = function (_account, _amount) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result1, result2;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this._client.stakeForQuotaAsync(_account, this._contract.address, _amount)];\r\n                    case 1:\r\n                        result1 = _a.sent();\r\n                        return [4 /*yield*/, this._client.waitForAccountBlockAsync(_account.address, result1.height)];\r\n                    case 2:\r\n                        result2 = _a.sent();\r\n                        return [2 /*return*/, result2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseContract.prototype.createAddressListenerAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logs, listener;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logs = [];\r\n                        return [4 /*yield*/, this._client.createAddressListenerAsync(this._contract.address)];\r\n                    case 1:\r\n                        listener = _a.sent();\r\n                        listener.on(function (results) {\r\n                            for (var index = 0; index < results.length; index++) {\r\n                                var result = results[index];\r\n                                logger.info(result)();\r\n                                var vmLog = _this._client.decodeVmLog(result.vmlog, _this._contract.abi);\r\n                                logs.push(vmLog);\r\n                            }\r\n                        });\r\n                        return [2 /*return*/, {\r\n                                logs: logs,\r\n                                listener: listener\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return BaseContract;\r\n}());\r\nexports.BaseContract = BaseContract;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./vite.client\"), exports);\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./base.datasource\"), exports);\r\n__exportStar(require(\"./vite.datasource\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CommonConfig = void 0;\r\nvar CommonConfig = /** @class */ (function () {\r\n    function CommonConfig() {\r\n    }\r\n    CommonConfig.init = function (_config) {\r\n        this._config = _config;\r\n    };\r\n    Object.defineProperty(CommonConfig, \"USE_IPFS\", {\r\n        get: function () {\r\n            return this._config.USE_IPFS;\r\n        },\r\n        set: function (_flag) {\r\n            this._config.USE_IPFS = _flag;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CommonConfig, \"IS_PRODUCTION\", {\r\n        get: function () {\r\n            return this._config.IS_PRODUCTION;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CommonConfig, \"CONTRACT_ADDRESS\", {\r\n        get: function () {\r\n            return this._config.CONTRACT_ADDRESS;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CommonConfig, \"EXPLORER_URL\", {\r\n        get: function () {\r\n            return this._config.EXPLORER_URL;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CommonConfig, \"ENABLE_LOGGER\", {\r\n        get: function () {\r\n            return this._config.ENABLE_LOGGER;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return CommonConfig;\r\n}());\r\nexports.CommonConfig = CommonConfig;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DefaultPunkFilterValues = exports.ActionName = exports.PunkEventTypes = exports.PunkSortTypes = exports.OrderTypes = exports.Networks = exports.CommonConstants = void 0;\r\nvar util_1 = require(\"../util\");\r\nexports.CommonConstants = {\r\n    PUNK_NAME: 'VitePunk',\r\n    MARKET_DATA_URL: 'https://raw.githubusercontent.com/vitepunks/analytics/master/market_data/raw.json',\r\n    CDN_URL: 'https://cdn.vitepunks.com/',\r\n    //IPFS_GATEWAY_URL: 'https://ipfs.io/ipfs/',\r\n    IPFS_GATEWAY_URL: 'https://cloudflare-ipfs.com/ipfs/',\r\n    EXPLORER_URL: 'https://buidl.viteview.xyz/#/',\r\n    ZERO_ADDRESS: 'vite_0000000000000000000000000000000000000000a4f3a0cb58',\r\n    VITE_TOKEN_ID: 'tti_5649544520544f4b454e6e40',\r\n    CURRENCY_NAME: 'VITE',\r\n    CURRENCY_DECIMALS: 18,\r\n    TOTAL_MINTS: 10000\r\n};\r\nexports.Networks = [\r\n    {\r\n        id: 0,\r\n        networkId: 0,\r\n        name: 'UNKNOWN',\r\n        rpcUrl: '',\r\n        connectorUrl: ''\r\n    },\r\n    {\r\n        id: 1,\r\n        networkId: 1,\r\n        name: 'MAINNET',\r\n        rpcUrl: 'wss://node.vite.net/gvite/ws',\r\n        connectorUrl: 'wss://biforst.vite.net'\r\n    },\r\n    {\r\n        id: 2,\r\n        networkId: 2,\r\n        name: 'TESTNET',\r\n        rpcUrl: 'wss://buidl.vite.net/gvite/ws',\r\n        connectorUrl: 'wss://biforst.vite.net'\r\n    },\r\n    {\r\n        id: 3,\r\n        networkId: 2,\r\n        name: 'TESTNET+MOCK',\r\n        rpcUrl: 'wss://buidl.vite.net/gvite/ws',\r\n        connectorUrl: 'wss://biforst.vite.net'\r\n    },\r\n    {\r\n        id: 4,\r\n        networkId: 5,\r\n        name: 'DEBUG',\r\n        rpcUrl: 'ws://localhost:23457',\r\n        connectorUrl: 'wss://biforst.vite.net'\r\n    }\r\n];\r\nexports.OrderTypes = [\r\n    {\r\n        name: \"Asc\",\r\n        type: util_1.PunkTypes.OrderBy.ASC\r\n    },\r\n    {\r\n        name: \"Desc\",\r\n        type: util_1.PunkTypes.OrderBy.DESC\r\n    }\r\n];\r\nexports.PunkSortTypes = [\r\n    {\r\n        name: \"Id\",\r\n        type: util_1.PunkTypes.PunkSortBy.ID\r\n    },\r\n    {\r\n        name: \"Rank\",\r\n        type: util_1.PunkTypes.PunkSortBy.RANK\r\n    },\r\n    {\r\n        name: \"Bid\",\r\n        type: util_1.PunkTypes.PunkSortBy.BID\r\n    },\r\n    {\r\n        name: \"Price\",\r\n        type: util_1.PunkTypes.PunkSortBy.OFFER\r\n    }\r\n];\r\nexports.PunkEventTypes = [\r\n    {\r\n        name: \"Unknown\",\r\n        type: util_1.PunkTypes.PunkEventType.Unknown.toString()\r\n    },\r\n    {\r\n        name: \"Mint\",\r\n        type: util_1.PunkTypes.PunkEventType.Mint.toString()\r\n    },\r\n    {\r\n        name: \"List\",\r\n        type: util_1.PunkTypes.PunkEventType.Offer.toString()\r\n    },\r\n    {\r\n        name: \"New bid\",\r\n        type: util_1.PunkTypes.PunkEventType.NewBid.toString()\r\n    },\r\n    {\r\n        name: \"Cancel bid\",\r\n        type: util_1.PunkTypes.PunkEventType.CancelBid.toString()\r\n    },\r\n    {\r\n        name: \"Buy\",\r\n        type: util_1.PunkTypes.PunkEventType.Buy.toString()\r\n    },\r\n    {\r\n        name: \"Clear\",\r\n        type: util_1.PunkTypes.PunkEventType.CancelOffer.toString()\r\n    },\r\n];\r\nexports.ActionName = {\r\n    unknown: \"Unknown\",\r\n    list: \"List\",\r\n    bid: \"Bid\",\r\n    buy: \"Buy\",\r\n    sale: \"Sale\",\r\n    sell: \"Sell\",\r\n    gift: \"Gift\",\r\n    listing: \"Listing\",\r\n    transfer: \"Transfer\",\r\n    claim: \"Claim\",\r\n    accept: \"Accept\",\r\n    acceptBid: \"Accept bid\",\r\n    cancel: \"Cancel\",\r\n    cancelBid: \"Cancel bid\",\r\n    cancelSale: \"Cancel sale\",\r\n    cancelGift: \"Cancel gift\"\r\n};\r\nexports.DefaultPunkFilterValues = {\r\n    sortBy: util_1.PunkTypes.PunkSortBy.ID,\r\n    orderBy: util_1.PunkTypes.OrderBy.DESC,\r\n    search: \"\"\r\n};\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CommonUtil = void 0;\r\nvar big_js_1 = require(\"big.js\");\r\nvar uuid_1 = require(\"uuid\");\r\nvar CommonUtil = /** @class */ (function () {\r\n    function CommonUtil() {\r\n    }\r\n    CommonUtil.isString = function (value) {\r\n        return typeof value === 'string' || value instanceof String;\r\n    };\r\n    CommonUtil.isNumber = function (value) {\r\n        return !isNaN(parseInt(value)) && isFinite(value);\r\n    };\r\n    CommonUtil.isNullOrWhitespace = function (value) {\r\n        if (!CommonUtil.isString(value)) {\r\n            // console.log('Expected a string but got: ', value);\r\n            return true;\r\n        }\r\n        else {\r\n            return value === null || value === undefined || value.trim() === '';\r\n        }\r\n    };\r\n    CommonUtil.isNullOrDefault = function (value, defaultValue) {\r\n        return CommonUtil.isNullOrWhitespace(value) || value === defaultValue;\r\n    };\r\n    CommonUtil.timeout = function (ms) {\r\n        return new Promise(function (resolve) { return setTimeout(resolve, ms); });\r\n    };\r\n    CommonUtil.toJsonString = function (data) {\r\n        return JSON.stringify(data, null, 2);\r\n    };\r\n    CommonUtil.toUint8Array = function (data, encoding) {\r\n        if (encoding === void 0) { encoding = 'utf8'; }\r\n        return new Uint8Array(Buffer.from(data, encoding));\r\n    };\r\n    CommonUtil.imageUrlToBlob = function (url) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, fetch(url)];\r\n                    case 1: return [2 /*return*/, (_a.sent()).blob()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    CommonUtil.random = function (min, max) {\r\n        return Math.floor(Math.random() * (max - min + 1) + min);\r\n    };\r\n    CommonUtil.calculatePercentage = function (current, goal) {\r\n        try {\r\n            if (current && goal) {\r\n                return Math.floor((0, big_js_1.default)(current).div((0, big_js_1.default)(goal)).mul(100).toNumber());\r\n            }\r\n        }\r\n        catch (error) {\r\n        }\r\n        return 0;\r\n    };\r\n    CommonUtil.calculateMaxRows = function (total, rpp, page) {\r\n        return Math.min(Math.min(total - rpp * page, rpp), total);\r\n    };\r\n    CommonUtil.uuid = function () {\r\n        return (0, uuid_1.v4)();\r\n    };\r\n    CommonUtil.appendPath = function (_path, _appendix) {\r\n        if (!_path || !_appendix || CommonUtil.isNullOrWhitespace(_path) || CommonUtil.isNullOrWhitespace(_appendix)) {\r\n            return _path;\r\n        }\r\n        var delimiter = '/';\r\n        var appendix = _appendix.startsWith(delimiter) ? _appendix.substring(1, _appendix.length) : _appendix;\r\n        return _path.endsWith(delimiter) ? _path + appendix : _path + delimiter + appendix;\r\n    };\r\n    CommonUtil.isValidHttpUrl = function (value) {\r\n        var url;\r\n        try {\r\n            url = new URL(value);\r\n        }\r\n        catch (_) {\r\n            return false;\r\n        }\r\n        return url.protocol === \"http:\" || url.protocol === \"https:\";\r\n    };\r\n    CommonUtil.truncateString = function (str, maxLength) {\r\n        if (str) {\r\n            if (maxLength < str.length) {\r\n                return \"\".concat(str.substring(0, maxLength), \"...\");\r\n            }\r\n        }\r\n        return str;\r\n    };\r\n    CommonUtil.truncateStringInTheMiddle = function (str, strPositionStart, strPositionEnd) {\r\n        if (str) {\r\n            var minTruncatedLength = strPositionStart + strPositionEnd;\r\n            if (minTruncatedLength < str.length) {\r\n                return \"\".concat(str.substring(0, strPositionStart), \"...\").concat(str.substring(str.length - strPositionEnd, str.length));\r\n            }\r\n        }\r\n        return str;\r\n    };\r\n    return CommonUtil;\r\n}());\r\nexports.CommonUtil = CommonUtil;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CompressUtil = void 0;\r\nvar pako = require(\"pako\");\r\nvar CompressUtil = /** @class */ (function () {\r\n    function CompressUtil() {\r\n    }\r\n    CompressUtil.compress = function (data) {\r\n        return pako.gzip(data, { to: \"string\" });\r\n    };\r\n    CompressUtil.decompress = function (data) {\r\n        return pako.ungzip(data, { to: \"string\" });\r\n    };\r\n    return CompressUtil;\r\n}());\r\nexports.CompressUtil = CompressUtil;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getEmitter = exports.GlobalEmitter = void 0;\r\nvar events_1 = require(\"events\");\r\nvar _1 = require(\".\");\r\nvar GlobalEmitter = /** @class */ (function (_super) {\r\n    __extends(GlobalEmitter, _super);\r\n    function GlobalEmitter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    GlobalEmitter.prototype.emitReInit = function () {\r\n        this.emit(_1.PunkTypes.GlobalEvent.ReInit);\r\n    };\r\n    GlobalEmitter.prototype.emitVisibilityChanged = function (state) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.DocumentVisibilityChanged, state);\r\n    };\r\n    GlobalEmitter.prototype.emitConfirmTransactionDialog = function (open) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.ConfirmTransactionDialog, open);\r\n    };\r\n    GlobalEmitter.prototype.emitConnectWalletDialog = function (open) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.ConnectWalletDialog, open);\r\n    };\r\n    GlobalEmitter.prototype.emitQuotaChanged = function (address, quota) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.QuotaChanged, address, quota);\r\n    };\r\n    GlobalEmitter.prototype.emitMarketChanged = function (event) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.MarketChanged, event);\r\n    };\r\n    GlobalEmitter.prototype.emitPunkChanged = function (event) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.PunkChanged, event);\r\n    };\r\n    GlobalEmitter.prototype.emitPunkFilterValuesChanged = function (oldValues, newValues) {\r\n        this.emit(_1.PunkTypes.GlobalEvent.PunkFilterValuesChanged, oldValues, newValues);\r\n    };\r\n    return GlobalEmitter;\r\n}(events_1.EventEmitter));\r\nexports.GlobalEmitter = GlobalEmitter;\r\nvar emitter = new GlobalEmitter();\r\nvar getEmitter = function () {\r\n    return emitter;\r\n};\r\nexports.getEmitter = getEmitter;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Ensure = void 0;\r\nvar Ensure = /** @class */ (function () {\r\n    function Ensure() {\r\n    }\r\n    Ensure.notNull = function (property, propertyName, message) {\r\n        if (property === null || property === undefined) {\r\n            if (message) {\r\n                throw new Error(message);\r\n            }\r\n            else {\r\n                throw new Error('Unexpected null exception. ' + propertyName);\r\n            }\r\n        }\r\n    };\r\n    Ensure.notNullOrWhiteSpace = function (property, propertyName, message) {\r\n        if (property === null || property === undefined || (property === null || property === void 0 ? void 0 : property.trim()) === '') {\r\n            if (message) {\r\n                throw new Error(message);\r\n            }\r\n            else {\r\n                throw new Error('Unexpected null exception. ' + propertyName);\r\n            }\r\n        }\r\n    };\r\n    Ensure.maxLength = function (property, propertyName, maxLength) {\r\n        if (property && property.length > maxLength) {\r\n            throw new Error(\"\".concat(propertyName, \" exceeds the maximum length of \").concat(maxLength));\r\n        }\r\n    };\r\n    return Ensure;\r\n}());\r\nexports.Ensure = Ensure;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ExplorerUtil = void 0;\r\nvar _1 = require(\".\");\r\nvar __1 = require(\"..\");\r\nvar ExplorerUtil = /** @class */ (function () {\r\n    function ExplorerUtil() {\r\n    }\r\n    ExplorerUtil.getBaseUrl = function (_baseUrl) {\r\n        var baseUrl = _baseUrl;\r\n        if (!baseUrl || _1.CommonUtil.isNullOrWhitespace(baseUrl)) {\r\n            baseUrl = __1.CommonConfig.EXPLORER_URL;\r\n        }\r\n        baseUrl = baseUrl.endsWith('/') ? baseUrl.substring(0, baseUrl.length - 1) : baseUrl;\r\n        return baseUrl;\r\n    };\r\n    ExplorerUtil.getAddressUrl = function (_address, _baseUrl) {\r\n        var baseUrl = ExplorerUtil.getBaseUrl(_baseUrl);\r\n        if (baseUrl === ExplorerUtil.DEFAULT_BASE_URL) {\r\n            return \"\".concat(baseUrl, \"/address/\").concat(_address);\r\n        }\r\n        return \"\".concat(baseUrl, \"/account/\").concat(_address);\r\n    };\r\n    ExplorerUtil.getTxUrl = function (_tx, _baseUrl) {\r\n        var baseUrl = ExplorerUtil.getBaseUrl(_baseUrl);\r\n        if (baseUrl === ExplorerUtil.DEFAULT_BASE_URL) {\r\n            return \"\".concat(baseUrl, \"/tx/\").concat(_tx);\r\n        }\r\n        return \"\".concat(baseUrl, \"/tx/\").concat(_tx);\r\n    };\r\n    ExplorerUtil.DEFAULT_BASE_URL = \"https://vitescan.io\";\r\n    return ExplorerUtil;\r\n}());\r\nexports.ExplorerUtil = ExplorerUtil;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getNodeFileUtil = exports.NodeFileUtil = exports.getLocalFileUtil = exports.LocalFileUtil = exports.FileUtil = void 0;\r\nvar fs = require(\"fs\");\r\nvar node_fetch_1 = require(\"node-fetch\");\r\nvar FileUtil = /** @class */ (function () {\r\n    function FileUtil() {\r\n    }\r\n    return FileUtil;\r\n}());\r\nexports.FileUtil = FileUtil;\r\nvar LocalFileUtil = /** @class */ (function (_super) {\r\n    __extends(LocalFileUtil, _super);\r\n    function LocalFileUtil() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    LocalFileUtil.prototype.readFileAsync = function (path, encoding) {\r\n        if (encoding === void 0) { encoding = 'utf8'; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, Promise.resolve(fs.readFileSync(path, encoding))];\r\n            });\r\n        });\r\n    };\r\n    LocalFileUtil.prototype.writeFileAsync = function (path, data, encoding) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, Promise.resolve(fs.writeFileSync(path, data, encoding))];\r\n            });\r\n        });\r\n    };\r\n    return LocalFileUtil;\r\n}(FileUtil));\r\nexports.LocalFileUtil = LocalFileUtil;\r\nvar localFileUtil = new LocalFileUtil();\r\nvar getLocalFileUtil = function () {\r\n    return localFileUtil;\r\n};\r\nexports.getLocalFileUtil = getLocalFileUtil;\r\nvar NodeFileUtil = /** @class */ (function (_super) {\r\n    __extends(NodeFileUtil, _super);\r\n    function NodeFileUtil() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    NodeFileUtil.prototype.readFileAsync = function (path, encoding) {\r\n        if (encoding === void 0) { encoding = 'utf8'; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, (0, node_fetch_1.default)(path)];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        switch (encoding) {\r\n                            case 'binary':\r\n                                return [2 /*return*/, response.arrayBuffer()];\r\n                            default:\r\n                                return [2 /*return*/, response.text()];\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    NodeFileUtil.prototype.writeFileAsync = function (path, data, encoding) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    return NodeFileUtil;\r\n}(FileUtil));\r\nexports.NodeFileUtil = NodeFileUtil;\r\nvar nodeFileUtil = new NodeFileUtil();\r\nvar getNodeFileUtil = function () {\r\n    return nodeFileUtil;\r\n};\r\nexports.getNodeFileUtil = getNodeFileUtil;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterUtil = void 0;\r\nvar lodash_1 = require(\"lodash\");\r\nvar _1 = require(\".\");\r\nvar FilterUtil = /** @class */ (function () {\r\n    function FilterUtil() {\r\n    }\r\n    FilterUtil.sortPunks = function (sort, order, punks) {\r\n        if (!punks || !sort || !order) {\r\n            return punks;\r\n        }\r\n        switch (sort) {\r\n            case _1.PunkTypes.PunkSortBy.ID:\r\n                return (0, lodash_1.orderBy)(punks, function (p) { return Number(p.id); }, order === _1.PunkTypes.OrderBy.ASC ? 'asc' : 'desc');\r\n            case _1.PunkTypes.PunkSortBy.RANK:\r\n                return (0, lodash_1.orderBy)(punks, function (p) { return p.rank; }, order === _1.PunkTypes.OrderBy.ASC ? 'asc' : 'desc');\r\n            case _1.PunkTypes.PunkSortBy.BID:\r\n                return punks.filter(function (e) { return !!e.bid && e.bid.amount.gt(0); }).sort(function (a, b) {\r\n                    var _c, _d, _e, _f;\r\n                    var _a = (_d = (_c = a.bid) === null || _c === void 0 ? void 0 : _c.amount) !== null && _d !== void 0 ? _d : new _1.PunkTypes.BigNumberWrapper(0);\r\n                    var _b = (_f = (_e = b.bid) === null || _e === void 0 ? void 0 : _e.amount) !== null && _f !== void 0 ? _f : new _1.PunkTypes.BigNumberWrapper(0);\r\n                    if (order === _1.PunkTypes.OrderBy.ASC) {\r\n                        return _a.gt(_b) ? 1 : -1;\r\n                    }\r\n                    return _a.gt(_b) ? -1 : 1;\r\n                });\r\n            case _1.PunkTypes.PunkSortBy.OFFER:\r\n                return punks.filter(function (e) { return !!e.offer && e.offer.minAmount.gt(0); }).sort(function (a, b) {\r\n                    var _c, _d, _e, _f;\r\n                    var _a = (_d = (_c = a.offer) === null || _c === void 0 ? void 0 : _c.minAmount) !== null && _d !== void 0 ? _d : new _1.PunkTypes.BigNumberWrapper(0);\r\n                    var _b = (_f = (_e = b.offer) === null || _e === void 0 ? void 0 : _e.minAmount) !== null && _f !== void 0 ? _f : new _1.PunkTypes.BigNumberWrapper(0);\r\n                    if (order === _1.PunkTypes.OrderBy.ASC) {\r\n                        return _a.gt(_b) ? 1 : -1;\r\n                    }\r\n                    return _a.gt(_b) ? -1 : 1;\r\n                });\r\n            default:\r\n                return punks;\r\n        }\r\n    };\r\n    return FilterUtil;\r\n}());\r\nexports.FilterUtil = FilterUtil;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FormatUtil = void 0;\r\nvar _1 = require(\".\");\r\nvar FormatUtil = /** @class */ (function () {\r\n    function FormatUtil() {\r\n    }\r\n    FormatUtil.formatMessage = function (data) {\r\n        var _a;\r\n        var defaultMessage = \"Something went wrong. Probably your account has insufficient balance or quota.\";\r\n        if (data) {\r\n            console.log(data);\r\n            var message = void 0;\r\n            if (!_1.CommonUtil.isString(data)) {\r\n                if (data.message) {\r\n                    message = data.message;\r\n                }\r\n                else if ((_a = data.error) === null || _a === void 0 ? void 0 : _a.message) {\r\n                    message = data.error.message;\r\n                }\r\n                else if (data.graphQLErrors) {\r\n                    if (data.graphQLErrors.length > 0) {\r\n                        message = data.graphQLErrors[0].message;\r\n                    }\r\n                    else {\r\n                        message = defaultMessage;\r\n                    }\r\n                }\r\n                else {\r\n                    message = JSON.stringify(data);\r\n                    if (message === \"{}\") {\r\n                        message = defaultMessage;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                message = data;\r\n            }\r\n            if (message.length > 128) {\r\n                return message.substr(0, 128) + \"...\";\r\n            }\r\n            return message;\r\n        }\r\n        return defaultMessage;\r\n    };\r\n    FormatUtil.formatNumber = function (number) {\r\n        var _a;\r\n        if (!number) {\r\n            return \"0\";\r\n        }\r\n        return number.toLocaleString((_a = navigator.language) !== null && _a !== void 0 ? _a : 'en-US');\r\n    };\r\n    return FormatUtil;\r\n}());\r\nexports.FormatUtil = FormatUtil;\r\n","\"use strict\";\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getLogger = exports.ExtendedConsoleLogger = exports.ConsoleLogger = exports.LogEventModel = void 0;\r\nvar __1 = require(\"..\");\r\nvar LogEventModel = /** @class */ (function () {\r\n    function LogEventModel(init) {\r\n        Object.assign(this, init);\r\n    }\r\n    return LogEventModel;\r\n}());\r\nexports.LogEventModel = LogEventModel;\r\nvar noop = function () { return undefined; };\r\nvar ConsoleLogger = /** @class */ (function () {\r\n    function ConsoleLogger() {\r\n    }\r\n    Object.defineProperty(ConsoleLogger.prototype, \"isEnabled\", {\r\n        get: function () {\r\n            return __1.CommonConfig.ENABLE_LOGGER;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ConsoleLogger.prototype, \"debug\", {\r\n        get: function () {\r\n            if (this.isEnabled) {\r\n                return console.debug.bind(console);\r\n            }\r\n            else {\r\n                return noop;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ConsoleLogger.prototype, \"info\", {\r\n        get: function () {\r\n            if (this.isEnabled) {\r\n                return console.info.bind(console);\r\n            }\r\n            else {\r\n                return noop;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ConsoleLogger.prototype, \"warn\", {\r\n        get: function () {\r\n            if (this.isEnabled) {\r\n                return console.warn.bind(console);\r\n            }\r\n            else {\r\n                return noop;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ConsoleLogger.prototype, \"error\", {\r\n        get: function () {\r\n            if (this.isEnabled) {\r\n                return console.error.bind(console);\r\n            }\r\n            else {\r\n                return noop;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ConsoleLogger;\r\n}());\r\nexports.ConsoleLogger = ConsoleLogger;\r\nvar ExtendedConsoleLogger = /** @class */ (function () {\r\n    function ExtendedConsoleLogger() {\r\n    }\r\n    Object.defineProperty(ExtendedConsoleLogger.prototype, \"isEnabled\", {\r\n        get: function () {\r\n            return __1.CommonConfig.ENABLE_LOGGER;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ExtendedConsoleLogger.prototype.timestamp = function (type) {\r\n        return \"[\".concat(type, \" \").concat(new Date().toLocaleTimeString(), \"]\");\r\n    };\r\n    ExtendedConsoleLogger.prototype.createLogEventModel = function (type) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var mapFn = function (e) {\r\n            if (__1.CommonUtil.isString(e)) {\r\n                return e;\r\n            }\r\n            else if (e instanceof Error) {\r\n                return e.message;\r\n            }\r\n            return __1.CommonUtil.toJsonString(e);\r\n        };\r\n        var result = new LogEventModel({\r\n            banner: this.timestamp(type),\r\n            args: args === null || args === void 0 ? void 0 : args.map(function (e) { return Array.isArray(e) ? e.map(function (e1) { return mapFn(e1); }) : mapFn(e); })\r\n        });\r\n        return result;\r\n    };\r\n    Object.defineProperty(ExtendedConsoleLogger.prototype, \"debug\", {\r\n        get: function () {\r\n            var _this = this;\r\n            if (this.isEnabled) {\r\n                return function () {\r\n                    var _a;\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    var result = _this.createLogEventModel('DEBUG', args);\r\n                    return (_a = Function.prototype.bind).call.apply(_a, __spreadArray([console.debug, console, result.banner], args, false));\r\n                };\r\n            }\r\n            else {\r\n                return function () {\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    return noop;\r\n                };\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ExtendedConsoleLogger.prototype, \"info\", {\r\n        get: function () {\r\n            var _this = this;\r\n            if (this.isEnabled) {\r\n                return function () {\r\n                    var _a;\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    var result = _this.createLogEventModel('INFO', args);\r\n                    return (_a = Function.prototype.bind).call.apply(_a, __spreadArray([console.info, console, result.banner], args, false));\r\n                };\r\n            }\r\n            else {\r\n                return function () {\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    return noop;\r\n                };\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ExtendedConsoleLogger.prototype, \"warn\", {\r\n        get: function () {\r\n            var _this = this;\r\n            if (this.isEnabled) {\r\n                return function () {\r\n                    var _a;\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    var result = _this.createLogEventModel('WARN', args);\r\n                    return (_a = Function.prototype.bind).call.apply(_a, __spreadArray([console.warn, console, result.banner], args, false));\r\n                };\r\n            }\r\n            else {\r\n                return function () {\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    return noop;\r\n                };\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ExtendedConsoleLogger.prototype, \"error\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return function () {\r\n                var _a;\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                if ((args === null || args === void 0 ? void 0 : args.length) > 0) {\r\n                    if (!__1.CommonUtil.isString(args[0])) {\r\n                        args.push('(See console output for more information.)');\r\n                    }\r\n                }\r\n                var result = _this.createLogEventModel('ERROR', args);\r\n                return (_a = Function.prototype.bind).call.apply(_a, __spreadArray([console.error, console, result.banner], args, false));\r\n            };\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ExtendedConsoleLogger;\r\n}());\r\nexports.ExtendedConsoleLogger = ExtendedConsoleLogger;\r\nvar logger = new ExtendedConsoleLogger();\r\nvar getLogger = function () {\r\n    return logger;\r\n};\r\nexports.getLogger = getLogger;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RetryUtil = void 0;\r\nvar RetryUtil = /** @class */ (function () {\r\n    function RetryUtil() {\r\n    }\r\n    // https://stackoverflow.com/questions/45444601/promise-retries-until-success-failure-with-typescript\r\n    RetryUtil.promiseRetry = function (fn, retries, err) {\r\n        if (retries === void 0) { retries = 5; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, new Promise(function (resolve) { return setTimeout(resolve, (5 - retries) * 1000); })];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/, !retries ? Promise.reject(err) : fn().catch(function (error) { return RetryUtil.promiseRetry(fn, (retries - 1), error); })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return RetryUtil;\r\n}());\r\nexports.RetryUtil = RetryUtil;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Task = void 0;\r\nvar Task = /** @class */ (function () {\r\n    function Task(task, interval) {\r\n        this._task = task;\r\n        this._taskInterval = interval;\r\n        return this;\r\n    }\r\n    Task.prototype._run = function () {\r\n        var _this = this;\r\n        this._taskTimer = setTimeout(function () { return __awaiter(_this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this._task) {\r\n                            this._onStop();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, this._task()];\r\n                    case 1:\r\n                        if (!(_a.sent())) {\r\n                            this._onStop();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        this._run();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); }, this._taskInterval);\r\n    };\r\n    Task.prototype._onStop = function () {\r\n        this._callback && this._callback();\r\n    };\r\n    Task.prototype.start = function (callback) {\r\n        this._callback = callback;\r\n        if (this._taskTimer) {\r\n            return;\r\n        }\r\n        this._run();\r\n    };\r\n    Task.prototype.stop = function () {\r\n        this._onStop();\r\n        if (!this._taskTimer) {\r\n            return;\r\n        }\r\n        window.clearTimeout(this._taskTimer);\r\n        this._taskTimer = undefined;\r\n    };\r\n    return Task;\r\n}());\r\nexports.Task = Task;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TokenUtil = void 0;\r\nvar bignumber_js_1 = require(\"bignumber.js\");\r\nvar __1 = require(\"..\");\r\nvar TokenUtil = /** @class */ (function () {\r\n    function TokenUtil() {\r\n    }\r\n    TokenUtil.roundBigNumber = function (bn, tokenDecimals, decimals) {\r\n        return bn.div(new bignumber_js_1.BigNumber(\"10\").pow(tokenDecimals)).decimalPlaces(decimals, bignumber_js_1.BigNumber.ROUND_DOWN);\r\n    };\r\n    TokenUtil.formatBigNumber = function (bn, tokenDecimals, decimals, maxDigits) {\r\n        if (maxDigits === void 0) { maxDigits = 14; }\r\n        var rounded = TokenUtil.roundBigNumber(bn, tokenDecimals, decimals);\r\n        if (rounded.lte(0)) {\r\n            return \"<1\";\r\n        }\r\n        var formatted = rounded.toFormat();\r\n        if (maxDigits >= formatted.length) {\r\n            return formatted;\r\n        }\r\n        return formatted.substring(0, maxDigits) + \"...\";\r\n    };\r\n    TokenUtil.formatVite = function (bn) {\r\n        return TokenUtil.formatBigNumber(bn, __1.CommonConstants.CURRENCY_DECIMALS, 2);\r\n    };\r\n    TokenUtil.formatViteFull = function (bn) {\r\n        return TokenUtil.roundBigNumber(bn, __1.CommonConstants.CURRENCY_DECIMALS, __1.CommonConstants.CURRENCY_DECIMALS).toFormat();\r\n    };\r\n    TokenUtil.formatViteTooltip = function (bn) {\r\n        var rounded = TokenUtil.roundBigNumber(bn, __1.CommonConstants.CURRENCY_DECIMALS, __1.CommonConstants.CURRENCY_DECIMALS);\r\n        return \"\".concat(rounded.toFormat(), \" $\").concat(__1.CommonConstants.CURRENCY_NAME);\r\n    };\r\n    return TokenUtil;\r\n}());\r\nexports.TokenUtil = TokenUtil;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TransformUtil = void 0;\r\nvar _1 = require(\".\");\r\nvar __1 = require(\"..\");\r\nvar TransformUtil = /** @class */ (function () {\r\n    function TransformUtil() {\r\n    }\r\n    Object.defineProperty(TransformUtil, \"defaultBigNumber\", {\r\n        get: function () {\r\n            return new _1.PunkTypes.BigNumberWrapper(\"0\");\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    TransformUtil.toBigNumber = function (number) {\r\n        var _a;\r\n        return (_a = TransformUtil.toMaybeBigNumber(number)) !== null && _a !== void 0 ? _a : TransformUtil.defaultBigNumber;\r\n    };\r\n    TransformUtil.toMaybeBigNumber = function (number) {\r\n        if (!number || (_1.CommonUtil.isNullOrWhitespace(number) && !_1.CommonUtil.isNumber(number))) {\r\n            return null;\r\n        }\r\n        return new _1.PunkTypes.BigNumberWrapper(number);\r\n    };\r\n    TransformUtil.toAddress = function (value) {\r\n        if (_1.CommonUtil.isNullOrWhitespace(value) || value === __1.CommonConstants.ZERO_ADDRESS) {\r\n            return null;\r\n        }\r\n        return value;\r\n    };\r\n    TransformUtil.toTimestamp = function (date) {\r\n        if (date) {\r\n            return Math.floor(date.getTime() / 1000).toString();\r\n        }\r\n        return \"0\";\r\n    };\r\n    TransformUtil.toPunkEvent = function (event) {\r\n        var _a, _b, _c, _d;\r\n        return {\r\n            __typename: (_a = event.__typename) !== null && _a !== void 0 ? _a : _1.PunkTypes.TypeNames.PunkEvent,\r\n            id: (_b = event.id) !== null && _b !== void 0 ? _b : \"\".concat(event.accountBlockHash, \"-\").concat(event.accountBlockHeight, \"-\").concat(event.eventType),\r\n            accountBlockHash: event.accountBlockHash,\r\n            accountBlockHeight: TransformUtil.toBigNumber(event.accountBlockHeight),\r\n            timestamp: TransformUtil.toBigNumber(event.timestamp),\r\n            eventType: Number(event.eventType),\r\n            punkId: event.punkId,\r\n            amount: TransformUtil.toBigNumber(event.amount),\r\n            fromAddress: (_c = TransformUtil.toAddress(event.fromAddress)) !== null && _c !== void 0 ? _c : '',\r\n            toAddress: (_d = TransformUtil.toAddress(event.toAddress)) !== null && _d !== void 0 ? _d : ''\r\n        };\r\n    };\r\n    TransformUtil.toPunkInfo = function (info) {\r\n        if (!info) {\r\n            return null;\r\n        }\r\n        return {\r\n            id: info.id,\r\n            owner: info.owner,\r\n            bid: TransformUtil.toMarketBid(info.bid, info.id),\r\n            offer: TransformUtil.toMarketOffer(info.offer, info.id)\r\n        };\r\n    };\r\n    TransformUtil.toMarketBid = function (bid, itemIndex) {\r\n        var _a;\r\n        if (!bid) {\r\n            return null;\r\n        }\r\n        return {\r\n            __typename: (_a = bid.__typename) !== null && _a !== void 0 ? _a : _1.PunkTypes.TypeNames.MarketBid,\r\n            itemIndex: TransformUtil.toBigNumber(itemIndex !== null && itemIndex !== void 0 ? itemIndex : bid.itemIndex),\r\n            bidder: bid.bidder,\r\n            amount: TransformUtil.toBigNumber(bid.amount),\r\n            timestamp: TransformUtil.toMaybeBigNumber(bid.timestamp)\r\n        };\r\n    };\r\n    TransformUtil.toMarketOffer = function (offer, itemIndex) {\r\n        var _a, _b;\r\n        if (!offer) {\r\n            return null;\r\n        }\r\n        return {\r\n            __typename: (_a = offer.__typename) !== null && _a !== void 0 ? _a : _1.PunkTypes.TypeNames.MarketOffer,\r\n            itemIndex: TransformUtil.toBigNumber(itemIndex !== null && itemIndex !== void 0 ? itemIndex : offer.itemIndex),\r\n            seller: offer.seller,\r\n            minAmount: TransformUtil.toBigNumber(offer.minAmount),\r\n            onlySellTo: (_b = offer.onlySellTo) !== null && _b !== void 0 ? _b : null,\r\n            timestamp: TransformUtil.toMaybeBigNumber(offer.timestamp)\r\n        };\r\n    };\r\n    TransformUtil.toAccountAuction = function (auction) {\r\n        return {\r\n            timestamp: TransformUtil.toBigNumber(auction.timestamp),\r\n            auctionType: Number(auction.auctionType),\r\n            punkId: auction.punkId,\r\n            owner: auction.owner,\r\n            amount: TransformUtil.toBigNumber(auction.amount),\r\n            address: auction.address\r\n        };\r\n    };\r\n    return TransformUtil;\r\n}());\r\nexports.TransformUtil = TransformUtil;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PunkTypes = void 0;\r\nvar bignumber_js_1 = require(\"bignumber.js\");\r\nvar PunkTypes;\r\n(function (PunkTypes) {\r\n    var BigNumberWrapper = /** @class */ (function (_super) {\r\n        __extends(BigNumberWrapper, _super);\r\n        function BigNumberWrapper() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return BigNumberWrapper;\r\n    }(bignumber_js_1.default));\r\n    PunkTypes.BigNumberWrapper = BigNumberWrapper;\r\n    var OrderBy;\r\n    (function (OrderBy) {\r\n        OrderBy[\"ASC\"] = \"ASC\";\r\n        OrderBy[\"DESC\"] = \"DESC\";\r\n    })(OrderBy = PunkTypes.OrderBy || (PunkTypes.OrderBy = {}));\r\n    var PunkSortBy;\r\n    (function (PunkSortBy) {\r\n        PunkSortBy[\"BID\"] = \"BID\";\r\n        PunkSortBy[\"ID\"] = \"ID\";\r\n        PunkSortBy[\"OFFER\"] = \"OFFER\";\r\n        PunkSortBy[\"RANK\"] = \"RANK\";\r\n    })(PunkSortBy = PunkTypes.PunkSortBy || (PunkTypes.PunkSortBy = {}));\r\n    var DocumentState;\r\n    (function (DocumentState) {\r\n        DocumentState[DocumentState[\"Unknown\"] = 0] = \"Unknown\";\r\n        DocumentState[DocumentState[\"Hidden\"] = 1] = \"Hidden\";\r\n        DocumentState[DocumentState[\"Active\"] = 2] = \"Active\";\r\n    })(DocumentState = PunkTypes.DocumentState || (PunkTypes.DocumentState = {}));\r\n    var WalletType;\r\n    (function (WalletType) {\r\n        WalletType[\"MetaMask\"] = \"MetaMask\";\r\n    })(WalletType = PunkTypes.WalletType || (PunkTypes.WalletType = {}));\r\n    var OrderType;\r\n    (function (OrderType) {\r\n        OrderType[OrderType[\"ASC\"] = 0] = \"ASC\";\r\n        OrderType[OrderType[\"DESC\"] = 1] = \"DESC\";\r\n    })(OrderType = PunkTypes.OrderType || (PunkTypes.OrderType = {}));\r\n    var ProviderType;\r\n    (function (ProviderType) {\r\n        ProviderType[ProviderType[\"HTTP\"] = 0] = \"HTTP\";\r\n        ProviderType[ProviderType[\"WEBSOCKET\"] = 1] = \"WEBSOCKET\";\r\n    })(ProviderType = PunkTypes.ProviderType || (PunkTypes.ProviderType = {}));\r\n    PunkTypes.TypeNames = {\r\n        Punk: \"Punk\",\r\n        PunkEvent: \"PunkEvent\",\r\n        MarketBid: \"MarketBid\",\r\n        MarketOffer: \"MarketOffer\"\r\n    };\r\n    var PunkSortType;\r\n    (function (PunkSortType) {\r\n        PunkSortType[PunkSortType[\"ID\"] = 0] = \"ID\";\r\n        PunkSortType[PunkSortType[\"RANK\"] = 1] = \"RANK\";\r\n    })(PunkSortType = PunkTypes.PunkSortType || (PunkTypes.PunkSortType = {}));\r\n    var PunkDialogType;\r\n    (function (PunkDialogType) {\r\n        PunkDialogType[PunkDialogType[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\r\n        PunkDialogType[PunkDialogType[\"BID\"] = 1] = \"BID\";\r\n        PunkDialogType[PunkDialogType[\"OFFER\"] = 2] = \"OFFER\";\r\n        PunkDialogType[PunkDialogType[\"GIFT\"] = 3] = \"GIFT\";\r\n        PunkDialogType[PunkDialogType[\"ACCEPT_BID\"] = 4] = \"ACCEPT_BID\";\r\n        PunkDialogType[PunkDialogType[\"ACCEPT_OFFER\"] = 5] = \"ACCEPT_OFFER\";\r\n        PunkDialogType[PunkDialogType[\"CANCEL_BID\"] = 6] = \"CANCEL_BID\";\r\n        PunkDialogType[PunkDialogType[\"CANCEL_OFFER\"] = 7] = \"CANCEL_OFFER\";\r\n    })(PunkDialogType = PunkTypes.PunkDialogType || (PunkTypes.PunkDialogType = {}));\r\n    var PunkEventType;\r\n    (function (PunkEventType) {\r\n        PunkEventType[PunkEventType[\"Unknown\"] = 0] = \"Unknown\";\r\n        PunkEventType[PunkEventType[\"Mint\"] = 1] = \"Mint\";\r\n        PunkEventType[PunkEventType[\"Offer\"] = 2] = \"Offer\";\r\n        PunkEventType[PunkEventType[\"NewBid\"] = 3] = \"NewBid\";\r\n        PunkEventType[PunkEventType[\"CancelBid\"] = 4] = \"CancelBid\";\r\n        PunkEventType[PunkEventType[\"Buy\"] = 5] = \"Buy\";\r\n        PunkEventType[PunkEventType[\"CancelOffer\"] = 6] = \"CancelOffer\";\r\n    })(PunkEventType = PunkTypes.PunkEventType || (PunkTypes.PunkEventType = {}));\r\n    var MarketplaceTab;\r\n    (function (MarketplaceTab) {\r\n        MarketplaceTab[\"Items\"] = \"items\";\r\n        MarketplaceTab[\"Activity\"] = \"activity\";\r\n    })(MarketplaceTab = PunkTypes.MarketplaceTab || (PunkTypes.MarketplaceTab = {}));\r\n    var MarketEventType;\r\n    (function (MarketEventType) {\r\n        MarketEventType[MarketEventType[\"Unknown\"] = 0] = \"Unknown\";\r\n        MarketEventType[MarketEventType[\"Start\"] = 1] = \"Start\";\r\n        MarketEventType[MarketEventType[\"Stop\"] = 2] = \"Stop\";\r\n        MarketEventType[MarketEventType[\"MintPrice\"] = 3] = \"MintPrice\";\r\n        MarketEventType[MarketEventType[\"ActionPrice\"] = 4] = \"ActionPrice\";\r\n    })(MarketEventType = PunkTypes.MarketEventType || (PunkTypes.MarketEventType = {}));\r\n    var AccountAuctionType;\r\n    (function (AccountAuctionType) {\r\n        AccountAuctionType[AccountAuctionType[\"Unknown\"] = 0] = \"Unknown\";\r\n        AccountAuctionType[AccountAuctionType[\"Offer\"] = 1] = \"Offer\";\r\n        AccountAuctionType[AccountAuctionType[\"Bid\"] = 2] = \"Bid\";\r\n    })(AccountAuctionType = PunkTypes.AccountAuctionType || (PunkTypes.AccountAuctionType = {}));\r\n    var GlobalEvent;\r\n    (function (GlobalEvent) {\r\n        GlobalEvent[\"ReInit\"] = \"ReInit\";\r\n        GlobalEvent[\"DocumentVisibilityChanged\"] = \"DocumentVisibilityChanged\";\r\n        GlobalEvent[\"ConfirmTransactionDialog\"] = \"ConfirmTransactionDialog\";\r\n        GlobalEvent[\"ConnectWalletDialog\"] = \"ConnectWalletDialog\";\r\n        GlobalEvent[\"QuotaChanged\"] = \"QuotaChanged\";\r\n        GlobalEvent[\"PunkFilterValuesChanged\"] = \"PunkFilterValuesChanged\";\r\n        GlobalEvent[\"MarketChanged\"] = \"MarketChanged\";\r\n        GlobalEvent[\"PunkChanged\"] = \"PunkChanged\";\r\n    })(GlobalEvent = PunkTypes.GlobalEvent || (PunkTypes.GlobalEvent = {}));\r\n    var ViteQuotaType;\r\n    (function (ViteQuotaType) {\r\n        ViteQuotaType[\"Account\"] = \"Account\";\r\n        ViteQuotaType[\"Contract\"] = \"Contract\";\r\n    })(ViteQuotaType = PunkTypes.ViteQuotaType || (PunkTypes.ViteQuotaType = {}));\r\n    var VmLogEvent;\r\n    (function (VmLogEvent) {\r\n        VmLogEvent[\"MarketChanged\"] = \"MarketChanged\";\r\n        VmLogEvent[\"PunkChanged\"] = \"PunkChanged\";\r\n    })(VmLogEvent = PunkTypes.VmLogEvent || (PunkTypes.VmLogEvent = {}));\r\n})(PunkTypes = exports.PunkTypes || (exports.PunkTypes = {}));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UrlUtil = void 0;\r\nvar _1 = require(\".\");\r\nvar __1 = require(\"..\");\r\nvar UrlUtil = /** @class */ (function () {\r\n    function UrlUtil() {\r\n    }\r\n    UrlUtil.getPunkUrl = function (image, cid) {\r\n        if (image && !_1.CommonUtil.isNullOrWhitespace(image)) {\r\n            if (__1.CommonConfig.USE_IPFS) {\r\n                if (cid && !_1.CommonUtil.isNullOrWhitespace(cid)) {\r\n                    return UrlUtil.getPunkIpfsUrlByCid(cid);\r\n                }\r\n                return UrlUtil.getPunkIpfsUrl(image);\r\n            }\r\n            else {\r\n                return \"https://cdn.vitepunks.com/punks/iso/\".concat(image);\r\n            }\r\n        }\r\n        return \"\";\r\n    };\r\n    UrlUtil.getPunkIpfsUrlByCid = function (cid) {\r\n        if (cid && !_1.CommonUtil.isNullOrWhitespace(cid)) {\r\n            return \"\".concat(__1.CommonConstants.IPFS_GATEWAY_URL).concat(cid);\r\n        }\r\n        return \"\";\r\n    };\r\n    UrlUtil.getPunkIpfsUrl = function (image) {\r\n        if (image && !_1.CommonUtil.isNullOrWhitespace(image)) {\r\n            return \"\".concat(__1.CommonConstants.IPFS_GATEWAY_URL, \"QmRGJyWMZidhH35J5tfn7vWwR1MfhPdSZh7FEXWXub4zJm/\").concat(image);\r\n        }\r\n        return \"\";\r\n    };\r\n    return UrlUtil;\r\n}());\r\nexports.UrlUtil = UrlUtil;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WalletManager = void 0;\r\nvar vitejs_1 = require(\"@vite/vitejs\");\r\nvar _1 = require(\".\");\r\nvar __1 = require(\"..\");\r\nvar logger = (0, __1.getLogger)();\r\nvar WalletManager = /** @class */ (function () {\r\n    function WalletManager(_store) {\r\n        this._mnemonicDeriveIndex = 0;\r\n        this._store = _store;\r\n    }\r\n    WalletManager.prototype.initWallet = function () {\r\n        var wallet = this._store.getItem();\r\n        if (wallet) {\r\n            this._wallet = wallet;\r\n            this._mnemonicDeriveIndex = wallet.accounts.length;\r\n            this.updateWallet();\r\n        }\r\n    };\r\n    Object.defineProperty(WalletManager.prototype, \"onSetWalletCallback\", {\r\n        set: function (cb) {\r\n            this._setWalletCallback = cb;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    WalletManager.prototype.getWallet = function () {\r\n        return this._wallet;\r\n    };\r\n    WalletManager.prototype.setWallet = function (wallet) {\r\n        this._wallet = wallet;\r\n        this.updateWalletStore(wallet);\r\n        this.updateWallet();\r\n    };\r\n    WalletManager.prototype.updateWallet = function () {\r\n        if (this._setWalletCallback) {\r\n            this._setWalletCallback(this._wallet);\r\n        }\r\n    };\r\n    WalletManager.prototype.updateWalletStore = function (wallet) {\r\n        if (wallet) {\r\n            this._store.setItem(wallet);\r\n        }\r\n    };\r\n    WalletManager.prototype.createWebWallet = function (mnemonic) {\r\n        if (!this.validateMnemonic(mnemonic)) {\r\n            return undefined;\r\n        }\r\n        this.resetWallet();\r\n        var account = this.createWebWalletAccount(mnemonic, 0);\r\n        var wallet = new _1.WebWallet({\r\n            active: account,\r\n            mnemonic: mnemonic,\r\n            accounts: [\r\n                account\r\n            ]\r\n        });\r\n        this.setWallet(wallet);\r\n        return wallet;\r\n    };\r\n    WalletManager.prototype.removeWallet = function () {\r\n        this.resetWallet();\r\n        this.updateWallet();\r\n    };\r\n    WalletManager.prototype.getAccountByAddress = function (address) {\r\n        var _a, _b;\r\n        return (_b = (_a = this._wallet) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.find(function (e) { return e.address === address; });\r\n    };\r\n    WalletManager.prototype.addAccount = function () {\r\n        if (this._wallet instanceof _1.WebWallet) {\r\n            var account = this.createWebWalletAccount(this._wallet.mnemonic);\r\n            this._wallet.accounts.push(account);\r\n            this.setActiveAccount(account);\r\n            return account;\r\n        }\r\n        return undefined;\r\n    };\r\n    WalletManager.prototype.getActiveAccount = function () {\r\n        var _a;\r\n        return (_a = this._wallet) === null || _a === void 0 ? void 0 : _a.active;\r\n    };\r\n    WalletManager.prototype.setActiveAccount = function (account) {\r\n        if (this._wallet) {\r\n            this._wallet.active = account;\r\n            this._store.setItem(this._wallet);\r\n            this.updateWallet();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    WalletManager.prototype.getAccounts = function () {\r\n        if (this._wallet) {\r\n            return this._wallet.accounts;\r\n        }\r\n        return [];\r\n    };\r\n    WalletManager.prototype.getValidSession = function () {\r\n        var wallet = this._store.getItem();\r\n        if (wallet && wallet instanceof _1.SessionWallet) {\r\n            if (new Date().getTime() - wallet.timestamp < 1000 * 60 * 10) {\r\n                return wallet.session;\r\n            }\r\n            else {\r\n                logger.info('Found expired session.', wallet)();\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    WalletManager.prototype.resetWallet = function () {\r\n        this._wallet = undefined;\r\n        this._mnemonicDeriveIndex = 0;\r\n        this._store.clear();\r\n    };\r\n    WalletManager.prototype.createWebWalletAccount = function (mnemonic, index) {\r\n        if (index === void 0) { index = this._mnemonicDeriveIndex; }\r\n        var privateKey = vitejs_1.wallet.deriveAddress({\r\n            mnemonics: mnemonic,\r\n            index: index\r\n        }).privateKey;\r\n        var account = new _1.WebWalletAccount({\r\n            id: index.toString(),\r\n            privateKey: privateKey,\r\n            address: vitejs_1.wallet.createAddressByPrivateKey(privateKey).address\r\n        });\r\n        this._mnemonicDeriveIndex = index + 1;\r\n        return account;\r\n    };\r\n    WalletManager.prototype.validateMnemonic = function (mnemonic) {\r\n        if (mnemonic) {\r\n            return vitejs_1.wallet.validateMnemonics(mnemonic);\r\n        }\r\n        return false;\r\n    };\r\n    return WalletManager;\r\n}());\r\nexports.WalletManager = WalletManager;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SessionWalletAccount = exports.WebWalletAccount = exports.WalletAccount = exports.WalletAccountType = exports.SessionWallet = exports.WebWallet = exports.Wallet = exports.WalletType = void 0;\r\nvar WalletType;\r\n(function (WalletType) {\r\n    WalletType[\"Web\"] = \"Web\";\r\n    WalletType[\"Session\"] = \"Session\";\r\n})(WalletType = exports.WalletType || (exports.WalletType = {}));\r\nvar Wallet = /** @class */ (function () {\r\n    function Wallet(type, init) {\r\n        this.accounts = [];\r\n        this._type = type;\r\n        this.baseInit(init);\r\n    }\r\n    Wallet.fromJS = function (data) {\r\n        data = typeof data === 'object' ? data : {};\r\n        switch (data._type) {\r\n            case WalletType.Web:\r\n                return new WebWallet(data);\r\n            case WalletType.Session:\r\n                return new SessionWallet(data);\r\n            default:\r\n                break;\r\n        }\r\n        return undefined;\r\n    };\r\n    Object.defineProperty(Wallet.prototype, \"type\", {\r\n        get: function () {\r\n            return this._type;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Wallet.prototype.baseInit = function (data) {\r\n        var _this = this;\r\n        if (data) {\r\n            this.active = data.active ? this.createAccount(data.active) : undefined;\r\n            if (data.accounts && Array.isArray(data.accounts)) {\r\n                data.accounts.forEach(function (account) {\r\n                    _this.accounts.push(_this.createAccount(account));\r\n                });\r\n            }\r\n        }\r\n        if (!this.accounts) {\r\n            this.accounts = [];\r\n        }\r\n    };\r\n    return Wallet;\r\n}());\r\nexports.Wallet = Wallet;\r\nvar WebWallet = /** @class */ (function (_super) {\r\n    __extends(WebWallet, _super);\r\n    function WebWallet(init) {\r\n        var _this = _super.call(this, WalletType.Web, init) || this;\r\n        _this.init(init);\r\n        return _this;\r\n    }\r\n    WebWallet.prototype.init = function (data) {\r\n        if (data) {\r\n            this.mnemonic = data.mnemonic;\r\n        }\r\n    };\r\n    WebWallet.prototype.createAccount = function (data) {\r\n        return new WebWalletAccount(data);\r\n    };\r\n    return WebWallet;\r\n}(Wallet));\r\nexports.WebWallet = WebWallet;\r\nvar SessionWallet = /** @class */ (function (_super) {\r\n    __extends(SessionWallet, _super);\r\n    function SessionWallet(init) {\r\n        var _this = _super.call(this, WalletType.Session, init) || this;\r\n        _this.init(init);\r\n        return _this;\r\n    }\r\n    SessionWallet.prototype.init = function (data) {\r\n        if (data) {\r\n            this.session = data.session;\r\n            this.timestamp = data.timestamp;\r\n        }\r\n    };\r\n    SessionWallet.prototype.createAccount = function (data) {\r\n        return new SessionWalletAccount(data);\r\n    };\r\n    return SessionWallet;\r\n}(Wallet));\r\nexports.SessionWallet = SessionWallet;\r\nvar WalletAccountType;\r\n(function (WalletAccountType) {\r\n    WalletAccountType[\"Web\"] = \"Web\";\r\n    WalletAccountType[\"Session\"] = \"Session\";\r\n})(WalletAccountType = exports.WalletAccountType || (exports.WalletAccountType = {}));\r\nvar WalletAccount = /** @class */ (function () {\r\n    function WalletAccount(type, init) {\r\n        this._type = type;\r\n        this.baseInit(init);\r\n    }\r\n    WalletAccount.fromJS = function (data) {\r\n        data = typeof data === 'object' ? data : {};\r\n        switch (data._type) {\r\n            case WalletType.Web:\r\n                return new WebWalletAccount(data);\r\n            case WalletType.Session:\r\n                return new SessionWalletAccount(data);\r\n            default:\r\n                break;\r\n        }\r\n        return undefined;\r\n    };\r\n    Object.defineProperty(WalletAccount.prototype, \"type\", {\r\n        get: function () {\r\n            return this._type;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    WalletAccount.prototype.baseInit = function (data) {\r\n        if (data) {\r\n            this.id = data.id;\r\n            this.address = data.address;\r\n        }\r\n    };\r\n    return WalletAccount;\r\n}());\r\nexports.WalletAccount = WalletAccount;\r\nvar WebWalletAccount = /** @class */ (function (_super) {\r\n    __extends(WebWalletAccount, _super);\r\n    function WebWalletAccount(init) {\r\n        var _this = _super.call(this, WalletAccountType.Web, init) || this;\r\n        _this.init(init);\r\n        return _this;\r\n    }\r\n    WebWalletAccount.prototype.init = function (data) {\r\n        if (data) {\r\n            this.privateKey = data.privateKey;\r\n        }\r\n    };\r\n    return WebWalletAccount;\r\n}(WalletAccount));\r\nexports.WebWalletAccount = WebWalletAccount;\r\nvar SessionWalletAccount = /** @class */ (function (_super) {\r\n    __extends(SessionWalletAccount, _super);\r\n    function SessionWalletAccount(init) {\r\n        return _super.call(this, WalletAccountType.Session, init) || this;\r\n    }\r\n    return SessionWalletAccount;\r\n}(WalletAccount));\r\nexports.SessionWalletAccount = SessionWalletAccount;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getPunkSearch = exports.PunkSearch = void 0;\r\nvar flexsearch_1 = require(\"flexsearch\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar util_1 = require(\"../util\");\r\nvar logger = (0, util_1.getLogger)();\r\nvar PunkSearch = /** @class */ (function () {\r\n    function PunkSearch() {\r\n        this.clear();\r\n    }\r\n    PunkSearch.prototype.clear = function () {\r\n        this._index = new flexsearch_1.Document({\r\n            document: {\r\n                id: \"id\",\r\n                tag: \"attributes\",\r\n                index: [\"id\"]\r\n            },\r\n            //preset: \"memory\",\r\n            //tokenize: \"forward\"\r\n        });\r\n    };\r\n    PunkSearch.prototype.index = function (punks) {\r\n        if (punks) {\r\n            this.clear();\r\n            for (var _i = 0, punks_1 = punks; _i < punks_1.length; _i++) {\r\n                var p = punks_1[_i];\r\n                this._index.add(p);\r\n            }\r\n        }\r\n    };\r\n    PunkSearch.prototype.search = function (query, punks) {\r\n        try {\r\n            if (!punks || util_1.CommonUtil.isNullOrWhitespace(query)) {\r\n                return punks;\r\n            }\r\n            if (util_1.CommonUtil.isNumber(query)) {\r\n                var index = parseInt(query);\r\n                if (index > 0) {\r\n                    var p = punks[index - 1];\r\n                    return !p ? [] : [p];\r\n                }\r\n            }\r\n            var result = this._index.search({\r\n                tag: query.split(','),\r\n                limit: 10000\r\n            });\r\n            var mappedResult = result.map(function (e) { return e.result; });\r\n            if (mappedResult.length > 0) {\r\n                if (mappedResult.length === 1) {\r\n                    return this.enrich(mappedResult[0].map(function (e) { return e.toString(); }), punks);\r\n                }\r\n                else {\r\n                    var intersectedResult = lodash_1.intersection.apply(void 0, mappedResult);\r\n                    return this.enrich(intersectedResult.map(function (e) { return e.toString(); }), punks);\r\n                }\r\n            }\r\n            return undefined;\r\n        }\r\n        catch (error) {\r\n            logger.error(error)();\r\n            return undefined;\r\n        }\r\n    };\r\n    PunkSearch.prototype.enrich = function (ids, punks) {\r\n        return (0, lodash_1.intersectionWith)(punks, ids, function (o, id) { return o.id === id; });\r\n    };\r\n    return PunkSearch;\r\n}());\r\nexports.PunkSearch = PunkSearch;\r\nvar search = new PunkSearch();\r\nvar getPunkSearch = function () {\r\n    return search;\r\n};\r\nexports.getPunkSearch = getPunkSearch;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PunksBaseContract = exports.AbiItemType = void 0;\r\nvar util_1 = require(\"../util\");\r\nvar base_contract_1 = require(\"./base.contract\");\r\nvar logger = (0, util_1.getLogger)();\r\nvar AbiItemType;\r\n(function (AbiItemType) {\r\n    AbiItemType[AbiItemType[\"getDeveloper\"] = 0] = \"getDeveloper\";\r\n    AbiItemType[AbiItemType[\"getMarketInfo\"] = 1] = \"getMarketInfo\";\r\n    AbiItemType[AbiItemType[\"isContract\"] = 2] = \"isContract\";\r\n    AbiItemType[AbiItemType[\"balanceOf\"] = 3] = \"balanceOf\";\r\n    AbiItemType[AbiItemType[\"ownerOf\"] = 4] = \"ownerOf\";\r\n    AbiItemType[AbiItemType[\"getMappedIndex\"] = 5] = \"getMappedIndex\";\r\n    AbiItemType[AbiItemType[\"totalSupply\"] = 6] = \"totalSupply\";\r\n    AbiItemType[AbiItemType[\"getTokensOf\"] = 7] = \"getTokensOf\";\r\n    AbiItemType[AbiItemType[\"tokenURI\"] = 8] = \"tokenURI\";\r\n    AbiItemType[AbiItemType[\"getBaseUrl\"] = 9] = \"getBaseUrl\";\r\n    AbiItemType[AbiItemType[\"getOffer\"] = 10] = \"getOffer\";\r\n    AbiItemType[AbiItemType[\"getBid\"] = 11] = \"getBid\";\r\n    AbiItemType[AbiItemType[\"transferEvent\"] = 12] = \"transferEvent\";\r\n    AbiItemType[AbiItemType[\"marketChangedEvent\"] = 13] = \"marketChangedEvent\";\r\n    AbiItemType[AbiItemType[\"punkChangedEvent\"] = 14] = \"punkChangedEvent\";\r\n})(AbiItemType = exports.AbiItemType || (exports.AbiItemType = {}));\r\nvar PunksBaseContract = /** @class */ (function (_super) {\r\n    __extends(PunksBaseContract, _super);\r\n    function PunksBaseContract() {\r\n        var _this = _super.call(this) || this;\r\n        _this._abiMap = new Map();\r\n        return _this;\r\n    }\r\n    PunksBaseContract.prototype.initAsyncProtected = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                this._abiMap.set(AbiItemType.getDeveloper, this.getAbiItem(\"offchain\", \"getDeveloper\"));\r\n                this._abiMap.set(AbiItemType.getMarketInfo, this.getAbiItem(\"offchain\", \"getMarketInfo\"));\r\n                this._abiMap.set(AbiItemType.isContract, this.getAbiItem(\"offchain\", \"isContract\"));\r\n                this._abiMap.set(AbiItemType.balanceOf, this.getAbiItem(\"offchain\", \"balanceOf\"));\r\n                this._abiMap.set(AbiItemType.ownerOf, this.getAbiItem(\"offchain\", \"ownerOf\"));\r\n                this._abiMap.set(AbiItemType.getMappedIndex, this.getAbiItem(\"offchain\", \"getMappedIndex\"));\r\n                this._abiMap.set(AbiItemType.totalSupply, this.getAbiItem(\"offchain\", \"totalSupply\"));\r\n                this._abiMap.set(AbiItemType.getTokensOf, this.getAbiItem(\"offchain\", \"getTokensOf\"));\r\n                this._abiMap.set(AbiItemType.tokenURI, this.getAbiItem(\"offchain\", \"tokenURI\"));\r\n                this._abiMap.set(AbiItemType.getBaseUrl, this.getAbiItem(\"offchain\", \"getBaseUrl\"));\r\n                this._abiMap.set(AbiItemType.getOffer, this.getAbiItem(\"offchain\", \"getOffer\"));\r\n                this._abiMap.set(AbiItemType.getBid, this.getAbiItem(\"offchain\", \"getBid\"));\r\n                this._abiMap.set(AbiItemType.transferEvent, this.getAbiItem(\"event\", \"Transfer\"));\r\n                this._abiMap.set(AbiItemType.marketChangedEvent, this.getAbiItem(\"event\", \"MarketChanged\"));\r\n                this._abiMap.set(AbiItemType.punkChangedEvent, this.getAbiItem(\"event\", \"PunkChanged\"));\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getAbiItem = function (_type, _name) {\r\n        return this._contract.abi.find(function (e) { return e.type === _type && e.name === _name; });\r\n    };\r\n    PunksBaseContract.prototype.getAbiItemByType = function (_abiItemType) {\r\n        return this._abiMap.get(_abiItemType);\r\n    };\r\n    PunksBaseContract.prototype.callOffChainMethodAsync = function (_abiItemType, _params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._client.callOffChainMethodAsync(this._contract.address, this.getAbiItemByType(_abiItemType), this._contract.offChain, _params)];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.setMintPriceAsync = function (_account, _price) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"setMintPriceAsync\", _price)();\r\n                return [2 /*return*/, this.callContractAsync(_account, 'setPrice', [util_1.PunkTypes.MarketEventType.MintPrice, _price])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.setActionPriceAsync = function (_account, _price) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"setActionPriceAsync\", _price)();\r\n                return [2 /*return*/, this.callContractAsync(_account, 'setPrice', [util_1.PunkTypes.MarketEventType.ActionPrice, _price])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getDeveloperAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getDeveloper, [])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"getDeveloperAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.setDeveloperAsync = function (_account, _address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"setDeveloperAsync\", _address)();\r\n                return [2 /*return*/, this.callContractAsync(_account, 'setDeveloper', [_address])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getMarketInfoAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, e;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getMarketInfo, [])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        e = this.objectFromEntries(result);\r\n                        logger.info(\"getMarketInfoAsync\", e)();\r\n                        return [2 /*return*/, {\r\n                                marketStarted: this.toBoolean(e.market_started),\r\n                                mintsRemaining: parseInt(e.mints_remaining),\r\n                                mintPrice: util_1.TransformUtil.toBigNumber(e.mint_price),\r\n                                actionPrice: util_1.TransformUtil.toBigNumber(e.action_price)\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.setMarketStartedAsync = function (_account, _started) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"setMarketStartedAsync\", _started)();\r\n                return [2 /*return*/, this.callContractAsync(_account, 'setMarketStarted', [_started])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.isContractAsync = function (_address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.isContract, [_address])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"isContractAsync\", value)();\r\n                        return [2 /*return*/, this.toBoolean(value)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.balanceOfAsync = function (_owner) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.balanceOf, [_owner])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"balanceOfAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.ownerOfAsync = function (_tokenId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.ownerOf, [_tokenId])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"ownerOfAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getMappedIndexAsync = function (_refId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getMappedIndex, [_refId])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"getMappedIndexAsync\", _refId, \":\", value)();\r\n                        return [2 /*return*/, util_1.TransformUtil.toBigNumber(value)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.setMappedIndicesAsync = function (_account, _indices, _startIndex) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'setMappedIndices', [_indices, _startIndex])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.mintAsync = function (_account, _mintPrice) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'mint', [], _mintPrice)];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.totalSupplyAsync = function (_owner) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.totalSupply, [])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"totalSupplyAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getTokensOfAsync = function (_owner) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getTokensOf, [_owner])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, []];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"getTokensOfAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.tokenURIAsync = function (_tokenId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.tokenURI, [_tokenId])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"tokenURIAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getBaseUrlAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, value;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getBaseUrl, [])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        value = result[0].value;\r\n                        logger.info(\"getBaseUrlAsync\", value)();\r\n                        return [2 /*return*/, value];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.setBaseUrlAsync = function (_account, _baseUrl) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'setBaseUrl', [_baseUrl])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getOfferAsync = function (_punkId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getOffer, [_punkId])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        logger.info(\"getOfferAsync\", \"_punkId\", _punkId, result)();\r\n                        return [2 /*return*/, {\r\n                                isForSale: this.toBoolean(result[0].value),\r\n                                itemIndex: new util_1.PunkTypes.BigNumberWrapper(_punkId),\r\n                                seller: result[1].value,\r\n                                minAmount: new util_1.PunkTypes.BigNumberWrapper(result[2].value),\r\n                                onlySellTo: util_1.TransformUtil.toAddress(result[3].value)\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.getBidAsync = function (_punkId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.callOffChainMethodAsync(AbiItemType.getBid, [_punkId])];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        logger.info(\"getBidAsync\", \"_punkId\", _punkId, result)();\r\n                        return [2 /*return*/, {\r\n                                hasBid: this.toBoolean(result[0].value),\r\n                                itemIndex: new util_1.PunkTypes.BigNumberWrapper(_punkId),\r\n                                bidder: result[1].value,\r\n                                amount: new util_1.PunkTypes.BigNumberWrapper(result[2].value)\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.cancelOfferAsync = function (_account, _punkId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'cancelOffer', [_punkId])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.offerAsync = function (_account, _punkId, _minSalePrice, _fee) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"offerAsync punkId: \".concat(_punkId, \" minSalePrice: \").concat(_minSalePrice, \" fee: \").concat(_fee))();\r\n                return [2 /*return*/, this.callContractAsync(_account, 'offer', [_punkId, _minSalePrice], _fee !== null && _fee !== void 0 ? _fee : undefined)];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.offerToAddressAsync = function (_account, _punkId, _minSalePrice, _address, _fee) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"offerToAddressAsync punkId: \".concat(_punkId, \" minSalePrice: \").concat(_minSalePrice, \" address: \").concat(_address, \" fee: \").concat(_fee))();\r\n                return [2 /*return*/, this.callContractAsync(_account, 'offerToAddress', [_punkId, _minSalePrice, _address], _fee !== null && _fee !== void 0 ? _fee : undefined)];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.buyAsync = function (_account, _punkId, _amount) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'buy', [_punkId], _amount)];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.cancelBidAsync = function (_account, _punkId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'cancelBid', [_punkId])];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.enterBidAsync = function (_account, _punkId, _amount, _fee) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var amount;\r\n            return __generator(this, function (_a) {\r\n                logger.info(\"enterBidAsync punkId: \".concat(_punkId, \" amount: \").concat(_amount, \" fee: \").concat(_fee))();\r\n                amount = _amount;\r\n                if (_fee && !util_1.CommonUtil.isNullOrWhitespace(_fee)) {\r\n                    amount = new util_1.PunkTypes.BigNumberWrapper(_amount).plus(new util_1.PunkTypes.BigNumberWrapper(_fee)).toFixed();\r\n                    logger.info(\"enterBidAsync amount+fee: \".concat(amount))();\r\n                }\r\n                return [2 /*return*/, this.callContractAsync(_account, 'enterBid', [_punkId], amount)];\r\n            });\r\n        });\r\n    };\r\n    PunksBaseContract.prototype.acceptBidAsync = function (_account, _punkId, _minPrice) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.callContractAsync(_account, 'acceptBid', [_punkId, _minPrice])];\r\n            });\r\n        });\r\n    };\r\n    return PunksBaseContract;\r\n}(base_contract_1.BaseContract));\r\nexports.PunksBaseContract = PunksBaseContract;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getViteClient = exports.ViteClient = void 0;\r\nvar vitejs_1 = require(\"@vite/vitejs\");\r\nvar common_1 = require(\"../common\");\r\nvar util_1 = require(\"../util\");\r\nvar wallet_1 = require(\"../wallet\");\r\nvar HTTP_RPC = require('@vite/vitejs-http').HTTP_RPC;\r\nvar WS_RPC = require('@vite/vitejs-ws').WS_RPC;\r\nvar logger = (0, util_1.getLogger)();\r\nvar providerTimeout = 10000;\r\nvar providerOptions = { retryTimes: 10, retryInterval: 1000 };\r\nvar ViteClient = /** @class */ (function () {\r\n    function ViteClient() {\r\n        var _this = this;\r\n        this.initAsync = function (network, providerType, connector) { return __awaiter(_this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                        logger.info(\"initAsync\", network)();\r\n                        _this._network = network;\r\n                        _this._connector = connector;\r\n                        var isResolved = false;\r\n                        if (providerType === util_1.PunkTypes.ProviderType.WEBSOCKET) {\r\n                            _this._provider = new WS_RPC(network.rpcUrl, providerTimeout, providerOptions);\r\n                            // https://github.com/vitelabs/vite.js/blob/master/src/WS/index.js\r\n                            _this._provider.on('close', function () {\r\n                                logger.info('Vite provider closed')();\r\n                                _this._emitter.emitReInit();\r\n                            });\r\n                            _this._provider.on('error', function (err) {\r\n                                logger.error('Vite provider error', isResolved)();\r\n                                if (isResolved)\r\n                                    return;\r\n                                _this._isConnected = false;\r\n                                reject(err);\r\n                            });\r\n                        }\r\n                        else {\r\n                            _this._provider = new HTTP_RPC(network.rpcUrl);\r\n                        }\r\n                        _this._client = new vitejs_1.ViteAPI(_this._provider, function () {\r\n                            logger.info(\"ViteAPI connected to \".concat(_this._provider.path))();\r\n                            isResolved = true;\r\n                            _this._isConnected = true;\r\n                            resolve();\r\n                        });\r\n                    })];\r\n            });\r\n        }); };\r\n        this._isConnected = false;\r\n        this._emitter = (0, util_1.getEmitter)();\r\n    }\r\n    Object.defineProperty(ViteClient.prototype, \"isConnected\", {\r\n        get: function () {\r\n            return this._isConnected;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViteClient.prototype, \"connector\", {\r\n        get: function () {\r\n            return this._connector;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ViteClient.prototype.dispose = function () {\r\n        var _a;\r\n        logger.info(\"Disposing ViteClient\")();\r\n        (_a = this._provider) === null || _a === void 0 ? void 0 : _a.destroy();\r\n        this._isConnected = false;\r\n    };\r\n    ViteClient.prototype.encodeParameter = function (type, param) {\r\n        return vitejs_1.abi.encodeParameter(type, param);\r\n    };\r\n    ViteClient.prototype.encodeLogSignature = function (jsonFunction, methodName) {\r\n        return vitejs_1.abi.encodeLogSignature(jsonFunction, methodName);\r\n    };\r\n    ViteClient.prototype.requestAsync = function (method) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                if (this._isConnected && this._client) {\r\n                    result = util_1.RetryUtil.promiseRetry(function () { return __awaiter(_this, void 0, void 0, function () {\r\n                        var _a;\r\n                        var _this = this;\r\n                        return __generator(this, function (_b) {\r\n                            return [2 /*return*/, (_a = this._client).request.apply(_a, __spreadArray([method], args, false)).catch(function (error) { return __awaiter(_this, void 0, void 0, function () {\r\n                                    var _a;\r\n                                    return __generator(this, function (_b) {\r\n                                        switch (_b.label) {\r\n                                            case 0:\r\n                                                if (!((_a = error === null || error === void 0 ? void 0 : error.message) === null || _a === void 0 ? void 0 : _a.toLowerCase().includes(\"connection error\"))) return [3 /*break*/, 2];\r\n                                                logger.error(\"CONNECTION ERROR -> reconnect\", this._network)();\r\n                                                this._emitter.emitReInit();\r\n                                                return [4 /*yield*/, util_1.CommonUtil.timeout(3000)];\r\n                                            case 1:\r\n                                                _b.sent();\r\n                                                throw error;\r\n                                            case 2: throw error;\r\n                                        }\r\n                                    });\r\n                                }); })];\r\n                        });\r\n                    }); });\r\n                    return [2 /*return*/, result];\r\n                }\r\n                else {\r\n                    throw new Error('Vite client is not ready to make requests.');\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.getSnapshotChainHeightAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.requestAsync('ledger_getSnapshotChainHeight')];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, new util_1.PunkTypes.BigNumberWrapper(result)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.getAccountBlockHeightAsync = function (address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.requestAsync(\"ledger_getAccountInfoByAddress\", address)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, new util_1.PunkTypes.BigNumberWrapper(result.blockCount)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.getBalanceAsync = function (address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.requestAsync(\"ledger_getAccountInfoByAddress\", address)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, new util_1.PunkTypes.BigNumberWrapper(result.balanceInfoMap[common_1.CommonConstants.VITE_TOKEN_ID].balance)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.getQuotaAsync = function (address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.requestAsync(\"contract_getQuotaByAccount\", address)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, {\r\n                                currentQuota: new util_1.PunkTypes.BigNumberWrapper(result.currentQuota),\r\n                                maxQuota: new util_1.PunkTypes.BigNumberWrapper(result.maxQuota),\r\n                                stakeAmount: new util_1.PunkTypes.BigNumberWrapper(result.stakeAmount)\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.sendAsync = function (account, toAddress, amount, tokenId) {\r\n        if (tokenId === void 0) { tokenId = common_1.CommonConstants.VITE_TOKEN_ID; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var block;\r\n            return __generator(this, function (_a) {\r\n                block = vitejs_1.accountBlock\r\n                    .createAccountBlock(\"send\", {\r\n                    address: account.address,\r\n                    toAddress: toAddress,\r\n                    tokenId: tokenId,\r\n                    amount: amount\r\n                });\r\n                return [2 /*return*/, this.sendAccountBlockAsync(account, block)];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.stakeForQuotaAsync = function (account, beneficiaryAddress, amount) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var block;\r\n            return __generator(this, function (_a) {\r\n                block = vitejs_1.accountBlock\r\n                    .createAccountBlock(\"stakeForQuota\", {\r\n                    address: account.address,\r\n                    beneficiaryAddress: beneficiaryAddress,\r\n                    amount: amount\r\n                });\r\n                return [2 /*return*/, this.sendAccountBlockAsync(account, block)];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.callContractAsync = function (account, methodName, abi, params, toAddress, amount, tokenId) {\r\n        if (amount === void 0) { amount = '0'; }\r\n        if (tokenId === void 0) { tokenId = common_1.CommonConstants.VITE_TOKEN_ID; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var block;\r\n            return __generator(this, function (_a) {\r\n                block = vitejs_1.accountBlock\r\n                    .createAccountBlock(\"callContract\", {\r\n                    address: account.address,\r\n                    abi: abi,\r\n                    methodName: methodName,\r\n                    tokenId: tokenId,\r\n                    amount: amount,\r\n                    toAddress: toAddress,\r\n                    params: params,\r\n                });\r\n                return [2 /*return*/, this.sendAccountBlockAsync(account, block)];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.createContractAsync = function (account, abi, binary) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var responseLatency, quotaMultiplier, randomDegree, block;\r\n            return __generator(this, function (_a) {\r\n                responseLatency = 1;\r\n                quotaMultiplier = 10;\r\n                randomDegree = 1;\r\n                block = vitejs_1.accountBlock\r\n                    .createAccountBlock(\"createContract\", {\r\n                    address: account.address,\r\n                    abi: abi,\r\n                    code: binary,\r\n                    responseLatency: responseLatency,\r\n                    params: [],\r\n                    quotaMultiplier: quotaMultiplier,\r\n                    randomDegree: randomDegree\r\n                });\r\n                return [2 /*return*/, this.sendAccountBlockAsync(account, block)];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.callOffChainMethodAsync = function (contractAddress, abi, offchaincode, params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var data, dataBase64, result, resultBytes, outputs, i, offchainDecodeResult, resultList, i;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        data = vitejs_1.abi.encodeFunctionCall(abi, params);\r\n                        dataBase64 = Buffer.from(data, \"hex\").toString(\"base64\");\r\n                        return [4 /*yield*/, this.requestAsync(\"contract_callOffChainMethod\", {\r\n                                selfAddr: contractAddress,\r\n                                offChainCode: offchaincode,\r\n                                data: dataBase64,\r\n                            })];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (result) {\r\n                            resultBytes = Buffer.from(result, \"base64\").toString(\"hex\");\r\n                            outputs = [];\r\n                            for (i = 0; i < abi.outputs.length; i++) {\r\n                                outputs.push(abi.outputs[i].type);\r\n                            }\r\n                            offchainDecodeResult = vitejs_1.abi.decodeParameters(outputs, resultBytes);\r\n                            resultList = [];\r\n                            if (offchainDecodeResult) {\r\n                                for (i = 0; i < abi.outputs.length; i++) {\r\n                                    if (abi.outputs[i].name) {\r\n                                        resultList.push({\r\n                                            name: abi.outputs[i].name,\r\n                                            value: offchainDecodeResult[i],\r\n                                        });\r\n                                    }\r\n                                    else {\r\n                                        resultList.push({\r\n                                            name: \"\",\r\n                                            value: offchainDecodeResult[i],\r\n                                        });\r\n                                    }\r\n                                }\r\n                            }\r\n                            return [2 /*return*/, resultList];\r\n                        }\r\n                        return [2 /*return*/, \"\"];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.decodeVmLog = function (vmLog, abi) {\r\n        var topics = vmLog.topics;\r\n        for (var j = 0; j < abi.length; j++) {\r\n            var abiItem = abi[j];\r\n            if (vitejs_1.abi.encodeLogSignature(abiItem) === topics[0]) {\r\n                var result = this.decodeVmLogByAbiItem(vmLog, abiItem);\r\n                if (result) {\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    ViteClient.prototype.decodeVmLogByAbiItem = function (vmLog, abiItem) {\r\n        if (!vmLog || !vmLog.data || !vmLog.topics) {\r\n            return undefined;\r\n        }\r\n        var topics = vmLog.topics;\r\n        var log = {\r\n            topic: topics[0],\r\n            args: vitejs_1.abi.decodeLog(abiItem.inputs, vitejs_1.utils._Buffer.from(vmLog.data, \"base64\").toString(\"hex\"), topics.slice(1)),\r\n            event: abiItem.name,\r\n        };\r\n        return log;\r\n    };\r\n    ViteClient.prototype.getEventsByBlockAsync = function (address, fromHeight, toHeight, topics) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var payload, result, error_1, midHeight, arr2;\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (fromHeight.gt(toHeight)) {\r\n                            logger.info(\"getEventsByBlockAsync \".concat(fromHeight.toFixed(), \" > \").concat(toHeight.toFixed()))();\r\n                            return [2 /*return*/, []];\r\n                        }\r\n                        payload = {\r\n                            addressHeightRange: (_a = {},\r\n                                _a[address] = {\r\n                                    fromHeight: fromHeight.toFixed(),\r\n                                    toHeight: toHeight.toFixed(),\r\n                                },\r\n                                _a),\r\n                            topics: topics\r\n                        };\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 3, , 5]);\r\n                        return [4 /*yield*/, this.requestAsync(\"ledger_getVmLogsByFilter\", payload)];\r\n                    case 2:\r\n                        result = _b.sent();\r\n                        return [2 /*return*/, result];\r\n                    case 3:\r\n                        error_1 = _b.sent();\r\n                        midHeight = fromHeight.plus(toHeight).div(2);\r\n                        logger.info(\"Divide and conquer block fromHeight: \".concat(fromHeight.toFixed(), \" toHeight: \").concat(toHeight.toFixed(), \" midHeight: \").concat(midHeight.toFixed()))();\r\n                        return [4 /*yield*/, this.getEventsByBlockAsync(address, midHeight.plus(1), toHeight, topics)];\r\n                    case 4:\r\n                        arr2 = _b.sent();\r\n                        //return [...arr1, ...arr2];\r\n                        return [2 /*return*/, arr2];\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.createAddressListenerAsync = function (address) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var payload, result;\r\n            var _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        payload = {\r\n                            addressHeightRange: (_b = {},\r\n                                _b[address] = {\r\n                                    fromHeight: \"0\",\r\n                                    toHeight: \"0\",\r\n                                },\r\n                                _b),\r\n                        };\r\n                        return [4 /*yield*/, ((_a = this._client) === null || _a === void 0 ? void 0 : _a.subscribe(\"createVmlogSubscription\", payload))];\r\n                    case 1:\r\n                        result = _c.sent();\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.removeListener = function (event) {\r\n        var _a;\r\n        logger.info('removeListener')();\r\n        (_a = this._client) === null || _a === void 0 ? void 0 : _a.unsubscribe(event);\r\n    };\r\n    ViteClient.prototype.waitForNextVmLogEventAsync = function (listener, abi) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                logger.info('waitForNextVmLogEvent')();\r\n                return [2 /*return*/, new Promise(function (resolve) { return __awaiter(_this, void 0, void 0, function () {\r\n                        var _this = this;\r\n                        return __generator(this, function (_a) {\r\n                            // listener = EventEmitter\r\n                            // https://github.com/vitelabs/vite.js/blob/14b87a6ddc68fe5836816f949f85d6161e6cfed8/src/viteAPI/eventEmitter.ts\r\n                            listener.on(function (results) { return __awaiter(_this, void 0, void 0, function () {\r\n                                var result, vmLog;\r\n                                return __generator(this, function (_a) {\r\n                                    if (results.length !== 1) {\r\n                                        console.log(results);\r\n                                        throw new Error('Unexpected results');\r\n                                    }\r\n                                    result = results[results.length - 1];\r\n                                    vmLog = this.decodeVmLog(result.vmlog, abi);\r\n                                    logger.info(\"vmLog\", vmLog)();\r\n                                    // https://github.com/vitelabs/vite.js/blob/14b87a6ddc68fe5836816f949f85d6161e6cfed8/src/viteAPI/provider.ts\r\n                                    // Don't unsubscribe, listener should be reusable!\r\n                                    // provider.unsubscribe(listener);\r\n                                    resolve(vmLog);\r\n                                    return [2 /*return*/];\r\n                                });\r\n                            }); });\r\n                            return [2 /*return*/];\r\n                        });\r\n                    }); })];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.waitForAccountBlockAsync = function (address, height) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, new Promise(function (resolve, reject) { return __awaiter(_this, void 0, void 0, function () {\r\n                        var result, error, timestamp, task;\r\n                        var _this = this;\r\n                        return __generator(this, function (_a) {\r\n                            result = undefined;\r\n                            error = undefined;\r\n                            timestamp = Date.now();\r\n                            task = new util_1.Task(function () { return __awaiter(_this, void 0, void 0, function () {\r\n                                var blockByHeight, receiveBlockHash, blockByHash, err_1;\r\n                                return __generator(this, function (_a) {\r\n                                    switch (_a.label) {\r\n                                        case 0:\r\n                                            _a.trys.push([0, 3, , 4]);\r\n                                            if (Date.now() - timestamp >= providerTimeout) {\r\n                                                throw new Error(\"Task timed out\");\r\n                                            }\r\n                                            return [4 /*yield*/, this.requestAsync('ledger_getAccountBlockByHeight', address, height)];\r\n                                        case 1:\r\n                                            blockByHeight = _a.sent();\r\n                                            if (!blockByHeight) {\r\n                                                return [2 /*return*/, true];\r\n                                            }\r\n                                            receiveBlockHash = blockByHeight.receiveBlockHash;\r\n                                            if (!receiveBlockHash) {\r\n                                                return [2 /*return*/, true];\r\n                                            }\r\n                                            return [4 /*yield*/, this.requestAsync('ledger_getAccountBlockByHash', receiveBlockHash)];\r\n                                        case 2:\r\n                                            blockByHash = _a.sent();\r\n                                            if (!blockByHash) {\r\n                                                return [2 /*return*/, true];\r\n                                            }\r\n                                            result = __assign(__assign({}, this.getAccountBlockStatus(blockByHash)), { accountBlock: blockByHash });\r\n                                            return [2 /*return*/, false];\r\n                                        case 3:\r\n                                            err_1 = _a.sent();\r\n                                            error = err_1;\r\n                                            return [2 /*return*/, false];\r\n                                        case 4: return [2 /*return*/];\r\n                                    }\r\n                                });\r\n                            }); }, 500);\r\n                            task.start(function () {\r\n                                if (error) {\r\n                                    reject(error);\r\n                                }\r\n                                else {\r\n                                    resolve(result);\r\n                                }\r\n                            });\r\n                            return [2 /*return*/];\r\n                        });\r\n                    }); })];\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.receiveTransactionAsync = function (account, block) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var blocks, ab;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!!block) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.requestAsync(\"ledger_getUnreceivedBlocksByAddress\", account.address, 0, 1)];\r\n                    case 1:\r\n                        blocks = _a.sent();\r\n                        if (blocks && blocks.length > 0) {\r\n                            block = blocks[0];\r\n                        }\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (!block) {\r\n                            logger.info(\"No Unreceived Blocks: \".concat(account.address))();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        ab = vitejs_1.accountBlock\r\n                            .createAccountBlock(\"receive\", {\r\n                            address: account.address,\r\n                            sendBlockHash: block.hash,\r\n                        });\r\n                        return [2 /*return*/, this.sendAccountBlockAsync(account, ab)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.receiveAllOnroadTxAsync = function (account) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var RECEIVE_PER_ROUND, blocks, i, block;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        RECEIVE_PER_ROUND = 10;\r\n                        return [4 /*yield*/, this.requestAsync(\"ledger_getUnreceivedBlocksByAddress\", account.address, 0, RECEIVE_PER_ROUND)];\r\n                    case 1:\r\n                        blocks = _a.sent();\r\n                        i = 0;\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (!(i < blocks.length)) return [3 /*break*/, 5];\r\n                        block = blocks[i];\r\n                        return [4 /*yield*/, this.receiveTransactionAsync(account, block)];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        i++;\r\n                        return [3 /*break*/, 2];\r\n                    case 5:\r\n                        if (!(blocks.length >= RECEIVE_PER_ROUND)) return [3 /*break*/, 7];\r\n                        return [4 /*yield*/, this.receiveAllOnroadTxAsync(account)];\r\n                    case 6:\r\n                        _a.sent();\r\n                        _a.label = 7;\r\n                    case 7: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.sendAccountBlockAsync = function (account, block) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, result, error_2;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(account instanceof wallet_1.WebWalletAccount)) return [3 /*break*/, 3];\r\n                        block = block.setProvider(this._client).setPrivateKey(account.privateKey);\r\n                        return [4 /*yield*/, block.autoSetPreviousAccountBlock()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, block.sign().send()];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, result];\r\n                    case 3:\r\n                        if (!(account instanceof wallet_1.SessionWalletAccount)) return [3 /*break*/, 10];\r\n                        if (!this.connector) return [3 /*break*/, 8];\r\n                        this._emitter.emitConfirmTransactionDialog(true);\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        _a.trys.push([4, 6, , 7]);\r\n                        return [4 /*yield*/, this.connector.sendTransactionAsync({\r\n                                block: block.accountBlock\r\n                            })];\r\n                    case 5:\r\n                        result = _a.sent();\r\n                        this._emitter.emitConfirmTransactionDialog(false);\r\n                        return [2 /*return*/, result];\r\n                    case 6:\r\n                        error_2 = _a.sent();\r\n                        this._emitter.emitConfirmTransactionDialog(false);\r\n                        throw error_2;\r\n                    case 7: return [3 /*break*/, 9];\r\n                    case 8: throw new Error(\"Connector is not defined\");\r\n                    case 9: return [3 /*break*/, 11];\r\n                    case 10: throw new Error(\"Account not supported\");\r\n                    case 11: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteClient.prototype.getAccountBlockStatus = function (accountBlock) {\r\n        var status = this.resolveAccountBlockData(accountBlock);\r\n        var statusTxt = '';\r\n        switch (status) {\r\n            case 0:\r\n                statusTxt = '0, Execution succeed';\r\n                break;\r\n            case 1:\r\n                statusTxt = '1, Execution reverted';\r\n                break;\r\n            case 2:\r\n                statusTxt = '2, Max call depth exceeded';\r\n                break;\r\n        }\r\n        return {\r\n            status: status,\r\n            statusTxt: statusTxt\r\n        };\r\n    };\r\n    ViteClient.prototype.resolveAccountBlockData = function (accountBlock) {\r\n        if ((accountBlock.blockType !== 4 && accountBlock.blockType !== 5) ||\r\n            !accountBlock.data) {\r\n            return 0;\r\n        }\r\n        var bytes = vitejs_1.utils._Buffer.from(accountBlock.data, 'base64');\r\n        if (bytes.length !== 33) {\r\n            return 0;\r\n        }\r\n        return bytes[32];\r\n    };\r\n    return ViteClient;\r\n}());\r\nexports.ViteClient = ViteClient;\r\nvar client = new ViteClient();\r\nvar getViteClient = function () {\r\n    return client;\r\n};\r\nexports.getViteClient = getViteClient;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseDataSource = void 0;\r\nvar common_1 = require(\"../common\");\r\nvar search_1 = require(\"../search\");\r\nvar util_1 = require(\"../util\");\r\nvar logger = (0, util_1.getLogger)();\r\nvar BaseDataSource = /** @class */ (function () {\r\n    function BaseDataSource() {\r\n        this._accountAuctions = new Map();\r\n        this._emitter = (0, util_1.getEmitter)();\r\n        this._punkSearch = (0, search_1.getPunkSearch)();\r\n        this.clear();\r\n    }\r\n    BaseDataSource.prototype.clear = function () {\r\n        this._punkAttributes = [];\r\n        this._punks = [];\r\n        this._punksFiltered = {\r\n            sortBy: common_1.DefaultPunkFilterValues.sortBy,\r\n            orderBy: common_1.DefaultPunkFilterValues.orderBy,\r\n            searchTerm: common_1.DefaultPunkFilterValues.search,\r\n            items: []\r\n        };\r\n    };\r\n    BaseDataSource.prototype.initPunkAttributesAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var attributes;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.fileUtil.readFileAsync(\"./assets/data/punk_attributes.json?v=\" + process.env.REACT_APP_VERSION)];\r\n                    case 1:\r\n                        attributes = _a.sent();\r\n                        attributes = JSON.parse(attributes);\r\n                        this._punkAttributes = attributes;\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.initPunksAsync = function () {\r\n        var _a, _b, _c, _d;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var punks, infos, index, p, info, punk;\r\n            return __generator(this, function (_e) {\r\n                switch (_e.label) {\r\n                    case 0: return [4 /*yield*/, this.fileUtil.readFileAsync(\"./assets/data/punks.gz?v=\" + process.env.REACT_APP_VERSION, \"binary\")];\r\n                    case 1:\r\n                        punks = _e.sent();\r\n                        punks = JSON.parse(util_1.CompressUtil.decompress(util_1.CommonUtil.toUint8Array(punks)));\r\n                        infos = this._punkInfos;\r\n                        if (!infos || infos.length !== common_1.CommonConstants.TOTAL_MINTS) {\r\n                            logger.info(\"Invalid punk infos\")();\r\n                            infos = this.getDefaultPunkInfos();\r\n                        }\r\n                        for (index = 0; index < punks.length; index++) {\r\n                            p = punks[index];\r\n                            info = infos[index];\r\n                            punk = {\r\n                                __typename: util_1.PunkTypes.TypeNames.Punk,\r\n                                id: p.index.toString(),\r\n                                rank: p.rank,\r\n                                image: p.image,\r\n                                cid: (_a = p.cid) !== null && _a !== void 0 ? _a : \"0\",\r\n                                attributes: p.attributes,\r\n                                owner: (_b = info.owner) !== null && _b !== void 0 ? _b : null,\r\n                                bid: (_c = info.bid) !== null && _c !== void 0 ? _c : null,\r\n                                offer: (_d = info.offer) !== null && _d !== void 0 ? _d : null\r\n                            };\r\n                            this._punks.push(punk);\r\n                            if (this._punksFiltered.orderBy === util_1.PunkTypes.OrderBy.ASC) {\r\n                                this._punksFiltered.items.push(punk);\r\n                            }\r\n                            else {\r\n                                this._punksFiltered.items.unshift(punk);\r\n                            }\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.updatePunksAsync = function () {\r\n        var _a, _b, _c;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var index, p, info;\r\n            return __generator(this, function (_d) {\r\n                if (this._punkInfos) {\r\n                    for (index = 0; index < this._punks.length; index++) {\r\n                        p = this._punks[index];\r\n                        info = this._punkInfos[index];\r\n                        p.owner = (_a = info.owner) !== null && _a !== void 0 ? _a : null;\r\n                        p.bid = (_b = info.bid) !== null && _b !== void 0 ? _b : null;\r\n                        p.offer = (_c = info.offer) !== null && _c !== void 0 ? _c : null;\r\n                    }\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.initAccountAuctionsAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var addAccountAuction, _i, _a, p, bidAuction, offerAuction;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                this._accountAuctions = new Map();\r\n                addAccountAuction = function (_address, _auction) {\r\n                    var auctions = _this._accountAuctions.get(_address);\r\n                    if (!auctions) {\r\n                        auctions = [];\r\n                        _this._accountAuctions.set(_address, auctions);\r\n                    }\r\n                    auctions.push(_auction);\r\n                };\r\n                for (_i = 0, _a = this._punks; _i < _a.length; _i++) {\r\n                    p = _a[_i];\r\n                    if (p.owner && !util_1.CommonUtil.isNullOrWhitespace(p.owner)) {\r\n                        if (p.bid && p.bid.timestamp) {\r\n                            bidAuction = {\r\n                                timestamp: p.bid.timestamp,\r\n                                auctionType: util_1.PunkTypes.AccountAuctionType.Bid,\r\n                                punkId: parseInt(p.id),\r\n                                owner: p.owner,\r\n                                amount: p.bid.amount,\r\n                                address: p.bid.bidder\r\n                            };\r\n                            addAccountAuction(p.owner, bidAuction);\r\n                            if (bidAuction.address && !util_1.CommonUtil.isNullOrWhitespace(bidAuction.address) && bidAuction.address !== p.owner) {\r\n                                addAccountAuction(bidAuction.address, bidAuction);\r\n                            }\r\n                        }\r\n                        if (p.offer && p.offer.timestamp) {\r\n                            offerAuction = {\r\n                                timestamp: p.offer.timestamp,\r\n                                auctionType: util_1.PunkTypes.AccountAuctionType.Offer,\r\n                                punkId: parseInt(p.id),\r\n                                owner: p.owner,\r\n                                amount: p.offer.minAmount,\r\n                                address: p.offer.onlySellTo\r\n                            };\r\n                            addAccountAuction(p.owner, offerAuction);\r\n                            if (offerAuction.address && !util_1.CommonUtil.isNullOrWhitespace(offerAuction.address) && offerAuction.address !== p.owner) {\r\n                                addAccountAuction(offerAuction.address, offerAuction);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.initBaseAsync = function (network, providerType, connector) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"Init BaseDataSource\")();\r\n                        this.clear();\r\n                        return [4 /*yield*/, this.initAsync(network, providerType, connector)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.initPunkAttributesAsync()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.initPunkInfosAsync()];\r\n                    case 3:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.initPunksAsync()];\r\n                    case 4:\r\n                        _a.sent();\r\n                        this._punkSearch.index(this._punks);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.dispose = function () {\r\n        logger.info(\"Disposing BaseDataSource\")();\r\n        this.disposeProtected();\r\n    };\r\n    BaseDataSource.prototype.getAccount = function () {\r\n        var account = this.walletManager.getActiveAccount();\r\n        util_1.Ensure.notNull(account, \"account\", \"Please connect your wallet first.\");\r\n        return account;\r\n    };\r\n    BaseDataSource.prototype.getPunkAttributesAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._punkAttributes];\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.getPunkAsync = function (id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var punkId;\r\n            return __generator(this, function (_a) {\r\n                if (!util_1.CommonUtil.isNumber(id)) {\r\n                    throw new Error(\"Invalid punk identifier.\");\r\n                }\r\n                punkId = parseInt(id) - 1;\r\n                if (punkId < 0 || punkId >= this._punks.length) {\r\n                    throw new Error(\"Punk does not exist.\");\r\n                }\r\n                return [2 /*return*/, this._punks[punkId]];\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.getPunksAsync = function (_limit, _offset, _sort, _order, _search) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_c) {\r\n                // check if sort, order or search changed -> update punksFiltered\r\n                if (this._punksFiltered.searchTerm !== _search || this._punksFiltered.sortBy !== _sort || this._punksFiltered.orderBy !== _order) {\r\n                    logger.info(\"limit\", _limit, \"offset\", _offset, \"sort\", _sort, \"order\", _order)();\r\n                    this._punksFiltered.searchTerm = _search;\r\n                    this._punksFiltered.items = (_a = this._punkSearch.search(_search, this._punks)) !== null && _a !== void 0 ? _a : [];\r\n                    this._punksFiltered.sortBy = _sort;\r\n                    this._punksFiltered.orderBy = _order;\r\n                    this._punksFiltered.items = (_b = util_1.FilterUtil.sortPunks(this._punksFiltered.sortBy, this._punksFiltered.orderBy, this._punksFiltered.items)) !== null && _b !== void 0 ? _b : [];\r\n                }\r\n                return [2 /*return*/, this._punksFiltered.items.slice(_offset, _offset + _limit)];\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.getPunksAllAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._punks];\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.getActionPriceAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!!this._actionPrice) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.getMarketInfoAsync()];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        this._actionPrice = result.actionPrice;\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/, this._actionPrice];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.getMintPriceAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!!this._mintPrice) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.getMarketInfoAsync()];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        this._mintPrice = result.mintPrice;\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/, this._mintPrice];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.getAccountAuctionsAsync = function (_address, _limit, _cursor) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var cursorIndex, auctions, result;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        logger.info(\"getAccountAuctionsAsync\", _address, _limit, _cursor)();\r\n                        cursorIndex = 0;\r\n                        auctions = [];\r\n                        if (!(!_cursor || util_1.CommonUtil.isNullOrWhitespace(_cursor))) return [3 /*break*/, 4];\r\n                        return [4 /*yield*/, this.initPunkInfosAsync()];\r\n                    case 1:\r\n                        _c.sent();\r\n                        return [4 /*yield*/, this.updatePunksAsync()];\r\n                    case 2:\r\n                        _c.sent();\r\n                        return [4 /*yield*/, this.initAccountAuctionsAsync()];\r\n                    case 3:\r\n                        _c.sent();\r\n                        this.orderAccountAuctions(_address);\r\n                        auctions = (_a = this._accountAuctions.get(_address)) !== null && _a !== void 0 ? _a : [];\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        auctions = (_b = this._accountAuctions.get(_address)) !== null && _b !== void 0 ? _b : [];\r\n                        cursorIndex = auctions.findIndex(function (e) { return e.timestamp.eq(new util_1.PunkTypes.BigNumberWrapper(_cursor)); });\r\n                        logger.info(\"Cursor\", _cursor, \"cursorIndex\", cursorIndex)();\r\n                        if (cursorIndex === -1) {\r\n                            logger.info(\"getAccountAuctionsAsync cursor index not found\")();\r\n                            auctions = [];\r\n                        }\r\n                        else {\r\n                            auctions = auctions.slice(cursorIndex + 1);\r\n                        }\r\n                        _c.label = 5;\r\n                    case 5:\r\n                        result = auctions.slice(0, _limit);\r\n                        return [2 /*return*/, {\r\n                                cursor: {\r\n                                    prev: _cursor !== null && _cursor !== void 0 ? _cursor : null,\r\n                                    next: auctions.length > _limit ? result[result.length - 1].timestamp.toFixed() : null\r\n                                },\r\n                                auctions: result\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BaseDataSource.prototype.createId = function () {\r\n        return util_1.CommonUtil.uuid();\r\n    };\r\n    BaseDataSource.prototype.getDefaultPunkInfos = function () {\r\n        var infos = [];\r\n        for (var index = 1; index <= common_1.CommonConstants.TOTAL_MINTS; index++) {\r\n            infos.push({\r\n                id: index.toString()\r\n            });\r\n        }\r\n        return infos;\r\n    };\r\n    BaseDataSource.prototype.orderAccountAuctions = function (_address) {\r\n        var auctions = this._accountAuctions.get(_address);\r\n        if (!auctions) {\r\n            return;\r\n        }\r\n        auctions = auctions.sort(function (a, b) {\r\n            return a.timestamp.gt(b.timestamp) ? -1 : 1;\r\n        });\r\n        this._accountAuctions.set(_address, auctions);\r\n    };\r\n    return BaseDataSource;\r\n}());\r\nexports.BaseDataSource = BaseDataSource;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ViteBaseDataSource = void 0;\r\nvar axios_1 = require(\"axios\");\r\nvar _1 = require(\".\");\r\nvar clients_1 = require(\"../clients\");\r\nvar common_1 = require(\"../common\");\r\nvar contracts_1 = require(\"../contracts\");\r\nvar util_1 = require(\"../util\");\r\nvar logger = (0, util_1.getLogger)();\r\nvar ViteBaseDataSource = /** @class */ (function (_super) {\r\n    __extends(ViteBaseDataSource, _super);\r\n    function ViteBaseDataSource() {\r\n        var _this = _super.call(this) || this;\r\n        _this.getNewMarketEventsAsync = function (_from) { return __awaiter(_this, void 0, void 0, function () {\r\n            var abiItem, encodedLogSignature, topics, toHeight;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        abiItem = this.contract.getAbiItemByType(contracts_1.AbiItemType.punkChangedEvent);\r\n                        encodedLogSignature = this._client.encodeLogSignature(abiItem);\r\n                        topics = [\r\n                            [\r\n                                encodedLogSignature\r\n                            ]\r\n                        ];\r\n                        return [4 /*yield*/, this._client.getAccountBlockHeightAsync(this.contract.contract.address)];\r\n                    case 1:\r\n                        toHeight = _a.sent();\r\n                        return [4 /*yield*/, this._client.getEventsByBlockAsync(this.contract.contract.address, _from, toHeight, topics)];\r\n                    case 2: return [2 /*return*/, _a.sent()];\r\n                }\r\n            });\r\n        }); };\r\n        _this._client = (0, clients_1.getViteClient)();\r\n        return _this;\r\n    }\r\n    ViteBaseDataSource.prototype.initPunkInfosAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, infos, _i, _a, p, info, index, error_1;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _b.trys.push([0, 3, , 4]);\r\n                        return [4 /*yield*/, (0, axios_1.default)({\r\n                                method: 'get',\r\n                                url: common_1.CommonConfig.IS_PRODUCTION ? common_1.CommonConstants.MARKET_DATA_URL : \"\",\r\n                                responseType: 'json',\r\n                                timeout: 3000\r\n                            })];\r\n                    case 1:\r\n                        result = _b.sent();\r\n                        infos = result.data;\r\n                        this._punkInfos = this.getDefaultPunkInfos();\r\n                        if (infos && Array.isArray(infos.punks)) {\r\n                            for (_i = 0, _a = infos.punks; _i < _a.length; _i++) {\r\n                                p = _a[_i];\r\n                                info = util_1.TransformUtil.toPunkInfo(p);\r\n                                if (info) {\r\n                                    index = parseInt(p.id) - 1;\r\n                                    this._punkInfos[index] = info;\r\n                                }\r\n                            }\r\n                        }\r\n                        return [4 /*yield*/, this.updatePunkInfosAsync(util_1.TransformUtil.toBigNumber(infos.refHeight))];\r\n                    case 2:\r\n                        _b.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        error_1 = _b.sent();\r\n                        logger.error(error_1)();\r\n                        return [3 /*break*/, 4];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.initAsync = function (network, providerType, connector) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        logger.info('Init ViteDataSource')();\r\n                        this.disposeProtected();\r\n                        return [4 /*yield*/, this._client.initAsync(network, providerType, connector)];\r\n                    case 1:\r\n                        _b.sent();\r\n                        return [4 /*yield*/, this.contract.initAsync(this._client, \"./assets/contracts\")];\r\n                    case 2:\r\n                        _b.sent();\r\n                        _a = this;\r\n                        return [4 /*yield*/, this._client.createAddressListenerAsync(this.contract.contract.address)];\r\n                    case 3:\r\n                        _a._listener = _b.sent();\r\n                        this._listener.on(function (results) {\r\n                            var _a;\r\n                            if (!((_a = _this.contract) === null || _a === void 0 ? void 0 : _a.contract.abi)) {\r\n                                logger.error('Could not decode vmlog because contract abi is not defined.')();\r\n                            }\r\n                            else {\r\n                                for (var index = 0; index < results.length; index++) {\r\n                                    var result = results[index];\r\n                                    var vmLog = _this._client.decodeVmLog(result.vmlog, _this.contract.contract.abi);\r\n                                    logger.info(vmLog !== null && vmLog !== void 0 ? vmLog : result)();\r\n                                    if (vmLog) {\r\n                                        _this.handleVmLogAsync(result.accountBlockHash, result.accountBlockHeight, vmLog);\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.disposeProtected = function () {\r\n        logger.info('Dispose ViteDataSource')();\r\n        if (this._listener) {\r\n            this._client.removeListener(this._listener);\r\n        }\r\n        this._client.dispose();\r\n    };\r\n    ViteBaseDataSource.prototype.getQuotaAsync = function (_address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._client.getQuotaAsync(_address)];\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getPunkEventsAsync = function (_id, _limit, _offset, _height) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var abiItem, encodedLogSignature, topics, fromHeight, toHeight, result, events;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"id\", _id, \"limit\", _limit, \"offset\", _offset, \"height\", _height)();\r\n                        if (util_1.CommonUtil.isNullOrWhitespace(_id)) {\r\n                            return [2 /*return*/, {\r\n                                    blockHeight: util_1.TransformUtil.defaultBigNumber,\r\n                                    events: []\r\n                                }];\r\n                        }\r\n                        abiItem = this.contract.getAbiItemByType(contracts_1.AbiItemType.punkChangedEvent);\r\n                        encodedLogSignature = this._client.encodeLogSignature(abiItem);\r\n                        topics = [\r\n                            [\r\n                                encodedLogSignature\r\n                            ],\r\n                            [\r\n                            // don't filter based on eventType\r\n                            ],\r\n                            [\r\n                                // filter based on punkId\r\n                                this._client.encodeParameter('uint256', _id)\r\n                            ]\r\n                        ];\r\n                        fromHeight = this.getEventsFromHeight();\r\n                        return [4 /*yield*/, this.getAccountBlockHeightAsync(this.contract.contract.address, _height)];\r\n                    case 1:\r\n                        toHeight = _a.sent();\r\n                        return [4 /*yield*/, this._client.getEventsByBlockAsync(this.contract.contract.address, fromHeight, toHeight, topics)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        result = result === null || result === void 0 ? void 0 : result.reverse().slice(_offset, _offset + _limit);\r\n                        events = this.toPunkEvents(result);\r\n                        return [2 /*return*/, {\r\n                                blockHeight: toHeight,\r\n                                events: events\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getPunkOwnerAsync = function (_id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.contract.ownerOfAsync(_id)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getPunksByAddressAsync = function (_address, _limit, _offset) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, punks, _i, result_1, id, punk;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"getPunksByAddressAsync\", _address, _limit, _offset)();\r\n                        if (util_1.CommonUtil.isNullOrWhitespace(_address)) {\r\n                            return [2 /*return*/, []];\r\n                        }\r\n                        return [4 /*yield*/, this.contract.getTokensOfAsync(_address)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        result = result.slice(_offset, _offset + _limit);\r\n                        punks = [];\r\n                        _i = 0, result_1 = result;\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (!(_i < result_1.length)) return [3 /*break*/, 5];\r\n                        id = result_1[_i];\r\n                        return [4 /*yield*/, this.getPunkAsync(id)];\r\n                    case 3:\r\n                        punk = _a.sent();\r\n                        punks.push(punk);\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        _i++;\r\n                        return [3 /*break*/, 2];\r\n                    case 5: return [2 /*return*/, punks];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getMarketBidAsync = function (_id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.contract.getBidAsync(_id)];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        if (!result || !result.hasBid) {\r\n                            return [2 /*return*/, null];\r\n                        }\r\n                        return [2 /*return*/, {\r\n                                __typename: util_1.PunkTypes.TypeNames.MarketBid,\r\n                                itemIndex: result.itemIndex,\r\n                                amount: result.amount,\r\n                                bidder: result.bidder,\r\n                                timestamp: null\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getMarketOfferAsync = function (_id) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, this.contract.getOfferAsync(_id)];\r\n                    case 1:\r\n                        result = _b.sent();\r\n                        if (!result || !result.isForSale) {\r\n                            return [2 /*return*/, null];\r\n                        }\r\n                        return [2 /*return*/, {\r\n                                __typename: util_1.PunkTypes.TypeNames.MarketOffer,\r\n                                itemIndex: result.itemIndex,\r\n                                minAmount: result.minAmount,\r\n                                seller: result.seller,\r\n                                onlySellTo: (_a = result.onlySellTo) !== null && _a !== void 0 ? _a : '',\r\n                                timestamp: null\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getMarketEventsAsync = function (_limit, _offset, _height) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var abiItem, encodedLogSignature, topics, toHeight, fromHeight, result, events;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"getMarketEventsAsync\", _limit, _offset)();\r\n                        abiItem = this.contract.getAbiItemByType(contracts_1.AbiItemType.punkChangedEvent);\r\n                        encodedLogSignature = this._client.encodeLogSignature(abiItem);\r\n                        topics = [\r\n                            [\r\n                                encodedLogSignature\r\n                            ]\r\n                        ];\r\n                        return [4 /*yield*/, this.getAccountBlockHeightAsync(this.contract.contract.address, _height)];\r\n                    case 1:\r\n                        toHeight = _a.sent();\r\n                        fromHeight = util_1.PunkTypes.BigNumberWrapper.maximum(this.getEventsFromHeight(), toHeight.minus(1000));\r\n                        return [4 /*yield*/, this._client.getEventsByBlockAsync(this.contract.contract.address, fromHeight, toHeight, topics)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        result = result === null || result === void 0 ? void 0 : result.reverse().slice(_offset, _offset + _limit);\r\n                        events = this.toPunkEvents(result);\r\n                        return [2 /*return*/, {\r\n                                blockHeight: toHeight,\r\n                                events: events\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getMarketInfoAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.contract.getMarketInfoAsync()];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        this._actionPrice = result.actionPrice;\r\n                        this._mintPrice = result.mintPrice;\r\n                        logger.info(\"getMarketInfoAsync\", result)();\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.mintAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var mintPrice, result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.getMintPriceAsync()];\r\n                    case 2:\r\n                        mintPrice = _a.sent();\r\n                        return [4 /*yield*/, this.contract.mintAsync(this.getAccount(), mintPrice.toFixed())];\r\n                    case 3:\r\n                        result = _a.sent();\r\n                        logger.info(\"mintAsync\", result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.offerAsync = function (_id, _amount, _address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var fee, result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"offerAsync\", \"id\", _id, \"amount\", _amount, \"address\", _address)();\r\n                        return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.getFeeAsync()];\r\n                    case 2:\r\n                        fee = _a.sent();\r\n                        if (!(_address && !util_1.CommonUtil.isNullOrWhitespace(_address))) return [3 /*break*/, 4];\r\n                        return [4 /*yield*/, this.contract.offerToAddressAsync(this.getAccount(), _id, _amount, _address, fee)];\r\n                    case 3:\r\n                        result = _a.sent();\r\n                        return [3 /*break*/, 6];\r\n                    case 4: return [4 /*yield*/, this.contract.offerAsync(this.getAccount(), _id, _amount, fee)];\r\n                    case 5:\r\n                        result = _a.sent();\r\n                        _a.label = 6;\r\n                    case 6:\r\n                        logger.info(\"offerAsync\", result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.cancelOfferAsync = function (_id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"cancelOfferAsync\", \"id\", _id)();\r\n                        return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.contract.cancelOfferAsync(this.getAccount(), _id)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        logger.info(\"cancelOfferAsync\", result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.buyAsync = function (_id, _amount) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        logger.info(\"buyAsync\", \"id\", _id, \"amount\", _amount)();\r\n                        return [4 /*yield*/, this.contract.buyAsync(this.getAccount(), _id, _amount)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        logger.info(\"buyAsync\", result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.bidAsync = function (_id, _amount) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var fee, result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"bidAsync\", \"id\", _id, \"amount\", _amount)();\r\n                        return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.getFeeAsync()];\r\n                    case 2:\r\n                        fee = _a.sent();\r\n                        return [4 /*yield*/, this.contract.enterBidAsync(this.getAccount(), _id, _amount, fee)];\r\n                    case 3:\r\n                        result = _a.sent();\r\n                        logger.info(result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.acceptBidAsync = function (_id, _amount) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"acceptBidAsync\", \"id\", _id, \"amount\", _amount)();\r\n                        return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.contract.acceptBidAsync(this.getAccount(), _id, _amount)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        logger.info(\"acceptBidAsync\", result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.cancelBidAsync = function (_id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        logger.info(\"cancelBidAsync\", \"id\", _id)();\r\n                        return [4 /*yield*/, this.checkQuotaAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.contract.cancelBidAsync(this.getAccount(), _id)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        logger.info(\"cancelBidAsync\", result)();\r\n                        return [2 /*return*/, result.status === 0];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.handleVmLogAsync = function (accountBlockHash, accountBlockHeight, vmlog) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var marketEvent, punkEvent;\r\n            return __generator(this, function (_a) {\r\n                try {\r\n                    switch (vmlog.event) {\r\n                        case util_1.PunkTypes.VmLogEvent.MarketChanged:\r\n                            marketEvent = {\r\n                                timestamp: new util_1.PunkTypes.BigNumberWrapper(vmlog.args.timestamp),\r\n                                eventType: parseInt(vmlog.args.eventType),\r\n                                value: new util_1.PunkTypes.BigNumberWrapper(vmlog.args.value)\r\n                            };\r\n                            switch (marketEvent.eventType) {\r\n                                case util_1.PunkTypes.MarketEventType.ActionPrice:\r\n                                    this._actionPrice = marketEvent.value;\r\n                                    break;\r\n                                case util_1.PunkTypes.MarketEventType.MintPrice:\r\n                                    this._mintPrice = marketEvent.value;\r\n                                    break;\r\n                                default:\r\n                                    break;\r\n                            }\r\n                            this._emitter.emitMarketChanged(marketEvent);\r\n                            break;\r\n                        case util_1.PunkTypes.VmLogEvent.PunkChanged:\r\n                            punkEvent = {\r\n                                accountBlockHash: accountBlockHash,\r\n                                accountBlockHeight: new util_1.PunkTypes.BigNumberWrapper(accountBlockHeight),\r\n                                timestamp: new util_1.PunkTypes.BigNumberWrapper(vmlog.args.timestamp),\r\n                                eventType: parseInt(vmlog.args.eventType),\r\n                                punkId: parseInt(vmlog.args.punkId),\r\n                                amount: new util_1.PunkTypes.BigNumberWrapper(vmlog.args.amount),\r\n                                fromAddress: vmlog.args.fromAddress,\r\n                                toAddress: vmlog.args.toAddress\r\n                            };\r\n                            this._emitter.emitPunkChanged(punkEvent);\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    logger.error(error)();\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.toPunkEvents = function (events) {\r\n        if (!Array.isArray(events)) {\r\n            return [];\r\n        }\r\n        var result = [];\r\n        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\r\n            var e = events_1[_i];\r\n            var transformed = this.toPunkEvent(e);\r\n            if (transformed) {\r\n                result.push(transformed);\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    ViteBaseDataSource.prototype.toPunkEvent = function (event) {\r\n        if (!event) {\r\n            return null;\r\n        }\r\n        var abiItem = this.contract.getAbiItemByType(contracts_1.AbiItemType.punkChangedEvent);\r\n        var decoded = this._client.decodeVmLogByAbiItem(event.vmlog, abiItem);\r\n        if (!decoded) {\r\n            return null;\r\n        }\r\n        var transformed = {\r\n            accountBlockHash: event.accountBlockHash,\r\n            accountBlockHeight: event.accountBlockHeight,\r\n            timestamp: decoded.args.timestamp,\r\n            eventType: decoded.args.eventType,\r\n            punkId: decoded.args.punkId,\r\n            amount: decoded.args.amount,\r\n            fromAddress: decoded.args.fromAddress,\r\n            toAddress: decoded.args.toAddress\r\n        };\r\n        return util_1.TransformUtil.toPunkEvent(transformed);\r\n    };\r\n    ViteBaseDataSource.prototype.getFeeAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var actionPrice;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.getActionPriceAsync()];\r\n                    case 1:\r\n                        actionPrice = _a.sent();\r\n                        if (actionPrice.gt(0)) {\r\n                            return [2 /*return*/, actionPrice.toFixed()];\r\n                        }\r\n                        return [2 /*return*/, null];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getAccountBlockHeightAsync = function (_address, _height) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var height;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        height = new util_1.PunkTypes.BigNumberWrapper(\"0\");\r\n                        if (!(_height && !util_1.CommonUtil.isNullOrWhitespace(_height))) return [3 /*break*/, 1];\r\n                        height = new util_1.PunkTypes.BigNumberWrapper(_height);\r\n                        return [3 /*break*/, 3];\r\n                    case 1: return [4 /*yield*/, this._client.getAccountBlockHeightAsync(_address)];\r\n                    case 2:\r\n                        height = _a.sent();\r\n                        _a.label = 3;\r\n                    case 3: return [2 /*return*/, height];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.getEventsFromHeight = function () {\r\n        if (common_1.CommonConfig.IS_PRODUCTION) {\r\n            // Hide events before official launch\r\n            // return new BigNumber(\"1150\");\r\n        }\r\n        return new util_1.PunkTypes.BigNumberWrapper(\"0\");\r\n    };\r\n    ViteBaseDataSource.prototype.checkQuotaAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var address, quota;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        address = this.contract.contract.address;\r\n                        return [4 /*yield*/, this.getQuotaAsync(address)];\r\n                    case 1:\r\n                        quota = _a.sent();\r\n                        this._emitter.emitQuotaChanged(address, quota);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ViteBaseDataSource.prototype.updatePunkInfosAsync = function (_refHeight) {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var events, _i, events_2, e, punkEvent, punk;\r\n            return __generator(this, function (_g) {\r\n                switch (_g.label) {\r\n                    case 0:\r\n                        if (!this._punkInfos || this._punkInfos.length !== common_1.CommonConstants.TOTAL_MINTS) {\r\n                            logger.info(\"Invalid market data provided\", (_a = this._punkInfos) === null || _a === void 0 ? void 0 : _a.length)();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        logger.info(\"Get market events with reference height\", _refHeight.toFixed())();\r\n                        return [4 /*yield*/, this.getNewMarketEventsAsync(_refHeight)];\r\n                    case 1:\r\n                        events = _g.sent();\r\n                        if (!Array.isArray(events)) {\r\n                            logger.info(\"Get market events result is not an array\")();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        logger.info(\"events.length\", events.length)();\r\n                        for (_i = 0, events_2 = events; _i < events_2.length; _i++) {\r\n                            e = events_2[_i];\r\n                            punkEvent = this.toPunkEvent(e);\r\n                            if (!punkEvent) {\r\n                                logger.info(\"Invalid punk event\", e)();\r\n                                continue;\r\n                            }\r\n                            punk = this._punkInfos[punkEvent.punkId - 1];\r\n                            switch (punkEvent.eventType) {\r\n                                case util_1.PunkTypes.PunkEventType.Mint:\r\n                                    punk.owner = punkEvent.toAddress;\r\n                                    break;\r\n                                case util_1.PunkTypes.PunkEventType.Offer:\r\n                                    punk.offer = {\r\n                                        __typename: util_1.PunkTypes.TypeNames.MarketOffer,\r\n                                        itemIndex: util_1.TransformUtil.toBigNumber(punkEvent.id),\r\n                                        seller: (_b = punkEvent.fromAddress) !== null && _b !== void 0 ? _b : \"\",\r\n                                        minAmount: (_c = punkEvent.amount) !== null && _c !== void 0 ? _c : util_1.TransformUtil.defaultBigNumber,\r\n                                        onlySellTo: punkEvent.toAddress,\r\n                                        timestamp: punkEvent.timestamp\r\n                                    };\r\n                                    break;\r\n                                case util_1.PunkTypes.PunkEventType.NewBid:\r\n                                    punk.bid = {\r\n                                        __typename: util_1.PunkTypes.TypeNames.MarketBid,\r\n                                        itemIndex: util_1.TransformUtil.toBigNumber(punkEvent.id),\r\n                                        bidder: (_d = punkEvent.fromAddress) !== null && _d !== void 0 ? _d : \"\",\r\n                                        amount: (_e = punkEvent.amount) !== null && _e !== void 0 ? _e : util_1.TransformUtil.defaultBigNumber,\r\n                                        timestamp: punkEvent.timestamp\r\n                                    };\r\n                                    break;\r\n                                case util_1.PunkTypes.PunkEventType.CancelBid:\r\n                                    punk.bid = null;\r\n                                    break;\r\n                                case util_1.PunkTypes.PunkEventType.CancelOffer:\r\n                                    punk.offer = null;\r\n                                    break;\r\n                                case util_1.PunkTypes.PunkEventType.Buy:\r\n                                    punk.owner = punkEvent.toAddress;\r\n                                    if (punk.bid && punk.bid.bidder.toLowerCase() === ((_f = punkEvent.toAddress) === null || _f === void 0 ? void 0 : _f.toLowerCase())) {\r\n                                        punk.bid = undefined;\r\n                                    }\r\n                                    break;\r\n                                default:\r\n                                    break;\r\n                            }\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return ViteBaseDataSource;\r\n}(_1.BaseDataSource));\r\nexports.ViteBaseDataSource = ViteBaseDataSource;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./common\"), exports);\r\n__exportStar(require(\"./util\"), exports);\r\n__exportStar(require(\"./wallet\"), exports);\r\n__exportStar(require(\"./search\"), exports);\r\n__exportStar(require(\"./contracts\"), exports);\r\n__exportStar(require(\"./clients\"), exports);\r\n__exportStar(require(\"./datasources\"), exports);\r\n","import { ICommonConfig, PunkTypes } from \"vitepunks-common\";\r\n\r\nexport class ClientConfig implements ICommonConfig {\r\n  private _useIpfs: boolean = false;\r\n  get USE_IPFS(): boolean {\r\n    return this._useIpfs;\r\n  }\r\n  set USE_IPFS(_flag: boolean) {\r\n    this._useIpfs = _flag;\r\n  }\r\n  get IS_PRODUCTION(): boolean {\r\n    if (!process.env.REACT_APP_IS_PRODUCTION) {\r\n      throw new Error(\"REACT_APP_IS_PRODUCTION is not defined\");\r\n    }\r\n    return process.env.REACT_APP_IS_PRODUCTION === \"true\";\r\n  }\r\n  get CONTRACT_ADDRESS(): string {\r\n    if (!process.env.REACT_APP_CONTRACT_ADDRESS) {\r\n      throw new Error(\"REACT_APP_CONTRACT_ADDRESS is not defined\");\r\n    }\r\n    return process.env.REACT_APP_CONTRACT_ADDRESS;\r\n  }\r\n  get PRE_MINT_HEIGHT(): Maybe<PunkTypes.BigNumberWrapper> {\r\n    if (!process.env.REACT_APP_PRE_MINT_HEIGHT) {\r\n      return null;\r\n    }\r\n    return new PunkTypes.BigNumberWrapper(process.env.REACT_APP_PRE_MINT_HEIGHT);\r\n  }\r\n  get EXPLORER_URL(): string {\r\n    if (!process.env.REACT_APP_EXPLORER_URL) {\r\n      throw new Error(\"REACT_APP_EXPLORER_URL is not defined\");\r\n    }\r\n    return process.env.REACT_APP_EXPLORER_URL;\r\n  }\r\n  get ENABLE_LOGGER(): boolean {\r\n    if (!process.env.REACT_APP_ENABLE_LOGGER) {\r\n      throw new Error(\"REACT_APP_ENABLE_LOGGER is not defined\");\r\n    }\r\n    return process.env.REACT_APP_ENABLE_LOGGER === \"true\";\r\n  }\r\n  get ENABLE_MNEMONIC_LOGIN(): boolean {\r\n    if (!process.env.REACT_APP_ENABLE_MNEMONIC_LOGIN) {\r\n      throw new Error(\"REACT_APP_ENABLE_MNEMONIC_LOGIN is not defined\");\r\n    }\r\n    return process.env.REACT_APP_ENABLE_MNEMONIC_LOGIN === \"true\";\r\n  }\r\n  get NETWORK_ID(): number {\r\n    if (!process.env.REACT_APP_NETWORK_ID) {\r\n      throw new Error(\"REACT_APP_NETWORK_ID is not defined\");\r\n    }\r\n    return parseInt(process.env.REACT_APP_NETWORK_ID);\r\n  }\r\n  get BASENAME(): Maybe<string> {\r\n    return process.env.REACT_APP_BASENAME;\r\n  }\r\n}\r\n\r\nconst config = new ClientConfig();\r\n\r\nexport const getClientConfig = () => {\r\n  return config;\r\n}","import { PunkTypes } from \"vitepunks-common\"\r\n\r\nexport const ClientConstants = {\r\n  APP_NAME: 'VitePunks',\r\n  USE_MOCK_DATASOURCE: false,\r\n  WEB_WALLET_STORAGE_SPACE: 'VITEPUNKS_WEB_WALLET',\r\n  SESSION_WALLET_STORAGE_SPACE: 'VITEPUNKS_SESSION_WALLET',\r\n  BG_URL: './assets/images/bg.png',\r\n  ITEM_BG_URL: './assets/images/item_bg.png',\r\n  SAMPLE_PUNK_URL: './assets/images/punk_8311.png',\r\n  LANDING_IMAGE_URL: './assets/images/landing.png',\r\n  QUOTA_WIKI_URL: 'https://github.com/vitepunks/resources/wiki',\r\n  DISCORD_URL: 'https://discord.gg/FsB2uZTn5u',\r\n  TWITTER_URL: 'https://twitter.com/VitePunks',\r\n  GITHUB_URL: 'https://github.com/vitepunks',\r\n  QUOTA_THRESHOLD: new PunkTypes.BigNumberWrapper(\"100000\"),\r\n}","import { getLogger, IWalletStore, SessionWallet, Wallet, WalletManager, WalletType, WebWallet } from 'vitepunks-common';\r\nimport { ClientConstants } from '../common/constants';\r\n\r\nconst logger = getLogger()\r\n\r\nexport class WalletStore implements IWalletStore {\r\n\r\n  private readonly _webWalletKey = ClientConstants.WEB_WALLET_STORAGE_SPACE;\r\n  private readonly _sessionWalletKey = ClientConstants.SESSION_WALLET_STORAGE_SPACE\r\n\r\n  clear(): void {\r\n    localStorage.removeItem(this._webWalletKey);\r\n    sessionStorage.removeItem(this._sessionWalletKey);\r\n  }\r\n\r\n  getItem(): Maybe<WebWallet | SessionWallet> {\r\n    let data;\r\n\r\n    try {\r\n      data = localStorage.getItem(this._webWalletKey);\r\n      if (!data) {\r\n        data = sessionStorage.getItem(this._sessionWalletKey);\r\n      }\r\n    } catch (err) {\r\n      logger.error(err)();\r\n      return undefined;\r\n    }\r\n\r\n    if (!data) {\r\n      return undefined;\r\n    }\r\n\r\n    try {\r\n      return Wallet.fromJS(JSON.parse(data));\r\n    } catch (err) {\r\n      logger.error(err)();\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  setItem(data: WebWallet | SessionWallet): void {\r\n    const saveData = JSON.stringify(data);\r\n\r\n    try {\r\n      switch (data.type) {\r\n        case WalletType.Web:\r\n          localStorage.setItem(this._webWalletKey, saveData);\r\n          break;\r\n        case WalletType.Session:\r\n          sessionStorage.setItem(this._sessionWalletKey, saveData);\r\n          break;\r\n        default:\r\n          throw new Error(`Wallet type '${data.type}' is not supported.`)\r\n      }\r\n    } catch (err) {\r\n      logger.error(err)();\r\n    }\r\n  }\r\n}\r\n\r\nconst manager = new WalletManager(new WalletStore());\r\n\r\nexport const getWalletManager = () => {\r\n  return manager;\r\n}","import { FileUtil } from \"vitepunks-common\";\r\n\r\nexport class BrowserFileUtil extends FileUtil {\r\n  async readFileAsync(path: string, encoding: BufferEncoding = 'utf8'): Promise<any> {\r\n    const response = await fetch(path);\r\n    switch (encoding) {\r\n      case 'binary':\r\n        return response.arrayBuffer();\r\n      default:\r\n        return response.text();\r\n    }\r\n  }\r\n  async writeFileAsync(path: string, data: any, encoding?: BufferEncoding): Promise<any> {\r\n\r\n  }\r\n}\r\n\r\nconst browserFileUtil = new BrowserFileUtil();\r\n\r\nexport const getBrowserFileUtil = () => {\r\n  return browserFileUtil;\r\n}","import { BaseDataSource, CommonConstants, CommonUtil, FileUtil, getLogger, PunkTypes, TransformUtil, WalletManager } from \"vitepunks-common\";\r\nimport { getWalletManager } from \"../storage/wallet.storage\";\r\nimport { getBrowserFileUtil } from \"../util/file.util\";\r\n\r\nconst logger = getLogger();\r\n\r\nexport class MockDataSource extends BaseDataSource {\r\n  private _events!: PunkTypes.PunkEvent[];\r\n\r\n  constructor() {\r\n    super();\r\n    this.clearMock();\r\n  }\r\n\r\n  private clearMock(): void {\r\n    this._events = [];\r\n  }\r\n\r\n  protected get fileUtil(): FileUtil {\r\n    return getBrowserFileUtil();\r\n  }\r\n  protected get walletManager(): WalletManager {\r\n    return getWalletManager();\r\n  }\r\n\r\n  protected async initPunkInfosAsync(): Promise<void> {\r\n    let infos = await this.fileUtil.readFileAsync(\"./assets/data/mock_infos.json\");\r\n    infos = JSON.parse(infos);\r\n\r\n    this._punkInfos = this.getDefaultPunkInfos();\r\n    if (infos) {\r\n      for (const p of infos.punks) {\r\n        const info = TransformUtil.toPunkInfo(p);\r\n        if (info) {\r\n          const index = parseInt(p.id) - 1;\r\n          this._punkInfos[index] = info;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async initAsync(network: PunkTypes.Network): Promise<void> {\r\n    logger.info('Init MockDataSource')();\r\n    this.clearMock();\r\n\r\n    let events = await this.fileUtil.readFileAsync(\"./assets/data/mock_events.json\");\r\n    events = JSON.parse(events);\r\n    for (let index = 0; index < events.length; index++) {\r\n      const e = events[index];\r\n      this._events.push(TransformUtil.toPunkEvent(e));\r\n    }\r\n    this._events = this._events.reverse();\r\n  }\r\n\r\n  protected disposeProtected(): void {\r\n    logger.info('Dispose MockDataSource')();\r\n    this.clearMock();\r\n  }\r\n\r\n  async getQuotaAsync(_address: string): Promise<PunkTypes.ViteQuotaResult> {\r\n    return {\r\n      currentQuota: new PunkTypes.BigNumberWrapper(\"1000\"),\r\n      maxQuota: new PunkTypes.BigNumberWrapper(\"2000\"),\r\n      stakeAmount: new PunkTypes.BigNumberWrapper(\"10000\")\r\n    };\r\n  }\r\n\r\n  async getPunkEventsAsync(_id: string, _limit: number, _offset: number, _height?: Maybe<string>): Promise<PunkTypes.PunkEvents> {\r\n    logger.info(\"id\", _id, \"limit\", _limit, \"offset\", _offset, \"height\", _height)();\r\n    await CommonUtil.timeout(2000);\r\n    if (!CommonUtil.isNumber(_id)) {\r\n      return {\r\n        blockHeight: TransformUtil.defaultBigNumber,\r\n        events: []\r\n      };\r\n    }\r\n    return {\r\n      blockHeight: TransformUtil.defaultBigNumber,\r\n      events: this._events.filter(e => e.punkId === parseInt(_id)).slice(_offset, _offset + _limit)\r\n    };\r\n  }\r\n\r\n  async getPunkOwnerAsync(_id: string): Promise<Maybe<string>> {\r\n    await CommonUtil.timeout(2000);\r\n    if (!CommonUtil.isNumber(_id)) {\r\n      return undefined;\r\n    }\r\n    const e = this._events.find(e => e.punkId.toString() === _id && e.eventType === PunkTypes.PunkEventType.Mint);\r\n    if (!e) {\r\n      return undefined;\r\n    }\r\n    return e.toAddress;\r\n  }\r\n\r\n  async getPunksByAddressAsync(_address: string, _limit: number, _offset: number): Promise<PunkTypes.Punk[]> {\r\n    logger.info(\"_address\", _address, \"limit\", _limit, \"offset\", _offset)();\r\n    const punks = [\r\n      await this.getPunkAsync(\"101\"),\r\n      await this.getPunkAsync(\"201\"),\r\n      await this.getPunkAsync(\"301\"),\r\n      await this.getPunkAsync(\"401\"),\r\n      await this.getPunkAsync(\"501\"),\r\n      await this.getPunkAsync(\"601\"),\r\n      await this.getPunkAsync(\"701\"),\r\n      await this.getPunkAsync(\"801\"),\r\n      await this.getPunkAsync(\"9999\")\r\n    ];\r\n    return punks.slice(_offset, _offset + _limit);\r\n  }\r\n\r\n  async getMarketBidAsync(_id: string): Promise<Maybe<PunkTypes.MarketBid>> {\r\n    await CommonUtil.timeout(1000);\r\n    if (!CommonUtil.isNumber(_id)) {\r\n      return undefined;\r\n    }\r\n    const e = this._events.find(e => e.punkId.toString() === _id && e.eventType === PunkTypes.PunkEventType.NewBid);\r\n    if (!e) {\r\n      return undefined;\r\n    }\r\n    return {\r\n      __typename: PunkTypes.TypeNames.MarketBid,\r\n      itemIndex: TransformUtil.toBigNumber(_id),\r\n      bidder: e.fromAddress ?? CommonConstants.ZERO_ADDRESS,\r\n      amount: e.amount ?? TransformUtil.defaultBigNumber,\r\n      timestamp: null\r\n    }\r\n  }\r\n\r\n  async getMarketOfferAsync(_id: string): Promise<Maybe<PunkTypes.MarketOffer>> {\r\n    await CommonUtil.timeout(1000);\r\n    if (!CommonUtil.isNumber(_id)) {\r\n      return undefined;\r\n    }\r\n    const e = this._events.find(e => e.punkId.toString() === _id && e.eventType === PunkTypes.PunkEventType.Offer);\r\n    if (!e) {\r\n      return undefined;\r\n    }\r\n    const seller = await this.getPunkOwnerAsync(_id);\r\n    return {\r\n      __typename: PunkTypes.TypeNames.MarketOffer,\r\n      itemIndex: TransformUtil.toBigNumber(_id),\r\n      seller: seller ?? CommonConstants.ZERO_ADDRESS,\r\n      minAmount: e.amount ?? TransformUtil.defaultBigNumber,\r\n      onlySellTo: e.toAddress,\r\n      timestamp: null\r\n    }\r\n  }\r\n\r\n  async getMarketEventsAsync(_limit: number, _offset: number, _height?: Maybe<string>): Promise<PunkTypes.PunkEvents> {\r\n    logger.info(\"limit\", _limit, \"offset\", _offset)();\r\n    await CommonUtil.timeout(500);\r\n    return {\r\n      blockHeight: new PunkTypes.BigNumberWrapper(\"0\"),\r\n      events: this._events.slice(_offset, _offset + _limit)\r\n    }\r\n  }\r\n\r\n  async getMarketInfoAsync(): Promise<PunkTypes.MarketInfo> {\r\n    logger.info(\"getMarketInfoAsync\")();\r\n    return {\r\n      marketStarted: true,\r\n      mintsRemaining: CommonConstants.TOTAL_MINTS - this._events.filter(e => e.eventType === PunkTypes.PunkEventType.Mint).length,\r\n      mintPrice: new PunkTypes.BigNumberWrapper(\"12\").shiftedBy(18),\r\n      actionPrice: new PunkTypes.BigNumberWrapper(\"3.1\").shiftedBy(18),\r\n    };\r\n  }\r\n\r\n  async mintAsync(): Promise<boolean> {\r\n    throw new Error(\"Method 'mintAsync' not implemented.\");\r\n  }\r\n\r\n  async offerAsync(_id: string, _tokenId: string, _amount: string, _address?: string | null): Promise<boolean> {\r\n    logger.info(\"offerAsync\", \"id\", _id, \"tokenId\", _tokenId, \"amount\", _amount, \"address\", _address)();\r\n    await CommonUtil.timeout(2000);\r\n    return true;\r\n  }\r\n\r\n  async cancelOfferAsync(_id: string): Promise<boolean> {\r\n    logger.info(\"cancelOfferAsync\", \"id\", _id)();\r\n    await CommonUtil.timeout(2000);\r\n    return true;\r\n  }\r\n\r\n  async buyAsync(_id: string, _amount: string): Promise<boolean> {\r\n    logger.info(\"buyAsync\", \"id\", _id, \"amount\", _amount)();\r\n    await CommonUtil.timeout(2000);\r\n    return true;\r\n  }\r\n\r\n  async bidAsync(_id: string, _amount: string): Promise<boolean> {\r\n    logger.info(\"bidAsync\", \"id\", _id, \"amount\", _amount)();\r\n    await CommonUtil.timeout(2000);\r\n    return true;\r\n  }\r\n\r\n  async acceptBidAsync(_id: string, _amount: string): Promise<boolean> {\r\n    logger.info(\"acceptBidAsync\", \"id\", _id, \"amount\", _amount)();\r\n    await CommonUtil.timeout(2000);\r\n    return true;\r\n  }\r\n\r\n  async cancelBidAsync(_id: string): Promise<boolean> {\r\n    logger.info(\"cancelBidAsync\", \"id\", _id)();\r\n    await CommonUtil.timeout(2000);\r\n    return true;\r\n  }\r\n}\r\n\r\nconst ds = new MockDataSource();\r\n\r\nexport const getMockDataSource = () => {\r\n  return ds;\r\n}","import { CommonConfig, CommonUtil, CompressUtil, FileUtil, PunksBaseContract } from \"vitepunks-common\";\r\nimport { getBrowserFileUtil } from \"../util/file.util\";\r\n\r\nexport class PunksContract extends PunksBaseContract {\r\n  private readonly _fileUtil: FileUtil;\r\n\r\n  constructor() {\r\n    super();\r\n    this._fileUtil = getBrowserFileUtil();\r\n  }\r\n\r\n  protected async initContractAsyncProtected(basePath: string): Promise<void> {\r\n    const punksContract = await this._fileUtil.readFileAsync(CommonUtil.appendPath(basePath, \"Punks.gz?v=\" + process.env.REACT_APP_VERSION), \"binary\");\r\n    this._contract = JSON.parse(CompressUtil.decompress(CommonUtil.toUint8Array(punksContract, \"binary\")));\r\n    this._contract.address = CommonConfig.CONTRACT_ADDRESS;\r\n  }\r\n}\r\n\r\nconst contract = new PunksContract();\r\n\r\nexport const getPunksContract = () => {\r\n  return contract;\r\n}","import { FileUtil, PunksBaseContract, ViteBaseDataSource, WalletManager } from \"vitepunks-common\";\r\nimport { getPunksContract } from \"../contracts/punks.contract\";\r\nimport { getWalletManager } from \"../storage/wallet.storage\";\r\nimport { getBrowserFileUtil } from \"../util/file.util\";\r\n\r\nexport class ViteDataSource extends ViteBaseDataSource {\r\n  protected get contract(): PunksBaseContract {\r\n    return getPunksContract();\r\n  }\r\n  protected get fileUtil(): FileUtil {\r\n    return getBrowserFileUtil();\r\n  }\r\n  protected get walletManager(): WalletManager {\r\n    return getWalletManager();\r\n  }\r\n}\r\n\r\nconst ds = new ViteDataSource();\r\n\r\nexport const getViteDataSource = () => {\r\n  return ds;\r\n}","export class AccountStorage {\r\n  private _account: Maybe<string>;\r\n\r\n  get account(): Maybe<string> {\r\n    return this._account;\r\n  }\r\n\r\n  set account(account: Maybe<string>) {\r\n    this._account = account;\r\n  }\r\n}\r\n\r\nconst storage = new AccountStorage();\r\n\r\nexport const getAccountStorage = () => {\r\n  return storage;\r\n}","import Connector from '@vite/connector';\r\nimport { getLogger, IWalletConnector, SessionWallet, SessionWalletAccount, WalletManager } from 'vitepunks-common';\r\n\r\nconst logger = getLogger()\r\n\r\nexport class WalletConnector extends Connector implements IWalletConnector {\r\n  private readonly _walletManager: WalletManager;\r\n\r\n  constructor(walletManager: WalletManager, opts: any, meta?: any) {\r\n    super(opts, meta);\r\n    this._walletManager = walletManager;\r\n    this.on('connect', (err: any, payload: any) => {\r\n      logger.info('WalletConnector.connect', err, payload)()\r\n      const { accounts } = payload.params[0];\r\n      this.saveSession(accounts);\r\n    });\r\n    this.on('disconnect', (err: any, payload: any) => {\r\n      logger.info('WalletConnector.disconnect', err, payload)()\r\n      this.stopBizHeartBeat()\r\n      this._walletManager.removeWallet()\r\n    });\r\n    this.on('session_update', (err: any, payload: any) => {\r\n      logger.info('WalletConnector.session_update', err, payload)()\r\n      const session = payload[0];\r\n      if (session && session.accounts) {\r\n        this.saveSession(session.accounts);\r\n      }\r\n    });\r\n  }\r\n\r\n  get uri(): string {\r\n    return super.uri\r\n  }\r\n\r\n  on(event: string | symbol, listener: (...args: any[]) => void): this {\r\n    return super.on(event, listener)\r\n  }\r\n\r\n  off(event: string | symbol, listener: (...args: any[]) => void): this {\r\n    return super.off(event, listener)\r\n  }\r\n\r\n  saveSession(accounts: string[]): void {\r\n    if (!accounts || !accounts[0]) {\r\n      throw new Error('address is null');\r\n    }\r\n    const sessionAccounts: SessionWalletAccount[] = []\r\n    for (let index = 0; index < accounts.length; index++) {\r\n      const address = accounts[index];\r\n      sessionAccounts.push(new SessionWalletAccount({\r\n        id: index.toString(),\r\n        address: address\r\n      }))\r\n    }\r\n    const wallet = new SessionWallet({\r\n      active: sessionAccounts[0],\r\n      accounts: sessionAccounts,\r\n      session: this.session,\r\n      timestamp: new Date().getTime()\r\n    })\r\n    this._walletManager.setWallet(wallet)\r\n  }\r\n\r\n  updateSession(): void {\r\n    const existing = this._walletManager.getWallet()\r\n    if (existing && existing instanceof SessionWallet) {\r\n      existing.timestamp = new Date().getTime()\r\n      this._walletManager.updateWalletStore(existing)\r\n    }\r\n  }\r\n\r\n  async createSession(): Promise<string> {\r\n    await super.createSession();\r\n    return this.uri;\r\n  }\r\n\r\n  async sendTransactionAsync(...args: any): Promise<any> {\r\n    return new Promise((res, rej) => {\r\n      this.on('disconnect', () => {\r\n        rej(\"Request aborted due to disconnect.\");\r\n      });\r\n\r\n      this.sendCustomRequest({ method: 'vite_signAndSendTx', params: args }).then((r: any) => {\r\n        this.updateSession();\r\n        res(r);\r\n      }).catch((e: any) => {\r\n        rej(e);\r\n      });\r\n    });\r\n  }\r\n\r\n  async signMessageAsync(...args: any): Promise<any> {\r\n    return new Promise((res, rej) => {\r\n      this.on('disconnect', () => {\r\n        rej(\"Request aborted due to disconnect.\");\r\n      });\r\n\r\n      this.sendCustomRequest({ method: 'vite_signMessage', params: args }).then((r: any) => {\r\n        this.updateSession();\r\n        res(r);\r\n      }).catch((e: any) => {\r\n        rej(e);\r\n      });\r\n    });\r\n  }\r\n\r\n  async killSessionAsync(): Promise<any> {\r\n    await super.killSession();\r\n  }\r\n}","import { CommonUtil, getLogger, IWalletConnector, PunkTypes, WalletManager } from \"vitepunks-common\"\r\nimport { WalletConnector } from \"./connector\"\r\n\r\nconst logger = getLogger()\r\n\r\nexport class WalletConnectorFactory {\r\n  private readonly _walletManager: WalletManager\r\n\r\n  constructor(walletManager: WalletManager) {\r\n    this._walletManager = walletManager\r\n  }\r\n\r\n  private get session(): Maybe<string> {\r\n    return this._walletManager.getValidSession()\r\n  }\r\n\r\n  private createConnector(network: PunkTypes.Network): IWalletConnector {\r\n    const account = this._walletManager.getActiveAccount()\r\n    const opts = {\r\n      bridge: network.connectorUrl,\r\n      session: this.session\r\n    }\r\n    const meta = account ? { lastAccount: account.address } : undefined\r\n    const connector = new WalletConnector(this._walletManager, opts, meta)\r\n    return connector\r\n  }\r\n\r\n  create(network: PunkTypes.Network): IWalletConnector {\r\n    const connector = this.createConnector(network)\r\n\r\n    if (!this.session) {\r\n      connector.createSession().then(() => logger.info('IWalletConnector connected', connector.uri)())\r\n    }\r\n\r\n    return connector\r\n  }\r\n\r\n  async createAsync(network: PunkTypes.Network): Promise<IWalletConnector> {\r\n    const connector = this.createConnector(network)\r\n\r\n    if (!this.session) {\r\n      await CommonUtil.timeout(1000)\r\n      await connector.createSession()\r\n      logger.info('IWalletConnector connected', connector.uri)()\r\n    }\r\n\r\n    return connector\r\n  }\r\n}","import { getLogger, IDataSource, Networks, PunkTypes, UrlUtil } from \"vitepunks-common\";\r\nimport { getClientConfig } from \"../common/config\";\r\nimport { ClientConstants } from \"../common/constants\";\r\nimport { getMockDataSource } from \"../datasources/mock.datasource\";\r\nimport { getViteDataSource } from \"../datasources/vite.datasource\";\r\nimport { getWalletManager } from \"../storage\";\r\nimport { WalletConnectorFactory } from \"../wallet/factory\";\r\n\r\nconst logger = getLogger();\r\n\r\nexport class CommonContext {\r\n  private _isInitialized: boolean = false;\r\n  private _network!: PunkTypes.Network;\r\n  private _datasource!: IDataSource;\r\n\r\n  async initAsync(): Promise<void> {\r\n    this._isInitialized = false;\r\n    if (ClientConstants.USE_MOCK_DATASOURCE) {\r\n      this._datasource = getMockDataSource();\r\n    } else {\r\n      this._datasource = getViteDataSource();\r\n    }\r\n    const clientConfig = getClientConfig();\r\n    const networkId = clientConfig.NETWORK_ID;\r\n    this._network = Networks.find(e => e.id === networkId) ?? Networks[0];\r\n    const walletConnectorFactory = new WalletConnectorFactory(getWalletManager());\r\n    await this._datasource.initBaseAsync(this._network, PunkTypes.ProviderType.WEBSOCKET, walletConnectorFactory.create(this._network));\r\n    await this.checkIpfsAsync();\r\n    logger.info(\"Using IPFS\", clientConfig.USE_IPFS)();\r\n    this._isInitialized = true;\r\n  }\r\n\r\n  private async checkIpfsAsync(): Promise<void> {\r\n    return new Promise(async (resolve) => {\r\n      const punk = await this._datasource.getPunkAsync(\"1\");\r\n      var img = new Image();\r\n      img.onload = () => {\r\n        getClientConfig().USE_IPFS = false;\r\n        resolve();\r\n      };\r\n      img.onerror = () => {\r\n        getClientConfig().USE_IPFS = true;\r\n        resolve();\r\n      };\r\n      img.src = UrlUtil.getPunkUrl(punk.image);\r\n    });\r\n  }\r\n\r\n  dispose(): void {\r\n    logger.info(\"Disposing CommonContext\")();\r\n    this._datasource?.dispose();\r\n  }\r\n\r\n  get isInitialized(): boolean {\r\n    return this._isInitialized;\r\n  }\r\n\r\n  get network(): PunkTypes.Network {\r\n    return this._network;\r\n  }\r\n\r\n  get datasource(): IDataSource {\r\n    return this._datasource;\r\n  }\r\n}\r\n\r\nconst context = new CommonContext();\r\n\r\nexport const getCommonContext = () => {\r\n  return context;\r\n}\r\n","import { gql } from \"@apollo/client\";\r\nimport { ApolloContext } from \"../clients/apollo.client\";\r\n\r\nexport const OFFER_MUTATION = gql`\r\n  mutation Offer($id: ID!, $amount: String!, $address: String) {\r\n    offer(id: $id, amount: $amount, address: $address) @client\r\n  }\r\n`;\r\n\r\nexport const CANCEL_OFFER_MUTATION = gql`\r\n  mutation CancelOffer($id: ID!) {\r\n    cancelOffer(id: $id) @client\r\n  }\r\n`;\r\n\r\nexport const BUY_MUTATION = gql`\r\n  mutation Buy($id: ID!, $amount: String!) {\r\n    buy(id: $id, amount: $amount) @client\r\n  }\r\n`;\r\n\r\nexport const BID_MUTATION = gql`\r\n  mutation Bid($id: ID!, $amount: String!) {\r\n    bid(id: $id, amount: $amount) @client\r\n  }\r\n`;\r\n\r\nexport const ACCEPT_BID_MUTATION = gql`\r\n  mutation AcceptBid($id: ID!, $amount: String!) {\r\n    acceptBid(id: $id, amount: $amount) @client\r\n  }\r\n`;\r\n\r\nexport const CANCEL_BID_MUTATION = gql`\r\n  mutation CancelBid($id: ID!) {\r\n    cancelBid(id: $id) @client\r\n  }\r\n`;\r\n\r\nexport const MarketMutations = {\r\n  async offer(parent: any, { id, amount, address }: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.offerAsync(id, amount, address);\r\n  },\r\n  async cancelOffer(parent: any, { id }: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.cancelOfferAsync(id);\r\n  },\r\n  async buy(parent: any, { id, amount }: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.buyAsync(id, amount);\r\n  },\r\n  async bid(parent: any, { id, amount }: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.bidAsync(id, amount);\r\n  },\r\n  async acceptBid(parent: any, { id, amount }: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.acceptBidAsync(id, amount);\r\n  },\r\n  async cancelBid(parent: any, { id }: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.cancelBidAsync(id);\r\n  },\r\n}","import { gql } from \"@apollo/client\";\r\nimport { ApolloContext } from \"../clients/apollo.client\";\r\n\r\nexport const MINT_MUTATION = gql`\r\n  mutation Mint {\r\n    mint @client\r\n  }\r\n`;\r\n\r\nexport const PunkMutations = {\r\n  async mint(parent: any, params: any, context: ApolloContext): Promise<boolean> {\r\n    return context.client.datasource.mintAsync();\r\n  },\r\n}","import { gql } from \"@apollo/client\";\r\nimport { PunkTypes } from \"vitepunks-common\";\r\nimport { ApolloContext } from \"../clients/apollo.client\";\r\n\r\nexport const PUNK_FIELDS = gql`\r\n  fragment PunkFields on Punk {\r\n    id\r\n    rank\r\n    image\r\n    cid\r\n    attributes\r\n    owner\r\n    bid {\r\n      itemIndex\r\n      bidder\r\n      amount\r\n    }\r\n    offer {\r\n      itemIndex\r\n      seller\r\n      minAmount\r\n      onlySellTo\r\n    }\r\n  }\r\n`;\r\n\r\nexport const PUNK_EVENT_FIELDS = gql`\r\n  fragment PunkEventFields on PunkEvent {\r\n    id\r\n    accountBlockHash\r\n    accountBlockHeight\r\n    timestamp\r\n    eventType\r\n    punkId\r\n    amount\r\n    fromAddress\r\n    toAddress\r\n  }\r\n`;\r\n\r\nexport const GET_PUNK_ATTRIBUTES_QUERY = gql`\r\n  query GetPunkAttributes {\r\n    punkAttributes @client\r\n  }\r\n`;\r\n\r\nexport const GET_PUNK_EVENTS_QUERY = gql`\r\n  ${PUNK_EVENT_FIELDS}\r\n  query GetPunkEvents($id: String!, $limit: Int!, $offset: Int!, $height: String) {\r\n    punkEvents(id: $id, limit: $limit, offset: $offset, height: $height) @client {\r\n      blockHeight\r\n      events {\r\n        ...PunkEventFields\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_PUNK_OWNER_QUERY = gql`\r\n  query GetPunkOwner($id: String!) {\r\n    punkOwner(id: $id) @client\r\n  }\r\n`;\r\n\r\nexport const GET_PUNK_QUERY = gql`\r\n  ${PUNK_FIELDS}\r\n  query GetPunk($id: ID!) {\r\n    punk(id: $id) @client {\r\n      ...PunkFields\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_PUNKS_QUERY = gql`\r\n  ${PUNK_FIELDS}\r\n  query GetPunks($limit: Int!, $offset: Int!, $sort: PunkSortBy!, $order: OrderBy!, $search: String) {\r\n    punks(limit: $limit, offset: $offset, sort: $sort, order: $order, search: $search) @client {\r\n      ...PunkFields\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_PUNKS_ALL_QUERY = gql`\r\n  ${PUNK_FIELDS}\r\n  query GetPunksAll {\r\n    punksAll @client {\r\n      ...PunkFields\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_PUNKS_BY_ADDRESS_QUERY = gql`\r\n  ${PUNK_FIELDS}\r\n  query GetPunksByAddress($address: String!, $limit: Int!, $offset: Int!) {\r\n    punksByAddress(address: $address, limit: $limit, offset: $offset) @client {\r\n      ...PunkFields\r\n    }\r\n  }\r\n`;\r\n\r\nexport const PunkQueries = {\r\n  async punkAttributes(parent: any, params: any, context: ApolloContext): Promise<string[]> {\r\n    const result = await context.client.datasource.getPunkAttributesAsync();\r\n    return result;\r\n  },\r\n  async punkEvents(parent: any, { id, limit, offset, height }: any, context: ApolloContext): Promise<PunkTypes.PunkEvents> {\r\n    const result = await context.client.datasource.getPunkEventsAsync(id, limit, offset, height);\r\n    return result;\r\n  },\r\n  async punkOwner(parent: any, { id }: any, context: ApolloContext): Promise<Maybe<string>> {\r\n    const result = await context.client.datasource.getPunkOwnerAsync(id);\r\n    return result;\r\n  },\r\n  async punk(parent: any, { id }: any, context: ApolloContext): Promise<PunkTypes.Punk> {\r\n    const result = await context.client.datasource.getPunkAsync(id);\r\n    return result;\r\n  },\r\n  async punks(parent: any, { limit, offset, sort, order, search }: any, context: ApolloContext): Promise<PunkTypes.Punk[]> {\r\n    const result = await context.client.datasource.getPunksAsync(limit, offset, sort, order, search);\r\n    return result;\r\n  },\r\n  async punksAll(parent: any, params: any, context: ApolloContext): Promise<PunkTypes.Punk[]> {\r\n    const result = await context.client.datasource.getPunksAllAsync();\r\n    return result;\r\n  },\r\n  async punksByAddress(parent: any, { address, limit, offset }: any, context: ApolloContext): Promise<PunkTypes.Punk[]> {\r\n    const result = await context.client.datasource.getPunksByAddressAsync(address, limit, offset);\r\n    return result;\r\n  },\r\n}","import { gql } from \"@apollo/client\";\r\nimport { PunkTypes } from \"vitepunks-common\";\r\nimport { ApolloContext } from \"../clients/apollo.client\";\r\nimport { PUNK_EVENT_FIELDS } from \"./punk\";\r\n\r\nexport const MARKET_BID_FIELDS = gql`\r\n  fragment MarketBidFields on MarketBid {\r\n    itemIndex\r\n    bidder\r\n    amount\r\n    timestamp\r\n  }\r\n`;\r\n\r\nexport const MARKET_OFFER_FIELDS = gql`\r\n  fragment MarketOfferFields on MarketOffer {\r\n    itemIndex\r\n    seller\r\n    minAmount\r\n    onlySellTo\r\n    timestamp\r\n  }\r\n`;\r\n\r\nexport const GET_MARKET_INFO_QUERY = gql`\r\n  query GetMarketInfo {\r\n    marketInfo @client {\r\n      marketStarted\r\n      mintsRemaining\r\n      mintPrice\r\n      actionPrice\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_MARKET_BID_QUERY = gql`\r\n  ${MARKET_BID_FIELDS}\r\n  query GetMarketBid($id: String!) {\r\n    marketBid(id: $id) @client {\r\n      ...MarketBidFields\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_MARKET_OFFER_QUERY = gql`\r\n  ${MARKET_OFFER_FIELDS}\r\n  query GetMarketOffer($id: String!) {\r\n    marketOffer(id: $id) @client {\r\n      ...MarketOfferFields\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_MARKET_EVENTS_QUERY = gql`\r\n  ${PUNK_EVENT_FIELDS}\r\n  query GetMarketEvents($limit: Int!, $offset: Int!, $height: String) {\r\n    marketEvents(limit: $limit, offset: $offset, height: $height) @client {\r\n      blockHeight\r\n      events {\r\n        ...PunkEventFields\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const MarketQueries = {\r\n  async marketInfo(parent: any, params: any, context: ApolloContext): Promise<PunkTypes.MarketInfo> {\r\n    const result = await context.client.datasource.getMarketInfoAsync();\r\n    return result;\r\n  },\r\n  async marketBid(parent: any, { id }: any, context: ApolloContext): Promise<Maybe<PunkTypes.MarketBid>> {\r\n    const result = await context.client.datasource.getMarketBidAsync(id);\r\n    return result;\r\n  },\r\n  async marketOffer(parent: any, { id }: any, context: ApolloContext): Promise<Maybe<PunkTypes.MarketOffer>> {\r\n    const result = await context.client.datasource.getMarketOfferAsync(id);\r\n    return result;\r\n  },\r\n  async marketEvents(parent: any, { limit, offset, height }: any, context: ApolloContext): Promise<PunkTypes.PunkEvents> {\r\n    const result = await context.client.datasource.getMarketEventsAsync(limit, offset, height);\r\n    return result;\r\n  }\r\n}","import { gql } from \"@apollo/client\";\r\nimport { PunkTypes } from \"vitepunks-common\";\r\nimport { ApolloContext } from \"../clients/apollo.client\";\r\n\r\nexport const GET_QUOTA_QUERY = gql`\r\n  query GetQuota($address: String!) {\r\n    quota(address: $address) @client {\r\n      currentQuota\r\n      maxQuota\r\n      stakeAmount\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_ACCOUNT_AUCTIONS_QUERY = gql`\r\n  query GetAccountAuctions($address: String!, $limit: Int!, $cursor: String) {\r\n    accountAuctions(address: $address, limit: $limit, cursor: $cursor) @client {\r\n      cursor {\r\n        prev\r\n        next\r\n      }\r\n      auctions {\r\n        timestamp\r\n        auctionType\r\n        punkId\r\n        owner\r\n        amount\r\n        address\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GeneralQueries = {\r\n  async quota(parent: any, { address }: any, context: ApolloContext): Promise<Maybe<PunkTypes.ViteQuotaResult>> {\r\n    const result = await context.client.datasource.getQuotaAsync(address);\r\n    return result;\r\n  },\r\n  async accountAuctions(parent: any, { address, limit, cursor }: any, context: ApolloContext): Promise<PunkTypes.AccountAuctions> {\r\n    const result = await context.client.datasource.getAccountAuctionsAsync(address, limit, cursor);\r\n    return result;\r\n  },\r\n}","import { ApolloClient, InMemoryCache, NormalizedCacheObject } from '@apollo/client';\r\nimport { offsetLimitPagination } from '@apollo/client/utilities';\r\nimport { GraphQLScalarType } from 'graphql';\r\nimport { IDataSource, PunkTypes } from 'vitepunks-common';\r\nimport { getCommonContext } from '../contexts/common.context';\r\nimport { MarketMutations, PunkMutations } from '../mutations';\r\nimport { MarketQueries, PunkQueries } from '../queries';\r\nimport { GeneralQueries } from '../queries/general';\r\n\r\nexport type ApolloContext = {\r\n  cache: InMemoryCache,\r\n  client: ApolloClientWrapper,\r\n  clientAwareness: any,\r\n  getCacheKey: (obj: any) => string | undefined\r\n}\r\n\r\nexport class ApolloClientWrapper extends ApolloClient<NormalizedCacheObject> {\r\n  get datasource(): IDataSource {\r\n    return getCommonContext().datasource;\r\n  }\r\n}\r\n\r\nconst cache: InMemoryCache = new InMemoryCache({\r\n  typePolicies: {\r\n    Query: {\r\n      fields: {\r\n        // https://www.apollographql.com/docs/react/pagination/offset-based/\r\n        punks: offsetLimitPagination([\"order\", \"sort\"]),\r\n        punksByAddress: offsetLimitPagination([\"address\"]),\r\n        //marketEvents: offsetLimitPagination()\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nconst bigNumberScalar = new GraphQLScalarType({\r\n  name: 'BigNumber',\r\n  description: 'BigNumber custom scalar type',\r\n  serialize(value: PunkTypes.BigNumberWrapper) {\r\n    return value.toFixed();\r\n  },\r\n  parseValue(value: string) {\r\n    return new PunkTypes.BigNumberWrapper(value);\r\n  }\r\n});\r\n\r\nconst resolvers: any = {\r\n  BigNumber: bigNumberScalar,\r\n  Query: {\r\n    ...GeneralQueries,\r\n    ...PunkQueries,\r\n    ...MarketQueries\r\n  },\r\n  Mutation: {\r\n    ...PunkMutations,\r\n    ...MarketMutations\r\n  }\r\n};\r\n\r\n// https://www.apollographql.com/docs/react/networking/authentication/#header\r\nconst client = new ApolloClientWrapper({\r\n  // link: authLink.concat(httpLink),\r\n  cache: cache,\r\n  resolvers,\r\n  headers: {\r\n    'client-name': process.env.REACT_APP_NAME || 'client',\r\n    'client-version': process.env.REACT_APP_VERSION || '0',\r\n  },\r\n})\r\n\r\nexport const getApolloClient = () => {\r\n  return client;\r\n}","import { PunkTypes } from \"vitepunks-common\";\r\n\r\nexport class NetworkManager {\r\n  private _networkHeight: PunkTypes.BigNumberWrapper;\r\n  private _network?: Maybe<PunkTypes.Network>;\r\n  private _setNetworkCallback?: (network?: Maybe<PunkTypes.Network>) => void;\r\n\r\n  constructor() {\r\n    this._networkHeight = new PunkTypes.BigNumberWrapper(\"0\");\r\n  }\r\n\r\n  set networkHeight(height: PunkTypes.BigNumberWrapper) {\r\n    this._networkHeight = height;\r\n  }\r\n\r\n  get networkHeight(): PunkTypes.BigNumberWrapper {\r\n    return this._networkHeight;\r\n  }\r\n\r\n  set onSetNetworkCallback(cb: (network?: Maybe<PunkTypes.Network>) => void) {\r\n    this._setNetworkCallback = cb;\r\n  }\r\n\r\n  getNetwork(): Maybe<PunkTypes.Network> {\r\n    return this._network;\r\n  }\r\n\r\n  setNetwork(network?: Maybe<PunkTypes.Network>): void {\r\n    this._network = network;\r\n    if (this._setNetworkCallback) {\r\n      this._setNetworkCallback(this._network);\r\n    }\r\n  }\r\n}\r\n\r\nconst manager = new NetworkManager();\r\n\r\nexport const getNetworkManager = () => {\r\n  return manager;\r\n}","import { styled, Typography } from '@mui/material';\r\n\r\nconst Root = styled('div')(\r\n  ({ theme }) => `\r\n  padding-bottom: 10px;\r\n  padding-top: 10px;\r\n  padding-left: 24px;\r\n  padding-right: 24px;\r\n  text-align: right;\r\n`,\r\n);\r\n\r\nexport const Footer = () => {\r\n  return (\r\n    <>\r\n      <Root>\r\n        <Typography>v{process.env.REACT_APP_VERSION}</Typography>\r\n      </Root>\r\n    </>\r\n  )\r\n}\r\n","import { AppBar, styled, Toolbar, Typography } from '@mui/material';\r\nimport React from 'react';\r\nimport { ClientConstants } from '../../../../common/constants';\r\n\r\nconst Root = styled('div')(\r\n  ({ theme }) => `\r\n  flex-grow: 1;\r\n`,\r\n);\r\n\r\nconst TitleTypography = styled(Typography)(\r\n  ({ theme }) => `\r\n  flex-grow: 1;\r\n  margin-left: 10px !important;\r\n`,\r\n);\r\n\r\nexport const HeaderLoading: React.FC = (props: any) => {\r\n  return (\r\n    <Root>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <TitleTypography variant=\"h6\">\r\n            {ClientConstants.APP_NAME}\r\n          </TitleTypography>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </Root>\r\n  )\r\n}","import { Container, styled } from '@mui/material';\r\nimport * as React from 'react';\r\n\r\nconst MainScrollStyled = styled('div')(\r\n  ({ theme }) => `\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  align-items: center;\r\n  padding-bottom: 15px;\r\n  padding-top: 30px;\r\n  overflow: auto;\r\n  overflow-x: hidden;\r\n`,\r\n);\r\n\r\nconst MainScrollInner = styled('div')(\r\n  ({ theme }) => `\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`,\r\n);\r\n\r\nexport const MainScroll: React.FC = props => {\r\n  const { children, ...restProps } = props\r\n\r\n  return (\r\n    <MainScrollStyled id=\"mainscroll\" {...restProps}>\r\n      <Container maxWidth=\"xl\">\r\n        <MainScrollInner>{children}</MainScrollInner>\r\n      </Container>\r\n    </MainScrollStyled>\r\n  )\r\n}\r\n","import { styled } from '@mui/material';\r\nimport React from 'react';\r\n\r\nconst MainWrapperStyled = styled('div')(\r\n  ({ theme }) => `\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n`,\r\n);\r\n\r\nexport const MainWrapper: React.FC = props => {\r\n  const { children, ...restProps } = props\r\n\r\n  return <MainWrapperStyled {...restProps}>{children}</MainWrapperStyled>\r\n}\r\n","\r\nimport { Chip, Typography } from '@mui/material';\r\nimport { useEffect, useState } from 'react';\r\nimport { Footer } from '../../../layout/components/footer';\r\nimport { HeaderLoading } from '../../../layout/components/header-loading';\r\nimport { MainScroll } from '../../../layout/components/main-scroll';\r\nimport { MainWrapper } from '../../../layout/components/main-wrapper';\r\n\r\ninterface Props {\r\n  retryCount: number\r\n}\r\n\r\nexport const MainLoading: React.FC<Props> = (props: Props) => {\r\n  const [retryCount, setRetryCount] = useState<number>(0)\r\n\r\n  useEffect(() => {\r\n    setRetryCount(props.retryCount)\r\n  }, [props.retryCount])\r\n\r\n  return (\r\n    <MainWrapper>\r\n      <HeaderLoading />\r\n      <MainScroll>\r\n        <Typography>Loading...</Typography>\r\n        {retryCount > 0 && (\r\n          <Chip size=\"small\" label={retryCount} variant=\"outlined\" />\r\n        )}\r\n      </MainScroll>\r\n      <Footer />\r\n    </MainWrapper>\r\n  )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { PunkTypes, SessionWallet, WebWallet } from 'vitepunks-common';\r\nimport { getNetworkManager } from '../common/network';\r\nimport { getWalletManager } from '../storage/wallet.storage';\r\n\r\nexport interface IWeb3Context {\r\n  setError: (error: Error) => void,\r\n  error?: Maybe<Error>,\r\n  wallet?: Maybe<WebWallet | SessionWallet>\r\n  network?: Maybe<PunkTypes.Network>\r\n}\r\n\r\nconst Web3Context = React.createContext<Maybe<IWeb3Context>>(undefined)\r\n\r\nexport const useWeb3Context = () => {\r\n  const context = React.useContext(Web3Context)\r\n\r\n  if (!context) {\r\n    throw new Error('Component rendered outside the provider tree')\r\n  }\r\n\r\n  return context\r\n}\r\n\r\ninterface Props {\r\n  children?: React.ReactNode\r\n}\r\n\r\nexport const Web3Provider: React.FC<Props> = (props: Props) => {\r\n  const [error, setError] = useState<Maybe<Error>>(null)\r\n  const [wallet, setWallet] = useState<Maybe<WebWallet | SessionWallet>>(null)\r\n  const [network, setNetwork] = useState<Maybe<PunkTypes.Network>>(null)\r\n\r\n  const walletManager = getWalletManager()\r\n  walletManager.onSetWalletCallback = setWallet\r\n\r\n  const networkManager = getNetworkManager()\r\n  networkManager.onSetNetworkCallback = setNetwork\r\n\r\n  const context: IWeb3Context = {\r\n    setError,\r\n    error,\r\n    wallet,\r\n    network\r\n  }\r\n\r\n  return (\r\n    <Web3Context.Provider value={context}>{props.children}</Web3Context.Provider>\r\n  )\r\n}\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { CommonUtil, getLogger, Networks, PunkTypes } from \"vitepunks-common\";\r\nimport { getClientConfig } from '../common/config';\r\nimport { getNetworkManager } from '../common/network';\r\nimport { MainLoading } from '../features/main/components/loading';\r\nimport { getWalletManager } from '../storage/wallet.storage';\r\nimport { getCommonContext } from './common.context';\r\nimport { useWeb3Context } from './web3';\r\n\r\nconst logger = getLogger()\r\n\r\nexport interface IConnectedWeb3Context {\r\n  account?: string\r\n  network?: Maybe<PunkTypes.Network>\r\n  logout: () => void\r\n}\r\n\r\nconst ConnectedWeb3Context = React.createContext<Maybe<IConnectedWeb3Context>>(undefined)\r\n\r\n/**\r\n * This hook can only be used by components under the `ConnectedWeb3` component. Otherwise it will throw.\r\n */\r\nexport const useConnectedWeb3Context = () => {\r\n  const context = React.useContext(ConnectedWeb3Context)\r\n\r\n  if (!context) {\r\n    throw new Error('Component rendered outside the provider tree')\r\n  }\r\n\r\n  return context\r\n}\r\n\r\ninterface Props {\r\n  children?: React.ReactNode\r\n}\r\n\r\n/**\r\n * Component used to render components that depend on Web3 being available. These components can then\r\n * `useConnectedWeb3Context` safely to get web3 stuff without having to null check it.\r\n */\r\nexport const ConnectedWeb3: React.FC<Props> = (props: Props) => {\r\n  const [connection, setConnection] = useState<IConnectedWeb3Context | null>(null)\r\n  const [retryCount, setRetryCount] = useState<number>(0)\r\n  const mounted = React.useRef(false);\r\n  const web3Context = useWeb3Context()\r\n  const commonContext = getCommonContext()\r\n\r\n  const { wallet, network } = web3Context\r\n\r\n  React.useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (!wallet) {\r\n      const walletManager = getWalletManager()\r\n      walletManager.initWallet()\r\n    }\r\n  }, [wallet])\r\n\r\n  useEffect(() => {\r\n    if (!network) {\r\n      const networkManager = getNetworkManager()\r\n      const networkId = getClientConfig().NETWORK_ID;\r\n      networkManager.setNetwork(Networks.find(e => e.id === networkId))\r\n      logger.info(\"Network:\", networkManager.getNetwork())()\r\n    }\r\n  }, [network])\r\n\r\n  const logout = useCallback(() => {\r\n    const walletManager = getWalletManager()\r\n    walletManager.removeWallet()\r\n    window.location.reload()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const value = {\r\n      account: wallet?.active?.address,\r\n      network,\r\n      logout\r\n    }\r\n\r\n    logger.info('ConnectedWeb3.account', wallet?.active?.address)()\r\n\r\n    const initAsync = async (_retryCount: number = 0) => {\r\n      if (network) {\r\n        logger.info('Init ConnectedWeb3', _retryCount)()\r\n        if (_retryCount >= 5) {\r\n          window.location.reload()\r\n        }\r\n        const startTimestamp = Date.now()\r\n        const retryId = setTimeout(async () => {\r\n          if (mounted.current && !commonContext.isInitialized) {\r\n            commonContext.dispose()\r\n            _retryCount++\r\n            setRetryCount(_retryCount)\r\n            await CommonUtil.timeout(1000)\r\n            initAsync(_retryCount)\r\n          }\r\n        }, 3000)\r\n        try {\r\n          setConnection(null)\r\n          await commonContext.initAsync()\r\n          setRetryCount(0)\r\n          setConnection(value)\r\n        } catch (error) {\r\n          logger.error(error)()\r\n          clearTimeout(retryId)\r\n          const minDelay = 3000\r\n          const elapsed = Date.now() - startTimestamp\r\n          setTimeout(() => {\r\n            if (mounted.current && !commonContext.isInitialized) {\r\n              _retryCount++\r\n              setRetryCount(_retryCount)\r\n              initAsync(_retryCount)\r\n            }\r\n          }, elapsed > minDelay ? 0 : minDelay - elapsed);\r\n        }\r\n      }\r\n    }\r\n    initAsync()\r\n    return () => {\r\n      commonContext.dispose()\r\n    }\r\n  }, [wallet, network, logout, commonContext])\r\n\r\n  return (\r\n    <>\r\n      {!connection ? (\r\n        <MainLoading retryCount={retryCount}></MainLoading>\r\n      ) : (\r\n        <ConnectedWeb3Context.Provider value={connection}>{props.children}</ConnectedWeb3Context.Provider>\r\n      )}\r\n    </>\r\n  )\r\n}","import { ProviderContext } from \"notistack\";\r\nimport { FormatUtil, getEmitter } from 'vitepunks-common';\r\n\r\nexport abstract class SnackbarUtil {\r\n  static snackbar: ProviderContext;\r\n  static enqueueError(error: any): void {\r\n    const message = FormatUtil.formatMessage(error);\r\n    if (message === \"Session currently disconnected\") {\r\n      const emitter = getEmitter();\r\n      emitter.emitConnectWalletDialog(true);\r\n    }\r\n    SnackbarUtil.snackbar.enqueueSnackbar(message);\r\n  }\r\n  static enqueueMessage(message: string): void {\r\n    SnackbarUtil.snackbar.enqueueSnackbar(message);\r\n  }\r\n}","import { PunkTypes } from \"vitepunks-common\";\r\n\r\nexport abstract class WebUtil {\r\n  public static getDocumentState = () => {\r\n    if (document.visibilityState === 'hidden') {\r\n      return PunkTypes.DocumentState.Hidden;\r\n    }\r\n    return PunkTypes.DocumentState.Active;\r\n  }\r\n}","import { Box, Paper, Typography } from '@mui/material';\r\nimport React from 'react';\r\nimport { CommonUtil } from \"vitepunks-common\";\r\n\r\ninterface Props {\r\n  message: string\r\n  type: 'default' | 'warning'\r\n  error?: any\r\n  color?: string\r\n  backgroundColor?: string\r\n}\r\n\r\nexport const Alert: React.FC<Props> = (props: Props) => {\r\n  let color = '#000000';\r\n  let backgroundColor = 'rgba(255, 255, 255, 0.5)';\r\n\r\n  switch (props.type) {\r\n    case 'warning':\r\n      color = '#611a15';\r\n      backgroundColor = 'rgba(255, 0, 0, 0.1)';\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  if (props.error) {\r\n    console.log(CommonUtil.toJsonString(props.error));\r\n  }\r\n\r\n  return (\r\n    <Paper>\r\n      <Box sx={{\r\n        color: props.color ?? color,\r\n        backgroundColor: props.backgroundColor ?? backgroundColor,\r\n        padding: '15px',\r\n        textAlign: 'center'\r\n      }}>\r\n        <Typography>{props.message}</Typography>\r\n      </Box>\r\n    </Paper>\r\n  );\r\n}\r\n","import { LoadingButton } from '@mui/lab';\r\nimport { SxProps, Theme } from '@mui/system';\r\nimport React from 'react';\r\nimport { FormatUtil } from 'vitepunks-common';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\n\r\ninterface Props {\r\n  children: React.ReactNode\r\n  size?: 'small' | 'medium' | 'large'\r\n  variant?: 'text' | 'outlined' | 'contained'\r\n  color?: 'inherit' | 'primary' | 'secondary' | 'success' | 'error' | 'info' | 'warning',\r\n  fullWidth?: boolean\r\n  autoFocus?: boolean\r\n  disabled?: boolean\r\n  startIcon?: React.ReactNode;\r\n  sx?: SxProps<Theme>\r\n  callbackFn: () => Promise<void>\r\n}\r\n\r\nexport const ClickOnceButton: React.FC<Props> = (props: Props) => {\r\n  const mounted = React.useRef(false);\r\n  const [isDisabled, setIsDisabled] = React.useState(false);\r\n\r\n  const handleClick = async () => {\r\n    setIsDisabled(true);\r\n    try {\r\n      await props.callbackFn();\r\n    } catch (error) {\r\n      SnackbarUtil.enqueueError(FormatUtil.formatMessage(error));\r\n    }\r\n    if (mounted.current) {\r\n      setIsDisabled(false);\r\n    }\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <LoadingButton\r\n      loading={isDisabled}\r\n      size={props.size ?? \"small\"}\r\n      variant={props.variant ?? \"contained\"}\r\n      color={props.color ?? \"primary\"}\r\n      fullWidth={props.fullWidth}\r\n      disabled={props.disabled}\r\n      onClick={handleClick}\r\n      startIcon={props.startIcon}\r\n      sx={props.sx}\r\n    >\r\n      {props.children}\r\n    </LoadingButton>\r\n  );\r\n}\r\n","import { SvgIcon, SxProps, Theme } from \"@mui/material\";\r\nimport React from \"react\";\r\n\r\ntype FontAwesomeSvgIconProps = {\r\n  icon: any;\r\n  sx?: SxProps<Theme>\r\n};\r\n\r\n// interface CustomSVGSVGElement extends SVGSVGElement {\r\n//   sx?: SxProps<Theme>\r\n// }\r\n\r\nexport const FontAwesomeSvgIcon = React.forwardRef<SVGSVGElement, FontAwesomeSvgIconProps>(\r\n  (props, ref) => {\r\n    const { icon } = props;\r\n\r\n    const {\r\n      icon: [width, height, , , svgPathData],\r\n    } = icon;\r\n\r\n    return (\r\n      <SvgIcon ref={ref} viewBox={`0 0 ${width} ${height}`} sx={props.sx}>\r\n        {typeof svgPathData === 'string' ? (\r\n          <path d={svgPathData} />\r\n        ) : (\r\n          /**\r\n           * A multi-path Font Awesome icon seems to imply a duotune icon. The 0th path seems to\r\n           * be the faded element (referred to as the \"secondary\" path in the Font Awesome docs)\r\n           * of a duotone icon. 40% is the default opacity.\r\n           *\r\n           * @see https://fontawesome.com/how-to-use/on-the-web/styling/duotone-icons#changing-opacity\r\n           */\r\n          svgPathData.map((d: string, i: number) => (\r\n            <path style={{ opacity: i === 0 ? 0.4 : 1 }} d={d} />\r\n          ))\r\n        )}\r\n      </SvgIcon>\r\n    );\r\n  },\r\n);","import { styled } from '@mui/material/styles';\r\nimport Tooltip, { tooltipClasses, TooltipProps } from '@mui/material/Tooltip';\r\nimport * as React from 'react';\r\n\r\nexport interface CustomTooltipProps extends TooltipProps {\r\n  fullWidth?: boolean\r\n}\r\n\r\nexport const ExtendedBootstrapTooltip: React.FC<CustomTooltipProps> = (props: CustomTooltipProps) => {\r\n  return (\r\n    <BootstrapTooltip {...props} sx={{ [`& .${tooltipClasses.tooltip}`]: { maxWidth: \"none\" } }}></BootstrapTooltip>\r\n  )\r\n}\r\n\r\nexport const LightTooltip = styled(({ className, ...props }: TooltipProps) => (\r\n  <Tooltip {...props} classes={{ popper: className }} />\r\n))(({ theme }) => ({\r\n  [`& .${tooltipClasses.tooltip}`]: {\r\n    backgroundColor: theme.palette.common.white,\r\n    color: 'rgba(0, 0, 0, 0.87)',\r\n    boxShadow: theme.shadows[1],\r\n    fontSize: 11,\r\n  },\r\n}));\r\n\r\nexport const BootstrapTooltip = styled(({ className, ...props }: TooltipProps) => (\r\n  <Tooltip {...props} arrow classes={{ popper: className }} />\r\n))(({ theme }) => ({\r\n  [`& .${tooltipClasses.arrow}`]: {\r\n    color: theme.palette.common.black,\r\n  },\r\n  [`& .${tooltipClasses.tooltip}`]: {\r\n    backgroundColor: theme.palette.common.black,\r\n  },\r\n}));\r\n\r\nexport const HtmlTooltip = styled(({ className, ...props }: TooltipProps) => (\r\n  <Tooltip {...props} classes={{ popper: className }} />\r\n))(({ theme }) => ({\r\n  [`& .${tooltipClasses.tooltip}`]: {\r\n    backgroundColor: '#f5f5f9',\r\n    color: 'rgba(0, 0, 0, 0.87)',\r\n    maxWidth: 220,\r\n    fontSize: theme.typography.pxToRem(12),\r\n    border: '1px solid #dadde9',\r\n  },\r\n}));","\r\nimport { faGem, faUserCircle } from '@fortawesome/free-regular-svg-icons';\r\nimport { faHandHoldingUsd, faTag } from '@fortawesome/free-solid-svg-icons';\r\nimport { Box, CardActionArea, Chip, styled } from '@mui/material';\r\nimport Card from '@mui/material/Card';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport Typography from '@mui/material/Typography';\r\nimport React from 'react';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { CommonConstants, CommonUtil, PunkTypes, TokenUtil, UrlUtil } from \"vitepunks-common\";\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { FontAwesomeSvgIcon } from '../../../common/components/fa-icon';\r\nimport { ExtendedBootstrapTooltip } from '../../../common/components/tooltip';\r\n\r\nconst CustomCardMedia = styled('div')(({ theme }) => (`\r\n  position: relative;\r\n  height: 320px;\r\n  // animation: lightning 4s ease-out infinite;\r\n  background-image: url('${ClientConstants.ITEM_BG_URL}');\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n`));\r\n\r\nconst PunkImage = styled('div')(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  image-rendering: pixelated;\r\n`,\r\n);\r\n\r\ninterface Props {\r\n  item: PunkTypes.Punk\r\n}\r\n\r\nexport const MarketplaceBrowseItem: React.FC<Props> = (props: Props) => {\r\n  const truncateAddress = (address?: string) => {\r\n    return CommonUtil.truncateStringInTheMiddle(address, 10, 5)\r\n  }\r\n  const formatViteTooltip = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatViteTooltip(bn);\r\n  }\r\n  const formatVite = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatVite(bn);\r\n  }\r\n  return (\r\n    <Card>\r\n      <CardActionArea component={RouterLink} to={`/punk/${props.item.id}`}>\r\n        <CustomCardMedia>\r\n          {props.item.owner && (\r\n            <Box sx={{ position: \"absolute\", top: 5, left: 5 }}>\r\n              <ExtendedBootstrapTooltip title={<span>{props.item.owner}</span>} placement=\"bottom\" arrow>\r\n                <Chip size=\"small\" icon={<FontAwesomeSvgIcon icon={faUserCircle} sx={{ fontSize: \"small\", ml: 1 }} />} sx={{ fontSize: \"0.7rem\" }} label={truncateAddress(props.item.owner)} />\r\n              </ExtendedBootstrapTooltip>\r\n            </Box>\r\n          )}\r\n          <Box sx={{ position: \"absolute\", top: 5, right: 5 }}>\r\n            <ExtendedBootstrapTooltip title={<span>Rarity rank</span>} placement=\"bottom\" arrow>\r\n              <Chip size=\"small\" icon={<FontAwesomeSvgIcon icon={faGem} sx={{ fontSize: \"small\", ml: 1 }} />} sx={{ fontSize: \"0.7rem\" }} label={props.item.rank} />\r\n            </ExtendedBootstrapTooltip>\r\n          </Box>\r\n          <Box sx={{ position: \"absolute\", bottom: 5, left: 5, width: \"calc(100% - 10px)\" }}>\r\n            <Box>\r\n              {props.item.bid && (\r\n                <ExtendedBootstrapTooltip title={<span>Bid: {formatViteTooltip(props.item.bid.amount)}</span>} placement=\"bottom\" arrow>\r\n                  <Chip size=\"small\" icon={<FontAwesomeSvgIcon icon={faHandHoldingUsd} sx={{ fontSize: \"small\", ml: 1 }} />} sx={{ fontSize: \"0.7rem\", mt: 1, mr: 1 }} label={formatVite(props.item.bid.amount)} />\r\n                </ExtendedBootstrapTooltip>\r\n              )}\r\n              {props.item.offer && props.item.offer.minAmount.gt(0) && (\r\n                <ExtendedBootstrapTooltip title={<span>Price: {formatViteTooltip(props.item.offer.minAmount)}</span>} placement=\"bottom\" arrow>\r\n                  <Chip size=\"small\" icon={<FontAwesomeSvgIcon icon={faTag} sx={{ fontSize: \"small\", ml: 1 }} />} sx={{ fontSize: \"0.7rem\", mt: 1, float: \"right\" }} label={formatVite(props.item.offer.minAmount)} />\r\n                </ExtendedBootstrapTooltip>\r\n              )}\r\n            </Box>\r\n          </Box>\r\n          <PunkImage sx={{ backgroundImage: `url('${UrlUtil.getPunkUrl(props.item.image, props.item.cid)}')` }} />\r\n        </CustomCardMedia>\r\n        <CardContent sx={{ p: 0 }}>\r\n          <Typography variant=\"h6\" component=\"div\" sx={{ p: 1 }}>\r\n            {CommonConstants.PUNK_NAME} #{props.item.id}\r\n          </Typography>\r\n          <Box sx={{ height: \"70px\", overflow: \"auto\" }}>\r\n            <Box sx={{ p: 1 }}>\r\n              {props.item.attributes?.map((a: string) => (\r\n                <Chip key={a} label={a} variant=\"outlined\" sx={{ mb: 1, mr: 1 }} size=\"small\" />\r\n              ))}\r\n            </Box>\r\n          </Box>\r\n        </CardContent>\r\n      </CardActionArea>\r\n    </Card>\r\n  )\r\n}\r\n","import { ApolloError } from '@apollo/client';\r\nimport { Box, Container, Grid } from '@mui/material';\r\nimport React from 'react';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport { FormatUtil, PunkTypes } from 'vitepunks-common';\r\nimport { Alert } from '../../../common/components/alert';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\nimport { MarketplaceBrowseItem } from '../../../marketplace/components/browse-item';\r\n\r\ninterface EmptyResultProps {\r\n  error: ApolloError | undefined\r\n  isLoading: boolean\r\n  isEmpty: boolean\r\n}\r\n\r\nconst EmptyResult: React.FC<EmptyResultProps> = (props: EmptyResultProps) => {\r\n  return (\r\n    <>\r\n      {props.error ? (\r\n        <Alert message={FormatUtil.formatMessage(props.error)} type=\"warning\"></Alert>\r\n      ) : (\r\n        <>\r\n          {props.isLoading || !props.isEmpty ? (\r\n            <></>\r\n          ) : (\r\n            <Alert message=\"No punks found\" type=\"default\" ></Alert>\r\n          )}\r\n        </>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\ninterface InfiniteListLoadingProps {\r\n  error: ApolloError | undefined\r\n  isLoading: boolean\r\n  isEmpty: boolean\r\n}\r\n\r\nconst InfiniteListLoading: React.FC<InfiniteListLoadingProps> = (props: InfiniteListLoadingProps) => {\r\n  return (\r\n    <Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n      <Grid item key='1' xs={12} md={6}>\r\n        {props.isLoading ? (\r\n          <Alert message=\"Loading...\" type=\"default\" ></Alert>\r\n        ) : (\r\n          <EmptyResult error={props.error} isLoading={props.isLoading} isEmpty={props.isEmpty}></EmptyResult>\r\n        )}\r\n      </Grid>\r\n    </Grid>\r\n  )\r\n}\r\n\r\ninterface InfinitePunkListProps {\r\n  items: PunkTypes.Punk[]\r\n  fetchMoreDataAsync(): Promise<any>\r\n  error: ApolloError | undefined\r\n  isLoading: boolean\r\n  hasMore: boolean\r\n}\r\n\r\nexport const InfinitePunkList: React.FC<InfinitePunkListProps> = (props: InfinitePunkListProps) => {\r\n  return (\r\n    <>\r\n      <Container sx={{ pt: 3, pb: 6 }} maxWidth=\"xl\">\r\n        {props.items.length > 0 ? (\r\n          <>\r\n            <InfiniteScroll\r\n              dataLength={props.items.length}\r\n              next={props.fetchMoreDataAsync}\r\n              hasMore={props.hasMore}\r\n              loader={\r\n                <InfiniteListLoading error={props.error} isLoading={props.isLoading} isEmpty={props.items.length <= 0}></InfiniteListLoading>\r\n              }\r\n              scrollThreshold=\"200px\"\r\n              scrollableTarget=\"mainscroll\"\r\n            >\r\n              <Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\" marginBottom={3}>\r\n                {props.items.map((p: PunkTypes.Punk) => (\r\n                  <Grid item key={p.id} xs={12} sm={6} md={4} lg={3}>\r\n                    <MarketplaceBrowseItem item={p}></MarketplaceBrowseItem>\r\n                  </Grid>\r\n                ))}\r\n              </Grid>\r\n            </InfiniteScroll>\r\n            {props.hasMore && !props.isLoading && (\r\n              <Box sx={{ width: \"100%\", display: \"flex\", justifyContent: \"center\" }}>\r\n                <ClickOnceButton variant=\"outlined\" callbackFn={props.fetchMoreDataAsync} sx={{ minWidth: \"200px\" }}>Load more</ClickOnceButton>\r\n              </Box>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <InfiniteListLoading error={props.error} isLoading={props.isLoading} isEmpty={props.items.length <= 0}></InfiniteListLoading>\r\n        )}\r\n      </Container>\r\n    </>\r\n  )\r\n}\r\n","import { ApolloClient, FetchPolicy, NormalizedCacheObject } from \"@apollo/client\";\r\nimport { getApolloClient } from \"../clients/apollo.client\";\r\nimport { getClientConfig } from \"../common/config\";\r\nimport { GET_ACCOUNT_AUCTIONS_QUERY, GET_QUOTA_QUERY } from \"../queries/general\";\r\nimport { GetAccountAuctions, GetAccountAuctionsVariables } from \"../queries/__generated__/GetAccountAuctions\";\r\nimport { GetQuota, GetQuotaVariables } from \"../queries/__generated__/GetQuota\";\r\n\r\nclass GeneralService {\r\n  private readonly _apollo: ApolloClient<NormalizedCacheObject>;\r\n\r\n  constructor() {\r\n    this._apollo = getApolloClient();\r\n  }\r\n\r\n  getContractQuota = (_fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetQuota, GetQuotaVariables>({\r\n      query: GET_QUOTA_QUERY,\r\n      variables: {\r\n        address: getClientConfig().CONTRACT_ADDRESS\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getAccountAuctions = (_address: string, _limit: number, _cursor?: Maybe<string>, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetAccountAuctions, GetAccountAuctionsVariables>({\r\n      query: GET_ACCOUNT_AUCTIONS_QUERY,\r\n      variables: {\r\n        address: _address,\r\n        limit: _limit,\r\n        cursor: _cursor\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n}\r\n\r\nconst service = new GeneralService();\r\n\r\nexport const getGeneralService = () => {\r\n  return service;\r\n}","import { ApolloClient, FetchPolicy, NormalizedCacheObject } from \"@apollo/client\";\r\nimport { CommonUtil } from \"vitepunks-common\";\r\nimport { getApolloClient } from \"../clients/apollo.client\";\r\nimport { ACCEPT_BID_MUTATION, BID_MUTATION, BUY_MUTATION, CANCEL_BID_MUTATION, CANCEL_OFFER_MUTATION, OFFER_MUTATION } from \"../mutations\";\r\nimport { AcceptBid, AcceptBidVariables } from \"../mutations/__generated__/AcceptBid\";\r\nimport { Bid, BidVariables } from \"../mutations/__generated__/Bid\";\r\nimport { Buy, BuyVariables } from \"../mutations/__generated__/Buy\";\r\nimport { CancelBid, CancelBidVariables } from \"../mutations/__generated__/CancelBid\";\r\nimport { CancelOffer, CancelOfferVariables } from \"../mutations/__generated__/CancelOffer\";\r\nimport { Offer, OfferVariables } from \"../mutations/__generated__/Offer\";\r\nimport { GET_MARKET_EVENTS_QUERY, GET_MARKET_INFO_QUERY } from \"../queries\";\r\nimport { GetMarketEvents, GetMarketEventsVariables } from \"../queries/__generated__/GetMarketEvents\";\r\nimport { GetMarketInfo } from \"../queries/__generated__/GetMarketInfo\";\r\n\r\nclass MarketService {\r\n  private readonly _apollo: ApolloClient<NormalizedCacheObject>;\r\n\r\n  constructor() {\r\n    this._apollo = getApolloClient();\r\n  }\r\n\r\n  getMarketInfoAsync = (_fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetMarketInfo>({\r\n      query: GET_MARKET_INFO_QUERY,\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getEventsAsync = (_offset: number, _limit: number, _height?: Maybe<string>, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetMarketEvents, GetMarketEventsVariables>({\r\n      query: GET_MARKET_EVENTS_QUERY,\r\n      variables: {\r\n        offset: _offset,\r\n        limit: _limit,\r\n        height: _height\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  async offerAsync(id: string, amount: string, address?: Maybe<string>): Promise<boolean> {\r\n    const result = await this._apollo.mutate<Offer, OfferVariables>({\r\n      mutation: OFFER_MUTATION,\r\n      variables: {\r\n        id: id,\r\n        amount: amount,\r\n        address: CommonUtil.isNullOrWhitespace(address) ? undefined : address\r\n      }\r\n    });\r\n    return Boolean(result.data?.offer ?? false);\r\n  }\r\n\r\n  async cancelOfferAsync(id: string): Promise<boolean> {\r\n    const result = await this._apollo.mutate<CancelOffer, CancelOfferVariables>({\r\n      mutation: CANCEL_OFFER_MUTATION,\r\n      variables: {\r\n        id: id\r\n      }\r\n    });\r\n    return Boolean(result.data?.cancelOffer ?? false);\r\n  }\r\n\r\n  async buyAsync(id: string, amount: string): Promise<boolean> {\r\n    const result = await this._apollo.mutate<Buy, BuyVariables>({\r\n      mutation: BUY_MUTATION,\r\n      variables: {\r\n        id: id,\r\n        amount: amount\r\n      }\r\n    });\r\n    return Boolean(result.data?.buy ?? false);\r\n  }\r\n\r\n  async bidAsync(id: string, amount: string): Promise<boolean> {\r\n    const result = await this._apollo.mutate<Bid, BidVariables>({\r\n      mutation: BID_MUTATION,\r\n      variables: {\r\n        id: id,\r\n        amount: amount\r\n      }\r\n    });\r\n    return Boolean(result.data?.bid ?? false);\r\n  }\r\n\r\n  async acceptBidAsync(id: string, amount: string): Promise<boolean> {\r\n    const result = await this._apollo.mutate<AcceptBid, AcceptBidVariables>({\r\n      mutation: ACCEPT_BID_MUTATION,\r\n      variables: {\r\n        id: id,\r\n        amount: amount\r\n      }\r\n    });\r\n    return Boolean(result.data?.acceptBid ?? false);\r\n  }\r\n\r\n  async cancelBidAsync(id: string): Promise<boolean> {\r\n    const result = await this._apollo.mutate<CancelBid, CancelBidVariables>({\r\n      mutation: CANCEL_BID_MUTATION,\r\n      variables: {\r\n        id: id\r\n      }\r\n    });\r\n    return Boolean(result.data?.cancelBid ?? false);\r\n  }\r\n}\r\n\r\nconst service = new MarketService();\r\n\r\nexport const getMarketService = () => {\r\n  return service;\r\n}","import { faBan, faDonate, faEraser, faExchangeAlt, faGift, faHandHoldingUsd, faPowerOff, faQuestion, faTag, faTrophy } from '@fortawesome/free-solid-svg-icons';\r\nimport { PunkTypes } from 'vitepunks-common';\r\n\r\nexport abstract class IconUtil {\r\n  static getBuyEventTypeIcon = () => {\r\n    return faDonate;\r\n  }\r\n  static getClaimEventTypeIcon = () => {\r\n    return faExchangeAlt;\r\n    //return faBoxOpen;\r\n  }\r\n  static getOfferEventTypeIcon = () => {\r\n    return faTag;\r\n  }\r\n  static getGiftEventTypeIcon = () => {\r\n    return faGift;\r\n  }\r\n  static getCancelSaleEventTypeIcon = () => {\r\n    return faPowerOff;\r\n  }\r\n  static getCancelGiftEventTypeIcon = () => {\r\n    return faEraser;\r\n  }\r\n  static getPunkEventTypeIcon = (eventType: PunkTypes.PunkEventType, amount?: Maybe<PunkTypes.BigNumberWrapper>) => {\r\n    switch (eventType) {\r\n      case PunkTypes.PunkEventType.Mint:\r\n        return faTrophy;\r\n      case PunkTypes.PunkEventType.Offer:\r\n        if (amount && amount.gt(0)) {\r\n          return IconUtil.getOfferEventTypeIcon();\r\n        }\r\n        return IconUtil.getGiftEventTypeIcon();\r\n      case PunkTypes.PunkEventType.NewBid:\r\n        return faHandHoldingUsd;;\r\n      case PunkTypes.PunkEventType.CancelBid:\r\n        return faBan;\r\n      case PunkTypes.PunkEventType.Buy:\r\n        if (amount && amount.gt(0)) {\r\n          return IconUtil.getBuyEventTypeIcon();\r\n        }\r\n        return IconUtil.getClaimEventTypeIcon();\r\n      case PunkTypes.PunkEventType.CancelOffer:\r\n        if (amount && amount.gt(0)) {\r\n          return IconUtil.getCancelSaleEventTypeIcon();\r\n        }\r\n        return IconUtil.getCancelGiftEventTypeIcon();\r\n      default:\r\n        return faQuestion;\r\n    }\r\n  }\r\n  static getAccountAuctionTypeIcon = (auctionType: PunkTypes.AccountAuctionType, amount?: Maybe<PunkTypes.BigNumberWrapper>) => {\r\n    switch (auctionType) {\r\n      case PunkTypes.AccountAuctionType.Bid:\r\n        return IconUtil.getPunkEventTypeIcon(PunkTypes.PunkEventType.NewBid, amount);\r\n      case PunkTypes.AccountAuctionType.Offer:\r\n        return IconUtil.getPunkEventTypeIcon(PunkTypes.PunkEventType.Offer, amount);\r\n      default:\r\n        return IconUtil.getPunkEventTypeIcon(PunkTypes.PunkEventType.Unknown, amount);\r\n    }\r\n  }\r\n}","import { Link } from '@mui/material';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { CommonUtil, ExplorerUtil } from \"vitepunks-common\";\r\n\r\ninterface Props {\r\n  children: React.ReactNode\r\n  value?: Maybe<string>\r\n  type: ExplorerLinkType\r\n}\r\n\r\nexport enum ExplorerLinkType {\r\n  Address,\r\n  Transaction\r\n}\r\n\r\nexport const ExplorerLink: React.FC<Props> = (props: Props) => {\r\n  const getUrl = useCallback(() => {\r\n    if (!props.value || CommonUtil.isNullOrWhitespace(props.value)) {\r\n      return undefined;\r\n    }\r\n    switch (props.type) {\r\n      case ExplorerLinkType.Address:\r\n        return ExplorerUtil.getAddressUrl(props.value);\r\n      default:\r\n        return ExplorerUtil.getTxUrl(props.value);\r\n    }\r\n  }, [props.value, props.type]);\r\n  const [url, setUrl] = useState<Maybe<string>>(getUrl());\r\n\r\n  useEffect(() => {\r\n    setUrl(getUrl());\r\n  }, [props.value, props.type, getUrl]);\r\n\r\n  if (!url || CommonUtil.isNullOrWhitespace(url)) {\r\n    return (\r\n      <>\r\n        {props.children}\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Link underline=\"hover\" href={url} target=\"_blank\">\r\n      {props.children}\r\n    </Link>\r\n  );\r\n}\r\n","import moment from 'moment';\r\n\r\nexport class MomentUtil {\r\n  constructor() {\r\n    moment.locale(navigator.language);\r\n  }\r\n\r\n  public setLocale(language: string): void {\r\n    moment.locale(language);\r\n  }\r\n\r\n  public get(): moment.Moment {\r\n    return moment()\r\n  }\r\n\r\n  public getFromUnix(date: number) {\r\n    return moment.unix(date);\r\n  }\r\n\r\n  public getFromMilliseconds(date: number) {\r\n    return moment(date, 'x');\r\n  }\r\n\r\n  public getLocal(date: any): moment.Moment {\r\n    return moment.utc(date).local();\r\n  }\r\n\r\n  public getLocalTime(date: any): string {\r\n    return this.getLocal(date).format('LTS');\r\n  }\r\n\r\n  public getLocalDate(date: any): string {\r\n    return this.getLocal(date).format('L');\r\n  }\r\n\r\n  public getLocalFormatted(date: any): string {\r\n    return this.getLocalTime(date) + ' ' + this.getLocalDate(date);\r\n  }\r\n\r\n  public getLocalReverseFormatted(date: any): string {\r\n    return this.getLocalDate(date) + ' ' + this.getLocalTime(date);\r\n  }\r\n\r\n  public getDuration(date: any, unit: moment.unitOfTime.DurationConstructor | undefined = \"seconds\"): moment.Duration {\r\n    const diff = moment(date).unix() - moment().unix();\r\n    return moment.duration(diff, unit);\r\n  }\r\n\r\n  public isExpired(timestamp: any): boolean {\r\n    try {\r\n      if (timestamp) {\r\n        return moment.utc().unix() >= Number(timestamp);\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n}","import { Grid } from '@mui/material';\r\nimport React from 'react';\r\nimport { FormatUtil } from 'vitepunks-common';\r\nimport { Alert } from '../alert';\r\n\r\nexport interface EventListLoadingProps {\r\n  error: any\r\n  loading: boolean\r\n  count: number\r\n  message: string\r\n}\r\n\r\nexport const EventListLoading: React.FC<EventListLoadingProps> = (props: EventListLoadingProps) => {\r\n  return (\r\n    <Grid item key='1' xs={12} md={6}>\r\n      {props.loading ? (\r\n        <Alert message=\"Loading...\" type=\"default\" ></Alert>\r\n      ) : (\r\n        <>\r\n          {props.error ? (\r\n            <Alert message={FormatUtil.formatMessage(props.error)} type=\"warning\"></Alert>\r\n          ) : (\r\n            <>\r\n              {props.count > 0 ? (\r\n                <></>\r\n              ) : (\r\n                <Alert message={props.message} type=\"default\"></Alert>\r\n              )}\r\n            </>\r\n          )}\r\n        </>\r\n      )}\r\n    </Grid>\r\n  )\r\n}\r\n","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, FormControl, Input, Typography } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonConstants, PunkTypes, TokenUtil } from 'vitepunks-common';\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\n\r\ninterface Props {\r\n  state: PunkTypes.PunkDialogState\r\n  setState: React.Dispatch<React.SetStateAction<PunkTypes.PunkDialogState>>\r\n  callbackAsync: (_success: boolean) => Promise<void>\r\n}\r\n\r\nexport const PunkAcceptDialog: React.FC<Props> = (props: Props) => {\r\n  const [amount, setAmount] = useState(\"\");\r\n  const service = getMarketService();\r\n\r\n  useEffect(() => {\r\n    if (props.state.type === PunkTypes.PunkDialogType.ACCEPT_OFFER) {\r\n      if (props.state.item.offer?.minAmount.gt(0)) {\r\n        setAmount(TokenUtil.formatViteTooltip(props.state.item.offer.minAmount))\r\n      }\r\n    } else {\r\n      if (props.state.item.bid?.amount.gt(0)) {\r\n        setAmount(TokenUtil.formatViteTooltip(props.state.item.bid.amount))\r\n      }\r\n    }\r\n  }, [props.state]);\r\n\r\n  const handleClose = () => {\r\n    props.setState({\r\n      ...props.state,\r\n      open: false\r\n    })\r\n  };\r\n\r\n  const handleConfirmAsync = async () => {\r\n    let _message = `Congratulations! You %ACTION_NAME ${CommonConstants.PUNK_NAME} #${props.state.item.id}`;\r\n    let _success = false;\r\n    try {\r\n      if (props.state.type === PunkTypes.PunkDialogType.ACCEPT_OFFER) {\r\n        if (!props.state.item.offer) {\r\n          throw new Error(`${CommonConstants.PUNK_NAME} #${props.state.item.id} is not for sale`);\r\n        }\r\n        _success = await service.buyAsync(props.state.item.id, props.state.item.offer.minAmount.toFixed());\r\n        _message = _message.replace(\"%ACTION_NAME\", \"bought\");\r\n      } else {\r\n        if (!props.state.item.bid) {\r\n          throw new Error(`${CommonConstants.PUNK_NAME} #${props.state.item.id} has no bid`);\r\n        }\r\n        _success = await service.acceptBidAsync(props.state.item.id, props.state.item.bid?.amount.toFixed());\r\n        _message = _message.replace(\"%ACTION_NAME\", \"sold\");\r\n      }\r\n      if (_success) {\r\n        SnackbarUtil.enqueueMessage(_message);\r\n        handleClose();\r\n      } else {\r\n        SnackbarUtil.enqueueError(\"Error\");\r\n      }\r\n    } catch (error) {\r\n      _success = false;\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      await props.callbackAsync(_success);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={props.state.open} maxWidth=\"xs\" fullWidth>\r\n      <DialogTitle>Confirmation required</DialogTitle>\r\n      <DialogContent>\r\n        {props.state.type === PunkTypes.PunkDialogType.ACCEPT_OFFER ? (\r\n          <Typography variant=\"body1\" color=\"textSecondary\" gutterBottom>\r\n            Buy {CommonConstants.PUNK_NAME} #{props.state.item.id}\r\n          </Typography>\r\n        ) : (\r\n          <>\r\n            <Typography variant=\"body1\" color=\"textSecondary\" gutterBottom>\r\n              Accept bid for {CommonConstants.PUNK_NAME} #{props.state.item.id}\r\n            </Typography>\r\n            {/* <Typography variant=\"body1\" color=\"textSecondary\">\r\n              You will receive <small>(minus fees)</small>:\r\n            </Typography> */}\r\n          </>\r\n        )}\r\n        <FormControl fullWidth sx={{ mt: 2 }} variant=\"standard\" >\r\n          <Input\r\n            id=\"amount\"\r\n            value={amount}\r\n            //startAdornment={<InputAdornment position=\"start\">${CommonConstants.CURRENCY_NAME}</InputAdornment>}\r\n            disabled\r\n          />\r\n        </FormControl>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>Close</Button>\r\n        <ClickOnceButton size=\"medium\" color=\"primary\" callbackFn={handleConfirmAsync}>\r\n          Confirm\r\n        </ClickOnceButton>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import { FetchPolicy } from '@apollo/client';\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, FormControl, Input, InputAdornment, InputLabel } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonConstants, CommonUtil, PunkTypes, TokenUtil } from \"vitepunks-common\";\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\n\r\ninterface Props {\r\n  state: PunkTypes.PunkDialogState\r\n  fee: PunkTypes.BigNumberWrapper\r\n  updateFee: (_fetchPolicy?: FetchPolicy) => Promise<void>\r\n  setState: React.Dispatch<React.SetStateAction<PunkTypes.PunkDialogState>>\r\n  callbackAsync: (_success: boolean) => Promise<void>\r\n}\r\n\r\nexport const PunkBidDialog: React.FC<Props> = (props: Props) => {\r\n  const [amount, setAmount] = useState<string>(\"\");\r\n  const [disabled, setDisabled] = useState<boolean>(false);\r\n  const service = getMarketService();\r\n\r\n  const changeAmount = (amount: string) => {\r\n    setAmount(amount);\r\n    setDisabled(CommonUtil.isNullOrWhitespace(amount) || new PunkTypes.BigNumberWrapper(amount).lte(0));\r\n  }\r\n\r\n  const updateFee = props.updateFee;\r\n\r\n  useEffect(() => {\r\n    if (props.state.open) {\r\n      changeAmount(\"\");\r\n      updateFee(\"cache-first\");\r\n    }\r\n  }, [props.state, updateFee]);\r\n\r\n  const handleClose = () => {\r\n    props.setState({\r\n      ...props.state,\r\n      open: false\r\n    })\r\n  };\r\n\r\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    changeAmount(event.target.value);\r\n  };\r\n\r\n  const handleConfirmAsync = async () => {\r\n    let _success = false;\r\n    try {\r\n      const _amount = new PunkTypes.BigNumberWrapper(amount).shiftedBy(CommonConstants.CURRENCY_DECIMALS);\r\n      _success = await service.bidAsync(props.state.item.id, _amount.toFixed());\r\n      if (_success) {\r\n        SnackbarUtil.enqueueMessage(\"Bid success\");\r\n        handleClose();\r\n      } else {\r\n        SnackbarUtil.enqueueError(\"Error\");\r\n        updateFee();\r\n      }\r\n    } catch (error) {\r\n      _success = false;\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      await props.callbackAsync(_success);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={props.state.open} maxWidth=\"xs\" fullWidth>\r\n      <DialogTitle>Bid</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          Place a bid for {CommonConstants.PUNK_NAME} #{props.state.item.id}\r\n        </DialogContentText>\r\n        <FormControl fullWidth sx={{ mt: 2 }} variant=\"standard\" >\r\n          <InputLabel htmlFor=\"amount\">Amount</InputLabel>\r\n          <Input\r\n            id=\"amount\"\r\n            value={amount}\r\n            onChange={handleChange}\r\n            type=\"number\"\r\n            autoFocus\r\n            startAdornment={<InputAdornment position=\"start\">${CommonConstants.CURRENCY_NAME}</InputAdornment>}\r\n          />\r\n        </FormControl>\r\n        {props.fee.gt(0) && (\r\n          <DialogContentText align='right'>\r\n            + {TokenUtil.formatVite(props.fee)} {CommonConstants.CURRENCY_NAME} protocol fee\r\n          </DialogContentText>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>Cancel</Button>\r\n        <ClickOnceButton size=\"medium\" color=\"primary\" callbackFn={handleConfirmAsync} disabled={disabled}>\r\n          Confirm\r\n        </ClickOnceButton>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { ActionName, CommonConstants, PunkTypes } from 'vitepunks-common';\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\n\r\ninterface Props {\r\n  state: PunkTypes.PunkDialogState\r\n  setState: React.Dispatch<React.SetStateAction<PunkTypes.PunkDialogState>>\r\n  callbackAsync: (_success: boolean) => Promise<void>\r\n}\r\n\r\nexport const PunkCancelDialog: React.FC<Props> = (props: Props) => {\r\n  const [actionName, setActionName] = useState(\"\");\r\n  const service = getMarketService();\r\n\r\n  useEffect(() => {\r\n    setActionName(props.state.type === PunkTypes.PunkDialogType.CANCEL_BID ? ActionName.bid : (props.state.item.offer?.minAmount.gt(0) ? ActionName.listing : ActionName.gift));\r\n  }, [props.state]);\r\n\r\n  const handleClose = () => {\r\n    props.setState({\r\n      ...props.state,\r\n      open: false\r\n    })\r\n  };\r\n\r\n  const handleConfirmAsync = async () => {\r\n    let _success = false;\r\n    try {\r\n      if (props.state.type === PunkTypes.PunkDialogType.CANCEL_BID) {\r\n        _success = await service.cancelBidAsync(props.state.item.id);\r\n      } else {\r\n        _success = await service.cancelOfferAsync(props.state.item.id);\r\n      }\r\n      if (_success) {\r\n        SnackbarUtil.enqueueMessage(`${actionName} cancelled`);\r\n        handleClose();\r\n      } else {\r\n        SnackbarUtil.enqueueError(\"Error\");\r\n      }\r\n    } catch (error) {\r\n      _success = false;\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      await props.callbackAsync(_success);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={props.state.open} maxWidth=\"xs\" fullWidth>\r\n      <DialogTitle>Cancel</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          Cancel the {actionName.toLowerCase()} for {CommonConstants.PUNK_NAME} #{props.state.item.id}\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>Close</Button>\r\n        <ClickOnceButton size=\"medium\" color=\"primary\" callbackFn={handleConfirmAsync}>\r\n          Confirm\r\n        </ClickOnceButton>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import { FetchPolicy } from '@apollo/client';\r\nimport { Box, Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, FormControl, Input, InputLabel } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { ActionName, CommonConstants, CommonUtil, PunkTypes, TokenUtil } from \"vitepunks-common\";\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\n\r\ninterface Props {\r\n  state: PunkTypes.PunkDialogState\r\n  fee: PunkTypes.BigNumberWrapper\r\n  updateFee: (_fetchPolicy?: FetchPolicy) => Promise<void>\r\n  setState: React.Dispatch<React.SetStateAction<PunkTypes.PunkDialogState>>\r\n  callbackAsync: (_success: boolean) => Promise<void>\r\n}\r\n\r\nexport const PunkGiftDialog: React.FC<Props> = (props: Props) => {\r\n  const [address, setAddress] = useState<string>(\"\");\r\n  const [disabled, setDisabled] = useState<boolean>(true);\r\n  const service = getMarketService();\r\n\r\n  const changeAddress = (address: string) => {\r\n    setAddress(address);\r\n    setDisabled(CommonUtil.isNullOrWhitespace(address));\r\n  }\r\n\r\n  const updateFee = props.updateFee;\r\n\r\n  useEffect(() => {\r\n    if (props.state.open) {\r\n      setAddress(\"\");\r\n      updateFee(\"cache-first\");\r\n    }\r\n  }, [props.state, updateFee]);\r\n\r\n  const handleClose = () => {\r\n    props.setState({\r\n      ...props.state,\r\n      open: false\r\n    })\r\n  };\r\n\r\n  const handleAddressChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    changeAddress(event.target.value);\r\n  };\r\n\r\n  const handleConfirmAsync = async () => {\r\n    let _success = false;\r\n    try {\r\n      const _amount = new PunkTypes.BigNumberWrapper(0);\r\n      _success = await service.offerAsync(props.state.item.id, _amount.toFixed(), CommonUtil.isNullOrWhitespace(address) ? undefined : address);\r\n      if (_success) {\r\n        SnackbarUtil.enqueueMessage(`${ActionName.gift} success`);\r\n        handleClose();\r\n      } else {\r\n        SnackbarUtil.enqueueError(\"Error\");\r\n        updateFee();\r\n      }\r\n    } catch (error) {\r\n      _success = false;\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      await props.callbackAsync(_success);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={props.state.open} maxWidth=\"xs\" fullWidth>\r\n      <DialogTitle>Gift/transfer</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          Transfer {CommonConstants.PUNK_NAME} #{props.state.item.id} as a gift\r\n        </DialogContentText>\r\n        <FormControl fullWidth variant=\"standard\" >\r\n          <InputLabel htmlFor=\"address\">Address</InputLabel>\r\n          <Input\r\n            id=\"address\"\r\n            value={address}\r\n            onChange={handleAddressChange}\r\n            placeholder=\"Only this address will be eligible to claim\"\r\n            type=\"text\"\r\n          />\r\n        </FormControl>\r\n        {props.fee.gt(0) ? (\r\n          <DialogContentText align='right'>\r\n            + {TokenUtil.formatVite(props.fee)} {CommonConstants.CURRENCY_NAME} protocol fee\r\n          </DialogContentText>\r\n        ) : (\r\n          <Box marginTop={2}></Box>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>Cancel</Button>\r\n        <ClickOnceButton size=\"medium\" color=\"primary\" callbackFn={handleConfirmAsync} disabled={disabled}>\r\n          Confirm\r\n        </ClickOnceButton>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import { FetchPolicy } from '@apollo/client';\r\nimport { Box, Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, FormControl, Input, InputAdornment, InputLabel } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonConstants, CommonUtil, PunkTypes, TokenUtil } from \"vitepunks-common\";\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\n\r\ninterface Props {\r\n  state: PunkTypes.PunkDialogState\r\n  fee: PunkTypes.BigNumberWrapper\r\n  updateFee: (_fetchPolicy?: FetchPolicy) => Promise<void>\r\n  setState: React.Dispatch<React.SetStateAction<PunkTypes.PunkDialogState>>\r\n  callbackAsync: (_success: boolean) => Promise<void>\r\n}\r\n\r\nexport const PunkOfferDialog: React.FC<Props> = (props: Props) => {\r\n  const [amount, setAmount] = useState<string>(\"\");\r\n  const [address, setAddress] = useState<string>(\"\");\r\n  const [disabled, setDisabled] = useState<boolean>(false);\r\n  const service = getMarketService();\r\n\r\n  const changeAmount = (amount: string) => {\r\n    setAmount(amount);\r\n    setDisabled(CommonUtil.isNullOrWhitespace(amount) || new PunkTypes.BigNumberWrapper(amount).lt(0));\r\n  }\r\n\r\n  const updateFee = props.updateFee;\r\n\r\n  useEffect(() => {\r\n    if (props.state.open) {\r\n      changeAmount(\"\");\r\n      setAddress(\"\");\r\n      updateFee(\"cache-first\");\r\n    }\r\n  }, [props.state, updateFee]);\r\n\r\n  const handleClose = () => {\r\n    props.setState({\r\n      ...props.state,\r\n      open: false\r\n    })\r\n  };\r\n\r\n  const handleAmountChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    changeAmount(event.target.value);\r\n  };\r\n\r\n  const handleAddressChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setAddress(event.target.value);\r\n  };\r\n\r\n  const handleConfirmAsync = async () => {\r\n    let _success = false;\r\n    try {\r\n      const _amount = new PunkTypes.BigNumberWrapper(amount).shiftedBy(CommonConstants.CURRENCY_DECIMALS);\r\n      _success = await service.offerAsync(props.state.item.id, _amount.toFixed(), CommonUtil.isNullOrWhitespace(address) ? undefined : address);\r\n      if (_success) {\r\n        SnackbarUtil.enqueueMessage(\"Listed for sale\");\r\n        handleClose();\r\n      } else {\r\n        SnackbarUtil.enqueueError(\"Error\");\r\n        updateFee();\r\n      }\r\n    } catch (error) {\r\n      _success = false;\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      await props.callbackAsync(_success);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={props.state.open} maxWidth=\"xs\" fullWidth>\r\n      <DialogTitle>Sell</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          List {CommonConstants.PUNK_NAME} #{props.state.item.id} for sale\r\n        </DialogContentText>\r\n        <FormControl fullWidth sx={{ mt: 2 }} variant=\"standard\" >\r\n          <InputLabel htmlFor=\"amount\">Amount</InputLabel>\r\n          <Input\r\n            id=\"amount\"\r\n            value={amount}\r\n            onChange={handleAmountChange}\r\n            type=\"number\"\r\n            autoFocus\r\n            startAdornment={<InputAdornment position=\"start\">${CommonConstants.CURRENCY_NAME}</InputAdornment>}\r\n          />\r\n        </FormControl>\r\n        {props.fee.gt(0) ? (\r\n          <DialogContentText align='right'>\r\n            + {TokenUtil.formatVite(props.fee)} {CommonConstants.CURRENCY_NAME} protocol fee\r\n          </DialogContentText>\r\n        ) : (\r\n          <Box marginTop={2}></Box>\r\n        )}\r\n        <FormControl fullWidth variant=\"standard\" >\r\n          <InputLabel htmlFor=\"address\">Address (optional)</InputLabel>\r\n          <Input\r\n            id=\"address\"\r\n            value={address}\r\n            onChange={handleAddressChange}\r\n            placeholder=\"Only this address will be eligible to buy\"\r\n            type=\"text\"\r\n          />\r\n        </FormControl>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>Cancel</Button>\r\n        <ClickOnceButton size=\"medium\" color=\"primary\" callbackFn={handleConfirmAsync} disabled={disabled}>\r\n          Confirm\r\n        </ClickOnceButton>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import { FetchPolicy } from '@apollo/client';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { getEmitter, getLogger, PunkTypes, TransformUtil } from 'vitepunks-common';\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { PunkAcceptDialog } from '../dialog-accept';\r\nimport { PunkBidDialog } from '../dialog-bid';\r\nimport { PunkCancelDialog } from '../dialog-cancel';\r\nimport { PunkGiftDialog } from '../dialog-gift';\r\nimport { PunkOfferDialog } from '../dialog-offer';\r\n\r\nconst logger = getLogger();\r\n\r\ninterface Props {\r\n  state: PunkTypes.PunkDialogState\r\n  setState: React.Dispatch<React.SetStateAction<PunkTypes.PunkDialogState>>\r\n  callbackAsync: (success: boolean) => Promise<void>\r\n}\r\n\r\nexport const PunkDialog: React.FC<Props> = (props: Props) => {\r\n  const mounted = React.useRef(false);\r\n  const [fee, setFee] = useState<PunkTypes.BigNumberWrapper>(TransformUtil.defaultBigNumber);\r\n  const service = getMarketService();\r\n  const emitter = getEmitter();\r\n\r\n  React.useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  const updateFee = useCallback(async (_fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    if (mounted.current) {\r\n      setFee(TransformUtil.defaultBigNumber);\r\n      try {\r\n        const result = await service.getMarketInfoAsync(_fetchPolicy);\r\n        if (mounted.current) {\r\n          const info = result.data.marketInfo as PunkTypes.MarketInfo;\r\n          if (info && info.actionPrice.gt(0)) {\r\n            setFee(info.actionPrice);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        logger.error(error)();\r\n      }\r\n    }\r\n  }, [service]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.MarketChangedEvent) => {\r\n      logger.info(`eventType: ${e.eventType} amount: ${e.value.toFixed()} timestamp: ${e.timestamp.toFixed()}`)();\r\n      updateFee();\r\n    }\r\n    logger.info('emitter.on', PunkTypes.GlobalEvent.MarketChanged)();\r\n    emitter.on(PunkTypes.GlobalEvent.MarketChanged, handleEvent);\r\n    return () => {\r\n      logger.info('emitter.off', PunkTypes.GlobalEvent.MarketChanged)();\r\n      emitter.off(PunkTypes.GlobalEvent.MarketChanged, handleEvent);\r\n    };\r\n  }, [emitter, updateFee]);\r\n\r\n  switch (props.state.type) {\r\n    case PunkTypes.PunkDialogType.BID:\r\n      return <PunkBidDialog state={props.state} fee={fee} updateFee={updateFee} setState={props.setState} callbackAsync={(success) => props.callbackAsync(success)}></PunkBidDialog>\r\n    case PunkTypes.PunkDialogType.OFFER:\r\n      return <PunkOfferDialog state={props.state} fee={fee} updateFee={updateFee} setState={props.setState} callbackAsync={(success) => props.callbackAsync(success)}></PunkOfferDialog>\r\n    case PunkTypes.PunkDialogType.GIFT:\r\n      return <PunkGiftDialog state={props.state} fee={fee} updateFee={updateFee} setState={props.setState} callbackAsync={(success) => props.callbackAsync(success)}></PunkGiftDialog>\r\n    case PunkTypes.PunkDialogType.CANCEL_BID:\r\n    case PunkTypes.PunkDialogType.CANCEL_OFFER:\r\n      return <PunkCancelDialog state={props.state} setState={props.setState} callbackAsync={(success) => props.callbackAsync(success)}></PunkCancelDialog>\r\n    case PunkTypes.PunkDialogType.ACCEPT_BID:\r\n    case PunkTypes.PunkDialogType.ACCEPT_OFFER:\r\n      return <PunkAcceptDialog state={props.state} setState={props.setState} callbackAsync={(success) => props.callbackAsync(success)}></PunkAcceptDialog>\r\n    default:\r\n      return <></>\r\n  }\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Avatar, Button, Grid, Link, Paper, styled, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from '@mui/material';\r\nimport React, { useState } from 'react';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { ActionName, CommonConstants, CommonUtil, getLogger, PunkTypes, TokenUtil, UrlUtil } from \"vitepunks-common\";\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\r\nimport { GET_PUNK_QUERY } from '../../../../queries';\r\nimport { GetPunk, GetPunkVariables } from '../../../../queries/__generated__/GetPunk';\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { IconUtil } from '../../../../util/icon.util';\r\nimport { MomentUtil } from '../../../../util/moment.util';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\nimport { EventListLoading } from '../../../common/components/event-list-loading';\r\nimport { ExtendedBootstrapTooltip } from '../../../common/components/tooltip';\r\nimport { PunkDialog } from '../../../punk/components/dialog';\r\n\r\nconst logger = getLogger();\r\n\r\ninterface EventTableRowProps {\r\n  isAuthorized: boolean\r\n  item: PunkTypes.AccountAuction\r\n  handleClaimAsync(_item: PunkTypes.AccountAuction): Promise<void>\r\n  handleOpenDialog(_type: PunkTypes.PunkDialogType, _item: PunkTypes.Punk, _auction: PunkTypes.AccountAuction): void\r\n}\r\n\r\nconst CustomAvatar = styled(Avatar)(({ theme }) => (`\r\n  background-image: url('${ClientConstants.ITEM_BG_URL}');\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  image-rendering: pixelated;\r\n  margin-right: 10px;\r\n`));\r\n\r\nconst CustomTableCell = styled(TableCell)(({ theme }) => (`\r\n  background-color: rgba(255, 255, 255, 0.3);\r\n`));\r\n\r\nconst EventTableRow: React.FC<EventTableRowProps> = (props: EventTableRowProps) => {\r\n  const [isAnon, setIsAnon] = useState(false);\r\n  const [isOwner, setIsOwner] = useState(false);\r\n\r\n  const context = useConnectedWeb3Context();\r\n\r\n  const query = useQuery<GetPunk, GetPunkVariables>(GET_PUNK_QUERY, {\r\n    variables: {\r\n      id: props.item.punkId.toString()\r\n    },\r\n    fetchPolicy: 'network-only',\r\n    onCompleted: (data) => {\r\n      setIsAnon(CommonUtil.isNullOrWhitespace(context.account));\r\n      setIsOwner(data.punk.owner?.toLowerCase() === context.account?.toLowerCase());\r\n    }\r\n  });\r\n  const momentUtil = new MomentUtil();\r\n\r\n  const formatTimestamp = (timestamp: any) => {\r\n    return momentUtil.getLocalReverseFormatted(momentUtil.getFromUnix(timestamp));\r\n  }\r\n\r\n  const formatViteTooltip = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatViteTooltip(bn);\r\n  }\r\n\r\n  const formatVite = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatVite(bn);\r\n  }\r\n\r\n  const getEventName = (): string => {\r\n    switch (props.item.auctionType) {\r\n      case PunkTypes.AccountAuctionType.Offer:\r\n        if (!props.item.amount || props.item.amount.lte(0)) {\r\n          return ActionName.gift;\r\n        }\r\n        return ActionName.list;\r\n      case PunkTypes.AccountAuctionType.Bid:\r\n        return ActionName.bid;\r\n      default:\r\n        break;\r\n    }\r\n    return ActionName.unknown;\r\n  }\r\n\r\n  const handleClaimAsync = async () => {\r\n    if (query.data?.punk) {\r\n      await props.handleClaimAsync(props.item);\r\n    }\r\n  }\r\n\r\n  const handleOpenDialog = (_type: PunkTypes.PunkDialogType) => {\r\n    if (query.data?.punk) {\r\n      props.handleOpenDialog(_type, query.data.punk, props.item);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <TableRow sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\r\n      <TableCell component=\"th\" scope=\"row\">\r\n        <FontAwesomeIcon icon={IconUtil.getAccountAuctionTypeIcon(props.item.auctionType, props.item.amount)} /> <b>{getEventName()}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Link underline=\"hover\" component={RouterLink} to={`/punk/${props.item.punkId}`} display=\"flex\" alignItems=\"center\">\r\n          <CustomAvatar variant=\"rounded\" src={UrlUtil.getPunkUrl(query.data?.punk.image, query.data?.punk.cid)}>\r\n          </CustomAvatar>\r\n          {CommonConstants.PUNK_NAME} #{props.item.punkId}\r\n        </Link>\r\n      </TableCell>\r\n      <TableCell>\r\n        {props.item.amount?.gt(0) ? (\r\n          <>\r\n            <ExtendedBootstrapTooltip title={formatViteTooltip(props.item.amount)}>\r\n              <span>{formatVite(props.item.amount)}</span>\r\n            </ExtendedBootstrapTooltip>\r\n          </>\r\n        ) : (\r\n          <>\r\n          </>\r\n        )}\r\n      </TableCell>\r\n      <TableCell>\r\n        {formatTimestamp(props.item.timestamp.toFixed())}\r\n      </TableCell>\r\n      <TableCell align=\"right\">\r\n        {props.item.auctionType === PunkTypes.AccountAuctionType.Offer && (\r\n          <>\r\n            {isOwner || isAnon ? (\r\n              <Button size=\"small\" variant=\"outlined\" sx={{ minWidth: \"70px\" }} onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.CANCEL_OFFER) }} disabled={!props.isAuthorized}>{ActionName.cancel}</Button>\r\n            ) : (\r\n              <>\r\n                {!props.item.amount || props.item.amount.lte(0) ? (\r\n                  <ClickOnceButton size=\"small\" variant=\"outlined\" color=\"secondary\" sx={{ minWidth: \"70px\" }} callbackFn={handleClaimAsync} disabled={!props.isAuthorized}>{ActionName.claim}</ClickOnceButton>\r\n                ) : (\r\n                  <Button size=\"small\" variant=\"outlined\" sx={{ minWidth: \"70px\" }} onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.ACCEPT_OFFER) }} disabled={!props.isAuthorized}>{ActionName.buy}</Button>\r\n                )}\r\n              </>\r\n\r\n            )}\r\n          </>\r\n        )}\r\n        {props.item.auctionType === PunkTypes.AccountAuctionType.Bid && (\r\n          <>\r\n            {isOwner || isAnon ? (\r\n              <Button size=\"small\" variant=\"outlined\" sx={{ minWidth: \"70px\" }} color=\"secondary\" onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.ACCEPT_BID) }} disabled={!props.isAuthorized}>{ActionName.accept}</Button>\r\n            ) : (\r\n              <Button size=\"small\" variant=\"outlined\" sx={{ minWidth: \"70px\" }} onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.CANCEL_BID) }} disabled={!props.isAuthorized}>{ActionName.cancel}</Button>\r\n            )}\r\n          </>\r\n        )}\r\n      </TableCell>\r\n    </TableRow>\r\n  )\r\n}\r\n\r\ninterface Props {\r\n  events: PunkTypes.AccountAuction[]\r\n  newEvents: PunkTypes.AccountAuction[]\r\n  error: any\r\n  loading: boolean\r\n  hasMore: boolean\r\n  height?: number\r\n  fetchMoreDataAsync(): Promise<void>\r\n  cleanupAsync(_item: PunkTypes.AccountAuction): Promise<void>\r\n  isAuthorized: boolean\r\n}\r\n\r\nexport const AccountAuctionList: React.FC<Props> = (props: Props) => {\r\n  const [currentAuction, setCurrentAuction] = useState<PunkTypes.AccountAuction>({} as PunkTypes.AccountAuction);\r\n  const [dialogState, setDialogState] = useState<PunkTypes.PunkDialogState>({\r\n    type: PunkTypes.PunkDialogType.UNKNOWN,\r\n    open: false,\r\n    item: {} as PunkTypes.Punk\r\n  });\r\n\r\n  const service = getMarketService();\r\n  const emptyMessage = \"No active auctions\";\r\n\r\n  const handleClaimAsync = async (_item: PunkTypes.AccountAuction) => {\r\n    try {\r\n      if (_item.auctionType !== PunkTypes.AccountAuctionType.Offer) {\r\n        throw new Error(`${CommonConstants.PUNK_NAME} #${_item.punkId} cannot be claimed`);\r\n      }\r\n      const success = await service.buyAsync(_item.punkId.toString(), _item.amount.toFixed());\r\n      if (success) {\r\n        SnackbarUtil.enqueueMessage(`Congratulations! You claimed ${CommonConstants.PUNK_NAME} #${_item.punkId}`);\r\n      }\r\n    } catch (error) {\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      props.cleanupAsync(_item);\r\n    }\r\n  }\r\n\r\n  const handleOpenDialog = (_type: PunkTypes.PunkDialogType, _item: PunkTypes.Punk, _auction: PunkTypes.AccountAuction) => {\r\n    setCurrentAuction(_auction);\r\n    setDialogState({\r\n      ...dialogState,\r\n      type: _type,\r\n      open: true,\r\n      item: _item\r\n    });\r\n  }\r\n\r\n  const dialogCallbackAsync = async (_success: boolean) => {\r\n    logger.info(\"dialogCallbackAsync\", _success)();\r\n    if (_success) {\r\n      props.cleanupAsync(currentAuction);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Paper\r\n        id=\"event-list\"\r\n        style={{\r\n          height: props.height ?? 300,\r\n          overflow: 'auto',\r\n          backgroundColor: 'rgba(255, 255, 255, 0.5)'\r\n        }}\r\n      >\r\n        {props.newEvents.length > 0 || props.events.length > 0 ? (\r\n          <InfiniteScroll\r\n            dataLength={props.events.length ?? 0}\r\n            next={props.fetchMoreDataAsync}\r\n            hasMore={props.hasMore}\r\n            loader={\r\n              <Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n                <EventListLoading loading={props.loading} error={props.error} count={props.events.length} message={emptyMessage}></EventListLoading>\r\n              </Grid>\r\n            }\r\n            scrollableTarget=\"event-list\"\r\n          >\r\n            <TableContainer>\r\n              <Table stickyHeader>\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <CustomTableCell></CustomTableCell>\r\n                    <CustomTableCell><b>Punk</b></CustomTableCell>\r\n                    <CustomTableCell><b>Amount</b></CustomTableCell>\r\n                    <CustomTableCell><b>Date</b></CustomTableCell>\r\n                    <CustomTableCell align=\"right\"><b>Action</b></CustomTableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {props.newEvents.map((e: PunkTypes.AccountAuction) => (\r\n                    <EventTableRow\r\n                      key={`new-events-${e.timestamp.toFixed()}`}\r\n                      isAuthorized={props.isAuthorized}\r\n                      handleClaimAsync={handleClaimAsync}\r\n                      handleOpenDialog={handleOpenDialog}\r\n                      item={e} />\r\n                  ))}\r\n                  {props.events.map((e: PunkTypes.AccountAuction) => (\r\n                    <EventTableRow\r\n                      key={`events-${e.timestamp.toFixed()}`}\r\n                      isAuthorized={props.isAuthorized}\r\n                      handleClaimAsync={handleClaimAsync}\r\n                      handleOpenDialog={handleOpenDialog}\r\n                      item={e} />\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          </InfiniteScroll>) : (\r\n          <Grid sx={{ height: \"100%\" }} container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n            <EventListLoading loading={props.loading} error={props.error} count={props.events.length} message={emptyMessage}></EventListLoading>\r\n          </Grid>\r\n        )}\r\n      </Paper>\r\n      <PunkDialog state={dialogState} setState={setDialogState} callbackAsync={dialogCallbackAsync}></PunkDialog>\r\n    </>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport SyncIcon from '@mui/icons-material/Sync';\r\nimport { IconButton, Stack } from '@mui/material';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { CommonUtil, getEmitter, getLogger, PunkTypes, TransformUtil } from 'vitepunks-common';\r\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\r\nimport { GET_ACCOUNT_AUCTIONS_QUERY } from '../../../../queries/general';\r\nimport { GetAccountAuctions, GetAccountAuctionsVariables } from '../../../../queries/__generated__/GetAccountAuctions';\r\nimport { getGeneralService } from '../../../../services/general.service';\r\nimport { AccountAuctionList } from '../auction-list';\r\n\r\nconst logger = getLogger();\r\n\r\ninterface Props {\r\n  address: string\r\n  refetchDataAsync(): Promise<void>\r\n}\r\n\r\nexport const AccountAuctions: React.FC<Props> = (props: Props) => {\r\n  const limit = 8;\r\n  const [isAuthorized, setIsAuthorized] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [error, setError] = useState<any>(undefined);\r\n  const [cursor, setCursor] = useState<Maybe<PunkTypes.Cursor>>(undefined);\r\n  const [events, setEvents] = useState<PunkTypes.AccountAuction[]>([]);\r\n  const [newEvents, setNewEvents] = useState<PunkTypes.AccountAuction[]>([]);\r\n  const service = getGeneralService();\r\n  const emitter = getEmitter();\r\n\r\n  const context = useConnectedWeb3Context();\r\n\r\n  const query = useQuery<GetAccountAuctions, GetAccountAuctionsVariables>(GET_ACCOUNT_AUCTIONS_QUERY, {\r\n    variables: {\r\n      address: props.address,\r\n      limit: limit\r\n    },\r\n    //notifyOnNetworkStatusChange: true,\r\n    fetchPolicy: 'network-only',\r\n    //refetchWritePolicy: 'overwrite',\r\n    onCompleted: (data) => {\r\n      setCursor(data.accountAuctions.cursor);\r\n      setEvents(data.accountAuctions.auctions.map(e => TransformUtil.toAccountAuction(e)));\r\n      setHasMore(!CommonUtil.isNullOrWhitespace(data.accountAuctions.cursor?.next));\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsAuthorized(props.address?.toLowerCase() === context.account?.toLowerCase());\r\n  }, [props.address, context.account]);\r\n\r\n  useEffect(() => {\r\n    setIsLoading(query.loading);\r\n  }, [query.loading]);\r\n\r\n  useEffect(() => {\r\n    setError(query.error);\r\n  }, [query.error]);\r\n\r\n  const fetchMoreDataAsync = async () => {\r\n    logger.info(\"fetchMoreDataAsync\", events.length)();\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await service.getAccountAuctions(props.address, limit, cursor?.next);\r\n      setCursor(result.data.accountAuctions.cursor);\r\n      setHasMore(!CommonUtil.isNullOrWhitespace(result.data.accountAuctions.cursor?.next));\r\n      if (result.data.accountAuctions.auctions.length > 0) {\r\n        setEvents([\r\n          ...events,\r\n          ...result.data.accountAuctions.auctions.map(e => TransformUtil.toAccountAuction(e))\r\n        ]);\r\n      }\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const cleanupAsync = async (_item: PunkTypes.AccountAuction) => {\r\n    if (_item) {\r\n      setEvents(events.filter(e => !e.timestamp.eq(_item.timestamp)));\r\n      setNewEvents(newEvents.filter(e => !e.timestamp.eq(_item.timestamp)));\r\n    }\r\n    // Update all auctions before refetch\r\n    await service.getAccountAuctions(props.address, limit);\r\n    await props.refetchDataAsync();\r\n  }\r\n\r\n  const refetch = query.refetch;\r\n\r\n  const refresh = useCallback(() => {\r\n    logger.info(\"Refreshing account auctions\")();\r\n    refetch();\r\n  }, [refetch]);\r\n\r\n  const refreshAsync = async () => {\r\n    logger.info(\"Refreshing account auctions & data\")();\r\n    await refetch();\r\n    await props.refetchDataAsync();\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (state: PunkTypes.DocumentState) => {\r\n      if (state === PunkTypes.DocumentState.Active) {\r\n        refresh();\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    };\r\n  }, [emitter, refresh]);\r\n\r\n  const addNewEvent = useCallback((e: PunkTypes.PunkChangedEvent) => {\r\n    // TODO: check if new event is related to current address\r\n    setNewEvents([\r\n      // TransformUtil.toPunkEvent(e),\r\n      ...newEvents\r\n    ]);\r\n  }, [newEvents]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.PunkChangedEvent) => {\r\n      logger.info(\"newMarketEvent\", e)();\r\n      addNewEvent(e);\r\n    }\r\n    logger.info('emitter.on', PunkTypes.GlobalEvent.PunkChanged)();\r\n    emitter.on(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    return () => {\r\n      logger.info('emitter.off', PunkTypes.GlobalEvent.PunkChanged)();\r\n      emitter.off(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    };\r\n  }, [emitter, addNewEvent]);\r\n\r\n  return (\r\n    <>\r\n      <Stack direction=\"row\" justifyContent=\"flex-end\" alignItems=\"center\" spacing={2}>\r\n        <IconButton size=\"small\" aria-label=\"refresh\" component=\"span\" onClick={refreshAsync}>\r\n          <SyncIcon fontSize=\"small\" />\r\n        </IconButton>\r\n      </Stack>\r\n      <AccountAuctionList\r\n        events={events}\r\n        newEvents={newEvents}\r\n        error={error}\r\n        loading={isLoading}\r\n        hasMore={hasMore}\r\n        height={300}\r\n        fetchMoreDataAsync={fetchMoreDataAsync}\r\n        cleanupAsync={cleanupAsync}\r\n        isAuthorized={isAuthorized}>\r\n      </AccountAuctionList>\r\n    </>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport { Container, Grid, Typography } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { GET_PUNKS_BY_ADDRESS_QUERY } from '../../../../queries';\r\nimport { GetPunksByAddress, GetPunksByAddressVariables } from '../../../../queries/__generated__/GetPunksByAddress';\r\nimport { InfinitePunkList } from '../../../punk/components/infinite-list';\r\nimport { AccountAuctions } from '../auctions';\r\n\r\nexport const AccountDetails: React.FC = (props: any) => {\r\n  const { address } = useParams();\r\n  const limit = 8;\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [error, setError] = useState<any>(undefined);\r\n\r\n  const query = useQuery<GetPunksByAddress, GetPunksByAddressVariables>(GET_PUNKS_BY_ADDRESS_QUERY, {\r\n    variables: {\r\n      address: address ?? \"\",\r\n      offset: 0,\r\n      limit: limit\r\n    },\r\n    fetchPolicy: 'network-only',\r\n    onCompleted: (data) => {\r\n      setHasMore(data.punksByAddress.length >= limit);\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsLoading(query.loading);\r\n  }, [query.loading]);\r\n\r\n  useEffect(() => {\r\n    setError(query.error);\r\n  }, [query.error]);\r\n\r\n  const fetchMoreDataAsync = async () => {\r\n    const currentLength = query.data?.punksByAddress.length ?? 0;\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await query.fetchMore({\r\n        variables: {\r\n          offset: currentLength,\r\n          limit: limit\r\n        }\r\n      });\r\n      setHasMore(result.data.punksByAddress.length >= limit);\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const refetchDataAsync = async () => {\r\n    await query.refetch({\r\n      address: address ?? \"\",\r\n      offset: 0,\r\n      limit: limit\r\n    });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Container maxWidth=\"lg\" sx={{ marginBottom: 5 }}>\r\n        <Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12} md={9}>\r\n            <Typography variant=\"h2\" component=\"div\" textAlign=\"center\" sx={{ pt: 3 }}>\r\n              Account\r\n            </Typography>\r\n            <Typography variant=\"subtitle1\" component=\"div\" textAlign=\"center\" sx={{ wordBreak: \"break-all\" }} gutterBottom>\r\n              {address}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} md={9}>\r\n            <AccountAuctions address={address ?? \"\"} refetchDataAsync={refetchDataAsync}></AccountAuctions>\r\n          </Grid>\r\n        </Grid>\r\n      </Container>\r\n      <InfinitePunkList\r\n        items={query.data?.punksByAddress ?? []}\r\n        fetchMoreDataAsync={fetchMoreDataAsync}\r\n        error={error}\r\n        isLoading={isLoading}\r\n        hasMore={hasMore}>\r\n      </InfinitePunkList>\r\n    </>\r\n  )\r\n}\r\n","import { Button } from '@mui/material';\r\nimport confetti from 'canvas-confetti';\r\nimport React, { useCallback } from 'react';\r\nimport { getViteClient } from 'vitepunks-common';\r\nimport { getWalletManager } from '../../../../storage/wallet.storage';\r\n\r\nexport const Test = () => {\r\n  const walletManager = getWalletManager();\r\n  const viteClient = getViteClient();\r\n\r\n  const onClick = useCallback(() => {\r\n    confetti({\r\n      particleCount: 150,\r\n      spread: 60\r\n    });\r\n    const wallet = walletManager.getWallet();\r\n    if (wallet?.active) {\r\n      viteClient.receiveAllOnroadTxAsync(wallet.active);\r\n    }\r\n  }, [viteClient, walletManager]);\r\n  return (\r\n    <>\r\n      Test {process.env.REACT_APP_VERSION} {process.env.REACT_APP_EXPLORER_URL}\r\n      <Button onClick={onClick}>Test</Button>\r\n    </>\r\n  );\r\n}\r\n","import { ApolloClient, FetchPolicy, NormalizedCacheObject } from \"@apollo/client\";\r\nimport { PunkTypes, TransformUtil } from \"vitepunks-common\";\r\nimport { getApolloClient } from \"../clients/apollo.client\";\r\nimport { MINT_MUTATION } from \"../mutations\";\r\nimport { Mint } from \"../mutations/__generated__/Mint\";\r\nimport { GET_MARKET_BID_QUERY, GET_MARKET_OFFER_QUERY, GET_PUNK_EVENTS_QUERY, GET_PUNK_OWNER_QUERY, GET_PUNK_QUERY } from \"../queries\";\r\nimport { GetMarketBid, GetMarketBidVariables } from \"../queries/__generated__/GetMarketBid\";\r\nimport { GetMarketOffer, GetMarketOfferVariables } from \"../queries/__generated__/GetMarketOffer\";\r\nimport { GetPunk, GetPunkVariables } from \"../queries/__generated__/GetPunk\";\r\nimport { GetPunkEvents, GetPunkEventsVariables } from \"../queries/__generated__/GetPunkEvents\";\r\nimport { GetPunkOwner, GetPunkOwnerVariables } from \"../queries/__generated__/GetPunkOwner\";\r\n\r\nclass PunkService {\r\n  private readonly _apollo: ApolloClient<NormalizedCacheObject>;\r\n\r\n  constructor() {\r\n    this._apollo = getApolloClient();\r\n  }\r\n\r\n  getById = (_id: string, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetPunk, GetPunkVariables>({\r\n      query: GET_PUNK_QUERY,\r\n      variables: {\r\n        id: _id\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getOwnerAsync = (_id: string, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetPunkOwner, GetPunkOwnerVariables>({\r\n      query: GET_PUNK_OWNER_QUERY,\r\n      variables: {\r\n        id: _id\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getBidAsync = (_id: string, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetMarketBid, GetMarketBidVariables>({\r\n      query: GET_MARKET_BID_QUERY,\r\n      variables: {\r\n        id: _id\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getOfferAsync = (_id: string, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetMarketOffer, GetMarketOfferVariables>({\r\n      query: GET_MARKET_OFFER_QUERY,\r\n      variables: {\r\n        id: _id\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getEventsAsync = (_id: string, _offset: number, _limit: number, _height?: Maybe<string>, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    return this._apollo.query<GetPunkEvents, GetPunkEventsVariables>({\r\n      query: GET_PUNK_EVENTS_QUERY,\r\n      variables: {\r\n        id: _id,\r\n        offset: _offset,\r\n        limit: _limit,\r\n        height: _height\r\n      },\r\n      fetchPolicy: _fetchPolicy\r\n    })\r\n  }\r\n\r\n  getExtendedAsync = async (_punk: PunkTypes.Punk, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n    const defaultPunkExtended = {\r\n      __typename: PunkTypes.TypeNames.Punk,\r\n      id: _punk.id,\r\n      rank: _punk.rank,\r\n      image: _punk.image,\r\n      cid: _punk.cid,\r\n      attributes: _punk.attributes\r\n    };\r\n    const ownerQuery = await this.getOwnerAsync(_punk.id, _fetchPolicy);\r\n    const bidQuery = await this.getBidAsync(_punk.id, _fetchPolicy);\r\n    const offerQuery = await this.getOfferAsync(_punk.id, _fetchPolicy);\r\n\r\n    const punkExtended: PunkTypes.Punk = {\r\n      ...defaultPunkExtended,\r\n      owner: ownerQuery.data.punkOwner,\r\n      bid: TransformUtil.toMarketBid(bidQuery.data.marketBid),\r\n      offer: TransformUtil.toMarketOffer(offerQuery.data.marketOffer)\r\n    }\r\n\r\n    const error = ownerQuery.error || bidQuery.error || offerQuery.error;\r\n    const loading = ownerQuery.loading || bidQuery.loading || offerQuery.loading;\r\n\r\n    return {\r\n      punkExtended,\r\n      ownerQuery,\r\n      bidQuery,\r\n      offerQuery,\r\n      error,\r\n      loading\r\n    };\r\n  }\r\n\r\n  async mintAsync(): Promise<boolean> {\r\n    const result = await this._apollo.mutate<Mint>({\r\n      mutation: MINT_MUTATION\r\n    });\r\n    return Boolean(result.data?.mint ?? false);\r\n  }\r\n}\r\n\r\nconst service = new PunkService();\r\n\r\nexport const getPunkService = () => {\r\n  return service;\r\n}","import { styled } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { UrlUtil } from 'vitepunks-common';\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { getPunkService } from '../../../../services/punk.service';\r\n\r\nconst ImageContainer = styled('div')(\r\n  ({ theme }) => `\r\n  position: relative;\r\n  width: 80vw;\r\n  height: 80vw; \r\n  max-width: 400px;\r\n  max-height: 400px;\r\n  animation: lightning 4s ease-out infinite;\r\n`,\r\n);\r\n\r\nconst Image = styled('div')(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100%;\r\n  border: 5px solid #fff;\r\n  border-radius: 50%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  background-image: url('${ClientConstants.ITEM_BG_URL}');\r\n`,\r\n);\r\n\r\nconst Img1 = styled('div')(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  background-image: url('${ClientConstants.SAMPLE_PUNK_URL}');\r\n  border-radius: 50%;\r\n  animation: toggle 4s linear -2s infinite alternate;\r\n  image-rendering: pixelated;\r\n`,\r\n);\r\n\r\n\r\nconst Img2 = styled('img')(\r\n  ({ theme }) => `\r\n  top: 0;\r\n  left: 0;\r\n  position: fixed;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  border: 5px solid #fff;\r\n  border-radius: 50%;\r\n  visibility: hidden;\r\n  animation: toggle 4s linear 2s infinite alternate;\r\n`,\r\n);\r\n\r\ninterface Props {\r\n  punkId1?: Maybe<number>\r\n  punkId2?: Maybe<number>\r\n}\r\n\r\n\r\nexport const LandingMainImage: React.FC<Props> = (props: Props) => {\r\n  const [imageUrl1, setImageUrl1] = useState<Maybe<string>>(undefined);\r\n  const [imageUrl2, setImageUrl2] = useState<Maybe<string>>(undefined);\r\n  const service = getPunkService();\r\n\r\n  useEffect(() => {\r\n    const setImageUrlsAsync = async () => {\r\n      if (props.punkId1) {\r\n        const punk1 = await service.getById(props.punkId1.toString());\r\n        setImageUrl1(UrlUtil.getPunkUrl(punk1.data.punk.image, punk1.data.punk.cid));\r\n      }\r\n      if (props.punkId2) {\r\n        const punk2 = await service.getById(props.punkId2.toString());\r\n        setImageUrl2(UrlUtil.getPunkUrl(punk2.data.punk.image, punk2.data.punk.cid));\r\n      }\r\n    }\r\n    setImageUrlsAsync();\r\n  }, [props.punkId1, props.punkId2, service])\r\n\r\n  return (\r\n    <ImageContainer>\r\n      <Image>\r\n        <Img1 sx={{ backgroundImage: `url('${imageUrl1 ?? ClientConstants.SAMPLE_PUNK_URL}')` }} />\r\n        <Img2 sx={{ backgroundImage: `url('${imageUrl2 ?? ClientConstants.SAMPLE_PUNK_URL}')` }} />\r\n      </Image>\r\n    </ImageContainer>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { LandingMainImage } from '../../../landing/components/main-image';\r\n\r\nexport const TestImage = () => {\r\n  return (\r\n    <>\r\n      <LandingMainImage punkId1={5667} punkId2={3848}></LandingMainImage>\r\n    </>\r\n  );\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport { Container, Grid } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { getLogger, PunkTypes } from 'vitepunks-common';\r\nimport { GET_PUNKS_ALL_QUERY } from '../../../../queries';\r\nimport { GetPunksAll } from '../../../../queries/__generated__/GetPunksAll';\r\nimport { MarketplaceBrowseItem } from '../../../marketplace/components/browse-item';\r\n\r\nconst logger = getLogger();\r\n\r\nexport const TestList = () => {\r\n  const [allPunks, setAllPunks] = useState<PunkTypes.Punk[]>([]);\r\n  const [punks, setPunks] = useState<PunkTypes.Punk[]>([]);\r\n\r\n  useQuery<GetPunksAll>(GET_PUNKS_ALL_QUERY, {\r\n    fetchPolicy: 'network-only',\r\n    onCompleted: (data) => {\r\n      setAllPunks(data.punksAll);\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    const ids = new Set([\r\n      1631,\r\n      2105,\r\n      2203,\r\n      3073,\r\n      4171,\r\n      4191,\r\n      6819,\r\n      7552,\r\n      7864,\r\n      8936,\r\n      9650,\r\n      9724\r\n    ]);\r\n    let filtered = [];\r\n    for (const p of allPunks) {\r\n      if (ids.has(parseInt(p.id))) {\r\n        filtered.push(p);\r\n      }\r\n    }\r\n    filtered = filtered.reverse();\r\n    setPunks(filtered);\r\n    logger.info(filtered.length, allPunks.length)();\r\n  }, [allPunks]);\r\n\r\n  return (\r\n    <>\r\n      <Container sx={{ pb: 6 }} maxWidth=\"xl\">\r\n        <Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\" marginBottom={3}>\r\n          {punks.map((p: PunkTypes.Punk) => (\r\n            <Grid item key={p.id} xs={12} sm={6} md={4} lg={3}>\r\n              <MarketplaceBrowseItem item={p}></MarketplaceBrowseItem>\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n","import { Typography } from '@mui/material';\r\nimport React from 'react';\r\nimport { MomentUtil } from '../../../../util/moment.util';\r\n\r\ninterface Props {\r\n  date: string\r\n}\r\n\r\ntype CountdownState = {\r\n  days: number\r\n  hours: number\r\n  minutes: number\r\n  seconds: number\r\n}\r\n\r\nexport const Countdown: React.FC<Props> = (props: Props) => {\r\n  const moment = React.useMemo<MomentUtil>(() => {\r\n    return new MomentUtil();\r\n  }, []);\r\n  const duration = moment.getDuration(props.date);\r\n  const mounted = React.useRef(false);\r\n  const [state, setState] = React.useState<CountdownState>({\r\n    days: duration.days() > 0 ? duration.days() : 0,\r\n    hours: duration.hours() > 0 ? duration.hours() : 0,\r\n    minutes: duration.minutes() > 0 ? duration.minutes() : 0,\r\n    seconds: duration.seconds() > 0 ? duration.seconds() : 0\r\n  });\r\n\r\n  if (duration.asSeconds() > 0) {\r\n    setTimeout(() => {\r\n      const duration = moment.getDuration(props.date);\r\n      if (mounted.current) {\r\n        setState({\r\n          days: duration.days(),\r\n          hours: duration.hours(),\r\n          minutes: duration.minutes(),\r\n          seconds: duration.seconds()\r\n        });\r\n      }\r\n    }, 500);\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Typography variant=\"subtitle1\" color=\"textSecondary\">\r\n      <b>{state.days}</b> days <b>{state.hours}</b> hours <b>{state.minutes}</b> minutes <b>{state.seconds}</b> seconds\r\n    </Typography>\r\n  );\r\n}\r\n","import ArrowForwardIosSharpIcon from '@mui/icons-material/ArrowForwardIosSharp';\r\nimport { Accordion as MuiAccordion, AccordionDetails as MuiAccordionDetails, AccordionProps, AccordionSummary as MuiAccordionSummary, AccordionSummaryProps, Box, Link, styled, Typography } from '@mui/material';\r\nimport React from 'react';\r\n\r\nconst Accordion = styled((props: AccordionProps) => (\r\n  <MuiAccordion disableGutters elevation={0} square {...props} />\r\n))(({ theme }) => ({\r\n  border: `1px solid ${theme.palette.divider}`,\r\n  '&:not(:last-child)': {\r\n    borderBottom: 0,\r\n  },\r\n  '&:before': {\r\n    display: 'none',\r\n  },\r\n  backgroundColor:\r\n    theme.palette.mode === 'dark'\r\n      ? 'rgba(0, 0, 0, .2)'\r\n      : 'rgba(255, 255, 255, .2)',\r\n}));\r\n\r\nconst AccordionSummary = styled((props: AccordionSummaryProps) => (\r\n  <MuiAccordionSummary\r\n    expandIcon={<ArrowForwardIosSharpIcon sx={{ fontSize: '0.9rem' }} />}\r\n    {...props}\r\n  />\r\n))(({ theme }) => ({\r\n  backgroundColor:\r\n    theme.palette.mode === 'dark'\r\n      ? 'rgba(255, 255, 255, .05)'\r\n      : 'rgba(0, 0, 0, .03)',\r\n  flexDirection: 'row-reverse',\r\n  '& .MuiAccordionSummary-expandIconWrapper.Mui-expanded': {\r\n    transform: 'rotate(90deg)',\r\n  },\r\n  '& .MuiAccordionSummary-content': {\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nconst AccordionDetails = styled(MuiAccordionDetails)(({ theme }) => ({\r\n  padding: theme.spacing(2),\r\n  borderTop: '1px solid rgba(0, 0, 0, .125)',\r\n}));\r\n\r\nexport const LandingFaq = () => {\r\n  const [faqExpanded, setFaqExpanded] = React.useState<string | false>('faq0');\r\n\r\n  const handleChange = (panel: string) => (event: React.SyntheticEvent, newExpanded: boolean) => {\r\n    setFaqExpanded(newExpanded ? panel : false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" marginBottom={2}>\r\n        <div>\r\n          <Typography variant=\"h5\" color=\"textSecondary\" textAlign=\"center\">\r\n            FAQ\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\" color=\"textSecondary\" textAlign=\"center\">\r\n            Frequently Asked Questions\r\n          </Typography>\r\n        </div>\r\n      </Box>\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n        <Box maxWidth={800}>\r\n          <Accordion expanded={faqExpanded === 'faq0'} onChange={handleChange('faq0')}>\r\n            <AccordionSummary aria-controls=\"faq0-content\" id=\"faq0-header\">\r\n              <Typography>What is the vision behind VitePunks?</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                Our main vision is to develop the best possible marketplace for our punks and maybe open it to other artists at some point, depending on what other NFT marketplaces will be released on Vite in the near future.\r\n                One of our main goals is long-term availability. It is of utmost importance to us to make sure that our punks are as reliably accessible as the <Link underline=\"hover\" href=\"https://www.vite.org/\" target=\"_blank\">Vite chain</Link>.\r\n                All NFT images are stored on <Link underline=\"hover\" href=\"https://ipfs.io/\" target=\"_blank\">IPFS</Link> in addition to our own cloud storage.\r\n                <br></br>\r\n                <br></br>\r\n                The compiled version of this website can be\r\n                cloned and forked on <Link underline=\"hover\" href=\"https://github.com/vitepunks/vitepunks.github.io\" target=\"_blank\">GitHub</Link> or\r\n                accessed by this link <Link underline=\"hover\" href=\"https://vitepunks.github.io/website/\" target=\"_blank\">https://vitepunks.github.io/website/</Link>.\r\n                Everything we do is always with the intention to ensure resiliency and establish a trust relationship.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion expanded={faqExpanded === 'faq1'} onChange={handleChange('faq1')}>\r\n            <AccordionSummary aria-controls=\"faq1-content\" id=\"faq1-header\">\r\n              <Typography>Why is the smart contract not open-source yet?</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                Being pioneers in any space is always coupled with a lot of work, sometimes it gets rewarded, more often not.\r\n                We understand that the situation for some is not satisfactory right now.\r\n                What we can assure is that we will make our smart contract public as soon as another high-quality project delivers something similar to us.\r\n                Maybe this is the wrong approach but ultimately this is actually a really hard decision to make.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion expanded={faqExpanded === 'faq2'} onChange={handleChange('faq2')}>\r\n            <AccordionSummary aria-controls=\"faq2-content\" id=\"faq2-header\">\r\n              <Typography>Where can I download the Vite Wallet App?</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                The Vite App Wallet can be downloaded for <Link underline=\"hover\" href=\"https://play.google.com/store/apps/details?id=net.vite.wallet\" target=\"_blank\">Android</Link>\r\n                &nbsp;or <Link underline=\"hover\" href=\"https://apps.apple.com/ch/app/vite-multi-chain-wallet/id1437629486\" target=\"_blank\">iOS</Link>.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion expanded={faqExpanded === 'faq3'} onChange={handleChange('faq3')}>\r\n            <AccordionSummary aria-controls=\"faq3-content\" id=\"faq3-header\">\r\n              <Typography>How can I connect my wallet on my smartphone?</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                Connecting the wallet on your smartphone can be tricky because it is not possible to scan the QR code currently being displayed on your screen.\r\n                To overcome this limitation detailed instructions can be found in our <Link underline=\"hover\" href=\"https://github.com/vitepunks/resources/wiki/Connect-Wallet\" target=\"_blank\">wiki article</Link>.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion expanded={faqExpanded === 'faq4'} onChange={handleChange('faq4')}>\r\n            <AccordionSummary aria-controls=\"faq4-content\" id=\"faq4-header\">\r\n              <Typography>Is it possible to view my minted punks in my wallet?</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                Before this can be achieved, the Vite community has to agree on a commonly accepted standard.\r\n                Currently it is being worked on as a bounty started by ViteLabs. You can find it <Link underline=\"hover\" href=\"https://gitcoin.co/issue/vitelabs/bounties/18/100027282\" target=\"_blank\">here</Link>.\r\n                So in this sense we are truly similar to the original CryptoPunks project which pioneered the NFT space without having a standard at hand when released.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion expanded={faqExpanded === 'faq5'} onChange={handleChange('faq5')}>\r\n            <AccordionSummary aria-controls=\"faq5-content\" id=\"faq5-header\">\r\n              <Typography>How can I gift/transfer my punk to someone else?</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                This can be achieved by offering your punk for sale for 0 VITE to a specific address. Only this address will be able to claim the punk.\r\n                Just follow the steps described in this <Link underline=\"hover\" href=\"https://github.com/vitepunks/resources/wiki/Gifting\" target=\"_blank\">wiki article</Link>.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n        </Box>\r\n      </Box>\r\n      <Typography variant=\"subtitle1\" color=\"textSecondary\" textAlign=\"center\" marginTop={2}>\r\n        Community articles\r\n      </Typography>\r\n      <Typography variant=\"subtitle2\" color=\"textSecondary\" textAlign=\"center\">\r\n        <Link underline=\"hover\" href=\"https://medium.com/@CPCLinoCrypto/cuestionario-realizado-a-vitepunks-dd6f3e40dae8\" target=\"_blank\">[Spanish]</Link>\r\n        &nbsp;\r\n        <Link underline=\"hover\" href=\"https://medium.com/@CPCLinoCrypto/questionnaire-answered-by-vitepunk-c1a9657c20ec\" target=\"_blank\">[English]</Link>\r\n      </Typography>\r\n    </>\r\n  );\r\n}\r\n","import { Box, LinearProgress, Paper, Skeleton, Typography } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonConstants, FormatUtil } from 'vitepunks-common';\r\n\r\ninterface Props {\r\n  loading: boolean\r\n  mintsRemaining?: Maybe<number>\r\n}\r\n\r\nexport const MintsRemaining: React.FC<Props> = (props: Props) => {\r\n  const [pct, setPct] = useState(100);\r\n\r\n  useEffect(() => {\r\n    if (props.mintsRemaining && props.mintsRemaining > 0) {\r\n      const minValue = props.mintsRemaining === CommonConstants.TOTAL_MINTS ? 100 : 90;\r\n      setPct(Math.min(minValue, props.mintsRemaining / CommonConstants.TOTAL_MINTS * 100));\r\n    } else {\r\n      setPct(100);\r\n    }\r\n  }, [props.mintsRemaining]);\r\n\r\n  return (\r\n    <Paper elevation={3} sx={{ width: \"60%\", textAlign: \"center\", mb: 3 }}>\r\n      <Box sx={{ px: 2, pt: 2, pb: 1.5 }}>\r\n        {props.loading || !props.mintsRemaining ? (\r\n          <Skeleton animation=\"wave\" width=\"50%\"></Skeleton>\r\n        ) : (\r\n          <Typography variant=\"subtitle1\" color=\"textSecondary\">\r\n            <b>{FormatUtil.formatNumber(props.mintsRemaining)}</b> of {FormatUtil.formatNumber(CommonConstants.TOTAL_MINTS)} mintable\r\n          </Typography>\r\n        )}\r\n      </Box>\r\n      <LinearProgress sx={{ height: \"8px\" }} variant=\"determinate\" color={pct <= 40 ? \"error\" : \"primary\"} value={pct} />\r\n    </Paper>\r\n  );\r\n}\r\n","import { FetchPolicy, useQuery } from \"@apollo/client\";\r\nimport React from \"react\";\r\nimport { getLogger, PunkTypes, TransformUtil } from 'vitepunks-common';\r\nimport { GET_MARKET_BID_QUERY, GET_MARKET_OFFER_QUERY, GET_PUNK_OWNER_QUERY, GET_PUNK_QUERY } from \"../queries\";\r\nimport { GetMarketBid, GetMarketBidVariables } from \"../queries/__generated__/GetMarketBid\";\r\nimport { GetMarketOffer, GetMarketOfferVariables } from \"../queries/__generated__/GetMarketOffer\";\r\nimport { GetPunk, GetPunkVariables } from \"../queries/__generated__/GetPunk\";\r\nimport { GetPunkOwner, GetPunkOwnerVariables } from \"../queries/__generated__/GetPunkOwner\";\r\nimport { getPunkService } from \"../services/punk.service\";\r\n\r\nconst logger = getLogger();\r\n\r\nexport const usePunkById = (_punkId: string, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n  const query = useQuery<GetPunk, GetPunkVariables>(GET_PUNK_QUERY, {\r\n    variables: {\r\n      id: _punkId\r\n    },\r\n    notifyOnNetworkStatusChange: true,\r\n    fetchPolicy: _fetchPolicy,\r\n    refetchWritePolicy: \"overwrite\"\r\n  });\r\n\r\n  const error = query.error;\r\n  const loading = query.loading;\r\n\r\n  const punk: Maybe<PunkTypes.Punk> = query.data?.punk\r\n\r\n  return {\r\n    punk,\r\n    error,\r\n    loading,\r\n  };\r\n}\r\n\r\nexport const usePunkInfo = (_punk: PunkTypes.Punk, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n  const defaultPunkExtended = React.useMemo<PunkTypes.Punk>(() => {\r\n    return {\r\n      __typename: PunkTypes.TypeNames.Punk,\r\n      id: _punk.id,\r\n      rank: _punk.rank,\r\n      image: _punk.image,\r\n      cid: _punk.cid,\r\n      attributes: _punk.attributes\r\n    };\r\n  }, [_punk]);\r\n  const [punkExtended, setPunkExtended] = React.useState<PunkTypes.Punk>(defaultPunkExtended);\r\n  const [dateRef, setDateRef] = React.useState<Date>(new Date(0));\r\n\r\n  const ownerQuery = useQuery<GetPunkOwner, GetPunkOwnerVariables>(GET_PUNK_OWNER_QUERY, {\r\n    variables: {\r\n      id: _punk.id.toString()\r\n    },\r\n    notifyOnNetworkStatusChange: true,\r\n    fetchPolicy: _fetchPolicy,\r\n    refetchWritePolicy: \"overwrite\",\r\n    onCompleted: (data) => {\r\n      setPunkExtended({\r\n        ...punkExtended,\r\n        owner: data.punkOwner\r\n      });\r\n    }\r\n  });\r\n\r\n  const bidQuery = useQuery<GetMarketBid, GetMarketBidVariables>(GET_MARKET_BID_QUERY, {\r\n    variables: {\r\n      id: _punk.id.toString()\r\n    },\r\n    notifyOnNetworkStatusChange: true,\r\n    fetchPolicy: _fetchPolicy,\r\n    refetchWritePolicy: \"overwrite\",\r\n    onCompleted: (data) => {\r\n      setPunkExtended({\r\n        ...punkExtended,\r\n        bid: TransformUtil.toMarketBid(data.marketBid)\r\n      });\r\n    }\r\n  });\r\n\r\n  const offerQuery = useQuery<GetMarketOffer, GetMarketOfferVariables>(GET_MARKET_OFFER_QUERY, {\r\n    variables: {\r\n      id: _punk.id.toString()\r\n    },\r\n    notifyOnNetworkStatusChange: true,\r\n    fetchPolicy: _fetchPolicy,\r\n    refetchWritePolicy: \"overwrite\",\r\n    onCompleted: (data) => {\r\n      setPunkExtended({\r\n        ...punkExtended,\r\n        offer: TransformUtil.toMarketOffer(data.marketOffer)\r\n      });\r\n    }\r\n  });\r\n\r\n  const error = ownerQuery.error || bidQuery.error || offerQuery.error;\r\n  const loading = ownerQuery.loading || bidQuery.loading || offerQuery.loading;\r\n\r\n  const refetchAsync = async () => {\r\n    logger.info(\"refetchAsync\", new Date().getTime(), dateRef.getTime())();\r\n    if (new Date().getTime() >= dateRef.getTime() + 500) {\r\n      setDateRef(new Date());\r\n      let newOwner;\r\n      let newBid;\r\n      let newOffer;\r\n      try {\r\n        await Promise.all([\r\n          ownerQuery.refetch().then(e => newOwner = e.data.punkOwner),\r\n          bidQuery.refetch().then(e => newBid = e.data.marketBid),\r\n          offerQuery.refetch().then(e => newOffer = e.data.marketOffer)\r\n        ]);\r\n        logger.info(`Refetching punk ${_punk.id}`, newOwner, newBid, newOffer)();\r\n        setPunkExtended({\r\n          ...defaultPunkExtended,\r\n          owner: newOwner,\r\n          bid: newBid,\r\n          offer: newOffer\r\n        });\r\n      } catch (error) {\r\n        logger.error(error)();\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    punkExtended,\r\n    error,\r\n    loading,\r\n    refetchAsync\r\n  };\r\n}\r\n\r\nexport const usePunkInfoV2 = (_punk: PunkTypes.Punk, _fetchPolicy: FetchPolicy = \"network-only\") => {\r\n  const service = getPunkService();\r\n  const defaultPunkExtended = React.useMemo<PunkTypes.Punk>(() => {\r\n    return {\r\n      __typename: PunkTypes.TypeNames.Punk,\r\n      id: _punk.id,\r\n      rank: _punk.rank,\r\n      image: _punk.image,\r\n      cid: _punk.cid,\r\n      attributes: _punk.attributes\r\n    };\r\n  }, [_punk]);\r\n  const [punkExtended, setPunkExtended] = React.useState<PunkTypes.Punk>(defaultPunkExtended);\r\n  const [loading, setLoading] = React.useState<boolean>(true);\r\n  const [error, setError] = React.useState<Maybe<any>>(undefined);\r\n\r\n  const refetchAsync = async () => {\r\n    setLoading(true);\r\n    setError(undefined);\r\n    try {\r\n      const { punkExtended, loading, error } = await service.getExtendedAsync(_punk, _fetchPolicy);\r\n      setPunkExtended(punkExtended);\r\n      setLoading(loading);\r\n      setError(error);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setError(error);\r\n    }\r\n  }\r\n\r\n  return {\r\n    punkExtended,\r\n    loading,\r\n    error,\r\n    refetchAsync\r\n  }\r\n}\r\n\r\n","import { createTheme } from '@mui/material/styles';\r\n\r\n// A custom theme for this app\r\n// https://github.com/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\nconst theme = createTheme({\r\n  typography: {\r\n    fontFamily: [\r\n      '-apple-system',\r\n      'BlinkMacSystemFont',\r\n      '\"Segoe UI\"',\r\n      'Roboto',\r\n      '\"Helvetica Neue\"',\r\n      'Arial',\r\n      'sans-serif',\r\n      '\"Apple Color Emoji\"',\r\n      '\"Segoe UI Emoji\"',\r\n      '\"Segoe UI Symbol\"',\r\n    ].join(','),\r\n  },\r\n  palette: {\r\n    primary: {\r\n      main: '#133995',\r\n    },\r\n    secondary: {\r\n      main: '#6817ff',\r\n    }\r\n  },\r\n});\r\n\r\nexport default theme;","import { faGem } from \"@fortawesome/free-regular-svg-icons\";\r\nimport { Box, CardActionArea, Chip, LinearProgress, LinearProgressProps, Link, Paper, Skeleton, styled, Typography, useMediaQuery } from \"@mui/material\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport { orderBy } from \"lodash\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { CommonConstants, CommonUtil, ExplorerUtil, getLogger, UrlUtil } from \"vitepunks-common\";\r\nimport { ClientConstants } from \"../../../../common/constants\";\r\nimport { CommonContext, getCommonContext } from \"../../../../contexts/common.context\";\r\nimport { usePunkById } from \"../../../../hooks/punk.hook\";\r\nimport theme from \"../../../../theme\";\r\nimport { MomentUtil } from \"../../../../util/moment.util\";\r\nimport { Countdown } from \"../../../common/components/countdown\";\r\nimport { FontAwesomeSvgIcon } from \"../../../common/components/fa-icon\";\r\nimport { ExtendedBootstrapTooltip } from \"../../../common/components/tooltip\";\r\n\r\nconst logger = getLogger();\r\n\r\nconst CustomCardMedia = styled(\"div\")(({ theme }) => (`\r\n  position: relative;\r\n  height: 320px;\r\n  // animation: lightning 4s ease-out infinite;\r\n  background-image: url(\"${ClientConstants.ITEM_BG_URL}\");\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n`));\r\n\r\nconst PunkImage = styled(\"div\")(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  image-rendering: pixelated;\r\n`,\r\n);\r\n\r\ninterface LinearProgressWithLabelProps extends LinearProgressProps {\r\n  address: string\r\n  label: string\r\n}\r\n\r\nconst LinearProgressWithLabel: React.FC<LinearProgressWithLabelProps> = (props: LinearProgressWithLabelProps) => {\r\n  const matches = useMediaQuery(theme.breakpoints.up(\"md\"));\r\n  const getAddressUrl = () => {\r\n    return ExplorerUtil.getAddressUrl(props.address);\r\n  }\r\n  const truncateAddress = () => {\r\n    return CommonUtil.truncateStringInTheMiddle(props.address, 10, 5);\r\n  }\r\n  return (\r\n    <Box sx={{ width: \"100%\" }}>\r\n      <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\r\n        {matches && (\r\n          <Box sx={{ mr: 1, minWidth: \"115px\" }}>\r\n            <ExtendedBootstrapTooltip title={props.address} placement=\"bottom\" arrow>\r\n              <Link underline=\"hover\" href={getAddressUrl()} target=\"_blank\" variant=\"body2\" color=\"text.secondary\">{truncateAddress()}</Link>\r\n            </ExtendedBootstrapTooltip>\r\n          </Box>\r\n        )}\r\n        <Box sx={{ width: \"100%\", mr: 1 }}>\r\n          <LinearProgress variant=\"determinate\" sx={{ height: 5 }} {...props} />\r\n        </Box>\r\n        <Box sx={{ minWidth: 35 }}>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">{props.label}</Typography>\r\n        </Box>\r\n      </Box>\r\n      {!matches && (\r\n        <ExtendedBootstrapTooltip title={props.address} placement=\"bottom\" arrow>\r\n          <Link underline=\"hover\" variant=\"body2\" color=\"text.secondary\">{truncateAddress()}</Link>\r\n        </ExtendedBootstrapTooltip>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\ntype PunkHolder = {\r\n  address: string\r\n  total: number\r\n  rares: number\r\n}\r\n\r\nexport const LandingRanking = () => {\r\n  const mounted = React.useRef(false);\r\n  const punkId = \"6297\";\r\n  const rankThreshold = 100;\r\n  const moment = React.useMemo<MomentUtil>(() => {\r\n    return new MomentUtil();\r\n  }, []);\r\n  const context = React.useMemo<CommonContext>(() => {\r\n    return getCommonContext();\r\n  }, []);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [maxRares, setMaxRares] = useState(0);\r\n  const [ranks, setRanks] = useState<PunkHolder[]>([]);\r\n  const { punk } = usePunkById(punkId);\r\n  const date = moment.getFromUnix(1643673599);\r\n  const matches = useMediaQuery(theme.breakpoints.up(\"md\"));\r\n\r\n  useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const setRanksAsync = async () => {\r\n      const _punks = await context.datasource.getPunksAllAsync();\r\n      const _holderMap = new Map<string, PunkHolder>();\r\n      for (const p of _punks) {\r\n        if (p.owner) {\r\n          let _existing = _holderMap.get(p.owner);\r\n          if (!_existing) {\r\n            _existing = {\r\n              address: p.owner,\r\n              total: 0,\r\n              rares: 0\r\n            };\r\n          }\r\n          _existing.total++;\r\n          if (p.rank < rankThreshold) {\r\n            _existing.rares++;\r\n          }\r\n          _holderMap.set(p.owner, _existing);\r\n        }\r\n      }\r\n\r\n      const _holders: PunkHolder[] = [];\r\n      let _maxRares = 0;\r\n      _holderMap.forEach((value: PunkHolder, key: string) => {\r\n        if (value.rares > 0) {\r\n          _holders.push(value);\r\n          if (value.rares > _maxRares) {\r\n            _maxRares = value.rares;\r\n          }\r\n        }\r\n      });\r\n      logger.info(\"_holderMap.size\", _holderMap.size, \"holders.length\", _holders.length)();\r\n\r\n      const _holdersOrdered = orderBy(\r\n        _holders,\r\n        [\r\n          (h: PunkHolder) => h.rares,\r\n          (h: PunkHolder) => h.total\r\n        ],\r\n        [\r\n          \"desc\",\r\n          \"desc\"\r\n        ]\r\n      );\r\n\r\n      if (mounted) {\r\n        setMaxRares(_maxRares);\r\n        setRanks(_holdersOrdered.splice(0, Math.min(7, _holdersOrdered.length)));\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n    setIsLoading(true);\r\n    setTimeout(() => {\r\n      setRanksAsync();\r\n    }, 2000);\r\n  }, [context.datasource]);\r\n\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n      <Box maxWidth={900}>\r\n        <Paper\r\n          style={{\r\n            backgroundColor: \"rgba(255, 255, 255, 0.5)\"\r\n          }}\r\n        >\r\n          <Box sx={{ display: matches ? \"flex\" : \"inherit\", px: 2, pt: 2, pb: 2, width: \"100%\" }}>\r\n            <Card sx={{ minWidth: matches ? \"350px\" : \"100%\" }}>\r\n              <CardActionArea component={RouterLink} to={`/punk/${punkId}`} target=\"_blank\">\r\n                <CustomCardMedia>\r\n                  <Box sx={{ position: \"absolute\", top: 5, right: 5 }}>\r\n                    <ExtendedBootstrapTooltip title={<span>Rarity rank</span>} placement=\"bottom\" arrow>\r\n                      <Chip size=\"small\" icon={<FontAwesomeSvgIcon icon={faGem} sx={{ fontSize: \"small\", ml: 1 }} />} sx={{ fontSize: \"0.7rem\" }} label={punk?.rank} />\r\n                    </ExtendedBootstrapTooltip>\r\n                  </Box>\r\n                  <PunkImage sx={{ backgroundImage: `url(\"${UrlUtil.getPunkUrl(punk?.image, punk?.cid)}\")` }} />\r\n                </CustomCardMedia>\r\n                <CardContent sx={{ p: 0 }}>\r\n                  <Typography variant=\"h6\" component=\"div\" sx={{ p: 1 }}>\r\n                    {CommonConstants.PUNK_NAME} #{punkId}\r\n                  </Typography>\r\n                  <Box sx={{ height: \"70px\", overflow: \"auto\" }}>\r\n                    <Box sx={{ p: 1 }}>\r\n                      {punk?.attributes?.map((a: string) => (\r\n                        <Chip key={a} label={a} variant=\"outlined\" sx={{ mb: 1, mr: 1 }} size=\"small\" />\r\n                      ))}\r\n                    </Box>\r\n                  </Box>\r\n                </CardContent>\r\n              </CardActionArea>\r\n            </Card>\r\n            <Box sx={{ flexGrow: 1, ml: matches ? 2 : 0, mt: matches ? 0 : 2 }}>\r\n              <Typography variant=\"h6\" paragraph>💎 Rarity contest</Typography>\r\n              The address owning the most rare punks below rank {rankThreshold} when the contest ends will be\r\n              awarded <Link underline=\"hover\" component={RouterLink} to={`/punk/${punkId}`} target=\"_blank\">{CommonConstants.PUNK_NAME} #{punkId}</Link> with\r\n              rarity rank <Chip size=\"small\" label={punk?.rank} />\r\n              <br></br>\r\n              In case 2 or more addresses own the same amount of rare punks, the address with overall more punks will be awarded.\r\n              <Box sx={{ mt: 3 }}>\r\n                {isLoading ? (\r\n                  <>\r\n                    <Skeleton animation=\"wave\"></Skeleton>\r\n                    <Skeleton animation=\"wave\" sx={{ mt: 0.5 }}></Skeleton>\r\n                    <Skeleton animation=\"wave\" sx={{ mt: 0.5 }}></Skeleton>\r\n                    <Skeleton animation=\"wave\" sx={{ mt: 0.5 }}></Skeleton>\r\n                    <Skeleton animation=\"wave\" sx={{ mt: 0.5 }}></Skeleton>\r\n                    <Skeleton animation=\"wave\" sx={{ mt: 0.5 }}></Skeleton>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    {ranks.map((e: PunkHolder) => (\r\n                      <LinearProgressWithLabel key={e.address} value={e.rares / maxRares * 100} label={e.rares.toString()} address={e.address}></LinearProgressWithLabel>\r\n                    ))}\r\n                  </>\r\n                )}\r\n              </Box>\r\n              <Paper elevation={3} sx={{ p: 2, textAlign: \"center\", mt: 3 }}>\r\n                <Countdown date={date.toISOString()}></Countdown>\r\n              </Paper>\r\n            </Box>\r\n          </Box>\r\n        </Paper>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport { faDiscord, faGithub, faTwitter } from '@fortawesome/free-brands-svg-icons';\r\nimport { Box, Button, Container, Grid, IconButton, Link, Paper, Stack, Typography } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { CommonConstants, getEmitter, getLogger, PunkTypes, TokenUtil } from 'vitepunks-common';\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { GET_MARKET_INFO_QUERY } from '../../../../queries';\r\nimport { GetMarketInfo } from '../../../../queries/__generated__/GetMarketInfo';\r\nimport { getPunkService } from '../../../../services/punk.service';\r\nimport { MomentUtil } from '../../../../util/moment.util';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\nimport { Countdown } from '../../../common/components/countdown';\r\nimport { FontAwesomeSvgIcon } from '../../../common/components/fa-icon';\r\nimport { LandingFaq } from '../faq';\r\nimport { MintsRemaining } from '../mints-remaining';\r\nimport { LandingRanking } from '../ranking';\r\n\r\nconst logger = getLogger();\r\n\r\nexport const LandingMain = () => {\r\n  const moment = React.useMemo<MomentUtil>(() => {\r\n    return new MomentUtil();\r\n  }, []);\r\n  const date = moment.getLocal(\"2021-12-21T17:00:00+0000\");\r\n\r\n  const mounted = React.useRef(false);\r\n  const [mintPrice, setMintPrice] = useState<PunkTypes.DisplayBigNumber>({\r\n    number: new PunkTypes.BigNumberWrapper(\"0\"),\r\n    displayNumber: \"0\"\r\n  });\r\n  const [marketStarted, setMarketStarted] = useState(false);\r\n  const [canMint, setCanMint] = useState(false);\r\n  const [mintsRemaining, setMintsRemaining] = useState<Maybe<number>>(undefined);\r\n  const emitter = getEmitter();\r\n  const punkService = getPunkService();\r\n\r\n  const query = useQuery<GetMarketInfo>(GET_MARKET_INFO_QUERY, {\r\n    fetchPolicy: 'network-only'\r\n  });\r\n\r\n  const refetch = query.refetch;\r\n\r\n  useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (state: PunkTypes.DocumentState) => {\r\n      if (state === PunkTypes.DocumentState.Active) {\r\n        logger.info(\"Refreshing market info\")();\r\n        refetch();\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    };\r\n  }, [emitter, refetch]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.MarketChangedEvent) => {\r\n      logger.info(`eventType: ${e.eventType} amount: ${e.value.toFixed()} timestamp: ${e.timestamp.toFixed()}`)();\r\n      refetch();\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.MarketChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.MarketChanged, handleEvent);\r\n    };\r\n  }, [emitter, refetch]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.PunkChangedEvent) => {\r\n      logger.info(`eventType: ${e.eventType} punkId: ${e.punkId} amount: ${e.amount?.toFixed()} fromAddress: ${e.fromAddress} toAddress: ${e.toAddress} timestamp: ${e.timestamp.toFixed()}`)();\r\n      refetch();\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.PunkChanged, handleEvent)\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    };\r\n  }, [emitter, refetch]);\r\n\r\n  useEffect(() => {\r\n    const info = query.data?.marketInfo;\r\n    if (info && mounted.current) {\r\n      setMintPrice({\r\n        number: new PunkTypes.BigNumberWrapper(info.mintPrice),\r\n        displayNumber: TokenUtil.formatVite(new PunkTypes.BigNumberWrapper(info.mintPrice))\r\n      });\r\n      setMarketStarted(info.marketStarted);\r\n      setCanMint(info.marketStarted && info.mintsRemaining > 0);\r\n      setMintsRemaining(info.mintsRemaining);\r\n    }\r\n  }, [query.data]);\r\n\r\n  const handleMintAsync = async () => {\r\n    try {\r\n      const result = await punkService.mintAsync();\r\n      if (result) {\r\n        SnackbarUtil.enqueueMessage(\"Mint success\");\r\n      } else {\r\n        SnackbarUtil.enqueueError(\"Mint failed\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(error)();\r\n      SnackbarUtil.enqueueError(error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"lg\" sx={{ mt: 10 }}>\r\n      <Grid container spacing={3} direction=\"row\" justifyContent=\"center\" alignItems=\"center\" marginBottom={3}>\r\n        <Grid item sm={12} md={6}>\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <div>\r\n              <Typography variant=\"h3\" color=\"primary\">\r\n                {ClientConstants.APP_NAME}\r\n              </Typography>\r\n              <Typography variant=\"subtitle1\" color=\"textSecondary\" paragraph>\r\n                The very first NFT collection powered by <Link underline=\"hover\" href=\"https://www.vite.org/\" target=\"_blank\">Vite chain</Link>. Now is your chance to make Vite history and become owner of an isometric punk.\r\n                Get yourself ready for the metaverse.\r\n                {!marketStarted ? (\r\n                  <>\r\n                    &nbsp;Minting will open in:\r\n                  </>\r\n\r\n                ) : (\r\n                  <>\r\n                    &nbsp;Mint a punk for {mintPrice.displayNumber} {CommonConstants.CURRENCY_NAME} now!\r\n                  </>\r\n                )}\r\n              </Typography>\r\n              {!marketStarted ? (\r\n                <Paper elevation={3} sx={{ p: 2, width: \"60%\", textAlign: \"center\", mb: 3 }}>\r\n                  <Countdown date={date.toISOString()}></Countdown>\r\n                </Paper>\r\n              ) : (\r\n                <MintsRemaining loading={query.loading} mintsRemaining={mintsRemaining}></MintsRemaining>\r\n              )}\r\n              <Stack spacing={2} direction=\"row\">\r\n                <ClickOnceButton variant=\"contained\" color=\"primary\" callbackFn={handleMintAsync} sx={{ minWidth: \"100px\" }} disabled={!canMint}>\r\n                  Mint\r\n                </ClickOnceButton>\r\n                <Button variant=\"outlined\" color=\"primary\" component={RouterLink} to='/marketplace'>\r\n                  Browse\r\n                </Button>\r\n              </Stack>\r\n            </div>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item sm={12} md={6}>\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            {/* <LandingMainImage></LandingMainImage> */}\r\n            <video width=\"100%\" preload='' autoPlay muted playsInline loop style={{ opacity: \"0.8\" }}>\r\n              <source src={CommonConstants.CDN_URL + 'videos/landing_640x360_2.mp4'} type=\"video/mp4\"></source>\r\n            </video>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} marginTop={10}>\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Typography variant=\"subtitle1\" color=\"textSecondary\">\r\n              Connect with us\r\n            </Typography>\r\n          </Box>\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Stack spacing={2} direction=\"row\">\r\n              <IconButton aria-label=\"Twitter\" href={ClientConstants.TWITTER_URL} target=\"_blank\">\r\n                <FontAwesomeSvgIcon icon={faTwitter} />\r\n              </IconButton>\r\n              <IconButton aria-label=\"GitHub\" href={ClientConstants.GITHUB_URL} target=\"_blank\">\r\n                <FontAwesomeSvgIcon icon={faGithub} />\r\n              </IconButton>\r\n              <IconButton aria-label=\"Discord\" href={ClientConstants.DISCORD_URL} target=\"_blank\">\r\n                <FontAwesomeSvgIcon icon={faDiscord} />\r\n              </IconButton>\r\n            </Stack>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} marginTop={10}>\r\n          <LandingRanking></LandingRanking>\r\n        </Grid>\r\n        <Grid item xs={12} marginTop={10}>\r\n          <LandingFaq></LandingFaq>\r\n        </Grid>\r\n        <Grid item xs={12} marginTop={2}>\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Box maxWidth={800}>\r\n              <img width=\"100%\" alt=\"main\" src={ClientConstants.LANDING_IMAGE_URL}></img>\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} marginTop={1}>\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <div>\r\n              <Typography variant=\"h5\" color=\"textSecondary\" textAlign=\"center\" paragraph>\r\n                Disclaimer\r\n              </Typography>\r\n              <Typography variant=\"subtitle1\" color=\"textSecondary\" textAlign=\"center\" paragraph>\r\n                The intention of {ClientConstants.APP_NAME} is to showcase the capabilities of\r\n                the <Link underline=\"hover\" href=\"https://www.vite.org/\" target=\"_blank\">Vite chain</Link>. {ClientConstants.APP_NAME} is not affiliated with CryptoPunks and LarvaLabs.\r\n                The value of a {CommonConstants.PUNK_NAME} is not related to the value of a CryptoPunk. {ClientConstants.APP_NAME} is a homage to the CryptoPunk project of LarvaLabs.\r\n                With {ClientConstants.APP_NAME} we thank LarvaLabs for their pioneering and for creating the CryptoPunk project. The project that basically started the ever growing NFT movement.\r\n\r\n                {marketStarted && mintPrice.number.gt(0) && (\r\n                  <>\r\n                    &nbsp;Why mint for {mintPrice.displayNumber} {CommonConstants.CURRENCY_NAME}?\r\n                    The minting of {ClientConstants.APP_NAME} is set at {mintPrice.displayNumber} {CommonConstants.CURRENCY_NAME}.\r\n                    This means that during the initial minting phase, you will be able to generate a random punk for {mintPrice.displayNumber} {CommonConstants.CURRENCY_NAME}.\r\n                    When all 10,000 Punks are minted, you can get a Punk by using the marketplace.\r\n\r\n                    That the minting is set at {mintPrice.displayNumber} {CommonConstants.CURRENCY_NAME} has a couple of reasons. As you know, keeping up, maintaining and further developing a system costs money.\r\n                    We want to keep {ClientConstants.APP_NAME} running for years to come and we hope to integrate {ClientConstants.APP_NAME} with other NFT marketplaces in the near future.\r\n                  </>\r\n                )}\r\n              </Typography>\r\n            </div>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Container >\r\n  );\r\n}\r\n","import { ecLevel, modes, qrcode } from 'qrcode.es';\r\nimport React, { useEffect, useRef } from 'react';\r\n\r\ninterface Props {\r\n  text?: string\r\n}\r\n\r\nexport const QrCode: React.FC<Props> = (props: Props) => {\r\n  const elementRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const defaultOpt = {\r\n      size: 240,\r\n      ecLevel: ecLevel.HIGH,\r\n      minVersion: 4,\r\n      background: '#fff',\r\n      mode: modes.DRAW_WITH_IMAGE_BOX,\r\n      radius: 0,\r\n      image: process.env.PUBLIC_URL + '/assets/images/logo640.png',\r\n      mSize: 0.3\r\n    };\r\n\r\n    if (props.text && elementRef.current) {\r\n      defaultOpt.size = Math.min(240, elementRef.current.clientWidth - 10);\r\n      elementRef.current.innerHTML = ''\r\n      const q = new qrcode(elementRef.current);\r\n      q.generate(props.text, defaultOpt).then(() => {\r\n        console.log('QR code generated')\r\n      });\r\n    }\r\n  }, [props.text])\r\n\r\n  return (\r\n    <div ref={elementRef}></div>\r\n  );\r\n}\r\n","import { Button, Dialog, DialogContent, DialogContentText, DialogTitle, FormControl, Input, InputLabel, Link, Typography } from '@mui/material';\r\nimport { Box } from '@mui/system';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonUtil, getEmitter, getLogger, PunkTypes } from 'vitepunks-common';\r\nimport { getClientConfig } from '../../../../common/config';\r\nimport { getCommonContext } from '../../../../contexts/common.context';\r\nimport { getWalletManager } from '../../../../storage/wallet.storage';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { WalletConnectorFactory } from '../../../../wallet/factory';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\nimport { QrCode } from '../qrcode';\r\n\r\nconst logger = getLogger();\r\n\r\ninterface Props {\r\n  open: boolean;\r\n  setOpen: React.Dispatch<React.SetStateAction<boolean>>;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const LoginDialog: React.FC<Props> = (props: Props) => {\r\n  const [uri, setUri] = useState<string>(\"\");\r\n  const [error, setError] = useState(false);\r\n  const [mnemonic, setMnemonic] = useState<Maybe<string>>(undefined);\r\n  const { onClose, open, setOpen } = props;\r\n  const context = getCommonContext();\r\n  const walletManager = getWalletManager();\r\n  const emitter = getEmitter();\r\n  const connectorFactory = React.useMemo<WalletConnectorFactory>(() => {\r\n    return new WalletConnectorFactory(walletManager);\r\n  }, [walletManager]);\r\n  const handleCreateSession = React.useCallback(async () => {\r\n    try {\r\n      const connector = await connectorFactory.createAsync(context.network);\r\n      logger.info(connector.uri)();\r\n      setUri(connector.uri);\r\n      setError(false);\r\n    } catch (error) {\r\n      logger.error(error)();\r\n      setError(true);\r\n    }\r\n  }, [connectorFactory, context.network]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (open: boolean) => {\r\n      setOpen(open)\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.ConnectWalletDialog, handleEvent)\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.ConnectWalletDialog, handleEvent)\r\n      setUri(\"\");\r\n      setError(false);\r\n    };\r\n  }, [emitter, setOpen]);\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      setMnemonic(undefined);\r\n      handleCreateSession();\r\n    }\r\n  }, [open, handleCreateSession]);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n  };\r\n\r\n  const handleMnemonicChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setMnemonic(event.target.value);\r\n  };\r\n\r\n  const handleLogin = () => {\r\n    const wallet = walletManager.createWebWallet(CommonUtil.isNullOrWhitespace(mnemonic) ? process.env.REACT_APP_MNEMONIC ?? \"\" : mnemonic ?? \"\");\r\n    if (!wallet) {\r\n      SnackbarUtil.enqueueError('Invalid mnemonic');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={open} maxWidth=\"xs\">\r\n      <DialogTitle>Connect Wallet</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          Scan the QR code via Vite Wallet App\r\n        </DialogContentText>\r\n        <Box sx={{ mt: 2, textAlign: \"center\" }}>\r\n          {CommonUtil.isNullOrWhitespace(uri) ? (\r\n            <>\r\n              {error ? (\r\n                <>\r\n                  <Typography gutterBottom>Error</Typography>\r\n                  <ClickOnceButton variant=\"outlined\" callbackFn={handleCreateSession}>Retry</ClickOnceButton>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  Loading...\r\n                </>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <QrCode text={uri}></QrCode>\r\n          )}\r\n          <DialogContentText marginTop={1}>\r\n            Don't have the Vite Wallet App? <Link underline=\"hover\" href=\"https://vite.org/airdrop\" target=\"_blank\">Download here</Link>\r\n          </DialogContentText>\r\n        </Box>\r\n        {getClientConfig().ENABLE_MNEMONIC_LOGIN && (\r\n          <Box sx={{ mt: 2, textAlign: \"center\" }}>\r\n            <FormControl fullWidth variant=\"standard\" >\r\n              <InputLabel htmlFor=\"mnemonic\">Mnemonic</InputLabel>\r\n              <Input\r\n                id=\"mnemonic\"\r\n                value={mnemonic}\r\n                onChange={handleMnemonicChange}\r\n                type=\"text\"\r\n                autoComplete=\"new-password\"\r\n              />\r\n            </FormControl>\r\n            <Button variant=\"contained\" sx={{ mt: 1 }} onClick={handleLogin}>Use test account</Button>\r\n          </Box>\r\n        )}\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n","import AccountCircleTwoToneIcon from '@mui/icons-material/AccountCircleTwoTone';\r\nimport LogoutIcon from '@mui/icons-material/Logout';\r\nimport ShoppingCartIcon from '@mui/icons-material/ShoppingCart';\r\nimport { AppBar, Button, Chip, styled, Toolbar, Typography, useMediaQuery, useTheme } from '@mui/material';\r\nimport React from 'react';\r\nimport { Link as RouterLink, useNavigate } from 'react-router-dom';\r\nimport { CommonUtil } from \"vitepunks-common\";\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\r\nimport { ExtendedBootstrapTooltip } from '../../../common/components/tooltip';\r\nimport { LoginDialog } from '../../../main/components/login';\r\n\r\nconst Root = styled('div')(\r\n  ({ theme }) => `\r\n  flex-grow: 1;\r\n`);\r\n\r\nconst TitleTypography = styled(Typography)(\r\n  ({ theme }) => `\r\n  flex-grow: 1;\r\n  margin-left: 10px !important;\r\n`);\r\n\r\nexport const Header: React.FC = (props: any) => {\r\n  const navigate = useNavigate();\r\n  const theme = useTheme();\r\n  const matches = useMediaQuery(theme.breakpoints.up('sm'));\r\n  const context = useConnectedWeb3Context();\r\n  const [loginOpen, setLoginOpen] = React.useState(false);\r\n\r\n  const handleClickLogin = () => {\r\n    setLoginOpen(true);\r\n  };\r\n\r\n  const handleClickLogout = () => {\r\n    context.logout();\r\n  };\r\n\r\n  const handleLoginClose = () => {\r\n    setLoginOpen(false);\r\n  };\r\n\r\n  const truncateAddress = (address?: string) => {\r\n    return CommonUtil.truncateStringInTheMiddle(address, 10, 5)\r\n  }\r\n\r\n  const showAccount = () => {\r\n    navigate(`/account/${context.account}`);\r\n  }\r\n\r\n  return (\r\n    <Root>\r\n      <AppBar position=\"static\" color=\"transparent\">\r\n        <Toolbar>\r\n          <a href=\"./\" style={{ height: \"40px\" }}>\r\n            <img src={\"./assets/images/logo640.png\"} alt=\"logo\" width=\"40\" />\r\n          </a>\r\n          <TitleTypography variant=\"h6\" color=\"#fff\">\r\n            <a href=\"./\" style={{ color: \"inherit\", textDecoration: \"inherit\" }}>\r\n              {ClientConstants.APP_NAME}\r\n            </a>\r\n          </TitleTypography>\r\n          <Button sx={{ mr: 2 }} component={RouterLink} to='/marketplace'>\r\n            {matches ? (\r\n              <>\r\n                Marketplace\r\n              </>\r\n            ) : (\r\n              <ShoppingCartIcon />\r\n            )}\r\n          </Button>\r\n          {context.account ? (\r\n            <>\r\n              <ExtendedBootstrapTooltip sx={{ mr: 1 }} title={\r\n                <React.Fragment>\r\n                  <p>{context.account}</p>\r\n                </React.Fragment>\r\n              } placement=\"bottom\" arrow>\r\n                {matches ? (\r\n                  <Chip icon={<AccountCircleTwoToneIcon />} label={truncateAddress(context.account)} variant=\"outlined\" onClick={showAccount} />\r\n                ) : (\r\n                  <Button color=\"inherit\" onClick={showAccount}>\r\n                    <AccountCircleTwoToneIcon />\r\n                  </Button>\r\n                )}\r\n              </ExtendedBootstrapTooltip>\r\n              <Button color=\"inherit\" onClick={handleClickLogout}>\r\n                <LogoutIcon />\r\n              </Button>\r\n            </>\r\n          ) : (\r\n            <Button variant=\"contained\" color=\"primary\" onClick={handleClickLogin}>\r\n              Connect wallet\r\n            </Button>\r\n          )}\r\n          <LoginDialog open={loginOpen} setOpen={setLoginOpen} onClose={handleLoginClose}></LoginDialog>\r\n        </Toolbar>\r\n      </AppBar >\r\n    </Root >\r\n  )\r\n}","import { useQuery } from '@apollo/client';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Avatar, Grid, Link, Paper, styled, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from '@mui/material';\r\nimport React from 'react';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { ActionName, CommonConstants, CommonUtil, PunkEventTypes, PunkTypes, TokenUtil, UrlUtil } from \"vitepunks-common\";\r\nimport { getClientConfig } from '../../../../common/config';\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { GET_PUNK_QUERY } from '../../../../queries';\r\nimport { GetPunk, GetPunkVariables } from '../../../../queries/__generated__/GetPunk';\r\nimport { IconUtil } from '../../../../util/icon.util';\r\nimport { MomentUtil } from '../../../../util/moment.util';\r\nimport { EventListLoading } from '../event-list-loading';\r\nimport { ExplorerLink, ExplorerLinkType } from '../explorer-link';\r\nimport { ExtendedBootstrapTooltip } from '../tooltip';\r\n\r\ninterface EventTableRowProps {\r\n  item: PunkTypes.PunkEvent\r\n}\r\n\r\nconst CustomAvatar = styled(Avatar)(({ theme }) => (`\r\n  background-image: url('${ClientConstants.ITEM_BG_URL}');\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  image-rendering: pixelated;\r\n  margin-right: 10px;\r\n`));\r\n\r\nconst CustomTableCell = styled(TableCell)(({ theme }) => (`\r\n  background-color: rgba(255, 255, 255, 0.3);\r\n`));\r\n\r\nconst EventTableRow: React.FC<EventTableRowProps> = (props: EventTableRowProps) => {\r\n  const query = useQuery<GetPunk, GetPunkVariables>(GET_PUNK_QUERY, {\r\n    variables: {\r\n      id: props.item.punkId.toString()\r\n    },\r\n    fetchPolicy: 'network-only'\r\n  });\r\n  const momentUtil = new MomentUtil();\r\n\r\n  const formatTimestamp = (timestamp: any) => {\r\n    return momentUtil.getLocalReverseFormatted(momentUtil.getFromUnix(timestamp));\r\n  }\r\n\r\n  const formatViteTooltip = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatViteTooltip(bn);\r\n  }\r\n\r\n  const formatVite = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatVite(bn);\r\n  }\r\n\r\n  const isPreMint = () => {\r\n    const clientConfig = getClientConfig();\r\n    if (props.item.eventType !== PunkTypes.PunkEventType.Mint || !clientConfig.PRE_MINT_HEIGHT) {\r\n      return false;\r\n    }\r\n    return props.item.accountBlockHeight.lte(clientConfig.PRE_MINT_HEIGHT);\r\n  }\r\n\r\n  const getEventName = (): string => {\r\n    const eventType = props.item.eventType as PunkTypes.PunkEventType;\r\n    switch (eventType) {\r\n      case PunkTypes.PunkEventType.Offer:\r\n        if (!props.item.amount || props.item.amount.lte(0)) {\r\n          return ActionName.gift;\r\n        }\r\n        break;\r\n      case PunkTypes.PunkEventType.Buy:\r\n        if (!props.item.amount || props.item.amount.lte(0)) {\r\n          return ActionName.transfer;\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return PunkEventTypes[props.item.eventType].name;\r\n  }\r\n\r\n  return (\r\n    <TableRow sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\r\n      <TableCell component=\"th\" scope=\"row\">\r\n        <FontAwesomeIcon icon={IconUtil.getPunkEventTypeIcon(props.item.eventType as PunkTypes.PunkEventType, props.item.amount)} /> <b>{getEventName()}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Link underline=\"hover\" component={RouterLink} to={`/punk/${props.item.punkId}`} display=\"flex\" alignItems=\"center\">\r\n          <CustomAvatar variant=\"rounded\" src={UrlUtil.getPunkUrl(query.data?.punk.image, query.data?.punk.cid)}>\r\n          </CustomAvatar>\r\n          {CommonConstants.PUNK_NAME} #{props.item.punkId}\r\n        </Link>\r\n      </TableCell>\r\n      <TableCell>\r\n        {props.item.amount?.gt(0) ? (\r\n          <>\r\n            <ExtendedBootstrapTooltip title={formatViteTooltip(props.item.amount)}>\r\n              <span>{formatVite(props.item.amount)}</span>\r\n            </ExtendedBootstrapTooltip>\r\n          </>\r\n        ) : (\r\n          <>\r\n          </>\r\n        )}\r\n      </TableCell>\r\n      <TableCell>\r\n        <ExplorerLink type={ExplorerLinkType.Address} value={props.item.fromAddress}>\r\n          <ExtendedBootstrapTooltip title={props.item.fromAddress ?? \"\"}>\r\n            <span>{CommonUtil.truncateStringInTheMiddle(props.item.fromAddress, 10, 5)}</span>\r\n          </ExtendedBootstrapTooltip>\r\n        </ExplorerLink>\r\n      </TableCell>\r\n      <TableCell>\r\n        <ExplorerLink type={ExplorerLinkType.Address} value={props.item.toAddress}>\r\n          <ExtendedBootstrapTooltip title={props.item.toAddress ?? \"\"}>\r\n            <span>{CommonUtil.truncateStringInTheMiddle(props.item.toAddress, 10, 5)}</span>\r\n          </ExtendedBootstrapTooltip>\r\n        </ExplorerLink>\r\n      </TableCell>\r\n      <TableCell align=\"right\">\r\n        {isPreMint() ? (\r\n          <>\r\n            {formatTimestamp(props.item.timestamp.toFixed())}\r\n          </>\r\n        ) : (\r\n          <ExplorerLink type={ExplorerLinkType.Transaction} value={props.item.accountBlockHash}>\r\n            {formatTimestamp(props.item.timestamp.toFixed())}\r\n          </ExplorerLink>\r\n        )}\r\n      </TableCell>\r\n    </TableRow>\r\n  )\r\n}\r\n\r\ninterface Props {\r\n  events: PunkTypes.PunkEvent[]\r\n  newEvents: PunkTypes.PunkEvent[]\r\n  error: any\r\n  loading: boolean\r\n  hasMore: boolean\r\n  height?: number\r\n  fetchMoreDataAsync(): Promise<void>\r\n}\r\n\r\nexport const EventList: React.FC<Props> = (props: Props) => {\r\n  const emptyMessage = \"No activity yet\";\r\n  return (\r\n    <Paper\r\n      id=\"event-list\"\r\n      style={{\r\n        height: props.height ?? 300,\r\n        overflow: 'auto',\r\n        backgroundColor: 'rgba(255, 255, 255, 0.5)'\r\n      }}\r\n    >\r\n      {props.newEvents.length > 0 || props.events.length > 0 ? (\r\n        <InfiniteScroll\r\n          dataLength={props.events.length ?? 0}\r\n          next={props.fetchMoreDataAsync}\r\n          hasMore={props.hasMore}\r\n          loader={\r\n            <Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n              <EventListLoading loading={props.loading} error={props.error} count={props.events.length} message={emptyMessage}></EventListLoading>\r\n            </Grid>\r\n          }\r\n          scrollableTarget=\"event-list\"\r\n        >\r\n          <TableContainer>\r\n            <Table stickyHeader>\r\n              <TableHead>\r\n                <TableRow>\r\n                  <CustomTableCell></CustomTableCell>\r\n                  <CustomTableCell><b>Punk</b></CustomTableCell>\r\n                  <CustomTableCell><b>Amount</b></CustomTableCell>\r\n                  <CustomTableCell><b>From</b></CustomTableCell>\r\n                  <CustomTableCell><b>To</b></CustomTableCell>\r\n                  <CustomTableCell align=\"right\"><b>Date</b></CustomTableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {props.newEvents.map((e: PunkTypes.PunkEvent) => (\r\n                  <EventTableRow key={`new-events-${e.id}`} item={e} />\r\n                ))}\r\n                {props.events.map((e: PunkTypes.PunkEvent) => (\r\n                  <EventTableRow key={`events-${e.id}`} item={e} />\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </InfiniteScroll>) : (\r\n        <Grid sx={{ height: \"100%\" }} container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n          <EventListLoading loading={props.loading} error={props.error} count={props.events.length} message={emptyMessage}></EventListLoading>\r\n        </Grid>\r\n      )}\r\n    </Paper>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { getEmitter, getLogger, PunkTypes, TransformUtil } from 'vitepunks-common';\r\nimport { GET_MARKET_EVENTS_QUERY } from '../../../../queries';\r\nimport { GetMarketEvents, GetMarketEventsVariables } from '../../../../queries/__generated__/GetMarketEvents';\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { EventList } from '../../../common/components/event-list';\r\n\r\nconst logger = getLogger();\r\n\r\nexport const MarketplaceBrowseActivity: React.FC = (props: any) => {\r\n  const limit = 8;\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [error, setError] = useState<any>(undefined);\r\n  const [events, setEvents] = useState<PunkTypes.PunkEvent[]>([]);\r\n  const [newEvents, setNewEvents] = useState<PunkTypes.PunkEvent[]>([]);\r\n  const service = getMarketService();\r\n  const emitter = getEmitter();\r\n\r\n  const query = useQuery<GetMarketEvents, GetMarketEventsVariables>(GET_MARKET_EVENTS_QUERY, {\r\n    variables: {\r\n      offset: 0,\r\n      limit: limit\r\n    },\r\n    fetchPolicy: 'network-only',\r\n    onCompleted: (data) => {\r\n      setEvents(data.marketEvents.events.map(e => TransformUtil.toPunkEvent(e)));\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsLoading(query.loading);\r\n  }, [query.loading]);\r\n\r\n  useEffect(() => {\r\n    setError(query.error);\r\n  }, [query.error]);\r\n\r\n  const fetchMoreDataAsync = async () => {\r\n    logger.info(\"fetchMoreDataAsync\", events.length)();\r\n    const blockHeight: Maybe<string> = query.data?.marketEvents.blockHeight.toString();\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await service.getEventsAsync(events.length, limit, blockHeight);\r\n      setHasMore(result.data.marketEvents.events.length >= limit);\r\n      if (result.data.marketEvents.events.length > 0) {\r\n        setEvents([\r\n          ...events,\r\n          ...result.data.marketEvents.events.map(e => TransformUtil.toPunkEvent(e))\r\n        ]);\r\n      }\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const refetch = query.refetch;\r\n\r\n  const refresh = useCallback(() => {\r\n    logger.info(\"Refreshing market activity\")();\r\n    refetch();\r\n    setNewEvents([]);\r\n  }, [refetch]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (state: PunkTypes.DocumentState) => {\r\n      if (state === PunkTypes.DocumentState.Active) {\r\n        refresh();\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    };\r\n  }, [emitter, refresh]);\r\n\r\n  const addNewEvent = useCallback((e: PunkTypes.PunkChangedEvent) => {\r\n    setNewEvents([\r\n      TransformUtil.toPunkEvent(e),\r\n      ...newEvents\r\n    ]);\r\n  }, [newEvents]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.PunkChangedEvent) => {\r\n      logger.info(\"newMarketEvent\", e)();\r\n      addNewEvent(e);\r\n    }\r\n    logger.info('emitter.on', PunkTypes.GlobalEvent.PunkChanged)();\r\n    emitter.on(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    return () => {\r\n      logger.info('emitter.off', PunkTypes.GlobalEvent.PunkChanged)();\r\n      emitter.off(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    };\r\n  }, [emitter, addNewEvent]);\r\n\r\n  return (\r\n    <EventList\r\n      events={events}\r\n      newEvents={newEvents}\r\n      error={error}\r\n      loading={isLoading}\r\n      hasMore={hasMore}\r\n      height={500}\r\n      fetchMoreDataAsync={fetchMoreDataAsync}>\r\n    </EventList>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport SortIcon from '@mui/icons-material/Sort';\r\nimport { Autocomplete, FormControl, FormGroup, Grid, InputLabel, MenuItem, Select, SelectChangeEvent, Stack, TextField, ToggleButton, ToggleButtonGroup } from '@mui/material';\r\nimport React, { SyntheticEvent, useState } from 'react';\r\nimport { DefaultPunkFilterValues, getEmitter, PunkSortTypes, PunkTypes } from 'vitepunks-common';\r\nimport { GET_PUNK_ATTRIBUTES_QUERY } from '../../../../queries';\r\nimport { GetPunkAttributes } from '../../../../queries/__generated__/GetPunkAttributes';\r\n\r\nexport const MarketplaceBrowseItemsFilter: React.FC = () => {\r\n  const [values, setValues] = useState<PunkTypes.PunkFilterValues>(DefaultPunkFilterValues);\r\n  const emitter = getEmitter();\r\n\r\n  const attributesQuery = useQuery<GetPunkAttributes>(GET_PUNK_ATTRIBUTES_QUERY, {\r\n    fetchPolicy: 'network-only'\r\n  });\r\n\r\n  const emitEvent = (oldValues: PunkTypes.PunkFilterValues, newValues: PunkTypes.PunkFilterValues) => {\r\n    emitter.emitPunkFilterValuesChanged(oldValues, newValues);\r\n  }\r\n\r\n  const handleSortByChange = (event: SelectChangeEvent) => {\r\n    const newValues: PunkTypes.PunkFilterValues = { ...values, sortBy: event.target.value as PunkTypes.PunkSortBy };\r\n    setValues(newValues);\r\n    emitEvent(values, newValues);\r\n  };\r\n\r\n  const handleSearchChange = (event: SyntheticEvent<Element, Event>, value: string[]) => {\r\n    const newValues: PunkTypes.PunkFilterValues = { ...values, search: value.join(',') };\r\n    setValues(newValues);\r\n    emitEvent(values, newValues);\r\n  };\r\n\r\n  const handleCheckedChange = (event: React.MouseEvent<HTMLElement, MouseEvent>, value: any) => {\r\n    const newValues: PunkTypes.PunkFilterValues = { ...values, orderBy: value };\r\n    setValues(newValues);\r\n    emitEvent(values, newValues);\r\n  };\r\n\r\n  return (\r\n    <Grid container sx={{ mb: 2 }} spacing={3}>\r\n      <Grid item md={3}></Grid>\r\n      <Grid item xs={12} md={6}>\r\n        <Autocomplete\r\n          multiple\r\n          freeSolo\r\n          id=\"search-autocomplete\"\r\n          options={attributesQuery.data?.punkAttributes ?? []}\r\n          getOptionLabel={(option) => option}\r\n          size=\"small\"\r\n          fullWidth={true}\r\n          onChange={handleSearchChange}\r\n          filterSelectedOptions\r\n          renderInput={(params) => (\r\n            <TextField\r\n              {...params}\r\n              label=\"Search\"\r\n            />\r\n          )}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12} md={3}>\r\n        <FormGroup>\r\n          <Stack direction=\"row\" justifyContent=\"end\" spacing={2}>\r\n            <FormControl size=\"small\">\r\n              <InputLabel id=\"sortby-select-label\">Sort by</InputLabel>\r\n              <Select\r\n                labelId=\"sortby-select-label\"\r\n                id=\"sortby-select\"\r\n                value={values.sortBy}\r\n                label=\"Sort by\"\r\n                onChange={handleSortByChange}\r\n              >\r\n                {PunkSortTypes.map(e => (\r\n                  <MenuItem key={e.type} value={e.type}>{e.name}&nbsp;</MenuItem>\r\n                ))}\r\n              </Select>\r\n            </FormControl>\r\n            {/* <Stack direction=\"row\" alignItems=\"center\" >\r\n              <Switch color=\"default\" checked={values.orderByAsc} onChange={handleCheckedChange('orderByAsc')} />\r\n              {values.orderByAsc ? (\r\n                <ArrowUpward fontSize=\"small\" />\r\n              ) : (\r\n                <ArrowDownward fontSize=\"small\" />\r\n              )}\r\n            </Stack> */}\r\n            <ToggleButtonGroup size=\"small\" exclusive value={values.orderBy} onChange={handleCheckedChange}>\r\n              <ToggleButton value={PunkTypes.OrderBy.ASC}>\r\n                <SortIcon sx={{ transform: \"rotate(180deg)\" }} />\r\n              </ToggleButton>\r\n              <ToggleButton value={PunkTypes.OrderBy.DESC}>\r\n                <SortIcon />\r\n              </ToggleButton>\r\n            </ToggleButtonGroup>\r\n          </Stack>\r\n        </FormGroup>\r\n      </Grid>\r\n    </Grid>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { DefaultPunkFilterValues, getEmitter, getLogger, PunkTypes } from 'vitepunks-common';\r\nimport { GET_PUNKS_QUERY } from '../../../../queries';\r\nimport { GetPunks, GetPunksVariables } from '../../../../queries/__generated__/GetPunks';\r\nimport { InfinitePunkList } from '../../../punk/components/infinite-list';\r\nimport { MarketplaceBrowseItemsFilter } from '../browse-items-filter';\r\n\r\nconst logger = getLogger()\r\n\r\nexport const MarketplaceBrowseItems: React.FC = (props: any) => {\r\n  const limit = 8;\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [error, setError] = useState<any>(undefined);\r\n  const [filter, setFilter] = useState<PunkTypes.PunkFilterValues>({\r\n    sortBy: DefaultPunkFilterValues.sortBy,\r\n    orderBy: DefaultPunkFilterValues.orderBy,\r\n    search: ''\r\n  })\r\n  const emitter = getEmitter();\r\n\r\n  const query = useQuery<GetPunks, GetPunksVariables>(GET_PUNKS_QUERY, {\r\n    variables: {\r\n      offset: 0,\r\n      limit: limit,\r\n      sort: filter.sortBy as PunkTypes.PunkSortBy,\r\n      order: filter.orderBy as PunkTypes.OrderBy,\r\n      search: filter.search\r\n    },\r\n    fetchPolicy: 'network-only',\r\n    onCompleted: (data) => {\r\n      setHasMore(data.punks.length >= limit);\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsLoading(query.loading);\r\n  }, [query.loading]);\r\n\r\n  useEffect(() => {\r\n    setError(query.error);\r\n  }, [query.error]);\r\n\r\n  const fetchMoreDataAsync = async () => {\r\n    const startTimestamp = new Date().getTime();\r\n    const currentLength = query.data?.punks.length ?? 0;\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await query.fetchMore({\r\n        variables: {\r\n          offset: currentLength,\r\n          limit: limit\r\n        }\r\n      });\r\n      logger.info(`fetchMoreDataAsync1 took ${new Date().getTime() - startTimestamp}ms`)();\r\n      setHasMore(result.data.punks.length >= limit);\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n    setIsLoading(false);\r\n    logger.info(`fetchMoreDataAsync2 took ${new Date().getTime() - startTimestamp}ms`)();\r\n  };\r\n\r\n  const refetch = query.refetch;\r\n\r\n  useEffect(() => {\r\n    refetch({\r\n      offset: 0,\r\n      limit: limit,\r\n      sort: filter.sortBy as PunkTypes.PunkSortBy,\r\n      order: filter.orderBy as PunkTypes.OrderBy,\r\n      search: filter.search\r\n    })\r\n  }, [filter, refetch])\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (oldValues: PunkTypes.PunkFilterValues, newValues: PunkTypes.PunkFilterValues) => {\r\n      setHasMore(true);\r\n      setFilter({\r\n        sortBy: newValues.sortBy,\r\n        orderBy: newValues.orderBy,\r\n        search: newValues.search\r\n      });\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.PunkFilterValuesChanged, handleEvent)\r\n    return () => {\r\n      logger.info('emitter.off', PunkTypes.GlobalEvent.PunkFilterValuesChanged)()\r\n      emitter.off(PunkTypes.GlobalEvent.PunkFilterValuesChanged, handleEvent)\r\n    };\r\n  }, [emitter])\r\n\r\n  return (\r\n    <>\r\n      <MarketplaceBrowseItemsFilter></MarketplaceBrowseItemsFilter>\r\n      <InfinitePunkList\r\n        items={query.data?.punks ?? []}\r\n        fetchMoreDataAsync={fetchMoreDataAsync}\r\n        error={error}\r\n        isLoading={isLoading}\r\n        hasMore={hasMore}>\r\n      </InfinitePunkList>\r\n    </>\r\n  )\r\n}\r\n","import GridOnIcon from '@mui/icons-material/GridOn';\r\nimport TimelineIcon from '@mui/icons-material/Timeline';\r\nimport { Box, Container, Tab, Tabs, Typography } from '@mui/material';\r\nimport React from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { PunkTypes } from 'vitepunks-common';\r\nimport { MarketplaceBrowseActivity } from '../browse-activity';\r\nimport { MarketplaceBrowseItems } from '../browse-items';\r\n\r\ninterface TabPanelProps {\r\n  children?: React.ReactNode;\r\n  index: number;\r\n  value: number;\r\n}\r\n\r\nfunction TabPanel(props: TabPanelProps) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`marketplace-tabpanel-${index}`}\r\n      aria-labelledby={`marketplace-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box sx={{ p: 2 }}>\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const MarketplaceBrowse: React.FC = (props: any) => {\r\n  const navigate = useNavigate();\r\n  const { tab } = useParams();\r\n  const getTab = (): number => {\r\n    if (tab === PunkTypes.MarketplaceTab.Activity) {\r\n      return 1;\r\n    } else {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  const initialValue = getTab();\r\n  const [value, setValue] = React.useState<number>(initialValue);\r\n  if (initialValue !== value) {\r\n    setValue(initialValue)\r\n  }\r\n\r\n  const handleChange = (event: React.SyntheticEvent, newValue: number) => {\r\n    setValue(newValue);\r\n    switch (newValue) {\r\n      case 1:\r\n        navigate(\"/marketplace/activity\");\r\n        break;\r\n      default:\r\n        navigate(\"/marketplace\");\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Typography variant=\"h2\" component=\"div\" textAlign=\"center\" sx={{ pt: 3 }} gutterBottom>\r\n        Marketplace\r\n      </Typography>\r\n      <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\r\n        <Tabs value={value} onChange={handleChange}>\r\n          <Tab icon={<GridOnIcon />} label=\"Items\" value={0} />\r\n          <Tab icon={<TimelineIcon />} label=\"Activity\" value={1} />\r\n        </Tabs>\r\n      </Box>\r\n      <Container sx={{ pb: 6 }} maxWidth=\"xl\">\r\n        <TabPanel value={value} index={0}>\r\n          <MarketplaceBrowseItems></MarketplaceBrowseItems>\r\n        </TabPanel>\r\n        <TabPanel value={value} index={1}>\r\n          <Box marginTop={5}>\r\n            <MarketplaceBrowseActivity></MarketplaceBrowseActivity>\r\n          </Box>\r\n        </TabPanel>\r\n      </Container>\r\n    </>\r\n  )\r\n}\r\n","import React from 'react';\r\n\r\nexport const MarketplaceItem: React.FC = (props: any) => {\r\n  return (\r\n    <>\r\n      MarketplaceItem\r\n    </>\r\n  )\r\n}\r\n","import { Card } from '@mui/material';\r\nimport { styled } from '@mui/material/styles';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { UrlUtil } from 'vitepunks-common';\r\nimport { ClientConstants } from '../../../../common/constants';\r\n\r\nconst CardContainer = styled(Card)(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100vw; \r\n  background-color: rgba(255, 255, 255, 0.5);\r\n`,\r\n);\r\n\r\nconst ImageContainer = styled('div')(\r\n  ({ theme }) => `\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n`,\r\n);\r\n\r\nconst Image = styled('div')(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  background-image: url('${ClientConstants.ITEM_BG_URL}');\r\n`,\r\n);\r\n\r\nconst Img = styled('img')(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: contain;\r\n  image-rendering: pixelated;\r\n`,\r\n);\r\n\r\ninterface Props {\r\n  image: string\r\n  cid: string\r\n  maxHeight?: string\r\n}\r\n\r\nexport const PunkImage: React.FC<Props> = (props: Props) => {\r\n  const [imageUrl, setImageUrl] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setImageUrl(UrlUtil.getPunkUrl(props.image, props.cid));\r\n  }, [props.image, props.cid]);\r\n\r\n  return (\r\n    <CardContainer sx={{ maxHeight: props.maxHeight ?? \"400px\" }}>\r\n      <ImageContainer>\r\n        <Image>\r\n          <Img sx={{ backgroundImage: `url('${imageUrl}')` }} />\r\n        </Image>\r\n      </ImageContainer>\r\n    </CardContainer>\r\n  );\r\n}","import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Link } from '@mui/material';\r\nimport confetti from 'canvas-confetti';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { CommonConstants, getEmitter, getLogger, PunkTypes } from 'vitepunks-common';\r\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\r\nimport { getPunkService } from '../../../../services/punk.service';\r\nimport { PunkImage } from '../image';\r\n\r\nconst logger = getLogger();\r\n\r\nexport const MintDialog: React.FC = () => {\r\n  const [open, setOpen] = useState(false);\r\n  const [punkId, setPunkId] = useState(-1);\r\n  const [punkImage, setPunkImage] = useState(\"\");\r\n  const [punkCid, setPunkCid] = useState(\"\");\r\n  const emitter = getEmitter();\r\n  const service = getPunkService();\r\n  const context = useConnectedWeb3Context();\r\n\r\n  useEffect(() => {\r\n    const handleEvent = async (e: PunkTypes.PunkChangedEvent) => {\r\n      //logger.info(`eventType: ${e.eventType} punkId: ${e.punkId} amount: ${e.amount?.toString()} fromAddress: ${e.fromAddress} toAddress: ${e.toAddress} timestamp: ${e.timestamp.toString()}`)();\r\n      if (e.eventType === PunkTypes.PunkEventType.Mint && e.toAddress?.toLowerCase() === context.account?.toLowerCase()) {\r\n        logger.info(\"Show mint dialog\")();\r\n        const punk = await service.getById(e.punkId.toString());\r\n        setPunkId(e.punkId);\r\n        setPunkImage(punk.data.punk.image);\r\n        setPunkCid(punk.data.punk.cid);\r\n        setOpen(true);\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.PunkChanged, handleEvent)\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.PunkChanged, handleEvent)\r\n    };\r\n  }, [emitter, service, context.account, setOpen]);\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      const triggerConfetti = () => {\r\n        confetti({\r\n          particleCount: 200,\r\n          spread: 100,\r\n          zIndex: 9999\r\n        });\r\n      }\r\n      for (let index = 1; index < 4; index++) {\r\n        setTimeout(() => {\r\n          triggerConfetti();\r\n        }, index * 225);\r\n      }\r\n    }\r\n  }, [open]);\r\n\r\n  const handleClose = () => {\r\n    setPunkImage(\"\");\r\n    setOpen(false);\r\n  };\r\n\r\n  if (punkId < 0) {\r\n    return (\r\n      <>\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      transitionDuration={500}\r\n      keepMounted\r\n      onClose={handleClose}\r\n      style={{ zIndex: 9999 }}\r\n    >\r\n      <DialogTitle>🎉 Mint success!</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText paddingBottom={1}>\r\n          You have successfully minted <Link underline=\"hover\" component={RouterLink} to={`/punk/${punkId}`} onClick={handleClose}>{CommonConstants.PUNK_NAME} #{punkId}</Link>\r\n        </DialogContentText>\r\n        <PunkImage image={punkImage} cid={punkCid} maxHeight=\"300px\"></PunkImage>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>\r\n          Close\r\n        </Button>\r\n        <Button component={RouterLink} to={`/account/${context.account}`} variant=\"contained\" onClick={handleClose}>\r\n          My punks\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { getEmitter, getLogger, PunkTypes, TransformUtil } from 'vitepunks-common';\r\nimport { GET_PUNK_EVENTS_QUERY } from '../../../../queries';\r\nimport { GetPunkEvents, GetPunkEventsVariables } from '../../../../queries/__generated__/GetPunkEvents';\r\nimport { getPunkService } from '../../../../services/punk.service';\r\nimport { EventList } from '../../../common/components/event-list';\r\n\r\nconst logger = getLogger();\r\n\r\ninterface Props {\r\n  item: PunkTypes.Punk\r\n}\r\n\r\nexport const PunkActivity: React.FC<Props> = (props: Props) => {\r\n  const limit = 8;\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [error, setError] = useState<any>(undefined);\r\n  const [events, setEvents] = useState<PunkTypes.PunkEvent[]>([]);\r\n  const [newEvents, setNewEvents] = useState<PunkTypes.PunkEvent[]>([]);\r\n  const service = getPunkService();\r\n  const emitter = getEmitter();\r\n\r\n  const query = useQuery<GetPunkEvents, GetPunkEventsVariables>(GET_PUNK_EVENTS_QUERY, {\r\n    variables: {\r\n      id: props.item.id,\r\n      offset: 0,\r\n      limit: limit\r\n    },\r\n    fetchPolicy: 'network-only',\r\n    onCompleted: (data) => {\r\n      setEvents(data.punkEvents.events.map(e => TransformUtil.toPunkEvent(e)));\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsLoading(query.loading);\r\n  }, [query.loading]);\r\n\r\n  useEffect(() => {\r\n    setError(query.error);\r\n  }, [query.error]);\r\n\r\n  const fetchMoreDataAsync = async () => {\r\n    logger.info(\"fetchMoreDataAsync\", events.length)();\r\n    const blockHeight: Maybe<string> = query.data?.punkEvents.blockHeight.toString();\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await service.getEventsAsync(props.item.id, events.length, limit, blockHeight);\r\n      setHasMore(result.data.punkEvents.events.length >= limit);\r\n      if (result.data.punkEvents.events.length > 0) {\r\n        setEvents([\r\n          ...events,\r\n          ...result.data.punkEvents.events.map(e => TransformUtil.toPunkEvent(e))\r\n        ]);\r\n      }\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const refetch = query.refetch;\r\n\r\n  const refresh = useCallback(() => {\r\n    logger.info(\"Refreshing punk activity\")();\r\n    refetch();\r\n    setNewEvents([]);\r\n  }, [refetch]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (state: PunkTypes.DocumentState) => {\r\n      if (state === PunkTypes.DocumentState.Active) {\r\n        refresh();\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    };\r\n  }, [emitter, refresh]);\r\n\r\n  const addNewEvent = useCallback((e: PunkTypes.PunkChangedEvent) => {\r\n    setNewEvents([\r\n      TransformUtil.toPunkEvent(e),\r\n      ...newEvents\r\n    ]);\r\n  }, [newEvents]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.PunkChangedEvent) => {\r\n      logger.info(\"newPunkEvent\", e)();\r\n      if (e.punkId === parseInt(props.item.id)) {\r\n        addNewEvent(e);\r\n      }\r\n    }\r\n    logger.info('emitter.on', PunkTypes.GlobalEvent.PunkChanged)();\r\n    emitter.on(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    return () => {\r\n      logger.info('emitter.off', PunkTypes.GlobalEvent.PunkChanged)();\r\n      emitter.off(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    };\r\n  }, [emitter, props.item.id, addNewEvent]);\r\n\r\n  return (\r\n    <EventList\r\n      events={events}\r\n      newEvents={newEvents}\r\n      error={error}\r\n      loading={isLoading}\r\n      hasMore={hasMore}\r\n      fetchMoreDataAsync={fetchMoreDataAsync}>\r\n    </EventList>\r\n  )\r\n}\r\n","import { faCheck } from '@fortawesome/free-solid-svg-icons';\r\nimport { Button, Skeleton, Stack } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { ActionName, CommonConstants, CommonUtil, getLogger, PunkTypes } from \"vitepunks-common\";\r\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\r\nimport { getMarketService } from '../../../../services/market.service';\r\nimport { IconUtil } from '../../../../util/icon.util';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\r\nimport { FontAwesomeSvgIcon } from '../../../common/components/fa-icon';\r\nimport { PunkDialog } from '../dialog';\r\n\r\nconst logger = getLogger();\r\n\r\ntype ShowButtonState = {\r\n  showAny: boolean\r\n  showBuy: boolean\r\n  showClaim: boolean\r\n  showBid: boolean\r\n  showSell: boolean\r\n  showAcceptBid: boolean\r\n  showCancelBid: boolean\r\n  showCancelSale: boolean\r\n  showCancelGift: boolean\r\n}\r\n\r\ninterface Props {\r\n  loading: boolean\r\n  marketStarted: boolean\r\n  item: PunkTypes.Punk\r\n  refetchAsync: () => Promise<void>\r\n}\r\n\r\nexport const PunkInfoActions: React.FC<Props> = (props: Props) => {\r\n  const mounted = React.useRef(false);\r\n  const [hasOwner, setHasOwner] = useState<boolean>(false);\r\n  const [showAll] = useState<boolean>(false);\r\n  const [showButtonState, setShowButtonState] = useState<ShowButtonState>({\r\n    showAny: false,\r\n    showBuy: false,\r\n    showClaim: false,\r\n    showBid: false,\r\n    showSell: false,\r\n    showAcceptBid: false,\r\n    showCancelBid: false,\r\n    showCancelSale: false,\r\n    showCancelGift: false\r\n  });\r\n  const [dialogState, setDialogState] = useState<PunkTypes.PunkDialogState>({\r\n    type: PunkTypes.PunkDialogType.UNKNOWN,\r\n    open: false,\r\n    item: props.item\r\n  });\r\n  const context = useConnectedWeb3Context();\r\n  const service = getMarketService();\r\n\r\n  React.useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (mounted.current) {\r\n      let isOwner = props.item.owner?.toLowerCase() === context.account?.toLowerCase();\r\n      const state: ShowButtonState = {\r\n        showAny: false,\r\n        showBuy: false,\r\n        showClaim: false,\r\n        showBid: false,\r\n        showSell: false,\r\n        showAcceptBid: false,\r\n        showCancelBid: false,\r\n        showCancelSale: false,\r\n        showCancelGift: false\r\n      }\r\n      // setHasOwner\r\n      if (props.item.owner && !CommonUtil.isNullOrWhitespace(props.item.owner)) {\r\n        setHasOwner(true);\r\n      } else {\r\n        setHasOwner(false);\r\n      }\r\n      if (props.marketStarted && !CommonUtil.isNullOrWhitespace(context.account)) {\r\n        state.showAny = true;\r\n      }\r\n      if (!isOwner && props.item.offer && (CommonUtil.isNullOrWhitespace(props.item.offer.onlySellTo) || props.item.offer.onlySellTo?.toLowerCase() === context.account?.toLowerCase())) {\r\n        if (props.item.offer.minAmount.gt(0)) {\r\n          state.showBuy = true;\r\n        } else {\r\n          state.showClaim = true;\r\n        }\r\n      }\r\n      if (!isOwner && props.item.bid?.bidder.toLowerCase() !== context.account?.toLowerCase()) {\r\n        state.showBid = true;\r\n      }\r\n      if (isOwner && !props.item.offer) {\r\n        state.showSell = true;\r\n      }\r\n      if (isOwner && props.item.bid) {\r\n        state.showAcceptBid = true;\r\n      }\r\n      if (!isOwner && props.item.bid?.bidder.toLowerCase() === context.account?.toLowerCase()) {\r\n        state.showCancelBid = true;\r\n      }\r\n      if (isOwner && props.item.offer) {\r\n        if (props.item.offer.minAmount.gt(0)) {\r\n          state.showCancelSale = true;\r\n        } else {\r\n          state.showCancelGift = true;\r\n        }\r\n      }\r\n      setShowButtonState(state);\r\n    }\r\n  }, [props.marketStarted, props.item, context.account]);\r\n\r\n  const handleFailureAsync = async () => {\r\n    SnackbarUtil.enqueueMessage('Transaction failed');\r\n    try {\r\n      // Update actionPrice just in case\r\n      await service.getMarketInfoAsync();\r\n    } catch (error) {\r\n      logger.error(error)();\r\n    }\r\n  }\r\n\r\n  const handleClaimAsync = async () => {\r\n    try {\r\n      if (!props.item.offer) {\r\n        throw new Error(`${CommonConstants.PUNK_NAME} #${props.item.id} cannot be claimed`);\r\n      }\r\n      const success = await service.buyAsync(props.item.id, props.item.offer.minAmount.toFixed());\r\n      if (success) {\r\n        SnackbarUtil.enqueueMessage(`Congratulations! You claimed ${CommonConstants.PUNK_NAME} #${props.item.id}`);\r\n      } else {\r\n        await handleFailureAsync();\r\n      }\r\n    } catch (error) {\r\n      SnackbarUtil.enqueueError(error);\r\n    } finally {\r\n      await props.refetchAsync();\r\n    }\r\n  }\r\n\r\n  const handleOpenDialog = (_type: PunkTypes.PunkDialogType) => {\r\n    if (mounted.current) {\r\n      setDialogState({\r\n        ...dialogState,\r\n        type: _type,\r\n        open: true,\r\n        item: props.item\r\n      })\r\n    }\r\n  }\r\n\r\n  const dialogCallbackAsync = async (_success: boolean) => {\r\n    if (!_success) {\r\n      await handleFailureAsync();\r\n    }\r\n    await props.refetchAsync();\r\n  }\r\n\r\n  if (!hasOwner || !showButtonState.showAny) {\r\n    return (\r\n      <></>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {props.loading ? (\r\n        <Skeleton animation=\"wave\" height={30} />\r\n      ) : (\r\n        <>\r\n          <Stack spacing={1} direction=\"row\">\r\n            {(showAll || showButtonState.showBuy) && (\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<FontAwesomeSvgIcon icon={IconUtil.getBuyEventTypeIcon()} />}\r\n                onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.ACCEPT_OFFER) }}>\r\n                {ActionName.buy}\r\n              </Button>\r\n            )}\r\n            {(showAll || showButtonState.showClaim) && (\r\n              <ClickOnceButton\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<FontAwesomeSvgIcon icon={IconUtil.getGiftEventTypeIcon()} />}\r\n                callbackFn={handleClaimAsync}>\r\n                {ActionName.claim}\r\n              </ClickOnceButton>\r\n            )}\r\n            {(showAll || showButtonState.showBid) && (\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<FontAwesomeSvgIcon icon={IconUtil.getPunkEventTypeIcon(PunkTypes.PunkEventType.NewBid)} />}\r\n                onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.BID) }}>\r\n                {ActionName.bid}\r\n              </Button>\r\n            )}\r\n            {(showAll || showButtonState.showSell) && (\r\n              <>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<FontAwesomeSvgIcon icon={IconUtil.getOfferEventTypeIcon()} />}\r\n                  onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.OFFER) }}>\r\n                  {ActionName.sell}\r\n                </Button>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<FontAwesomeSvgIcon icon={IconUtil.getGiftEventTypeIcon()} />}\r\n                  onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.GIFT) }}>\r\n                  {ActionName.gift}\r\n                </Button>\r\n              </>\r\n            )}\r\n            {(showAll || showButtonState.showAcceptBid) && (\r\n              <Button\r\n                size=\"small\"\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<FontAwesomeSvgIcon icon={faCheck} />}\r\n                onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.ACCEPT_BID) }}>\r\n                {ActionName.acceptBid}\r\n              </Button>\r\n            )}\r\n          </Stack>\r\n          {(showAll || showButtonState.showCancelBid || showButtonState.showCancelSale || showButtonState.showCancelGift) && (\r\n            <Stack spacing={1} direction=\"row\" marginTop={1}>\r\n              {(showAll || showButtonState.showCancelBid) && (\r\n                <Button\r\n                  size=\"small\"\r\n                  variant=\"contained\"\r\n                  color=\"error\"\r\n                  startIcon={<FontAwesomeSvgIcon icon={IconUtil.getPunkEventTypeIcon(PunkTypes.PunkEventType.CancelBid)} />}\r\n                  onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.CANCEL_BID) }}>\r\n                  {ActionName.cancelBid}\r\n                </Button>\r\n              )}\r\n              {(showAll || showButtonState.showCancelSale) && (\r\n                <Button\r\n                  size=\"small\"\r\n                  variant=\"contained\"\r\n                  color=\"error\"\r\n                  startIcon={<FontAwesomeSvgIcon icon={IconUtil.getCancelSaleEventTypeIcon()} />}\r\n                  onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.CANCEL_OFFER) }}>\r\n                  {ActionName.cancelSale}\r\n                </Button>\r\n              )}\r\n              {(showAll || showButtonState.showCancelGift) && (\r\n                <Button\r\n                  size=\"small\"\r\n                  variant=\"contained\"\r\n                  color=\"error\"\r\n                  startIcon={<FontAwesomeSvgIcon icon={IconUtil.getCancelSaleEventTypeIcon()} />}\r\n                  onClick={() => { handleOpenDialog(PunkTypes.PunkDialogType.CANCEL_OFFER) }}>\r\n                  {ActionName.cancelGift}\r\n                </Button>\r\n              )}\r\n            </Stack>\r\n          )}\r\n        </>\r\n      )}\r\n      <PunkDialog state={dialogState} setState={setDialogState} callbackAsync={dialogCallbackAsync}></PunkDialog>\r\n    </>\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport { faGem, faSnowflake } from '@fortawesome/free-regular-svg-icons';\r\nimport { Verified } from '@mui/icons-material';\r\nimport { Box, Card, Chip, Link, Skeleton, Stack, styled, Typography, useMediaQuery, useTheme } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonConstants, CommonUtil, FormatUtil, getEmitter, getLogger, PunkTypes, TokenUtil, UrlUtil } from 'vitepunks-common';\r\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\r\nimport { usePunkInfo } from '../../../../hooks/punk.hook';\r\nimport { GET_MARKET_INFO_QUERY } from '../../../../queries';\r\nimport { GetMarketInfo } from '../../../../queries/__generated__/GetMarketInfo';\r\nimport { Alert } from '../../../common/components/alert';\r\nimport { ExplorerLink, ExplorerLinkType } from '../../../common/components/explorer-link';\r\nimport { FontAwesomeSvgIcon } from '../../../common/components/fa-icon';\r\nimport { BootstrapTooltip, ExtendedBootstrapTooltip } from '../../../common/components/tooltip';\r\nimport { PunkInfoActions } from '../info-actions';\r\n\r\nconst logger = getLogger();\r\n\r\nconst InfoContainer = styled(Card)(\r\n  ({ theme }) => `\r\n  position: relative;\r\n  overflow: auto;\r\n  width: 100%;\r\n  min-height: 400px;\r\n  background-color: rgba(255, 255, 255, 0.5);\r\n`,\r\n);\r\n\r\nconst BottomContent = styled(Box)(\r\n  ({ theme }) => `\r\n  position: absolute;\r\n  bottom: 24px;\r\n  left: 24px;\r\n  width: calc(100% - 48px);\r\n`,\r\n);\r\n\r\ninterface Props {\r\n  item: PunkTypes.Punk\r\n}\r\n\r\nexport const PunkInfo: React.FC<Props> = (props: Props) => {\r\n  const mounted = React.useRef(false);\r\n  const theme = useTheme();\r\n  const matches = useMediaQuery(theme.breakpoints.down('sm'));\r\n  const [marketStarted, setMarketStarted] = useState(false);\r\n  const { punkExtended, loading, error, refetchAsync } = usePunkInfo(props.item);\r\n  const query = useQuery<GetMarketInfo>(GET_MARKET_INFO_QUERY, {\r\n    fetchPolicy: 'network-only'\r\n  });\r\n  const context = useConnectedWeb3Context();\r\n  const emitter = getEmitter();\r\n\r\n  const refetch = query.refetch;\r\n\r\n  useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (error) {\r\n      logger.error(error)();\r\n    }\r\n  }, [error]);\r\n\r\n  useEffect(() => {\r\n    if (mounted.current) {\r\n      const info = query.data?.marketInfo;\r\n      if (info && mounted.current) {\r\n        setMarketStarted(info.marketStarted);\r\n      }\r\n    }\r\n  }, [query.data]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (state: PunkTypes.DocumentState) => {\r\n      if (mounted.current) {\r\n        if (state === PunkTypes.DocumentState.Active) {\r\n          refetchAsync();\r\n        }\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.DocumentVisibilityChanged, handleEvent);\r\n    };\r\n  }, [emitter, refetchAsync]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = () => {\r\n      if (mounted.current) {\r\n        refetch();\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.MarketChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.MarketChanged, handleEvent);\r\n    };\r\n  }, [emitter, refetch]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (e: PunkTypes.PunkChangedEvent) => {\r\n      if (mounted.current) {\r\n        if (e.punkId === parseInt(props.item.id)) {\r\n          refetchAsync();\r\n        }\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.PunkChanged, handleEvent);\r\n    };\r\n  }, [emitter, props.item.id, refetchAsync]);\r\n\r\n  const formatViteTooltip = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return TokenUtil.formatViteTooltip(bn);\r\n  }\r\n\r\n  const formatVite = (bn: PunkTypes.BigNumberWrapper) => {\r\n    return bn.gt(0) ? TokenUtil.formatVite(bn) : \"0\";\r\n  }\r\n\r\n  return (\r\n    <InfoContainer>\r\n      <Box sx={{ p: 3 }}>\r\n        <Stack direction=\"row\" justifyContent=\"space-between\">\r\n          <Typography variant=\"h5\" fontSize={matches ? \"1.25rem\" : \"1.5rem\"} color=\"primary\" paragraph>{CommonConstants.PUNK_NAME} #{props.item.id}</Typography>\r\n          <Box>\r\n            <ExtendedBootstrapTooltip title={<span>Rarity rank</span>} placement=\"bottom\" arrow>\r\n              <Chip size=\"small\" icon={<FontAwesomeSvgIcon icon={faGem} sx={{ fontSize: \"small\", ml: 1 }} />} sx={{ fontSize: \"0.7rem\" }} label={props.item.rank} />\r\n            </ExtendedBootstrapTooltip>\r\n          </Box>\r\n        </Stack>\r\n        {props.item.attributes.length > 0 && (\r\n          <Stack spacing={1} direction=\"row\" sx={{ mb: 2 }}>\r\n            {props.item.attributes?.map((a: string) => (\r\n              <Chip key={a} label={a} variant=\"outlined\" size={matches ? \"small\" : \"medium\"} />\r\n            ))}\r\n          </Stack>\r\n        )}\r\n        {error ? (\r\n          <Alert message={FormatUtil.formatMessage(error)} type=\"warning\"></Alert>\r\n        ) : (\r\n          <>\r\n            <Stack spacing={1} direction=\"row\" sx={{ mb: 2 }}>\r\n              <Typography display=\"inline\">\r\n                <b>Owner</b>:\r\n              </Typography>\r\n              {loading ? (\r\n                <Skeleton animation=\"wave\" height={24} width=\"40%\" sx={{ display: \"inline\" }} />\r\n              ) : (\r\n                <Typography display=\"inline\" component=\"div\">\r\n                  {!punkExtended.owner ? (\r\n                    <>\r\n                      Not minted yet.\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <ExplorerLink type={ExplorerLinkType.Address} value={punkExtended.owner}>\r\n                        <ExtendedBootstrapTooltip title={punkExtended.owner}>\r\n                          <Box sx={{ mr: 1 }} component=\"span\">{CommonUtil.truncateStringInTheMiddle(punkExtended.owner, 20, 5)}</Box>\r\n                        </ExtendedBootstrapTooltip>\r\n                      </ExplorerLink>\r\n                      {context.account && punkExtended.owner.toLowerCase() === context.account.toLowerCase() && (\r\n                        <Chip size=\"small\" icon={<Verified />} label=\"You own this punk\" variant=\"filled\" sx={{ borderRadius: 1 }} color=\"secondary\" />\r\n                      )}\r\n                    </>\r\n                  )}\r\n                </Typography>\r\n              )}\r\n            </Stack>\r\n            <Stack spacing={1} direction=\"row\" sx={{ mb: 2 }}>\r\n              <Typography display=\"inline\">\r\n                <b>Image</b>:\r\n              </Typography>\r\n              <Link underline=\"hover\" href={UrlUtil.getPunkIpfsUrlByCid(punkExtended.cid)} target=\"_blank\">\r\n                <ExtendedBootstrapTooltip title=\"Image stored on IPFS\">\r\n                  <Box>\r\n                    <FontAwesomeSvgIcon sx={{ fontSize: \"1.2em\", mr: 0.5, verticalAlign: \"text-bottom\" }} icon={faSnowflake} />\r\n                    <Box component=\"span\" >\r\n                      Frozen\r\n                    </Box>\r\n                  </Box>\r\n                </ExtendedBootstrapTooltip>\r\n              </Link>\r\n            </Stack>\r\n            <Stack spacing={1} direction=\"row\" sx={{ mb: 2 }}>\r\n              <Typography display=\"inline\">\r\n                <b>Current bid</b>:\r\n              </Typography>\r\n              {loading ? (\r\n                <Skeleton animation=\"wave\" height={24} width=\"60%\" sx={{ display: \"inline\" }} />\r\n              ) : (\r\n                <Typography display=\"inline\">\r\n                  {!punkExtended.bid ? (\r\n                    <>\r\n                      -\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <BootstrapTooltip title={formatViteTooltip(punkExtended.bid.amount)}>\r\n                        <span>{formatVite(punkExtended.bid.amount)} {CommonConstants.CURRENCY_NAME}</span>\r\n                      </BootstrapTooltip>\r\n                      &nbsp;by <ExplorerLink type={ExplorerLinkType.Address} value={punkExtended.bid.bidder}><ExtendedBootstrapTooltip title={punkExtended.bid.bidder}>\r\n                        <span>{CommonUtil.truncateStringInTheMiddle(punkExtended.bid.bidder, 10, 5)}</span>\r\n                      </ExtendedBootstrapTooltip></ExplorerLink>\r\n                    </>\r\n                  )}\r\n                </Typography>\r\n              )}\r\n            </Stack>\r\n            <Stack spacing={1} direction=\"row\" sx={{ mb: 2 }}>\r\n              {(loading || punkExtended.offer) ? (\r\n                <>\r\n                  <Typography display=\"inline\">\r\n                    {punkExtended.offer?.minAmount.lte(0) ? (\r\n                      <>\r\n                        <b>Gift</b>:\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <b>Buy price</b>:\r\n                      </>\r\n                    )}\r\n                  </Typography>\r\n                  {loading ? (\r\n                    <Skeleton animation=\"wave\" height={24} width=\"30%\" sx={{ display: \"inline\" }} />\r\n                  ) : (\r\n                    <Typography display=\"inline\">\r\n                      {!punkExtended.offer ? (\r\n                        <>\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <BootstrapTooltip title={formatViteTooltip(punkExtended.offer.minAmount)}>\r\n                            <span>{formatVite(punkExtended.offer.minAmount)} {CommonConstants.CURRENCY_NAME}</span>\r\n                          </BootstrapTooltip>\r\n                          {punkExtended.offer.onlySellTo && !CommonUtil.isNullOrWhitespace(punkExtended.offer.onlySellTo) && (\r\n                            <>\r\n                              &nbsp;(<ExplorerLink type={ExplorerLinkType.Address} value={punkExtended.offer.onlySellTo}><ExtendedBootstrapTooltip title={punkExtended.offer.onlySellTo}>\r\n                                <span>{CommonUtil.truncateStringInTheMiddle(punkExtended.offer.onlySellTo, 10, 5)}</span>\r\n                              </ExtendedBootstrapTooltip></ExplorerLink>)\r\n                            </>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                    </Typography>\r\n                  )}\r\n                </>\r\n              ) : (\r\n                <Chip label=\"Not for sale\" variant=\"filled\" sx={{ borderRadius: 1 }} />\r\n              )}\r\n            </Stack>\r\n          </>\r\n        )}\r\n        <BottomContent>\r\n          <PunkInfoActions loading={loading} marketStarted={marketStarted} item={punkExtended} refetchAsync={refetchAsync}></PunkInfoActions>\r\n        </BottomContent>\r\n      </Box>\r\n    </InfoContainer >\r\n  )\r\n}\r\n","import { useQuery } from '@apollo/client';\r\nimport { Container, Grid } from '@mui/material';\r\nimport React from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { FormatUtil } from 'vitepunks-common';\r\nimport { GET_PUNK_QUERY } from '../../../../queries';\r\nimport { GetPunk, GetPunkVariables } from '../../../../queries/__generated__/GetPunk';\r\nimport { Alert } from '../../../common/components/alert';\r\nimport { PunkActivity } from '../activity';\r\nimport { PunkImage } from '../image';\r\nimport { PunkInfo } from '../info';\r\n\r\nexport const PunkDetails: React.FC = (props: any) => {\r\n  const { id } = useParams();\r\n\r\n  const query = useQuery<GetPunk, GetPunkVariables>(GET_PUNK_QUERY, {\r\n    variables: {\r\n      id: id ?? \"-1\"\r\n    },\r\n    fetchPolicy: 'network-only'\r\n  });\r\n\r\n  const error = query.error;\r\n  const loading = query.loading;\r\n\r\n  if (error) {\r\n    return <Alert message={FormatUtil.formatMessage(error)} type=\"warning\"></Alert>\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {loading || !query.data ? (\r\n        <Alert message=\"Loading...\" type=\"default\" ></Alert>\r\n      ) : (\r\n        <Container maxWidth=\"lg\">\r\n          <Grid container spacing={3} direction=\"row\" marginBottom={3}>\r\n            <Grid item xs={12} md={5}>\r\n              <PunkImage image={query.data.punk.image} cid={query.data.punk.cid}></PunkImage>\r\n            </Grid>\r\n            <Grid item xs={12} md={7}>\r\n              <PunkInfo item={query.data.punk}></PunkInfo>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <PunkActivity item={query.data.punk}></PunkActivity>\r\n            </Grid>\r\n          </Grid>\r\n        </Container>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n","import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Slide, SlideProps } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { getEmitter, PunkTypes } from 'vitepunks-common';\r\n\r\nconst Transition = React.forwardRef(function Transition(props: SlideProps, ref: React.Ref<unknown>) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport const ConfirmTransactionDialog: React.FC = () => {\r\n  const [open, setOpen] = useState(false);\r\n  const emitter = getEmitter();\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (open: boolean) => {\r\n      setOpen(open)\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.ConfirmTransactionDialog, handleEvent)\r\n    return () => {\r\n      emitter.off(PunkTypes.GlobalEvent.ConfirmTransactionDialog, handleEvent)\r\n    };\r\n  }, [emitter, setOpen])\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      TransitionComponent={Transition}\r\n      keepMounted\r\n      onClose={handleClose}\r\n      style={{ zIndex: 9999 }}\r\n    >\r\n      <DialogTitle>ViteConnect</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          Please confirm transaction on VITE Wallet App\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} color=\"primary\">\r\n          Close\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import LaunchIcon from '@mui/icons-material/Launch';\r\nimport { Alert, Button, Container, Stack, Typography } from '@mui/material';\r\nimport { styled } from '@mui/system';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CommonConstants, getEmitter, getLogger, PunkTypes, TokenUtil } from 'vitepunks-common';\r\nimport { ClientConstants } from '../../../../common/constants';\r\nimport { getGeneralService } from '../../../../services/general.service';\r\nimport { BootstrapTooltip } from '../../../common/components/tooltip';\r\n\r\nconst logger = getLogger();\r\n\r\nconst QuotaContainer = styled(Container)(({ theme }) => (`\r\n  position: absolute;\r\n  top: 64px;\r\n  right: 0;\r\n  width: 100%;\r\n  z-index: 9999;\r\n`));\r\n\r\nconst QuotaAlert = styled(Alert)(({ theme }) => (`\r\n  float: right;\r\n  background-color: rgba(255, 255, 255);\r\n`));\r\n\r\nexport const ContractQuota: React.FC = (props: any) => {\r\n  const mounted = React.useRef(false);\r\n  const [quota, setQuota] = useState<PunkTypes.ViteQuotaResult>({\r\n    currentQuota: new PunkTypes.BigNumberWrapper(\"0\"),\r\n    maxQuota: new PunkTypes.BigNumberWrapper(\"0\"),\r\n    stakeAmount: new PunkTypes.BigNumberWrapper(\"0\")\r\n  });\r\n  const [showContainer, setShowContainer] = useState<boolean>(false);\r\n  const service = getGeneralService();\r\n  const emitter = getEmitter();\r\n\r\n  React.useEffect(() => {\r\n    mounted.current = true;\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let interval: NodeJS.Timeout;\r\n    if (showContainer) {\r\n      interval = setInterval(async () => {\r\n        const result = await service.getContractQuota();\r\n        logger.info(result.data.quota)();\r\n        if (mounted.current && result.data.quota) {\r\n          const quotaResult = result.data.quota as PunkTypes.ViteQuotaResult;\r\n          if (quotaResult.currentQuota.gte(quotaResult.maxQuota)) {\r\n            clearInterval(interval);\r\n            setShowContainer(false);\r\n          }\r\n          setQuota({\r\n            currentQuota: quotaResult.currentQuota,\r\n            maxQuota: quotaResult.maxQuota,\r\n            stakeAmount: quotaResult.stakeAmount\r\n          });\r\n        }\r\n      }, 2000);\r\n    }\r\n    return () => {\r\n      logger.info(\"clearInterval(interval)\")();\r\n      if (interval) {\r\n        clearInterval(interval);\r\n      }\r\n    }\r\n  }, [service, showContainer]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = (_address: string, _quota: PunkTypes.ViteQuotaResult) => {\r\n      if (mounted.current && ClientConstants.QUOTA_THRESHOLD.gte(_quota.currentQuota.minus(ClientConstants.QUOTA_THRESHOLD))) {\r\n        setQuota({\r\n          currentQuota: _quota.currentQuota,\r\n          maxQuota: _quota.maxQuota,\r\n          stakeAmount: _quota.stakeAmount\r\n        });\r\n        setShowContainer(true);\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.QuotaChanged, handleEvent);\r\n    return () => {\r\n      logger.info(\"emitter.off(GlobalEvent.QuotaChanged, handleEvent)\")();\r\n      emitter.off(PunkTypes.GlobalEvent.QuotaChanged, handleEvent);\r\n    };\r\n  }, [emitter]);\r\n\r\n  const formatBigNumber = (bn: PunkTypes.BigNumberWrapper, decimals: number = CommonConstants.CURRENCY_DECIMALS) => {\r\n    return TokenUtil.formatBigNumber(bn, 0, decimals);\r\n  }\r\n\r\n  if (!showContainer || quota.maxQuota.eq(0)) {\r\n    return (\r\n      <>\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <QuotaContainer maxWidth=\"xl\">\r\n      <QuotaAlert icon={false} severity=\"info\" onClose={() => { setShowContainer(false) }} sx={{ mt: 3, mr: 2 }}>\r\n        <Typography marginBottom={1} paragraph>\r\n          <b>Contract quota is recharging...</b>\r\n        </Typography>\r\n        <BootstrapTooltip title={formatBigNumber(quota.currentQuota)} placement=\"left\" arrow>\r\n          <Typography marginBottom={1} paragraph>\r\n            {formatBigNumber(quota.currentQuota, 6)} / {formatBigNumber(quota.maxQuota, 6)}\r\n          </Typography>\r\n        </BootstrapTooltip>\r\n        <Typography marginBottom={1}>You can help by staking {CommonConstants.CURRENCY_NAME}</Typography>\r\n        <Stack spacing={1} direction=\"row\">\r\n          <Typography>What does this mean?</Typography>\r\n          <Button variant=\"outlined\" size=\"small\" href={ClientConstants.QUOTA_WIKI_URL} target=\"_blank\" endIcon={<LaunchIcon />}>\r\n            More info\r\n          </Button>\r\n        </Stack>\r\n      </QuotaAlert>\r\n    </QuotaContainer>\r\n  )\r\n}\r\n","import { useSnackbar } from 'notistack';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { HashRouter, Route, Routes } from 'react-router-dom';\r\nimport { getEmitter, getLogger, PunkTypes } from 'vitepunks-common';\r\nimport { getClientConfig } from '../../../../common/config';\r\nimport { getCommonContext } from '../../../../contexts/common.context';\r\nimport { getWalletManager } from '../../../../storage';\r\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\r\nimport { WebUtil } from '../../../../util/web.util';\r\nimport { WalletConnectorFactory } from '../../../../wallet/factory';\r\nimport { AccountDetails } from '../../../account/components/details';\r\nimport { Test } from '../../../common/components/test';\r\nimport { TestImage } from '../../../common/components/test-image';\r\nimport { TestList } from '../../../common/components/test-list';\r\nimport { LandingMain } from '../../../landing/components/main';\r\nimport { Header } from '../../../layout/components/header';\r\nimport { MainScroll } from '../../../layout/components/main-scroll';\r\nimport { MainWrapper } from '../../../layout/components/main-wrapper';\r\nimport { MarketplaceBrowse } from '../../../marketplace/components/browse';\r\nimport { MarketplaceItem } from '../../../marketplace/components/item';\r\nimport { MintDialog } from '../../../punk/components/dialog-mint';\r\nimport { PunkDetails } from '../../../punk/components/main';\r\nimport { ConfirmTransactionDialog } from '../dialog-transaction';\r\nimport { ContractQuota } from '../quota';\r\n\r\nconst logger = getLogger();\r\n\r\nexport const Main: React.FC = (props: any) => {\r\n  const [visibility, setVisibility] = useState<PunkTypes.DocumentState>(PunkTypes.DocumentState.Unknown);\r\n  const emitter = getEmitter();\r\n  const context = getCommonContext();\r\n  const basename = getClientConfig().BASENAME ?? \"\";\r\n  SnackbarUtil.snackbar = useSnackbar();\r\n\r\n  useEffect(() => {\r\n    const handleEvent = async () => {\r\n      try {\r\n        const walletConnectorFactory = new WalletConnectorFactory(getWalletManager());\r\n        await context.datasource.initAsync(context.network, PunkTypes.ProviderType.WEBSOCKET, walletConnectorFactory.create(context.network));\r\n        emitter.emitVisibilityChanged(WebUtil.getDocumentState());\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n    emitter.on(PunkTypes.GlobalEvent.ReInit, handleEvent);\r\n    return () => {\r\n      logger.info(\"emitter.off(GlobalEvent.ReInit, handleEvent)\")();\r\n      emitter.off(PunkTypes.GlobalEvent.ReInit, handleEvent);\r\n    };\r\n  }, [emitter, context.datasource, context.network]);\r\n\r\n  useEffect(() => {\r\n    const handleEvent = async () => {\r\n      const state = WebUtil.getDocumentState();\r\n      if (visibility !== state) {\r\n        if (state === PunkTypes.DocumentState.Active) {\r\n          // await context.datasource.initAsync(context.network);\r\n        }\r\n        logger.info(`visibilitychange before ${visibility} after ${state}`)();\r\n        setVisibility(state);\r\n        emitter.emitVisibilityChanged(state);\r\n      }\r\n    }\r\n    document.addEventListener('visibilitychange', handleEvent);\r\n    return () => {\r\n      logger.info(\"removeEventListener visibilitychange\")();\r\n      document.removeEventListener('visibilitychange', handleEvent);\r\n    };\r\n  }, [emitter, visibility, context.datasource, context.network]);\r\n\r\n  return (\r\n    <MainWrapper>\r\n      <HashRouter basename={basename}>\r\n        <Header />\r\n        <MainScroll>\r\n          <ContractQuota></ContractQuota>\r\n          <Routes>\r\n            <Route path=\"/account/:address\" element={<AccountDetails />} />\r\n            <Route path=\"/marketplace\" element={<MarketplaceBrowse />} />\r\n            <Route path=\"/marketplace/:tab\" element={<MarketplaceBrowse />} />\r\n            <Route path=\"/marketplace/item/:id\" element={<MarketplaceItem />} />\r\n            <Route path=\"/punk/:id\" element={<PunkDetails />} />\r\n            <Route path=\"/test-image\" element={<TestImage />} />\r\n            <Route path=\"/test-list\" element={<TestList />} />\r\n            <Route path=\"/test\" element={<Test />} />\r\n            <Route path=\"/\" element={<LandingMain />} />\r\n          </Routes>\r\n          <MintDialog></MintDialog>\r\n          <ConfirmTransactionDialog></ConfirmTransactionDialog>\r\n        </MainScroll>\r\n      </HashRouter>\r\n    </MainWrapper>\r\n  )\r\n}\r\n","import { ApolloProvider } from '@apollo/client';\r\nimport { LocalizationProvider } from '@mui/lab';\r\nimport DateAdapter from '@mui/lab/AdapterMoment';\r\nimport { styled } from '@mui/material/styles';\r\nimport { SnackbarProvider } from 'notistack';\r\nimport React from 'react';\r\nimport { CommonConfig } from 'vitepunks-common';\r\nimport { getApolloClient } from './clients/apollo.client';\r\nimport { getClientConfig } from './common/config';\r\nimport { ClientConstants } from './common/constants';\r\nimport { ConnectedWeb3 } from './contexts/connectedWeb3';\r\nimport { Web3Provider } from './contexts/web3';\r\nimport { Main } from './features/main/components/main';\r\n\r\nconst Background = styled('div')(\r\n  ({ theme }) => `\r\n  width: 100%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n  background-image: url('${ClientConstants.BG_URL}');\r\n`,\r\n);\r\n\r\nconst App: React.FC = () => {\r\n  const clientConfig = getClientConfig();\r\n  CommonConfig.init(clientConfig);\r\n  const apolloClient = React.useMemo(() => getApolloClient(), [])\r\n  // Almost never return exponential notation\r\n  // BigNumber.config({ EXPONENTIAL_AT: 1e+9 })\r\n  return (\r\n    <LocalizationProvider dateAdapter={DateAdapter}>\r\n      <Background>\r\n        <SnackbarProvider maxSnack={3}>\r\n          <ApolloProvider client={apolloClient}>\r\n            <Web3Provider>\r\n              <ConnectedWeb3>\r\n                <Main />\r\n              </ConnectedWeb3>\r\n            </Web3Provider>\r\n          </ApolloProvider>\r\n        </SnackbarProvider>\r\n      </Background>\r\n    </LocalizationProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import CssBaseline from '@mui/material/CssBaseline';\r\nimport { ThemeProvider } from '@mui/material/styles';\r\nimport * as React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport theme from './theme';\r\n\r\nReactDOM.render(\r\n  <ThemeProvider theme={theme}>\r\n    {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\r\n    <CssBaseline />\r\n    <App />\r\n  </ThemeProvider>,\r\n  document.querySelector('#root'),\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./common.util\"), exports);\r\n__exportStar(require(\"./compress.util\"), exports);\r\n__exportStar(require(\"./emitter\"), exports);\r\n__exportStar(require(\"./ensure\"), exports);\r\n__exportStar(require(\"./explorer.util\"), exports);\r\n__exportStar(require(\"./file.util\"), exports);\r\n__exportStar(require(\"./filter.util\"), exports);\r\n__exportStar(require(\"./format.util\"), exports);\r\n__exportStar(require(\"./logger\"), exports);\r\n__exportStar(require(\"./retry.util\"), exports);\r\n__exportStar(require(\"./task\"), exports);\r\n__exportStar(require(\"./token.util\"), exports);\r\n__exportStar(require(\"./transform.util\"), exports);\r\n__exportStar(require(\"./types\"), exports);\r\n__exportStar(require(\"./url.util\"), exports);\r\n"],"sourceRoot":""}
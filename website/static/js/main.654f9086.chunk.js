(this["webpackJsonpvite-punks"]=this["webpackJsonpvite-punks"]||[]).push([[0],{10:function(e,t,n){"use strict";var r,a,c;n.d(t,"b",(function(){return r})),n.d(t,"h",(function(){return p})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"i",(function(){return b})),function(e){e[e.Unknown=0]="Unknown",e[e.Hidden=1]="Hidden",e[e.Active=2]="Active"}(r||(r={})),function(e){e.MetaMask="MetaMask"}(a||(a={})),function(e){e[e.ASC=0]="ASC",e[e.DESC=1]="DESC"}(c||(c={}));var i,s,o,u,l,d,f,h,b,p={Punk:"Punk",PunkEvent:"PunkEvent",MarketBid:"MarketBid",MarketOffer:"MarketOffer"};!function(e){e[e.ID=0]="ID",e[e.RANK=1]="RANK"}(i||(i={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.BID=1]="BID",e[e.OFFER=2]="OFFER",e[e.GIFT=3]="GIFT",e[e.ACCEPT_BID=4]="ACCEPT_BID",e[e.ACCEPT_OFFER=5]="ACCEPT_OFFER",e[e.CANCEL_BID=6]="CANCEL_BID",e[e.CANCEL_OFFER=7]="CANCEL_OFFER"}(s||(s={})),function(e){e[e.Unknown=0]="Unknown",e[e.Mint=1]="Mint",e[e.Offer=2]="Offer",e[e.NewBid=3]="NewBid",e[e.CancelBid=4]="CancelBid",e[e.Buy=5]="Buy",e[e.CancelOffer=6]="CancelOffer"}(o||(o={})),function(e){e.Items="items",e.Activity="activity"}(u||(u={})),function(e){e[e.Unknown=0]="Unknown",e[e.Start=1]="Start",e[e.Stop=2]="Stop",e[e.MintPrice=3]="MintPrice",e[e.ActionPrice=4]="ActionPrice"}(l||(l={})),function(e){e[e.Unknown=0]="Unknown",e[e.Offer=1]="Offer",e[e.Bid=2]="Bid"}(d||(d={})),function(e){e.ReInit="ReInit",e.DocumentVisibilityChanged="DocumentVisibilityChanged",e.ConfirmTransactionDialog="ConfirmTransactionDialog",e.ConnectWalletDialog="ConnectWalletDialog",e.QuotaChanged="QuotaChanged",e.PunkFilterValuesChanged="PunkFilterValuesChanged",e.MarketChanged="MarketChanged",e.PunkChanged="PunkChanged"}(f||(f={})),function(e){e.Account="Account",e.Contract="Contract"}(h||(h={})),function(e){e.MarketChanged="MarketChanged",e.PunkChanged="PunkChanged"}(b||(b={}))},12:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return f}));var r=n(23),a=n.n(r),c=n(10),i=n(41),s={APP_NAME:"VitePunks",PUNK_NAME:"VitePunk",USE_MOCK_DATASOURCE:!1,NETWORK_ID:2,WEB_WALLET_STORAGE_SPACE:"VITEPUNKS_WEB_WALLET",SESSION_WALLET_STORAGE_SPACE:"VITEPUNKS_SESSION_WALLET",BG_URL:"./assets/images/bg.png",ITEM_BG_URL:"./assets/images/item_bg.png",SAMPLE_PUNK_URL:"./assets/images/punk_8311.png",LANDING_IMAGE_URL:"./assets/images/landing.png",QUOTA_WIKI_URL:"https://github.com/vitepunks/resources/wiki",MARKET_DATA_URL:"https://raw.githubusercontent.com/vitepunks/analytics/master/market_data/raw.json",DISCORD_URL:"https://discord.gg/FsB2uZTn5u",TWITTER_URL:"https://twitter.com/VitePunks",GITHUB_URL:"https://github.com/vitepunks",QUOTA_THRESHOLD:new a.a("100000"),CDN_URL:"https://cdn.vitepunks.com/",IPFS_GATEWAY_URL:"https://cloudflare-ipfs.com/ipfs/",EXPLORER_URL:"https://buidl.viteview.xyz/#/",ZERO_ADDRESS:"vite_0000000000000000000000000000000000000000a4f3a0cb58",VITE_TOKEN_ID:"tti_5649544520544f4b454e6e40",CURRENCY_NAME:"VITE",CURRENCY_DECIMALS:18,TOTAL_MINTS:1e4},o=[{id:0,networkId:0,name:"UNKNOWN",rpcUrl:"",connectorUrl:""},{id:1,networkId:1,name:"MAINNET",rpcUrl:"wss://node.vite.net/gvite/ws",connectorUrl:"wss://biforst.vite.net"},{id:2,networkId:2,name:"TESTNET",rpcUrl:"wss://buidl.vite.net/gvite/ws",connectorUrl:"wss://biforst.vite.net"},{id:3,networkId:2,name:"TESTNET+MOCK",rpcUrl:"wss://buidl.vite.net/gvite/ws",connectorUrl:"wss://biforst.vite.net"},{id:4,networkId:5,name:"DEBUG",rpcUrl:"ws://localhost:23457",connectorUrl:"wss://biforst.vite.net"}],u=(i.a.ASC,i.a.DESC,[{name:"Id",type:i.b.ID},{name:"Rank",type:i.b.RANK},{name:"Bid",type:i.b.BID},{name:"Price",type:i.b.OFFER}]),l=[{name:"Unknown",type:c.g.Unknown.toString()},{name:"Mint",type:c.g.Mint.toString()},{name:"List",type:c.g.Offer.toString()},{name:"New bid",type:c.g.NewBid.toString()},{name:"Cancel bid",type:c.g.CancelBid.toString()},{name:"Buy",type:c.g.Buy.toString()},{name:"Clear",type:c.g.CancelOffer.toString()}],d={unknown:"Unknown",list:"List",bid:"Bid",buy:"Buy",sale:"Sale",sell:"Sell",gift:"Gift",listing:"Listing",transfer:"Transfer",claim:"Claim",accept:"Accept",acceptBid:"Accept bid",cancel:"Cancel",cancelBid:"Cancel bid",cancelSale:"Cancel sale",cancelGift:"Cancel gift"},f={sortBy:i.b.ID,orderBy:i.a.DESC,search:""}},146:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return A}));var r=n(21),a=n(4),c=n(3),i=n.n(c),s=n(5),o=n(19),u=n(20),l=n(49),d=n(23),f=n.n(d),h=n(12),b=n(18),p=n(33),j=n(26),v=n(208),m=n(209),O=n(52),g=n(279).WS_RPC,x=Object(j.a)(),y={retryTimes:10,retryInterval:1e3},k=function(){function t(){var e=this;Object(o.a)(this,t),this._network=void 0,this._isConnected=void 0,this._connector=void 0,this._provider=void 0,this._client=void 0,this._emitter=void 0,this._walletManager=void 0,this._connectorFactory=void 0,this.initAsync=function(){var t=Object(s.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){x.info("initAsync",n)(),e._network=n,e._connector=e._connectorFactory.create(n),e._provider=new g(n.rpcUrl,1e4,y);var a=!1;e._provider.on("close",(function(){x.info("Vite provider closed")(),e._emitter.emitReInit()})),e._provider.on("error",(function(t){x.error("Vite provider error",a)(),a||(e._isConnected=!1,r(t))})),e._client=new l.ViteAPI(e._provider,(function(){x.info("ViteAPI connected to ".concat(e._provider.path))(),a=!0,e._isConnected=!0,t()}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this._isConnected=!1,this._emitter=Object(p.a)(),this._walletManager=Object(O.h)(),this._connectorFactory=new O.e(this._walletManager)}return Object(u.a)(t,[{key:"isConnected",get:function(){return this._isConnected}},{key:"connector",get:function(){return this._connector}},{key:"dispose",value:function(){var e;x.info("Disposing ViteClient")(),null===(e=this._provider)||void 0===e||e.destroy(),this._isConnected=!1}},{key:"encodeParameter",value:function(e,t){return l.abi.encodeParameter(e,t)}},{key:"encodeLogSignature",value:function(e,t){return l.abi.encodeLogSignature(e,t)}},{key:"requestAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r,a,c,o=this,u=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=u.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=u[a];if(!this._isConnected||!this._client){e.next=6;break}return c=v.a.promiseRetry(Object(s.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(n=o._client).request.apply(n,[t].concat(r)).catch(function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===t||void 0===t||null===(n=t.message)||void 0===n?void 0:n.toLowerCase().includes("connection error"))){e.next=8;break}return x.error("CONNECTION ERROR -> reconnect",o._network)(),o._emitter.emitReInit(),e.next=5,b.a.timeout(3e3);case 5:case 8:throw t;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))),e.abrupt("return",c);case 6:throw new Error("Vite client is not ready to make requests.");case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSnapshotChainHeightAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestAsync("ledger_getSnapshotChainHeight");case 2:return t=e.sent,e.abrupt("return",new f.a(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccountBlockHeightAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestAsync("ledger_getAccountInfoByAddress",t);case 2:return n=e.sent,e.abrupt("return",new f.a(n.blockCount));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBalanceAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestAsync("ledger_getAccountInfoByAddress",t);case 2:return n=e.sent,e.abrupt("return",new f.a(n.balanceInfoMap[h.b.VITE_TOKEN_ID].balance));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQuotaAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestAsync("contract_getQuotaByAccount",t);case 2:return n=e.sent,e.abrupt("return",{currentQuota:new f.a(n.currentQuota),maxQuota:new f.a(n.maxQuota),stakeAmount:new f.a(n.stakeAmount)});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var a,c,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>3&&void 0!==s[3]?s[3]:h.b.VITE_TOKEN_ID,c=l.accountBlock.createAccountBlock("send",{address:t.address,toAddress:n,tokenId:a,amount:r}),e.abrupt("return",this.sendAccountBlockAsync(t,c));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"stakeForQuotaAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.accountBlock.createAccountBlock("stakeForQuota",{address:t.address,beneficiaryAddress:n,amount:r}),e.abrupt("return",this.sendAccountBlockAsync(t,a));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"callContractAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r,a,c){var s,o,u,d=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>5&&void 0!==d[5]?d[5]:"0",o=d.length>6&&void 0!==d[6]?d[6]:h.b.VITE_TOKEN_ID,u=l.accountBlock.createAccountBlock("callContract",{address:t.address,abi:r,methodName:n,tokenId:o,amount:s,toAddress:c,params:a}),e.abrupt("return",this.sendAccountBlockAsync(t,u));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,c){return e.apply(this,arguments)}}()},{key:"createContractAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 1,10,1,a=l.accountBlock.createAccountBlock("createContract",{address:t.address,abi:n,code:r,responseLatency:1,params:[],quotaMultiplier:10,randomDegree:1}),e.abrupt("return",this.sendAccountBlockAsync(t,a));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"callOffChainMethodAsync",value:function(){var t=Object(s.a)(i.a.mark((function t(n,r,a,c){var s,o,u,d,f,h,b,p,j;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=l.abi.encodeFunctionCall(r,c),o=e.from(s,"hex").toString("base64"),t.next=4,this.requestAsync("contract_callOffChainMethod",{selfAddr:n,offChainCode:a,data:o});case 4:if(!(u=t.sent)){t.next=13;break}for(d=e.from(u,"base64").toString("hex"),f=[],h=0;h<r.outputs.length;h++)f.push(r.outputs[h].type);if(b=l.abi.decodeParameters(f,d),p=[],b)for(j=0;j<r.outputs.length;j++)r.outputs[j].name?p.push({name:r.outputs[j].name,value:b[j]}):p.push({name:"",value:b[j]});return t.abrupt("return",p);case 13:return t.abrupt("return","");case 14:case"end":return t.stop()}}),t,this)})));return function(e,n,r,a){return t.apply(this,arguments)}}()},{key:"decodeVmLog",value:function(e,t){for(var n=e.topics,r=0;r<t.length;r++){var a=t[r];if(l.abi.encodeLogSignature(a)===n[0]){var c=this.decodeVmLogByAbiItem(e,a);if(c)return c}}}},{key:"decodeVmLogByAbiItem",value:function(e,t){if(e&&e.data&&e.topics){var n=e.topics;return{topic:n[0],args:l.abi.decodeLog(t.inputs,l.utils._Buffer.from(e.data,"base64").toString("hex"),n.slice(1)),event:t.name}}}},{key:"getEventsByBlockAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r,c){var s,o,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.gt(r)){e.next=3;break}return x.info("getEventsByBlockAsync ".concat(n.toFixed()," > ").concat(r.toFixed()))(),e.abrupt("return",[]);case 3:return s={addressHeightRange:Object(a.a)({},t,{fromHeight:n.toFixed(),toHeight:r.toFixed()}),topics:c},e.prev=4,e.next=7,this.requestAsync("ledger_getVmLogsByFilter",s);case 7:return o=e.sent,e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(4),u=n.plus(r).div(2),x.info("Divide and conquer block fromHeight: ".concat(n.toFixed()," toHeight: ").concat(r.toFixed()," midHeight: ").concat(u.toFixed()))(),e.next=17,this.getEventsByBlockAsync(t,u.plus(1),r,c);case 17:return l=e.sent,e.abrupt("return",l);case 19:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"createAddressListenerAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={addressHeightRange:Object(a.a)({},t,{fromHeight:"0",toHeight:"0"})},e.next=3,null===(n=this._client)||void 0===n?void 0:n.subscribe("createVmlogSubscription",r);case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeListener",value:function(e){var t;x.info("removeListener")(),null===(t=this._client)||void 0===t||t.unsubscribe(e)}},{key:"waitForNextVmLogEventAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.info("waitForNextVmLogEvent")(),e.abrupt("return",new Promise(function(){var e=Object(s.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.on(function(){var e=Object(s.a)(i.a.mark((function e(t){var c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===t.length){e.next=3;break}throw console.log(t),new Error("Unexpected results");case 3:c=t[t.length-1],s=r.decodeVmLog(c.vmlog,n),x.info("vmLog",s)(),a(s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"waitForAccountBlockAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(i.a.mark((function e(c,o){var u,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=void 0,l=void 0,d=Date.now(),new m.a(Object(s.a)(i.a.mark((function e(){var c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(Date.now()-d>=1e4)){e.next=3;break}throw new Error("Task timed out");case 3:return e.next=5,a.requestAsync("ledger_getAccountBlockByHeight",t,n);case 5:if(c=e.sent){e.next=8;break}return e.abrupt("return",!0);case 8:if(s=c.receiveBlockHash){e.next=11;break}return e.abrupt("return",!0);case 11:return e.next=13,a.requestAsync("ledger_getAccountBlockByHash",s);case 13:if(o=e.sent){e.next=16;break}return e.abrupt("return",!0);case 16:return u=Object(r.a)(Object(r.a)({},a.getAccountBlockStatus(o)),{},{accountBlock:o}),e.abrupt("return",!1);case 20:return e.prev=20,e.t0=e.catch(0),l=e.t0,e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,null,[[0,20]])}))),500).start((function(){l?o(l):c(u)}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"receiveTransactionAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}return e.next=3,this.requestAsync("ledger_getUnreceivedBlocksByAddress",t.address,0,1);case 3:(r=e.sent)&&r.length>0&&(n=r[0]);case 5:if(n){e.next=8;break}return x.info("No Unreceived Blocks: ".concat(t.address))(),e.abrupt("return");case 8:return a=l.accountBlock.createAccountBlock("receive",{address:t.address,sendBlockHash:n.hash}),e.abrupt("return",this.sendAccountBlockAsync(t,a));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"receiveAllOnroadTxAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=10,e.next=3,this.requestAsync("ledger_getUnreceivedBlocksByAddress",t.address,0,n);case 3:r=e.sent,a=0;case 5:if(!(a<r.length)){e.next=12;break}return c=r[a],e.next=9,this.receiveTransactionAsync(t,c);case 9:a++,e.next=5;break;case 12:if(!(r.length>=n)){e.next=15;break}return e.next=15,this.receiveAllOnroadTxAsync(t);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendAccountBlockAsync",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof O.g)){e.next=10;break}return n=n.setProvider(this._client).setPrivateKey(t.privateKey),e.next=4,n.autoSetPreviousAccountBlock();case 4:return e.next=6,n.sign().send();case 6:return r=e.sent,e.abrupt("return",r);case 10:if(!(t instanceof O.b)){e.next=30;break}if(!this.connector){e.next=27;break}return this._emitter.emitConfirmTransactionDialog(!0),e.prev=13,e.next=16,this.connector.sendTransactionAsync({block:n.accountBlock});case 16:return a=e.sent,this._emitter.emitConfirmTransactionDialog(!1),e.abrupt("return",a);case 21:throw e.prev=21,e.t0=e.catch(13),this._emitter.emitConfirmTransactionDialog(!1),e.t0;case 25:e.next=28;break;case 27:throw new Error("Connector is not defined");case 28:e.next=31;break;case 30:throw new Error("Account not supported");case 31:case"end":return e.stop()}}),e,this,[[13,21]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAccountBlockStatus",value:function(e){var t=this.resolveAccountBlockData(e),n="";switch(t){case 0:n="0, Execution succeed";break;case 1:n="1, Execution reverted";break;case 2:n="2, Max call depth exceeded"}return{status:t,statusTxt:n}}},{key:"resolveAccountBlockData",value:function(e){if(4!==e.blockType&&5!==e.blockType||!e.data)return 0;var t=l.utils._Buffer.from(e.data,"base64");return 33!==t.length?0:t[32]}}]),t}(),w=new k,A=function(){return w}}).call(this,n(194).Buffer)},18:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r=n(3),a=n.n(r),c=n(5),i=n(19),s=n(20),o=n(176),u=n.n(o),l=n(294),d=n(10),f=function(){function t(){Object(i.a)(this,t)}return Object(s.a)(t,null,[{key:"isString",value:function(e){return"string"===typeof e||e instanceof String}},{key:"isNumber",value:function(e){return!isNaN(parseInt(e))&&isFinite(e)}},{key:"isNullOrWhitespace",value:function(e){return!t.isString(e)||(null===e||void 0===e||""===e.trim())}},{key:"isNullOrDefault",value:function(e,n){return t.isNullOrWhitespace(e)||e===n}},{key:"timeout",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"toJsonString",value:function(e){return JSON.stringify(e,null,2)}},{key:"toUint8Array",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";return new Uint8Array(e.from(t,n))}},{key:"imageUrlToBlob",value:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.abrupt("return",e.sent.blob());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"random",value:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},{key:"calculatePercentage",value:function(e,t){try{if(e&&t)return Math.floor(u()(e).div(u()(t)).mul(100).toNumber())}catch(n){}return 0}},{key:"calculateMaxRows",value:function(e,t,n){return Math.min(Math.min(e-t*n,t),e)}},{key:"uuid",value:function(){return Object(l.a)()}},{key:"appendPath",value:function(e,n){if(!e||!n||t.isNullOrWhitespace(e)||t.isNullOrWhitespace(n))return e;var r=n.startsWith("/")?n.substring(1,n.length):n;return e.endsWith("/")?e+r:e+"/"+r}}]),t}();f.truncateString=function(e,t){return e&&t<e.length?"".concat(e.substring(0,t),"..."):e},f.truncateStringInTheMiddle=function(e,t,n){if(e&&t+n<e.length)return"".concat(e.substring(0,t),"...").concat(e.substring(e.length-n,e.length));return e},f.getDocumentState=function(){return"hidden"===document.visibilityState?d.b.Hidden:d.b.Active}}).call(this,n(194).Buffer)},208:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3),a=n.n(r),c=n(5),i=n(19),s=n(20),o=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,null,[{key:"promiseRetry",value:function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c,i=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:5,c=i.length>2?i[2]:void 0,t.next=4,new Promise((function(e){return setTimeout(e,1e3*(5-r))}));case 4:return t.abrupt("return",r?n().catch((function(t){return e.promiseRetry(n,r-1,t)})):Promise.reject(c));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}()},209:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3),a=n.n(r),c=n(5),i=n(19),s=n(20),o=function(){function e(t,n){return Object(i.a)(this,e),this._taskTimer=void 0,this._taskInterval=void 0,this._task=void 0,this._callback=void 0,this._task=t,this._taskInterval=n,this}return Object(s.a)(e,[{key:"_run",value:function(){var e=this;this._taskTimer=setTimeout(Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._task){t.next=3;break}return e._onStop(),t.abrupt("return");case 3:return t.next=5,e._task();case 5:if(t.sent){t.next=8;break}return e._onStop(),t.abrupt("return");case 8:e._run();case 9:case"end":return t.stop()}}),t)}))),this._taskInterval)}},{key:"_onStop",value:function(){this._callback&&this._callback()}},{key:"start",value:function(e){this._callback=e,this._taskTimer||this._run()}},{key:"stop",value:function(){this._onStop(),this._taskTimer&&(window.clearTimeout(this._taskTimer),this._taskTimer=void 0)}}]),e}()},26:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(20),a=n(19),c=n(38),i=n(18),s=function e(t){Object(a.a)(this,e),this.banner=void 0,this.args=void 0,Object.assign(this,t)},o=function(){},u=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,[{key:"isEnabled",get:function(){return c.a.ENABLE_LOGGER}},{key:"timestamp",value:function(e){return"[".concat(e," ").concat((new Date).toLocaleTimeString(),"]")}},{key:"createLogEventModel",value:function(e){for(var t=function(e){return i.a.isString(e)?e:e instanceof Error?e.message:i.a.toJsonString(e)},n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var c=new s({banner:this.timestamp(e),args:null===r||void 0===r?void 0:r.map((function(e){return Array.isArray(e)?e.map((function(e){return t(e)})):t(e)}))});return c}},{key:"debug",get:function(){var e=this;return this.isEnabled?function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var c=e.createLogEventModel("DEBUG",r);return(t=Function.prototype.bind).call.apply(t,[console.debug,console,c.banner].concat(r))}:function(){return o}}},{key:"info",get:function(){var e=this;return this.isEnabled?function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var c=e.createLogEventModel("INFO",r);return(t=Function.prototype.bind).call.apply(t,[console.info,console,c.banner].concat(r))}:function(){return o}}},{key:"warn",get:function(){var e=this;return this.isEnabled?function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var c=e.createLogEventModel("WARN",r);return(t=Function.prototype.bind).call.apply(t,[console.warn,console,c.banner].concat(r))}:function(){return o}}},{key:"error",get:function(){var e=this;return function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(null===r||void 0===r?void 0:r.length)>0&&(i.a.isString(r[0])||r.push("(See console output for more information.)"));var c=e.createLogEventModel("ERROR",r);return(t=Function.prototype.bind).call.apply(t,[console.error,console,c.banner].concat(r))}}}]),e}(),l=new u,d=function(){return l}},283:function(e,t,n){},284:function(e,t,n){"use strict";n.r(t);var r,a=n(359),c=n(375),i=n(1),s=n.n(i),o=n(78),u=n.n(o),l=n(358),d=n(356),f=n(357),h=n(7),b=n(159),p=n(21),j=n(19),v=n(20),m=n(46),O=n(45),g=n(361),x=n(363),y=n(341),k=n(23),w=n.n(k),A=n(364),_=n(3),C=n.n(_),E=n(5),I=n(38),S=n(12),B=n(51),N=n(28),M=n(203),P=n(100),T=n(18),F=n(26),R=Object(F.a)(),L=new(function(){function e(){Object(j.a)(this,e),this._index=void 0,this.clear()}return Object(v.a)(e,[{key:"clear",value:function(){this._index=new M.Document({document:{id:"id",tag:"attributes",index:["id"]}})}},{key:"index",value:function(e){if(e){this.clear();var t,n=Object(B.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._index.add(r)}}catch(a){n.e(a)}finally{n.f()}}}},{key:"search",value:function(e,t){try{if(!t||T.a.isNullOrWhitespace(e))return t;if(T.a.isNumber(e)){var n=parseInt(e);if(n>0){var r=t[n-1];return r?[r]:[]}}var a=this._index.search({tag:e.split(","),limit:1e4}).map((function(e){return e.result}));if(a.length>0){if(1===a.length)return this.enrich(a[0].map((function(e){return e.toString()})),t);var c=P.intersection.apply(void 0,Object(N.a)(a));return this.enrich(c.map((function(e){return e.toString()})),t)}return}catch(i){return void R.error(i)()}}},{key:"enrich",value:function(e,t){return Object(P.intersectionWith)(t,e,(function(e,t){return e.id===t}))}}]),e}()),D=n(177),U=function(){function e(){Object(j.a)(this,e)}return Object(v.a)(e,null,[{key:"compress",value:function(e){return D.a.gzip(e,{to:"string"})}},{key:"decompress",value:function(e){return D.a.ungzip(e,{to:"string"})}}]),e}(),W=n(33),q=function(){function e(){Object(j.a)(this,e)}return Object(v.a)(e,null,[{key:"notNull",value:function(e,t,n){if(null===e||void 0===e)throw n?new Error(n):new Error("Unexpected null exception. "+t)}},{key:"notNullOrWhiteSpace",value:function(e,t,n){if(null===e||void 0===e||""===(null===e||void 0===e?void 0:e.trim()))throw n?new Error(n):new Error("Unexpected null exception. "+t)}},{key:"maxLength",value:function(e,t,n){if(e&&e.length>n)throw new Error("".concat(t," exceeds the maximum length of ").concat(n))}}]),e}(),z=n(205),V=n.n(z),H=function e(){Object(j.a)(this,e)},Q=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"readFileAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n,r,a=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"utf8",e.next=3,fetch(t);case 3:r=e.sent,e.t0=n,e.next="binary"===e.t0?7:8;break;case 7:return e.abrupt("return",r.arrayBuffer());case 8:return e.abrupt("return",r.text());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(H),G=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"readFileAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n,r=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"utf8",e.abrupt("return",Promise.resolve(V.a.readFileSync(t,n)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(H);!function(e){e[e.Browser=0]="Browser",e[e.Local=1]="Local"}(r||(r={}));var $,K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Browser;return e===r.Local?new G:new Q},Y=n(41),J=function(){function e(){Object(j.a)(this,e)}return Object(v.a)(e,null,[{key:"sortPunks",value:function(e,t,n){if(!n||!e||!t)return n;switch(e){case Y.b.ID:return Object(P.orderBy)(n,(function(e){return Number(e.id)}),t===Y.a.ASC?"asc":"desc");case Y.b.RANK:return Object(P.orderBy)(n,(function(e){return e.rank}),t===Y.a.ASC?"asc":"desc");case Y.b.BID:return n.filter((function(e){return!!e.bid&&e.bid.amount.gt(0)})).sort((function(e,n){var r,a,c,i,s=null!==(r=null===(a=e.bid)||void 0===a?void 0:a.amount)&&void 0!==r?r:new w.a(0),o=null!==(c=null===(i=n.bid)||void 0===i?void 0:i.amount)&&void 0!==c?c:new w.a(0);return t===Y.a.ASC?s.gt(o)?1:-1:s.gt(o)?-1:1}));case Y.b.OFFER:return n.filter((function(e){return!!e.offer&&e.offer.minAmount.gt(0)})).sort((function(e,n){var r,a,c,i,s=null!==(r=null===(a=e.offer)||void 0===a?void 0:a.minAmount)&&void 0!==r?r:new w.a(0),o=null!==(c=null===(i=n.offer)||void 0===i?void 0:i.minAmount)&&void 0!==c?c:new w.a(0);return t===Y.a.ASC?s.gt(o)?1:-1:s.gt(o)?-1:1}));default:return n}}}]),e}(),Z=n(63),X=n.n(Z),ee=function(){function e(){Object(j.a)(this,e),X.a.locale(navigator.language)}return Object(v.a)(e,[{key:"setLocale",value:function(e){X.a.locale(e)}},{key:"get",value:function(){return X()()}},{key:"getFromUnix",value:function(e){return X.a.unix(e)}},{key:"getFromMilliseconds",value:function(e){return X()(e,"x")}},{key:"getLocal",value:function(e){return X.a.utc(e).local()}},{key:"getLocalTime",value:function(e){return this.getLocal(e).format("LTS")}},{key:"getLocalDate",value:function(e){return this.getLocal(e).format("L")}},{key:"getLocalFormatted",value:function(e){return this.getLocalTime(e)+" "+this.getLocalDate(e)}},{key:"getLocalReverseFormatted",value:function(e){return this.getLocalDate(e)+" "+this.getLocalTime(e)}},{key:"getDuration",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"seconds",n=X()(e).unix()-X()().unix();return X.a.duration(n,t)}},{key:"isExpired",value:function(e){try{return!!e&&X.a.utc().unix()>=Number(e)}catch(t){return!1}}}]),e}(),te=n(10),ne=n(52),re=Object(F.a)(),ae=function(){function e(){Object(j.a)(this,e),this._punkInfos=void 0,this._accountAuctions=new Map,this._emitter=void 0,this._moment=new ee,this._fileUtil=void 0,this._actionPrice=void 0,this._mintPrice=void 0,this._walletManager=void 0,this._punkSearch=void 0,this._punkAttributes=void 0,this._punks=void 0,this._punksFiltered=void 0,this._emitter=Object(W.a)(),this._fileUtil=K(),this._walletManager=Object(ne.h)(),this._punkSearch=L,this.clear()}return Object(v.a)(e,[{key:"clear",value:function(){this._punkAttributes=[],this._punks=[],this._punksFiltered={sortBy:S.c.sortBy,orderBy:S.c.orderBy,searchTerm:S.c.search,items:[]}}},{key:"initPunkAttributesAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fileUtil.readFileAsync("./assets/data/punk_attributes.json?v=1.2.10");case 2:t=e.sent,t=JSON.parse(t),this._punkAttributes=t;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initPunksAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n,r,a,c,i,s,o,u,l;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fileUtil.readFileAsync("./assets/data/punks.gz?v=1.2.10","binary");case 2:for(t=e.sent,t=JSON.parse(U.decompress(T.a.toUint8Array(t))),(n=this._punkInfos)&&n.length===S.b.TOTAL_MINTS||(re.info("Invalid punk infos")(),n=this.getDefaultPunkInfos()),r=0;r<t.length;r++)o=t[r],u=n[r],l={__typename:te.h.Punk,id:o.index.toString(),rank:o.rank,image:o.image,cid:null!==(a=o.cid)&&void 0!==a?a:"0",attributes:o.attributes,owner:null!==(c=u.owner)&&void 0!==c?c:null,bid:null!==(i=u.bid)&&void 0!==i?i:null,offer:null!==(s=u.offer)&&void 0!==s?s:null},this._punks.push(l),this._punksFiltered.orderBy===Y.a.ASC?this._punksFiltered.items.push(l):this._punksFiltered.items.unshift(l);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updatePunksAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n,r,a,c,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._punkInfos)for(t=0;t<this._punks.length;t++)c=this._punks[t],i=this._punkInfos[t],c.owner=null!==(n=i.owner)&&void 0!==n?n:null,c.bid=null!==(r=i.bid)&&void 0!==r?r:null,c.offer=null!==(a=i.offer)&&void 0!==a?a:null;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initAccountAuctionsAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n,r,a,c,i,s=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._accountAuctions=new Map,t=function(e,t){var n=s._accountAuctions.get(e);n||(n=[],s._accountAuctions.set(e,n)),n.push(t)},n=Object(B.a)(this._punks);try{for(n.s();!(r=n.n()).done;)(a=r.value).owner&&!T.a.isNullOrWhitespace(a.owner)&&(a.bid&&a.bid.timestamp&&(c={timestamp:a.bid.timestamp,auctionType:te.a.Bid,punkId:parseInt(a.id),owner:a.owner,amount:a.bid.amount,address:a.bid.bidder},t(a.owner,c),c.address&&!T.a.isNullOrWhitespace(c.address)&&c.address!==a.owner&&t(c.address,c)),a.offer&&a.offer.timestamp&&(i={timestamp:a.offer.timestamp,auctionType:te.a.Offer,punkId:parseInt(a.id),owner:a.owner,amount:a.offer.minAmount,address:a.offer.onlySellTo},t(a.owner,i),i.address&&!T.a.isNullOrWhitespace(i.address)&&i.address!==a.owner&&t(i.address,i)))}catch(o){n.e(o)}finally{n.f()}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initBaseAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re.info("Init BaseDataSource")(),this._moment=new ee,this.clear(),e.next=5,this.initAsync(t);case 5:return e.next=7,this.initPunkAttributesAsync();case 7:return e.next=9,this.initPunkInfosAsync();case 9:return e.next=11,this.initPunksAsync();case 11:this._punkSearch.index(this._punks);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){re.info("Disposing BaseDataSource")(),this.disposeProtected()}},{key:"getAccount",value:function(){var e=this._walletManager.getActiveAccount();return q.notNull(e,"account","Please connect your wallet first."),e}},{key:"getPunkAttributesAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._punkAttributes);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPunkAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.a.isNumber(t)){e.next=2;break}throw new Error("Invalid punk identifier.");case 2:if(!((n=parseInt(t)-1)<0||n>=this._punks.length)){e.next=5;break}throw new Error("Punk does not exist.");case 5:return e.abrupt("return",this._punks[n]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPunksAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r,a,c){var i,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._punksFiltered.searchTerm===c&&this._punksFiltered.sortBy===r&&this._punksFiltered.orderBy===a||(re.info("limit",t,"offset",n,"sort",r,"order",a)(),this._punksFiltered.searchTerm=c,this._punksFiltered.items=null!==(i=this._punkSearch.search(c,this._punks))&&void 0!==i?i:[],this._punksFiltered.sortBy=r,this._punksFiltered.orderBy=a,this._punksFiltered.items=null!==(s=J.sortPunks(this._punksFiltered.sortBy,this._punksFiltered.orderBy,this._punksFiltered.items))&&void 0!==s?s:[]),e.abrupt("return",this._punksFiltered.items.slice(n,n+t));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,c){return e.apply(this,arguments)}}()},{key:"getPunksAllAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._punks);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getActionPriceAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._actionPrice){e.next=5;break}return e.next=3,this.getMarketInfoAsync();case 3:t=e.sent,this._actionPrice=t.actionPrice;case 5:return e.abrupt("return",this._actionPrice);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMintPriceAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._mintPrice){e.next=5;break}return e.next=3,this.getMarketInfoAsync();case 3:t=e.sent,this._mintPrice=t.mintPrice;case 5:return e.abrupt("return",this._mintPrice);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccountAuctionsAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r){var a,c,i,s,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re.info("getAccountAuctionsAsync",t,n,r)(),a=0,c=[],r&&!T.a.isNullOrWhitespace(r)){e.next=14;break}return e.next=6,this.initPunkInfosAsync();case 6:return e.next=8,this.updatePunksAsync();case 8:return e.next=10,this.initAccountAuctionsAsync();case 10:this.orderAccountAuctions(t),c=null!==(i=this._accountAuctions.get(t))&&void 0!==i?i:[],e.next=18;break;case 14:c=null!==(s=this._accountAuctions.get(t))&&void 0!==s?s:[],a=c.findIndex((function(e){return e.timestamp.eq(new k.BigNumber(r))})),re.info("Cursor",r,"cursorIndex",a)(),-1===a?(re.info("getAccountAuctionsAsync cursor index not found")(),c=[]):c=c.slice(a+1);case 18:return o=c.slice(0,n),e.abrupt("return",{cursor:{prev:null!==r&&void 0!==r?r:null,next:c.length>n?o[o.length-1].timestamp.toFixed():null},auctions:o});case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createId",value:function(){return T.a.uuid()}},{key:"getDefaultPunkInfos",value:function(){for(var e=[],t=1;t<=S.b.TOTAL_MINTS;t++)e.push({id:t.toString()});return e}},{key:"orderAccountAuctions",value:function(e){var t=this._accountAuctions.get(e);t&&(t=t.sort((function(e,t){return e.timestamp.gt(t.timestamp)?-1:1})),this._accountAuctions.set(e,t))}}]),e}(),ce=function(){function e(){Object(j.a)(this,e)}return Object(v.a)(e,null,[{key:"defaultBigNumber",get:function(){return new k.BigNumber("0")}},{key:"toBigNumber",value:function(t){var n;return null!==(n=e.toMaybeBigNumber(t))&&void 0!==n?n:e.defaultBigNumber}},{key:"toMaybeBigNumber",value:function(e){return!e||T.a.isNullOrWhitespace(e)&&!T.a.isNumber(e)?null:new k.BigNumber(e)}},{key:"toAddress",value:function(e){return T.a.isNullOrWhitespace(e)||e===S.b.ZERO_ADDRESS?null:e}},{key:"toTimestamp",value:function(e){return e?Math.floor(e.getTime()/1e3).toString():"0"}},{key:"toPunkEvent",value:function(t){var n,r,a,c;return{__typename:null!==(n=t.__typename)&&void 0!==n?n:te.h.PunkEvent,id:null!==(r=t.id)&&void 0!==r?r:"".concat(t.accountBlockHash,"-").concat(t.accountBlockHeight,"-").concat(t.eventType),accountBlockHash:t.accountBlockHash,accountBlockHeight:e.toBigNumber(t.accountBlockHeight),timestamp:e.toBigNumber(t.timestamp),eventType:Number(t.eventType),punkId:t.punkId,amount:e.toBigNumber(t.amount),fromAddress:null!==(a=e.toAddress(t.fromAddress))&&void 0!==a?a:"",toAddress:null!==(c=e.toAddress(t.toAddress))&&void 0!==c?c:""}}},{key:"toPunkInfo",value:function(t){return t?{id:t.id,owner:t.owner,bid:e.toMarketBid(t.bid,t.id),offer:e.toMarketOffer(t.offer,t.id)}:null}},{key:"toMarketBid",value:function(t,n){var r;return t?{__typename:null!==(r=t.__typename)&&void 0!==r?r:te.h.MarketBid,itemIndex:e.toBigNumber(null!==n&&void 0!==n?n:t.itemIndex),bidder:t.bidder,amount:e.toBigNumber(t.amount),timestamp:e.toMaybeBigNumber(t.timestamp)}:null}},{key:"toMarketOffer",value:function(t,n){var r,a;return t?{__typename:null!==(r=t.__typename)&&void 0!==r?r:te.h.MarketOffer,itemIndex:e.toBigNumber(null!==n&&void 0!==n?n:t.itemIndex),seller:t.seller,minAmount:e.toBigNumber(t.minAmount),onlySellTo:null!==(a=t.onlySellTo)&&void 0!==a?a:null,timestamp:e.toMaybeBigNumber(t.timestamp)}:null}},{key:"toAccountAuction",value:function(t){return{timestamp:e.toBigNumber(t.timestamp),auctionType:Number(t.auctionType),punkId:t.punkId,owner:t.owner,amount:e.toBigNumber(t.amount),address:t.address}}}]),e}(),ie=Object(F.a)(),se=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this))._events=void 0,e.clearMock(),e}return Object(v.a)(n,[{key:"clearMock",value:function(){this._events=[]}},{key:"initPunkInfosAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n,r,a,c,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fileUtil.readFileAsync("./assets/data/mock_infos.json");case 2:if(t=e.sent,t=JSON.parse(t),this._punkInfos=this.getDefaultPunkInfos(),t){n=Object(B.a)(t.punks);try{for(n.s();!(r=n.n()).done;)a=r.value,(c=ce.toPunkInfo(a))&&(i=parseInt(a.id)-1,this._punkInfos[i]=c)}catch(s){n.e(s)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("Init MockDataSource")(),this.clearMock(),e.next=4,this._fileUtil.readFileAsync("./assets/data/mock_events.json");case 4:for(n=e.sent,n=JSON.parse(n),r=0;r<n.length;r++)a=n[r],this._events.push(ce.toPunkEvent(a));this._events=this._events.reverse();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeProtected",value:function(){ie.info("Dispose MockDataSource")(),this.clearMock()}},{key:"getQuotaAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{currentQuota:new k.BigNumber("1000"),maxQuota:new k.BigNumber("2000"),stakeAmount:new k.BigNumber("10000")});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPunkEventsAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r,a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("id",t,"limit",n,"offset",r,"height",a)(),e.next=3,T.a.timeout(2e3);case 3:if(T.a.isNumber(t)){e.next=5;break}return e.abrupt("return",{blockHeight:ce.defaultBigNumber,events:[]});case 5:return e.abrupt("return",{blockHeight:ce.defaultBigNumber,events:this._events.filter((function(e){return e.punkId===parseInt(t)})).slice(r,r+n)});case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getPunkOwnerAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.timeout(2e3);case 2:if(T.a.isNumber(t)){e.next=4;break}return e.abrupt("return",void 0);case 4:if(n=this._events.find((function(e){return e.punkId.toString()===t&&e.eventType===te.g.Mint}))){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.abrupt("return",n.toAddress);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPunksByAddressAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("_address",t,"limit",n,"offset",r)(),e.next=3,this.getPunkAsync("101");case 3:return e.t0=e.sent,e.next=6,this.getPunkAsync("201");case 6:return e.t1=e.sent,e.next=9,this.getPunkAsync("301");case 9:return e.t2=e.sent,e.next=12,this.getPunkAsync("401");case 12:return e.t3=e.sent,e.next=15,this.getPunkAsync("501");case 15:return e.t4=e.sent,e.next=18,this.getPunkAsync("601");case 18:return e.t5=e.sent,e.next=21,this.getPunkAsync("701");case 21:return e.t6=e.sent,e.next=24,this.getPunkAsync("801");case 24:return e.t7=e.sent,e.next=27,this.getPunkAsync("9999");case 27:return e.t8=e.sent,a=[e.t0,e.t1,e.t2,e.t3,e.t4,e.t5,e.t6,e.t7,e.t8],e.abrupt("return",a.slice(r,r+n));case 30:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getMarketBidAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.timeout(1e3);case 2:if(T.a.isNumber(t)){e.next=4;break}return e.abrupt("return",void 0);case 4:if(a=this._events.find((function(e){return e.punkId.toString()===t&&e.eventType===te.g.NewBid}))){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.abrupt("return",{__typename:te.h.MarketBid,itemIndex:ce.toBigNumber(t),bidder:null!==(n=a.fromAddress)&&void 0!==n?n:S.b.ZERO_ADDRESS,amount:null!==(r=a.amount)&&void 0!==r?r:ce.defaultBigNumber,timestamp:null});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMarketOfferAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.timeout(1e3);case 2:if(T.a.isNumber(t)){e.next=4;break}return e.abrupt("return",void 0);case 4:if(r=this._events.find((function(e){return e.punkId.toString()===t&&e.eventType===te.g.Offer}))){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.next=9,this.getPunkOwnerAsync(t);case 9:return a=e.sent,e.abrupt("return",{__typename:te.h.MarketOffer,itemIndex:ce.toBigNumber(t),seller:null!==a&&void 0!==a?a:S.b.ZERO_ADDRESS,minAmount:null!==(n=r.amount)&&void 0!==n?n:ce.defaultBigNumber,onlySellTo:r.toAddress,timestamp:null});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMarketEventsAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("limit",t,"offset",n)(),e.next=3,T.a.timeout(500);case 3:return e.abrupt("return",{blockHeight:new k.BigNumber("0"),events:this._events.slice(n,n+t)});case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getMarketInfoAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("getMarketInfoAsync")(),e.abrupt("return",{marketStarted:!0,mintsRemaining:S.b.TOTAL_MINTS-this._events.filter((function(e){return e.eventType===te.g.Mint})).length,mintPrice:new k.BigNumber("12").shiftedBy(18),actionPrice:new k.BigNumber("3.1").shiftedBy(18)});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mintAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Method 'mintAsync' not implemented.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"offerAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r,a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("offerAsync","id",t,"tokenId",n,"amount",r,"address",a)(),e.next=3,T.a.timeout(2e3);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"cancelOfferAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("cancelOfferAsync","id",t)(),e.next=3,T.a.timeout(2e3);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"buyAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("buyAsync","id",t,"amount",n)(),e.next=3,T.a.timeout(2e3);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"bidAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("bidAsync","id",t,"amount",n)(),e.next=3,T.a.timeout(2e3);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"acceptBidAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("acceptBidAsync","id",t,"amount",n)(),e.next=3,T.a.timeout(2e3);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"cancelBidAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie.info("cancelBidAsync","id",t)(),e.next=3,T.a.timeout(2e3);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ae),oe=new se,ue=n(207),le=n.n(ue),de=n(146),fe=function(){function e(){Object(j.a)(this,e)}return Object(v.a)(e,null,[{key:"formatMessage",value:function(e){var t="Something went wrong. Probably your account has insufficient balance or quota.";if(e){var n,r;if(console.log(e),T.a.isString(e))n=e;else e.message?n=e.message:(null===(r=e.error)||void 0===r?void 0:r.message)?n=e.error.message:e.graphQLErrors?n=e.graphQLErrors.length>0?e.graphQLErrors[0].message:t:"{}"===(n=JSON.stringify(e))&&(n=t);return n.length>128?n.substr(0,128)+"...":n}return t}},{key:"formatNumber",value:function(e){var t;return e?e.toLocaleString(null!==(t=navigator.language)&&void 0!==t?t:"en-US"):"0"}}]),e}(),he=Object(F.a)(),be=function(){function e(){Object(j.a)(this,e),this._fileUtil=void 0,this._minQuota=new w.a("10000"),this._client=void 0,this._contract=void 0,this.objectFromEntries=function(e){return Object.fromEntries(e.map((function(e){return[e.name,e.value]})))},this._fileUtil=K()}return Object(v.a)(e,[{key:"initAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._client=t,e.next=3,this.initAsyncProtected(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"contract",get:function(){return this._contract}},{key:"ensureQuotaAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:this._minQuota,e.next=3,this._client.getQuotaAsync(this._contract.address);case 3:if(!e.sent.currentQuota.lte(t)){e.next=6;break}throw new Error("Contract has insufficient quota");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toBoolean",value:function(e){if("0"===e)return!1;if("1"===e)return!0;throw new Error("Value ".concat(e," is not boolean"))}},{key:"callContractAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r,a,c){var i,s,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureQuotaAsync();case 2:return e.prev=2,e.next=5,this._client.callContractAsync(t,n,this._contract.abi,r,this._contract.address,a,c);case 5:return i=e.sent,e.next=8,this._client.waitForAccountBlockAsync(t.address,i.height);case 8:return s=e.sent,e.abrupt("return",s);case 12:if(e.prev=12,e.t0=e.catch(2),!(o=fe.formatMessage(e.t0))){e.next=19;break}throw new Error(o);case 19:throw new Error("Error");case 20:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(t,n,r,a,c){return e.apply(this,arguments)}}()},{key:"stakeForQuotaAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._client.stakeForQuotaAsync(t,this._contract.address,n);case 2:return r=e.sent,e.next=5,this._client.waitForAccountBlockAsync(t.address,r.height);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createAddressListenerAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n,r=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this._client.createAddressListenerAsync(this._contract.address);case 3:return(n=e.sent).on((function(e){for(var n=0;n<e.length;n++){var a=e[n];he.info(a)();var c=r._client.decodeVmLog(a.vmlog,r._contract.abi);t.push(c)}})),e.abrupt("return",{logs:t,listener:n});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),pe=Object(F.a)();!function(e){e[e.getDeveloper=0]="getDeveloper",e[e.getMarketInfo=1]="getMarketInfo",e[e.isContract=2]="isContract",e[e.balanceOf=3]="balanceOf",e[e.ownerOf=4]="ownerOf",e[e.getMappedIndex=5]="getMappedIndex",e[e.totalSupply=6]="totalSupply",e[e.getTokensOf=7]="getTokensOf",e[e.tokenURI=8]="tokenURI",e[e.getBaseUrl=9]="getBaseUrl",e[e.getOffer=10]="getOffer",e[e.getBid=11]="getBid",e[e.transferEvent=12]="transferEvent",e[e.marketChangedEvent=13]="marketChangedEvent",e[e.punkChangedEvent=14]="punkChangedEvent"}($||($={}));var je,ve,me,Oe,ge,xe,ye,ke,we,Ae,_e,Ce,Ee,Ie,Se,Be,Ne,Me,Pe,Te,Fe,Re,Le,De,Ue=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this))._abiMap=void 0,e._abiMap=new Map,e}return Object(v.a)(n,[{key:"initAsyncProtected",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fileUtil.readFileAsync(T.a.appendPath(t,"Punks.gz?v=1.2.10"),"binary");case 2:n=e.sent,this._contract=JSON.parse(U.decompress(T.a.toUint8Array(n,"binary"))),this._contract.address=I.a.CONTRACT_ADDRESS,this._abiMap.set($.getDeveloper,this.getAbiItem("offchain","getDeveloper")),this._abiMap.set($.getMarketInfo,this.getAbiItem("offchain","getMarketInfo")),this._abiMap.set($.isContract,this.getAbiItem("offchain","isContract")),this._abiMap.set($.balanceOf,this.getAbiItem("offchain","balanceOf")),this._abiMap.set($.ownerOf,this.getAbiItem("offchain","ownerOf")),this._abiMap.set($.getMappedIndex,this.getAbiItem("offchain","getMappedIndex")),this._abiMap.set($.totalSupply,this.getAbiItem("offchain","totalSupply")),this._abiMap.set($.getTokensOf,this.getAbiItem("offchain","getTokensOf")),this._abiMap.set($.tokenURI,this.getAbiItem("offchain","tokenURI")),this._abiMap.set($.getBaseUrl,this.getAbiItem("offchain","getBaseUrl")),this._abiMap.set($.getOffer,this.getAbiItem("offchain","getOffer")),this._abiMap.set($.getBid,this.getAbiItem("offchain","getBid")),this._abiMap.set($.transferEvent,this.getAbiItem("event","Transfer")),this._abiMap.set($.marketChangedEvent,this.getAbiItem("event","MarketChanged")),this._abiMap.set($.punkChangedEvent,this.getAbiItem("event","PunkChanged"));case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAbiItem",value:function(e,t){return this._contract.abi.find((function(n){return n.type===e&&n.name===t}))}},{key:"getAbiItemByType",value:function(e){return this._abiMap.get(e)}},{key:"callOffChainMethodAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._client.callOffChainMethodAsync(this._contract.address,this.getAbiItemByType(t),this._contract.offChain,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setMintPriceAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.info("setMintPriceAsync",n)(),e.abrupt("return",this.callContractAsync(t,"setPrice",[te.d.MintPrice,n]));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setActionPriceAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.info("setActionPriceAsync",n)(),e.abrupt("return",this.callContractAsync(t,"setPrice",[te.d.ActionPrice,n]));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDeveloperAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync($.getDeveloper,[]);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return n=t[0].value,pe.info("getDeveloperAsync",n)(),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setDeveloperAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.info("setDeveloperAsync",n)(),e.abrupt("return",this.callContractAsync(t,"setDeveloper",[n]));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMarketInfoAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync($.getMarketInfo,[]);case 2:return t=e.sent,n=this.objectFromEntries(t),pe.info("getMarketInfoAsync",n)(),e.abrupt("return",{marketStarted:this.toBoolean(n.market_started),mintsRemaining:parseInt(n.mints_remaining),mintPrice:ce.toBigNumber(n.mint_price),actionPrice:ce.toBigNumber(n.action_price)});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setMarketStartedAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.info("setMarketStartedAsync",n)(),e.abrupt("return",this.callContractAsync(t,"setMarketStarted",[n]));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"isContractAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync($.isContract,[t]);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return r=n[0].value,pe.info("isContractAsync",r)(),e.abrupt("return",this.toBoolean(r));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"balanceOfAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync($.balanceOf,[t]);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return r=n[0].value,pe.info("balanceOfAsync",r)(),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ownerOfAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync($.ownerOf,[t]);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return r=n[0].value,pe.info("ownerOfAsync",r)(),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMappedIndexAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync($.getMappedIndex,[t]);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return r=n[0].value,pe.info("getMappedIndexAsync",t,":",r)(),e.abrupt("return",ce.toBigNumber(r));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setMappedIndicesAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callContractAsync(t,"setMappedIndices",[n,r]));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"mintAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callContractAsync(t,"mint",[],n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"totalSupplyAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync($.totalSupply,[]);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return r=n[0].value,pe.info("totalSupplyAsync",r)(),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTokensOfAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync($.getTokensOf,[t]);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:return r=n[0].value,pe.info("getTokensOfAsync",r)(),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tokenURIAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync($.tokenURI,[t]);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return r=n[0].value,pe.info("tokenURIAsync",r)(),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBaseUrlAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync($.getBaseUrl,[]);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return n=t[0].value,pe.info("getBaseUrlAsync",n)(),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setBaseUrlAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callContractAsync(t,"setBaseUrl",[n]));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOfferAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync($.getOffer,[t]);case 2:return n=e.sent,pe.info("getOfferAsync","_punkId",t,n)(),e.abrupt("return",{isForSale:this.toBoolean(n[0].value),itemIndex:new w.a(t),seller:n[1].value,minAmount:new w.a(n[2].value),onlySellTo:ce.toAddress(n[3].value)});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBidAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.callOffChainMethodAsync($.getBid,[t]);case 2:return n=e.sent,pe.info("getBidAsync","_punkId",t,n)(),e.abrupt("return",{hasBid:this.toBoolean(n[0].value),itemIndex:new w.a(t),bidder:n[1].value,amount:new w.a(n[2].value)});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOfferAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callContractAsync(t,"cancelOffer",[n]));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"offerAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r,a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.info("offerAsync punkId: ".concat(n," minSalePrice: ").concat(r," fee: ").concat(a))(),e.abrupt("return",this.callContractAsync(t,"offer",[n,r],null!==a&&void 0!==a?a:void 0));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"offerToAddressAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r,a,c){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.info("offerToAddressAsync punkId: ".concat(n," minSalePrice: ").concat(r," address: ").concat(a," fee: ").concat(c))(),e.abrupt("return",this.callContractAsync(t,"offerToAddress",[n,r,a],null!==c&&void 0!==c?c:void 0));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,c){return e.apply(this,arguments)}}()},{key:"buyAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callContractAsync(t,"buy",[n],r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"cancelBidAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callContractAsync(t,"cancelBid",[n]));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"enterBidAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r,a){var c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.info("enterBidAsync punkId: ".concat(n," amount: ").concat(r," fee: ").concat(a))(),c=r,a&&!T.a.isNullOrWhitespace(a)&&(c=new w.a(r).plus(new w.a(a)).toFixed(),pe.info("enterBidAsync amount+fee: ".concat(c))()),e.abrupt("return",this.callContractAsync(t,"enterBid",[n],c));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"acceptBidAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callContractAsync(t,"acceptBid",[n,r]));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(be),We=new Ue,qe=Object(F.a)(),ze=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this))._client=void 0,e._contract=void 0,e._listener=void 0,e.getNewMarketEventsAsync=function(){var t=Object(E.a)(C.a.mark((function t(n){var r,a,c,i;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e._contract.getAbiItemByType($.punkChangedEvent),a=e._client.encodeLogSignature(r),c=[[a]],t.next=5,e._client.getAccountBlockHeightAsync(e._contract.contract.address);case 5:return i=t.sent,t.next=8,e._client.getEventsByBlockAsync(e._contract.contract.address,n,i,c);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e._client=Object(de.a)(),e._contract=We,e}return Object(v.a)(n,[{key:"initPunkInfosAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n,r,a,c,i,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le()({method:"get",url:I.a.IS_PRODUCTION?S.b.MARKET_DATA_URL:"",responseType:"json",timeout:3e3});case 3:if(t=e.sent,n=t.data,this._punkInfos=this.getDefaultPunkInfos(),n&&Array.isArray(n.punks)){r=Object(B.a)(n.punks);try{for(r.s();!(a=r.n()).done;)c=a.value,(i=ce.toPunkInfo(c))&&(s=parseInt(c.id)-1,this._punkInfos[s]=i)}catch(o){r.e(o)}finally{r.f()}}return e.next=9,this.updatePunkInfosAsync(ce.toBigNumber(n.refHeight));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),qe.error(e.t0)();case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"initAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qe.info("Init ViteDataSource")(),this.disposeProtected(),e.next=4,this._client.initAsync(t);case 4:return e.next=6,this._contract.initAsync(this._client,"./assets/contracts");case 6:return e.next=8,this._client.createAddressListenerAsync(this._contract.contract.address);case 8:this._listener=e.sent,this._listener.on((function(e){var t;if(null===(t=n._contract)||void 0===t?void 0:t.contract.abi)for(var r=0;r<e.length;r++){var a=e[r],c=n._client.decodeVmLog(a.vmlog,n._contract.contract.abi);qe.info(null!==c&&void 0!==c?c:a)(),c&&n.handleVmLogAsync(a.accountBlockHash,a.accountBlockHeight,c)}else qe.error("Could not decode vmlog because contract abi is not defined.")()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeProtected",value:function(){qe.info("Dispose ViteDataSource")(),this._listener&&this._client.removeListener(this._listener),this._client.dispose()}},{key:"getQuotaAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._client.getQuotaAsync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPunkEventsAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r,a){var c,i,s,o,u,l,d,f;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qe.info("id",t,"limit",n,"offset",r,"height",a)(),!T.a.isNullOrWhitespace(t)){e.next=3;break}return e.abrupt("return",{blockHeight:ce.defaultBigNumber,events:[]});case 3:return i=this._contract.getAbiItemByType($.punkChangedEvent),s=this._client.encodeLogSignature(i),o=[[s],[],[this._client.encodeParameter("uint256",t)]],u=this.getEventsFromHeight(),e.next=9,this.getAccountBlockHeightAsync(this._contract.contract.address,a);case 9:return l=e.sent,e.next=12,this._client.getEventsByBlockAsync(this._contract.contract.address,u,l,o);case 12:return d=e.sent,d=null===(c=d)||void 0===c?void 0:c.reverse().slice(r,r+n),f=this.toPunkEvents(d),e.abrupt("return",{blockHeight:l,events:f});case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getPunkOwnerAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._contract.ownerOfAsync(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPunksByAddressAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r){var a,c,i,s,o,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qe.info("getPunksByAddressAsync",t,n,r)(),!T.a.isNullOrWhitespace(t)){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,this._contract.getTokensOfAsync(t);case 5:a=(a=e.sent).slice(r,r+n),c=[],i=Object(B.a)(a),e.prev=9,i.s();case 11:if((s=i.n()).done){e.next=19;break}return o=s.value,e.next=15,this.getPunkAsync(o);case 15:u=e.sent,c.push(u);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),i.e(e.t0);case 24:return e.prev=24,i.f(),e.finish(24);case 27:return e.abrupt("return",c);case 28:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getMarketBidAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._contract.getBidAsync(t);case 2:if((n=e.sent)&&n.hasBid){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",{__typename:te.h.MarketBid,itemIndex:n.itemIndex,amount:n.amount,bidder:n.bidder,timestamp:null});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMarketOfferAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._contract.getOfferAsync(t);case 2:if((r=e.sent)&&r.isForSale){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",{__typename:te.h.MarketOffer,itemIndex:r.itemIndex,minAmount:r.minAmount,seller:r.seller,onlySellTo:null!==(n=r.onlySellTo)&&void 0!==n?n:"",timestamp:null});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMarketEventsAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r){var a,c,i,s,o,u,l,d;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qe.info("getMarketEventsAsync",t,n)(),c=this._contract.getAbiItemByType($.punkChangedEvent),i=this._client.encodeLogSignature(c),s=[[i]],e.next=6,this.getAccountBlockHeightAsync(this._contract.contract.address,r);case 6:return o=e.sent,u=k.BigNumber.maximum(this.getEventsFromHeight(),o.minus(1e3)),e.next=10,this._client.getEventsByBlockAsync(this._contract.contract.address,u,o,s);case 10:return l=e.sent,l=null===(a=l)||void 0===a?void 0:a.reverse().slice(n,n+t),d=this.toPunkEvents(l),e.abrupt("return",{blockHeight:o,events:d});case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getMarketInfoAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._contract.getMarketInfoAsync();case 2:return t=e.sent,this._actionPrice=t.actionPrice,this._mintPrice=t.mintPrice,qe.info("getMarketInfoAsync",t)(),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mintAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkQuotaAsync();case 2:return e.next=4,this.getMintPriceAsync();case 4:return t=e.sent,e.next=7,this._contract.mintAsync(this.getAccount(),t.toFixed());case 7:return n=e.sent,qe.info("mintAsync",n)(),e.abrupt("return",0===n.status);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"offerAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r){var a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qe.info("offerAsync","id",t,"amount",n,"address",r)(),e.next=3,this.checkQuotaAsync();case 3:return e.next=5,this.getFeeAsync();case 5:if(a=e.sent,!r||T.a.isNullOrWhitespace(r)){e.next=12;break}return e.next=9,this._contract.offerToAddressAsync(this.getAccount(),t,n,r,a);case 9:c=e.sent,e.next=15;break;case 12:return e.next=14,this._contract.offerAsync(this.getAccount(),t,n,a);case 14:c=e.sent;case 15:return qe.info("offerAsync",c)(),e.abrupt("return",0===c.status);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"cancelOfferAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qe.info("cancelOfferAsync","id",t)(),e.next=3,this.checkQuotaAsync();case 3:return e.next=5,this._contract.cancelOfferAsync(this.getAccount(),t);case 5:return n=e.sent,qe.info("cancelOfferAsync",n)(),e.abrupt("return",0===n.status);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"buyAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkQuotaAsync();case 2:return qe.info("buyAsync","id",t,"amount",n)(),e.next=5,this._contract.buyAsync(this.getAccount(),t,n);case 5:return r=e.sent,qe.info("buyAsync",r)(),e.abrupt("return",0===r.status);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"bidAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qe.info("bidAsync","id",t,"amount",n)(),e.next=3,this.checkQuotaAsync();case 3:return e.next=5,this.getFeeAsync();case 5:return r=e.sent,e.next=8,this._contract.enterBidAsync(this.getAccount(),t,n,r);case 8:return a=e.sent,qe.info(a)(),e.abrupt("return",0===a.status);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"acceptBidAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qe.info("acceptBidAsync","id",t,"amount",n)(),e.next=3,this.checkQuotaAsync();case 3:return e.next=5,this._contract.acceptBidAsync(this.getAccount(),t,n);case 5:return r=e.sent,qe.info("acceptBidAsync",r)(),e.abrupt("return",0===r.status);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"cancelBidAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qe.info("cancelBidAsync","id",t)(),e.next=3,this.checkQuotaAsync();case 3:return e.next=5,this._contract.cancelBidAsync(this.getAccount(),t);case 5:return n=e.sent,qe.info("cancelBidAsync",n)(),e.abrupt("return",0===n.status);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleVmLogAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r){var a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=r.event,e.next=e.t0===te.i.MarketChanged?4:e.t0===te.i.PunkChanged?15:18;break;case 4:a={timestamp:new k.BigNumber(r.args.timestamp),eventType:parseInt(r.args.eventType),value:new k.BigNumber(r.args.value)},e.t1=a.eventType,e.next=e.t1===te.d.ActionPrice?8:e.t1===te.d.MintPrice?10:12;break;case 8:return this._actionPrice=a.value,e.abrupt("break",13);case 10:return this._mintPrice=a.value,e.abrupt("break",13);case 12:return e.abrupt("break",13);case 13:return this._emitter.emitMarketChanged(a),e.abrupt("break",19);case 15:return c={accountBlockHash:t,accountBlockHeight:new k.BigNumber(n),timestamp:new k.BigNumber(r.args.timestamp),eventType:parseInt(r.args.eventType),punkId:parseInt(r.args.punkId),amount:new k.BigNumber(r.args.amount),fromAddress:r.args.fromAddress,toAddress:r.args.toAddress},this._emitter.emitPunkChanged(c),e.abrupt("break",19);case 18:return e.abrupt("break",19);case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(0),qe.error(e.t2)();case 24:case"end":return e.stop()}}),e,this,[[0,21]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"toPunkEvents",value:function(e){if(!Array.isArray(e))return[];var t,n=[],r=Object(B.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,c=this.toPunkEvent(a);c&&n.push(c)}}catch(i){r.e(i)}finally{r.f()}return n}},{key:"toPunkEvent",value:function(e){if(!e)return null;var t=this._contract.getAbiItemByType($.punkChangedEvent),n=this._client.decodeVmLogByAbiItem(e.vmlog,t);if(!n)return null;var r={accountBlockHash:e.accountBlockHash,accountBlockHeight:e.accountBlockHeight,timestamp:n.args.timestamp,eventType:n.args.eventType,punkId:n.args.punkId,amount:n.args.amount,fromAddress:n.args.fromAddress,toAddress:n.args.toAddress};return ce.toPunkEvent(r)}},{key:"getFeeAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getActionPriceAsync();case 2:if(!(t=e.sent).gt(0)){e.next=5;break}return e.abrupt("return",t.toFixed());case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccountBlockHeightAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new k.BigNumber("0"),!n||T.a.isNullOrWhitespace(n)){e.next=5;break}r=new k.BigNumber(n),e.next=8;break;case 5:return e.next=7,this._client.getAccountBlockHeightAsync(t);case 7:r=e.sent;case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getEventsFromHeight",value:function(){return I.a.IS_PRODUCTION,new k.BigNumber("0")}},{key:"checkQuotaAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._contract.contract.address,e.next=3,this.getQuotaAsync(t);case 3:n=e.sent,this._emitter.emitQuotaChanged(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updatePunkInfosAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n,r,a,c,i,s,o,u,l,d,f,h;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._punkInfos&&this._punkInfos.length===S.b.TOTAL_MINTS){e.next=3;break}return qe.info("Invalid market data provided",null===(s=this._punkInfos)||void 0===s?void 0:s.length)(),e.abrupt("return");case 3:return qe.info("Get market events with reference height",t.toFixed())(),e.next=6,this.getNewMarketEventsAsync(t);case 6:if(o=e.sent,Array.isArray(o)){e.next=10;break}return qe.info("Get market events result is not an array")(),e.abrupt("return");case 10:qe.info("events.length",o.length)(),u=Object(B.a)(o),e.prev=12,u.s();case 14:if((l=u.n()).done){e.next=40;break}if(d=l.value,f=this.toPunkEvent(d)){e.next=20;break}return qe.info("Invalid punk event",d)(),e.abrupt("continue",38);case 20:h=this._punkInfos[f.punkId-1],e.t0=f.eventType,e.next=e.t0===te.g.Mint?24:e.t0===te.g.Offer?26:e.t0===te.g.NewBid?28:e.t0===te.g.CancelBid?30:e.t0===te.g.CancelOffer?32:e.t0===te.g.Buy?34:37;break;case 24:return h.owner=f.toAddress,e.abrupt("break",38);case 26:return h.offer={__typename:te.h.MarketOffer,itemIndex:ce.toBigNumber(f.id),seller:null!==(n=f.fromAddress)&&void 0!==n?n:"",minAmount:null!==(r=f.amount)&&void 0!==r?r:ce.defaultBigNumber,onlySellTo:f.toAddress,timestamp:f.timestamp},e.abrupt("break",38);case 28:return h.bid={__typename:te.h.MarketBid,itemIndex:ce.toBigNumber(f.id),bidder:null!==(a=f.fromAddress)&&void 0!==a?a:"",amount:null!==(c=f.amount)&&void 0!==c?c:ce.defaultBigNumber,timestamp:f.timestamp},e.abrupt("break",38);case 30:return h.bid=null,e.abrupt("break",38);case 32:return h.offer=null,e.abrupt("break",38);case 34:return h.owner=f.toAddress,h.bid&&h.bid.bidder.toLowerCase()===(null===(i=f.toAddress)||void 0===i?void 0:i.toLowerCase())&&(h.bid=void 0),e.abrupt("break",38);case 37:return e.abrupt("break",38);case 38:e.next=14;break;case 40:e.next=45;break;case 42:e.prev=42,e.t1=e.catch(12),u.e(e.t1);case 45:return e.prev=45,u.f(),e.finish(45);case 48:case"end":return e.stop()}}),e,this,[[12,42,45,48]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(ae),Ve=new ze,He=function(){function e(){Object(j.a)(this,e)}return Object(v.a)(e,null,[{key:"getPunkUrl",value:function(t,n){return t&&!T.a.isNullOrWhitespace(t)?I.a.USE_IPFS?n&&!T.a.isNullOrWhitespace(n)?e.getPunkIpfsUrlByCid(n):e.getPunkIpfsUrl(t):"https://cdn.vitepunks.com/punks/iso/".concat(t):""}},{key:"getPunkIpfsUrlByCid",value:function(e){return e&&!T.a.isNullOrWhitespace(e)?"".concat(S.b.IPFS_GATEWAY_URL).concat(e):""}},{key:"getPunkIpfsUrl",value:function(e){return e&&!T.a.isNullOrWhitespace(e)?"".concat(S.b.IPFS_GATEWAY_URL,"QmRGJyWMZidhH35J5tfn7vWwR1MfhPdSZh7FEXWXub4zJm/").concat(e):""}}]),e}(),Qe=Object(F.a)(),Ge=function(){function e(){Object(j.a)(this,e),this._isInitialized=!1,this._network=void 0,this._datasource=void 0}return Object(v.a)(e,[{key:"initAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._isInitialized=!1,S.b.USE_MOCK_DATASOURCE?this._datasource=oe:this._datasource=Ve,n=I.a.NETWORK_ID,this._network=null!==(t=S.d.find((function(e){return e.id===n})))&&void 0!==t?t:S.d[0],e.next=6,this._datasource.initBaseAsync(this._network);case 6:return e.next=8,this.checkIpfsAsync();case 8:Qe.info("Using IPFS",I.a.USE_IPFS)(),this._isInitialized=!0;case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkIpfsAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(E.a)(C.a.mark((function e(n){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._datasource.getPunkAsync("1");case 2:r=e.sent,(a=new Image).onload=function(){I.a.USE_IPFS=!1,n()},a.onerror=function(){I.a.USE_IPFS=!0,n()},a.src=He.getPunkUrl(r.image);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){var e;Qe.info("Disposing CommonContext")(),null===(e=this._datasource)||void 0===e||e.dispose()}},{key:"isInitialized",get:function(){return this._isInitialized}},{key:"network",get:function(){return this._network}},{key:"datasource",get:function(){return this._datasource}}]),e}(),$e=new Ge,Ke=function(){return $e},Ye=n(27),Je=n(367),Ze=Object(Je.a)(je||(je=Object(Ye.a)(["\n  mutation Offer($id: ID!, $amount: String!, $address: String) {\n    offer(id: $id, amount: $amount, address: $address) @client\n  }\n"]))),Xe=Object(Je.a)(ve||(ve=Object(Ye.a)(["\n  mutation CancelOffer($id: ID!) {\n    cancelOffer(id: $id) @client\n  }\n"]))),et=Object(Je.a)(me||(me=Object(Ye.a)(["\n  mutation Buy($id: ID!, $amount: String!) {\n    buy(id: $id, amount: $amount) @client\n  }\n"]))),tt=Object(Je.a)(Oe||(Oe=Object(Ye.a)(["\n  mutation Bid($id: ID!, $amount: String!) {\n    bid(id: $id, amount: $amount) @client\n  }\n"]))),nt=Object(Je.a)(ge||(ge=Object(Ye.a)(["\n  mutation AcceptBid($id: ID!, $amount: String!) {\n    acceptBid(id: $id, amount: $amount) @client\n  }\n"]))),rt=Object(Je.a)(xe||(xe=Object(Ye.a)(["\n  mutation CancelBid($id: ID!) {\n    cancelBid(id: $id) @client\n  }\n"]))),at={offer:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var r,a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.amount,c=t.address,e.abrupt("return",n.client.datasource.offerAsync(r,a,c));case 2:case"end":return e.stop()}}),e)})))()},cancelOffer:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.abrupt("return",n.client.datasource.cancelOfferAsync(r));case 2:case"end":return e.stop()}}),e)})))()},buy:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.amount,e.abrupt("return",n.client.datasource.buyAsync(r,a));case 2:case"end":return e.stop()}}),e)})))()},bid:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.amount,e.abrupt("return",n.client.datasource.bidAsync(r,a));case 2:case"end":return e.stop()}}),e)})))()},acceptBid:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.amount,e.abrupt("return",n.client.datasource.acceptBidAsync(r,a));case 2:case"end":return e.stop()}}),e)})))()},cancelBid:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.abrupt("return",n.client.datasource.cancelBidAsync(r));case 2:case"end":return e.stop()}}),e)})))()}},ct=Object(Je.a)(ye||(ye=Object(Ye.a)(["\n  mutation Mint {\n    mint @client\n  }\n"]))),it={mint:function(e,t,n){return Object(E.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.client.datasource.mintAsync());case 1:case"end":return e.stop()}}),e)})))()}},st=Object(Je.a)(ke||(ke=Object(Ye.a)(["\n  fragment PunkFields on Punk {\n    id\n    rank\n    image\n    cid\n    attributes\n    owner\n    bid {\n      itemIndex\n      bidder\n      amount\n    }\n    offer {\n      itemIndex\n      seller\n      minAmount\n      onlySellTo\n    }\n  }\n"]))),ot=Object(Je.a)(we||(we=Object(Ye.a)(["\n  fragment PunkEventFields on PunkEvent {\n    id\n    accountBlockHash\n    accountBlockHeight\n    timestamp\n    eventType\n    punkId\n    amount\n    fromAddress\n    toAddress\n  }\n"]))),ut=Object(Je.a)(Ae||(Ae=Object(Ye.a)(["\n  query GetPunkAttributes {\n    punkAttributes @client\n  }\n"]))),lt=Object(Je.a)(_e||(_e=Object(Ye.a)(["\n  ","\n  query GetPunkEvents($id: String!, $limit: Int!, $offset: Int!, $height: String) {\n    punkEvents(id: $id, limit: $limit, offset: $offset, height: $height) @client {\n      blockHeight\n      events {\n        ...PunkEventFields\n      }\n    }\n  }\n"])),ot),dt=Object(Je.a)(Ce||(Ce=Object(Ye.a)(["\n  query GetPunkOwner($id: String!) {\n    punkOwner(id: $id) @client\n  }\n"]))),ft=Object(Je.a)(Ee||(Ee=Object(Ye.a)(["\n  ","\n  query GetPunk($id: ID!) {\n    punk(id: $id) @client {\n      ...PunkFields\n    }\n  }\n"])),st),ht=Object(Je.a)(Ie||(Ie=Object(Ye.a)(["\n  ","\n  query GetPunks($limit: Int!, $offset: Int!, $sort: PunkSortBy!, $order: OrderBy!, $search: String) {\n    punks(limit: $limit, offset: $offset, sort: $sort, order: $order, search: $search) @client {\n      ...PunkFields\n    }\n  }\n"])),st),bt=Object(Je.a)(Se||(Se=Object(Ye.a)(["\n  ","\n  query GetPunksAll {\n    punksAll @client {\n      ...PunkFields\n    }\n  }\n"])),st),pt=Object(Je.a)(Be||(Be=Object(Ye.a)(["\n  ","\n  query GetPunksByAddress($address: String!, $limit: Int!, $offset: Int!) {\n    punksByAddress(address: $address, limit: $limit, offset: $offset) @client {\n      ...PunkFields\n    }\n  }\n"])),st),jt={punkAttributes:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.datasource.getPunkAttributesAsync();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()},punkEvents:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var r,a,c,i,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.limit,c=t.offset,i=t.height,e.next=3,n.client.datasource.getPunkEventsAsync(r,a,c,i);case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})))()},punkOwner:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,n.client.datasource.getPunkOwnerAsync(r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))()},punk:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,n.client.datasource.getPunkAsync(r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))()},punks:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var r,a,c,i,s,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.limit,a=t.offset,c=t.sort,i=t.order,s=t.search,e.next=3,n.client.datasource.getPunksAsync(r,a,c,i,s);case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})))()},punksAll:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.datasource.getPunksAllAsync();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()},punksByAddress:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var r,a,c,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.address,a=t.limit,c=t.offset,e.next=3,n.client.datasource.getPunksByAddressAsync(r,a,c);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})))()}},vt=Object(Je.a)(Ne||(Ne=Object(Ye.a)(["\n  fragment MarketBidFields on MarketBid {\n    itemIndex\n    bidder\n    amount\n    timestamp\n  }\n"]))),mt=Object(Je.a)(Me||(Me=Object(Ye.a)(["\n  fragment MarketOfferFields on MarketOffer {\n    itemIndex\n    seller\n    minAmount\n    onlySellTo\n    timestamp\n  }\n"]))),Ot=Object(Je.a)(Pe||(Pe=Object(Ye.a)(["\n  query GetMarketInfo {\n    marketInfo @client {\n      marketStarted\n      mintsRemaining\n      mintPrice\n      actionPrice\n    }\n  }\n"]))),gt=Object(Je.a)(Te||(Te=Object(Ye.a)(["\n  ","\n  query GetMarketBid($id: String!) {\n    marketBid(id: $id) @client {\n      ...MarketBidFields\n    }\n  }\n"])),vt),xt=Object(Je.a)(Fe||(Fe=Object(Ye.a)(["\n  ","\n  query GetMarketOffer($id: String!) {\n    marketOffer(id: $id) @client {\n      ...MarketOfferFields\n    }\n  }\n"])),mt),yt=Object(Je.a)(Re||(Re=Object(Ye.a)(["\n  ","\n  query GetMarketEvents($limit: Int!, $offset: Int!, $height: String) {\n    marketEvents(limit: $limit, offset: $offset, height: $height) @client {\n      blockHeight\n      events {\n        ...PunkEventFields\n      }\n    }\n  }\n"])),ot),kt={marketInfo:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.datasource.getMarketInfoAsync();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()},marketBid:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,n.client.datasource.getMarketBidAsync(r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))()},marketOffer:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,n.client.datasource.getMarketOfferAsync(r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))()},marketEvents:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var r,a,c,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.limit,a=t.offset,c=t.height,e.next=3,n.client.datasource.getMarketEventsAsync(r,a,c);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})))()}},wt=Object(Je.a)(Le||(Le=Object(Ye.a)(["\n  query GetQuota($address: String!) {\n    quota(address: $address) @client {\n      currentQuota\n      maxQuota\n      stakeAmount\n    }\n  }\n"]))),At=Object(Je.a)(De||(De=Object(Ye.a)(["\n  query GetAccountAuctions($address: String!, $limit: Int!, $cursor: String) {\n    accountAuctions(address: $address, limit: $limit, cursor: $cursor) @client {\n      cursor {\n        prev\n        next\n      }\n      auctions {\n        timestamp\n        auctionType\n        punkId\n        owner\n        amount\n        address\n      }\n    }\n  }\n"]))),_t={quota:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.address,e.next=3,n.client.datasource.getQuotaAsync(r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))()},accountAuctions:function(e,t,n){return Object(E.a)(C.a.mark((function e(){var r,a,c,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.address,a=t.limit,c=t.cursor,e.next=3,n.client.datasource.getAccountAuctionsAsync(r,a,c);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})))()}},Ct=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"datasource",get:function(){return Ke().datasource}}]),n}(g.a),Et=new Ct({cache:new x.a({typePolicies:{Query:{fields:{punks:Object(y.a)(["order","sort"]),punksByAddress:Object(y.a)(["address"])}}}}),resolvers:{BigNumber:new A.a({name:"BigNumber",description:"BigNumber custom scalar type",serialize:function(e){return e.toFixed()},parseValue:function(e){return new w.a(e)}}),Query:Object(p.a)(Object(p.a)(Object(p.a)({},_t),jt),kt),Mutation:Object(p.a)(Object(p.a)({},it),at)},headers:{"client-name":"vite-punks","client-version":"1.2.10"}}),It=function(){return Et},St=n(8),Bt=new(function(){function e(){Object(j.a)(this,e),this._networkHeight=void 0,this._network=void 0,this._setNetworkCallback=void 0,this._networkHeight=new w.a("0")}return Object(v.a)(e,[{key:"networkHeight",get:function(){return this._networkHeight},set:function(e){this._networkHeight=e}},{key:"onSetNetworkCallback",set:function(e){this._setNetworkCallback=e}},{key:"getNetwork",value:function(){return this._network}},{key:"setNetwork",value:function(e){this._network=e,this._setNetworkCallback&&this._setNetworkCallback(this._network)}}]),e}()),Nt=function(){return Bt},Mt=n(296),Pt=n(380),Tt=n(0),Ft=Object(h.a)("div")((function(e){e.theme;return"\n  padding-bottom: 10px;\n  padding-top: 10px;\n  padding-left: 24px;\n  padding-right: 24px;\n  text-align: right;\n"})),Rt=function(){return Object(Tt.jsx)(Tt.Fragment,{children:Object(Tt.jsx)(Ft,{children:Object(Tt.jsxs)(Mt.a,{children:["v","1.2.10"]})})})},Lt=n(388),Dt=n(390),Ut=Object(h.a)("div")((function(e){e.theme;return"\n  flex-grow: 1;\n"})),Wt=Object(h.a)(Mt.a)((function(e){e.theme;return"\n  flex-grow: 1;\n  margin-left: 10px !important;\n"})),qt=function(e){return Object(Tt.jsx)(Ut,{children:Object(Tt.jsx)(Lt.a,{position:"static",children:Object(Tt.jsx)(Dt.a,{children:Object(Tt.jsx)(Wt,{variant:"h6",children:S.b.APP_NAME})})})})},zt=n(81),Vt=n(391),Ht=["children"],Qt=Object(h.a)("div")((function(e){e.theme;return"\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  align-items: center;\n  padding-bottom: 15px;\n  padding-top: 30px;\n  overflow: auto;\n  overflow-x: hidden;\n"})),Gt=Object(h.a)("div")((function(e){e.theme;return"\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"})),$t=function(e){var t=e.children,n=Object(zt.a)(e,Ht);return Object(Tt.jsx)(Qt,Object(p.a)(Object(p.a)({id:"mainscroll"},n),{},{children:Object(Tt.jsx)(Vt.a,{maxWidth:"xl",children:Object(Tt.jsx)(Gt,{children:t})})}))},Kt=["children"],Yt=Object(h.a)("div")((function(e){e.theme;return"\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n"})),Jt=function(e){var t=e.children,n=Object(zt.a)(e,Kt);return Object(Tt.jsx)(Yt,Object(p.a)(Object(p.a)({},n),{},{children:t}))},Zt=function(e){var t=Object(i.useState)(0),n=Object(St.a)(t,2),r=n[0],a=n[1];return Object(i.useEffect)((function(){a(e.retryCount)}),[e.retryCount]),Object(Tt.jsxs)(Jt,{children:[Object(Tt.jsx)(qt,{}),Object(Tt.jsxs)($t,{children:[Object(Tt.jsx)(Mt.a,{children:"Loading..."}),r>0&&Object(Tt.jsx)(Pt.a,{size:"small",label:r,variant:"outlined"})]}),Object(Tt.jsx)(Rt,{})]})},Xt=s.a.createContext(void 0),en=function(e){var t=Object(i.useState)(null),n=Object(St.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(null),s=Object(St.a)(c,2),o=s[0],u=s[1],l=Object(i.useState)(null),d=Object(St.a)(l,2),f=d[0],h=d[1];Object(ne.h)().onSetWalletCallback=u,Nt().onSetNetworkCallback=h;var b={setError:a,error:r,wallet:o,network:f};return Object(Tt.jsx)(Xt.Provider,{value:b,children:e.children})},tn=Object(F.a)(),nn=s.a.createContext(void 0),rn=function(){var e=s.a.useContext(nn);if(!e)throw new Error("Component rendered outside the provider tree");return e},an=function(e){var t=Object(i.useState)(null),n=Object(St.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(0),o=Object(St.a)(c,2),u=o[0],l=o[1],d=s.a.useRef(!1),f=function(){var e=s.a.useContext(Xt);if(!e)throw new Error("Component rendered outside the provider tree");return e}(),h=Ke(),b=f.wallet,p=f.network;s.a.useEffect((function(){return d.current=!0,function(){d.current=!1}}),[]),Object(i.useEffect)((function(){b||Object(ne.h)().initWallet()}),[b]),Object(i.useEffect)((function(){if(!p){var e=Nt(),t=I.a.NETWORK_ID;e.setNetwork(S.d.find((function(e){return e.id===t}))),tn.info("Network:",e.getNetwork())()}}),[p]);var j=Object(i.useCallback)((function(){Object(ne.h)().removeWallet(),window.location.reload()}),[]);return Object(i.useEffect)((function(){var e,t,n={account:null===b||void 0===b||null===(e=b.active)||void 0===e?void 0:e.address,network:p,logout:j};tn.info("ConnectedWeb3.account",null===b||void 0===b||null===(t=b.active)||void 0===t?void 0:t.address)();var r=function(){var e=Object(E.a)(C.a.mark((function e(){var t,c,i,s,o,u=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:0,!p){e.next=21;break}return tn.info("Init ConnectedWeb3",t)(),t>=5&&window.location.reload(),c=Date.now(),i=setTimeout(Object(E.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.current||h.isInitialized){e.next=7;break}return h.dispose(),t++,l(t),e.next=6,T.a.timeout(1e3);case 6:r(t);case 7:case"end":return e.stop()}}),e)}))),3e3),e.prev=6,a(null),e.next=10,h.initAsync();case 10:l(0),a(n),e.next=21;break;case 14:e.prev=14,e.t0=e.catch(6),tn.error(e.t0)(),clearTimeout(i),s=3e3,o=Date.now()-c,setTimeout((function(){d.current&&!h.isInitialized&&(t++,l(t),r(t))}),o>s?0:s-o);case 21:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(){return e.apply(this,arguments)}}();return r(),function(){h.dispose()}}),[b,p,j,h]),Object(Tt.jsx)(Tt.Fragment,{children:r?Object(Tt.jsx)(nn.Provider,{value:r,children:e.children}):Object(Tt.jsx)(Zt,{retryCount:u})})},cn=n(44),sn=n(30),on=function(){function e(){Object(j.a)(this,e)}return Object(v.a)(e,null,[{key:"enqueueError",value:function(t){var n=fe.formatMessage(t);"Session currently disconnected"===n&&Object(W.a)().emitConnectWalletDialog(!0);e.snackbar.enqueueSnackbar(n)}},{key:"enqueueMessage",value:function(t){e.snackbar.enqueueSnackbar(t)}}]),e}();on.snackbar=void 0;var un=n(376),ln=n(381),dn=n(342),fn=n(114),hn=n(389),bn=function(e){var t,n,r="#000000",a="rgba(255, 255, 255, 0.5)";if("warning"===e.type)r="#611a15",a="rgba(255, 0, 0, 0.1)";return e.error&&console.log(T.a.toJsonString(e.error)),Object(Tt.jsx)(hn.a,{children:Object(Tt.jsx)(dn.a,{sx:{color:null!==(t=e.color)&&void 0!==t?t:r,backgroundColor:null!==(n=e.backgroundColor)&&void 0!==n?n:a,padding:"15px",textAlign:"center"},children:Object(Tt.jsx)(Mt.a,{children:e.message})})})},pn=n(372),jn=function(e){var t,n,r,a=s.a.useRef(!1),c=s.a.useState(!1),i=Object(St.a)(c,2),o=i[0],u=i[1],l=function(){var t=Object(E.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(!0),t.prev=1,t.next=4,e.callbackFn();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),on.enqueueError(fe.formatMessage(t.t0));case 9:a.current&&u(!1);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}();return s.a.useEffect((function(){return a.current=!0,function(){a.current=!1}}),[]),Object(Tt.jsx)(pn.a,{loading:o,size:null!==(t=e.size)&&void 0!==t?t:"small",variant:null!==(n=e.variant)&&void 0!==n?n:"contained",color:null!==(r=e.color)&&void 0!==r?r:"primary",fullWidth:e.fullWidth,disabled:e.disabled,onClick:l,startIcon:e.startIcon,sx:e.sx,children:e.children})},vn=n(101),mn=n(56),On=n(394),gn=n(393),xn=n(395),yn=function(){function e(){Object(j.a)(this,e)}return Object(v.a)(e,null,[{key:"roundBigNumber",value:function(e,t,n){return e.div(new k.BigNumber("10").pow(t)).decimalPlaces(n,k.BigNumber.ROUND_DOWN)}},{key:"formatBigNumber",value:function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:14,c=e.roundBigNumber(t,n,r);if(c.lte(0))return"<1";var i=c.toFormat();return a>=i.length?i:i.substring(0,a)+"..."}},{key:"formatVite",value:function(t){return e.formatBigNumber(t,S.b.CURRENCY_DECIMALS,2)}},{key:"formatViteFull",value:function(t){return e.roundBigNumber(t,S.b.CURRENCY_DECIMALS,S.b.CURRENCY_DECIMALS).toFormat()}},{key:"formatViteTooltip",value:function(t){var n=e.roundBigNumber(t,S.b.CURRENCY_DECIMALS,S.b.CURRENCY_DECIMALS);return"".concat(n.toFormat()," $").concat(S.b.CURRENCY_NAME)}}]),e}(),kn=n(223),wn=s.a.forwardRef((function(e,t){var n=e.icon,r=Object(St.a)(n.icon,5),a=r[0],c=r[1],i=r[4];return Object(Tt.jsx)(kn.a,{ref:t,viewBox:"0 0 ".concat(a," ").concat(c),sx:e.sx,children:"string"===typeof i?Object(Tt.jsx)("path",{d:i}):i.map((function(e,t){return Object(Tt.jsx)("path",{style:{opacity:0===t?.4:1},d:e})}))})})),An=n(4),_n=n(85),Cn=n(392),En=["className"],In=["className"],Sn=["className"],Bn=function(e){return Object(Tt.jsx)(Nn,Object(p.a)(Object(p.a)({},e),{},{sx:Object(An.a)({},"& .".concat(_n.a.tooltip),{maxWidth:"none"})}))},Nn=(Object(h.a)((function(e){var t=e.className,n=Object(zt.a)(e,En);return Object(Tt.jsx)(Cn.a,Object(p.a)(Object(p.a)({},n),{},{classes:{popper:t}}))}))((function(e){var t=e.theme;return Object(An.a)({},"& .".concat(_n.a.tooltip),{backgroundColor:t.palette.common.white,color:"rgba(0, 0, 0, 0.87)",boxShadow:t.shadows[1],fontSize:11})})),Object(h.a)((function(e){var t=e.className,n=Object(zt.a)(e,In);return Object(Tt.jsx)(Cn.a,Object(p.a)(Object(p.a)({},n),{},{arrow:!0,classes:{popper:t}}))}))((function(e){var t,n=e.theme;return t={},Object(An.a)(t,"& .".concat(_n.a.arrow),{color:n.palette.common.black}),Object(An.a)(t,"& .".concat(_n.a.tooltip),{backgroundColor:n.palette.common.black}),t}))),Mn=(Object(h.a)((function(e){var t=e.className,n=Object(zt.a)(e,Sn);return Object(Tt.jsx)(Cn.a,Object(p.a)(Object(p.a)({},n),{},{classes:{popper:t}}))}))((function(e){var t=e.theme;return Object(An.a)({},"& .".concat(_n.a.tooltip),{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:t.typography.pxToRem(12),border:"1px solid #dadde9"})})),Object(h.a)("div")((function(e){e.theme;return"\n  position: relative;\n  height: 320px;\n  // animation: lightning 4s ease-out infinite;\n  background-image: url('".concat(S.b.ITEM_BG_URL,"');\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n")}))),Pn=Object(h.a)("div")((function(e){e.theme;return"\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  image-rendering: pixelated;\n"})),Tn=function(e){var t,n,r=function(e){return yn.formatViteTooltip(e)},a=function(e){return yn.formatVite(e)};return Object(Tt.jsx)(gn.a,{children:Object(Tt.jsxs)(On.a,{component:cn.b,to:"/punk/".concat(e.item.id),children:[Object(Tt.jsxs)(Mn,{children:[e.item.owner&&Object(Tt.jsx)(dn.a,{sx:{position:"absolute",top:5,left:5},children:Object(Tt.jsx)(Bn,{title:Object(Tt.jsx)("span",{children:e.item.owner}),placement:"bottom",arrow:!0,children:Object(Tt.jsx)(Pt.a,{size:"small",icon:Object(Tt.jsx)(wn,{icon:vn.c,sx:{fontSize:"small",ml:1}}),sx:{fontSize:"0.7rem"},label:(n=e.item.owner,T.a.truncateStringInTheMiddle(n,10,5))})})}),Object(Tt.jsx)(dn.a,{sx:{position:"absolute",top:5,right:5},children:Object(Tt.jsx)(Bn,{title:Object(Tt.jsx)("span",{children:"Rarity rank"}),placement:"bottom",arrow:!0,children:Object(Tt.jsx)(Pt.a,{size:"small",icon:Object(Tt.jsx)(wn,{icon:vn.a,sx:{fontSize:"small",ml:1}}),sx:{fontSize:"0.7rem"},label:e.item.rank})})}),Object(Tt.jsx)(dn.a,{sx:{position:"absolute",bottom:5,left:5,width:"calc(100% - 10px)"},children:Object(Tt.jsxs)(dn.a,{children:[e.item.bid&&Object(Tt.jsx)(Bn,{title:Object(Tt.jsxs)("span",{children:["Bid: ",r(e.item.bid.amount)]}),placement:"bottom",arrow:!0,children:Object(Tt.jsx)(Pt.a,{size:"small",icon:Object(Tt.jsx)(wn,{icon:mn.g,sx:{fontSize:"small",ml:1}}),sx:{fontSize:"0.7rem",mt:1,mr:1},label:a(e.item.bid.amount)})}),e.item.offer&&e.item.offer.minAmount.gt(0)&&Object(Tt.jsx)(Bn,{title:Object(Tt.jsxs)("span",{children:["Price: ",r(e.item.offer.minAmount)]}),placement:"bottom",arrow:!0,children:Object(Tt.jsx)(Pt.a,{size:"small",icon:Object(Tt.jsx)(wn,{icon:mn.j,sx:{fontSize:"small",ml:1}}),sx:{fontSize:"0.7rem",mt:1,float:"right"},label:a(e.item.offer.minAmount)})})]})}),Object(Tt.jsx)(Pn,{sx:{backgroundImage:"url('".concat(He.getPunkUrl(e.item.image,e.item.cid),"')")}})]}),Object(Tt.jsxs)(xn.a,{sx:{p:0},children:[Object(Tt.jsxs)(Mt.a,{variant:"h6",component:"div",sx:{p:1},children:[S.b.PUNK_NAME," #",e.item.id]}),Object(Tt.jsx)(dn.a,{sx:{height:"70px",overflow:"auto"},children:Object(Tt.jsx)(dn.a,{sx:{p:1},children:null===(t=e.item.attributes)||void 0===t?void 0:t.map((function(e){return Object(Tt.jsx)(Pt.a,{label:e,variant:"outlined",sx:{mb:1,mr:1},size:"small"},e)}))})})]})]})})},Fn=function(e){return Object(Tt.jsx)(Tt.Fragment,{children:e.error?Object(Tt.jsx)(bn,{message:fe.formatMessage(e.error),type:"warning"}):Object(Tt.jsx)(Tt.Fragment,{children:e.isLoading||!e.isEmpty?Object(Tt.jsx)(Tt.Fragment,{}):Object(Tt.jsx)(bn,{message:"No punks found",type:"default"})})})},Rn=function(e){return Object(Tt.jsx)(ln.a,{container:!0,spacing:3,justifyContent:"center",alignItems:"center",children:Object(Tt.jsx)(ln.a,{item:!0,xs:12,md:6,children:e.isLoading?Object(Tt.jsx)(bn,{message:"Loading...",type:"default"}):Object(Tt.jsx)(Fn,{error:e.error,isLoading:e.isLoading,isEmpty:e.isEmpty})},"1")})},Ln=function(e){return Object(Tt.jsx)(Tt.Fragment,{children:Object(Tt.jsx)(Vt.a,{sx:{pt:3,pb:6},maxWidth:"xl",children:e.items.length>0?Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)(fn.a,{dataLength:e.items.length,next:e.fetchMoreDataAsync,hasMore:e.hasMore,loader:Object(Tt.jsx)(Rn,{error:e.error,isLoading:e.isLoading,isEmpty:e.items.length<=0}),scrollThreshold:"200px",scrollableTarget:"mainscroll",children:Object(Tt.jsx)(ln.a,{container:!0,spacing:3,justifyContent:"center",alignItems:"center",marginBottom:3,children:e.items.map((function(e){return Object(Tt.jsx)(ln.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(Tt.jsx)(Tn,{item:e})},e.id)}))})}),e.hasMore&&!e.isLoading&&Object(Tt.jsx)(dn.a,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:Object(Tt.jsx)(jn,{variant:"outlined",callbackFn:e.fetchMoreDataAsync,sx:{minWidth:"200px"},children:"Load more"})})]}):Object(Tt.jsx)(Rn,{error:e.error,isLoading:e.isLoading,isEmpty:e.items.length<=0})})})},Dn=n(212),Un=n.n(Dn),Wn=n(350),qn=n(409),zn=new function e(){var t=this;Object(j.a)(this,e),this._apollo=void 0,this.getContractQuota=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"network-only";return t._apollo.query({query:wt,variables:{address:I.a.CONTRACT_ADDRESS},fetchPolicy:e})},this.getAccountAuctions=function(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"network-only";return t._apollo.query({query:At,variables:{address:e,limit:n,cursor:r},fetchPolicy:a})},this._apollo=It()},Vn=function(){return zn},Hn=n(151),Qn=n(383),Gn=n(402),$n=n(403),Kn=n(404),Yn=n(377),Jn=n(405),Zn=n(406),Xn=n(407),er=n(408),tr=function(){function e(){var t=this;Object(j.a)(this,e),this._apollo=void 0,this.getMarketInfoAsync=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"network-only";return t._apollo.query({query:Ot,fetchPolicy:e})},this.getEventsAsync=function(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"network-only";return t._apollo.query({query:yt,variables:{offset:e,limit:n,height:r},fetchPolicy:a})},this._apollo=It()}return Object(v.a)(e,[{key:"offerAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n,r){var a,c,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._apollo.mutate({mutation:Ze,variables:{id:t,amount:n,address:T.a.isNullOrWhitespace(r)?void 0:r}});case 2:return i=e.sent,e.abrupt("return",Boolean(null!==(a=null===(c=i.data)||void 0===c?void 0:c.offer)&&void 0!==a&&a));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"cancelOfferAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._apollo.mutate({mutation:Xe,variables:{id:t}});case 2:return a=e.sent,e.abrupt("return",Boolean(null!==(n=null===(r=a.data)||void 0===r?void 0:r.cancelOffer)&&void 0!==n&&n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"buyAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){var r,a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._apollo.mutate({mutation:et,variables:{id:t,amount:n}});case 2:return c=e.sent,e.abrupt("return",Boolean(null!==(r=null===(a=c.data)||void 0===a?void 0:a.buy)&&void 0!==r&&r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"bidAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){var r,a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._apollo.mutate({mutation:tt,variables:{id:t,amount:n}});case 2:return c=e.sent,e.abrupt("return",Boolean(null!==(r=null===(a=c.data)||void 0===a?void 0:a.bid)&&void 0!==r&&r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"acceptBidAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t,n){var r,a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._apollo.mutate({mutation:nt,variables:{id:t,amount:n}});case 2:return c=e.sent,e.abrupt("return",Boolean(null!==(r=null===(a=c.data)||void 0===a?void 0:a.acceptBid)&&void 0!==r&&r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"cancelBidAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(t){var n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._apollo.mutate({mutation:rt,variables:{id:t}});case 2:return a=e.sent,e.abrupt("return",Boolean(null!==(n=null===(r=a.data)||void 0===r?void 0:r.cancelBid)&&void 0!==n&&n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),nr=new tr,rr=function(){return nr},ar=function e(){Object(j.a)(this,e)};ar.getBuyEventTypeIcon=function(){return mn.c},ar.getClaimEventTypeIcon=function(){return mn.e},ar.getOfferEventTypeIcon=function(){return mn.j},ar.getGiftEventTypeIcon=function(){return mn.f},ar.getCancelSaleEventTypeIcon=function(){return mn.h},ar.getCancelGiftEventTypeIcon=function(){return mn.d},ar.getPunkEventTypeIcon=function(e,t){switch(e){case te.g.Mint:return mn.k;case te.g.Offer:return t&&t.gt(0)?ar.getOfferEventTypeIcon():ar.getGiftEventTypeIcon();case te.g.NewBid:return mn.g;case te.g.CancelBid:return mn.a;case te.g.Buy:return t&&t.gt(0)?ar.getBuyEventTypeIcon():ar.getClaimEventTypeIcon();case te.g.CancelOffer:return t&&t.gt(0)?ar.getCancelSaleEventTypeIcon():ar.getCancelGiftEventTypeIcon();default:return mn.i}},ar.getAccountAuctionTypeIcon=function(e,t){switch(e){case te.a.Bid:return ar.getPunkEventTypeIcon(te.g.NewBid,t);case te.a.Offer:return ar.getPunkEventTypeIcon(te.g.Offer,t);default:return ar.getPunkEventTypeIcon(te.g.Unknown,t)}};var cr=function(e){return Object(Tt.jsx)(ln.a,{item:!0,xs:12,md:6,children:e.loading?Object(Tt.jsx)(bn,{message:"Loading...",type:"default"}):Object(Tt.jsx)(Tt.Fragment,{children:e.error?Object(Tt.jsx)(bn,{message:fe.formatMessage(e.error),type:"warning"}):Object(Tt.jsx)(Tt.Fragment,{children:e.count>0?Object(Tt.jsx)(Tt.Fragment,{}):Object(Tt.jsx)(bn,{message:e.message,type:"default"})})})},"1")},ir=n(396),sr=n(348),or=n(397),ur=n(398),lr=n(349),dr=n(399),fr=function(e){var t=Object(i.useState)(""),n=Object(St.a)(t,2),r=n[0],a=n[1],c=rr();Object(i.useEffect)((function(){var t,n;e.state.type===te.f.ACCEPT_OFFER?(null===(t=e.state.item.offer)||void 0===t?void 0:t.minAmount.gt(0))&&a(yn.formatViteTooltip(e.state.item.offer.minAmount)):(null===(n=e.state.item.bid)||void 0===n?void 0:n.amount.gt(0))&&a(yn.formatViteTooltip(e.state.item.bid.amount))}),[e.state]);var s=function(){e.setState(Object(p.a)(Object(p.a)({},e.state),{},{open:!1}))},o=function(){var t=Object(E.a)(C.a.mark((function t(){var n,r,a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="Congratulations! You %ACTION_NAME ".concat(S.b.PUNK_NAME," #").concat(e.state.item.id),r=!1,t.prev=2,e.state.type!==te.f.ACCEPT_OFFER){t.next=12;break}if(e.state.item.offer){t.next=6;break}throw new Error("".concat(S.b.PUNK_NAME," #").concat(e.state.item.id," is not for sale"));case 6:return t.next=8,c.buyAsync(e.state.item.id,e.state.item.offer.minAmount.toFixed());case 8:r=t.sent,n=n.replace("%ACTION_NAME","bought"),t.next=18;break;case 12:if(e.state.item.bid){t.next=14;break}throw new Error("".concat(S.b.PUNK_NAME," #").concat(e.state.item.id," has no bid"));case 14:return t.next=16,c.acceptBidAsync(e.state.item.id,null===(a=e.state.item.bid)||void 0===a?void 0:a.amount.toFixed());case 16:r=t.sent,n=n.replace("%ACTION_NAME","sold");case 18:r?(on.enqueueMessage(n),s()):on.enqueueError("Error"),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(2),r=!1,on.enqueueError(t.t0);case 25:return t.prev=25,t.next=28,e.callbackAsync(r);case 28:return t.finish(25);case 29:case"end":return t.stop()}}),t,null,[[2,21,25,29]])})));return function(){return t.apply(this,arguments)}}();return Object(Tt.jsxs)(ir.a,{onClose:s,open:e.state.open,maxWidth:"xs",fullWidth:!0,children:[Object(Tt.jsx)(sr.a,{children:"Confirmation required"}),Object(Tt.jsxs)(or.a,{children:[e.state.type===te.f.ACCEPT_OFFER?Object(Tt.jsxs)(Mt.a,{variant:"body1",color:"textSecondary",gutterBottom:!0,children:["Buy ",S.b.PUNK_NAME," #",e.state.item.id]}):Object(Tt.jsx)(Tt.Fragment,{children:Object(Tt.jsxs)(Mt.a,{variant:"body1",color:"textSecondary",gutterBottom:!0,children:["Accept bid for ",S.b.PUNK_NAME," #",e.state.item.id]})}),Object(Tt.jsx)(ur.a,{fullWidth:!0,sx:{mt:2},variant:"standard",children:Object(Tt.jsx)(lr.a,{id:"amount",value:r,disabled:!0})})]}),Object(Tt.jsxs)(dr.a,{children:[Object(Tt.jsx)(Yn.a,{onClick:s,children:"Close"}),Object(Tt.jsx)(jn,{size:"medium",color:"primary",callbackFn:o,children:"Confirm"})]})]})},hr=n(400),br=n(373),pr=n(401),jr=function(e){var t=Object(i.useState)(""),n=Object(St.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(!1),s=Object(St.a)(c,2),o=s[0],u=s[1],l=rr(),d=function(e){a(e),u(T.a.isNullOrWhitespace(e)||new k.BigNumber(e).lte(0))},f=e.updateFee;Object(i.useEffect)((function(){e.state.open&&(d(""),f("cache-first"))}),[e.state,f]);var h=function(){e.setState(Object(p.a)(Object(p.a)({},e.state),{},{open:!1}))},b=function(){var t=Object(E.a)(C.a.mark((function t(){var n,a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!1,t.prev=1,a=new k.BigNumber(r).shiftedBy(S.b.CURRENCY_DECIMALS),t.next=5,l.bidAsync(e.state.item.id,a.toFixed());case 5:(n=t.sent)?(on.enqueueMessage("Bid success"),h()):(on.enqueueError("Error"),f()),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),n=!1,on.enqueueError(t.t0);case 13:return t.prev=13,t.next=16,e.callbackAsync(n);case 16:return t.finish(13);case 17:case"end":return t.stop()}}),t,null,[[1,9,13,17]])})));return function(){return t.apply(this,arguments)}}();return Object(Tt.jsxs)(ir.a,{onClose:h,open:e.state.open,maxWidth:"xs",fullWidth:!0,children:[Object(Tt.jsx)(sr.a,{children:"Bid"}),Object(Tt.jsxs)(or.a,{children:[Object(Tt.jsxs)(hr.a,{children:["Place a bid for ",S.b.PUNK_NAME," #",e.state.item.id]}),Object(Tt.jsxs)(ur.a,{fullWidth:!0,sx:{mt:2},variant:"standard",children:[Object(Tt.jsx)(br.a,{htmlFor:"amount",children:"Amount"}),Object(Tt.jsx)(lr.a,{id:"amount",value:r,onChange:function(e){d(e.target.value)},type:"number",autoFocus:!0,startAdornment:Object(Tt.jsxs)(pr.a,{position:"start",children:["$",S.b.CURRENCY_NAME]})})]}),e.fee.gt(0)&&Object(Tt.jsxs)(hr.a,{align:"right",children:["+ ",yn.formatVite(e.fee)," ",S.b.CURRENCY_NAME," protocol fee"]})]}),Object(Tt.jsxs)(dr.a,{children:[Object(Tt.jsx)(Yn.a,{onClick:h,children:"Cancel"}),Object(Tt.jsx)(jn,{size:"medium",color:"primary",callbackFn:b,disabled:o,children:"Confirm"})]})]})},vr=function(e){var t=Object(i.useState)(""),n=Object(St.a)(t,2),r=n[0],a=n[1],c=rr();Object(i.useEffect)((function(){var t;a(e.state.type===te.f.CANCEL_BID?S.a.bid:(null===(t=e.state.item.offer)||void 0===t?void 0:t.minAmount.gt(0))?S.a.listing:S.a.gift)}),[e.state]);var s=function(){e.setState(Object(p.a)(Object(p.a)({},e.state),{},{open:!1}))},o=function(){var t=Object(E.a)(C.a.mark((function t(){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!1,t.prev=1,e.state.type!==te.f.CANCEL_BID){t.next=8;break}return t.next=5,c.cancelBidAsync(e.state.item.id);case 5:n=t.sent,t.next=11;break;case 8:return t.next=10,c.cancelOfferAsync(e.state.item.id);case 10:n=t.sent;case 11:n?(on.enqueueMessage("".concat(r," cancelled")),s()):on.enqueueError("Error"),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(1),n=!1,on.enqueueError(t.t0);case 18:return t.prev=18,t.next=21,e.callbackAsync(n);case 21:return t.finish(18);case 22:case"end":return t.stop()}}),t,null,[[1,14,18,22]])})));return function(){return t.apply(this,arguments)}}();return Object(Tt.jsxs)(ir.a,{onClose:s,open:e.state.open,maxWidth:"xs",fullWidth:!0,children:[Object(Tt.jsx)(sr.a,{children:"Cancel"}),Object(Tt.jsx)(or.a,{children:Object(Tt.jsxs)(hr.a,{children:["Cancel the ",r.toLowerCase()," for ",S.b.PUNK_NAME," #",e.state.item.id]})}),Object(Tt.jsxs)(dr.a,{children:[Object(Tt.jsx)(Yn.a,{onClick:s,children:"Close"}),Object(Tt.jsx)(jn,{size:"medium",color:"primary",callbackFn:o,children:"Confirm"})]})]})},mr=function(e){var t=Object(i.useState)(""),n=Object(St.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(!0),s=Object(St.a)(c,2),o=s[0],u=s[1],l=rr(),d=e.updateFee;Object(i.useEffect)((function(){e.state.open&&(a(""),d("cache-first"))}),[e.state,d]);var f=function(){e.setState(Object(p.a)(Object(p.a)({},e.state),{},{open:!1}))},h=function(){var t=Object(E.a)(C.a.mark((function t(){var n,a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!1,t.prev=1,a=new k.BigNumber(0),t.next=5,l.offerAsync(e.state.item.id,a.toFixed(),T.a.isNullOrWhitespace(r)?void 0:r);case 5:(n=t.sent)?(on.enqueueMessage("".concat(S.a.gift," success")),f()):(on.enqueueError("Error"),d()),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),n=!1,on.enqueueError(t.t0);case 13:return t.prev=13,t.next=16,e.callbackAsync(n);case 16:return t.finish(13);case 17:case"end":return t.stop()}}),t,null,[[1,9,13,17]])})));return function(){return t.apply(this,arguments)}}();return Object(Tt.jsxs)(ir.a,{onClose:f,open:e.state.open,maxWidth:"xs",fullWidth:!0,children:[Object(Tt.jsx)(sr.a,{children:"Gift/transfer"}),Object(Tt.jsxs)(or.a,{children:[Object(Tt.jsxs)(hr.a,{children:["Transfer ",S.b.PUNK_NAME," #",e.state.item.id," as a gift"]}),Object(Tt.jsxs)(ur.a,{fullWidth:!0,variant:"standard",children:[Object(Tt.jsx)(br.a,{htmlFor:"address",children:"Address"}),Object(Tt.jsx)(lr.a,{id:"address",value:r,onChange:function(e){!function(e){a(e),u(T.a.isNullOrWhitespace(e))}(e.target.value)},placeholder:"Only this address will be eligible to claim",type:"text"})]}),e.fee.gt(0)?Object(Tt.jsxs)(hr.a,{align:"right",children:["+ ",yn.formatVite(e.fee)," ",S.b.CURRENCY_NAME," protocol fee"]}):Object(Tt.jsx)(dn.a,{marginTop:2})]}),Object(Tt.jsxs)(dr.a,{children:[Object(Tt.jsx)(Yn.a,{onClick:f,children:"Cancel"}),Object(Tt.jsx)(jn,{size:"medium",color:"primary",callbackFn:h,disabled:o,children:"Confirm"})]})]})},Or=function(e){var t=Object(i.useState)(""),n=Object(St.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(""),s=Object(St.a)(c,2),o=s[0],u=s[1],l=Object(i.useState)(!1),d=Object(St.a)(l,2),f=d[0],h=d[1],b=rr(),j=function(e){a(e),h(T.a.isNullOrWhitespace(e)||new k.BigNumber(e).lt(0))},v=e.updateFee;Object(i.useEffect)((function(){e.state.open&&(j(""),u(""),v("cache-first"))}),[e.state,v]);var m=function(){e.setState(Object(p.a)(Object(p.a)({},e.state),{},{open:!1}))},O=function(){var t=Object(E.a)(C.a.mark((function t(){var n,a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!1,t.prev=1,a=new k.BigNumber(r).shiftedBy(S.b.CURRENCY_DECIMALS),t.next=5,b.offerAsync(e.state.item.id,a.toFixed(),T.a.isNullOrWhitespace(o)?void 0:o);case 5:(n=t.sent)?(on.enqueueMessage("Listed for sale"),m()):(on.enqueueError("Error"),v()),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),n=!1,on.enqueueError(t.t0);case 13:return t.prev=13,t.next=16,e.callbackAsync(n);case 16:return t.finish(13);case 17:case"end":return t.stop()}}),t,null,[[1,9,13,17]])})));return function(){return t.apply(this,arguments)}}();return Object(Tt.jsxs)(ir.a,{onClose:m,open:e.state.open,maxWidth:"xs",fullWidth:!0,children:[Object(Tt.jsx)(sr.a,{children:"Sell"}),Object(Tt.jsxs)(or.a,{children:[Object(Tt.jsxs)(hr.a,{children:["List ",S.b.PUNK_NAME," #",e.state.item.id," for sale"]}),Object(Tt.jsxs)(ur.a,{fullWidth:!0,sx:{mt:2},variant:"standard",children:[Object(Tt.jsx)(br.a,{htmlFor:"amount",children:"Amount"}),Object(Tt.jsx)(lr.a,{id:"amount",value:r,onChange:function(e){j(e.target.value)},type:"number",autoFocus:!0,startAdornment:Object(Tt.jsxs)(pr.a,{position:"start",children:["$",S.b.CURRENCY_NAME]})})]}),e.fee.gt(0)?Object(Tt.jsxs)(hr.a,{align:"right",children:["+ ",yn.formatVite(e.fee)," ",S.b.CURRENCY_NAME," protocol fee"]}):Object(Tt.jsx)(dn.a,{marginTop:2}),Object(Tt.jsxs)(ur.a,{fullWidth:!0,variant:"standard",children:[Object(Tt.jsx)(br.a,{htmlFor:"address",children:"Address (optional)"}),Object(Tt.jsx)(lr.a,{id:"address",value:o,onChange:function(e){u(e.target.value)},placeholder:"Only this address will be eligible to buy",type:"text"})]})]}),Object(Tt.jsxs)(dr.a,{children:[Object(Tt.jsx)(Yn.a,{onClick:m,children:"Cancel"}),Object(Tt.jsx)(jn,{size:"medium",color:"primary",callbackFn:O,disabled:f,children:"Confirm"})]})]})},gr=Object(F.a)(),xr=function(e){var t=s.a.useRef(!1),n=Object(i.useState)(ce.defaultBigNumber),r=Object(St.a)(n,2),a=r[0],c=r[1],o=rr(),u=Object(W.a)();s.a.useEffect((function(){return t.current=!0,function(){t.current=!1}}),[]);var l=Object(i.useCallback)(Object(E.a)(C.a.mark((function e(){var n,r,a,i=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>0&&void 0!==i[0]?i[0]:"network-only",!t.current){e.next=13;break}return c(ce.defaultBigNumber),e.prev=3,e.next=6,o.getMarketInfoAsync(n);case 6:r=e.sent,t.current&&(a=r.data.marketInfo)&&a.actionPrice.gt(0)&&c(a.actionPrice),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),gr.error(e.t0)();case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),[o]);switch(Object(i.useEffect)((function(){var e=function(e){gr.info("eventType: ".concat(e.eventType," amount: ").concat(e.value.toFixed()," timestamp: ").concat(e.timestamp.toFixed()))(),l()};return gr.info("emitter.on",te.c.MarketChanged)(),u.on(te.c.MarketChanged,e),function(){gr.info("emitter.off",te.c.MarketChanged)(),u.off(te.c.MarketChanged,e)}}),[u,l]),e.state.type){case te.f.BID:return Object(Tt.jsx)(jr,{state:e.state,fee:a,updateFee:l,setState:e.setState,callbackAsync:function(t){return e.callbackAsync(t)}});case te.f.OFFER:return Object(Tt.jsx)(Or,{state:e.state,fee:a,updateFee:l,setState:e.setState,callbackAsync:function(t){return e.callbackAsync(t)}});case te.f.GIFT:return Object(Tt.jsx)(mr,{state:e.state,fee:a,updateFee:l,setState:e.setState,callbackAsync:function(t){return e.callbackAsync(t)}});case te.f.CANCEL_BID:case te.f.CANCEL_OFFER:return Object(Tt.jsx)(vr,{state:e.state,setState:e.setState,callbackAsync:function(t){return e.callbackAsync(t)}});case te.f.ACCEPT_BID:case te.f.ACCEPT_OFFER:return Object(Tt.jsx)(fr,{state:e.state,setState:e.setState,callbackAsync:function(t){return e.callbackAsync(t)}});default:return Object(Tt.jsx)(Tt.Fragment,{})}},yr=Object(F.a)(),kr=Object(h.a)(Qn.a)((function(e){e.theme;return"\n  background-image: url('".concat(S.b.ITEM_BG_URL,"');\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  image-rendering: pixelated;\n  margin-right: 10px;\n")})),wr=Object(h.a)(Gn.a)((function(e){e.theme;return"\n  background-color: rgba(255, 255, 255, 0.3);\n"})),Ar=function(e){var t,n,r,a,c,s=Object(i.useState)(!1),o=Object(St.a)(s,2),u=o[0],l=o[1],d=rn(),f=Object(un.a)(ft,{variables:{id:e.item.punkId.toString()},fetchPolicy:"network-only",onCompleted:function(e){var t,n;l((null===(t=e.punk.owner)||void 0===t?void 0:t.toLowerCase())===(null===(n=d.account)||void 0===n?void 0:n.toLowerCase()))}}),h=new ee,b=function(){var t=Object(E.a)(C.a.mark((function t(){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===(n=f.data)||void 0===n?void 0:n.punk)){t.next=3;break}return t.next=3,e.handleClaimAsync(e.item);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p=function(t){var n;(null===(n=f.data)||void 0===n?void 0:n.punk)&&e.handleOpenDialog(t,f.data.punk,e.item)};return Object(Tt.jsxs)($n.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(Tt.jsxs)(Gn.a,{component:"th",scope:"row",children:[Object(Tt.jsx)(Hn.a,{icon:ar.getAccountAuctionTypeIcon(e.item.auctionType,e.item.amount)})," ",Object(Tt.jsx)("b",{children:function(){switch(e.item.auctionType){case te.a.Offer:return!e.item.amount||e.item.amount.lte(0)?S.a.gift:S.a.list;case te.a.Bid:return S.a.bid}return S.a.unknown}()})]}),Object(Tt.jsx)(Gn.a,{children:Object(Tt.jsxs)(Kn.a,{underline:"hover",component:cn.b,to:"/punk/".concat(e.item.punkId),display:"flex",alignItems:"center",children:[Object(Tt.jsx)(kr,{variant:"rounded",src:He.getPunkUrl(null===(t=f.data)||void 0===t?void 0:t.punk.image,null===(n=f.data)||void 0===n?void 0:n.punk.cid)}),S.b.PUNK_NAME," #",e.item.punkId]})}),Object(Tt.jsx)(Gn.a,{children:(null===(r=e.item.amount)||void 0===r?void 0:r.gt(0))?Object(Tt.jsx)(Tt.Fragment,{children:Object(Tt.jsx)(Bn,{title:(c=e.item.amount,yn.formatViteTooltip(c)),children:Object(Tt.jsx)("span",{children:function(e){return yn.formatVite(e)}(e.item.amount)})})}):Object(Tt.jsx)(Tt.Fragment,{})}),Object(Tt.jsx)(Gn.a,{children:(a=e.item.timestamp.toFixed(),h.getLocalReverseFormatted(h.getFromUnix(a)))}),Object(Tt.jsxs)(Gn.a,{align:"right",children:[e.item.auctionType===te.a.Offer&&Object(Tt.jsx)(Tt.Fragment,{children:u?Object(Tt.jsx)(Yn.a,{size:"small",variant:"outlined",sx:{minWidth:"70px"},onClick:function(){p(te.f.CANCEL_OFFER)},disabled:!e.isAuthorized,children:S.a.cancel}):Object(Tt.jsx)(Tt.Fragment,{children:!e.item.amount||e.item.amount.lte(0)?Object(Tt.jsx)(jn,{size:"small",variant:"outlined",color:"secondary",sx:{minWidth:"70px"},callbackFn:b,disabled:!e.isAuthorized,children:S.a.claim}):Object(Tt.jsx)(Yn.a,{size:"small",variant:"outlined",sx:{minWidth:"70px"},onClick:function(){p(te.f.ACCEPT_OFFER)},disabled:!e.isAuthorized,children:S.a.buy})})}),e.item.auctionType===te.a.Bid&&Object(Tt.jsx)(Tt.Fragment,{children:u?Object(Tt.jsx)(Yn.a,{size:"small",variant:"outlined",sx:{minWidth:"70px"},color:"secondary",onClick:function(){p(te.f.ACCEPT_BID)},disabled:!e.isAuthorized,children:S.a.accept}):Object(Tt.jsx)(Yn.a,{size:"small",variant:"outlined",sx:{minWidth:"70px"},onClick:function(){p(te.f.CANCEL_BID)},disabled:!e.isAuthorized,children:S.a.cancel})})]})]})},_r=function(e){var t,n,r=Object(i.useState)({}),a=Object(St.a)(r,2),c=a[0],s=a[1],o=Object(i.useState)({type:te.f.UNKNOWN,open:!1,item:{}}),u=Object(St.a)(o,2),l=u[0],d=u[1],f=rr(),h="No active auctions",b=function(){var t=Object(E.a)(C.a.mark((function t(n){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.auctionType===te.a.Offer){t.next=3;break}throw new Error("".concat(S.b.PUNK_NAME," #").concat(n.punkId," cannot be claimed"));case 3:return t.next=5,f.buyAsync(n.punkId.toString(),n.amount.toFixed());case 5:t.sent&&on.enqueueMessage("Congratulations! You claimed ".concat(S.b.PUNK_NAME," #").concat(n.punkId)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),on.enqueueError(t.t0);case 12:return t.prev=12,e.cleanupAsync(n),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})));return function(e){return t.apply(this,arguments)}}(),j=function(e,t,n){s(n),d(Object(p.a)(Object(p.a)({},l),{},{type:e,open:!0,item:t}))},v=function(){var t=Object(E.a)(C.a.mark((function t(n){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:yr.info("dialogCallbackAsync",n)(),n&&e.cleanupAsync(c);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)(hn.a,{id:"event-list",style:{height:null!==(t=e.height)&&void 0!==t?t:300,overflow:"auto",backgroundColor:"rgba(255, 255, 255, 0.5)"},children:e.newEvents.length>0||e.events.length>0?Object(Tt.jsx)(fn.a,{dataLength:null!==(n=e.events.length)&&void 0!==n?n:0,next:e.fetchMoreDataAsync,hasMore:e.hasMore,loader:Object(Tt.jsx)(ln.a,{container:!0,spacing:3,justifyContent:"center",alignItems:"center",children:Object(Tt.jsx)(cr,{loading:e.loading,error:e.error,count:e.events.length,message:h})}),scrollableTarget:"event-list",children:Object(Tt.jsx)(Jn.a,{children:Object(Tt.jsxs)(Zn.a,{stickyHeader:!0,children:[Object(Tt.jsx)(Xn.a,{children:Object(Tt.jsxs)($n.a,{children:[Object(Tt.jsx)(wr,{}),Object(Tt.jsx)(wr,{children:Object(Tt.jsx)("b",{children:"Punk"})}),Object(Tt.jsx)(wr,{children:Object(Tt.jsx)("b",{children:"Amount"})}),Object(Tt.jsx)(wr,{children:Object(Tt.jsx)("b",{children:"Date"})}),Object(Tt.jsx)(wr,{align:"right",children:Object(Tt.jsx)("b",{children:"Action"})})]})}),Object(Tt.jsxs)(er.a,{children:[e.newEvents.map((function(t){return Object(Tt.jsx)(Ar,{isAuthorized:e.isAuthorized,handleClaimAsync:b,handleOpenDialog:j,item:t},"new-events-".concat(t.timestamp.toFixed()))})),e.events.map((function(t){return Object(Tt.jsx)(Ar,{isAuthorized:e.isAuthorized,handleClaimAsync:b,handleOpenDialog:j,item:t},"events-".concat(t.timestamp.toFixed()))}))]})]})})}):Object(Tt.jsx)(ln.a,{sx:{height:"100%"},container:!0,spacing:3,justifyContent:"center",alignItems:"center",children:Object(Tt.jsx)(cr,{loading:e.loading,error:e.error,count:e.events.length,message:h})})}),Object(Tt.jsx)(xr,{state:l,setState:d,callbackAsync:v})]})},Cr=Object(F.a)(),Er=function(e){var t=Object(i.useState)(!1),n=Object(St.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(!1),s=Object(St.a)(c,2),o=s[0],u=s[1],l=Object(i.useState)(!0),d=Object(St.a)(l,2),f=d[0],h=d[1],b=Object(i.useState)(void 0),p=Object(St.a)(b,2),j=p[0],v=p[1],m=Object(i.useState)(void 0),O=Object(St.a)(m,2),g=O[0],x=O[1],y=Object(i.useState)([]),k=Object(St.a)(y,2),w=k[0],A=k[1],_=Object(i.useState)([]),I=Object(St.a)(_,2),S=I[0],B=I[1],M=Vn(),P=Object(W.a)(),F=rn(),R=Object(un.a)(At,{variables:{address:e.address,limit:8},fetchPolicy:"network-only",onCompleted:function(e){var t;x(e.accountAuctions.cursor),A(e.accountAuctions.auctions.map((function(e){return ce.toAccountAuction(e)}))),h(!T.a.isNullOrWhitespace(null===(t=e.accountAuctions.cursor)||void 0===t?void 0:t.next))}});Object(i.useEffect)((function(){var t,n;a((null===(t=e.address)||void 0===t?void 0:t.toLowerCase())===(null===(n=F.account)||void 0===n?void 0:n.toLowerCase()))}),[e.address,F.account]),Object(i.useEffect)((function(){u(R.loading)}),[R.loading]),Object(i.useEffect)((function(){v(R.error)}),[R.error]);var L=function(){var t=Object(E.a)(C.a.mark((function t(){var n,r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Cr.info("fetchMoreDataAsync",w.length)(),u(!0),t.prev=2,t.next=5,M.getAccountAuctions(e.address,8,null===g||void 0===g?void 0:g.next);case 5:r=t.sent,x(r.data.accountAuctions.cursor),h(!T.a.isNullOrWhitespace(null===(n=r.data.accountAuctions.cursor)||void 0===n?void 0:n.next)),r.data.accountAuctions.auctions.length>0&&A([].concat(Object(N.a)(w),Object(N.a)(r.data.accountAuctions.auctions.map((function(e){return ce.toAccountAuction(e)}))))),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),v(t.t0);case 14:u(!1);case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(){return t.apply(this,arguments)}}(),D=function(){var t=Object(E.a)(C.a.mark((function t(n){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n&&(A(w.filter((function(e){return!e.timestamp.eq(n.timestamp)}))),B(S.filter((function(e){return!e.timestamp.eq(n.timestamp)})))),t.next=3,M.getAccountAuctions(e.address,8);case 3:return t.next=5,e.refetchDataAsync();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),U=R.refetch,q=Object(i.useCallback)((function(){Cr.info("Refreshing account auctions")(),U()}),[U]),z=function(){var t=Object(E.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Cr.info("Refreshing account auctions & data")(),t.next=3,U();case 3:return t.next=5,e.refetchDataAsync();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(i.useEffect)((function(){var e=function(e){e===te.b.Active&&q()};return P.on(te.c.DocumentVisibilityChanged,e),function(){P.off(te.c.DocumentVisibilityChanged,e)}}),[P,q]);var V=Object(i.useCallback)((function(e){B(Object(N.a)(S))}),[S]);return Object(i.useEffect)((function(){var e=function(e){Cr.info("newMarketEvent",e)(),V(e)};return Cr.info("emitter.on",te.c.PunkChanged)(),P.on(te.c.PunkChanged,e),function(){Cr.info("emitter.off",te.c.PunkChanged)(),P.off(te.c.PunkChanged,e)}}),[P,V]),Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)(Wn.a,{direction:"row",justifyContent:"flex-end",alignItems:"center",spacing:2,children:Object(Tt.jsx)(qn.a,{size:"small","aria-label":"refresh",component:"span",onClick:z,children:Object(Tt.jsx)(Un.a,{fontSize:"small"})})}),Object(Tt.jsx)(_r,{events:w,newEvents:S,error:j,loading:o,hasMore:f,height:300,fetchMoreDataAsync:L,cleanupAsync:D,isAuthorized:r})]})},Ir=function(e){var t,n,r=Object(sn.g)().address,a=Object(i.useState)(!1),c=Object(St.a)(a,2),s=c[0],o=c[1],u=Object(i.useState)(!1),l=Object(St.a)(u,2),d=l[0],f=l[1],h=Object(i.useState)(void 0),b=Object(St.a)(h,2),p=b[0],j=b[1],v=Object(un.a)(pt,{variables:{address:null!==r&&void 0!==r?r:"",offset:0,limit:8},fetchPolicy:"network-only",onCompleted:function(e){f(e.punksByAddress.length>=8)}});Object(i.useEffect)((function(){o(v.loading)}),[v.loading]),Object(i.useEffect)((function(){j(v.error)}),[v.error]);var m=function(){var e=Object(E.a)(C.a.mark((function e(){var t,n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null!==(t=null===(n=v.data)||void 0===n?void 0:n.punksByAddress.length)&&void 0!==t?t:0,o(!0),e.prev=2,e.next=5,v.fetchMore({variables:{offset:r,limit:8}});case 5:a=e.sent,f(a.data.punksByAddress.length>=8),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),j(e.t0);case 12:o(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(E.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.refetch({address:null!==r&&void 0!==r?r:"",offset:0,limit:8});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)(Vt.a,{maxWidth:"lg",sx:{marginBottom:5},children:Object(Tt.jsxs)(ln.a,{container:!0,spacing:3,justifyContent:"center",alignItems:"center",children:[Object(Tt.jsxs)(ln.a,{item:!0,xs:12,md:9,children:[Object(Tt.jsx)(Mt.a,{variant:"h2",component:"div",textAlign:"center",sx:{pt:3},children:"Account"}),Object(Tt.jsx)(Mt.a,{variant:"subtitle1",component:"div",textAlign:"center",sx:{wordBreak:"break-all"},gutterBottom:!0,children:r})]}),Object(Tt.jsx)(ln.a,{item:!0,xs:12,md:9,children:Object(Tt.jsx)(Er,{address:null!==r&&void 0!==r?r:"",refetchDataAsync:O})})]})}),Object(Tt.jsx)(Ln,{items:null!==(t=null===(n=v.data)||void 0===n?void 0:n.punksByAddress)&&void 0!==t?t:[],fetchMoreDataAsync:m,error:p,isLoading:s,hasMore:d})]})},Sr=n(155),Br=function(){var e=Object(ne.h)(),t=Object(de.a)(),n=Object(i.useCallback)((function(){Object(Sr.a)({particleCount:150,spread:60});var n=e.getWallet();(null===n||void 0===n?void 0:n.active)&&t.receiveAllOnroadTxAsync(n.active)}),[t,e]);return Object(Tt.jsxs)(Tt.Fragment,{children:["Test ","1.2.10"," ","https://vitescan.io/",Object(Tt.jsx)(Yn.a,{onClick:n,children:"Test"})]})},Nr=function(){function e(){var t=this;Object(j.a)(this,e),this._apollo=void 0,this.getById=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"network-only";return t._apollo.query({query:ft,variables:{id:e},fetchPolicy:n})},this.getOwnerAsync=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"network-only";return t._apollo.query({query:dt,variables:{id:e},fetchPolicy:n})},this.getBidAsync=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"network-only";return t._apollo.query({query:gt,variables:{id:e},fetchPolicy:n})},this.getOfferAsync=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"network-only";return t._apollo.query({query:xt,variables:{id:e},fetchPolicy:n})},this.getEventsAsync=function(e,n,r,a){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"network-only";return t._apollo.query({query:lt,variables:{id:e,offset:n,limit:r,height:a},fetchPolicy:c})},this.getExtendedAsync=function(){var e=Object(E.a)(C.a.mark((function e(n){var r,a,c,i,s,o,u,l,d=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"network-only",a={__typename:te.h.Punk,id:n.id,rank:n.rank,image:n.image,cid:n.cid,attributes:n.attributes},e.next=4,t.getOwnerAsync(n.id,r);case 4:return c=e.sent,e.next=7,t.getBidAsync(n.id,r);case 7:return i=e.sent,e.next=10,t.getOfferAsync(n.id,r);case 10:return s=e.sent,o=Object(p.a)(Object(p.a)({},a),{},{owner:c.data.punkOwner,bid:ce.toMarketBid(i.data.marketBid),offer:ce.toMarketOffer(s.data.marketOffer)}),u=c.error||i.error||s.error,l=c.loading||i.loading||s.loading,e.abrupt("return",{punkExtended:o,ownerQuery:c,bidQuery:i,offerQuery:s,error:u,loading:l});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._apollo=It()}return Object(v.a)(e,[{key:"mintAsync",value:function(){var e=Object(E.a)(C.a.mark((function e(){var t,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._apollo.mutate({mutation:ct});case 2:return r=e.sent,e.abrupt("return",Boolean(null!==(t=null===(n=r.data)||void 0===n?void 0:n.mint)&&void 0!==t&&t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Mr=new Nr,Pr=function(){return Mr},Tr=Object(h.a)("div")((function(e){e.theme;return"\n  position: relative;\n  width: 80vw;\n  height: 80vw; \n  max-width: 400px;\n  max-height: 400px;\n  animation: lightning 4s ease-out infinite;\n"})),Fr=Object(h.a)("div")((function(e){e.theme;return"\n  width: 100%;\n  height: 100%;\n  border: 5px solid #fff;\n  border-radius: 50%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  background-image: url('".concat(S.b.ITEM_BG_URL,"');\n")})),Rr=Object(h.a)("div")((function(e){e.theme;return"\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  background-image: url('".concat(S.b.SAMPLE_PUNK_URL,"');\n  border-radius: 50%;\n  animation: toggle 4s linear -2s infinite alternate;\n  image-rendering: pixelated;\n")})),Lr=Object(h.a)("img")((function(e){e.theme;return"\n  top: 0;\n  left: 0;\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  border: 5px solid #fff;\n  border-radius: 50%;\n  visibility: hidden;\n  animation: toggle 4s linear 2s infinite alternate;\n"})),Dr=function(e){var t=Object(i.useState)(void 0),n=Object(St.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(void 0),s=Object(St.a)(c,2),o=s[0],u=s[1],l=Pr();return Object(i.useEffect)((function(){var t=function(){var t=Object(E.a)(C.a.mark((function t(){var n,r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.punkId1){t.next=5;break}return t.next=3,l.getById(e.punkId1.toString());case 3:n=t.sent,a(He.getPunkUrl(n.data.punk.image,n.data.punk.cid));case 5:if(!e.punkId2){t.next=10;break}return t.next=8,l.getById(e.punkId2.toString());case 8:r=t.sent,u(He.getPunkUrl(r.data.punk.image,r.data.punk.cid));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.punkId1,e.punkId2,l]),Object(Tt.jsx)(Tr,{children:Object(Tt.jsxs)(Fr,{children:[Object(Tt.jsx)(Rr,{sx:{backgroundImage:"url('".concat(null!==r&&void 0!==r?r:S.b.SAMPLE_PUNK_URL,"')")}}),Object(Tt.jsx)(Lr,{sx:{backgroundImage:"url('".concat(null!==o&&void 0!==o?o:S.b.SAMPLE_PUNK_URL,"')")}})]})})},Ur=function(){return Object(Tt.jsx)(Tt.Fragment,{children:Object(Tt.jsx)(Dr,{punkId1:5667,punkId2:3848})})},Wr=Object(F.a)(),qr=function(){var e=Object(i.useState)([]),t=Object(St.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)([]),c=Object(St.a)(a,2),s=c[0],o=c[1];return Object(un.a)(bt,{fetchPolicy:"network-only",onCompleted:function(e){r(e.punksAll)}}),Object(i.useEffect)((function(){var e,t=new Set([1631,2105,2203,3073,4171,4191,6819,7552,7864,8936,9650,9724]),r=[],a=Object(B.a)(n);try{for(a.s();!(e=a.n()).done;){var c=e.value;t.has(parseInt(c.id))&&r.push(c)}}catch(i){a.e(i)}finally{a.f()}r=r.reverse(),o(r),Wr.info(r.length,n.length)()}),[n]),Object(Tt.jsx)(Tt.Fragment,{children:Object(Tt.jsx)(Vt.a,{sx:{pb:6},maxWidth:"xl",children:Object(Tt.jsx)(ln.a,{container:!0,spacing:3,justifyContent:"center",alignItems:"center",marginBottom:3,children:s.map((function(e){return Object(Tt.jsx)(ln.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(Tt.jsx)(Tn,{item:e})},e.id)}))})})})},zr=n(162),Vr=function(e){var t=s.a.useMemo((function(){return new ee}),[]),n=t.getDuration(e.date),r=s.a.useRef(!1),a=s.a.useState({days:n.days()>0?n.days():0,hours:n.hours()>0?n.hours():0,minutes:n.minutes()>0?n.minutes():0,seconds:n.seconds()>0?n.seconds():0}),c=Object(St.a)(a,2),i=c[0],o=c[1];return n.asSeconds()>0&&setTimeout((function(){var n=t.getDuration(e.date);r.current&&o({days:n.days(),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds()})}),500),s.a.useEffect((function(){return r.current=!0,function(){r.current=!1}}),[]),Object(Tt.jsxs)(Mt.a,{variant:"subtitle1",color:"textSecondary",children:[Object(Tt.jsx)("b",{children:i.days})," days ",Object(Tt.jsx)("b",{children:i.hours})," hours ",Object(Tt.jsx)("b",{children:i.minutes})," minutes ",Object(Tt.jsx)("b",{children:i.seconds})," seconds"]})},Hr=n(213),Qr=n.n(Hr),Gr=n(384),$r=n(410),Kr=n(411),Yr=Object(h.a)((function(e){return Object(Tt.jsx)(Gr.a,Object(p.a)({disableGutters:!0,elevation:0,square:!0},e))}))((function(e){var t=e.theme;return{border:"1px solid ".concat(t.palette.divider),"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},backgroundColor:"dark"===t.palette.mode?"rgba(0, 0, 0, .2)":"rgba(255, 255, 255, .2)"}})),Jr=Object(h.a)((function(e){return Object(Tt.jsx)($r.a,Object(p.a)({expandIcon:Object(Tt.jsx)(Qr.a,{sx:{fontSize:"0.9rem"}})},e))}))((function(e){var t=e.theme;return{backgroundColor:"dark"===t.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:t.spacing(1)}}})),Zr=Object(h.a)(Kr.a)((function(e){return{padding:e.theme.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}})),Xr=function(){var e=s.a.useState("faq0"),t=Object(St.a)(e,2),n=t[0],r=t[1],a=function(e){return function(t,n){r(!!n&&e)}};return Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)(dn.a,{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:2,children:Object(Tt.jsxs)("div",{children:[Object(Tt.jsx)(Mt.a,{variant:"h5",color:"textSecondary",textAlign:"center",children:"FAQ"}),Object(Tt.jsx)(Mt.a,{variant:"subtitle1",color:"textSecondary",textAlign:"center",children:"Frequently Asked Questions"})]})}),Object(Tt.jsx)(dn.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(Tt.jsxs)(dn.a,{maxWidth:800,children:[Object(Tt.jsxs)(Yr,{expanded:"faq0"===n,onChange:a("faq0"),children:[Object(Tt.jsx)(Jr,{"aria-controls":"faq0-content",id:"faq0-header",children:Object(Tt.jsx)(Mt.a,{children:"What is the vision behind VitePunks?"})}),Object(Tt.jsx)(Zr,{children:Object(Tt.jsxs)(Mt.a,{children:["Our main vision is to develop the best possible marketplace for our punks and maybe open it to other artists at some point, depending on what other NFT marketplaces will be released on Vite in the near future. One of our main goals is long-term availability. It is of utmost importance to us to make sure that our punks are as reliably accessible as the ",Object(Tt.jsx)(Kn.a,{underline:"hover",href:"https://www.vite.org/",target:"_blank",children:"Vite chain"}),". All NFT images are stored on ",Object(Tt.jsx)(Kn.a,{underline:"hover",href:"https://ipfs.io/",target:"_blank",children:"IPFS"})," in addition to our own cloud storage.",Object(Tt.jsx)("br",{}),Object(Tt.jsx)("br",{}),"The compiled version of this website can be cloned and forked on ",Object(Tt.jsx)(Kn.a,{underline:"hover",href:"https://github.com/vitepunks/vitepunks.github.io",target:"_blank",children:"GitHub"})," or accessed by this link ",Object(Tt.jsx)(Kn.a,{underline:"hover",href:"https://vitepunks.github.io/website/",target:"_blank",children:"https://vitepunks.github.io/website/"}),". Everything we do is always with the intention to ensure resiliency and establish a trust relationship."]})})]}),Object(Tt.jsxs)(Yr,{expanded:"faq1"===n,onChange:a("faq1"),children:[Object(Tt.jsx)(Jr,{"aria-controls":"faq1-content",id:"faq1-header",children:Object(Tt.jsx)(Mt.a,{children:"Why is the smart contract not open-source yet?"})}),Object(Tt.jsx)(Zr,{children:Object(Tt.jsx)(Mt.a,{children:"Being pioneers in any space is always coupled with a lot of work, sometimes it gets rewarded, more often not. We understand that the situation for some is not satisfactory right now. What we can assure is that we will make our smart contract public as soon as another high-quality project delivers something similar to us. Maybe this is the wrong approach but ultimately this is actually a really hard decision to make."})})]}),Object(Tt.jsxs)(Yr,{expanded:"faq2"===n,onChange:a("faq2"),children:[Object(Tt.jsx)(Jr,{"aria-controls":"faq2-content",id:"faq2-header",children:Object(Tt.jsx)(Mt.a,{children:"Where can I download the Vite Wallet App?"})}),Object(Tt.jsx)(Zr,{children:Object(Tt.jsxs)(Mt.a,{children:["The Vite App Wallet can be downloaded for ",Object(Tt.jsx)(Kn.a,{underline:"hover",href:"https://play.google.com/store/apps/details?id=net.vite.wallet",target:"_blank",children:"Android"}),"\xa0or ",Object(Tt.jsx)(Kn.a,{underline:"hover",href:"https://apps.apple.com/ch/app/vite-multi-chain-wallet/id1437629486",target:"_blank",children:"iOS"}),"."]})})]}),Object(Tt.jsxs)(Yr,{expanded:"faq3"===n,onChange:a("faq3"),children:[Object(Tt.jsx)(Jr,{"aria-controls":"faq3-content",id:"faq3-header",children:Object(Tt.jsx)(Mt.a,{children:"How can I connect my wallet on my smartphone?"})}),Object(Tt.jsx)(Zr,{children:Object(Tt.jsxs)(Mt.a,{children:["Connecting the wallet on your smartphone can be tricky because it is not possible to scan the QR code currently being displayed on your screen. To overcome this limitation detailed instructions can be found in our ",Object(Tt.jsx)(Kn.a,{underline:"hover",href:"https://github.com/vitepunks/resources/wiki/Connect-Wallet",target:"_blank",children:"wiki article"}),"."]})})]}),Object(Tt.jsxs)(Yr,{expanded:"faq4"===n,onChange:a("faq4"),children:[Object(Tt.jsx)(Jr,{"aria-controls":"faq4-content",id:"faq4-header",children:Object(Tt.jsx)(Mt.a,{children:"Is it possible to view my minted punks in my wallet?"})}),Object(Tt.jsx)(Zr,{children:Object(Tt.jsxs)(Mt.a,{children:["Before this can be achieved, the Vite community has to agree on a commonly accepted standard. Currently it is being worked on as a bounty started by ViteLabs. You can find it ",Object(Tt.jsx)(Kn.a,{underline:"hover",href:"https://gitcoin.co/issue/vitelabs/bounties/18/100027282",target:"_blank",children:"here"}),". So in this sense we are truly similar to the original CryptoPunks project which pioneered the NFT space without having a standard at hand when released."]})})]}),Object(Tt.jsxs)(Yr,{expanded:"faq5"===n,onChange:a("faq5"),children:[Object(Tt.jsx)(Jr,{"aria-controls":"faq5-content",id:"faq5-header",children:Object(Tt.jsx)(Mt.a,{children:"How can I gift/transfer my punk to someone else?"})}),Object(Tt.jsx)(Zr,{children:Object(Tt.jsxs)(Mt.a,{children:["This can be achieved by offering your punk for sale for 0 VITE to a specific address. Only this address will be able to claim the punk. Just follow the steps described in this ",Object(Tt.jsx)(Kn.a,{underline:"hover",href:"https://github.com/vitepunks/resources/wiki/Gifting",target:"_blank",children:"wiki article"}),"."]})})]})]})}),Object(Tt.jsx)(Mt.a,{variant:"subtitle1",color:"textSecondary",textAlign:"center",marginTop:2,children:"Community articles"}),Object(Tt.jsxs)(Mt.a,{variant:"subtitle2",color:"textSecondary",textAlign:"center",children:[Object(Tt.jsx)(Kn.a,{underline:"hover",href:"https://medium.com/@CPCLinoCrypto/cuestionario-realizado-a-vitepunks-dd6f3e40dae8",target:"_blank",children:"[Spanish]"}),"\xa0",Object(Tt.jsx)(Kn.a,{underline:"hover",href:"https://medium.com/@CPCLinoCrypto/questionnaire-answered-by-vitepunk-c1a9657c20ec",target:"_blank",children:"[English]"})]})]})},ea=n(378),ta=n(412),na=function(e){var t=Object(i.useState)(100),n=Object(St.a)(t,2),r=n[0],a=n[1];return Object(i.useEffect)((function(){if(e.mintsRemaining&&e.mintsRemaining>0){var t=e.mintsRemaining===S.b.TOTAL_MINTS?100:90;a(Math.min(t,e.mintsRemaining/S.b.TOTAL_MINTS*100))}else a(100)}),[e.mintsRemaining]),Object(Tt.jsxs)(hn.a,{elevation:3,sx:{width:"60%",textAlign:"center",mb:3},children:[Object(Tt.jsx)(dn.a,{sx:{px:2,pt:2,pb:1.5},children:e.loading||!e.mintsRemaining?Object(Tt.jsx)(ea.a,{animation:"wave",width:"50%"}):Object(Tt.jsxs)(Mt.a,{variant:"subtitle1",color:"textSecondary",children:[Object(Tt.jsx)("b",{children:fe.formatNumber(e.mintsRemaining)})," of ",fe.formatNumber(S.b.TOTAL_MINTS)," mintable"]})}),Object(Tt.jsx)(ta.a,{sx:{height:"8px"},variant:"determinate",color:r<=40?"error":"primary",value:r})]})},ra=n(351),aa=Object(F.a)(),ca=n(186),ia=Object(ca.a)({typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},palette:{primary:{main:"#133995"},secondary:{main:"#6817ff"}}}),sa=function(){function e(){Object(j.a)(this,e)}return Object(v.a)(e,null,[{key:"getBaseUrl",value:function(e){var t=e;return t&&!T.a.isNullOrWhitespace(t)||(t=I.a.EXPLORER_URL),t=t.endsWith("/")?t.substring(0,t.length-1):t}},{key:"getAddressUrl",value:function(t,n){var r=e.getBaseUrl(n);return r===e.DEFAULT_BASE_URL?"".concat(r,"/address/").concat(t):"".concat(r,"/account/").concat(t)}},{key:"getTxUrl",value:function(t,n){var r=e.getBaseUrl(n);return e.DEFAULT_BASE_URL,"".concat(r,"/tx/").concat(t)}}]),e}();sa.DEFAULT_BASE_URL="https://vitescan.io";var oa,ua=Object(F.a)(),la=Object(h.a)("div")((function(e){e.theme;return'\n  position: relative;\n  height: 320px;\n  // animation: lightning 4s ease-out infinite;\n  background-image: url("'.concat(S.b.ITEM_BG_URL,'");\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n')})),da=Object(h.a)("div")((function(e){e.theme;return"\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  image-rendering: pixelated;\n"})),fa=function(e){var t=Object(ra.a)(ia.breakpoints.up("md")),n=function(){return T.a.truncateStringInTheMiddle(e.address,10,5)};return Object(Tt.jsxs)(dn.a,{sx:{width:"100%"},children:[Object(Tt.jsxs)(dn.a,{sx:{display:"flex",alignItems:"center"},children:[t&&Object(Tt.jsx)(dn.a,{sx:{mr:1,minWidth:"115px"},children:Object(Tt.jsx)(Bn,{title:e.address,placement:"bottom",arrow:!0,children:Object(Tt.jsx)(Kn.a,{underline:"hover",href:sa.getAddressUrl(e.address),target:"_blank",variant:"body2",color:"text.secondary",children:n()})})}),Object(Tt.jsx)(dn.a,{sx:{width:"100%",mr:1},children:Object(Tt.jsx)(ta.a,Object(p.a)({variant:"determinate",sx:{height:5}},e))}),Object(Tt.jsx)(dn.a,{sx:{minWidth:35},children:Object(Tt.jsx)(Mt.a,{variant:"body2",color:"text.secondary",children:e.label})})]}),!t&&Object(Tt.jsx)(Bn,{title:e.address,placement:"bottom",arrow:!0,children:Object(Tt.jsx)(Kn.a,{underline:"hover",variant:"body2",color:"text.secondary",children:n()})})]})},ha=function(){var e,t=s.a.useRef(!1),n="6297",r=s.a.useMemo((function(){return new ee}),[]),a=s.a.useMemo((function(){return Ke()}),[]),c=Object(i.useState)(!1),o=Object(St.a)(c,2),u=o[0],l=o[1],d=Object(i.useState)(0),f=Object(St.a)(d,2),h=f[0],b=f[1],p=Object(i.useState)([]),j=Object(St.a)(p,2),v=j[0],m=j[1],O=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"network-only",r=Object(un.a)(ft,{variables:{id:e},notifyOnNetworkStatusChange:!0,fetchPolicy:n,refetchWritePolicy:"overwrite"}),a=r.error,c=r.loading;return{punk:null===(t=r.data)||void 0===t?void 0:t.punk,error:a,loading:c}}(n),g=O.punk,x=r.getFromUnix(1643673599),y=Object(ra.a)(ia.breakpoints.up("md"));return Object(i.useEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]),Object(i.useEffect)((function(){var e=function(){var e=Object(E.a)(C.a.mark((function e(){var n,r,c,i,s,o,u,d,f;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.datasource.getPunksAllAsync();case 2:n=e.sent,r=new Map,c=Object(B.a)(n);try{for(c.s();!(i=c.n()).done;)(s=i.value).owner&&((o=r.get(s.owner))||(o={address:s.owner,total:0,rares:0}),o.total++,s.rank<100&&o.rares++,r.set(s.owner,o))}catch(h){c.e(h)}finally{c.f()}u=[],d=0,r.forEach((function(e,t){e.rares>0&&(u.push(e),e.rares>d&&(d=e.rares))})),ua.info("_holderMap.size",r.size,"holders.length",u.length)(),f=Object(P.orderBy)(u,[function(e){return e.rares},function(e){return e.total}],["desc","desc"]),t&&(b(d),m(f.splice(0,Math.min(7,f.length))),l(!1));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();l(!0),setTimeout((function(){e()}),2e3)}),[a.datasource]),Object(Tt.jsx)(dn.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(Tt.jsx)(dn.a,{maxWidth:900,children:Object(Tt.jsx)(hn.a,{style:{backgroundColor:"rgba(255, 255, 255, 0.5)"},children:Object(Tt.jsxs)(dn.a,{sx:{display:y?"flex":"inherit",px:2,pt:2,pb:2,width:"100%"},children:[Object(Tt.jsx)(gn.a,{sx:{minWidth:y?"350px":"100%"},children:Object(Tt.jsxs)(On.a,{component:cn.b,to:"/punk/".concat(n),target:"_blank",children:[Object(Tt.jsxs)(la,{children:[Object(Tt.jsx)(dn.a,{sx:{position:"absolute",top:5,right:5},children:Object(Tt.jsx)(Bn,{title:Object(Tt.jsx)("span",{children:"Rarity rank"}),placement:"bottom",arrow:!0,children:Object(Tt.jsx)(Pt.a,{size:"small",icon:Object(Tt.jsx)(wn,{icon:vn.a,sx:{fontSize:"small",ml:1}}),sx:{fontSize:"0.7rem"},label:null===g||void 0===g?void 0:g.rank})})}),Object(Tt.jsx)(da,{sx:{backgroundImage:'url("'.concat(He.getPunkUrl(null===g||void 0===g?void 0:g.image,null===g||void 0===g?void 0:g.cid),'")')}})]}),Object(Tt.jsxs)(xn.a,{sx:{p:0},children:[Object(Tt.jsxs)(Mt.a,{variant:"h6",component:"div",sx:{p:1},children:[S.b.PUNK_NAME," #",n]}),Object(Tt.jsx)(dn.a,{sx:{height:"70px",overflow:"auto"},children:Object(Tt.jsx)(dn.a,{sx:{p:1},children:null===g||void 0===g||null===(e=g.attributes)||void 0===e?void 0:e.map((function(e){return Object(Tt.jsx)(Pt.a,{label:e,variant:"outlined",sx:{mb:1,mr:1},size:"small"},e)}))})})]})]})}),Object(Tt.jsxs)(dn.a,{sx:{flexGrow:1,ml:y?2:0,mt:y?0:2},children:[Object(Tt.jsx)(Mt.a,{variant:"h6",paragraph:!0,children:"\ud83d\udc8e Rarity contest"}),"The address owning the most rare punks below rank ",100," when the contest ends will be awarded ",Object(Tt.jsxs)(Kn.a,{underline:"hover",component:cn.b,to:"/punk/".concat(n),target:"_blank",children:[S.b.PUNK_NAME," #",n]})," with rarity rank ",Object(Tt.jsx)(Pt.a,{size:"small",label:null===g||void 0===g?void 0:g.rank}),Object(Tt.jsx)("br",{}),"In case 2 or more addresses own the same amount of rare punks, the address with overall more punks will be awarded.",Object(Tt.jsx)(dn.a,{sx:{mt:3},children:u?Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)(ea.a,{animation:"wave"}),Object(Tt.jsx)(ea.a,{animation:"wave",sx:{mt:.5}}),Object(Tt.jsx)(ea.a,{animation:"wave",sx:{mt:.5}}),Object(Tt.jsx)(ea.a,{animation:"wave",sx:{mt:.5}}),Object(Tt.jsx)(ea.a,{animation:"wave",sx:{mt:.5}}),Object(Tt.jsx)(ea.a,{animation:"wave",sx:{mt:.5}})]}):Object(Tt.jsx)(Tt.Fragment,{children:v.map((function(e){return Object(Tt.jsx)(fa,{value:e.rares/h*100,label:e.rares.toString(),address:e.address},e.address)}))})}),Object(Tt.jsx)(hn.a,{elevation:3,sx:{p:2,textAlign:"center",mt:3},children:Object(Tt.jsx)(Vr,{date:x.toISOString()})})]})]})})})})},ba=Object(F.a)(),pa=function(){var e=s.a.useMemo((function(){return new ee}),[]).getLocal("2021-12-21T17:00:00+0000"),t=s.a.useRef(!1),n=Object(i.useState)({number:new w.a("0"),displayNumber:"0"}),r=Object(St.a)(n,2),a=r[0],c=r[1],o=Object(i.useState)(!1),u=Object(St.a)(o,2),l=u[0],d=u[1],f=Object(i.useState)(!1),h=Object(St.a)(f,2),b=h[0],p=h[1],j=Object(i.useState)(void 0),v=Object(St.a)(j,2),m=v[0],O=v[1],g=Object(W.a)(),x=Pr(),y=Object(un.a)(Ot,{fetchPolicy:"network-only"}),k=y.refetch;Object(i.useEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]),Object(i.useEffect)((function(){var e=function(e){e===te.b.Active&&(ba.info("Refreshing market info")(),k())};return g.on(te.c.DocumentVisibilityChanged,e),function(){g.off(te.c.DocumentVisibilityChanged,e)}}),[g,k]),Object(i.useEffect)((function(){var e=function(e){ba.info("eventType: ".concat(e.eventType," amount: ").concat(e.value.toFixed()," timestamp: ").concat(e.timestamp.toFixed()))(),k()};return g.on(te.c.MarketChanged,e),function(){g.off(te.c.MarketChanged,e)}}),[g,k]),Object(i.useEffect)((function(){var e=function(e){var t;ba.info("eventType: ".concat(e.eventType," punkId: ").concat(e.punkId," amount: ").concat(null===(t=e.amount)||void 0===t?void 0:t.toFixed()," fromAddress: ").concat(e.fromAddress," toAddress: ").concat(e.toAddress," timestamp: ").concat(e.timestamp.toFixed()))(),k()};return g.on(te.c.PunkChanged,e),function(){g.off(te.c.PunkChanged,e)}}),[g,k]),Object(i.useEffect)((function(){var e,n=null===(e=y.data)||void 0===e?void 0:e.marketInfo;n&&t.current&&(c({number:new w.a(n.mintPrice),displayNumber:yn.formatVite(new w.a(n.mintPrice))}),d(n.marketStarted),p(n.marketStarted&&n.mintsRemaining>0),O(n.mintsRemaining))}),[y.data]);var A=function(){var e=Object(E.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.mintAsync();case 3:e.sent?on.enqueueMessage("Mint success"):on.enqueueError("Mint failed"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),ba.error(e.t0)(),on.enqueueError(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(Tt.jsx)(Vt.a,{maxWidth:"lg",sx:{mt:10},children:Object(Tt.jsxs)(ln.a,{container:!0,spacing:3,direction:"row",justifyContent:"center",alignItems:"center",marginBottom:3,children:[Object(Tt.jsx)(ln.a,{item:!0,sm:12,md:6,children:Object(Tt.jsx)(dn.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(Tt.jsxs)("div",{children:[Object(Tt.jsx)(Mt.a,{variant:"h3",color:"primary",children:S.b.APP_NAME}),Object(Tt.jsxs)(Mt.a,{variant:"subtitle1",color:"textSecondary",paragraph:!0,children:["The very first NFT collection powered by ",Object(Tt.jsx)(Kn.a,{underline:"hover",href:"https://www.vite.org/",target:"_blank",children:"Vite chain"}),". Now is your chance to make Vite history and become owner of an isometric punk. Get yourself ready for the metaverse.",l?Object(Tt.jsxs)(Tt.Fragment,{children:["\xa0Mint a punk for ",a.displayNumber," ",S.b.CURRENCY_NAME," now!"]}):Object(Tt.jsx)(Tt.Fragment,{children:"\xa0Minting will open in:"})]}),l?Object(Tt.jsx)(na,{loading:y.loading,mintsRemaining:m}):Object(Tt.jsx)(hn.a,{elevation:3,sx:{p:2,width:"60%",textAlign:"center",mb:3},children:Object(Tt.jsx)(Vr,{date:e.toISOString()})}),Object(Tt.jsxs)(Wn.a,{spacing:2,direction:"row",children:[Object(Tt.jsx)(jn,{variant:"contained",color:"primary",callbackFn:A,sx:{minWidth:"100px"},disabled:!b,children:"Mint"}),Object(Tt.jsx)(Yn.a,{variant:"outlined",color:"primary",component:cn.b,to:"/marketplace",children:"Browse"})]})]})})}),Object(Tt.jsx)(ln.a,{item:!0,sm:12,md:6,children:Object(Tt.jsx)(dn.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(Tt.jsx)("video",{width:"100%",preload:"",autoPlay:!0,muted:!0,playsInline:!0,loop:!0,style:{opacity:"0.8"},children:Object(Tt.jsx)("source",{src:S.b.CDN_URL+"videos/landing_640x360_2.mp4",type:"video/mp4"})})})}),Object(Tt.jsxs)(ln.a,{item:!0,xs:12,marginTop:10,children:[Object(Tt.jsx)(dn.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(Tt.jsx)(Mt.a,{variant:"subtitle1",color:"textSecondary",children:"Connect with us"})}),Object(Tt.jsx)(dn.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(Tt.jsxs)(Wn.a,{spacing:2,direction:"row",children:[Object(Tt.jsx)(qn.a,{"aria-label":"Twitter",href:S.b.TWITTER_URL,target:"_blank",children:Object(Tt.jsx)(wn,{icon:zr.c})}),Object(Tt.jsx)(qn.a,{"aria-label":"GitHub",href:S.b.GITHUB_URL,target:"_blank",children:Object(Tt.jsx)(wn,{icon:zr.b})}),Object(Tt.jsx)(qn.a,{"aria-label":"Discord",href:S.b.DISCORD_URL,target:"_blank",children:Object(Tt.jsx)(wn,{icon:zr.a})})]})})]}),Object(Tt.jsx)(ln.a,{item:!0,xs:12,marginTop:10,children:Object(Tt.jsx)(ha,{})}),Object(Tt.jsx)(ln.a,{item:!0,xs:12,marginTop:10,children:Object(Tt.jsx)(Xr,{})}),Object(Tt.jsx)(ln.a,{item:!0,xs:12,marginTop:2,children:Object(Tt.jsx)(dn.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(Tt.jsx)(dn.a,{maxWidth:800,children:Object(Tt.jsx)("img",{width:"100%",alt:"main",src:S.b.LANDING_IMAGE_URL})})})}),Object(Tt.jsx)(ln.a,{item:!0,xs:12,marginTop:1,children:Object(Tt.jsx)(dn.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(Tt.jsxs)("div",{children:[Object(Tt.jsx)(Mt.a,{variant:"h5",color:"textSecondary",textAlign:"center",paragraph:!0,children:"Disclaimer"}),Object(Tt.jsxs)(Mt.a,{variant:"subtitle1",color:"textSecondary",textAlign:"center",paragraph:!0,children:["The intention of ",S.b.APP_NAME," is to showcase the capabilities of the ",Object(Tt.jsx)(Kn.a,{underline:"hover",href:"https://www.vite.org/",target:"_blank",children:"Vite chain"}),". ",S.b.APP_NAME," is not affiliated with CryptoPunks and LarvaLabs. The value of a ",S.b.PUNK_NAME," is not related to the value of a CryptoPunk. ",S.b.APP_NAME," is a homage to the CryptoPunk project of LarvaLabs. With ",S.b.APP_NAME," we thank LarvaLabs for their pioneering and for creating the CryptoPunk project. The project that basically started the ever growing NFT movement.",l&&a.number.gt(0)&&Object(Tt.jsxs)(Tt.Fragment,{children:["\xa0Why mint for ",a.displayNumber," ",S.b.CURRENCY_NAME,"? The minting of ",S.b.APP_NAME," is set at ",a.displayNumber," ",S.b.CURRENCY_NAME,". This means that during the initial minting phase, you will be able to generate a random punk for ",a.displayNumber," ",S.b.CURRENCY_NAME,". When all 10,000 Punks are minted, you can get a Punk by using the marketplace. That the minting is set at ",a.displayNumber," ",S.b.CURRENCY_NAME," has a couple of reasons. As you know, keeping up, maintaining and further developing a system costs money. We want to keep ",S.b.APP_NAME," running for years to come and we hope to integrate ",S.b.APP_NAME," with other NFT marketplaces in the near future."]})]})]})})})]})})},ja=n(184),va=n.n(ja),ma=n(215),Oa=n.n(ma),ga=n(214),xa=n.n(ga),ya=n(48),ka=n(352),wa=n(163),Aa=function(e){var t=Object(i.useRef)(null);return Object(i.useEffect)((function(){var n={size:240,ecLevel:wa.ecLevel.HIGH,minVersion:4,background:"#fff",mode:wa.modes.DRAW_WITH_IMAGE_BOX,radius:0,image:"./assets/images/logo640.png",mSize:.3};e.text&&t.current&&(n.size=Math.min(240,t.current.clientWidth-10),t.current.innerHTML="",new wa.qrcode(t.current).generate(e.text,n).then((function(){console.log("QR code generated")})))}),[e.text]),Object(Tt.jsx)("div",{ref:t})},_a=Object(F.a)(),Ca=function(e){var t=Object(i.useState)(""),n=Object(St.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(!1),o=Object(St.a)(c,2),u=o[0],l=o[1],d=Object(i.useState)(void 0),f=Object(St.a)(d,2),h=f[0],b=f[1],p=e.onClose,j=e.open,v=e.setOpen,m=Ke(),O=Object(ne.h)(),g=Object(W.a)(),x=s.a.useMemo((function(){return new ne.e(O)}),[O]),y=s.a.useCallback(Object(E.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.createAsync(m.network);case 3:t=e.sent,_a.info(t.uri)(),a(t.uri),l(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),_a.error(e.t0)(),l(!0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[x,m.network]);Object(i.useEffect)((function(){var e=function(e){v(e)};return g.on(te.c.ConnectWalletDialog,e),function(){g.off(te.c.ConnectWalletDialog,e),a(""),l(!1)}}),[g,v]),Object(i.useEffect)((function(){j&&(b(void 0),y())}),[j,y]);return Object(Tt.jsxs)(ir.a,{onClose:function(){p()},open:j,maxWidth:"xs",children:[Object(Tt.jsx)(sr.a,{children:"Connect Wallet"}),Object(Tt.jsxs)(or.a,{children:[Object(Tt.jsx)(hr.a,{children:"Scan the QR code via Vite Wallet App"}),Object(Tt.jsxs)(ka.a,{sx:{mt:2,textAlign:"center"},children:[T.a.isNullOrWhitespace(r)?Object(Tt.jsx)(Tt.Fragment,{children:u?Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)(Mt.a,{gutterBottom:!0,children:"Error"}),Object(Tt.jsx)(jn,{variant:"outlined",callbackFn:y,children:"Retry"})]}):Object(Tt.jsx)(Tt.Fragment,{children:"Loading..."})}):Object(Tt.jsx)(Aa,{text:r}),Object(Tt.jsxs)(hr.a,{marginTop:1,children:["Don't have the Vite Wallet App? ",Object(Tt.jsx)(Kn.a,{underline:"hover",href:"https://vite.org/airdrop",target:"_blank",children:"Download here"})]})]}),I.a.ENABLE_MNEMONIC_LOGIN&&Object(Tt.jsxs)(ka.a,{sx:{mt:2,textAlign:"center"},children:[Object(Tt.jsxs)(ur.a,{fullWidth:!0,variant:"standard",children:[Object(Tt.jsx)(br.a,{htmlFor:"mnemonic",children:"Mnemonic"}),Object(Tt.jsx)(lr.a,{id:"mnemonic",value:h,onChange:function(e){b(e.target.value)},type:"text",autoComplete:"new-password"})]}),Object(Tt.jsx)(Yn.a,{variant:"contained",sx:{mt:1},onClick:function(){var e;O.createWebWallet(T.a.isNullOrWhitespace(h)?null!==(e="spell barely teach wisdom best tragic three lyrics second notable excuse hobby example tenant business midnight member canal energy evoke debate tortoise high infant")?e:"":null!==h&&void 0!==h?h:"")||on.enqueueError("Invalid mnemonic")},children:"Use test account"})]})]})]})},Ea=Object(h.a)("div")((function(e){e.theme;return"\n  flex-grow: 1;\n"})),Ia=Object(h.a)(Mt.a)((function(e){e.theme;return"\n  flex-grow: 1;\n  margin-left: 10px !important;\n"})),Sa=function(e){var t,n=Object(sn.f)(),r=Object(ya.a)(),a=Object(ra.a)(r.breakpoints.up("sm")),c=rn(),i=s.a.useState(!1),o=Object(St.a)(i,2),u=o[0],l=o[1],d=function(){n("/account/".concat(c.account))};return Object(Tt.jsx)(Ea,{children:Object(Tt.jsx)(Lt.a,{position:"static",color:"transparent",children:Object(Tt.jsxs)(Dt.a,{children:[Object(Tt.jsx)("a",{href:"./",style:{height:"40px"},children:Object(Tt.jsx)("img",{src:"./assets/images/logo640.png",alt:"logo",width:"40"})}),Object(Tt.jsx)(Ia,{variant:"h6",color:"#fff",children:Object(Tt.jsx)("a",{href:"./",style:{color:"inherit",textDecoration:"inherit"},children:S.b.APP_NAME})}),Object(Tt.jsx)(Yn.a,{sx:{mr:2},component:cn.b,to:"/marketplace",children:a?Object(Tt.jsx)(Tt.Fragment,{children:"Marketplace"}):Object(Tt.jsx)(xa.a,{})}),c.account?Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)(Bn,{sx:{mr:1},title:Object(Tt.jsx)(s.a.Fragment,{children:Object(Tt.jsx)("p",{children:c.account})}),placement:"bottom",arrow:!0,children:a?Object(Tt.jsx)(Pt.a,{icon:Object(Tt.jsx)(va.a,{}),label:(t=c.account,T.a.truncateStringInTheMiddle(t,10,5)),variant:"outlined",onClick:d}):Object(Tt.jsx)(Yn.a,{color:"inherit",onClick:d,children:Object(Tt.jsx)(va.a,{})})}),Object(Tt.jsx)(Yn.a,{color:"inherit",onClick:function(){c.logout()},children:Object(Tt.jsx)(Oa.a,{})})]}):Object(Tt.jsx)(Yn.a,{variant:"contained",color:"primary",onClick:function(){l(!0)},children:"Connect wallet"}),Object(Tt.jsx)(Ca,{open:u,setOpen:l,onClose:function(){l(!1)}})]})})})},Ba=n(216),Na=n.n(Ba),Ma=n(217),Pa=n.n(Ma),Ta=n(365),Fa=n(415);!function(e){e[e.Address=0]="Address",e[e.Transaction=1]="Transaction"}(oa||(oa={}));var Ra=function(e){var t=Object(i.useCallback)((function(){if(e.value&&!T.a.isNullOrWhitespace(e.value))return e.type===oa.Address?sa.getAddressUrl(e.value):sa.getTxUrl(e.value)}),[e.value,e.type]),n=Object(i.useState)(t()),r=Object(St.a)(n,2),a=r[0],c=r[1];return Object(i.useEffect)((function(){c(t())}),[e.value,e.type,t]),!a||T.a.isNullOrWhitespace(a)?Object(Tt.jsx)(Tt.Fragment,{children:e.children}):Object(Tt.jsx)(Kn.a,{underline:"hover",href:a,target:"_blank",children:e.children})},La=Object(h.a)(Qn.a)((function(e){e.theme;return"\n  background-image: url('".concat(S.b.ITEM_BG_URL,"');\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  image-rendering: pixelated;\n  margin-right: 10px;\n")})),Da=Object(h.a)(Gn.a)((function(e){e.theme;return"\n  background-color: rgba(255, 255, 255, 0.3);\n"})),Ua=function(e){var t,n,r,a,c,i,s=Object(un.a)(ft,{variables:{id:e.item.punkId.toString()},fetchPolicy:"network-only"}),o=new ee,u=function(e){return o.getLocalReverseFormatted(o.getFromUnix(e))};return Object(Tt.jsxs)($n.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(Tt.jsxs)(Gn.a,{component:"th",scope:"row",children:[Object(Tt.jsx)(Hn.a,{icon:ar.getPunkEventTypeIcon(e.item.eventType,e.item.amount)})," ",Object(Tt.jsx)("b",{children:function(){switch(e.item.eventType){case te.g.Offer:if(!e.item.amount||e.item.amount.lte(0))return S.a.gift;break;case te.g.Buy:if(!e.item.amount||e.item.amount.lte(0))return S.a.transfer}return S.e[e.item.eventType].name}()})]}),Object(Tt.jsx)(Gn.a,{children:Object(Tt.jsxs)(Kn.a,{underline:"hover",component:cn.b,to:"/punk/".concat(e.item.punkId),display:"flex",alignItems:"center",children:[Object(Tt.jsx)(La,{variant:"rounded",src:He.getPunkUrl(null===(t=s.data)||void 0===t?void 0:t.punk.image,null===(n=s.data)||void 0===n?void 0:n.punk.cid)}),S.b.PUNK_NAME," #",e.item.punkId]})}),Object(Tt.jsx)(Gn.a,{children:(null===(r=e.item.amount)||void 0===r?void 0:r.gt(0))?Object(Tt.jsx)(Tt.Fragment,{children:Object(Tt.jsx)(Bn,{title:(i=e.item.amount,yn.formatViteTooltip(i)),children:Object(Tt.jsx)("span",{children:function(e){return yn.formatVite(e)}(e.item.amount)})})}):Object(Tt.jsx)(Tt.Fragment,{})}),Object(Tt.jsx)(Gn.a,{children:Object(Tt.jsx)(Ra,{type:oa.Address,value:e.item.fromAddress,children:Object(Tt.jsx)(Bn,{title:null!==(a=e.item.fromAddress)&&void 0!==a?a:"",children:Object(Tt.jsx)("span",{children:T.a.truncateStringInTheMiddle(e.item.fromAddress,10,5)})})})}),Object(Tt.jsx)(Gn.a,{children:Object(Tt.jsx)(Ra,{type:oa.Address,value:e.item.toAddress,children:Object(Tt.jsx)(Bn,{title:null!==(c=e.item.toAddress)&&void 0!==c?c:"",children:Object(Tt.jsx)("span",{children:T.a.truncateStringInTheMiddle(e.item.toAddress,10,5)})})})}),Object(Tt.jsx)(Gn.a,{align:"right",children:e.item.eventType===te.g.Mint&&I.a.PRE_MINT_HEIGHT&&e.item.accountBlockHeight.lte(I.a.PRE_MINT_HEIGHT)?Object(Tt.jsx)(Tt.Fragment,{children:u(e.item.timestamp.toFixed())}):Object(Tt.jsx)(Ra,{type:oa.Transaction,value:e.item.accountBlockHash,children:u(e.item.timestamp.toFixed())})})]})},Wa=function(e){var t,n,r="No activity yet";return Object(Tt.jsx)(hn.a,{id:"event-list",style:{height:null!==(t=e.height)&&void 0!==t?t:300,overflow:"auto",backgroundColor:"rgba(255, 255, 255, 0.5)"},children:e.newEvents.length>0||e.events.length>0?Object(Tt.jsx)(fn.a,{dataLength:null!==(n=e.events.length)&&void 0!==n?n:0,next:e.fetchMoreDataAsync,hasMore:e.hasMore,loader:Object(Tt.jsx)(ln.a,{container:!0,spacing:3,justifyContent:"center",alignItems:"center",children:Object(Tt.jsx)(cr,{loading:e.loading,error:e.error,count:e.events.length,message:r})}),scrollableTarget:"event-list",children:Object(Tt.jsx)(Jn.a,{children:Object(Tt.jsxs)(Zn.a,{stickyHeader:!0,children:[Object(Tt.jsx)(Xn.a,{children:Object(Tt.jsxs)($n.a,{children:[Object(Tt.jsx)(Da,{}),Object(Tt.jsx)(Da,{children:Object(Tt.jsx)("b",{children:"Punk"})}),Object(Tt.jsx)(Da,{children:Object(Tt.jsx)("b",{children:"Amount"})}),Object(Tt.jsx)(Da,{children:Object(Tt.jsx)("b",{children:"From"})}),Object(Tt.jsx)(Da,{children:Object(Tt.jsx)("b",{children:"To"})}),Object(Tt.jsx)(Da,{align:"right",children:Object(Tt.jsx)("b",{children:"Date"})})]})}),Object(Tt.jsxs)(er.a,{children:[e.newEvents.map((function(e){return Object(Tt.jsx)(Ua,{item:e},"new-events-".concat(e.id))})),e.events.map((function(e){return Object(Tt.jsx)(Ua,{item:e},"events-".concat(e.id))}))]})]})})}):Object(Tt.jsx)(ln.a,{sx:{height:"100%"},container:!0,spacing:3,justifyContent:"center",alignItems:"center",children:Object(Tt.jsx)(cr,{loading:e.loading,error:e.error,count:e.events.length,message:r})})})},qa=Object(F.a)(),za=function(e){var t=Object(i.useState)(!1),n=Object(St.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(!0),s=Object(St.a)(c,2),o=s[0],u=s[1],l=Object(i.useState)(void 0),d=Object(St.a)(l,2),f=d[0],h=d[1],b=Object(i.useState)([]),p=Object(St.a)(b,2),j=p[0],v=p[1],m=Object(i.useState)([]),O=Object(St.a)(m,2),g=O[0],x=O[1],y=rr(),k=Object(W.a)(),w=Object(un.a)(yt,{variables:{offset:0,limit:8},fetchPolicy:"network-only",onCompleted:function(e){v(e.marketEvents.events.map((function(e){return ce.toPunkEvent(e)})))}});Object(i.useEffect)((function(){a(w.loading)}),[w.loading]),Object(i.useEffect)((function(){h(w.error)}),[w.error]);var A=function(){var e=Object(E.a)(C.a.mark((function e(){var t,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qa.info("fetchMoreDataAsync",j.length)(),n=null===(t=w.data)||void 0===t?void 0:t.marketEvents.blockHeight.toString(),a(!0),e.prev=3,e.next=6,y.getEventsAsync(j.length,8,n);case 6:r=e.sent,u(r.data.marketEvents.events.length>=8),r.data.marketEvents.events.length>0&&v([].concat(Object(N.a)(j),Object(N.a)(r.data.marketEvents.events.map((function(e){return ce.toPunkEvent(e)}))))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),h(e.t0);case 14:a(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),_=w.refetch,I=Object(i.useCallback)((function(){qa.info("Refreshing market activity")(),_(),x([])}),[_]);Object(i.useEffect)((function(){var e=function(e){e===te.b.Active&&I()};return k.on(te.c.DocumentVisibilityChanged,e),function(){k.off(te.c.DocumentVisibilityChanged,e)}}),[k,I]);var S=Object(i.useCallback)((function(e){x([ce.toPunkEvent(e)].concat(Object(N.a)(g)))}),[g]);return Object(i.useEffect)((function(){var e=function(e){qa.info("newMarketEvent",e)(),S(e)};return qa.info("emitter.on",te.c.PunkChanged)(),k.on(te.c.PunkChanged,e),function(){qa.info("emitter.off",te.c.PunkChanged)(),k.off(te.c.PunkChanged,e)}}),[k,S]),Object(Tt.jsx)(Wa,{events:j,newEvents:g,error:f,loading:r,hasMore:o,height:500,fetchMoreDataAsync:A})},Va=n(185),Ha=n.n(Va),Qa=n(369),Ga=n(374),$a=n(414),Ka=n(362),Ya=n(371),Ja=n(379),Za=n(387),Xa=function(){var e,t,n=Object(i.useState)(S.c),r=Object(St.a)(n,2),a=r[0],c=r[1],s=Object(W.a)(),o=Object(un.a)(ut,{fetchPolicy:"network-only"}),u=function(e,t){s.emitPunkFilterValuesChanged(e,t)};return Object(Tt.jsxs)(ln.a,{container:!0,sx:{mb:2},spacing:3,children:[Object(Tt.jsx)(ln.a,{item:!0,md:3}),Object(Tt.jsx)(ln.a,{item:!0,xs:12,md:6,children:Object(Tt.jsx)(Qa.a,{multiple:!0,freeSolo:!0,id:"search-autocomplete",options:null!==(e=null===(t=o.data)||void 0===t?void 0:t.punkAttributes)&&void 0!==e?e:[],getOptionLabel:function(e){return e},size:"small",fullWidth:!0,onChange:function(e,t){var n=Object(p.a)(Object(p.a)({},a),{},{search:t.join(",")});c(n),u(a,n)},filterSelectedOptions:!0,renderInput:function(e){return Object(Tt.jsx)(Ga.a,Object(p.a)(Object(p.a)({},e),{},{label:"Search"}))}})}),Object(Tt.jsx)(ln.a,{item:!0,xs:12,md:3,children:Object(Tt.jsx)($a.a,{children:Object(Tt.jsxs)(Wn.a,{direction:"row",justifyContent:"end",spacing:2,children:[Object(Tt.jsxs)(ur.a,{size:"small",children:[Object(Tt.jsx)(br.a,{id:"sortby-select-label",children:"Sort by"}),Object(Tt.jsx)(Ka.a,{labelId:"sortby-select-label",id:"sortby-select",value:a.sortBy,label:"Sort by",onChange:function(e){var t=Object(p.a)(Object(p.a)({},a),{},{sortBy:e.target.value});c(t),u(a,t)},children:S.f.map((function(e){return Object(Tt.jsxs)(Ya.a,{value:e.type,children:[e.name,"\xa0"]},e.type)}))})]}),Object(Tt.jsxs)(Ja.a,{size:"small",exclusive:!0,value:a.orderBy,onChange:function(e,t){var n=Object(p.a)(Object(p.a)({},a),{},{orderBy:t});c(n),u(a,n)},children:[Object(Tt.jsx)(Za.a,{value:Y.a.ASC,children:Object(Tt.jsx)(Ha.a,{sx:{transform:"rotate(180deg)"}})}),Object(Tt.jsx)(Za.a,{value:Y.a.DESC,children:Object(Tt.jsx)(Ha.a,{})})]})]})})})]})},ec=Object(F.a)(),tc=function(e){var t,n,r=Object(i.useState)(!1),a=Object(St.a)(r,2),c=a[0],s=a[1],o=Object(i.useState)(!1),u=Object(St.a)(o,2),l=u[0],d=u[1],f=Object(i.useState)(void 0),h=Object(St.a)(f,2),b=h[0],p=h[1],j=Object(i.useState)({sortBy:S.c.sortBy,orderBy:S.c.orderBy,search:""}),v=Object(St.a)(j,2),m=v[0],O=v[1],g=Object(W.a)(),x=Object(un.a)(ht,{variables:{offset:0,limit:8,sort:m.sortBy,order:m.orderBy,search:m.search},fetchPolicy:"network-only",onCompleted:function(e){d(e.punks.length>=8)}});Object(i.useEffect)((function(){s(x.loading)}),[x.loading]),Object(i.useEffect)((function(){p(x.error)}),[x.error]);var y=function(){var e=Object(E.a)(C.a.mark((function e(){var t,n,r,a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),a=null!==(t=null===(n=x.data)||void 0===n?void 0:n.punks.length)&&void 0!==t?t:0,s(!0),e.prev=3,e.next=6,x.fetchMore({variables:{offset:a,limit:8}});case 6:c=e.sent,ec.info("fetchMoreDataAsync1 took ".concat((new Date).getTime()-r,"ms"))(),d(c.data.punks.length>=8),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),p(e.t0);case 14:s(!1),ec.info("fetchMoreDataAsync2 took ".concat((new Date).getTime()-r,"ms"))();case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),k=x.refetch;return Object(i.useEffect)((function(){k({offset:0,limit:8,sort:m.sortBy,order:m.orderBy,search:m.search})}),[m,k]),Object(i.useEffect)((function(){var e=function(e,t){d(!0),O({sortBy:t.sortBy,orderBy:t.orderBy,search:t.search})};return g.on(te.c.PunkFilterValuesChanged,e),function(){ec.info("emitter.off",te.c.PunkFilterValuesChanged)(),g.off(te.c.PunkFilterValuesChanged,e)}}),[g]),Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)(Xa,{}),Object(Tt.jsx)(Ln,{items:null!==(t=null===(n=x.data)||void 0===n?void 0:n.punks)&&void 0!==t?t:[],fetchMoreDataAsync:y,error:b,isLoading:c,hasMore:l})]})},nc=["children","value","index"];function rc(e){var t=e.children,n=e.value,r=e.index,a=Object(zt.a)(e,nc);return Object(Tt.jsx)("div",Object(p.a)(Object(p.a)({role:"tabpanel",hidden:n!==r,id:"marketplace-tabpanel-".concat(r),"aria-labelledby":"marketplace-tab-".concat(r)},a),{},{children:n===r&&Object(Tt.jsx)(dn.a,{sx:{p:2},children:t})}))}var ac=function(e){var t=Object(sn.f)(),n=Object(sn.g)().tab===te.e.Activity?1:0,r=s.a.useState(n),a=Object(St.a)(r,2),c=a[0],i=a[1];n!==c&&i(n);return Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)(Mt.a,{variant:"h2",component:"div",textAlign:"center",sx:{pt:3},gutterBottom:!0,children:"Marketplace"}),Object(Tt.jsx)(dn.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(Tt.jsxs)(Ta.a,{value:c,onChange:function(e,n){if(i(n),1===n)t("/marketplace/activity");else t("/marketplace")},children:[Object(Tt.jsx)(Fa.a,{icon:Object(Tt.jsx)(Na.a,{}),label:"Items",value:0}),Object(Tt.jsx)(Fa.a,{icon:Object(Tt.jsx)(Pa.a,{}),label:"Activity",value:1})]})}),Object(Tt.jsxs)(Vt.a,{sx:{pb:6},maxWidth:"xl",children:[Object(Tt.jsx)(rc,{value:c,index:0,children:Object(Tt.jsx)(tc,{})}),Object(Tt.jsx)(rc,{value:c,index:1,children:Object(Tt.jsx)(dn.a,{marginTop:5,children:Object(Tt.jsx)(za,{})})})]})]})},cc=function(e){return Object(Tt.jsx)(Tt.Fragment,{children:"MarketplaceItem"})},ic=Object(h.a)(gn.a)((function(e){e.theme;return"\n  width: 100%;\n  height: 100vw; \n  background-color: rgba(255, 255, 255, 0.5);\n"})),sc=Object(h.a)("div")((function(e){e.theme;return"\n  position: relative;\n  width: 100%;\n  height: 100%;\n"})),oc=Object(h.a)("div")((function(e){e.theme;return"\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  background-image: url('".concat(S.b.ITEM_BG_URL,"');\n")})),uc=Object(h.a)("img")((function(e){e.theme;return"\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: contain;\n  image-rendering: pixelated;\n"})),lc=function(e){var t,n=Object(i.useState)(""),r=Object(St.a)(n,2),a=r[0],c=r[1];return Object(i.useEffect)((function(){c(He.getPunkUrl(e.image,e.cid))}),[e.image,e.cid]),Object(Tt.jsx)(ic,{sx:{maxHeight:null!==(t=e.maxHeight)&&void 0!==t?t:"400px"},children:Object(Tt.jsx)(sc,{children:Object(Tt.jsx)(oc,{children:Object(Tt.jsx)(uc,{sx:{backgroundImage:"url('".concat(a,"')")}})})})})},dc=Object(F.a)(),fc=function(){var e=Object(i.useState)(!1),t=Object(St.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(-1),c=Object(St.a)(a,2),s=c[0],o=c[1],u=Object(i.useState)(""),l=Object(St.a)(u,2),d=l[0],f=l[1],h=Object(i.useState)(""),b=Object(St.a)(h,2),p=b[0],j=b[1],v=Object(W.a)(),m=Pr(),O=rn();Object(i.useEffect)((function(){var e=function(){var e=Object(E.a)(C.a.mark((function e(t){var n,a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.eventType!==te.g.Mint||(null===(n=t.toAddress)||void 0===n?void 0:n.toLowerCase())!==(null===(a=O.account)||void 0===a?void 0:a.toLowerCase())){e.next=9;break}return dc.info("Show mint dialog")(),e.next=4,m.getById(t.punkId.toString());case 4:c=e.sent,o(t.punkId),f(c.data.punk.image),j(c.data.punk.cid),r(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return v.on(te.c.PunkChanged,e),function(){v.off(te.c.PunkChanged,e)}}),[v,m,O.account,r]),Object(i.useEffect)((function(){n&&function(){for(var e=1;e<4;e++)setTimeout((function(){Object(Sr.a)({particleCount:200,spread:100,zIndex:9999})}),225*e)}()}),[n]);var g=function(){f(""),r(!1)};return s<0?Object(Tt.jsx)(Tt.Fragment,{}):Object(Tt.jsxs)(ir.a,{open:n,transitionDuration:500,keepMounted:!0,onClose:g,style:{zIndex:9999},children:[Object(Tt.jsx)(sr.a,{children:"\ud83c\udf89 Mint success!"}),Object(Tt.jsxs)(or.a,{children:[Object(Tt.jsxs)(hr.a,{paddingBottom:1,children:["You have successfully minted ",Object(Tt.jsxs)(Kn.a,{underline:"hover",component:cn.b,to:"/punk/".concat(s),onClick:g,children:[S.b.PUNK_NAME," #",s]})]}),Object(Tt.jsx)(lc,{image:d,cid:p,maxHeight:"300px"})]}),Object(Tt.jsxs)(dr.a,{children:[Object(Tt.jsx)(Yn.a,{onClick:g,children:"Close"}),Object(Tt.jsx)(Yn.a,{component:cn.b,to:"/account/".concat(O.account),variant:"contained",onClick:g,children:"My punks"})]})]})},hc=Object(F.a)(),bc=function(e){var t=Object(i.useState)(!1),n=Object(St.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(!0),s=Object(St.a)(c,2),o=s[0],u=s[1],l=Object(i.useState)(void 0),d=Object(St.a)(l,2),f=d[0],h=d[1],b=Object(i.useState)([]),p=Object(St.a)(b,2),j=p[0],v=p[1],m=Object(i.useState)([]),O=Object(St.a)(m,2),g=O[0],x=O[1],y=Pr(),k=Object(W.a)(),w=Object(un.a)(lt,{variables:{id:e.item.id,offset:0,limit:8},fetchPolicy:"network-only",onCompleted:function(e){v(e.punkEvents.events.map((function(e){return ce.toPunkEvent(e)})))}});Object(i.useEffect)((function(){a(w.loading)}),[w.loading]),Object(i.useEffect)((function(){h(w.error)}),[w.error]);var A=function(){var t=Object(E.a)(C.a.mark((function t(){var n,r,c;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return hc.info("fetchMoreDataAsync",j.length)(),r=null===(n=w.data)||void 0===n?void 0:n.punkEvents.blockHeight.toString(),a(!0),t.prev=3,t.next=6,y.getEventsAsync(e.item.id,j.length,8,r);case 6:c=t.sent,u(c.data.punkEvents.events.length>=8),c.data.punkEvents.events.length>0&&v([].concat(Object(N.a)(j),Object(N.a)(c.data.punkEvents.events.map((function(e){return ce.toPunkEvent(e)}))))),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),h(t.t0);case 14:a(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}(),_=w.refetch,I=Object(i.useCallback)((function(){hc.info("Refreshing punk activity")(),_(),x([])}),[_]);Object(i.useEffect)((function(){var e=function(e){e===te.b.Active&&I()};return k.on(te.c.DocumentVisibilityChanged,e),function(){k.off(te.c.DocumentVisibilityChanged,e)}}),[k,I]);var S=Object(i.useCallback)((function(e){x([ce.toPunkEvent(e)].concat(Object(N.a)(g)))}),[g]);return Object(i.useEffect)((function(){var t=function(t){hc.info("newPunkEvent",t)(),t.punkId===parseInt(e.item.id)&&S(t)};return hc.info("emitter.on",te.c.PunkChanged)(),k.on(te.c.PunkChanged,t),function(){hc.info("emitter.off",te.c.PunkChanged)(),k.off(te.c.PunkChanged,t)}}),[k,e.item.id,S]),Object(Tt.jsx)(Wa,{events:j,newEvents:g,error:f,loading:r,hasMore:o,fetchMoreDataAsync:A})},pc=n(354),jc=Object(F.a)(),vc=function(e){var t=s.a.useRef(!1),n=Object(i.useState)(!1),r=Object(St.a)(n,2),a=r[0],c=r[1],o=Object(i.useState)(!1),u=Object(St.a)(o,1)[0],l=Object(i.useState)({showAny:!1,showBuy:!1,showClaim:!1,showBid:!1,showSell:!1,showAcceptBid:!1,showCancelBid:!1,showCancelSale:!1,showCancelGift:!1}),d=Object(St.a)(l,2),f=d[0],h=d[1],b=Object(i.useState)({type:te.f.UNKNOWN,open:!1,item:e.item}),j=Object(St.a)(b,2),v=j[0],m=j[1],O=rn(),g=rr();s.a.useEffect((function(){return t.current=!0,function(){t.current=!1}}),[]),Object(i.useEffect)((function(){if(t.current){var n,r,a,i,s,o,u,l,d=(null===(n=e.item.owner)||void 0===n?void 0:n.toLowerCase())===(null===(r=O.account)||void 0===r?void 0:r.toLowerCase()),f={showAny:!1,showBuy:!1,showClaim:!1,showBid:!1,showSell:!1,showAcceptBid:!1,showCancelBid:!1,showCancelSale:!1,showCancelGift:!1};e.item.owner&&!T.a.isNullOrWhitespace(e.item.owner)?c(!0):c(!1),e.marketStarted&&!T.a.isNullOrWhitespace(O.account)&&(f.showAny=!0),d||!e.item.offer||!T.a.isNullOrWhitespace(e.item.offer.onlySellTo)&&(null===(a=e.item.offer.onlySellTo)||void 0===a?void 0:a.toLowerCase())!==(null===(i=O.account)||void 0===i?void 0:i.toLowerCase())||(e.item.offer.minAmount.gt(0)?f.showBuy=!0:f.showClaim=!0),d||(null===(s=e.item.bid)||void 0===s?void 0:s.bidder.toLowerCase())===(null===(o=O.account)||void 0===o?void 0:o.toLowerCase())||(f.showBid=!0),d&&!e.item.offer&&(f.showSell=!0),d&&e.item.bid&&(f.showAcceptBid=!0),d||(null===(u=e.item.bid)||void 0===u?void 0:u.bidder.toLowerCase())!==(null===(l=O.account)||void 0===l?void 0:l.toLowerCase())||(f.showCancelBid=!0),d&&e.item.offer&&(e.item.offer.minAmount.gt(0)?f.showCancelSale=!0:f.showCancelGift=!0),h(f)}}),[e.marketStarted,e.item,O.account]);var x=function(){var e=Object(E.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return on.enqueueMessage("Transaction failed"),e.prev=1,e.next=4,g.getMarketInfoAsync();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),jc.error(e.t0)();case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var t=Object(E.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.item.offer){t.next=3;break}throw new Error("".concat(S.b.PUNK_NAME," #").concat(e.item.id," cannot be claimed"));case 3:return t.next=5,g.buyAsync(e.item.id,e.item.offer.minAmount.toFixed());case 5:if(!t.sent){t.next=10;break}on.enqueueMessage("Congratulations! You claimed ".concat(S.b.PUNK_NAME," #").concat(e.item.id)),t.next=12;break;case 10:return t.next=12,x();case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),on.enqueueError(t.t0);case 17:return t.prev=17,t.next=20,e.refetchAsync();case 20:return t.finish(17);case 21:case"end":return t.stop()}}),t,null,[[0,14,17,21]])})));return function(){return t.apply(this,arguments)}}(),k=function(n){t.current&&m(Object(p.a)(Object(p.a)({},v),{},{type:n,open:!0,item:e.item}))},w=function(){var t=Object(E.a)(C.a.mark((function t(n){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=3;break}return t.next=3,x();case 3:return t.next=5,e.refetchAsync();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return a&&f.showAny?Object(Tt.jsxs)(Tt.Fragment,{children:[e.loading?Object(Tt.jsx)(ea.a,{animation:"wave",height:30}):Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsxs)(Wn.a,{spacing:1,direction:"row",children:[(u||f.showBuy)&&Object(Tt.jsx)(Yn.a,{variant:"contained",color:"primary",startIcon:Object(Tt.jsx)(wn,{icon:ar.getBuyEventTypeIcon()}),onClick:function(){k(te.f.ACCEPT_OFFER)},children:S.a.buy}),(u||f.showClaim)&&Object(Tt.jsx)(jn,{variant:"contained",color:"primary",startIcon:Object(Tt.jsx)(wn,{icon:ar.getGiftEventTypeIcon()}),callbackFn:y,children:S.a.claim}),(u||f.showBid)&&Object(Tt.jsx)(Yn.a,{variant:"contained",color:"primary",startIcon:Object(Tt.jsx)(wn,{icon:ar.getPunkEventTypeIcon(te.g.NewBid)}),onClick:function(){k(te.f.BID)},children:S.a.bid}),(u||f.showSell)&&Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)(Yn.a,{variant:"contained",color:"primary",startIcon:Object(Tt.jsx)(wn,{icon:ar.getOfferEventTypeIcon()}),onClick:function(){k(te.f.OFFER)},children:S.a.sell}),Object(Tt.jsx)(Yn.a,{variant:"contained",color:"primary",startIcon:Object(Tt.jsx)(wn,{icon:ar.getGiftEventTypeIcon()}),onClick:function(){k(te.f.GIFT)},children:S.a.gift})]}),(u||f.showAcceptBid)&&Object(Tt.jsx)(Yn.a,{size:"small",variant:"contained",color:"primary",startIcon:Object(Tt.jsx)(wn,{icon:mn.b}),onClick:function(){k(te.f.ACCEPT_BID)},children:S.a.acceptBid})]}),(u||f.showCancelBid||f.showCancelSale||f.showCancelGift)&&Object(Tt.jsxs)(Wn.a,{spacing:1,direction:"row",marginTop:1,children:[(u||f.showCancelBid)&&Object(Tt.jsx)(Yn.a,{size:"small",variant:"contained",color:"error",startIcon:Object(Tt.jsx)(wn,{icon:ar.getPunkEventTypeIcon(te.g.CancelBid)}),onClick:function(){k(te.f.CANCEL_BID)},children:S.a.cancelSale}),(u||f.showCancelSale)&&Object(Tt.jsx)(Yn.a,{size:"small",variant:"contained",color:"error",startIcon:Object(Tt.jsx)(wn,{icon:ar.getCancelSaleEventTypeIcon()}),onClick:function(){k(te.f.CANCEL_OFFER)},children:S.a.cancelSale}),(u||f.showCancelGift)&&Object(Tt.jsx)(Yn.a,{size:"small",variant:"contained",color:"error",startIcon:Object(Tt.jsx)(wn,{icon:ar.getCancelSaleEventTypeIcon()}),onClick:function(){k(te.f.CANCEL_OFFER)},children:S.a.cancelGift})]})]}),Object(Tt.jsx)(xr,{state:v,setState:m,callbackAsync:w})]}):Object(Tt.jsx)(Tt.Fragment,{})},mc=Object(F.a)(),Oc=Object(h.a)(gn.a)((function(e){e.theme;return"\n  position: relative;\n  overflow: auto;\n  width: 100%;\n  min-height: 400px;\n  background-color: rgba(255, 255, 255, 0.5);\n"})),gc=Object(h.a)(dn.a)((function(e){e.theme;return"\n  position: absolute;\n  bottom: 24px;\n  left: 24px;\n  width: calc(100% - 48px);\n"})),xc=function(e){var t,n,r=s.a.useRef(!1),a=Object(ya.a)(),c=Object(ra.a)(a.breakpoints.down("sm")),o=Object(i.useState)(!1),u=Object(St.a)(o,2),l=u[0],d=u[1],f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"network-only",n=s.a.useMemo((function(){return{__typename:te.h.Punk,id:e.id,rank:e.rank,image:e.image,cid:e.cid,attributes:e.attributes}}),[e]),r=s.a.useState(n),a=Object(St.a)(r,2),c=a[0],i=a[1],o=s.a.useState(new Date(0)),u=Object(St.a)(o,2),l=u[0],d=u[1],f=Object(un.a)(dt,{variables:{id:e.id.toString()},notifyOnNetworkStatusChange:!0,fetchPolicy:t,refetchWritePolicy:"overwrite",onCompleted:function(e){i(Object(p.a)(Object(p.a)({},c),{},{owner:e.punkOwner}))}}),h=Object(un.a)(gt,{variables:{id:e.id.toString()},notifyOnNetworkStatusChange:!0,fetchPolicy:t,refetchWritePolicy:"overwrite",onCompleted:function(e){i(Object(p.a)(Object(p.a)({},c),{},{bid:ce.toMarketBid(e.marketBid)}))}}),b=Object(un.a)(xt,{variables:{id:e.id.toString()},notifyOnNetworkStatusChange:!0,fetchPolicy:t,refetchWritePolicy:"overwrite",onCompleted:function(e){i(Object(p.a)(Object(p.a)({},c),{},{offer:ce.toMarketOffer(e.marketOffer)}))}}),j=f.error||h.error||b.error,v=f.loading||h.loading||b.loading,m=function(){var t=Object(E.a)(C.a.mark((function t(){var r,a,c;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(aa.info("refetchAsync",(new Date).getTime(),l.getTime())(),!((new Date).getTime()>=l.getTime()+500)){t.next=13;break}return d(new Date),t.prev=3,t.next=6,Promise.all([f.refetch().then((function(e){return r=e.data.punkOwner})),h.refetch().then((function(e){return a=e.data.marketBid})),b.refetch().then((function(e){return c=e.data.marketOffer}))]);case 6:aa.info("Refetching punk ".concat(e.id),r,a,c)(),i(Object(p.a)(Object(p.a)({},n),{},{owner:r,bid:a,offer:c})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),aa.error(t.t0)();case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(){return t.apply(this,arguments)}}();return{punkExtended:c,error:j,loading:v,refetchAsync:m}}(e.item),h=f.punkExtended,b=f.loading,j=f.error,v=f.refetchAsync,m=Object(un.a)(Ot,{fetchPolicy:"network-only"}),O=rn(),g=Object(W.a)(),x=m.refetch;Object(i.useEffect)((function(){return r.current=!0,function(){r.current=!1}}),[]),Object(i.useEffect)((function(){j&&mc.error(j)()}),[j]),Object(i.useEffect)((function(){if(r.current){var e,t=null===(e=m.data)||void 0===e?void 0:e.marketInfo;t&&r.current&&d(t.marketStarted)}}),[m.data]),Object(i.useEffect)((function(){var e=function(e){r.current&&e===te.b.Active&&v()};return g.on(te.c.DocumentVisibilityChanged,e),function(){g.off(te.c.DocumentVisibilityChanged,e)}}),[g,v]),Object(i.useEffect)((function(){var e=function(){r.current&&x()};return g.on(te.c.MarketChanged,e),function(){g.off(te.c.MarketChanged,e)}}),[g,x]),Object(i.useEffect)((function(){var t=function(t){r.current&&t.punkId===parseInt(e.item.id)&&v()};return g.on(te.c.PunkChanged,t),function(){g.off(te.c.PunkChanged,t)}}),[g,e.item.id,v]);var y=function(e){return yn.formatViteTooltip(e)},k=function(e){return e.gt(0)?yn.formatVite(e):"0"};return Object(Tt.jsx)(Oc,{children:Object(Tt.jsxs)(dn.a,{sx:{p:3},children:[Object(Tt.jsxs)(Wn.a,{direction:"row",justifyContent:"space-between",children:[Object(Tt.jsxs)(Mt.a,{variant:"h5",fontSize:c?"1.25rem":"1.5rem",color:"primary",paragraph:!0,children:[S.b.PUNK_NAME," #",e.item.id]}),Object(Tt.jsx)(dn.a,{children:Object(Tt.jsx)(Bn,{title:Object(Tt.jsx)("span",{children:"Rarity rank"}),placement:"bottom",arrow:!0,children:Object(Tt.jsx)(Pt.a,{size:"small",icon:Object(Tt.jsx)(wn,{icon:vn.a,sx:{fontSize:"small",ml:1}}),sx:{fontSize:"0.7rem"},label:e.item.rank})})})]}),e.item.attributes.length>0&&Object(Tt.jsx)(Wn.a,{spacing:1,direction:"row",sx:{mb:2},children:null===(t=e.item.attributes)||void 0===t?void 0:t.map((function(e){return Object(Tt.jsx)(Pt.a,{label:e,variant:"outlined",size:c?"small":"medium"},e)}))}),j?Object(Tt.jsx)(bn,{message:fe.formatMessage(j),type:"warning"}):Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsxs)(Wn.a,{spacing:1,direction:"row",sx:{mb:2},children:[Object(Tt.jsxs)(Mt.a,{display:"inline",children:[Object(Tt.jsx)("b",{children:"Owner"}),":"]}),b?Object(Tt.jsx)(ea.a,{animation:"wave",height:24,width:"40%",sx:{display:"inline"}}):Object(Tt.jsx)(Mt.a,{display:"inline",component:"div",children:h.owner?Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)(Ra,{type:oa.Address,value:h.owner,children:Object(Tt.jsx)(Bn,{title:h.owner,children:Object(Tt.jsx)(dn.a,{sx:{mr:1},component:"span",children:T.a.truncateStringInTheMiddle(h.owner,20,5)})})}),O.account&&h.owner.toLowerCase()===O.account.toLowerCase()&&Object(Tt.jsx)(Pt.a,{size:"small",icon:Object(Tt.jsx)(pc.a,{}),label:"You own this punk",variant:"filled",sx:{borderRadius:1},color:"secondary"})]}):Object(Tt.jsx)(Tt.Fragment,{children:"Not minted yet."})})]}),Object(Tt.jsxs)(Wn.a,{spacing:1,direction:"row",sx:{mb:2},children:[Object(Tt.jsxs)(Mt.a,{display:"inline",children:[Object(Tt.jsx)("b",{children:"Image"}),":"]}),Object(Tt.jsx)(Kn.a,{underline:"hover",href:He.getPunkIpfsUrlByCid(h.cid),target:"_blank",children:Object(Tt.jsx)(Bn,{title:"Image stored on IPFS",children:Object(Tt.jsxs)(dn.a,{children:[Object(Tt.jsx)(wn,{sx:{fontSize:"1.2em",mr:.5,verticalAlign:"text-bottom"},icon:vn.b}),Object(Tt.jsx)(dn.a,{component:"span",children:"Frozen"})]})})})]}),Object(Tt.jsxs)(Wn.a,{spacing:1,direction:"row",sx:{mb:2},children:[Object(Tt.jsxs)(Mt.a,{display:"inline",children:[Object(Tt.jsx)("b",{children:"Current bid"}),":"]}),b?Object(Tt.jsx)(ea.a,{animation:"wave",height:24,width:"60%",sx:{display:"inline"}}):Object(Tt.jsx)(Mt.a,{display:"inline",children:h.bid?Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)(Nn,{title:y(h.bid.amount),children:Object(Tt.jsxs)("span",{children:[k(h.bid.amount)," ",S.b.CURRENCY_NAME]})}),"\xa0by ",Object(Tt.jsx)(Ra,{type:oa.Address,value:h.bid.bidder,children:Object(Tt.jsx)(Bn,{title:h.bid.bidder,children:Object(Tt.jsx)("span",{children:T.a.truncateStringInTheMiddle(h.bid.bidder,10,5)})})})]}):Object(Tt.jsx)(Tt.Fragment,{children:"-"})})]}),Object(Tt.jsx)(Wn.a,{spacing:1,direction:"row",sx:{mb:2},children:b||h.offer?Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)(Mt.a,{display:"inline",children:(null===(n=h.offer)||void 0===n?void 0:n.minAmount.lte(0))?Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)("b",{children:"Gift"}),":"]}):Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)("b",{children:"Buy price"}),":"]})}),b?Object(Tt.jsx)(ea.a,{animation:"wave",height:24,width:"30%",sx:{display:"inline"}}):Object(Tt.jsx)(Mt.a,{display:"inline",children:h.offer?Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)(Nn,{title:y(h.offer.minAmount),children:Object(Tt.jsxs)("span",{children:[k(h.offer.minAmount)," ",S.b.CURRENCY_NAME]})}),h.offer.onlySellTo&&!T.a.isNullOrWhitespace(h.offer.onlySellTo)&&Object(Tt.jsxs)(Tt.Fragment,{children:["\xa0(",Object(Tt.jsx)(Ra,{type:oa.Address,value:h.offer.onlySellTo,children:Object(Tt.jsx)(Bn,{title:h.offer.onlySellTo,children:Object(Tt.jsx)("span",{children:T.a.truncateStringInTheMiddle(h.offer.onlySellTo,10,5)})})}),")"]})]}):Object(Tt.jsx)(Tt.Fragment,{})})]}):Object(Tt.jsx)(Pt.a,{label:"Not for sale",variant:"filled",sx:{borderRadius:1}})})]}),Object(Tt.jsx)(gc,{children:Object(Tt.jsx)(vc,{loading:b,marketStarted:l,item:h,refetchAsync:v})})]})})},yc=function(e){var t=Object(sn.g)().id,n=Object(un.a)(ft,{variables:{id:null!==t&&void 0!==t?t:"-1"},fetchPolicy:"network-only"}),r=n.error,a=n.loading;return r?Object(Tt.jsx)(bn,{message:fe.formatMessage(r),type:"warning"}):Object(Tt.jsx)(Tt.Fragment,{children:a||!n.data?Object(Tt.jsx)(bn,{message:"Loading...",type:"default"}):Object(Tt.jsx)(Vt.a,{maxWidth:"lg",children:Object(Tt.jsxs)(ln.a,{container:!0,spacing:3,direction:"row",marginBottom:3,children:[Object(Tt.jsx)(ln.a,{item:!0,xs:12,md:5,children:Object(Tt.jsx)(lc,{image:n.data.punk.image,cid:n.data.punk.cid})}),Object(Tt.jsx)(ln.a,{item:!0,xs:12,md:7,children:Object(Tt.jsx)(xc,{item:n.data.punk})}),Object(Tt.jsx)(ln.a,{item:!0,xs:12,children:Object(Tt.jsx)(bc,{item:n.data.punk})})]})})})},kc=n(336),wc=s.a.forwardRef((function(e,t){return Object(Tt.jsx)(kc.a,Object(p.a)({direction:"up",ref:t},e))})),Ac=function(){var e=Object(i.useState)(!1),t=Object(St.a)(e,2),n=t[0],r=t[1],a=Object(W.a)();Object(i.useEffect)((function(){var e=function(e){r(e)};return a.on(te.c.ConfirmTransactionDialog,e),function(){a.off(te.c.ConfirmTransactionDialog,e)}}),[a,r]);var c=function(){r(!1)};return Object(Tt.jsxs)(ir.a,{open:n,TransitionComponent:wc,keepMounted:!0,onClose:c,style:{zIndex:9999},children:[Object(Tt.jsx)(sr.a,{children:"ViteConnect"}),Object(Tt.jsx)(or.a,{children:Object(Tt.jsx)(hr.a,{children:"Please confirm transaction on VITE Wallet App"})}),Object(Tt.jsx)(dr.a,{children:Object(Tt.jsx)(Yn.a,{onClick:c,color:"primary",children:"Close"})})]})},_c=n(218),Cc=n.n(_c),Ec=n(368),Ic=n(355),Sc=Object(F.a)(),Bc=Object(Ic.a)(Vt.a)((function(e){e.theme;return"\n  position: absolute;\n  top: 64px;\n  right: 0;\n  width: 100%;\n  z-index: 9999;\n"})),Nc=Object(Ic.a)(Ec.a)((function(e){e.theme;return"\n  float: right;\n  background-color: rgba(255, 255, 255);\n"})),Mc=function(e){var t=s.a.useRef(!1),n=Object(i.useState)({currentQuota:new w.a("0"),maxQuota:new w.a("0"),stakeAmount:new w.a("0")}),r=Object(St.a)(n,2),a=r[0],c=r[1],o=Object(i.useState)(!1),u=Object(St.a)(o,2),l=u[0],d=u[1],f=Vn(),h=Object(W.a)();s.a.useEffect((function(){return t.current=!0,function(){t.current=!1}}),[]),Object(i.useEffect)((function(){var e;return l&&(e=setInterval(Object(E.a)(C.a.mark((function n(){var r,a;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.getContractQuota();case 2:r=n.sent,Sc.info(r.data.quota)(),t.current&&r.data.quota&&((a=r.data.quota).currentQuota.gte(a.maxQuota)&&(clearInterval(e),d(!1)),c({currentQuota:a.currentQuota,maxQuota:a.maxQuota,stakeAmount:a.stakeAmount}));case 5:case"end":return n.stop()}}),n)}))),2e3)),function(){Sc.info("clearInterval(interval)")(),e&&clearInterval(e)}}),[f,l]),Object(i.useEffect)((function(){var e=function(e,n){t.current&&S.b.QUOTA_THRESHOLD.gte(n.currentQuota.minus(S.b.QUOTA_THRESHOLD))&&(c({currentQuota:n.currentQuota,maxQuota:n.maxQuota,stakeAmount:n.stakeAmount}),d(!0))};return h.on(te.c.QuotaChanged,e),function(){Sc.info("emitter.off(GlobalEvent.QuotaChanged, handleEvent)")(),h.off(te.c.QuotaChanged,e)}}),[h]);var b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.b.CURRENCY_DECIMALS;return yn.formatBigNumber(e,0,t)};return!l||a.maxQuota.eq(0)?Object(Tt.jsx)(Tt.Fragment,{}):Object(Tt.jsx)(Bc,{maxWidth:"xl",children:Object(Tt.jsxs)(Nc,{icon:!1,severity:"info",onClose:function(){d(!1)},sx:{mt:3,mr:2},children:[Object(Tt.jsx)(Mt.a,{marginBottom:1,paragraph:!0,children:Object(Tt.jsx)("b",{children:"Contract quota is recharging..."})}),Object(Tt.jsx)(Nn,{title:b(a.currentQuota),placement:"left",arrow:!0,children:Object(Tt.jsxs)(Mt.a,{marginBottom:1,paragraph:!0,children:[b(a.currentQuota,6)," / ",b(a.maxQuota,6)]})}),Object(Tt.jsxs)(Mt.a,{marginBottom:1,children:["You can help by staking ",S.b.CURRENCY_NAME]}),Object(Tt.jsxs)(Wn.a,{spacing:1,direction:"row",children:[Object(Tt.jsx)(Mt.a,{children:"What does this mean?"}),Object(Tt.jsx)(Yn.a,{variant:"outlined",size:"small",href:S.b.QUOTA_WIKI_URL,target:"_blank",endIcon:Object(Tt.jsx)(Cc.a,{}),children:"More info"})]})]})})},Pc=Object(F.a)(),Tc=function(e){var t,n=Object(i.useState)(te.b.Unknown),r=Object(St.a)(n,2),a=r[0],c=r[1],s=Object(W.a)(),o=Ke(),u=null!==(t=I.a.BASENAME)&&void 0!==t?t:"";return on.snackbar=Object(b.b)(),Object(i.useEffect)((function(){var e=function(){var e=Object(E.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.datasource.initAsync(o.network);case 3:s.emitVisibilityChanged(T.a.getDocumentState()),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return s.on(te.c.ReInit,e),function(){Pc.info("emitter.off(GlobalEvent.ReInit, handleEvent)")(),s.off(te.c.ReInit,e)}}),[s,o.datasource,o.network]),Object(i.useEffect)((function(){var e=function(){var e=Object(E.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=T.a.getDocumentState(),a!==t&&(te.b.Active,Pc.info("visibilitychange before ".concat(a," after ").concat(t))(),c(t),s.emitVisibilityChanged(t));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return document.addEventListener("visibilitychange",e),function(){Pc.info("removeEventListener visibilitychange")(),document.removeEventListener("visibilitychange",e)}}),[s,a,o.datasource,o.network]),Object(Tt.jsx)(Jt,{children:Object(Tt.jsxs)(cn.a,{basename:u,children:[Object(Tt.jsx)(Sa,{}),Object(Tt.jsxs)($t,{children:[Object(Tt.jsx)(Mc,{}),Object(Tt.jsxs)(sn.c,{children:[Object(Tt.jsx)(sn.a,{path:"/account/:address",element:Object(Tt.jsx)(Ir,{})}),Object(Tt.jsx)(sn.a,{path:"/marketplace",element:Object(Tt.jsx)(ac,{})}),Object(Tt.jsx)(sn.a,{path:"/marketplace/:tab",element:Object(Tt.jsx)(ac,{})}),Object(Tt.jsx)(sn.a,{path:"/marketplace/item/:id",element:Object(Tt.jsx)(cc,{})}),Object(Tt.jsx)(sn.a,{path:"/punk/:id",element:Object(Tt.jsx)(yc,{})}),Object(Tt.jsx)(sn.a,{path:"/test-image",element:Object(Tt.jsx)(Ur,{})}),Object(Tt.jsx)(sn.a,{path:"/test-list",element:Object(Tt.jsx)(qr,{})}),Object(Tt.jsx)(sn.a,{path:"/test",element:Object(Tt.jsx)(Br,{})}),Object(Tt.jsx)(sn.a,{path:"/",element:Object(Tt.jsx)(pa,{})})]}),Object(Tt.jsx)(fc,{}),Object(Tt.jsx)(Ac,{})]})]})})},Fc=Object(h.a)("div")((function(e){e.theme;return"\n  width: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  background-image: url('".concat(S.b.BG_URL,"');\n")})),Rc=function(){var e=s.a.useMemo((function(){return It()}),[]);return Object(Tt.jsx)(d.a,{dateAdapter:f.a,children:Object(Tt.jsx)(Fc,{children:Object(Tt.jsx)(b.a,{maxSnack:3,children:Object(Tt.jsx)(l.a,{client:e,children:Object(Tt.jsx)(en,{children:Object(Tt.jsx)(an,{children:Object(Tt.jsx)(Tc,{})})})})})})})},Lc=(n(283),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,416)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))});u.a.render(Object(Tt.jsxs)(c.a,{theme:ia,children:[Object(Tt.jsx)(a.a,{}),Object(Tt.jsx)(Rc,{})]}),document.querySelector("#root")),Lc()},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(19),a=n(20),c=n(46),i=n(45),s=n(204),o=n.n(s),u=n(10),l=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"emitReInit",value:function(){this.emit(u.c.ReInit)}},{key:"emitVisibilityChanged",value:function(e){this.emit(u.c.DocumentVisibilityChanged,e)}},{key:"emitConfirmTransactionDialog",value:function(e){this.emit(u.c.ConfirmTransactionDialog,e)}},{key:"emitConnectWalletDialog",value:function(e){this.emit(u.c.ConnectWalletDialog,e)}},{key:"emitQuotaChanged",value:function(e,t){this.emit(u.c.QuotaChanged,e,t)}},{key:"emitMarketChanged",value:function(e){this.emit(u.c.MarketChanged,e)}},{key:"emitPunkChanged",value:function(e){this.emit(u.c.PunkChanged,e)}},{key:"emitPunkFilterValuesChanged",value:function(e,t){this.emit(u.c.PunkFilterValuesChanged,e,t)}}]),n}(o.a),d=new l,f=function(){return d}},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(19),a=n(20),c=n(23),i=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"USE_IPFS",get:function(){return this._useIpfs},set:function(e){this._useIpfs=e}},{key:"IS_PRODUCTION",get:function(){return!0}},{key:"CONTRACT_ADDRESS",get:function(){return"vite_fd06f4ef9a32fcabcdcae1857c1cab18b496ef1eafd1b4edc1"}},{key:"PRE_MINT_HEIGHT",get:function(){return new c.BigNumber("1150")}},{key:"EXPLORER_URL",get:function(){return"https://vitescan.io/"}},{key:"ENABLE_LOGGER",get:function(){return!1}},{key:"ENABLE_MNEMONIC_LOGIN",get:function(){return!1}},{key:"NETWORK_ID",get:function(){return parseInt("1")}},{key:"BASENAME",get:function(){return""}}]),e}();i._useIpfs=!1},41:function(e,t,n){"use strict";var r,a;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),function(e){e.ASC="ASC",e.DESC="DESC"}(r||(r={})),function(e){e.BID="BID",e.ID="ID",e.OFFER="OFFER",e.RANK="RANK"}(a||(a={}))},52:function(e,t,n){"use strict";n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return C})),n.d(t,"h",(function(){return T})),n.d(t,"c",(function(){return v})),n.d(t,"f",(function(){return m})),n.d(t,"a",(function(){return O})),n.d(t,"g",(function(){return x})),n.d(t,"b",(function(){return y}));var r,a=n(3),c=n.n(a),i=n(5),s=n(19),o=n(20),u=n(120),l=n(74),d=n(46),f=n(45),h=n(206),b=n.n(h),p=n(26);!function(e){e.Web="Web",e.Session="Session"}(r||(r={}));var j,v=function(){function e(t,n){Object(s.a)(this,e),this._type=void 0,this.active=void 0,this.accounts=[],this._type=t,this.baseInitinit(n)}return Object(o.a)(e,[{key:"type",get:function(){return this._type}},{key:"baseInitinit",value:function(e){var t=this;e&&(this.active=e.active?this.createAccount(e.active):void 0,e.accounts&&Array.isArray(e.accounts)&&e.accounts.forEach((function(e){t.accounts.push(t.createAccount(e))}))),this.accounts||(this.accounts=[])}}],[{key:"fromJS",value:function(e){switch((e="object"===typeof e?e:{})._type){case r.Web:return new m(e);case r.Session:return new O(e)}}}]),e}(),m=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,r.Web,e)).mnemonic=void 0,a.init(e),a}return Object(o.a)(n,[{key:"init",value:function(e){e&&(this.mnemonic=e.mnemonic)}},{key:"createAccount",value:function(e){return new x(e)}}]),n}(v),O=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,r.Session,e)).session=void 0,a.timestamp=void 0,a.init(e),a}return Object(o.a)(n,[{key:"init",value:function(e){e&&(this.session=e.session,this.timestamp=e.timestamp)}},{key:"createAccount",value:function(e){return new y(e)}}]),n}(v);!function(e){e.Web="Web",e.Session="Session"}(j||(j={}));var g=function(){function e(t,n){Object(s.a)(this,e),this._type=void 0,this.id=void 0,this.address=void 0,this._type=t,this.baseInit(n)}return Object(o.a)(e,[{key:"type",get:function(){return this._type}},{key:"baseInit",value:function(e){e&&(this.id=e.id,this.address=e.address)}}],[{key:"fromJS",value:function(e){switch((e="object"===typeof e?e:{})._type){case r.Web:return new x(e);case r.Session:return new y(e)}}}]),e}(),x=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,j.Web,e)).privateKey=void 0,r.init(e),r}return Object(o.a)(n,[{key:"init",value:function(e){e&&(this.privateKey=e.privateKey)}}]),n}(g),y=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,j.Session,e)}return n}(g),k=Object(p.a)(),w=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,a){var c;return Object(s.a)(this,n),(c=t.call(this,r,a))._walletManager=void 0,c._walletManager=e,c.on("connect",(function(e,t){k.info("WalletConnector.connect",e,t)();var n=t.params[0].accounts;c.saveSession(n)})),c.on("disconnect",(function(e,t){k.info("WalletConnector.disconnect",e,t)(),c.stopBizHeartBeat(),c._walletManager.removeWallet()})),c.on("session_update",(function(e,t){k.info("WalletConnector.session_update",e,t)();var n=t[0];n&&n.accounts&&c.saveSession(n.accounts)})),c}return Object(o.a)(n,[{key:"uri",get:function(){return Object(u.a)(Object(l.a)(n.prototype),"uri",this)}},{key:"on",value:function(e,t){return Object(u.a)(Object(l.a)(n.prototype),"on",this).call(this,e,t)}},{key:"off",value:function(e,t){return Object(u.a)(Object(l.a)(n.prototype),"off",this).call(this,e,t)}},{key:"saveSession",value:function(e){if(!e||!e[0])throw new Error("address is null");for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(new y({id:n.toString(),address:r}))}var a=new O({active:t[0],accounts:t,session:this.session,timestamp:(new Date).getTime()});this._walletManager.setWallet(a)}},{key:"updateSession",value:function(){var e=this._walletManager.getWallet();e&&e instanceof O&&(e.timestamp=(new Date).getTime(),this._walletManager.updateWalletStore(e))}},{key:"createSession",value:function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)(Object(l.a)(n.prototype),"createSession",this).call(this);case 2:return e.abrupt("return",this.uri);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendTransactionAsync",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t,n,r,a=this,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,n=new Array(t),r=0;r<t;r++)n[r]=i[r];return e.abrupt("return",new Promise((function(e,t){a.on("disconnect",(function(){t("Request aborted due to disconnect.")})),a.sendCustomRequest({method:"vite_signAndSendTx",params:n}).then((function(t){a.updateSession(),e(t)})).catch((function(e){t(e)}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"signMessageAsync",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t,n,r,a=this,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,n=new Array(t),r=0;r<t;r++)n[r]=i[r];return e.abrupt("return",new Promise((function(e,t){a.on("disconnect",(function(){t("Request aborted due to disconnect.")})),a.sendCustomRequest({method:"vite_signMessage",params:n}).then((function(t){a.updateSession(),e(t)})).catch((function(e){t(e)}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"killSessionAsync",value:function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)(Object(l.a)(n.prototype),"killSession",this).call(this);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(b.a),A=n(18),_=Object(p.a)(),C=function(){function e(t){Object(s.a)(this,e),this._walletManager=void 0,this._walletManager=t}return Object(o.a)(e,[{key:"session",get:function(){return this._walletManager.getValidSession()}},{key:"createConnector",value:function(e){var t=this._walletManager.getActiveAccount(),n={bridge:e.connectorUrl,session:this.session},r=t?{lastAccount:t.address}:void 0;return new w(this._walletManager,n,r)}},{key:"create",value:function(e){var t=this.createConnector(e);return this.session||t.createSession().then((function(){return _.info("IWalletConnector connected",t.uri)()})),t}},{key:"createAsync",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.createConnector(t),this.session){e.next=7;break}return e.next=4,A.a.timeout(1e3);case 4:return e.next=6,n.createSession();case 6:_.info("IWalletConnector connected",n.uri)();case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),E=n(49),I=n(12),S=Object(p.a)(),B=function(){function e(){Object(s.a)(this,e),this._webWalletKey=I.b.WEB_WALLET_STORAGE_SPACE,this._sessionWalletKey=I.b.SESSION_WALLET_STORAGE_SPACE}return Object(o.a)(e,[{key:"clear",value:function(){localStorage.removeItem(this._webWalletKey),sessionStorage.removeItem(this._sessionWalletKey)}},{key:"getItem",value:function(){var e;try{(e=localStorage.getItem(this._webWalletKey))||(e=sessionStorage.getItem(this._sessionWalletKey))}catch(t){return void S.error(t)()}if(e)try{return v.fromJS(JSON.parse(e))}catch(t){return void S.error(t)()}}},{key:"setItem",value:function(e){var t=JSON.stringify(e);try{switch(e.type){case r.Web:localStorage.setItem(this._webWalletKey,t);break;case r.Session:sessionStorage.setItem(this._sessionWalletKey,t);break;default:throw new Error("Wallet type '".concat(e.type,"' is not supported."))}}catch(n){S.error(n)()}}}]),e}(),N=Object(p.a)(),M=function(){function e(){Object(s.a)(this,e),this._store=void 0,this._wallet=void 0,this._mnemonicDeriveIndex=0,this._setWalletCallback=void 0,this._store=new B}return Object(o.a)(e,[{key:"initWallet",value:function(){var e=this._store.getItem();e&&(this._wallet=e,this._mnemonicDeriveIndex=e.accounts.length,this.updateWallet())}},{key:"onSetWalletCallback",set:function(e){this._setWalletCallback=e}},{key:"getWallet",value:function(){return this._wallet}},{key:"setWallet",value:function(e){this._wallet=e,this.updateWalletStore(e),this.updateWallet()}},{key:"updateWallet",value:function(){this._setWalletCallback&&this._setWalletCallback(this._wallet)}},{key:"updateWalletStore",value:function(e){e&&this._store.setItem(e)}},{key:"createWebWallet",value:function(e){if(this.validateMnemonic(e)){this.resetWallet();var t=this.createWebWalletAccount(e,0),n=new m({active:t,mnemonic:e,accounts:[t]});return this.setWallet(n),n}}},{key:"removeWallet",value:function(){this.resetWallet(),this.updateWallet()}},{key:"getAccountByAddress",value:function(e){var t,n;return null===(t=this._wallet)||void 0===t||null===(n=t.accounts)||void 0===n?void 0:n.find((function(t){return t.address===e}))}},{key:"addAccount",value:function(){if(this._wallet instanceof m){var e=this.createWebWalletAccount(this._wallet.mnemonic);return this._wallet.accounts.push(e),this.setActiveAccount(e),e}}},{key:"getActiveAccount",value:function(){var e;return null===(e=this._wallet)||void 0===e?void 0:e.active}},{key:"setActiveAccount",value:function(e){return!!this._wallet&&(this._wallet.active=e,this._store.setItem(this._wallet),this.updateWallet(),!0)}},{key:"getAccounts",value:function(){return this._wallet?this._wallet.accounts:[]}},{key:"getValidSession",value:function(){var e=this._store.getItem();if(e&&e instanceof O){if((new Date).getTime()-e.timestamp<6e5)return e.session;N.info("Found expired session.",e)()}}},{key:"resetWallet",value:function(){this._wallet=void 0,this._mnemonicDeriveIndex=0,this._store.clear()}},{key:"createWebWalletAccount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._mnemonicDeriveIndex,n=E.wallet.deriveAddress({mnemonics:e,index:t}),r=n.privateKey,a=new x({id:t.toString(),privateKey:r,address:E.wallet.createAddressByPrivateKey(r).address});return this._mnemonicDeriveIndex=t+1,a}},{key:"validateMnemonic",value:function(e){return!!e&&E.wallet.validateMnemonics(e)}}]),e}(),P=new M,T=function(){return P}}},[[284,1,2]]]);
//# sourceMappingURL=main.654f9086.chunk.js.map